import{C as e}from"./app-BvgPJ94i.js";import{B as t,E as n,Ft as r,M as i,d as a,m as o,v as s}from"./mermaid-b5860b54-Dc0NswSo.js";import{t as c}from"./line-BbTY4l6m.js";import{n as l}from"./createText-2e5e7dd3-dnw7t4tj.js";var u=(e,t,n,r)=>{t.forEach(t=>{d[t](e,n,r)})},d={extension:(e,t,r)=>{n.trace(`Making markers for `,r),e.append(`defs`).append(`marker`).attr(`id`,r+`_`+t+`-extensionStart`).attr(`class`,`marker extension `+t).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,7 L18,13 V 1 Z`),e.append(`defs`).append(`marker`).attr(`id`,r+`_`+t+`-extensionEnd`).attr(`class`,`marker extension `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 V 13 L18,7 Z`)},composition:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-compositionStart`).attr(`class`,`marker composition `+t).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-compositionEnd`).attr(`class`,`marker composition `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`)},aggregation:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-aggregationStart`).attr(`class`,`marker aggregation `+t).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-aggregationEnd`).attr(`class`,`marker aggregation `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`)},dependency:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-dependencyStart`).attr(`class`,`marker dependency `+t).attr(`refX`,6).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 5,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-dependencyEnd`).attr(`class`,`marker dependency `+t).attr(`refX`,13).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L14,7 L9,1 Z`)},lollipop:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-lollipopStart`).attr(`class`,`marker lollipop `+t).attr(`refX`,13).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`circle`).attr(`stroke`,`black`).attr(`fill`,`transparent`).attr(`cx`,7).attr(`cy`,7).attr(`r`,6),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-lollipopEnd`).attr(`class`,`marker lollipop `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`circle`).attr(`stroke`,`black`).attr(`fill`,`transparent`).attr(`cx`,7).attr(`cy`,7).attr(`r`,6)},point:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-pointEnd`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,6).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,12).attr(`markerHeight`,12).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 0 0 L 10 5 L 0 10 z`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-pointStart`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,4.5).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,12).attr(`markerHeight`,12).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 0 5 L 10 10 L 10 0 z`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`)},circle:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-circleEnd`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,11).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`circle`).attr(`cx`,`5`).attr(`cy`,`5`).attr(`r`,`5`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-circleStart`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,-1).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`circle`).attr(`cx`,`5`).attr(`cy`,`5`).attr(`r`,`5`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`)},cross:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-crossEnd`).attr(`class`,`marker cross `+t).attr(`viewBox`,`0 0 11 11`).attr(`refX`,12).attr(`refY`,5.2).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 l 9,9 M 10,1 l -9,9`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,2).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-crossStart`).attr(`class`,`marker cross `+t).attr(`viewBox`,`0 0 11 11`).attr(`refX`,-1).attr(`refY`,5.2).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 l 9,9 M 10,1 l -9,9`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,2).style(`stroke-dasharray`,`1,0`)},barb:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-barbEnd`).attr(`refX`,19).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,14).attr(`markerUnits`,`strokeWidth`).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 19,7 L9,13 L14,7 L9,1 Z`)}},f=u;function p(e,t){t&&e.attr(`style`,t)}function m(t){let n=e(document.createElementNS(`http://www.w3.org/2000/svg`,`foreignObject`)),r=n.append(`xhtml:div`),i=t.label,a=t.isNode?`nodeLabel`:`edgeLabel`;return r.html(`<span class="`+a+`" `+(t.labelStyle?`style="`+t.labelStyle+`"`:``)+`>`+i+`</span>`),p(r,t.labelStyle),r.style(`display`,`inline-block`),r.style(`white-space`,`nowrap`),r.attr(`xmlns`,`http://www.w3.org/1999/xhtml`),n.node()}var h=(e,t,r,i)=>{let c=e||``;if(typeof c==`object`&&(c=c[0]),o(s().flowchart.htmlLabels))return c=c.replace(/\\n|\n/g,`<br />`),n.debug(`vertexText`+c),m({isNode:i,label:a(c).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(`:`,` `)}'></i>`),labelStyle:t.replace(`fill:`,`color:`)});{let e=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);e.setAttribute(`style`,t.replace(`color:`,`fill:`));let n=[];n=typeof c==`string`?c.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(c)?c:[];for(let t of n){let n=document.createElementNS(`http://www.w3.org/2000/svg`,`tspan`);n.setAttributeNS(`http://www.w3.org/XML/1998/namespace`,`xml:space`,`preserve`),n.setAttribute(`dy`,`1em`),n.setAttribute(`x`,`0`),r?n.setAttribute(`class`,`title-row`):n.setAttribute(`class`,`row`),n.textContent=t.trim(),e.appendChild(n)}return e}},g=async(t,n,r,c)=>{let u,d=n.useHtmlLabels||o(s().flowchart.htmlLabels);u=r||`node default`;let f=t.insert(`g`).attr(`class`,u).attr(`id`,n.domId||n.id),p=f.insert(`g`).attr(`class`,`label`).attr(`style`,n.labelStyle),m;m=n.labelText===void 0?``:typeof n.labelText==`string`?n.labelText:n.labelText[0];let g=p.node(),_;_=n.labelType===`markdown`?l(p,i(a(m),s()),{useHtmlLabels:d,width:n.width||s().flowchart.wrappingWidth,classes:`markdown-node-label`}):g.appendChild(h(i(a(m),s()),n.labelStyle,!1,c));let v=_.getBBox(),y=n.padding/2;if(o(s().flowchart.htmlLabels)){let t=_.children[0],n=e(_),r=t.getElementsByTagName(`img`);if(r){let e=m.replace(/<img[^>]*>/g,``).trim()===``;await Promise.all([...r].map(t=>new Promise(n=>{function r(){if(t.style.display=`flex`,t.style.flexDirection=`column`,e){let e=s().fontSize?s().fontSize:window.getComputedStyle(document.body).fontSize,n=parseInt(e,10)*5+`px`;t.style.minWidth=n,t.style.maxWidth=n}else t.style.width=`100%`;n(t)}setTimeout(()=>{t.complete&&r()}),t.addEventListener(`error`,r),t.addEventListener(`load`,r)})))}v=t.getBoundingClientRect(),n.attr(`width`,v.width),n.attr(`height`,v.height)}return d?p.attr(`transform`,`translate(`+-v.width/2+`, `+-v.height/2+`)`):p.attr(`transform`,`translate(0, `+-v.height/2+`)`),n.centerLabel&&p.attr(`transform`,`translate(`+-v.width/2+`, `+-v.height/2+`)`),p.insert(`rect`,`:first-child`),{shapeSvg:f,bbox:v,halfPadding:y,label:p}},_=(e,t)=>{let n=t.node().getBBox();e.width=n.width,e.height=n.height};function v(e,t,n,r){return e.insert(`polygon`,`:first-child`).attr(`points`,r.map(function(e){return e.x+`,`+e.y}).join(` `)).attr(`class`,`label-container`).attr(`transform`,`translate(`+-t/2+`,`+n/2+`)`)}function y(e,t){return e.intersect(t)}function b(e,t,n,r){var i=e.x,a=e.y,o=i-r.x,s=a-r.y,c=Math.sqrt(t*t*s*s+n*n*o*o),l=Math.abs(t*n*o/c);r.x<i&&(l=-l);var u=Math.abs(t*n*s/c);return r.y<a&&(u=-u),{x:i+l,y:a+u}}function x(e,t,n){return b(e,t,t,n)}function S(e,t,n,r){var i=t.y-e.y,a,o=e.x-t.x,s,c=t.x*e.y-e.x*t.y,l,u,d,f=i*n.x+o*n.y+c,p=i*r.x+o*r.y+c,m,h,g,_,v;if(!(f!==0&&p!==0&&C(f,p))&&(a=r.y-n.y,s=n.x-r.x,l=r.x*n.y-n.x*r.y,u=a*e.x+s*e.y+l,d=a*t.x+s*t.y+l,!(u!==0&&d!==0&&C(u,d))&&(m=i*s-a*o,m!==0)))return h=Math.abs(m/2),g=o*l-s*c,_=g<0?(g-h)/m:(g+h)/m,g=a*c-i*l,v=g<0?(g-h)/m:(g+h)/m,{x:_,y:v}}function C(e,t){return e*t>0}function w(e,t,n){var r=e.x,i=e.y,a=[],o=1/0,s=1/0;typeof t.forEach==`function`?t.forEach(function(e){o=Math.min(o,e.x),s=Math.min(s,e.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));for(var c=r-e.width/2-o,l=i-e.height/2-s,u=0;u<t.length;u++){var d=t[u],f=t[u<t.length-1?u+1:0],p=S(e,n,{x:c+d.x,y:l+d.y},{x:c+f.x,y:l+f.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(e,t){var r=e.x-n.x,i=e.y-n.y,a=Math.sqrt(r*r+i*i),o=t.x-n.x,s=t.y-n.y,c=Math.sqrt(o*o+s*s);return a<c?-1:a===c?0:1}),a[0]):e}var T=(e,t)=>{var n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2,c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=a===0?0:s*i/a,l=s):(i<0&&(o=-o),c=o,l=i===0?0:o*a/i),{x:n+c,y:r+l}},E={node:y,circle:x,ellipse:b,polygon:w,rect:T},D=async(e,t)=>{t.useHtmlLabels||s().flowchart.htmlLabels||(t.centerLabel=!0);let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,t,`node `+t.classes,!0);n.info(`Classes = `,t.classes);let o=r.insert(`rect`,`:first-child`);return o.attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`x`,-i.width/2-a).attr(`y`,-i.height/2-a).attr(`width`,i.width+t.padding).attr(`height`,i.height+t.padding),_(t,o),t.intersect=function(e){return E.rect(t,e)},r},ee=e=>{let t=new Set;for(let n of e)switch(n){case`x`:t.add(`right`),t.add(`left`);break;case`y`:t.add(`up`),t.add(`down`);break;default:t.add(n);break}return t},te=(e,t,n)=>{let r=ee(e),i=t.height+2*n.padding,a=i/2,o=t.width+2*a+n.padding,s=n.padding/2;return r.has(`right`)&&r.has(`left`)&&r.has(`up`)&&r.has(`down`)?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*s},{x:o-a,y:0},{x:o,y:0},{x:o,y:-i/3},{x:o+2*s,y:-i/2},{x:o,y:-2*i/3},{x:o,y:-i},{x:o-a,y:-i},{x:o/2,y:-i-2*s},{x:a,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*s,y:-i/2},{x:0,y:-i/3}]:r.has(`right`)&&r.has(`left`)&&r.has(`up`)?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`right`)&&r.has(`left`)&&r.has(`down`)?[{x:0,y:0},{x:a,y:-i},{x:o-a,y:-i},{x:o,y:0}]:r.has(`right`)&&r.has(`up`)&&r.has(`down`)?[{x:0,y:0},{x:o,y:-a},{x:o,y:-i+a},{x:0,y:-i}]:r.has(`left`)&&r.has(`up`)&&r.has(`down`)?[{x:o,y:0},{x:0,y:-a},{x:0,y:-i+a},{x:o,y:-i}]:r.has(`right`)&&r.has(`left`)?[{x:a,y:0},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`up`)&&r.has(`down`)?[{x:o/2,y:0},{x:0,y:-s},{x:a,y:-s},{x:a,y:-i+s},{x:0,y:-i+s},{x:o/2,y:-i},{x:o,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s},{x:o,y:-s}]:r.has(`right`)&&r.has(`up`)?[{x:0,y:0},{x:o,y:-a},{x:0,y:-i}]:r.has(`right`)&&r.has(`down`)?[{x:0,y:0},{x:o,y:0},{x:0,y:-i}]:r.has(`left`)&&r.has(`up`)?[{x:o,y:0},{x:0,y:-a},{x:o,y:-i}]:r.has(`left`)&&r.has(`down`)?[{x:o,y:0},{x:0,y:0},{x:o,y:-i}]:r.has(`right`)?[{x:a,y:-s},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i+s}]:r.has(`left`)?[{x:a,y:0},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`up`)?[{x:a,y:-s},{x:a,y:-i+s},{x:0,y:-i+s},{x:o/2,y:-i},{x:o,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s}]:r.has(`down`)?[{x:o/2,y:0},{x:0,y:-s},{x:a,y:-s},{x:a,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s},{x:o,y:-s}]:[{x:0,y:0}]},O=e=>e?` `+e:``,k=(e,t)=>`${t||`node default`}${O(e.classes)} ${O(e.class)}`,A=async(e,t)=>{let{shapeSvg:r,bbox:i}=await g(e,t,k(t,void 0),!0),a=i.width+t.padding+(i.height+t.padding),o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];n.info(`Question main (Circle)`);let s=v(r,a,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return n.warn(`Intersect called`),E.polygon(t,o,e)},r},ne=(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id);return n.insert(`polygon`,`:first-child`).attr(`points`,[{x:0,y:28/2},{x:28/2,y:0},{x:0,y:-28/2},{x:-28/2,y:0}].map(function(e){return e.x+`,`+e.y}).join(` `)).attr(`class`,`state-start`).attr(`r`,7).attr(`width`,28).attr(`height`,28),t.width=28,t.height=28,t.intersect=function(e){return E.circle(t,14,e)},n},re=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.height+t.padding,a=i/4,o=r.width+2*a+t.padding,s=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],c=v(n,o,i,s);return c.attr(`style`,t.style),_(t,c),t.intersect=function(e){return E.polygon(t,s,e)},n},ie=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,void 0,!0),i=r.height+2*t.padding,a=i/2,o=r.width+2*a+t.padding,s=te(t.directions,r,t),c=v(n,o,i,s);return c.attr(`style`,t.style),_(t,c),t.intersect=function(e){return E.polygon(t,s,e)},n},ae=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return v(n,i,a,o).attr(`style`,t.style),t.width=i+a,t.height=a,t.intersect=function(e){return E.polygon(t,o,e)},n},oe=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},j=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},M=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},se=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},ce=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},le=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=i/2,o=a/(2.5+i/50),s=r.height+o+t.padding,c=`M 0,`+o+` a `+a+`,`+o+` 0,0,0 `+i+` 0 a `+a+`,`+o+` 0,0,0 `+-i+` 0 l 0,`+s+` a `+a+`,`+o+` 0,0,0 `+i+` 0 l 0,`+-s;return _(t,n.attr(`label-offset-y`,o).insert(`path`,`:first-child`).attr(`style`,t.style).attr(`d`,c).attr(`transform`,`translate(`+-i/2+`,`+-(s/2+o)+`)`)),t.intersect=function(e){let n=E.rect(t,e),r=n.x-t.x;if(a!=0&&(Math.abs(r)<t.width/2||Math.abs(r)==t.width/2&&Math.abs(n.y-t.y)>t.height/2-o)){let i=o*o*(1-r*r/(a*a));i!=0&&(i=Math.sqrt(i)),i=o-i,e.y-t.y>0&&(i=-i),n.y+=i}return n},n},ue=async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,t,`node `+t.classes+` `+t.class,!0),o=r.insert(`rect`,`:first-child`),s=t.positioned?t.width:i.width+t.padding,c=t.positioned?t.height:i.height+t.padding,l=t.positioned?-s/2:-i.width/2-a,u=t.positioned?-c/2:-i.height/2-a;if(o.attr(`class`,`basic label-container`).attr(`style`,t.style).attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`x`,l).attr(`y`,u).attr(`width`,s).attr(`height`,c),t.props){let e=new Set(Object.keys(t.props));t.props.borders&&(N(o,t.props.borders,s,c),e.delete(`borders`)),e.forEach(e=>{n.warn(`Unknown node property ${e}`)})}return _(t,o),t.intersect=function(e){return E.rect(t,e)},r},de=async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,t,`node `+t.classes,!0),o=r.insert(`rect`,`:first-child`),s=t.positioned?t.width:i.width+t.padding,c=t.positioned?t.height:i.height+t.padding,l=t.positioned?-s/2:-i.width/2-a,u=t.positioned?-c/2:-i.height/2-a;if(o.attr(`class`,`basic cluster composite label-container`).attr(`style`,t.style).attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`x`,l).attr(`y`,u).attr(`width`,s).attr(`height`,c),t.props){let e=new Set(Object.keys(t.props));t.props.borders&&(N(o,t.props.borders,s,c),e.delete(`borders`)),e.forEach(e=>{n.warn(`Unknown node property ${e}`)})}return _(t,o),t.intersect=function(e){return E.rect(t,e)},r},fe=async(e,t)=>{let{shapeSvg:r}=await g(e,t,`label`,!0);n.trace(`Classes = `,t.class);let i=r.insert(`rect`,`:first-child`);if(i.attr(`width`,0).attr(`height`,0),r.attr(`class`,`label edgeLabel`),t.props){let e=new Set(Object.keys(t.props));t.props.borders&&(N(i,t.props.borders,0,0),e.delete(`borders`)),e.forEach(e=>{n.warn(`Unknown node property ${e}`)})}return _(t,i),t.intersect=function(e){return E.rect(t,e)},r};function N(e,t,r,i){let a=[],o=e=>{a.push(e,0)},s=e=>{a.push(0,e)};t.includes(`t`)?(n.debug(`add top border`),o(r)):s(r),t.includes(`r`)?(n.debug(`add right border`),o(i)):s(i),t.includes(`b`)?(n.debug(`add bottom border`),o(r)):s(r),t.includes(`l`)?(n.debug(`add left border`),o(i)):s(i),e.attr(`stroke-dasharray`,a.join(` `))}var pe=(t,r)=>{let i;i=r.classes?`node `+r.classes:`node default`;let a=t.insert(`g`).attr(`class`,i).attr(`id`,r.domId||r.id),c=a.insert(`rect`,`:first-child`),l=a.insert(`line`),u=a.insert(`g`).attr(`class`,`label`),d=r.labelText.flat?r.labelText.flat():r.labelText,f=``;f=typeof d==`object`?d[0]:d,n.info(`Label text abc79`,f,d,typeof d==`object`);let p=u.node().appendChild(h(f,r.labelStyle,!0,!0)),m={width:0,height:0};if(o(s().flowchart.htmlLabels)){let t=p.children[0],n=e(p);m=t.getBoundingClientRect(),n.attr(`width`,m.width),n.attr(`height`,m.height)}n.info(`Text 2`,d);let g=d.slice(1,d.length),v=p.getBBox(),y=u.node().appendChild(h(g.join?g.join(`<br/>`):g,r.labelStyle,!0,!0));if(o(s().flowchart.htmlLabels)){let t=y.children[0],n=e(y);m=t.getBoundingClientRect(),n.attr(`width`,m.width),n.attr(`height`,m.height)}let b=r.padding/2;return e(y).attr(`transform`,`translate( `+(m.width>v.width?0:(v.width-m.width)/2)+`, `+(v.height+b+5)+`)`),e(p).attr(`transform`,`translate( `+(m.width<v.width?0:-(v.width-m.width)/2)+`, 0)`),m=u.node().getBBox(),u.attr(`transform`,`translate(`+-m.width/2+`, `+(-m.height/2-b+3)+`)`),c.attr(`class`,`outer title-state`).attr(`x`,-m.width/2-b).attr(`y`,-m.height/2-b).attr(`width`,m.width+r.padding).attr(`height`,m.height+r.padding),l.attr(`class`,`divider`).attr(`x1`,-m.width/2-b).attr(`x2`,m.width/2+b).attr(`y1`,-m.height/2-b+v.height+b).attr(`y2`,-m.height/2-b+v.height+b),_(r,c),r.intersect=function(e){return E.rect(r,e)},a},P=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.height+t.padding,a=r.width+i/4+t.padding;return _(t,n.insert(`rect`,`:first-child`).attr(`style`,t.style).attr(`rx`,i/2).attr(`ry`,i/2).attr(`x`,-a/2).attr(`y`,-i/2).attr(`width`,a).attr(`height`,i)),t.intersect=function(e){return E.rect(t,e)},n},F=async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,t,k(t,void 0),!0),o=r.insert(`circle`,`:first-child`);return o.attr(`style`,t.style).attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`r`,i.width/2+a).attr(`width`,i.width+t.padding).attr(`height`,i.height+t.padding),n.info(`Circle main`),_(t,o),t.intersect=function(e){return n.info(`Circle intersect`,t,i.width/2+a,e),E.circle(t,i.width/2+a,e)},r},I=async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,t,k(t,void 0),!0),o=r.insert(`g`,`:first-child`),s=o.insert(`circle`),c=o.insert(`circle`);return o.attr(`class`,t.class),s.attr(`style`,t.style).attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`r`,i.width/2+a+5).attr(`width`,i.width+t.padding+10).attr(`height`,i.height+t.padding+10),c.attr(`style`,t.style).attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`r`,i.width/2+a).attr(`width`,i.width+t.padding).attr(`height`,i.height+t.padding),n.info(`DoubleCircle main`),_(t,s),t.intersect=function(e){return n.info(`DoubleCircle intersect`,t,i.width/2+a+5,e),E.circle(t,i.width/2+a+5,e)},r},L=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},R=(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),r=n.insert(`circle`,`:first-child`);return r.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14),_(t,r),t.intersect=function(e){return E.circle(t,7,e)},n},z=(e,t,n)=>{let r=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),i=70,a=10;return n===`LR`&&(i=10,a=70),_(t,r.append(`rect`).attr(`x`,-1*i/2).attr(`y`,-1*a/2).attr(`width`,i).attr(`height`,a).attr(`class`,`fork-join`)),t.height+=t.padding/2,t.width+=t.padding/2,t.intersect=function(e){return E.rect(t,e)},r},B={rhombus:A,composite:de,question:A,rect:ue,labelRect:fe,rectWithTitle:pe,choice:ne,circle:F,doublecircle:I,stadium:P,hexagon:re,block_arrow:ie,rect_left_inv_arrow:ae,lean_right:oe,lean_left:j,trapezoid:M,inv_trapezoid:se,rect_right_inv_arrow:ce,cylinder:le,start:R,end:(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),r=n.insert(`circle`,`:first-child`),i=n.insert(`circle`,`:first-child`);return i.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14),r.attr(`class`,`state-end`).attr(`r`,5).attr(`width`,10).attr(`height`,10),_(t,i),t.intersect=function(e){return E.circle(t,7,e)},n},note:D,subroutine:L,fork:z,join:z,class_box:(t,n)=>{let r=n.padding/2,i;i=n.classes?`node `+n.classes:`node default`;let a=t.insert(`g`).attr(`class`,i).attr(`id`,n.domId||n.id),c=a.insert(`rect`,`:first-child`),l=a.insert(`line`),u=a.insert(`line`),d=0,f=4,p=a.insert(`g`).attr(`class`,`label`),m=0,g=n.classData.annotations&&n.classData.annotations[0],v=n.classData.annotations[0]?`«`+n.classData.annotations[0]+`»`:``,y=p.node().appendChild(h(v,n.labelStyle,!0,!0)),b=y.getBBox();if(o(s().flowchart.htmlLabels)){let t=y.children[0],n=e(y);b=t.getBoundingClientRect(),n.attr(`width`,b.width),n.attr(`height`,b.height)}n.classData.annotations[0]&&(f+=b.height+4,d+=b.width);let x=n.classData.label;n.classData.type!==void 0&&n.classData.type!==``&&(s().flowchart.htmlLabels?x+=`&lt;`+n.classData.type+`&gt;`:x+=`<`+n.classData.type+`>`);let S=p.node().appendChild(h(x,n.labelStyle,!0,!0));e(S).attr(`class`,`classTitle`);let C=S.getBBox();if(o(s().flowchart.htmlLabels)){let t=S.children[0],n=e(S);C=t.getBoundingClientRect(),n.attr(`width`,C.width),n.attr(`height`,C.height)}f+=C.height+4,C.width>d&&(d=C.width);let w=[];n.classData.members.forEach(t=>{let r=t.getDisplayDetails(),i=r.displayText;s().flowchart.htmlLabels&&(i=i.replace(/</g,`&lt;`).replace(/>/g,`&gt;`));let a=p.node().appendChild(h(i,r.cssStyle?r.cssStyle:n.labelStyle,!0,!0)),c=a.getBBox();if(o(s().flowchart.htmlLabels)){let t=a.children[0],n=e(a);c=t.getBoundingClientRect(),n.attr(`width`,c.width),n.attr(`height`,c.height)}c.width>d&&(d=c.width),f+=c.height+4,w.push(a)}),f+=8;let T=[];if(n.classData.methods.forEach(t=>{let r=t.getDisplayDetails(),i=r.displayText;s().flowchart.htmlLabels&&(i=i.replace(/</g,`&lt;`).replace(/>/g,`&gt;`));let a=p.node().appendChild(h(i,r.cssStyle?r.cssStyle:n.labelStyle,!0,!0)),c=a.getBBox();if(o(s().flowchart.htmlLabels)){let t=a.children[0],n=e(a);c=t.getBoundingClientRect(),n.attr(`width`,c.width),n.attr(`height`,c.height)}c.width>d&&(d=c.width),f+=c.height+4,T.push(a)}),f+=8,g){let t=(d-b.width)/2;e(y).attr(`transform`,`translate( `+(-1*d/2+t)+`, `+-1*f/2+`)`),m=b.height+4}let D=(d-C.width)/2;return e(S).attr(`transform`,`translate( `+(-1*d/2+D)+`, `+(-1*f/2+m)+`)`),m+=C.height+4,l.attr(`class`,`divider`).attr(`x1`,-d/2-r).attr(`x2`,d/2+r).attr(`y1`,-f/2-r+8+m).attr(`y2`,-f/2-r+8+m),m+=8,w.forEach(t=>{e(t).attr(`transform`,`translate( `+-d/2+`, `+(-1*f/2+m+8/2)+`)`);let n=t?.getBBox();m+=(n?.height??0)+4}),m+=8,u.attr(`class`,`divider`).attr(`x1`,-d/2-r).attr(`x2`,d/2+r).attr(`y1`,-f/2-r+8+m).attr(`y2`,-f/2-r+8+m),m+=8,T.forEach(t=>{e(t).attr(`transform`,`translate( `+-d/2+`, `+(-1*f/2+m)+`)`);let n=t?.getBBox();m+=(n?.height??0)+4}),c.attr(`style`,n.style).attr(`class`,`outer title-state`).attr(`x`,-d/2-r).attr(`y`,-(f/2)-r).attr(`width`,d+n.padding).attr(`height`,f+n.padding),_(n,c),n.intersect=function(e){return E.rect(n,e)},a}},V={},me=async(e,t,n)=>{let r,i;if(t.link){let a;s().securityLevel===`sandbox`?a=`_top`:t.linkTarget&&(a=t.linkTarget||`_blank`),r=e.insert(`svg:a`).attr(`xlink:href`,t.link).attr(`target`,a),i=await B[t.shape](r,t,n)}else i=await B[t.shape](e,t,n),r=i;return t.tooltip&&i.attr(`title`,t.tooltip),t.class&&i.attr(`class`,`node default `+t.class),r.attr(`data-node`,`true`),r.attr(`data-id`,t.id),V[t.id]=r,t.haveCallback&&V[t.id].attr(`class`,V[t.id].attr(`class`)+` clickable`),r},H=(e,t)=>{V[t.id]=e},he=()=>{V={}},ge=e=>{let t=V[e.id];n.trace(`Transforming node`,e.diff,e,`translate(`+(e.x-e.width/2-5)+`, `+e.width/2+`)`);let r=e.diff||0;return e.clusterNode?t.attr(`transform`,`translate(`+(e.x+r-e.width/2)+`, `+(e.y-e.height/2-8)+`)`):t.attr(`transform`,`translate(`+e.x+`, `+e.y+`)`),r},U=({flowchart:e})=>{let t=e?.subGraphTitleMargin?.top??0,n=e?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:t+n}},W={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function G(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=K(e),t=K(t);let[n,r]=[e.x,e.y],[i,a]=[t.x,t.y],o=i-n,s=a-r;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}var K=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,q=e=>({x:function(t,n,r){let i=0;if(n===0&&Object.hasOwn(W,e.arrowTypeStart)){let{angle:t,deltaX:n}=G(r[0],r[1]);i=W[e.arrowTypeStart]*Math.cos(t)*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(W,e.arrowTypeEnd)){let{angle:t,deltaX:n}=G(r[r.length-1],r[r.length-2]);i=W[e.arrowTypeEnd]*Math.cos(t)*(n>=0?1:-1)}return K(t).x+i},y:function(t,n,r){let i=0;if(n===0&&Object.hasOwn(W,e.arrowTypeStart)){let{angle:t,deltaY:n}=G(r[0],r[1]);i=W[e.arrowTypeStart]*Math.abs(Math.sin(t))*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(W,e.arrowTypeEnd)){let{angle:t,deltaY:n}=G(r[r.length-1],r[r.length-2]);i=W[e.arrowTypeEnd]*Math.abs(Math.sin(t))*(n>=0?1:-1)}return K(t).y+i}}),J=(e,t,n,r,i)=>{t.arrowTypeStart&&Y(e,`start`,t.arrowTypeStart,n,r,i),t.arrowTypeEnd&&Y(e,`end`,t.arrowTypeEnd,n,r,i)},_e={arrow_cross:`cross`,arrow_point:`point`,arrow_barb:`barb`,arrow_circle:`circle`,aggregation:`aggregation`,extension:`extension`,composition:`composition`,dependency:`dependency`,lollipop:`lollipop`},Y=(e,t,r,i,a,o)=>{let s=_e[r];if(!s){n.warn(`Unknown arrow type: ${r}`);return}let c=t===`start`?`Start`:`End`;e.attr(`marker-${t}`,`url(${i}#${a}_${o}-${s}${c})`)},X={},Z={},ve=()=>{X={},Z={}},ye=(t,n)=>{let r=o(s().flowchart.htmlLabels),i=n.labelType===`markdown`?l(t,n.label,{style:n.labelStyle,useHtmlLabels:r,addSvgBackground:!0}):h(n.label,n.labelStyle),a=t.insert(`g`).attr(`class`,`edgeLabel`),c=a.insert(`g`).attr(`class`,`label`);c.node().appendChild(i);let u=i.getBBox();if(r){let t=i.children[0],n=e(i);u=t.getBoundingClientRect(),n.attr(`width`,u.width),n.attr(`height`,u.height)}c.attr(`transform`,`translate(`+-u.width/2+`, `+-u.height/2+`)`),X[n.id]=a,n.width=u.width,n.height=u.height;let d;if(n.startLabelLeft){let e=h(n.startLabelLeft,n.labelStyle),r=t.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(e);let a=e.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),Z[n.id]||(Z[n.id]={}),Z[n.id].startLeft=r,Q(d,n.startLabelLeft)}if(n.startLabelRight){let e=h(n.startLabelRight,n.labelStyle),r=t.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=r.node().appendChild(e),i.node().appendChild(e);let a=e.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),Z[n.id]||(Z[n.id]={}),Z[n.id].startRight=r,Q(d,n.startLabelRight)}if(n.endLabelLeft){let e=h(n.endLabelLeft,n.labelStyle),r=t.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(e);let a=e.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),r.node().appendChild(e),Z[n.id]||(Z[n.id]={}),Z[n.id].endLeft=r,Q(d,n.endLabelLeft)}if(n.endLabelRight){let e=h(n.endLabelRight,n.labelStyle),r=t.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(e);let a=e.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),r.node().appendChild(e),Z[n.id]||(Z[n.id]={}),Z[n.id].endRight=r,Q(d,n.endLabelRight)}return i};function Q(e,t){s().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+`px`,e.style.height=`12px`)}var be=(e,r)=>{n.debug(`Moving label abc88 `,e.id,e.label,X[e.id],r);let i=r.updatedPath?r.updatedPath:r.originalPath,{subGraphTitleTotalMargin:a}=U(s());if(e.label){let o=X[e.id],s=e.x,c=e.y;if(i){let a=t.calcLabelPosition(i);n.debug(`Moving label `+e.label+` from (`,s,`,`,c,`) to (`,a.x,`,`,a.y,`) abc88`),r.updatedPath&&(s=a.x,c=a.y)}o.attr(`transform`,`translate(${s}, ${c+a/2})`)}if(e.startLabelLeft){let n=Z[e.id].startLeft,r=e.x,a=e.y;if(i){let n=t.calcTerminalLabelPosition(e.arrowTypeStart?10:0,`start_left`,i);r=n.x,a=n.y}n.attr(`transform`,`translate(${r}, ${a})`)}if(e.startLabelRight){let n=Z[e.id].startRight,r=e.x,a=e.y;if(i){let n=t.calcTerminalLabelPosition(e.arrowTypeStart?10:0,`start_right`,i);r=n.x,a=n.y}n.attr(`transform`,`translate(${r}, ${a})`)}if(e.endLabelLeft){let n=Z[e.id].endLeft,r=e.x,a=e.y;if(i){let n=t.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,`end_left`,i);r=n.x,a=n.y}n.attr(`transform`,`translate(${r}, ${a})`)}if(e.endLabelRight){let n=Z[e.id].endRight,r=e.x,a=e.y;if(i){let n=t.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,`end_right`,i);r=n.x,a=n.y}n.attr(`transform`,`translate(${r}, ${a})`)}},xe=(e,t)=>{let n=e.x,r=e.y,i=Math.abs(t.x-n),a=Math.abs(t.y-r),o=e.width/2,s=e.height/2;return i>=o||a>=s},Se=(e,t,r)=>{n.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);let i=e.x,a=e.y,o=Math.abs(i-r.x),s=e.width/2,c=r.x<t.x?s-o:s+o,l=e.height/2,u=Math.abs(t.y-r.y),d=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*s>Math.abs(i-t.x)*l){let e=r.y<t.y?t.y-l-a:a-l-t.y;c=d*e/u;let i={x:r.x<t.x?r.x+c:r.x-d+c,y:r.y<t.y?r.y+u-e:r.y-u+e};return c===0&&(i.x=t.x,i.y=t.y),d===0&&(i.x=t.x),u===0&&(i.y=t.y),n.debug(`abc89 topp/bott calc, Q ${u}, q ${e}, R ${d}, r ${c}`,i),i}else{c=r.x<t.x?t.x-s-i:i-s-t.x;let e=u*c/d,a=r.x<t.x?r.x+d-c:r.x-d+c,o=r.y<t.y?r.y+e:r.y-e;return n.debug(`sides calc abc89, Q ${u}, q ${e}, R ${d}, r ${c}`,{_x:a,_y:o}),c===0&&(a=t.x,o=t.y),d===0&&(a=t.x),u===0&&(o=t.y),{x:a,y:o}}},$=(e,t)=>{n.debug(`abc88 cutPathAtIntersect`,e,t);let r=[],i=e[0],a=!1;return e.forEach(e=>{if(!xe(t,e)&&!a){let n=Se(t,i,e),o=!1;r.forEach(e=>{o||=e.x===n.x&&e.y===n.y}),r.some(e=>e.x===n.x&&e.y===n.y)||r.push(n),a=!0}else i=e,a||r.push(e)}),r},Ce=function(e,t,i,a,o,l,u){let d=i.points;n.debug(`abc88 InsertEdge: edge=`,i,`e=`,t);let f=!1,p=l.node(t.v);var m=l.node(t.w);m?.intersect&&p?.intersect&&(d=d.slice(1,i.points.length-1),d.unshift(p.intersect(d[0])),d.push(m.intersect(d[d.length-1]))),i.toCluster&&(n.debug(`to cluster abc88`,a[i.toCluster]),d=$(i.points,a[i.toCluster].node),f=!0),i.fromCluster&&(n.debug(`from cluster abc88`,a[i.fromCluster]),d=$(d.reverse(),a[i.fromCluster].node).reverse(),f=!0);let h=d.filter(e=>!Number.isNaN(e.y)),g=r;i.curve&&(o===`graph`||o===`flowchart`)&&(g=i.curve);let{x:_,y:v}=q(i),y=c().x(_).y(v).curve(g),b;switch(i.thickness){case`normal`:b=`edge-thickness-normal`;break;case`thick`:b=`edge-thickness-thick`;break;case`invisible`:b=`edge-thickness-thick`;break;default:b=``}switch(i.pattern){case`solid`:b+=` edge-pattern-solid`;break;case`dotted`:b+=` edge-pattern-dotted`;break;case`dashed`:b+=` edge-pattern-dashed`;break}let x=e.append(`path`).attr(`d`,y(h)).attr(`id`,i.id).attr(`class`,` `+b+(i.classes?` `+i.classes:``)).attr(`style`,i.style),S=``;(s().flowchart.arrowMarkerAbsolute||s().state.arrowMarkerAbsolute)&&(S=window.location.protocol+`//`+window.location.host+window.location.pathname+window.location.search,S=S.replace(/\(/g,`\\(`),S=S.replace(/\)/g,`\\)`)),J(x,i,S,u,o);let C={};return f&&(C.updatedPath=d),C.originalPath=i.points,C};export{q as a,ye as c,T as d,g as f,_ as g,H as h,h as i,f as l,ge as m,ve as n,U as o,be as p,he as r,Ce as s,J as t,me as u};