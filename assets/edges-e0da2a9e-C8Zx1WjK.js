import{B as e,E as t,M as n,Y as r,d as i,m as a,v as o}from"./mermaid-b5860b54-BAm_K8Bm.js";import{rt as s}from"./app-NBbNxqHw.js";import{t as c}from"./line-BFV1O7i-.js";import{n as l}from"./createText-2e5e7dd3-GODUTsQS.js";var u=(e,t,n,r)=>{t.forEach(t=>{d[t](e,n,r)})},d={extension:(e,n,r)=>{t.trace(`Making markers for `,r),e.append(`defs`).append(`marker`).attr(`id`,r+`_`+n+`-extensionStart`).attr(`class`,`marker extension `+n).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,7 L18,13 V 1 Z`),e.append(`defs`).append(`marker`).attr(`id`,r+`_`+n+`-extensionEnd`).attr(`class`,`marker extension `+n).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 V 13 L18,7 Z`)},composition:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-compositionStart`).attr(`class`,`marker composition `+t).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-compositionEnd`).attr(`class`,`marker composition `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`)},aggregation:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-aggregationStart`).attr(`class`,`marker aggregation `+t).attr(`refX`,18).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-aggregationEnd`).attr(`class`,`marker aggregation `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L1,7 L9,1 Z`)},dependency:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-dependencyStart`).attr(`class`,`marker dependency `+t).attr(`refX`,6).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 5,7 L9,13 L1,7 L9,1 Z`),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-dependencyEnd`).attr(`class`,`marker dependency `+t).attr(`refX`,13).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,28).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 18,7 L9,13 L14,7 L9,1 Z`)},lollipop:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-lollipopStart`).attr(`class`,`marker lollipop `+t).attr(`refX`,13).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`circle`).attr(`stroke`,`black`).attr(`fill`,`transparent`).attr(`cx`,7).attr(`cy`,7).attr(`r`,6),e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-lollipopEnd`).attr(`class`,`marker lollipop `+t).attr(`refX`,1).attr(`refY`,7).attr(`markerWidth`,190).attr(`markerHeight`,240).attr(`orient`,`auto`).append(`circle`).attr(`stroke`,`black`).attr(`fill`,`transparent`).attr(`cx`,7).attr(`cy`,7).attr(`r`,6)},point:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-pointEnd`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,6).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,12).attr(`markerHeight`,12).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 0 0 L 10 5 L 0 10 z`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-pointStart`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,4.5).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,12).attr(`markerHeight`,12).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 0 5 L 10 10 L 10 0 z`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`)},circle:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-circleEnd`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,11).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`circle`).attr(`cx`,`5`).attr(`cy`,`5`).attr(`r`,`5`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-circleStart`).attr(`class`,`marker `+t).attr(`viewBox`,`0 0 10 10`).attr(`refX`,-1).attr(`refY`,5).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`circle`).attr(`cx`,`5`).attr(`cy`,`5`).attr(`r`,`5`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,1).style(`stroke-dasharray`,`1,0`)},cross:(e,t,n)=>{e.append(`marker`).attr(`id`,n+`_`+t+`-crossEnd`).attr(`class`,`marker cross `+t).attr(`viewBox`,`0 0 11 11`).attr(`refX`,12).attr(`refY`,5.2).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 l 9,9 M 10,1 l -9,9`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,2).style(`stroke-dasharray`,`1,0`),e.append(`marker`).attr(`id`,n+`_`+t+`-crossStart`).attr(`class`,`marker cross `+t).attr(`viewBox`,`0 0 11 11`).attr(`refX`,-1).attr(`refY`,5.2).attr(`markerUnits`,`userSpaceOnUse`).attr(`markerWidth`,11).attr(`markerHeight`,11).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 1,1 l 9,9 M 10,1 l -9,9`).attr(`class`,`arrowMarkerPath`).style(`stroke-width`,2).style(`stroke-dasharray`,`1,0`)},barb:(e,t,n)=>{e.append(`defs`).append(`marker`).attr(`id`,n+`_`+t+`-barbEnd`).attr(`refX`,19).attr(`refY`,7).attr(`markerWidth`,20).attr(`markerHeight`,14).attr(`markerUnits`,`strokeWidth`).attr(`orient`,`auto`).append(`path`).attr(`d`,`M 19,7 L9,13 L14,7 L9,1 Z`)}},f=u;function p(e,t){t&&e.attr(`style`,t)}function m(e){let t=s(document.createElementNS(`http://www.w3.org/2000/svg`,`foreignObject`)),n=t.append(`xhtml:div`),r=e.label,i=e.isNode?`nodeLabel`:`edgeLabel`;return n.html(`<span class="`+i+`" `+(e.labelStyle?`style="`+e.labelStyle+`"`:``)+`>`+r+`</span>`),p(n,e.labelStyle),n.style(`display`,`inline-block`),n.style(`white-space`,`nowrap`),n.attr(`xmlns`,`http://www.w3.org/1999/xhtml`),t.node()}var h=(e,n,r,s)=>{let c=e||``;if(typeof c==`object`&&(c=c[0]),a(o().flowchart.htmlLabels))return c=c.replace(/\\n|\n/g,`<br />`),t.debug(`vertexText`+c),m({isNode:s,label:i(c).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(`:`,` `)}'></i>`),labelStyle:n.replace(`fill:`,`color:`)});{let e=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);e.setAttribute(`style`,n.replace(`color:`,`fill:`));let t=[];t=typeof c==`string`?c.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(c)?c:[];for(let n of t){let t=document.createElementNS(`http://www.w3.org/2000/svg`,`tspan`);t.setAttributeNS(`http://www.w3.org/XML/1998/namespace`,`xml:space`,`preserve`),t.setAttribute(`dy`,`1em`),t.setAttribute(`x`,`0`),r?t.setAttribute(`class`,`title-row`):t.setAttribute(`class`,`row`),t.textContent=n.trim(),e.appendChild(t)}return e}},g=async(e,t,r,c)=>{let u,d=t.useHtmlLabels||a(o().flowchart.htmlLabels);u=r||`node default`;let f=e.insert(`g`).attr(`class`,u).attr(`id`,t.domId||t.id),p=f.insert(`g`).attr(`class`,`label`).attr(`style`,t.labelStyle),m;m=t.labelText===void 0?``:typeof t.labelText==`string`?t.labelText:t.labelText[0];let g=p.node(),_;_=t.labelType===`markdown`?l(p,n(i(m),o()),{useHtmlLabels:d,width:t.width||o().flowchart.wrappingWidth,classes:`markdown-node-label`}):g.appendChild(h(n(i(m),o()),t.labelStyle,!1,c));let v=_.getBBox(),y=t.padding/2;if(a(o().flowchart.htmlLabels)){let e=_.children[0],t=s(_),n=e.getElementsByTagName(`img`);if(n){let e=m.replace(/<img[^>]*>/g,``).trim()===``;await Promise.all([...n].map(t=>new Promise(n=>{function r(){if(t.style.display=`flex`,t.style.flexDirection=`column`,e){let e=o().fontSize?o().fontSize:window.getComputedStyle(document.body).fontSize,n=parseInt(e,10)*5+`px`;t.style.minWidth=n,t.style.maxWidth=n}else t.style.width=`100%`;n(t)}setTimeout(()=>{t.complete&&r()}),t.addEventListener(`error`,r),t.addEventListener(`load`,r)})))}v=e.getBoundingClientRect(),t.attr(`width`,v.width),t.attr(`height`,v.height)}return d?p.attr(`transform`,`translate(`+-v.width/2+`, `+-v.height/2+`)`):p.attr(`transform`,`translate(0, `+-v.height/2+`)`),t.centerLabel&&p.attr(`transform`,`translate(`+-v.width/2+`, `+-v.height/2+`)`),p.insert(`rect`,`:first-child`),{shapeSvg:f,bbox:v,halfPadding:y,label:p}},_=(e,t)=>{let n=t.node().getBBox();e.width=n.width,e.height=n.height};function v(e,t,n,r){return e.insert(`polygon`,`:first-child`).attr(`points`,r.map(function(e){return e.x+`,`+e.y}).join(` `)).attr(`class`,`label-container`).attr(`transform`,`translate(`+-t/2+`,`+n/2+`)`)}function y(e,t){return e.intersect(t)}function b(e,t,n,r){var i=e.x,a=e.y,o=i-r.x,s=a-r.y,c=Math.sqrt(t*t*s*s+n*n*o*o),l=Math.abs(t*n*o/c);r.x<i&&(l=-l);var u=Math.abs(t*n*s/c);return r.y<a&&(u=-u),{x:i+l,y:a+u}}function x(e,t,n){return b(e,t,t,n)}function S(e,t,n,r){var i=t.y-e.y,a,o=e.x-t.x,s,c=t.x*e.y-e.x*t.y,l,u,d,f=i*n.x+o*n.y+c,p=i*r.x+o*r.y+c,m,h,g,_,v;if(!(f!==0&&p!==0&&C(f,p))&&(a=r.y-n.y,s=n.x-r.x,l=r.x*n.y-n.x*r.y,u=a*e.x+s*e.y+l,d=a*t.x+s*t.y+l,!(u!==0&&d!==0&&C(u,d))&&(m=i*s-a*o,m!==0)))return h=Math.abs(m/2),g=o*l-s*c,_=g<0?(g-h)/m:(g+h)/m,g=a*c-i*l,v=g<0?(g-h)/m:(g+h)/m,{x:_,y:v}}function C(e,t){return e*t>0}function w(e,t,n){var r=e.x,i=e.y,a=[],o=1/0,s=1/0;typeof t.forEach==`function`?t.forEach(function(e){o=Math.min(o,e.x),s=Math.min(s,e.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));for(var c=r-e.width/2-o,l=i-e.height/2-s,u=0;u<t.length;u++){var d=t[u],f=t[u<t.length-1?u+1:0],p=S(e,n,{x:c+d.x,y:l+d.y},{x:c+f.x,y:l+f.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(e,t){var r=e.x-n.x,i=e.y-n.y,a=Math.sqrt(r*r+i*i),o=t.x-n.x,s=t.y-n.y,c=Math.sqrt(o*o+s*s);return a<c?-1:a===c?0:1}),a[0]):e}var T=(e,t)=>{var n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2,c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=a===0?0:s*i/a,l=s):(i<0&&(o=-o),c=o,l=i===0?0:o*a/i),{x:n+c,y:r+l}},E={node:y,circle:x,ellipse:b,polygon:w,rect:T},D=async(e,n)=>{n.useHtmlLabels||o().flowchart.htmlLabels||(n.centerLabel=!0);let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,n,`node `+n.classes,!0);t.info(`Classes = `,n.classes);let s=r.insert(`rect`,`:first-child`);return s.attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`x`,-i.width/2-a).attr(`y`,-i.height/2-a).attr(`width`,i.width+n.padding).attr(`height`,i.height+n.padding),_(n,s),n.intersect=function(e){return E.rect(n,e)},r},ee=e=>{let t=new Set;for(let n of e)switch(n){case`x`:t.add(`right`),t.add(`left`);break;case`y`:t.add(`up`),t.add(`down`);break;default:t.add(n);break}return t},te=(e,t,n)=>{let r=ee(e),i=t.height+2*n.padding,a=i/2,o=t.width+2*a+n.padding,s=n.padding/2;return r.has(`right`)&&r.has(`left`)&&r.has(`up`)&&r.has(`down`)?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*s},{x:o-a,y:0},{x:o,y:0},{x:o,y:-i/3},{x:o+2*s,y:-i/2},{x:o,y:-2*i/3},{x:o,y:-i},{x:o-a,y:-i},{x:o/2,y:-i-2*s},{x:a,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*s,y:-i/2},{x:0,y:-i/3}]:r.has(`right`)&&r.has(`left`)&&r.has(`up`)?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`right`)&&r.has(`left`)&&r.has(`down`)?[{x:0,y:0},{x:a,y:-i},{x:o-a,y:-i},{x:o,y:0}]:r.has(`right`)&&r.has(`up`)&&r.has(`down`)?[{x:0,y:0},{x:o,y:-a},{x:o,y:-i+a},{x:0,y:-i}]:r.has(`left`)&&r.has(`up`)&&r.has(`down`)?[{x:o,y:0},{x:0,y:-a},{x:0,y:-i+a},{x:o,y:-i}]:r.has(`right`)&&r.has(`left`)?[{x:a,y:0},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`up`)&&r.has(`down`)?[{x:o/2,y:0},{x:0,y:-s},{x:a,y:-s},{x:a,y:-i+s},{x:0,y:-i+s},{x:o/2,y:-i},{x:o,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s},{x:o,y:-s}]:r.has(`right`)&&r.has(`up`)?[{x:0,y:0},{x:o,y:-a},{x:0,y:-i}]:r.has(`right`)&&r.has(`down`)?[{x:0,y:0},{x:o,y:0},{x:0,y:-i}]:r.has(`left`)&&r.has(`up`)?[{x:o,y:0},{x:0,y:-a},{x:o,y:-i}]:r.has(`left`)&&r.has(`down`)?[{x:o,y:0},{x:0,y:0},{x:o,y:-i}]:r.has(`right`)?[{x:a,y:-s},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i+s}]:r.has(`left`)?[{x:a,y:0},{x:a,y:-s},{x:o-a,y:-s},{x:o-a,y:-i+s},{x:a,y:-i+s},{x:a,y:-i},{x:0,y:-i/2}]:r.has(`up`)?[{x:a,y:-s},{x:a,y:-i+s},{x:0,y:-i+s},{x:o/2,y:-i},{x:o,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s}]:r.has(`down`)?[{x:o/2,y:0},{x:0,y:-s},{x:a,y:-s},{x:a,y:-i+s},{x:o-a,y:-i+s},{x:o-a,y:-s},{x:o,y:-s}]:[{x:0,y:0}]},O=e=>e?` `+e:``,k=(e,t)=>`${t||`node default`}${O(e.classes)} ${O(e.class)}`,A=async(e,n)=>{let{shapeSvg:r,bbox:i}=await g(e,n,k(n,void 0),!0),a=i.width+n.padding+(i.height+n.padding),o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];t.info(`Question main (Circle)`);let s=v(r,a,a,o);return s.attr(`style`,n.style),_(n,s),n.intersect=function(e){return t.warn(`Intersect called`),E.polygon(n,o,e)},r},ne=(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id);return n.insert(`polygon`,`:first-child`).attr(`points`,[{x:0,y:28/2},{x:28/2,y:0},{x:0,y:-28/2},{x:-28/2,y:0}].map(function(e){return e.x+`,`+e.y}).join(` `)).attr(`class`,`state-start`).attr(`r`,7).attr(`width`,28).attr(`height`,28),t.width=28,t.height=28,t.intersect=function(e){return E.circle(t,14,e)},n},re=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.height+t.padding,a=i/4,o=r.width+2*a+t.padding,s=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],c=v(n,o,i,s);return c.attr(`style`,t.style),_(t,c),t.intersect=function(e){return E.polygon(t,s,e)},n},ie=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,void 0,!0),i=r.height+2*t.padding,a=i/2,o=r.width+2*a+t.padding,s=te(t.directions,r,t),c=v(n,o,i,s);return c.attr(`style`,t.style),_(t,c),t.intersect=function(e){return E.polygon(t,s,e)},n},ae=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return v(n,i,a,o).attr(`style`,t.style),t.width=i+a,t.height=a,t.intersect=function(e){return E.polygon(t,o,e)},n},oe=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},j=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},M=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},se=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},ce=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},le=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=i/2,o=a/(2.5+i/50),s=r.height+o+t.padding,c=`M 0,`+o+` a `+a+`,`+o+` 0,0,0 `+i+` 0 a `+a+`,`+o+` 0,0,0 `+-i+` 0 l 0,`+s+` a `+a+`,`+o+` 0,0,0 `+i+` 0 l 0,`+-s;return _(t,n.attr(`label-offset-y`,o).insert(`path`,`:first-child`).attr(`style`,t.style).attr(`d`,c).attr(`transform`,`translate(`+-i/2+`,`+-(s/2+o)+`)`)),t.intersect=function(e){let n=E.rect(t,e),r=n.x-t.x;if(a!=0&&(Math.abs(r)<t.width/2||Math.abs(r)==t.width/2&&Math.abs(n.y-t.y)>t.height/2-o)){let i=o*o*(1-r*r/(a*a));i!=0&&(i=Math.sqrt(i)),i=o-i,e.y-t.y>0&&(i=-i),n.y+=i}return n},n},ue=async(e,n)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,n,`node `+n.classes+` `+n.class,!0),o=r.insert(`rect`,`:first-child`),s=n.positioned?n.width:i.width+n.padding,c=n.positioned?n.height:i.height+n.padding,l=n.positioned?-s/2:-i.width/2-a,u=n.positioned?-c/2:-i.height/2-a;if(o.attr(`class`,`basic label-container`).attr(`style`,n.style).attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`x`,l).attr(`y`,u).attr(`width`,s).attr(`height`,c),n.props){let e=new Set(Object.keys(n.props));n.props.borders&&(N(o,n.props.borders,s,c),e.delete(`borders`)),e.forEach(e=>{t.warn(`Unknown node property ${e}`)})}return _(n,o),n.intersect=function(e){return E.rect(n,e)},r},de=async(e,n)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,n,`node `+n.classes,!0),o=r.insert(`rect`,`:first-child`),s=n.positioned?n.width:i.width+n.padding,c=n.positioned?n.height:i.height+n.padding,l=n.positioned?-s/2:-i.width/2-a,u=n.positioned?-c/2:-i.height/2-a;if(o.attr(`class`,`basic cluster composite label-container`).attr(`style`,n.style).attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`x`,l).attr(`y`,u).attr(`width`,s).attr(`height`,c),n.props){let e=new Set(Object.keys(n.props));n.props.borders&&(N(o,n.props.borders,s,c),e.delete(`borders`)),e.forEach(e=>{t.warn(`Unknown node property ${e}`)})}return _(n,o),n.intersect=function(e){return E.rect(n,e)},r},fe=async(e,n)=>{let{shapeSvg:r}=await g(e,n,`label`,!0);t.trace(`Classes = `,n.class);let i=r.insert(`rect`,`:first-child`);if(i.attr(`width`,0).attr(`height`,0),r.attr(`class`,`label edgeLabel`),n.props){let e=new Set(Object.keys(n.props));n.props.borders&&(N(i,n.props.borders,0,0),e.delete(`borders`)),e.forEach(e=>{t.warn(`Unknown node property ${e}`)})}return _(n,i),n.intersect=function(e){return E.rect(n,e)},r};function N(e,n,r,i){let a=[],o=e=>{a.push(e,0)},s=e=>{a.push(0,e)};n.includes(`t`)?(t.debug(`add top border`),o(r)):s(r),n.includes(`r`)?(t.debug(`add right border`),o(i)):s(i),n.includes(`b`)?(t.debug(`add bottom border`),o(r)):s(r),n.includes(`l`)?(t.debug(`add left border`),o(i)):s(i),e.attr(`stroke-dasharray`,a.join(` `))}var pe=(e,n)=>{let r;r=n.classes?`node `+n.classes:`node default`;let i=e.insert(`g`).attr(`class`,r).attr(`id`,n.domId||n.id),c=i.insert(`rect`,`:first-child`),l=i.insert(`line`),u=i.insert(`g`).attr(`class`,`label`),d=n.labelText.flat?n.labelText.flat():n.labelText,f=``;f=typeof d==`object`?d[0]:d,t.info(`Label text abc79`,f,d,typeof d==`object`);let p=u.node().appendChild(h(f,n.labelStyle,!0,!0)),m={width:0,height:0};if(a(o().flowchart.htmlLabels)){let e=p.children[0],t=s(p);m=e.getBoundingClientRect(),t.attr(`width`,m.width),t.attr(`height`,m.height)}t.info(`Text 2`,d);let g=d.slice(1,d.length),v=p.getBBox(),y=u.node().appendChild(h(g.join?g.join(`<br/>`):g,n.labelStyle,!0,!0));if(a(o().flowchart.htmlLabels)){let e=y.children[0],t=s(y);m=e.getBoundingClientRect(),t.attr(`width`,m.width),t.attr(`height`,m.height)}let b=n.padding/2;return s(y).attr(`transform`,`translate( `+(m.width>v.width?0:(v.width-m.width)/2)+`, `+(v.height+b+5)+`)`),s(p).attr(`transform`,`translate( `+(m.width<v.width?0:-(v.width-m.width)/2)+`, 0)`),m=u.node().getBBox(),u.attr(`transform`,`translate(`+-m.width/2+`, `+(-m.height/2-b+3)+`)`),c.attr(`class`,`outer title-state`).attr(`x`,-m.width/2-b).attr(`y`,-m.height/2-b).attr(`width`,m.width+n.padding).attr(`height`,m.height+n.padding),l.attr(`class`,`divider`).attr(`x1`,-m.width/2-b).attr(`x2`,m.width/2+b).attr(`y1`,-m.height/2-b+v.height+b).attr(`y2`,-m.height/2-b+v.height+b),_(n,c),n.intersect=function(e){return E.rect(n,e)},i},P=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.height+t.padding,a=r.width+i/4+t.padding;return _(t,n.insert(`rect`,`:first-child`).attr(`style`,t.style).attr(`rx`,i/2).attr(`ry`,i/2).attr(`x`,-a/2).attr(`y`,-i/2).attr(`width`,a).attr(`height`,i)),t.intersect=function(e){return E.rect(t,e)},n},F=async(e,n)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,n,k(n,void 0),!0),o=r.insert(`circle`,`:first-child`);return o.attr(`style`,n.style).attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`r`,i.width/2+a).attr(`width`,i.width+n.padding).attr(`height`,i.height+n.padding),t.info(`Circle main`),_(n,o),n.intersect=function(e){return t.info(`Circle intersect`,n,i.width/2+a,e),E.circle(n,i.width/2+a,e)},r},I=async(e,n)=>{let{shapeSvg:r,bbox:i,halfPadding:a}=await g(e,n,k(n,void 0),!0),o=r.insert(`g`,`:first-child`),s=o.insert(`circle`),c=o.insert(`circle`);return o.attr(`class`,n.class),s.attr(`style`,n.style).attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`r`,i.width/2+a+5).attr(`width`,i.width+n.padding+10).attr(`height`,i.height+n.padding+10),c.attr(`style`,n.style).attr(`rx`,n.rx).attr(`ry`,n.ry).attr(`r`,i.width/2+a).attr(`width`,i.width+n.padding).attr(`height`,i.height+n.padding),t.info(`DoubleCircle main`),_(n,s),n.intersect=function(e){return t.info(`DoubleCircle intersect`,n,i.width/2+a+5,e),E.circle(n,i.width/2+a+5,e)},r},L=async(e,t)=>{let{shapeSvg:n,bbox:r}=await g(e,t,k(t,void 0),!0),i=r.width+t.padding,a=r.height+t.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=v(n,i,a,o);return s.attr(`style`,t.style),_(t,s),t.intersect=function(e){return E.polygon(t,o,e)},n},R=(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),r=n.insert(`circle`,`:first-child`);return r.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14),_(t,r),t.intersect=function(e){return E.circle(t,7,e)},n},z=(e,t,n)=>{let r=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),i=70,a=10;return n===`LR`&&(i=10,a=70),_(t,r.append(`rect`).attr(`x`,-1*i/2).attr(`y`,-1*a/2).attr(`width`,i).attr(`height`,a).attr(`class`,`fork-join`)),t.height+=t.padding/2,t.width+=t.padding/2,t.intersect=function(e){return E.rect(t,e)},r},B={rhombus:A,composite:de,question:A,rect:ue,labelRect:fe,rectWithTitle:pe,choice:ne,circle:F,doublecircle:I,stadium:P,hexagon:re,block_arrow:ie,rect_left_inv_arrow:ae,lean_right:oe,lean_left:j,trapezoid:M,inv_trapezoid:se,rect_right_inv_arrow:ce,cylinder:le,start:R,end:(e,t)=>{let n=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),r=n.insert(`circle`,`:first-child`),i=n.insert(`circle`,`:first-child`);return i.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14),r.attr(`class`,`state-end`).attr(`r`,5).attr(`width`,10).attr(`height`,10),_(t,i),t.intersect=function(e){return E.circle(t,7,e)},n},note:D,subroutine:L,fork:z,join:z,class_box:(e,t)=>{let n=t.padding/2,r;r=t.classes?`node `+t.classes:`node default`;let i=e.insert(`g`).attr(`class`,r).attr(`id`,t.domId||t.id),c=i.insert(`rect`,`:first-child`),l=i.insert(`line`),u=i.insert(`line`),d=0,f=4,p=i.insert(`g`).attr(`class`,`label`),m=0,g=t.classData.annotations&&t.classData.annotations[0],v=t.classData.annotations[0]?`«`+t.classData.annotations[0]+`»`:``,y=p.node().appendChild(h(v,t.labelStyle,!0,!0)),b=y.getBBox();if(a(o().flowchart.htmlLabels)){let e=y.children[0],t=s(y);b=e.getBoundingClientRect(),t.attr(`width`,b.width),t.attr(`height`,b.height)}t.classData.annotations[0]&&(f+=b.height+4,d+=b.width);let x=t.classData.label;t.classData.type!==void 0&&t.classData.type!==``&&(o().flowchart.htmlLabels?x+=`&lt;`+t.classData.type+`&gt;`:x+=`<`+t.classData.type+`>`);let S=p.node().appendChild(h(x,t.labelStyle,!0,!0));s(S).attr(`class`,`classTitle`);let C=S.getBBox();if(a(o().flowchart.htmlLabels)){let e=S.children[0],t=s(S);C=e.getBoundingClientRect(),t.attr(`width`,C.width),t.attr(`height`,C.height)}f+=C.height+4,C.width>d&&(d=C.width);let w=[];t.classData.members.forEach(e=>{let n=e.getDisplayDetails(),r=n.displayText;o().flowchart.htmlLabels&&(r=r.replace(/</g,`&lt;`).replace(/>/g,`&gt;`));let i=p.node().appendChild(h(r,n.cssStyle?n.cssStyle:t.labelStyle,!0,!0)),c=i.getBBox();if(a(o().flowchart.htmlLabels)){let e=i.children[0],t=s(i);c=e.getBoundingClientRect(),t.attr(`width`,c.width),t.attr(`height`,c.height)}c.width>d&&(d=c.width),f+=c.height+4,w.push(i)}),f+=8;let T=[];if(t.classData.methods.forEach(e=>{let n=e.getDisplayDetails(),r=n.displayText;o().flowchart.htmlLabels&&(r=r.replace(/</g,`&lt;`).replace(/>/g,`&gt;`));let i=p.node().appendChild(h(r,n.cssStyle?n.cssStyle:t.labelStyle,!0,!0)),c=i.getBBox();if(a(o().flowchart.htmlLabels)){let e=i.children[0],t=s(i);c=e.getBoundingClientRect(),t.attr(`width`,c.width),t.attr(`height`,c.height)}c.width>d&&(d=c.width),f+=c.height+4,T.push(i)}),f+=8,g){let e=(d-b.width)/2;s(y).attr(`transform`,`translate( `+(-1*d/2+e)+`, `+-1*f/2+`)`),m=b.height+4}let D=(d-C.width)/2;return s(S).attr(`transform`,`translate( `+(-1*d/2+D)+`, `+(-1*f/2+m)+`)`),m+=C.height+4,l.attr(`class`,`divider`).attr(`x1`,-d/2-n).attr(`x2`,d/2+n).attr(`y1`,-f/2-n+8+m).attr(`y2`,-f/2-n+8+m),m+=8,w.forEach(e=>{s(e).attr(`transform`,`translate( `+-d/2+`, `+(-1*f/2+m+8/2)+`)`);let t=e?.getBBox();m+=(t?.height??0)+4}),m+=8,u.attr(`class`,`divider`).attr(`x1`,-d/2-n).attr(`x2`,d/2+n).attr(`y1`,-f/2-n+8+m).attr(`y2`,-f/2-n+8+m),m+=8,T.forEach(e=>{s(e).attr(`transform`,`translate( `+-d/2+`, `+(-1*f/2+m)+`)`);let t=e?.getBBox();m+=(t?.height??0)+4}),c.attr(`style`,t.style).attr(`class`,`outer title-state`).attr(`x`,-d/2-n).attr(`y`,-(f/2)-n).attr(`width`,d+t.padding).attr(`height`,f+t.padding),_(t,c),t.intersect=function(e){return E.rect(t,e)},i}},V={},me=async(e,t,n)=>{let r,i;if(t.link){let a;o().securityLevel===`sandbox`?a=`_top`:t.linkTarget&&(a=t.linkTarget||`_blank`),r=e.insert(`svg:a`).attr(`xlink:href`,t.link).attr(`target`,a),i=await B[t.shape](r,t,n)}else i=await B[t.shape](e,t,n),r=i;return t.tooltip&&i.attr(`title`,t.tooltip),t.class&&i.attr(`class`,`node default `+t.class),r.attr(`data-node`,`true`),r.attr(`data-id`,t.id),V[t.id]=r,t.haveCallback&&V[t.id].attr(`class`,V[t.id].attr(`class`)+` clickable`),r},H=(e,t)=>{V[t.id]=e},he=()=>{V={}},ge=e=>{let n=V[e.id];t.trace(`Transforming node`,e.diff,e,`translate(`+(e.x-e.width/2-5)+`, `+e.width/2+`)`);let r=e.diff||0;return e.clusterNode?n.attr(`transform`,`translate(`+(e.x+r-e.width/2)+`, `+(e.y-e.height/2-8)+`)`):n.attr(`transform`,`translate(`+e.x+`, `+e.y+`)`),r},U=({flowchart:e})=>{let t=e?.subGraphTitleMargin?.top??0,n=e?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:t+n}},W={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function G(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=K(e),t=K(t);let[n,r]=[e.x,e.y],[i,a]=[t.x,t.y],o=i-n,s=a-r;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}var K=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,q=e=>({x:function(t,n,r){let i=0;if(n===0&&Object.hasOwn(W,e.arrowTypeStart)){let{angle:t,deltaX:n}=G(r[0],r[1]);i=W[e.arrowTypeStart]*Math.cos(t)*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(W,e.arrowTypeEnd)){let{angle:t,deltaX:n}=G(r[r.length-1],r[r.length-2]);i=W[e.arrowTypeEnd]*Math.cos(t)*(n>=0?1:-1)}return K(t).x+i},y:function(t,n,r){let i=0;if(n===0&&Object.hasOwn(W,e.arrowTypeStart)){let{angle:t,deltaY:n}=G(r[0],r[1]);i=W[e.arrowTypeStart]*Math.abs(Math.sin(t))*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(W,e.arrowTypeEnd)){let{angle:t,deltaY:n}=G(r[r.length-1],r[r.length-2]);i=W[e.arrowTypeEnd]*Math.abs(Math.sin(t))*(n>=0?1:-1)}return K(t).y+i}}),J=(e,t,n,r,i)=>{t.arrowTypeStart&&Y(e,`start`,t.arrowTypeStart,n,r,i),t.arrowTypeEnd&&Y(e,`end`,t.arrowTypeEnd,n,r,i)},_e={arrow_cross:`cross`,arrow_point:`point`,arrow_barb:`barb`,arrow_circle:`circle`,aggregation:`aggregation`,extension:`extension`,composition:`composition`,dependency:`dependency`,lollipop:`lollipop`},Y=(e,n,r,i,a,o)=>{let s=_e[r];if(!s){t.warn(`Unknown arrow type: ${r}`);return}let c=n===`start`?`Start`:`End`;e.attr(`marker-${n}`,`url(${i}#${a}_${o}-${s}${c})`)},X={},Z={},ve=()=>{X={},Z={}},ye=(e,t)=>{let n=a(o().flowchart.htmlLabels),r=t.labelType===`markdown`?l(e,t.label,{style:t.labelStyle,useHtmlLabels:n,addSvgBackground:!0}):h(t.label,t.labelStyle),i=e.insert(`g`).attr(`class`,`edgeLabel`),c=i.insert(`g`).attr(`class`,`label`);c.node().appendChild(r);let u=r.getBBox();if(n){let e=r.children[0],t=s(r);u=e.getBoundingClientRect(),t.attr(`width`,u.width),t.attr(`height`,u.height)}c.attr(`transform`,`translate(`+-u.width/2+`, `+-u.height/2+`)`),X[t.id]=i,t.width=u.width,t.height=u.height;let d;if(t.startLabelLeft){let n=h(t.startLabelLeft,t.labelStyle),r=e.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(n);let a=n.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),Z[t.id]||(Z[t.id]={}),Z[t.id].startLeft=r,Q(d,t.startLabelLeft)}if(t.startLabelRight){let n=h(t.startLabelRight,t.labelStyle),r=e.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=r.node().appendChild(n),i.node().appendChild(n);let a=n.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),Z[t.id]||(Z[t.id]={}),Z[t.id].startRight=r,Q(d,t.startLabelRight)}if(t.endLabelLeft){let n=h(t.endLabelLeft,t.labelStyle),r=e.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(n);let a=n.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),r.node().appendChild(n),Z[t.id]||(Z[t.id]={}),Z[t.id].endLeft=r,Q(d,t.endLabelLeft)}if(t.endLabelRight){let n=h(t.endLabelRight,t.labelStyle),r=e.insert(`g`).attr(`class`,`edgeTerminals`),i=r.insert(`g`).attr(`class`,`inner`);d=i.node().appendChild(n);let a=n.getBBox();i.attr(`transform`,`translate(`+-a.width/2+`, `+-a.height/2+`)`),r.node().appendChild(n),Z[t.id]||(Z[t.id]={}),Z[t.id].endRight=r,Q(d,t.endLabelRight)}return r};function Q(e,t){o().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+`px`,e.style.height=`12px`)}var be=(n,r)=>{t.debug(`Moving label abc88 `,n.id,n.label,X[n.id],r);let i=r.updatedPath?r.updatedPath:r.originalPath,{subGraphTitleTotalMargin:a}=U(o());if(n.label){let o=X[n.id],s=n.x,c=n.y;if(i){let a=e.calcLabelPosition(i);t.debug(`Moving label `+n.label+` from (`,s,`,`,c,`) to (`,a.x,`,`,a.y,`) abc88`),r.updatedPath&&(s=a.x,c=a.y)}o.attr(`transform`,`translate(${s}, ${c+a/2})`)}if(n.startLabelLeft){let t=Z[n.id].startLeft,r=n.x,a=n.y;if(i){let t=e.calcTerminalLabelPosition(n.arrowTypeStart?10:0,`start_left`,i);r=t.x,a=t.y}t.attr(`transform`,`translate(${r}, ${a})`)}if(n.startLabelRight){let t=Z[n.id].startRight,r=n.x,a=n.y;if(i){let t=e.calcTerminalLabelPosition(n.arrowTypeStart?10:0,`start_right`,i);r=t.x,a=t.y}t.attr(`transform`,`translate(${r}, ${a})`)}if(n.endLabelLeft){let t=Z[n.id].endLeft,r=n.x,a=n.y;if(i){let t=e.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,`end_left`,i);r=t.x,a=t.y}t.attr(`transform`,`translate(${r}, ${a})`)}if(n.endLabelRight){let t=Z[n.id].endRight,r=n.x,a=n.y;if(i){let t=e.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,`end_right`,i);r=t.x,a=t.y}t.attr(`transform`,`translate(${r}, ${a})`)}},xe=(e,t)=>{let n=e.x,r=e.y,i=Math.abs(t.x-n),a=Math.abs(t.y-r),o=e.width/2,s=e.height/2;return i>=o||a>=s},Se=(e,n,r)=>{t.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(n)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);let i=e.x,a=e.y,o=Math.abs(i-r.x),s=e.width/2,c=r.x<n.x?s-o:s+o,l=e.height/2,u=Math.abs(n.y-r.y),d=Math.abs(n.x-r.x);if(Math.abs(a-n.y)*s>Math.abs(i-n.x)*l){let e=r.y<n.y?n.y-l-a:a-l-n.y;c=d*e/u;let i={x:r.x<n.x?r.x+c:r.x-d+c,y:r.y<n.y?r.y+u-e:r.y-u+e};return c===0&&(i.x=n.x,i.y=n.y),d===0&&(i.x=n.x),u===0&&(i.y=n.y),t.debug(`abc89 topp/bott calc, Q ${u}, q ${e}, R ${d}, r ${c}`,i),i}else{c=r.x<n.x?n.x-s-i:i-s-n.x;let e=u*c/d,a=r.x<n.x?r.x+d-c:r.x-d+c,o=r.y<n.y?r.y+e:r.y-e;return t.debug(`sides calc abc89, Q ${u}, q ${e}, R ${d}, r ${c}`,{_x:a,_y:o}),c===0&&(a=n.x,o=n.y),d===0&&(a=n.x),u===0&&(o=n.y),{x:a,y:o}}},$=(e,n)=>{t.debug(`abc88 cutPathAtIntersect`,e,n);let r=[],i=e[0],a=!1;return e.forEach(e=>{if(!xe(n,e)&&!a){let t=Se(n,i,e),o=!1;r.forEach(e=>{o||=e.x===t.x&&e.y===t.y}),r.some(e=>e.x===t.x&&e.y===t.y)||r.push(t),a=!0}else i=e,a||r.push(e)}),r},Ce=function(e,n,i,a,s,l,u){let d=i.points;t.debug(`abc88 InsertEdge: edge=`,i,`e=`,n);let f=!1,p=l.node(n.v);var m=l.node(n.w);m?.intersect&&p?.intersect&&(d=d.slice(1,i.points.length-1),d.unshift(p.intersect(d[0])),d.push(m.intersect(d[d.length-1]))),i.toCluster&&(t.debug(`to cluster abc88`,a[i.toCluster]),d=$(i.points,a[i.toCluster].node),f=!0),i.fromCluster&&(t.debug(`from cluster abc88`,a[i.fromCluster]),d=$(d.reverse(),a[i.fromCluster].node).reverse(),f=!0);let h=d.filter(e=>!Number.isNaN(e.y)),g=r;i.curve&&(s===`graph`||s===`flowchart`)&&(g=i.curve);let{x:_,y:v}=q(i),y=c().x(_).y(v).curve(g),b;switch(i.thickness){case`normal`:b=`edge-thickness-normal`;break;case`thick`:b=`edge-thickness-thick`;break;case`invisible`:b=`edge-thickness-thick`;break;default:b=``}switch(i.pattern){case`solid`:b+=` edge-pattern-solid`;break;case`dotted`:b+=` edge-pattern-dotted`;break;case`dashed`:b+=` edge-pattern-dashed`;break}let x=e.append(`path`).attr(`d`,y(h)).attr(`id`,i.id).attr(`class`,` `+b+(i.classes?` `+i.classes:``)).attr(`style`,i.style),S=``;(o().flowchart.arrowMarkerAbsolute||o().state.arrowMarkerAbsolute)&&(S=window.location.protocol+`//`+window.location.host+window.location.pathname+window.location.search,S=S.replace(/\(/g,`\\(`),S=S.replace(/\)/g,`\\)`)),J(x,i,S,u,s);let C={};return f&&(C.updatedPath=d),C.originalPath=i.points,C};export{q as a,ye as c,T as d,g as f,_ as g,H as h,h as i,f as l,ge as m,ve as n,U as o,be as p,he as r,Ce as s,J as t,me as u};