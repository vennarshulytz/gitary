import"./chakra-ui-DL3iEWi3.js";import{xO as e}from"./excalidraw-CzZiepgk.js";import{t}from"./graphlib-B0DDLYor.js";import"./dagre-CrppgyKz.js";import{B as n,E as r,J as i,X as a,c as o,ut as s,v as c,w as l,x as u,z as d}from"./mermaid-b5860b54-BvT6Rpbp.js";import"./clone-CLtQ87FR.js";import"./react-markdown-Dc1ste6M.js";import{rt as f}from"./app--fOHLyXs.js";import"./path-CZHMXrTW.js";import"./array-DZBJPEBo.js";import"./line-BdvrR-i1.js";import"./createText-2e5e7dd3-m6WLJX1m.js";import"./edges-e0da2a9e-B0AgRsBg.js";import{n as p,r as m,t as h}from"./styles-9a916d00-XlvzXa9s.js";import{t as g}from"./index-3862675e-Dvbx0_g2.js";s(),e(),i();var _=e=>o.sanitizeText(e,c()),v={dividerMargin:10,padding:5,textHeight:10,curve:void 0},y=function(e,t,n,i){let a=Object.keys(e);r.info(`keys:`,a),r.info(e),a.forEach(function(a){let o=e[a],s={shape:`rect`,id:o.id,domId:o.domId,labelText:_(o.id),labelStyle:``,style:`fill: none; stroke: black`,padding:c().flowchart?.padding??c().class?.padding};t.setNode(o.id,s),b(o.classes,t,n,i,o.id),r.info(`setNode`,s)})},b=function(e,t,n,i,a){let o=Object.keys(e);r.info(`keys:`,o),r.info(e),o.filter(t=>e[t].parent==a).forEach(function(n){let o=e[n],s=o.cssClasses.join(` `),l=u(o.styles),d=o.label??o.id,f={labelStyle:l.labelStyle,shape:`class_box`,labelText:_(d),classData:o,rx:0,ry:0,class:s,style:l.style,id:o.id,domId:o.domId,tooltip:i.db.getTooltip(o.id,a)||``,haveCallback:o.haveCallback,link:o.link,width:o.type===`group`?500:void 0,type:o.type,padding:c().flowchart?.padding??c().class?.padding};t.setNode(o.id,f),a&&t.setParent(o.id,a),r.info(`setNode`,f)})},x=function(e,t,n,i){r.info(e),e.forEach(function(e,o){let s=e,u={labelStyle:``,style:``},d=s.text,f={labelStyle:u.labelStyle,shape:`note`,labelText:_(d),noteData:s,rx:0,ry:0,class:``,style:u.style,id:s.id,domId:s.id,tooltip:``,type:`note`,padding:c().flowchart?.padding??c().class?.padding};if(t.setNode(s.id,f),r.info(`setNode`,f),!s.class||!(s.class in i))return;let p=n+o,m={id:`edgeNote${p}`,classes:`relation`,pattern:`dotted`,arrowhead:`none`,startLabelRight:``,endLabelLeft:``,arrowTypeStart:`none`,arrowTypeEnd:`none`,style:`fill:none`,labelStyle:``,curve:l(v.curve,a)};t.setEdge(s.id,s.class,m,p)})},S=function(e,t){let n=c().flowchart,i=0;e.forEach(function(e){i++;let s={classes:`relation`,pattern:e.relation.lineType==1?`dashed`:`solid`,id:`id_${e.id1}_${e.id2}_${i}`,arrowhead:e.type===`arrow_open`?`none`:`normal`,startLabelRight:e.relationTitle1===`none`?``:e.relationTitle1,endLabelLeft:e.relationTitle2===`none`?``:e.relationTitle2,arrowTypeStart:T(e.relation.type1),arrowTypeEnd:T(e.relation.type2),style:`fill:none`,labelStyle:``,curve:l(n?.curve,a)};if(r.info(s,e),e.style!==void 0){let t=u(e.style);s.style=t.style,s.labelStyle=t.labelStyle}e.text=e.title,e.text===void 0?e.style!==void 0&&(s.arrowheadStyle=`fill: #333`):(s.arrowheadStyle=`fill: #333`,s.labelpos=`c`,c().flowchart?.htmlLabels??c().htmlLabels?(s.labelType=`html`,s.label=`<span class="edgeLabel">`+e.text+`</span>`):(s.labelType=`text`,s.label=e.text.replace(o.lineBreakRegex,`
`),e.style===void 0&&(s.style=s.style||`stroke: #333; stroke-width: 1.5px;fill:none`),s.labelStyle=s.labelStyle.replace(`color:`,`fill:`))),t.setEdge(e.id1,e.id2,s,i)})},C=function(e){v={...v,...e}},w=async function(e,i,a,o){r.info(`Drawing class - `,i);let s=c().flowchart??c().class,l=c().securityLevel;r.info(`config:`,s);let u=s?.nodeSpacing??50,p=s?.rankSpacing??50,m=new t({multigraph:!0,compound:!0}).setGraph({rankdir:o.db.getDirection(),nodesep:u,ranksep:p,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=o.db.getNamespaces(),_=o.db.getClasses(),v=o.db.getRelations(),C=o.db.getNotes();r.info(v),y(h,m,i,o),b(_,m,i,o),S(v,m),x(C,m,v.length+1,_);let w;l===`sandbox`&&(w=f(`#i`+i));let T=f(l===`sandbox`?w.nodes()[0].contentDocument.body:`body`),E=T.select(`[id="${i}"]`);if(await g(T.select(`#`+i+` g`),m,[`aggregation`,`extension`,`composition`,`dependency`,`lollipop`],`classDiagram`,i),n.insertTitle(E,`classTitleText`,s?.titleTopMargin??5,o.db.getDiagramTitle()),d(m,E,s?.diagramPadding,s?.useMaxWidth),!s?.htmlLabels){let e=l===`sandbox`?w.nodes()[0].contentDocument:document,t=e.querySelectorAll(`[id="`+i+`"] .edgeLabel .label`);for(let n of t){let t=n.getBBox(),r=e.createElementNS(`http://www.w3.org/2000/svg`,`rect`);r.setAttribute(`rx`,0),r.setAttribute(`ry`,0),r.setAttribute(`width`,t.width),r.setAttribute(`height`,t.height),n.insertBefore(r,n.firstChild)}}};function T(e){let t;switch(e){case 0:t=`aggregation`;break;case 1:t=`extension`;break;case 2:t=`composition`;break;case 3:t=`dependency`;break;case 4:t=`lollipop`;break;default:t=`none`}return t}var E={parser:p,db:h,renderer:{setConf:C,draw:w},styles:m,init:e=>{e.class||={},e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,h.clear()}};export{E as diagram};