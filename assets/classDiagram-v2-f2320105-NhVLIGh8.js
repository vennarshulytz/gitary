import"./chakra-ui-DL3iEWi3.js";import{xO as e}from"./excalidraw-D5Q9WXro.js";import"./react-markdown-CPDF2saO.js";import{C as t}from"./app-w2Jd5jCf.js";import{B as n,E as r,Mt as i,c as a,gt as o,v as s,vt as c,w as l,x as u,z as d}from"./mermaid-b5860b54-BtaV6srn.js";import"./path-D481w0MF.js";import"./array-C5d_RYS0.js";import"./line-DXOMy9a7.js";import"./_getTag-B_2LHer_.js";import{t as f}from"./graphlib-CE-n686m.js";import"./_baseIsEqual-Dvp7ABzP.js";import"./clone-Ci0bV0Kv.js";import"./createText-2e5e7dd3-DD66Z287.js";import"./edges-e0da2a9e-BDssmOYG.js";import"./dagre-ZPe2a3vH.js";import{n as p,r as m,t as h}from"./styles-9a916d00-CEe0CJqs.js";import{t as g}from"./index-3862675e-C8wj6jNB.js";i(),e(),o();var _=e=>a.sanitizeText(e,s()),v={dividerMargin:10,padding:5,textHeight:10,curve:void 0},y=function(e,t,n,i){let a=Object.keys(e);r.info(`keys:`,a),r.info(e),a.forEach(function(a){let o=e[a],c={shape:`rect`,id:o.id,domId:o.domId,labelText:_(o.id),labelStyle:``,style:`fill: none; stroke: black`,padding:s().flowchart?.padding??s().class?.padding};t.setNode(o.id,c),b(o.classes,t,n,i,o.id),r.info(`setNode`,c)})},b=function(e,t,n,i,a){let o=Object.keys(e);r.info(`keys:`,o),r.info(e),o.filter(t=>e[t].parent==a).forEach(function(n){let o=e[n],c=o.cssClasses.join(` `),l=u(o.styles),d=o.label??o.id,f={labelStyle:l.labelStyle,shape:`class_box`,labelText:_(d),classData:o,rx:0,ry:0,class:c,style:l.style,id:o.id,domId:o.domId,tooltip:i.db.getTooltip(o.id,a)||``,haveCallback:o.haveCallback,link:o.link,width:o.type===`group`?500:void 0,type:o.type,padding:s().flowchart?.padding??s().class?.padding};t.setNode(o.id,f),a&&t.setParent(o.id,a),r.info(`setNode`,f)})},x=function(e,t,n,i){r.info(e),e.forEach(function(e,a){let o=e,u={labelStyle:``,style:``},d=o.text,f={labelStyle:u.labelStyle,shape:`note`,labelText:_(d),noteData:o,rx:0,ry:0,class:``,style:u.style,id:o.id,domId:o.id,tooltip:``,type:`note`,padding:s().flowchart?.padding??s().class?.padding};if(t.setNode(o.id,f),r.info(`setNode`,f),!o.class||!(o.class in i))return;let p=n+a,m={id:`edgeNote${p}`,classes:`relation`,pattern:`dotted`,arrowhead:`none`,startLabelRight:``,endLabelLeft:``,arrowTypeStart:`none`,arrowTypeEnd:`none`,style:`fill:none`,labelStyle:``,curve:l(v.curve,c)};t.setEdge(o.id,o.class,m,p)})},S=function(e,t){let n=s().flowchart,i=0;e.forEach(function(e){i++;let o={classes:`relation`,pattern:e.relation.lineType==1?`dashed`:`solid`,id:`id_${e.id1}_${e.id2}_${i}`,arrowhead:e.type===`arrow_open`?`none`:`normal`,startLabelRight:e.relationTitle1===`none`?``:e.relationTitle1,endLabelLeft:e.relationTitle2===`none`?``:e.relationTitle2,arrowTypeStart:T(e.relation.type1),arrowTypeEnd:T(e.relation.type2),style:`fill:none`,labelStyle:``,curve:l(n?.curve,c)};if(r.info(o,e),e.style!==void 0){let t=u(e.style);o.style=t.style,o.labelStyle=t.labelStyle}e.text=e.title,e.text===void 0?e.style!==void 0&&(o.arrowheadStyle=`fill: #333`):(o.arrowheadStyle=`fill: #333`,o.labelpos=`c`,s().flowchart?.htmlLabels??s().htmlLabels?(o.labelType=`html`,o.label=`<span class="edgeLabel">`+e.text+`</span>`):(o.labelType=`text`,o.label=e.text.replace(a.lineBreakRegex,`
`),e.style===void 0&&(o.style=o.style||`stroke: #333; stroke-width: 1.5px;fill:none`),o.labelStyle=o.labelStyle.replace(`color:`,`fill:`))),t.setEdge(e.id1,e.id2,o,i)})},C=function(e){v={...v,...e}},w=async function(e,i,a,o){r.info(`Drawing class - `,i);let c=s().flowchart??s().class,l=s().securityLevel;r.info(`config:`,c);let u=c?.nodeSpacing??50,p=c?.rankSpacing??50,m=new f({multigraph:!0,compound:!0}).setGraph({rankdir:o.db.getDirection(),nodesep:u,ranksep:p,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=o.db.getNamespaces(),_=o.db.getClasses(),v=o.db.getRelations(),C=o.db.getNotes();r.info(v),y(h,m,i,o),b(_,m,i,o),S(v,m),x(C,m,v.length+1,_);let w;l===`sandbox`&&(w=t(`#i`+i));let T=t(l===`sandbox`?w.nodes()[0].contentDocument.body:`body`),E=T.select(`[id="${i}"]`);if(await g(T.select(`#`+i+` g`),m,[`aggregation`,`extension`,`composition`,`dependency`,`lollipop`],`classDiagram`,i),n.insertTitle(E,`classTitleText`,c?.titleTopMargin??5,o.db.getDiagramTitle()),d(m,E,c?.diagramPadding,c?.useMaxWidth),!c?.htmlLabels){let e=l===`sandbox`?w.nodes()[0].contentDocument:document,t=e.querySelectorAll(`[id="`+i+`"] .edgeLabel .label`);for(let n of t){let t=n.getBBox(),r=e.createElementNS(`http://www.w3.org/2000/svg`,`rect`);r.setAttribute(`rx`,0),r.setAttribute(`ry`,0),r.setAttribute(`width`,t.width),r.setAttribute(`height`,t.height),n.insertBefore(r,n.firstChild)}}};function T(e){let t;switch(e){case 0:t=`aggregation`;break;case 1:t=`extension`;break;case 2:t=`composition`;break;case 3:t=`dependency`;break;case 4:t=`lollipop`;break;default:t=`none`}return t}var E={parser:p,db:h,renderer:{setConf:C,draw:w},styles:m,init:e=>{e.class||={},e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,h.clear()}};export{E as diagram};