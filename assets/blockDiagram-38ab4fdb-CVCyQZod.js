import"./chakra-ui-DL3iEWi3.js";import{xO as e}from"./excalidraw-yEEnJjZ9.js";import{t}from"./graphlib-BBe-g-5o.js";import{E as n,G as r,J as i,c as a,s as o,u as s,ut as c,v as l,x as u,y as d}from"./mermaid-b5860b54-BTOIs_ic.js";import{t as f}from"./clone-C0eXRRqW.js";import"./react-markdown-Dc1ste6M.js";import{it as p}from"./app-CMv64s6i.js";import{t as m}from"./ordinal-DRs0S9oG.js";import"./path-CZHMXrTW.js";import"./init-U6P6-Oz0.js";import{t as h}from"./Tableau10-DFWm8YfB.js";import"./array-DZBJPEBo.js";import"./line-BEAZALAg.js";import{t as g}from"./channel-Cr9yqk8n.js";import"./createText-2e5e7dd3-D29an0Oq.js";import{c as _,l as v,m as y,p as b,s as x,u as S}from"./edges-e0da2a9e-DETMvhMb.js";c(),e(),i();var C=function(){var e=function(e,t,n,r){for(n||={},r=e.length;r--;n[e[r]]=t);return n},t=[1,7],n=[1,13],r=[1,14],i=[1,15],a=[1,19],o=[1,16],s=[1,17],c=[1,18],l=[8,30],u=[8,21,28,29,30,31,32,40,44,47],d=[1,23],f=[1,24],p=[8,15,16,21,28,29,30,31,32,40,44,47],m=[8,15,16,21,27,28,29,30,31,32,40,44,47],h=[1,49],g={trace:function(){},yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:`error`,4:`SPACELINE`,5:`NL`,7:`SPACE`,8:`EOF`,10:`BLOCK_DIAGRAM_KEY`,15:`LINK`,16:`START_LINK`,17:`LINK_LABEL`,18:`STR`,21:`SPACE_BLOCK`,27:`SIZE`,28:`COLUMNS`,29:`id-block`,30:`end`,31:`block`,32:`NODE_ID`,35:`DIR`,36:`NODE_DSTART`,37:`NODE_DEND`,38:`BLOCK_ARROW_START`,39:`BLOCK_ARROW_END`,40:`classDef`,41:`CLASSDEF_ID`,42:`CLASSDEF_STYLEOPTS`,43:`DEFAULT`,44:`class`,45:`CLASSENTITY_IDS`,46:`STYLECLASS`,47:`style`,48:`STYLE_ENTITY_IDS`,49:`STYLE_DEFINITION_DATA`},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:function(e,t,n,r,i,a,o){var s=a.length-1;switch(i){case 4:r.getLogger().debug(`Rule: separator (NL) `);break;case 5:r.getLogger().debug(`Rule: separator (Space) `);break;case 6:r.getLogger().debug(`Rule: separator (EOF) `);break;case 7:r.getLogger().debug(`Rule: hierarchy: `,a[s-1]),r.setHierarchy(a[s-1]);break;case 8:r.getLogger().debug(`Stop NL `);break;case 9:r.getLogger().debug(`Stop EOF `);break;case 10:r.getLogger().debug(`Stop NL2 `);break;case 11:r.getLogger().debug(`Stop EOF2 `);break;case 12:r.getLogger().debug(`Rule: statement: `,a[s]),typeof a[s].length==`number`?this.$=a[s]:this.$=[a[s]];break;case 13:r.getLogger().debug(`Rule: statement #2: `,a[s-1]),this.$=[a[s-1]].concat(a[s]);break;case 14:r.getLogger().debug(`Rule: link: `,a[s],e),this.$={edgeTypeStr:a[s],label:``};break;case 15:r.getLogger().debug(`Rule: LABEL link: `,a[s-3],a[s-1],a[s]),this.$={edgeTypeStr:a[s],label:a[s-1]};break;case 18:let t=parseInt(a[s]);this.$={id:r.generateId(),type:`space`,label:``,width:t,children:[]};break;case 23:r.getLogger().debug(`Rule: (nodeStatement link node) `,a[s-2],a[s-1],a[s],` typestr: `,a[s-1].edgeTypeStr);let n=r.edgeStrToEdgeData(a[s-1].edgeTypeStr);this.$=[{id:a[s-2].id,label:a[s-2].label,type:a[s-2].type,directions:a[s-2].directions},{id:a[s-2].id+`-`+a[s].id,start:a[s-2].id,end:a[s].id,label:a[s-1].label,type:`edge`,directions:a[s].directions,arrowTypeEnd:n,arrowTypeStart:`arrow_open`},{id:a[s].id,label:a[s].label,type:r.typeStr2Type(a[s].typeStr),directions:a[s].directions}];break;case 24:r.getLogger().debug(`Rule: nodeStatement (abc88 node size) `,a[s-1],a[s]),this.$={id:a[s-1].id,label:a[s-1].label,type:r.typeStr2Type(a[s-1].typeStr),directions:a[s-1].directions,widthInColumns:parseInt(a[s],10)};break;case 25:r.getLogger().debug(`Rule: nodeStatement (node) `,a[s]),this.$={id:a[s].id,label:a[s].label,type:r.typeStr2Type(a[s].typeStr),directions:a[s].directions,widthInColumns:1};break;case 26:r.getLogger().debug(`APA123`,this?this:`na`),r.getLogger().debug(`COLUMNS: `,a[s]),this.$={type:`column-setting`,columns:a[s]===`auto`?-1:parseInt(a[s])};break;case 27:r.getLogger().debug(`Rule: id-block statement : `,a[s-2],a[s-1]),r.generateId(),this.$={...a[s-2],type:`composite`,children:a[s-1]};break;case 28:r.getLogger().debug(`Rule: blockStatement : `,a[s-2],a[s-1],a[s]),this.$={id:r.generateId(),type:`composite`,label:``,children:a[s-1]};break;case 29:r.getLogger().debug(`Rule: node (NODE_ID separator): `,a[s]),this.$={id:a[s]};break;case 30:r.getLogger().debug(`Rule: node (NODE_ID nodeShapeNLabel separator): `,a[s-1],a[s]),this.$={id:a[s-1],label:a[s].label,typeStr:a[s].typeStr,directions:a[s].directions};break;case 31:r.getLogger().debug(`Rule: dirList: `,a[s]),this.$=[a[s]];break;case 32:r.getLogger().debug(`Rule: dirList: `,a[s-1],a[s]),this.$=[a[s-1]].concat(a[s]);break;case 33:r.getLogger().debug(`Rule: nodeShapeNLabel: `,a[s-2],a[s-1],a[s]),this.$={typeStr:a[s-2]+a[s],label:a[s-1]};break;case 34:r.getLogger().debug(`Rule: BLOCK_ARROW nodeShapeNLabel: `,a[s-3],a[s-2],` #3:`,a[s-1],a[s]),this.$={typeStr:a[s-3]+a[s],label:a[s-2],directions:a[s-1]};break;case 35:case 36:this.$={type:`classDef`,id:a[s-1].trim(),css:a[s].trim()};break;case 37:this.$={type:`applyClass`,id:a[s-1].trim(),styleClass:a[s].trim()};break;case 38:this.$={type:`applyStyles`,id:a[s-1].trim(),stylesStr:a[s].trim()};break}},table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:r,31:i,32:a,40:o,44:s,47:c},{8:[1,20]},e(l,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:t,28:n,29:r,31:i,32:a,40:o,44:s,47:c}),e(u,[2,16],{14:22,15:d,16:f}),e(u,[2,17]),e(u,[2,18]),e(u,[2,19]),e(u,[2,20]),e(u,[2,21]),e(u,[2,22]),e(p,[2,25],{27:[1,25]}),e(u,[2,26]),{19:26,26:12,32:a},{11:27,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:r,31:i,32:a,40:o,44:s,47:c},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},e(m,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},e(l,[2,13]),{26:35,32:a},{32:[2,14]},{17:[1,36]},e(p,[2,24]),{11:37,13:4,14:22,15:d,16:f,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:n,29:r,31:i,32:a,40:o,44:s,47:c},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},e(m,[2,30]),{18:[1,43]},{18:[1,44]},e(p,[2,23]),{18:[1,45]},{30:[1,46]},e(u,[2,28]),e(u,[2,35]),e(u,[2,36]),e(u,[2,37]),e(u,[2,38]),{37:[1,47]},{34:48,35:h},{15:[1,50]},e(u,[2,27]),e(m,[2,33]),{39:[1,51]},{34:52,35:h,39:[2,31]},{32:[2,15]},e(m,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:function(e,t){if(t.recoverable)this.trace(e);else{var n=Error(e);throw n.hash=t,n}},parse:function(e){var t=this,n=[0],r=[],i=[null],a=[],o=this.table,s=``,c=0,l=0,u=2,d=1,f=a.slice.call(arguments,1),p=Object.create(this.lexer),m={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(m.yy[h]=this.yy[h]);p.setInput(e,m.yy),m.yy.lexer=p,m.yy.parser=this,p.yylloc===void 0&&(p.yylloc={});var g=p.yylloc;a.push(g);var _=p.options&&p.options.ranges;typeof m.yy.parseError==`function`?this.parseError=m.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function v(){var e=r.pop()||p.lex()||d;return typeof e!=`number`&&(e instanceof Array&&(r=e,e=r.pop()),e=t.symbols_[e]||e),e}for(var y,b,x,S,C={},w,T,E,D;;){if(b=n[n.length-1],this.defaultActions[b]?x=this.defaultActions[b]:(y??=v(),x=o[b]&&o[b][y]),x===void 0||!x.length||!x[0]){var O=``;for(w in D=[],o[b])this.terminals_[w]&&w>u&&D.push(`'`+this.terminals_[w]+`'`);O=p.showPosition?`Parse error on line `+(c+1)+`:
`+p.showPosition()+`
Expecting `+D.join(`, `)+`, got '`+(this.terminals_[y]||y)+`'`:`Parse error on line `+(c+1)+`: Unexpected `+(y==d?`end of input`:`'`+(this.terminals_[y]||y)+`'`),this.parseError(O,{text:p.match,token:this.terminals_[y]||y,line:p.yylineno,loc:g,expected:D})}if(x[0]instanceof Array&&x.length>1)throw Error(`Parse Error: multiple actions possible at state: `+b+`, token: `+y);switch(x[0]){case 1:n.push(y),i.push(p.yytext),a.push(p.yylloc),n.push(x[1]),y=null,l=p.yyleng,s=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(T=this.productions_[x[1]][1],C.$=i[i.length-T],C._$={first_line:a[a.length-(T||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(T||1)].first_column,last_column:a[a.length-1].last_column},_&&(C._$.range=[a[a.length-(T||1)].range[0],a[a.length-1].range[1]]),S=this.performAction.apply(C,[s,l,c,m.yy,x[1],i,a].concat(f)),S!==void 0)return S;T&&(n=n.slice(0,-1*T*2),i=i.slice(0,-1*T),a=a.slice(0,-1*T)),n.push(this.productions_[x[1]][0]),i.push(C.$),a.push(C._$),E=o[n[n.length-2]][n[n.length-1]],n.push(E);break;case 3:return!0}}return!0}};g.lexer=function(){return{EOF:1,parseError:function(e,t){if(this.yy.parser)this.yy.parser.parseError(e,t);else throw Error(e)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match=``,this.conditionStack=[`INITIAL`],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError(`Lexical error on line `+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:``,token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?`...`:``)+e.substr(-20).replace(/\n/g,``)},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?`...`:``)).replace(/\n/g,``)},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join(`-`);return e+this.upcomingInput()+`
`+t+`^`},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var a in i)this[a]=i[a];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext=``,this.match=``);for(var i=this._currentRules(),a=0;a<i.length;a++)if(n=this._input.match(this.rules[i[a]]),n&&(!t||n[0].length>t[0].length)){if(t=n,r=a,this.options.backtrack_lexer){if(e=this.test_match(n,i[a]),e!==!1)return e;if(this._backtrack){t=!1;continue}else return!1}else if(!this.options.flex)break}return t?(e=this.test_match(t,i[r]),e===!1?!1:e):this._input===``?this.EOF:this.parseError(`Lexical error on line `+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:``,token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:`INITIAL`},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return 10;case 1:return e.getLogger().debug(`Found space-block`),31;case 2:return e.getLogger().debug(`Found nl-block`),31;case 3:return e.getLogger().debug(`Found space-block`),29;case 4:e.getLogger().debug(`.`,t.yytext);break;case 5:e.getLogger().debug(`_`,t.yytext);break;case 6:return 5;case 7:return t.yytext=-1,28;case 8:return t.yytext=t.yytext.replace(/columns\s+/,``),e.getLogger().debug(`COLUMNS (LEX)`,t.yytext),28;case 9:this.pushState(`md_string`);break;case 10:return`MD_STR`;case 11:this.popState();break;case 12:this.pushState(`string`);break;case 13:e.getLogger().debug(`LEX: POPPING STR:`,t.yytext),this.popState();break;case 14:return e.getLogger().debug(`LEX: STR end:`,t.yytext),`STR`;case 15:return t.yytext=t.yytext.replace(/space\:/,``),e.getLogger().debug(`SPACE NUM (LEX)`,t.yytext),21;case 16:return t.yytext=`1`,e.getLogger().debug(`COLUMNS (LEX)`,t.yytext),21;case 17:return 43;case 18:return`LINKSTYLE`;case 19:return`INTERPOLATE`;case 20:return this.pushState(`CLASSDEF`),40;case 21:return this.popState(),this.pushState(`CLASSDEFID`),`DEFAULT_CLASSDEF_ID`;case 22:return this.popState(),this.pushState(`CLASSDEFID`),41;case 23:return this.popState(),42;case 24:return this.pushState(`CLASS`),44;case 25:return this.popState(),this.pushState(`CLASS_STYLE`),45;case 26:return this.popState(),46;case 27:return this.pushState(`STYLE_STMNT`),47;case 28:return this.popState(),this.pushState(`STYLE_DEFINITION`),48;case 29:return this.popState(),49;case 30:return this.pushState(`acc_title`),`acc_title`;case 31:return this.popState(),`acc_title_value`;case 32:return this.pushState(`acc_descr`),`acc_descr`;case 33:return this.popState(),`acc_descr_value`;case 34:this.pushState(`acc_descr_multiline`);break;case 35:this.popState();break;case 36:return`acc_descr_multiline_value`;case 37:return 30;case 38:return this.popState(),e.getLogger().debug(`Lex: ((`),`NODE_DEND`;case 39:return this.popState(),e.getLogger().debug(`Lex: ((`),`NODE_DEND`;case 40:return this.popState(),e.getLogger().debug(`Lex: ))`),`NODE_DEND`;case 41:return this.popState(),e.getLogger().debug(`Lex: ((`),`NODE_DEND`;case 42:return this.popState(),e.getLogger().debug(`Lex: ((`),`NODE_DEND`;case 43:return this.popState(),e.getLogger().debug(`Lex: (-`),`NODE_DEND`;case 44:return this.popState(),e.getLogger().debug(`Lex: -)`),`NODE_DEND`;case 45:return this.popState(),e.getLogger().debug(`Lex: ((`),`NODE_DEND`;case 46:return this.popState(),e.getLogger().debug(`Lex: ]]`),`NODE_DEND`;case 47:return this.popState(),e.getLogger().debug(`Lex: (`),`NODE_DEND`;case 48:return this.popState(),e.getLogger().debug(`Lex: ])`),`NODE_DEND`;case 49:return this.popState(),e.getLogger().debug(`Lex: /]`),`NODE_DEND`;case 50:return this.popState(),e.getLogger().debug(`Lex: /]`),`NODE_DEND`;case 51:return this.popState(),e.getLogger().debug(`Lex: )]`),`NODE_DEND`;case 52:return this.popState(),e.getLogger().debug(`Lex: )`),`NODE_DEND`;case 53:return this.popState(),e.getLogger().debug(`Lex: ]>`),`NODE_DEND`;case 54:return this.popState(),e.getLogger().debug(`Lex: ]`),`NODE_DEND`;case 55:return e.getLogger().debug(`Lexa: -)`),this.pushState(`NODE`),36;case 56:return e.getLogger().debug(`Lexa: (-`),this.pushState(`NODE`),36;case 57:return e.getLogger().debug(`Lexa: ))`),this.pushState(`NODE`),36;case 58:return e.getLogger().debug(`Lexa: )`),this.pushState(`NODE`),36;case 59:return e.getLogger().debug(`Lex: (((`),this.pushState(`NODE`),36;case 60:return e.getLogger().debug(`Lexa: )`),this.pushState(`NODE`),36;case 61:return e.getLogger().debug(`Lexa: )`),this.pushState(`NODE`),36;case 62:return e.getLogger().debug(`Lexa: )`),this.pushState(`NODE`),36;case 63:return e.getLogger().debug(`Lexc: >`),this.pushState(`NODE`),36;case 64:return e.getLogger().debug(`Lexa: ([`),this.pushState(`NODE`),36;case 65:return e.getLogger().debug(`Lexa: )`),this.pushState(`NODE`),36;case 66:return this.pushState(`NODE`),36;case 67:return this.pushState(`NODE`),36;case 68:return this.pushState(`NODE`),36;case 69:return this.pushState(`NODE`),36;case 70:return this.pushState(`NODE`),36;case 71:return this.pushState(`NODE`),36;case 72:return this.pushState(`NODE`),36;case 73:return e.getLogger().debug(`Lexa: [`),this.pushState(`NODE`),36;case 74:return this.pushState(`BLOCK_ARROW`),e.getLogger().debug(`LEX ARR START`),38;case 75:return e.getLogger().debug(`Lex: NODE_ID`,t.yytext),32;case 76:return e.getLogger().debug(`Lex: EOF`,t.yytext),8;case 77:this.pushState(`md_string`);break;case 78:this.pushState(`md_string`);break;case 79:return`NODE_DESCR`;case 80:this.popState();break;case 81:e.getLogger().debug(`Lex: Starting string`),this.pushState(`string`);break;case 82:e.getLogger().debug(`LEX ARR: Starting string`),this.pushState(`string`);break;case 83:return e.getLogger().debug(`LEX: NODE_DESCR:`,t.yytext),`NODE_DESCR`;case 84:e.getLogger().debug(`LEX POPPING`),this.popState();break;case 85:e.getLogger().debug(`Lex: =>BAE`),this.pushState(`ARROW_DIR`);break;case 86:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (right): dir:`,t.yytext),`DIR`;case 87:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (left):`,t.yytext),`DIR`;case 88:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (x):`,t.yytext),`DIR`;case 89:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (y):`,t.yytext),`DIR`;case 90:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (up):`,t.yytext),`DIR`;case 91:return t.yytext=t.yytext.replace(/^,\s*/,``),e.getLogger().debug(`Lex (down):`,t.yytext),`DIR`;case 92:return t.yytext=`]>`,e.getLogger().debug(`Lex (ARROW_DIR end):`,t.yytext),this.popState(),this.popState(),`BLOCK_ARROW_END`;case 93:return e.getLogger().debug(`Lex: LINK`,`#`+t.yytext+`#`),15;case 94:return e.getLogger().debug(`Lex: LINK`,t.yytext),15;case 95:return e.getLogger().debug(`Lex: LINK`,t.yytext),15;case 96:return e.getLogger().debug(`Lex: LINK`,t.yytext),15;case 97:return e.getLogger().debug(`Lex: START_LINK`,t.yytext),this.pushState(`LLABEL`),16;case 98:return e.getLogger().debug(`Lex: START_LINK`,t.yytext),this.pushState(`LLABEL`),16;case 99:return e.getLogger().debug(`Lex: START_LINK`,t.yytext),this.pushState(`LLABEL`),16;case 100:this.pushState(`md_string`);break;case 101:return e.getLogger().debug(`Lex: Starting string`),this.pushState(`string`),`LINK_LABEL`;case 102:return this.popState(),e.getLogger().debug(`Lex: LINK`,`#`+t.yytext+`#`),15;case 103:return this.popState(),e.getLogger().debug(`Lex: LINK`,t.yytext),15;case 104:return this.popState(),e.getLogger().debug(`Lex: LINK`,t.yytext),15;case 105:return e.getLogger().debug(`Lex: COLON`,t.yytext),t.yytext=t.yytext.slice(1),27}},rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}}}();function _(){this.yy={}}return _.prototype=g,g.Parser=_,new _}();C.parser=C;var w=C,T={},E=[],D={},O=`color`,k=`fill`,A=`bgFill`,j=`,`,ee=l(),M={},te=e=>a.sanitizeText(e,ee),ne=function(e,t=``){M[e]===void 0&&(M[e]={id:e,styles:[],textStyles:[]});let n=M[e];t?.split(j).forEach(e=>{let t=e.replace(/([^;]*);/,`$1`).trim();if(e.match(O)){let e=t.replace(k,A).replace(O,k);n.textStyles.push(e)}n.styles.push(t)})},N=function(e,t=``){let n=T[e];t!=null&&(n.styles=t.split(j))},P=function(e,t){e.split(`,`).forEach(function(e){let n=T[e];if(n===void 0){let t=e.trim();T[t]={id:t,type:`na`,children:[]},n=T[t]}n.classes||=[],n.classes.push(t)})},F=(e,t)=>{let n=e.flat(),r=[];for(let e of n){if(e.label&&=te(e.label),e.type===`classDef`){ne(e.id,e.css);continue}if(e.type===`applyClass`){P(e.id,e?.styleClass||``);continue}if(e.type===`applyStyles`){e?.stylesStr&&N(e.id,e?.stylesStr);continue}if(e.type===`column-setting`)t.columns=e.columns||-1;else if(e.type===`edge`)D[e.id]?D[e.id]++:D[e.id]=1,e.id=D[e.id]+`-`+e.id,E.push(e);else{e.label||(e.type===`composite`?e.label=``:e.label=e.id);let t=!T[e.id];if(t?T[e.id]=e:(e.type!==`na`&&(T[e.id].type=e.type),e.label!==e.id&&(T[e.id].label=e.label)),e.children&&F(e.children,e),e.type===`space`){let t=e.width||1;for(let n=0;n<t;n++){let t=f(e);t.id=t.id+`-`+n,T[t.id]=t,r.push(t)}}else t&&r.push(e)}}t.children=r},I=[],L={id:`root`,type:`composite`,children:[],columns:-1},R=()=>{n.debug(`Clear called`),o(),L={id:`root`,type:`composite`,children:[],columns:-1},T={root:L},I=[],M={},E=[],D={}};function z(e){switch(n.debug(`typeStr2Type`,e),e){case`[]`:return`square`;case`()`:return n.debug(`we have a round`),`round`;case`(())`:return`circle`;case`>]`:return`rect_left_inv_arrow`;case`{}`:return`diamond`;case`{{}}`:return`hexagon`;case`([])`:return`stadium`;case`[[]]`:return`subroutine`;case`[()]`:return`cylinder`;case`((()))`:return`doublecircle`;case`[//]`:return`lean_right`;case`[\\\\]`:return`lean_left`;case`[/\\]`:return`trapezoid`;case`[\\/]`:return`inv_trapezoid`;case`<[]>`:return`block_arrow`;default:return`na`}}function B(e){switch(n.debug(`typeStr2Type`,e),e){case`==`:return`thick`;default:return`normal`}}function V(e){switch(e.trim()){case`--x`:return`arrow_cross`;case`--o`:return`arrow_circle`;default:return`arrow_point`}}var H=0,U={getConfig:()=>d().block,typeStr2Type:z,edgeTypeStr2Type:B,edgeStrToEdgeData:V,getLogger:()=>console,getBlocksFlat:()=>[...Object.values(T)],getBlocks:()=>I||[],getEdges:()=>E,setHierarchy:e=>{L.children=e,F(e,L),I=L.children},getBlock:e=>T[e],setBlock:e=>{T[e.id]=e},getColumns:e=>{let t=T[e];return t?t.columns?t.columns:t.children?t.children.length:-1:-1},getClasses:function(){return M},clear:R,generateId:()=>(H++,`id-`+Math.random().toString(36).substr(2,12)+`-`+H)},W=(e,t)=>{let n=g;return r(n(e,`r`),n(e,`g`),n(e,`b`),t)},G=e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${W(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${W(e.mainBkg,.5)};
    fill: ${W(e.clusterBkg,.5)};
    stroke: ${W(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`;function K(e,t,n=!1){let r=e,i=`default`;(r?.classes?.length||0)>0&&(i=(r?.classes||[]).join(` `)),i+=` flowchart-label`;let a=0,o=``,s;switch(r.type){case`round`:a=5,o=`rect`;break;case`composite`:a=0,o=`composite`,s=0;break;case`square`:o=`rect`;break;case`diamond`:o=`question`;break;case`hexagon`:o=`hexagon`;break;case`block_arrow`:o=`block_arrow`;break;case`odd`:o=`rect_left_inv_arrow`;break;case`lean_right`:o=`lean_right`;break;case`lean_left`:o=`lean_left`;break;case`trapezoid`:o=`trapezoid`;break;case`inv_trapezoid`:o=`inv_trapezoid`;break;case`rect_left_inv_arrow`:o=`rect_left_inv_arrow`;break;case`circle`:o=`circle`;break;case`ellipse`:o=`ellipse`;break;case`stadium`:o=`stadium`;break;case`subroutine`:o=`subroutine`;break;case`cylinder`:o=`cylinder`;break;case`group`:o=`rect`;break;case`doublecircle`:o=`doublecircle`;break;default:o=`rect`}let c=u(r?.styles||[]),l=r.label,f=r.size||{width:0,height:0,x:0,y:0};return{labelStyle:c.labelStyle,shape:o,labelText:l,rx:a,ry:a,class:i,style:c.style,id:r.id,directions:r.directions,width:f.width,height:f.height,x:f.x,y:f.y,positioned:n,intersect:void 0,type:r.type,padding:s??(d()?.block?.padding||0)}}async function q(e,t,n){let r=K(t,n,!1);if(r.type===`group`)return;let i=await S(e,r),a=i.node().getBBox(),o=n.getBlock(r.id);o.size={width:a.width,height:a.height,x:0,y:0,node:i},n.setBlock(o),i.remove()}async function J(e,t,n){let r=K(t,n,!0);n.getBlock(r.id).type!==`space`&&(await S(e,r),t.intersect=r?.intersect,y(r))}async function Y(e,t,n,r){for(let i of t)await r(e,i,n),i.children&&await Y(e,i.children,n,r)}async function re(e,t,n){await Y(e,t,n,q)}async function ie(e,t,n){await Y(e,t,n,J)}async function ae(e,n,r,i,a){let o=new t({multigraph:!0,compound:!0});o.setGraph({rankdir:`TB`,nodesep:10,ranksep:10,marginx:8,marginy:8});for(let e of r)e.size&&o.setNode(e.id,{width:e.size.width,height:e.size.height,intersect:e.intersect});for(let t of n)if(t.start&&t.end){let n=i.getBlock(t.start),r=i.getBlock(t.end);if(n?.size&&r?.size){let i=n.size,s=r.size,c=[{x:i.x,y:i.y},{x:i.x+(s.x-i.x)/2,y:i.y+(s.y-i.y)/2},{x:s.x,y:s.y}];await x(e,{v:t.start,w:t.end,name:t.id},{...t,arrowTypeEnd:t.arrowTypeEnd,arrowTypeStart:t.arrowTypeStart,points:c,classes:`edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1`},void 0,`block`,o,a),t.label&&(await _(e,{...t,label:t.label,labelStyle:`stroke: #333; stroke-width: 1.5px;fill:none;`,arrowTypeEnd:t.arrowTypeEnd,arrowTypeStart:t.arrowTypeStart,points:c,classes:`edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1`}),await b({...t,x:c[1].x,y:c[1].y},{originalPath:c}))}}}var X=l()?.block?.padding||8;function oe(e,t){if(e===0||!Number.isInteger(e))throw Error(`Columns must be an integer !== 0.`);if(t<0||!Number.isInteger(t))throw Error(`Position must be a non-negative integer.`+t);return e<0?{px:t,py:0}:e===1?{px:0,py:t}:{px:t%e,py:Math.floor(t/e)}}var se=e=>{let t=0,r=0;for(let i of e.children){let{width:a,height:o,x:s,y:c}=i.size||{width:0,height:0,x:0,y:0};n.debug(`getMaxChildSize abc95 child:`,i.id,`width:`,a,`height:`,o,`x:`,s,`y:`,c,i.type),i.type!==`space`&&(a>t&&(t=a/(e.widthInColumns||1)),o>r&&(r=o))}return{width:t,height:r}};function Z(e,t,r=0,i=0){n.debug(`setBlockSizes abc95 (start)`,e.id,e?.size?.x,`block width =`,e?.size,`sieblingWidth`,r),e?.size?.width||(e.size={width:r,height:i,x:0,y:0});let a=0,o=0;if(e.children?.length>0){for(let n of e.children)Z(n,t);let s=se(e);a=s.width,o=s.height,n.debug(`setBlockSizes abc95 maxWidth of`,e.id,`:s children is `,a,o);for(let t of e.children)t.size&&(n.debug(`abc95 Setting size of children of ${e.id} id=${t.id} ${a} ${o} ${t.size}`),t.size.width=a*(t.widthInColumns||1)+X*((t.widthInColumns||1)-1),t.size.height=o,t.size.x=0,t.size.y=0,n.debug(`abc95 updating size of ${e.id} children child:${t.id} maxWidth:${a} maxHeight:${o}`));for(let n of e.children)Z(n,t,a,o);let c=e.columns||-1,l=0;for(let t of e.children)l+=t.widthInColumns||1;let u=e.children.length;c>0&&c<l&&(u=c),e.widthInColumns;let d=Math.ceil(l/u),f=u*(a+X)+X,p=d*(o+X)+X;if(f<r){n.debug(`Detected to small siebling: abc95 ${e.id} sieblingWidth ${r} sieblingHeight ${i} width ${f}`),f=r,p=i;let t=(r-u*X-X)/u,s=(i-d*X-X)/d;n.debug(`Size indata abc88`,e.id,`childWidth`,t,`maxWidth`,a),n.debug(`Size indata abc88`,e.id,`childHeight`,s,`maxHeight`,o),n.debug(`Size indata abc88 xSize`,u,`padding`,X);for(let n of e.children)n.size&&(n.size.width=t,n.size.height=s,n.size.x=0,n.size.y=0)}if(n.debug(`abc95 (finale calc) ${e.id} xSize ${u} ySize ${d} columns ${c}${e.children.length} width=${Math.max(f,e.size?.width||0)}`),f<(e?.size?.width||0)){f=e?.size?.width||0;let t=c>0?Math.min(e.children.length,c):e.children.length;if(t>0){let r=(f-t*X-X)/t;n.debug(`abc95 (growing to fit) width`,e.id,f,e.size?.width,r);for(let t of e.children)t.size&&(t.size.width=r)}}e.size={width:f,height:p,x:0,y:0}}n.debug(`setBlockSizes abc94 (done)`,e.id,e?.size?.x,e?.size?.width,e?.size?.y,e?.size?.height)}function Q(e,t){n.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`);let r=e.columns||-1;if(n.debug(`layoutBlocks columns abc95`,e.id,`=>`,r,e),e.children&&e.children.length>0){let t=e?.children[0]?.size?.width||0,i=e.children.length*t+(e.children.length-1)*X;n.debug(`widthOfChildren 88`,i,`posX`);let a=0;n.debug(`abc91 block?.size?.x`,e.id,e?.size?.x);let o=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-X,s=0;for(let t of e.children){let i=e;if(!t.size)continue;let{width:c,height:l}=t.size,{px:u,py:d}=oe(r,a);if(d!=s&&(s=d,o=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-X,n.debug(`New row in layout for block`,e.id,` and child `,t.id,s)),n.debug(`abc89 layout blocks (child) id: ${t.id} Pos: ${a} (px, py) ${u},${d} (${i?.size?.x},${i?.size?.y}) parent: ${i.id} width: ${c}${X}`),i.size){let e=c/2;t.size.x=o+X+e,n.debug(`abc91 layout blocks (calc) px, pyid:${t.id} startingPos=X${o} new startingPosX${t.size.x} ${e} padding=${X} width=${c} halfWidth=${e} => x:${t.size.x} y:${t.size.y} ${t.widthInColumns} (width * (child?.w || 1)) / 2 ${c*(t?.widthInColumns||1)/2}`),o=t.size.x+e,t.size.y=i.size.y-i.size.height/2+d*(l+X)+l/2+X,n.debug(`abc88 layout blocks (calc) px, pyid:${t.id}startingPosX${o}${X}${e}=>x:${t.size.x}y:${t.size.y}${t.widthInColumns}(width * (child?.w || 1)) / 2${c*(t?.widthInColumns||1)/2}`)}t.children&&Q(t),a+=t?.widthInColumns||1,n.debug(`abc88 columnsPos`,t,a)}}n.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`)}function $(e,{minX:t,minY:n,maxX:r,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!==`root`){let{x:a,y:o,width:s,height:c}=e.size;a-s/2<t&&(t=a-s/2),o-c/2<n&&(n=o-c/2),a+s/2>r&&(r=a+s/2),o+c/2>i&&(i=o+c/2)}if(e.children)for(let a of e.children)({minX:t,minY:n,maxX:r,maxY:i}=$(a,{minX:t,minY:n,maxX:r,maxY:i}));return{minX:t,minY:n,maxX:r,maxY:i}}function ce(e){let t=e.getBlock(`root`);if(!t)return;Z(t,e,0,0),Q(t),n.debug(`getBlocks`,JSON.stringify(t,null,2));let{minX:r,minY:i,maxX:a,maxY:o}=$(t),s=o-i;return{x:r,y:i,width:a-r,height:s}}var le={parser:w,db:U,renderer:{draw:async function(e,t,r,i){let{securityLevel:a,block:o}=d(),c=i.db,l;a===`sandbox`&&(l=p(`#i`+t));let u=p(a===`sandbox`?l.nodes()[0].contentDocument.body:`body`),f=a===`sandbox`?u.select(`[id="${t}"]`):p(`[id="${t}"]`);v(f,[`point`,`circle`,`cross`],i.type,t);let g=c.getBlocks(),_=c.getBlocksFlat(),y=c.getEdges(),b=f.insert(`g`).attr(`class`,`block`);await re(b,g,c);let x=ce(c);if(await ie(b,g,c),await ae(b,y,_,c,t),x){let e=x,t=Math.max(1,Math.round(.125*(e.width/e.height))),r=e.height+t+10,i=e.width+10,{useMaxWidth:a}=o;s(f,r,i,!!a),n.debug(`Here Bounds`,x,e),f.attr(`viewBox`,`${e.x-5} ${e.y-5} ${e.width+10} ${e.height+10}`)}m(h)},getClasses:function(e,t){return t.db.getClasses()}},styles:G};export{le as diagram};