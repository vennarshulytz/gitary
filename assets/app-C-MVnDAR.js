const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/excalidraw-ai-canvas-DPgFWc0r.js","assets/excalidraw-BgpgTCpH.js","assets/chakra-ui-DL3iEWi3.js","assets/rolldown-runtime-B6ubh40S.js","assets/common-utils-DCzOnVm6.js","assets/excalidraw-Ct_LBRaH.css","assets/react-syntax-highlighter-ClsVKEba.js","assets/react-markdown-Dc1ste6M.js","assets/zenmark-editor-nYmALJiT.js","assets/react-utils-Casizjhc.js","assets/remark-gfm-CWYf_crh.js","assets/vendor-Bdw1rj8N.js","assets/zenmark-editor-Cexu_rP5.css","assets/excalidraw-runtime-CIUQ6Nwt.js","assets/custom-monaco-editor-BA7nZOgK.js","assets/monaco-BEEk9-us.js","assets/monaco-KC1S3ze4.css","assets/es-RELsoNZJ.js","assets/global-chat-panel-DYXk6nXW.js","assets/opener.service-pWJZFLzj.js"])))=>i.map(i=>d[i]);
import{r as e,s as t,t as n}from"./rolldown-runtime-B6ubh40S.js";import{C as r,D as i,E as a,N as o,O as s,P as c,S as l,T as u,_ as d,a as f,b as p,c as m,d as h,f as g,i as _,k as v,l as y,m as b,n as x,o as S,p as C,r as w,s as T,t as E,u as D,v as O,w as k,x as A,y as j}from"./chakra-ui-DL3iEWi3.js";import{a as M,i as N,r as P}from"./react-syntax-highlighter-ClsVKEba.js";import{BO as F,CO as ee,GO as I,HO as L,IO as te,KO as ne,LO as re,PO as ie,RO as ae,SO as oe,UO as se,VO as ce,WO as le,wO as ue,zO as de}from"./excalidraw-BgpgTCpH.js";import{A as fe,B as pe,C as me,D as he,E as R,G as ge,J as _e,K as ve,M as ye,N as be,O as z,P as xe,Q as Se,S as Ce,T as we,W as Te,_ as Ee,b as De,dt as Oe,et as ke,g as Ae,h as je,it as Me,j as Ne,k as Pe,lt as Fe,nt as Ie,ot as Le,q as Re,rt as ze,st as Be,tt as Ve,ut as He,v as Ue,w as We,x as Ge,y as Ke,z as qe}from"./react-utils-Casizjhc.js";import{At as Je,Bt as Ye,Ct as Xe,Dt as Ze,Et as Qe,Ft as $e,Gt as et,Ht as tt,Jt as nt,Kt as rt,Lt as it,Mt as at,Nt as B,Ot as ot,Pt as st,Qt as ct,Rt as lt,St as ut,Tt as dt,Ut as ft,Vt as pt,Wt as mt,Xt as ht,Yt as gt,Zt as _t,_t as vt,bt as yt,ct as bt,dt as xt,ft as St,gt as Ct,ht as wt,jt as Tt,kt as V,lt as Et,mt as Dt,pt as Ot,qt as kt,ut as At,vt as jt,wt as Mt,xt as Nt,yt as Pt,zt as Ft}from"./zenmark-editor-nYmALJiT.js";import{t as It}from"./vendor-Bdw1rj8N.js";import{r as Lt}from"./common-utils-DCzOnVm6.js";import{Tn as Rt,wn as zt}from"./monaco-BEEk9-us.js";import{t as Bt}from"./react-markdown-Dc1ste6M.js";import{t as Vt}from"./remark-gfm-CWYf_crh.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var H=t(c()),Ht=(0,H.createContext)(null),Ut={didCatch:!1,error:null},Wt=class extends H.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ut}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(e!==null){var t,n,r=[...arguments];(t=(n=this.props).onReset)==null||t.call(n,{args:r,reason:`imperative-api`}),this.setState(Ut)}}componentDidCatch(e,t){var n,r;(n=(r=this.props).onError)==null||n.call(r,e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:r}=this.props;if(n&&t.error!==null&&Gt(e.resetKeys,r)){var i,a;(i=(a=this.props).onReset)==null||i.call(a,{next:r,prev:e.resetKeys,reason:`keys`}),this.setState(Ut)}}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:a}=this.state,o=e;if(i){let e={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof t==`function`)o=t(e);else if(n)o=(0,H.createElement)(n,e);else if(r!==void 0)o=r;else throw a}return(0,H.createElement)(Ht.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}};function Gt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}var Kt=t(k(),1),U=t(o(),1),qt=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},Jt=(e=>e?qt(e):qt),Yt=e=>e;function Xt(e,t=Yt){let n=H.useSyncExternalStore(e.subscribe,H.useCallback(()=>t(e.getState()),[e,t]),H.useCallback(()=>t(e.getInitialState()),[e,t]));return H.useDebugValue(n),n}var Zt=e=>{let t=Jt(e),n=e=>Xt(t,e);return Object.assign(n,t),n},Qt=(e=>e?Zt(e):Zt);function $t(e,t){function n(e){let t=new URLSearchParams(e),n={};for(let[e,r]of t)n[e]=r;return n}let r=RegExp(`^`+t.replace(/:\w+/g,`([\\w-]+)`)+`$`),i=e.match(r);if(i){let r={},a=t.match(/:(\w+)/g)?t.match(/:(\w+)/g).map(e=>e.slice(1)):[];for(let e=1;e<i.length;e++)r[a[e-1]]=i[e];return Object.assign(r,n(location.search)),{match:e,params:r}}else return!1}function en({error:e,resetErrorBoundary:t}){return(0,U.jsxs)(`div`,{role:`alert`,children:[(0,U.jsx)(`p`,{children:`Something went wrong:`}),(0,U.jsx)(`pre`,{children:e.message}),(0,U.jsx)(`button`,{onClick:t,children:`Try again`})]})}const tn=(e=`componentRegistry`)=>{let t=Qt((e,t)=>({registry:{},register:(t,n,r=!1)=>e(e=>e.registry[t]&&!r?e:{registry:{...e.registry,[t]:n}})})),n=(e,t)=>{let n=e[t];if(n)return n;for(let n in e)if($t(t,n))return e[n]},r=e=>t(t=>n(t.registry,e)),i=en,a=e=>{i=e},o=({type:e})=>(0,U.jsxs)(l,{children:[(0,U.jsxs)(u,{children:[`Unknown component type: `,e]}),(0,U.jsx)(A,{onClick:()=>{J.eventBus.emit(`/welcome`)},children:`返回首页`})]}),s=(e,n,r=!1)=>{t.getState().register(e,n,r)},c=({layout:e})=>{let{type:a,children:s,props:l}=e,u=r(a);if(!u){let e=t.getState().registry;return(0,U.jsx)(n(e,`NotFoundComponent`)||o,{type:a})}return(0,U.jsx)(Wt,{FallbackComponent:i,children:(0,U.jsx)(u,{...l,children:s&&s.map((e,t)=>(0,U.jsx)(c,{layout:e},t))})})};return{register:(e,t,n=!1)=>{s(e,t,n)},render:(e,t=0)=>(0,U.jsx)(c,{layout:e},t),getComponents:()=>t.getState().registry,setFallbackComponent:a,useComponent:r}};function nn(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var rn=nn,an=typeof global==`object`&&global&&global.Object===Object&&global,on=typeof self==`object`&&self&&self.Object===Object&&self,sn=an||on||Function(`return this`)(),cn=function(){return sn.Date.now()},ln=/\s/;function un(e){for(var t=e.length;t--&&ln.test(e.charAt(t)););return t}var dn=un,fn=/^\s+/;function pn(e){return e&&e.slice(0,dn(e)+1).replace(fn,``)}var mn=pn,hn=sn.Symbol,gn=Object.prototype,_n=gn.hasOwnProperty,vn=gn.toString,yn=hn?hn.toStringTag:void 0;function bn(e){var t=_n.call(e,yn),n=e[yn];try{e[yn]=void 0;var r=!0}catch{}var i=vn.call(e);return r&&(t?e[yn]=n:delete e[yn]),i}var xn=bn,Sn=Object.prototype.toString;function Cn(e){return Sn.call(e)}var wn=Cn,Tn=`[object Null]`,En=`[object Undefined]`,Dn=hn?hn.toStringTag:void 0;function On(e){return e==null?e===void 0?En:Tn:Dn&&Dn in Object(e)?xn(e):wn(e)}var kn=On;function An(e){return typeof e==`object`&&!!e}var jn=An,Mn=`[object Symbol]`;function Nn(e){return typeof e==`symbol`||jn(e)&&kn(e)==Mn}var Pn=Nn,Fn=NaN,In=/^[-+]0x[0-9a-f]+$/i,Ln=/^0b[01]+$/i,Rn=/^0o[0-7]+$/i,zn=parseInt;function Bn(e){if(typeof e==`number`)return e;if(Pn(e))return Fn;if(rn(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=rn(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=mn(e);var n=Ln.test(e);return n||Rn.test(e)?zn(e.slice(2),n?2:8):In.test(e)?Fn:+e}var Vn=Bn,Hn=`Expected a function`,Un=Math.max,Wn=Math.min;function Gn(e,t,n){var r,i,a,o,s,c,l=0,u=!1,d=!1,f=!0;if(typeof e!=`function`)throw TypeError(Hn);t=Vn(t)||0,rn(n)&&(u=!!n.leading,d=`maxWait`in n,a=d?Un(Vn(n.maxWait)||0,t):a,f=`trailing`in n?!!n.trailing:f);function p(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n),o}function m(e){return l=e,s=setTimeout(_,t),u?p(e):o}function h(e){var n=e-c,r=e-l,i=t-n;return d?Wn(i,a-r):i}function g(e){var n=e-c,r=e-l;return c===void 0||n>=t||n<0||d&&r>=a}function _(){var e=cn();if(g(e))return v(e);s=setTimeout(_,h(e))}function v(e){return s=void 0,f&&r?p(e):(r=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function b(){return s===void 0?o:v(cn())}function x(){var e=cn(),n=g(e);if(r=arguments,i=this,c=e,n){if(s===void 0)return m(c);if(d)return clearTimeout(s),s=setTimeout(_,t),p(c)}return s===void 0&&(s=setTimeout(_,t)),o}return x.cancel=y,x.flush=b,x}var Kn=Gn,qn=`Expected a function`;function Jn(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw TypeError(qn);return rn(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),Kn(e,t,{leading:r,maxWait:t,trailing:i})}var Yn=Jn,Xn=function(){return Xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xn.apply(this,arguments)};function Zn(e){return!e||!e.ownerDocument||!e.ownerDocument.defaultView?window:e.ownerDocument.defaultView}function Qn(e){return!e||!e.ownerDocument?document:e.ownerDocument}var $n=function(e){return Array.prototype.reduce.call(e,function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,function(e,t){return t.toUpperCase()});switch(t.value){case`true`:e[r]=!0;break;case`false`:e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e},{})};function er(e,t){var n;e&&(n=e.classList).add.apply(n,t.split(` `))}function tr(e,t){e&&t.split(` `).forEach(function(t){e.classList.remove(t)})}function nr(e){return`.${e.split(` `).join(`.`)}`}var rr=!!(typeof window<`u`&&window.document&&window.document.createElement),ir=Object.freeze({__proto__:null,addClasses:er,canUseDOM:rr,classNamesToQuery:nr,getElementDocument:Qn,getElementWindow:Zn,getOptions:$n,removeClasses:tr}),ar=null,or=null;rr&&window.addEventListener(`resize`,function(){or!==window.devicePixelRatio&&(or=window.devicePixelRatio,ar=null)});function sr(){if(ar===null){if(typeof document>`u`)return ar=0,ar;var e=document.body,t=document.createElement(`div`);t.classList.add(`simplebar-hide-scrollbar`),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),ar=n}return ar}var cr=Zn,lr=Qn,ur=$n,dr=er,fr=tr,pr=nr,mr=function(){function e(t,n){n===void 0&&(n={});var r=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=cr(r.el);r.scrollXTicking||=(e.requestAnimationFrame(r.scrollX),!0),r.scrollYTicking||=(e.requestAnimationFrame(r.scrollY),!0),r.isScrolling||(r.isScrolling=!0,dr(r.el,r.classNames.scrolling)),r.showScrollbar(`x`),r.showScrollbar(`y`),r.onStopScrolling()},this.scrollX=function(){r.axis.x.isOverflowing&&r.positionScrollbar(`x`),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&r.positionScrollbar(`y`),r.scrollYTicking=!1},this._onStopScrolling=function(){fr(r.el,r.classNames.scrolling),r.options.autoHide&&(r.hideScrollbar(`x`),r.hideScrollbar(`y`)),r.isScrolling=!1},this.onMouseEnter=function(){r.isMouseEntering||=(dr(r.el,r.classNames.mouseEntered),r.showScrollbar(`x`),r.showScrollbar(`y`),!0),r.onMouseEntered()},this._onMouseEntered=function(){fr(r.el,r.classNames.mouseEntered),r.options.autoHide&&(r.hideScrollbar(`x`),r.hideScrollbar(`y`)),r.isMouseEntering=!1},this._onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis(`x`),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis(`y`)},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis(`x`),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis(`y`),r.mouseX=-1,r.mouseY=-1},this._onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.onPointerEvent=function(e){if(!(!r.axis.x.track.el||!r.axis.y.track.el||!r.axis.x.scrollbar.el||!r.axis.y.scrollbar.el)){var t,n;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(n=r.isWithinBounds(r.axis.y.track.rect)),(t||n)&&(e.stopPropagation(),e.type===`pointerdown`&&e.pointerType!==`touch`&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,`x`):r.onTrackClick(e,`x`)),n&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,`y`):r.onTrackClick(e,`y`))))}},this.drag=function(t){if(!(!r.draggedAxis||!r.contentWrapperEl)){var n,i=r.axis[r.draggedAxis].track,a=i.rect?.[r.axis[r.draggedAxis].sizeAttr]??0,o=r.axis[r.draggedAxis].scrollbar,s=r.contentWrapperEl?.[r.axis[r.draggedAxis].scrollSizeAttr]??0,c=parseInt(r.elStyles?.[r.axis[r.draggedAxis].sizeAttr]??`0px`,10);t.preventDefault(),t.stopPropagation(),n=r.draggedAxis===`y`?t.pageY:t.pageX;var l=n-(i.rect?.[r.axis[r.draggedAxis].offsetAttr]??0)-r.axis[r.draggedAxis].dragOffset;l=r.draggedAxis===`x`&&r.isRtl?(i.rect?.[r.axis[r.draggedAxis].sizeAttr]??0)-o.size-l:l;var u=l/(a-o.size)*(s-c);r.draggedAxis===`x`&&r.isRtl&&(u=e.getRtlHelpers()?.isScrollingToNegative?-u:u),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=u}},this.onEndDrag=function(e){r.isDragging=!1;var t=lr(r.el),n=cr(r.el);e.preventDefault(),e.stopPropagation(),fr(r.el,r.classNames.dragging),r.onStopScrolling(),t.removeEventListener(`mousemove`,r.drag,!0),t.removeEventListener(`mouseup`,r.onEndDrag,!0),r.removePreventClickId=n.setTimeout(function(){t.removeEventListener(`click`,r.preventClick,!0),t.removeEventListener(`dblclick`,r.preventClick,!0),r.removePreventClickId=null})},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=Xn(Xn({},e.defaultOptions),n),this.classNames=Xn(Xn({},e.defaultOptions.classNames),n.classNames),this.axis={x:{scrollOffsetAttr:`scrollLeft`,sizeAttr:`width`,scrollSizeAttr:`scrollWidth`,offsetSizeAttr:`offsetWidth`,offsetAttr:`left`,overflowAttr:`overflowX`,dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:`scrollTop`,sizeAttr:`height`,scrollSizeAttr:`scrollHeight`,offsetSizeAttr:`offsetHeight`,offsetAttr:`top`,overflowAttr:`overflowY`,dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!=`object`||!this.el.nodeName)throw Error(`Argument passed to SimpleBar must be an HTML element instead of ${this.el}`);this.onMouseMove=Yn(this._onMouseMove,64),this.onWindowResize=Kn(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=Kn(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=Kn(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement(`div`);t.innerHTML=`<div class="simplebar-dummy-scrollbar-size"><div></div></div>`;var n=t.firstElementChild,r=n?.firstElementChild;if(!r)return null;document.body.appendChild(n),n.scrollLeft=0;var i=e.getOffset(n),a=e.getOffset(r);n.scrollLeft=-999;var o=e.getOffset(r);return document.body.removeChild(n),e.rtlHelpers={isScrollOriginAtZero:i.left!==a.left,isScrollingToNegative:a.left!==o.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,`::-webkit-scrollbar`).display===`none`||`scrollbarWidth`in document.documentElement.style||`-ms-overflow-style`in document.documentElement.style?0:sr()}catch{return sr()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),n=lr(e),r=cr(e);return{top:t.top+(r.pageYOffset||n.documentElement.scrollTop),left:t.left+(r.pageXOffset||n.documentElement.scrollLeft)}},e.prototype.init=function(){rr&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){this.wrapperEl=this.el.querySelector(pr(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(pr(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(pr(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(pr(this.classNames.offset)),this.maskEl=this.el.querySelector(pr(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,pr(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(pr(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(pr(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,`${pr(this.classNames.track)}${pr(this.classNames.horizontal)}`),this.axis.y.track.el=this.findChild(this.el,`${pr(this.classNames.track)}${pr(this.classNames.vertical)}`),this.axis.x.scrollbar.el=this.axis.x.track.el?.querySelector(pr(this.classNames.scrollbar))||null,this.axis.y.scrollbar.el=this.axis.y.track.el?.querySelector(pr(this.classNames.scrollbar))||null,this.options.autoHide||(dr(this.axis.x.scrollbar.el,this.classNames.visible),dr(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e=this,t,n=cr(this.el);if(this.el.addEventListener(`mouseenter`,this.onMouseEnter),this.el.addEventListener(`pointerdown`,this.onPointerEvent,!0),this.el.addEventListener(`mousemove`,this.onMouseMove),this.el.addEventListener(`mouseleave`,this.onMouseLeave),(t=this.contentWrapperEl)==null||t.addEventListener(`scroll`,this.onScroll),n.addEventListener(`resize`,this.onWindowResize),this.contentEl){if(window.ResizeObserver){var r=!1;this.resizeObserver=new(n.ResizeObserver||ResizeObserver)(function(){r&&n.requestAnimationFrame(function(){e.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),n.requestAnimationFrame(function(){r=!0})}this.mutationObserver=new n.MutationObserver(function(){n.requestAnimationFrame(function(){e.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){this.elStyles=cr(this.el).getComputedStyle(this.el),this.isRtl=this.elStyles.direction===`rtl`;var e=this.contentEl.offsetWidth,t=this.heightAutoObserverEl.offsetHeight<=1,n=this.heightAutoObserverEl.offsetWidth<=1||e>0,r=this.contentWrapperEl.offsetWidth,i=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding=`${this.elStyles.paddingTop} ${this.elStyles.paddingRight} ${this.elStyles.paddingBottom} ${this.elStyles.paddingLeft}`,this.wrapperEl.style.margin=`-${this.elStyles.paddingTop} -${this.elStyles.paddingRight} -${this.elStyles.paddingBottom} -${this.elStyles.paddingLeft}`;var o=this.contentEl.scrollHeight,s=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=t?`auto`:`100%`,this.placeholderEl.style.width=n?`${e||s}px`:`auto`,this.placeholderEl.style.height=`${o}px`;var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=e!==0&&s>e,this.axis.y.isOverflowing=o>c,this.axis.x.isOverflowing=i===`hidden`?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=a===`hidden`?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible===`x`||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible===`y`||this.options.forceVisible===!0,this.hideNativeScrollbar();var l=this.axis.x.isOverflowing?this.scrollbarWidth:0,u=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&s>r-u,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&o>c-l,this.axis.x.scrollbar.size=this.getScrollbarSize(`x`),this.axis.y.scrollbar.size=this.getScrollbarSize(`y`),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width=`${this.axis.x.scrollbar.size}px`),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height=`${this.axis.y.scrollbar.size}px`),this.positionScrollbar(`x`),this.positionScrollbar(`y`),this.toggleTrackVisibility(`x`),this.toggleTrackVisibility(`y`)}},e.prototype.getScrollbarSize=function(e){if(e===void 0&&(e=`y`),!this.axis[e].isOverflowing||!this.contentEl)return 0;var t=this.contentEl[this.axis[e].scrollSizeAttr],n=this.axis[e].track.el?.[this.axis[e].offsetSizeAttr]??0,r=n/t,i=Math.max(~~(r*n),this.options.scrollbarMinSize);return this.options.scrollbarMaxSize&&(i=Math.min(i,this.options.scrollbarMaxSize)),i},e.prototype.positionScrollbar=function(t){t===void 0&&(t=`y`);var n=this.axis[t].scrollbar;if(!(!this.axis[t].isOverflowing||!this.contentWrapperEl||!n.el||!this.elStyles)){var r=this.contentWrapperEl[this.axis[t].scrollSizeAttr],i=this.axis[t].track.el?.[this.axis[t].offsetSizeAttr]||0,a=parseInt(this.elStyles[this.axis[t].sizeAttr],10),o=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];o=t===`x`&&this.isRtl&&e.getRtlHelpers()?.isScrollOriginAtZero?-o:o,t===`x`&&this.isRtl&&(o=e.getRtlHelpers()?.isScrollingToNegative?o:-o);var s=o/(r-a),c=~~((i-n.size)*s);c=t===`x`&&this.isRtl?-c+(i-n.size):c,n.el.style.transform=t===`x`?`translate3d(${c}px, 0, 0)`:`translate3d(0, ${c}px, 0)`}},e.prototype.toggleTrackVisibility=function(e){e===void 0&&(e=`y`);var t=this.axis[e].track.el,n=this.axis[e].scrollbar.el;!t||!n||!this.contentWrapperEl||(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility=`visible`,this.contentWrapperEl.style[this.axis[e].overflowAttr]=`scroll`,this.el.classList.add(`${this.classNames.scrollable}-${e}`)):(t.style.visibility=`hidden`,this.contentWrapperEl.style[this.axis[e].overflowAttr]=`hidden`,this.el.classList.remove(`${this.classNames.scrollable}-${e}`)),this.axis[e].isOverflowing?n.style.display=`block`:n.style.display=`none`)},e.prototype.showScrollbar=function(e){e===void 0&&(e=`y`),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(dr(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){e===void 0&&(e=`y`),!this.isDragging&&this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(fr(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?`left`:`right`]=this.axis.y.isOverflowing||this.axis.y.forceVisible?`-${this.scrollbarWidth}px`:`0px`,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?`-${this.scrollbarWidth}px`:`0px`)},e.prototype.onMouseMoveForAxis=function(e){e===void 0&&(e=`y`);var t=this.axis[e];!t.track.el||!t.scrollbar.el||(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),dr(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?dr(t.scrollbar.el,this.classNames.hover):fr(t.scrollbar.el,this.classNames.hover)):(fr(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){e===void 0&&(e=`y`),fr(this.axis[e].track.el,this.classNames.hover),fr(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){t===void 0&&(t=`y`),this.isDragging=!0;var n=lr(this.el),r=cr(this.el),i=this.axis[t].scrollbar,a=t===`y`?e.pageY:e.pageX;this.axis[t].dragOffset=a-(i.rect?.[this.axis[t].offsetAttr]||0),this.draggedAxis=t,dr(this.el,this.classNames.dragging),n.addEventListener(`mousemove`,this.drag,!0),n.addEventListener(`mouseup`,this.onEndDrag,!0),this.removePreventClickId===null?(n.addEventListener(`click`,this.preventClick,!0),n.addEventListener(`dblclick`,this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var n=this;t===void 0&&(t=`y`);var r=this.axis[t];if(!(!this.options.clickOnTrack||!r.scrollbar.el||!this.contentWrapperEl)){e.preventDefault();var i=cr(this.el);this.axis[t].scrollbar.rect=r.scrollbar.el.getBoundingClientRect();var a=this.axis[t].scrollbar.rect?.[this.axis[t].offsetAttr]??0,o=parseInt(this.elStyles?.[this.axis[t].sizeAttr]??`0px`,10),s=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],c=(t===`y`?this.mouseY-a:this.mouseX-a)<0?-1:1,l=c===-1?s-o:s+o,u=40,d=function(){n.contentWrapperEl&&(c===-1?s>l&&(s-=u,n.contentWrapperEl[n.axis[t].scrollOffsetAttr]=s,i.requestAnimationFrame(d)):s<l&&(s+=u,n.contentWrapperEl[n.axis[t].scrollOffsetAttr]=s,i.requestAnimationFrame(d)))};d()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=cr(this.el);this.el.removeEventListener(`mouseenter`,this.onMouseEnter),this.el.removeEventListener(`pointerdown`,this.onPointerEvent,!0),this.el.removeEventListener(`mousemove`,this.onMouseMove),this.el.removeEventListener(`mouseleave`,this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener(`scroll`,this.onScroll),e.removeEventListener(`resize`,this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(e){return n.call(e,t)})[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:`scrollable content`,tabIndex:0,classNames:{contentEl:`simplebar-content`,contentWrapper:`simplebar-content-wrapper`,offset:`simplebar-offset`,mask:`simplebar-mask`,wrapper:`simplebar-wrapper`,placeholder:`simplebar-placeholder`,scrollbar:`simplebar-scrollbar`,track:`simplebar-track`,heightAutoObserverWrapperEl:`simplebar-height-auto-observer-wrapper`,heightAutoObserverEl:`simplebar-height-auto-observer`,visible:`simplebar-visible`,horizontal:`simplebar-horizontal`,vertical:`simplebar-vertical`,hover:`simplebar-hover`,dragging:`simplebar-dragging`,scrolling:`simplebar-scrolling`,scrollable:`simplebar-scrollable`,mouseEntered:`simplebar-mouse-entered`},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=ur,e.helpers=ir,e}(),hr=function(){return hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hr.apply(this,arguments)};function gr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var _r=H.forwardRef(function(e,t){var n=e.children,r=e.scrollableNodeProps,i=r===void 0?{}:r,a=gr(e,[`children`,`scrollableNodeProps`]),o=H.useRef(),s=H.useRef(),c=H.useRef(),l={},u={};Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(mr.defaultOptions,e)?l[e]=a[e]:u[e]=a[e]});var d=hr(hr({},mr.defaultOptions.classNames),l.classNames),f=hr(hr({},i),{className:`${d.contentWrapper}${i.className?` ${i.className}`:``}`,tabIndex:l.tabIndex||mr.defaultOptions.tabIndex,role:`region`,"aria-label":l.ariaLabel||mr.defaultOptions.ariaLabel});return H.useEffect(function(){var e;return s.current=f.ref?f.ref.current:s.current,o.current&&(e=new mr(o.current,hr(hr(hr({},l),s.current&&{scrollableNode:s.current}),c.current&&{contentNode:c.current})),typeof t==`function`?t(e):t&&(t.current=e)),function(){e?.unMount(),e=null,typeof t==`function`&&t(null)}},[]),H.createElement(`div`,hr({"data-simplebar":`init`,ref:o},u),H.createElement(`div`,{className:d.wrapper},H.createElement(`div`,{className:d.heightAutoObserverWrapperEl},H.createElement(`div`,{className:d.heightAutoObserverEl})),H.createElement(`div`,{className:d.mask},H.createElement(`div`,{className:d.offset},typeof n==`function`?n({scrollableNodeRef:s,scrollableNodeProps:hr(hr({},f),{ref:s}),contentNodeRef:c,contentNodeProps:{className:d.contentEl,ref:c}}):H.createElement(`div`,hr({},f),H.createElement(`div`,{className:d.contentEl},n)))),H.createElement(`div`,{className:d.placeholder})),H.createElement(`div`,{className:`${d.track} ${d.horizontal}`},H.createElement(`div`,{className:d.scrollbar})),H.createElement(`div`,{className:`${d.track} ${d.vertical}`},H.createElement(`div`,{className:d.scrollbar})))});_r.displayName=`SimpleBar`;const vr=(()=>({isMobile:()=>{let e=!1;return(function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)})(navigator.userAgent||navigator.vendor||window.opera),e}}))(),yr=e=>({name:e}),br=e=>typeof e==`string`?e:e.name;let xr=function(e){return e.ToggleHome=`client:toggleHome`,e.ToChatPage=`client:toChatPage`,e}({});const Sr=(()=>{let e=new Map,t=new Proxy({},{get(e,t){return e[t]===void 0&&(e[t]=[]),e[t]}}),n=(n,r)=>{e.set(n,r),[...t[n]].forEach(e=>{e();let r=t[n].indexOf(e);t[n].splice(r,1)})},r=(e,t,r)=>{if(typeof t==`string`)n(`${e}.${t}`,r);else for(let r in t)n(`${e}.${r}`,t[r])},i=(e,t)=>{if(typeof e==`string`)n(e,t);else for(let t in e)n(t,e[t])},a=t=>e.has(t),o=(t,...n)=>new Promise((r,i)=>{let a=e.get(t);if(!a)i(Error(`No command named '`+t));else try{r(a(...n))}catch(e){i(e)}}),s=(e,n)=>{a(e)?n():t[e].push(n)};return{registerCommand:i,executeCommand:o,hasCommand:a,onCommandReady:s,executeCommandOnReady:(e,...t)=>new Promise((n,r)=>{s(e,()=>{o(e,...t).then(n).catch(r)})}),registerCommandWithScope:r}})(),Cr=(0,H.createContext)({dragDropManager:void 0});function wr(e){return`Minified Redux error #`+e+`; visit https://redux.js.org/Errors?code=`+e+` for the full message or use the non-minified dev environment for full errors. `}var Tr=(function(){return typeof Symbol==`function`&&Symbol.observable||`@@observable`})(),Er=function(){return Math.random().toString(36).substring(7).split(``).join(`.`)},Dr={INIT:`@@redux/INIT`+Er(),REPLACE:`@@redux/REPLACE`+Er(),PROBE_UNKNOWN_ACTION:function(){return`@@redux/PROBE_UNKNOWN_ACTION`+Er()}};function Or(e){if(typeof e!=`object`||!e)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kr(e,t,n){var r;if(typeof t==`function`&&typeof n==`function`||typeof n==`function`&&typeof arguments[3]==`function`)throw Error(wr(0));if(typeof t==`function`&&n===void 0&&(n=t,t=void 0),n!==void 0){if(typeof n!=`function`)throw Error(wr(1));return n(kr)(e,t)}if(typeof e!=`function`)throw Error(wr(2));var i=e,a=t,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw Error(wr(3));return a}function d(e){if(typeof e!=`function`)throw Error(wr(4));if(c)throw Error(wr(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw Error(wr(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!Or(e))throw Error(wr(7));if(e.type===void 0)throw Error(wr(8));if(c)throw Error(wr(9));try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,n=0;n<t.length;n++){var r=t[n];r()}return e}function p(e){if(typeof e!=`function`)throw Error(wr(10));i=e,f({type:Dr.REPLACE})}function m(){var e,t=d;return e={subscribe:function(e){if(typeof e!=`object`||!e)throw Error(wr(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}},e[Tr]=function(){return this},e}return f({type:Dr.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:p},r[Tr]=m,r}function Ar(e,t,...n){if(jr()&&t===void 0)throw Error(`invariant requires an error message argument`);if(!e){let e;if(t===void 0)e=Error(`Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.`);else{let r=0;e=Error(t.replace(/%s/g,function(){return n[r++]})),e.name=`Invariant Violation`}throw e.framesToPop=1,e}}function jr(){return typeof process<`u`&&!0}function Mr(e,t,n){return t.split(`.`).reduce((e,t)=>e&&e[t]?e[t]:n||null,e)}function W(e,t){return e.filter(e=>e!==t)}function Nr(e){return typeof e==`object`}function Pr(e,t){let n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);let i=[];return n.forEach((e,t)=>{e===1&&i.push(t)}),i}function Fr(e,t){return e.filter(e=>t.indexOf(e)>-1)}const Ir=`dnd-core/INIT_COORDS`,Lr=`dnd-core/BEGIN_DRAG`,Rr=`dnd-core/PUBLISH_DRAG_SOURCE`,zr=`dnd-core/HOVER`,Br=`dnd-core/DROP`,Vr=`dnd-core/END_DRAG`;function Hr(e,t){return{type:Ir,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var Ur={type:Ir,payload:{clientOffset:null,sourceClientOffset:null}};function Wr(e){return function(t=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,o=e.getMonitor(),s=e.getRegistry();e.dispatch(Hr(i)),Gr(t,o,s);let c=Jr(t,o);if(c==null){e.dispatch(Ur);return}let l=null;if(i){if(!a)throw Error(`getSourceClientOffset must be defined`);Kr(a),l=a(c)}e.dispatch(Hr(i,l));let u=s.getSource(c).beginDrag(o,c);if(u!=null)return qr(u),s.pinSource(c),{type:Lr,payload:{itemType:s.getSourceType(c),item:u,sourceId:c,clientOffset:i||null,sourceClientOffset:l||null,isSourcePublic:!!r}}}}function Gr(e,t,n){Ar(!t.isDragging(),`Cannot call beginDrag while dragging.`),e.forEach(function(e){Ar(n.getSource(e),`Expected sourceIds to be registered.`)})}function Kr(e){Ar(typeof e==`function`,`When clientOffset is provided, getSourceClientOffset must be a function.`)}function qr(e){Ar(Nr(e),`Item must be an object.`)}function Jr(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Yr(e,t,n[t])})}return e}function Zr(e){return function(t={}){let n=e.getMonitor(),r=e.getRegistry();Qr(n),ti(n).forEach((i,a)=>{let o={type:Br,payload:{dropResult:Xr({},t,$r(i,a,r,n))}};e.dispatch(o)})}}function Qr(e){Ar(e.isDragging(),`Cannot call drop while not dragging.`),Ar(!e.didDrop(),`Cannot call drop twice during one drag operation.`)}function $r(e,t,n,r){let i=n.getTarget(e),a=i?i.drop(r,e):void 0;return ei(a),a===void 0&&(a=t===0?{}:r.getDropResult()),a}function ei(e){Ar(e===void 0||Nr(e),`Drop result must either be an object or undefined.`)}function ti(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function ni(e){return function(){let t=e.getMonitor(),n=e.getRegistry();ri(t);let r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:Vr}}}function ri(e){Ar(e.isDragging(),`Cannot call endDrag while not dragging.`)}function ii(e,t){return t===null?e===null:Array.isArray(e)?e.some(e=>e===t):e===t}function ai(e){return function(t,{clientOffset:n}={}){oi(t);let r=t.slice(0),i=e.getMonitor(),a=e.getRegistry();return ci(r,a,i.getItemType()),si(r,i,a),li(r,i,a),{type:zr,payload:{targetIds:r,clientOffset:n||null}}}}function oi(e){Ar(Array.isArray(e),`Expected targetIds to be an array.`)}function si(e,t,n){Ar(t.isDragging(),`Cannot call hover while not dragging.`),Ar(!t.didDrop(),`Cannot call hover after drop.`);for(let t=0;t<e.length;t++){let r=e[t];Ar(e.lastIndexOf(r)===t,`Expected targetIds to be unique in the passed array.`),Ar(n.getTarget(r),`Expected targetIds to be registered.`)}}function ci(e,t,n){for(let r=e.length-1;r>=0;r--){let i=e[r];ii(t.getTargetType(i),n)||e.splice(r,1)}}function li(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}function ui(e){return function(){if(e.getMonitor().isDragging())return{type:Rr}}}function di(e){return{beginDrag:Wr(e),publishDragSource:ui(e),hover:ai(e),drop:Zr(e),endDrag:ni(e)}}var fi=class{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:t}=this.store;function n(n){return(...r)=>{let i=n.apply(e,r);i!==void 0&&t(i)}}let r=di(this);return Object.keys(r).reduce((e,t)=>{let i=r[t];return e[t]=n(i),e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}};function pi(e,t){return{x:e.x+t.x,y:e.y+t.y}}function mi(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hi(e){let{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return!t||!n||!r?null:mi(pi(t,r),n)}function gi(e){let{clientOffset:t,initialClientOffset:n}=e;return!t||!n?null:mi(t,n)}const _i=[],vi=[];_i.__IS_NONE__=!0,vi.__IS_ALL__=!0;function yi(e,t){return e===_i?!1:e===vi||t===void 0?!0:Fr(t,e).length>0}var bi=class{subscribeToStateChange(e,t={}){let{handlerIds:n}=t;Ar(typeof e==`function`,`listener must be a function.`),Ar(n===void 0||Array.isArray(n),`handlerIds, when specified, must be an array of strings.`);let r=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),i=t.stateId;try{i===r||i===r+1&&!yi(t.dirtyHandlerIds,n)||e()}finally{r=i}})}subscribeToOffsetChange(e){Ar(typeof e==`function`,`listener must be a function.`);let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return Ar(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);return Ar(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop()?!1:ii(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);return Ar(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic()||this.registry.getSourceType(e)!==this.getItemType()?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:n}=t;if(!this.isDragging())return!1;let r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ii(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let o=a.indexOf(e);return n?o===a.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return hi(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return gi(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}},xi=typeof global<`u`?global:self,Si=xi.MutationObserver||xi.WebKitMutationObserver;function Ci(e){return function(){let t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}function wi(e){let t=1,n=new Si(e),r=document.createTextNode(``);return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}const Ti=typeof Si==`function`?wi:Ci;var Ei=class{enqueueTask(e){let{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Ti(this.flush),this.requestErrorThrow=Ci(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},Di=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}},Oi=class{create(e){let t=this.freeTasks,n=t.length?t.pop():new Di(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}},ki=new Ei,Ai=new Oi(ki.registerPendingError);function ji(e){ki.enqueueTask(Ai.create(e))}const Mi=`dnd-core/ADD_SOURCE`,Ni=`dnd-core/ADD_TARGET`,Pi=`dnd-core/REMOVE_SOURCE`,Fi=`dnd-core/REMOVE_TARGET`;function Ii(e){return{type:Mi,payload:{sourceId:e}}}function Li(e){return{type:Ni,payload:{targetId:e}}}function Ri(e){return{type:Pi,payload:{sourceId:e}}}function zi(e){return{type:Fi,payload:{targetId:e}}}function Bi(e){Ar(typeof e.canDrag==`function`,`Expected canDrag to be a function.`),Ar(typeof e.beginDrag==`function`,`Expected beginDrag to be a function.`),Ar(typeof e.endDrag==`function`,`Expected endDrag to be a function.`)}function Vi(e){Ar(typeof e.canDrop==`function`,`Expected canDrop to be a function.`),Ar(typeof e.hover==`function`,`Expected hover to be a function.`),Ar(typeof e.drop==`function`,`Expected beginDrag to be a function.`)}function Hi(e,t){if(t&&Array.isArray(e)){e.forEach(e=>Hi(e,!1));return}Ar(typeof e==`string`||typeof e==`symbol`,t?`Type can only be a string, a symbol, or an array of either.`:`Type can only be a string or a symbol.`)}var Ui;(function(e){e.SOURCE=`SOURCE`,e.TARGET=`TARGET`})(Ui||={});var Wi=0;function Gi(){return Wi++}function Ki(e){let t=Gi().toString();switch(e){case Ui.SOURCE:return`S${t}`;case Ui.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}function qi(e){switch(e[0]){case`S`:return Ui.SOURCE;case`T`:return Ui.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function Ji(e,t){let n=e.entries(),r=!1;do{let{done:e,value:[,i]}=n.next();if(i===t)return!0;r=!!e}while(!r);return!1}var Yi=class{addSource(e,t){Hi(e),Bi(t);let n=this.addHandler(Ui.SOURCE,e,t);return this.store.dispatch(Ii(n)),n}addTarget(e,t){Hi(e,!0),Vi(t);let n=this.addHandler(Ui.TARGET,e,t);return this.store.dispatch(Li(n)),n}containsHandler(e){return Ji(this.dragSources,e)||Ji(this.dropTargets,e)}getSource(e,t=!1){return Ar(this.isSourceId(e),`Expected a valid source ID.`),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Ar(this.isTargetId(e),`Expected a valid target ID.`),this.dropTargets.get(e)}getSourceType(e){return Ar(this.isSourceId(e),`Expected a valid source ID.`),this.types.get(e)}getTargetType(e){return Ar(this.isTargetId(e),`Expected a valid target ID.`),this.types.get(e)}isSourceId(e){return qi(e)===Ui.SOURCE}isTargetId(e){return qi(e)===Ui.TARGET}removeSource(e){Ar(this.getSource(e),`Expected an existing source.`),this.store.dispatch(Ri(e)),ji(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Ar(this.getTarget(e),`Expected an existing target.`),this.store.dispatch(zi(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);Ar(t,`Expected an existing source.`),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Ar(this.pinnedSource,`No source is pinned at the time.`),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){let r=Ki(e);return this.types.set(r,t),e===Ui.SOURCE?this.dragSources.set(r,n):e===Ui.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}};const Xi=(e,t)=>e===t;function Zi(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Qi(e,t,n=Xi){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function $i(e=_i,t){switch(t.type){case zr:break;case Mi:case Ni:case Fi:case Pi:return _i;case Lr:case Rr:case Vr:case Br:default:return vi}let{targetIds:n=[],prevTargetIds:r=[]}=t.payload,i=Pr(n,r);if(!(i.length>0||!Qi(n,r)))return _i;let a=r[r.length-1],o=n[n.length-1];return a!==o&&(a&&i.push(a),o&&i.push(o)),i}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ea(e,t,n[t])})}return e}var na={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ra(e=na,t){let{payload:n}=t;switch(t.type){case Ir:case Lr:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case zr:return Zi(e.clientOffset,n.clientOffset)?e:ta({},e,{clientOffset:n.clientOffset});case Vr:case Br:return na;default:return e}}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ia(e,t,n[t])})}return e}var oa={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function sa(e=oa,t){let{payload:n}=t;switch(t.type){case Lr:return aa({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Rr:return aa({},e,{isSourcePublic:!0});case zr:return aa({},e,{targetIds:n.targetIds});case Fi:return e.targetIds.indexOf(n.targetId)===-1?e:aa({},e,{targetIds:W(e.targetIds,n.targetId)});case Br:return aa({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Vr:return aa({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function ca(e=0,t){switch(t.type){case Mi:case Ni:return e+1;case Pi:case Fi:return e-1;default:return e}}function la(e=0){return e+1}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ua(e,t,n[t])})}return e}function fa(e={},t){return{dirtyHandlerIds:$i(e.dirtyHandlerIds,{type:t.type,payload:da({},t.payload,{prevTargetIds:Mr(e,`dragOperation.targetIds`,[])})}),dragOffset:ra(e.dragOffset,t),refCount:ca(e.refCount,t),dragOperation:sa(e.dragOperation,t),stateId:la(e.stateId)}}function pa(e,t=void 0,n={},r=!1){let i=ma(r),a=new fi(i,new bi(i,new Yi(i))),o=e(a,t,n);return a.receiveBackend(o),a}function ma(e){let t=typeof window<`u`&&window.__REDUX_DEVTOOLS_EXTENSION__;return kr(fa,e&&t&&t({name:`dnd-core`,instanceId:`dnd-core`}))}function ha(e,t){if(e==null)return{};var n=ga(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ga(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var _a=0,va=Symbol.for(`__REACT_DND_CONTEXT_INSTANCE__`),ya=(0,H.memo)(function(e){var{children:t}=e;let[n,r]=ba(ha(e,[`children`]));return(0,H.useEffect)(()=>{if(r){let e=Sa();return++_a,()=>{--_a===0&&(e[va]=null)}}},[]),(0,U.jsx)(Cr.Provider,{value:n,children:t})});function ba(e){return`manager`in e?[{dragDropManager:e.manager},!1]:[xa(e.backend,e.context,e.options,e.debugMode),!e.context]}function xa(e,t=Sa(),n,r){let i=t;return i[va]||(i[va]={dragDropManager:pa(e,t,n,r)}),i[va]}function Sa(){return typeof global<`u`?global:window}var Ca=n(((e,t)=>{t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t==`object`&&typeof n==`object`){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}}));const wa=typeof window<`u`?H.useLayoutEffect:H.useEffect;var Ta=t(Ca(),1);function Ea(e,t,n){let[r,i]=(0,H.useState)(()=>t(e)),a=(0,H.useCallback)(()=>{let a=t(e);(0,Ta.default)(r,a)||(i(a),n&&n())},[r,e,n]);return wa(a),[r,a]}function Da(e,t,n){let[r,i]=Ea(e,t,n);return wa(function(){let t=e.getHandlerId();if(t!=null)return e.subscribeToStateChange(i,{handlerIds:[t]})},[e,i]),r}function Oa(e,t,n){return Da(t,e||(()=>({})),()=>n.reconnect())}function ka(e,t){let n=[...t||[]];return t==null&&typeof e!=`function`&&n.push(e),(0,H.useMemo)(()=>typeof e==`function`?e():e,n)}function Aa(e){return(0,H.useMemo)(()=>e.hooks.dragSource(),[e])}function ja(e){return(0,H.useMemo)(()=>e.hooks.dragPreview(),[e])}var Ma=!1,Na=!1,Pa=class{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Ar(!Ma,`You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return Ma=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ma=!1}}isDragging(){if(!this.sourceId)return!1;Ar(!Na,`You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return Na=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Na=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}},Fa=!1,Ia=class{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;Ar(!Fa,`You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor`);try{return Fa=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Fa=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}};function La(e,t,n){let r=n.getRegistry(),i=r.addTarget(e,t);return[i,()=>r.removeTarget(i)]}function Ra(e,t,n){let r=n.getRegistry(),i=r.addSource(e,t);return[i,()=>r.removeSource(i)]}function za(e,t,n,r){let i=n?n.call(r,e,t):void 0;if(i!==void 0)return!!i;if(e===t)return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;let a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<a.length;o++){let c=a[o];if(!s(c))return!1;let l=e[c],u=t[c];if(i=n?n.call(r,l,u,c):void 0,i===!1||i===void 0&&l!==u)return!1}return!0}function Ba(e){return typeof e==`object`&&!!e&&Object.prototype.hasOwnProperty.call(e,`current`)}function Va(e){if(typeof e.type==`string`)return;let t=e.type.displayName||e.type.name||`the component`;throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Ha(e){return(t=null,n=null)=>{if(!(0,H.isValidElement)(t)){let r=t;return e(r,n),r}let r=t;return Va(r),Ga(r,n?t=>e(t,n):e)}}function Ua(e){let t={};return Object.keys(e).forEach(n=>{let r=e[n];if(n.endsWith(`Ref`))t[n]=e[n];else{let e=Ha(r);t[n]=()=>e}}),t}function Wa(e,t){typeof e==`function`?e(t):e.current=t}function Ga(e,t){let n=e.ref;return Ar(typeof n!=`string`,`Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs`),n?(0,H.cloneElement)(e,{ref:e=>{Wa(n,e),Wa(t,e)}}):(0,H.cloneElement)(e,{ref:t})}var Ka=class{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){let t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!za(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!za(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&=(this.dragSourceUnsubscribe(),void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Ua({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,Ba(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,Ba(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}},qa=class{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!za(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&=(this.unsubscribeDropTarget(),void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Ua({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,Ba(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}};function Ja(){let{dragDropManager:e}=(0,H.useContext)(Cr);return Ar(e!=null,`Expected drag drop context`),e}function Ya(e,t){let n=Ja(),r=(0,H.useMemo)(()=>new Ka(n.getBackend()),[n]);return wa(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),wa(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function Xa(){let e=Ja();return(0,H.useMemo)(()=>new Pa(e),[e])}var Za=class{beginDrag(){let e=this.spec,t=this.monitor,n=null;return n=typeof e.item==`object`?e.item:typeof e.item==`function`?e.item(t):{},n??null}canDrag(){let e=this.spec,t=this.monitor;return typeof e.canDrag==`boolean`?e.canDrag:typeof e.canDrag==`function`?e.canDrag(t):!0}isDragging(e,t){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}};function Qa(e,t,n){let r=(0,H.useMemo)(()=>new Za(e,t,n),[t,n]);return(0,H.useEffect)(()=>{r.spec=e},[e]),r}function $a(e){return(0,H.useMemo)(()=>{let t=e.type;return Ar(t!=null,`spec.type must be defined`),t},[e])}function eo(e,t,n){let r=Ja(),i=Qa(e,t,n),a=$a(e);wa(function(){if(a!=null){let[e,o]=Ra(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o}},[r,t,n,i,a])}function to(e,t){let n=ka(e,t);Ar(!n.begin,`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);let r=Xa(),i=Ya(n.options,n.previewOptions);return eo(n,r,i),[Oa(n.collect,r,i),Aa(i),ja(i)]}function no(e){return(0,H.useMemo)(()=>e.hooks.dropTarget(),[e])}function ro(e){let t=Ja(),n=(0,H.useMemo)(()=>new qa(t.getBackend()),[t]);return wa(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function io(){let e=Ja();return(0,H.useMemo)(()=>new Ia(e),[e])}function ao(e){let{accept:t}=e;return(0,H.useMemo)(()=>(Ar(e.accept!=null,`accept must be defined`),Array.isArray(t)?t:[t]),[t])}var oo=class{canDrop(){let e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}};function so(e,t){let n=(0,H.useMemo)(()=>new oo(e,t),[t]);return(0,H.useEffect)(()=>{n.spec=e},[e]),n}function co(e,t,n){let r=Ja(),i=so(e,t),a=ao(e);wa(function(){let[e,o]=La(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o},[r,t,i,n,a.map(e=>e.toString()).join(`|`)])}function lo(e,t){let n=ka(e,t),r=io(),i=ro(n.options);return co(n,r,i),[Oa(n.collect,r,i),no(i)]}var uo={Activity:`activity`},fo={};const po=(e,t,n)=>{if(t===n)return e;let r=e.slice(0,Math.min(t,n)),i=e.slice(Math.max(t,n)+1),a=e.slice(Math.min(t,n)+1,Math.max(t,n)),o=e[t],s=e[n];return t<n?[...r,...a,s,o,...i]:[...r,o,s,...a,...i]},mo=({id:e,index:t,moveItem:n,children:r,style:i,className:a})=>{let o=(0,H.useRef)(null),[{handlerId:s},c]=lo({accept:uo.Activity,collect(e){return{handlerId:e.getHandlerId()}},hover(e,r){if(!o.current)return;let i=e.index,a=t;if(i===a)return;let s=o.current?.getBoundingClientRect(),c=(s.bottom-s.top)/2,l=r.getClientOffset().y-s.top;i<a&&l<c||i>a&&l>c||(n(i,a),e.index=a)}}),[{isDragging:l},u]=to({type:uo.Activity,item:()=>({id:e,index:t}),collect:e=>({isDragging:e.isDragging()})});return u(c(o)),(0,U.jsx)(`div`,{className:`draggable ${a||``} ${l?`is-dragging`:``}`,ref:o,style:{...fo,...i},"data-handler-id":s,children:r})},ho=(e,{extraContext:t,isHook:n}={})=>{let r=H.createContext(void 0);return{useInstace:n?e:(...t)=>(0,H.useMemo)(()=>e(...t),[]),Provider:({children:e,value:n})=>(0,U.jsx)(r.Provider,{value:n,children:t?(0,U.jsx)(t.Provider,{value:n,children:e}):e}),useExistingInstance:()=>(0,H.useContext)(r),create:n?void 0:e}};function go(e){return ct(e?.lift)}function _o(e){return function(t){if(go(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError(`Unable to lift unknown Observable type`)}}function vo(e,t,n,r,i){return new yo(e,t,n,r,i)}var yo=function(e){L(t,e);function t(t,n,r,i,a,o){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)==null||t.call(this))}},t}(nt),bo=function(e){L(t,e);function t(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(t.prototype,`value`,{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(ft),xo=function(e){L(t,e);function t(t,n){return e.call(this)||this}return t.prototype.schedule=function(e,t){return t===void 0&&(t=0),this},t}(ht),So={setInterval:function(e,t){var n=[...arguments].slice(2),r=So.delegate;return r?.setInterval?r.setInterval.apply(r,I([e,t],le(n))):setInterval.apply(void 0,I([e,t],le(n)))},clearInterval:function(e){return(So.delegate?.clearInterval||clearInterval)(e)},delegate:void 0},Co=function(e){L(t,e);function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return t.prototype.schedule=function(e,t){if(t===void 0&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id??this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return n===void 0&&(n=0),So.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return t;t!=null&&So.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error(`executing a cancelled action`);this.pending=!1;var n=this._execute(e,t);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r;try{this.work(e)}catch(e){n=!0,r=e||Error(`Scheduled action threw falsy error`)}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,r=t.scheduler,i=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_t(i,this),n!=null&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(xo),wo=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=tt.now,e}(),To=new(function(e){L(t,e);function t(t,n){n===void 0&&(n=wo.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return t.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(wo))(Co);function Eo(e){return e&&ct(e.schedule)}function Do(e){return e[e.length-1]}function Oo(e){return ct(Do(e))?e.pop():void 0}function ko(e){return Eo(Do(e))?e.pop():void 0}var Ao=(function(e){return e&&typeof e.length==`number`&&typeof e!=`function`});function jo(e){return ct(e?.then)}function Mo(e){return ct(e[rt])}function No(e){return Symbol.asyncIterator&&ct(e?.[Symbol.asyncIterator])}function Po(e){return TypeError(`You provided `+(typeof e==`object`&&e?`an invalid object`:`'`+e+`'`)+` where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Fo(){return typeof Symbol!=`function`||!Symbol.iterator?`@@iterator`:Symbol.iterator}var Io=Fo();function Lo(e){return ct(e?.[Io])}function Ro(e){return ae(this,arguments,function(){var t,n,r,i;return se(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,F(t.read())];case 3:return n=a.sent(),r=n.value,i=n.done,i?[4,F(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,F(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function zo(e){return ct(e?.getReader)}function Bo(e){if(e instanceof mt)return e;if(e!=null){if(Mo(e))return Vo(e);if(Ao(e))return Ho(e);if(jo(e))return Uo(e);if(No(e))return Go(e);if(Lo(e))return Wo(e);if(zo(e))return Ko(e)}throw Po(e)}function Vo(e){return new mt(function(t){var n=e[rt]();if(ct(n.subscribe))return n.subscribe(t);throw TypeError(`Provided object does not correctly implement Symbol.observable`)})}function Ho(e){return new mt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Uo(e){return new mt(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,gt)})}function Wo(e){return new mt(function(t){var n,r;try{for(var i=ne(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Go(e){return new mt(function(t){qo(e,t).catch(function(e){return t.error(e)})})}function Ko(e){return Go(Ro(e))}function qo(e,t){var n,r,i,a;return ce(this,void 0,void 0,function(){var o,s;return se(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=de(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Jo(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Yo(e,t){return t===void 0&&(t=0),_o(function(n,r){n.subscribe(vo(r,function(n){return Jo(r,e,function(){return r.next(n)},t)},function(){return Jo(r,e,function(){return r.complete()},t)},function(n){return Jo(r,e,function(){return r.error(n)},t)}))})}function Xo(e,t){return t===void 0&&(t=0),_o(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Zo(e,t){return Bo(e).pipe(Xo(t),Yo(t))}function Qo(e,t){return Bo(e).pipe(Xo(t),Yo(t))}function G(e,t){return new mt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function $o(e,t){return new mt(function(n){var r;return Jo(n,t,function(){r=e[Io](),Jo(n,t,function(){var e,t,i;try{e=r.next(),t=e.value,i=e.done}catch(e){n.error(e);return}i?n.complete():n.next(t)},0,!0)}),function(){return ct(r?.return)&&r.return()}})}function es(e,t){if(!e)throw Error(`Iterable cannot be null`);return new mt(function(n){Jo(n,t,function(){var r=e[Symbol.asyncIterator]();Jo(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function ts(e,t){return es(Ro(e),t)}function ns(e,t){if(e!=null){if(Mo(e))return Zo(e,t);if(Ao(e))return G(e,t);if(jo(e))return Qo(e,t);if(No(e))return es(e,t);if(Lo(e))return $o(e,t);if(zo(e))return ts(e,t)}throw Po(e)}function rs(e,t){return t?ns(e,t):Bo(e)}function is(){var e=[...arguments];return rs(e,ko(e))}function as(e,t){return _o(function(n,r){var i=0;n.subscribe(vo(r,function(n){r.next(e.call(t,n,i++))}))})}var os=Array.isArray;function ss(e,t){return os(t)?e.apply(void 0,I([],le(t))):e(t)}function cs(e){return as(function(t){return ss(e,t)})}var ls=Array.isArray,us=Object.getPrototypeOf,ds=Object.prototype,fs=Object.keys;function ps(e){if(e.length===1){var t=e[0];if(ls(t))return{args:t,keys:null};if(ms(t)){var n=fs(t);return{args:n.map(function(e){return t[e]}),keys:n}}}return{args:e,keys:null}}function ms(e){return e&&typeof e==`object`&&us(e)===ds}function hs(e,t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})}function gs(){var e=[...arguments],t=ko(e),n=Oo(e),r=ps(e),i=r.args,a=r.keys;if(i.length===0)return rs([],t);var o=new mt(_s(i,t,a?function(e){return hs(a,e)}:et));return n?o.pipe(cs(n)):o}function _s(e,t,n){return n===void 0&&(n=et),function(r){vs(t,function(){for(var i=e.length,a=Array(i),o=i,s=i,c=function(i){vs(t,function(){var c=rs(e[i],t),l=!1;c.subscribe(vo(r,function(e){a[i]=e,l||(l=!0,s--),s||r.next(n(a.slice()))},function(){--o||r.complete()}))},r)},l=0;l<i;l++)c(l)},r)}}function vs(e,t,n){e?Jo(n,e,t):t()}function ys(e){return new mt(function(t){Bo(e()).subscribe(t)})}function bs(){var e=[...arguments],t=Oo(e),n=ps(e),r=n.args,i=n.keys,a=new mt(function(e){var t=r.length;if(!t){e.complete();return}for(var n=Array(t),a=t,o=t,s=function(t){var s=!1;Bo(r[t]).subscribe(vo(e,function(e){s||(s=!0,o--),n[t]=e},function(){return a--},void 0,function(){(!a||!s)&&(o||e.next(i?hs(i,n):n),e.complete())}))},c=0;c<t;c++)s(c)});return t?a.pipe(cs(t)):a}function xs(e,t){return _o(function(n,r){var i=0;n.subscribe(vo(r,function(n){return e.call(t,n,i++)&&r.next(n)}))})}function Ss(e){return _o(function(t,n){var r=null,i=!1,a;r=t.subscribe(vo(n,void 0,void 0,function(o){a=Bo(e(o,Ss(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function Cs(e,t){return t===void 0&&(t=To),_o(function(n,r){var i=null,a=null,o=null,s=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,r.next(e)}};function c(){var n=o+e,a=t.now();if(a<n){i=this.schedule(void 0,n-a),r.add(i);return}s()}n.subscribe(vo(r,function(n){a=n,o=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){s(),r.complete()},void 0,function(){a=i=null}))})}function ws(e,t){return t===void 0&&(t=et),e??=Ts,_o(function(n,r){var i,a=!0;n.subscribe(vo(r,function(n){var o=t(n);(a||!e(i,o))&&(a=!1,i=o,r.next(n))}))})}function Ts(e,t){return e===t}function Es(e){return _o(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function Ds(){return _o(function(e,t){var n,r=!1;e.subscribe(vo(t,function(e){var i=n;n=e,r&&t.next([i,e]),r=!0}))})}function Os(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new ft}:t,r=e.resetOnError,i=r===void 0?!0:r,a=e.resetOnComplete,o=a===void 0?!0:a,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(e){var t,r,a,s=0,l=!1,u=!1,d=function(){r?.unsubscribe(),r=void 0},f=function(){d(),t=a=void 0,l=u=!1},p=function(){var e=t;f(),e?.unsubscribe()};return _o(function(e,m){s++,!u&&!l&&d();var h=a??=n();m.add(function(){s--,s===0&&!u&&!l&&(r=ks(p,c))}),h.subscribe(m),!t&&s>0&&(t=new kt({next:function(e){return h.next(e)},error:function(e){u=!0,d(),r=ks(f,i,e),h.error(e)},complete:function(){l=!0,d(),r=ks(f,o),h.complete()}}),Bo(e).subscribe(t))})(e)}}function ks(e,t){var n=[...arguments].slice(2);if(t===!0){e();return}if(t!==!1){var r=new kt({next:function(){r.unsubscribe(),e()}});return Bo(t.apply(void 0,I([],le(n)))).subscribe(r)}}function As(e,t,n){var r,i,a,o,s=!1;return e&&typeof e==`object`?(r=e.bufferSize,o=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,a=e.refCount,s=a===void 0?!1:a,n=e.scheduler):o=e??1/0,Os({connector:function(){return new pt(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function js(e){return xs(function(t,n){return e<=n})}function Ms(e,t){return _o(function(n,r){var i=null,a=0,o=!1,s=function(){return o&&!i&&r.complete()};n.subscribe(vo(r,function(n){i?.unsubscribe();var o=0,c=a++;Bo(e(n,c)).subscribe(i=vo(r,function(e){return r.next(t?t(n,e,c,o++):e)},function(){i=null,s()}))},function(){o=!0,s()}))})}function Ns(e,t,n){var r=ct(e)||t||n?{next:e,error:t,complete:n}:e;return r?_o(function(e,t){var n;(n=r.subscribe)==null||n.call(r);var i=!0;e.subscribe(vo(t,function(e){var n;(n=r.next)==null||n.call(r,e),t.next(e)},function(){var e;i=!1,(e=r.complete)==null||e.call(r),t.complete()},function(e){var n;i=!1,(n=r.error)==null||n.call(r,e),t.error(e)},function(){var e,t;i&&((e=r.unsubscribe)==null||e.call(r)),(t=r.finalize)==null||t.call(r)}))}):et}const Ps=(e,t)=>({...e,...t?.(e)}),Fs=e=>{let t=e.$$meta.key;return{...e,[`use${t}`]:()=>{let[n,r]=(0,H.useState)(e[`get${t}`]());return(0,H.useEffect)(()=>{let n=e[`${t}$`].pipe(ws()).subscribe(e=>{r(e)});return()=>n.unsubscribe()},[]),n}}},Is=(e,t)=>({[`get${e}`]:()=>t.getValue(),[`set${e}`]:e=>t.next(e),[`subscribe${e}`]:e=>{let n=t.subscribe(e);return()=>n.unsubscribe()},[`${e}$`]:t.asObservable(),$$meta:{key:e}}),Ls=(e,t,n)=>{let r=new bo(n);return t.subscribe(r),Is(e,r)},Rs=(e,t)=>Is(e,new bo(t)),zs=(e,t)=>Fs(Rs(e,t)),Bs=(e,t,n)=>Ps(zs(e,t),n);var Vs=e=>e.$$meta.key,Hs=e=>e[`get${e.$$meta.key}`],Us=e=>e[`set${e.$$meta.key}`],Ws=e=>e[`subscribe${e.$$meta.key}`],Gs=e=>e[`${e.$$meta.key}$`],Ks=e=>e[`use${e.$$meta.key}`],qs=class{static getKey=Vs;static getGetter=Hs;static getSetter=Us;static getSubscriber=Ws;static getObservable=Gs;static getUser=Ks};Ps(Fs(Rs(`Example`,`Hello`)),e=>({doSomething:()=>{e.setExample(`Hello World`)}}));var Js=(()=>{let e=!1,t=[];return{isFrozen:()=>e,freeze:()=>{e=!0},unfreeze:()=>{for(;t.length>0;)t.shift()();e=!1},submit:n=>{e?t.push(n):n()}}})(),Ys=class extends bo{next(e){Js.submit(()=>super.next(e))}},Xs=(e,t)=>{if(t){let n=t.split(`::`),r=e.data;for(let e=0;e<n.length;e+=1){if(!r[n[e]])return r[n[e]];r=r[n[e]]}return r}else return e.data},Zs=e=>typeof e==`object`&&e?Array.isArray(e)?[...e]:{...e}:e,Qs=(e,t,n,r)=>{let i=Xs(e,n);if(r===i)return;let a=(e,t,n)=>{t!==n&&e.$.next(t),Object.entries(e.children).forEach(([e,r])=>{a(r,t?.[e],n?.[e])})};if(Js.freeze(),!n)e.data=r,a(t,r,i);else{let o=n.split(`::`),s=e.data,c=t,l=[[c,s,void 0]];for(let e=0;e<o.length-1;e+=1)s[o[e]]===void 0&&(s[o[e]]={}),s=s[o[e]],c=c?.children[o[e]],l.push([c,s,o[e]]);let u=c?.children[o[o.length-1]];l.push([u,r,o[o.length-1]]);let d=[],f=[],p,m;for(let e=l.length-1;e>=0;--e){let[t,n,r]=l[e];if(e===l.length-1)f.unshift([t,n]),p=r,m=n;else{let e=Zs(n);e[p]=m,f.unshift([t,e]),p=r,m=e}}e.data=m;for(let e=0;e<f.length;e+=1){let[t,n]=f[e];if(t)d.push(()=>t.$.next(n));else break}d.reverse().forEach(e=>e()),u&&Object.entries(u.children).forEach(([e,t])=>{a(t,r?.[e],i?.[e])})}Js.unfreeze()},$s=(e,t,n)=>{if(n){let r=n.split(`::`),i=e.data,a=t;for(let e=0;e<r.length;e+=1)e<r.length-1&&i[r[e]]===void 0&&(i[r[e]]={}),a.children[r[e]]===void 0&&(a.children[r[e]]={$:new Ys(i[r[e]]),children:{}}),i=i[r[e]],a=a.children[r[e]];return a}else return t},ec=(e,t,n)=>{let{$:r}=$s(e,t,n),[i,a]=(0,H.useState)(()=>r.getValue());return(0,H.useEffect)(()=>{let e=r.subscribe(e=>{a(e)});return()=>e.unsubscribe()},[r]),(0,H.useEffect)(()=>{console.log(`$ changed`)},[r]),(0,H.useEffect)(()=>{console.log(`dataTree changed:`,e)},[e]),(0,H.useEffect)(()=>{console.log(`controlTree changed:`,t)},[t]),(0,H.useEffect)(()=>{console.log(`path changed:`,n)},[n]),i},tc=(e,t,n)=>{let r=t||{$:new Ys(e.data),children:{}},i=e=>n?`${n}::${e}`:e;return new Proxy({$$isBean:!0},{ownKeys(e){return Reflect.ownKeys(e).concat([`use`,`get`,`set`,`$`,`namespaces`])},get(t,a){if(a in t)return t[a];if(typeof a==`string`){if([`$`,`get`,`set`,`use`].includes(a)){let t=$s(e,r,n);if(a===`$`)return t.$;if(a===`get`)return t.get||=()=>Xs(e,n),t.get;if(a===`set`)return t.set||=t=>Qs(e,r,n,typeof t==`function`?t(Xs(e,n)):t),t.set;if(a===`use`)return t.use||=()=>ec(e,r,n),t.use}else if(a===`namespaces`)return new Proxy({},{get(t,n){return tc(e,r,i(n))}})}else return t[a]}})};const nc=(e,t,n)=>tc({data:e},t,n),rc={memory:(()=>{let e=new Map;return{set:(t,n)=>{e.set(t,n)},get:t=>e.get(t),remove:t=>e.delete(t)}})(),localStorage:{set:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},get:e=>{let t=localStorage.getItem(e);if(t!==`undefined`)return t&&JSON.parse(t)},remove:e=>localStorage.removeItem(e),useLocalStorage:(e,t)=>z(e,t)}},ic=(e,t=`memory`)=>{let n=rc[t],r=(t,r)=>{let i=(t,r)=>{t=e?e+`:`+t:t,n.set(t,r)};if(typeof t==`string`)i(t,r);else{let e=t;Object.keys(e).forEach(t=>{i(t,e[t])})}},i=(t,r)=>(t=e?e+`:`+t:t,n.useLocalStorage(t,r)),a=t=>(t=e?e+`:`+t:t,n.remove(t)),o=(t,r)=>(t=e?e+`:`+t:t,n.get(t)??r);return{set:r,get:o,remove:a,space:(t,n=`memory`)=>ic(e?e+`:`+t:t,n),useCachedState:(e,t,n={})=>{let[i,a]=(0,H.useState)(n.out?n.out(o(e,t)):o(e,t));return(0,H.useEffect)(()=>{n.in?r(e,n.in(i)):r(e,i)},[i]),[i,a]},useLocalStorage:i}},ac=e=>rc[e],oc=ho(({scope:e,storage:t})=>{let n=ac(t),r=(e,t)=>e+`.`+t;return{createCachedState:(t,i)=>{let a=r(e,t);return Bs(``,n.get(a)===void 0?i:n.get(a),e=>{qs.getObservable(e).subscribe(e=>{n.set(a,e)}),n.subscribe?.(a,t=>{qs.getSetter(e)(t)})})},get:(t,i)=>n.get(r(e,t))??i,set:(t,i)=>n.set(r(e,t),i),remove:t=>n.remove(r(e,t))}}),sc=(e,t)=>{let n=qs.getKey(e),r=t.get(n,qs.getGetter(e)());return console.log(`[Cache] get`,n,r),r!==qs.getGetter(e)()&&(console.log(`[Cache] set`,n,r),qs.getSetter(e)(r)),qs.getObservable(e).pipe(ws()).subscribe(e=>{t.set(n,e)}),e};var cc=oc.create({scope:`pageBox`,storage:`localStorage`});ho(()=>{nc({tarBarWidth:1e4})});const lc=ho(()=>{let{getTabBarWidth:e,setTabBarWidth:t,TabBarWidth$:n}=zs(`TabBarWidth`,1e4),{useTabBarCapacity:r}=Fs(Ls(`TabBarCapacity`,n.pipe(as(e=>Math.floor((e-100)/(100*1.5)))),100)),i=new ResizeObserver(e=>{let n=e[0];setTimeout(()=>{t(n.contentRect.width)},100)}),a=e=>e?(i.observe(e),()=>{i.unobserve(e)}):()=>{},{getPageList:o,setPageList:s,usePageList:c,subscribePageList:l,PageList$:u}=Bs(`PageList`,(()=>{let e=cc.get(`pageList`,[]);return e.filter(e=>e.active).concat(e.filter(e=>!e.active).slice(0,4))})(),e=>{sc(e,cc)}),{getCurrentPage:d,useCurrentPage:f,CurrentPage$:p}=Fs(Ls(`CurrentPage`,u.pipe(as(e=>e.find(e=>e.active))),void 0)),{getVisible:m,setVisible:h,useVisible:g}=Bs(`Visible`,!0,e=>{sc(e,cc)}),{get:_,set:v,use:y}=cc.createCachedState(`TabBarVisible`,!0),b=()=>h(!0);return{addPage:(e,t=!0)=>{let n=!1,r=o().slice();for(let t of r)t.id===e.id&&(n=!0);n||r.push(e),t?(s(r.map(t=>t.id===e.id?{...e,active:!0}:{...t,active:!1})),b()):s(r.slice())},addPages:e=>{let t=o().slice();for(let n of e){let e=!1;for(let r of t)r.id===n.id&&(e=!0);e||t.push(n)}s(t.slice())},removePage:e=>{let t=o().slice();for(let n of t.slice())if(n.id===e){let e=t.indexOf(n);t.splice(e,1),n.active&&t.length>0&&(t[e%t.length].active=!0),s(t.slice());break}},showPage:e=>{let t=o().slice();for(let n of t)n.id===e?n.active=!0:n.active=!1;s(t.slice()),b(),Sr.executeCommandOnReady(xr.ToChatPage)},updatePage:e=>{let{id:t}=e;s(o().slice().map(n=>n.id===t?{...n,...e}:n))},getCurrentPage:d,useCurrentPage:f,currentPage$:p,hideTabBar:()=>{v(!1)},showTabBar:()=>{v(!0)},getTabBarWidth:e,useTabBarCapacity:r,observeTabBar:a,getTabBarVisible:_,useTabBarVisible:y,getVisible:m,setVisible:h,useVisible:g,show:b,hide:()=>h(!1),toggle:()=>h(!m()),getPageList:o,setPageList:s,usePageList:c,subscribePageList:l,minTabWidth:100,maxTabWidth:1e4,...Bs(`PageActions`,[],e=>{let t=new bo({}),n=n=>{e.setPageActions([...e.getPageActions(),n]);let r=((n.when instanceof Function?n.when():n.when)||is(!0)).subscribe(e=>{t.next({...t.getValue(),[n.id]:e})});return()=>{e.setPageActions(e.getPageActions().filter(e=>e.id!==n.id)),t.next({...t.getValue(),[n.id]:!1}),r.unsubscribe()}},{getActivePageActions:r,useActivePageActions:i,ActivePageActions$:a}=Fs(Ls(`ActivePageActions`,gs([e.PageActions$,t]).pipe(as(([e,t])=>e.filter(e=>t[e.id]===!0))),[]));return{registerPageAction:n,getActivePageActions:r,useActivePageActions:i,activePageActions$:a}})}}),uc=({action:e})=>{let{getCurrentPage:t}=lc.useExistingInstance(),{icon:n,onClick:r}=e,i=ep.useComponent(n||``);return(0,U.jsx)(`div`,{onClick:()=>{let e=t();e&&r({page:e})},className:w`
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        &:hover {
          background: rgba(0, 0, 0, 0.1);
        }
      `,children:i?(0,U.jsx)(i,{}):e.title},e.id)},dc=()=>{let{useActivePageActions:e}=lc.useExistingInstance(),t=e();return(0,U.jsx)(`div`,{className:w`
        display: flex;
        align-items: center;
        gap: 2px;
        padding: 4px;
      `,children:t.map(e=>(0,U.jsx)(uc,{action:e},e.id))})};var fc=e=>typeof e==`string`,pc=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},mc=e=>e==null?``:``+e,hc=(e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})},gc=/###/g,_c=e=>e&&e.indexOf(`###`)>-1?e.replace(gc,`.`):e,vc=e=>!e||fc(e),yc=(e,t,n)=>{let r=fc(t)?t.split(`.`):t,i=0;for(;i<r.length-1;){if(vc(e))return{};let t=_c(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return vc(e)?{}:{obj:e,k:_c(r[i])}},bc=(e,t,n)=>{let{obj:r,k:i}=yc(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=yc(e,o,Object);for(;s.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=yc(e,o,Object),s?.obj&&s.obj[`${s.k}.${a}`]!==void 0&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=n},xc=(e,t,n,r)=>{let{obj:i,k:a}=yc(e,t,Object);i[a]=i[a]||[],i[a].push(n)},Sc=(e,t)=>{let{obj:n,k:r}=yc(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Cc=(e,t,n)=>{let r=Sc(e,n);return r===void 0?Sc(t,n):r},wc=(e,t,n)=>{for(let r in t)r!==`__proto__`&&r!==`constructor`&&(r in e?fc(e[r])||e[r]instanceof String||fc(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):wc(e[r],t[r],n):e[r]=t[r]);return e},Tc=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,`\\$&`),Ec={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`,"/":`&#x2F;`},Dc=e=>fc(e)?e.replace(/[&<>"'\/]/g,e=>Ec[e]):e,Oc=class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let t=this.regExpMap.get(e);if(t!==void 0)return t;let n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}},kc=[` `,`,`,`?`,`!`,`;`],Ac=new Oc(20),jc=(e,t,n)=>{t||=``,n||=``;let r=kc.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(r.length===0)return!0;let i=Ac.getRegExp(`(${r.map(e=>e===`?`?`\\?`:e).join(`|`)})`),a=!i.test(e);if(!a){let t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(a=!0)}return a},Mc=(e,t,n=`.`)=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;let r=t.split(n),i=e;for(let e=0;e<r.length;){if(!i||typeof i!=`object`)return;let t,a=``;for(let o=e;o<r.length;++o)if(o!==e&&(a+=n),a+=r[o],t=i[a],t!==void 0){if([`string`,`number`,`boolean`].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}i=t}return i},Nc=e=>e?.replace(`_`,`-`),Pc={type:`logger`,log(e){this.output(`log`,e)},warn(e){this.output(`warn`,e)},error(e){this.output(`error`,e)},output(e,t){console?.[e]?.apply?.(console,t)}},Fc=new class e{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||`i18next:`,this.logger=e||Pc,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,`log`,``,!0)}warn(...e){return this.forward(e,`warn`,``,!0)}error(...e){return this.forward(e,`error`,``)}deprecate(...e){return this.forward(e,`warn`,`WARNING DEPRECATED: `,!0)}forward(e,t,n,r){return r&&!this.debug?null:(fc(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t||=this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}},Ic=class{constructor(){this.observers={}}on(e,t){return e.split(` `).forEach(e=>{this.observers[e]||(this.observers[e]=new Map);let n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers[`*`]&&Array.from(this.observers[`*`].entries()).forEach(([n,r])=>{for(let i=0;i<r;i++)n.apply(n,[e,...t])})}},Lc=class extends Ic{constructor(e,t={ns:[`translation`],defaultNS:`translation`}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator=`.`),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){let i=r.keySeparator===void 0?this.options.keySeparator:r.keySeparator,a=r.ignoreJSONStructure===void 0?this.options.ignoreJSONStructure:r.ignoreJSONStructure,o;e.indexOf(`.`)>-1?o=e.split(`.`):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):fc(n)&&i?o.push(...n.split(i)):o.push(n)));let s=Sc(this.data,o);return!s&&!t&&!n&&e.indexOf(`.`)>-1&&(e=o[0],t=o[1],n=o.slice(2).join(`.`)),s||!a||!fc(n)?s:Mc(this.data?.[e]?.[t],n,i)}addResource(e,t,n,r,i={silent:!1}){let a=i.keySeparator===void 0?this.options.keySeparator:i.keySeparator,o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(`.`)>-1&&(o=e.split(`.`),r=t,t=o[1]),this.addNamespaces(t),bc(this.data,o,r),i.silent||this.emit(`added`,e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(let r in n)(fc(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit(`added`,e,t,n)}addResourceBundle(e,t,n,r,i,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(`.`)>-1&&(o=e.split(`.`),r=n,n=t,t=o[1]),this.addNamespaces(t);let s=Sc(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?wc(s,n,i):s={...s,...n},bc(this.data,o,s),a.silent||this.emit(`added`,e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit(`removed`,e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||=this.options.defaultNS,this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}},Rc={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{t=this.processors[e]?.process(t,n,r,i)??t}),t}},zc=Symbol(`i18next/PATH_KEY`);function Bc(){let e=[],t=Object.create(null),n;return t.get=(r,i)=>(n?.revoke?.(),i===zc?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Vc(e,t){let{[zc]:n}=e(Bc());return n.join(t?.keySeparator??`.`)}var Hc={},Uc=e=>!fc(e)&&typeof e!=`boolean`&&typeof e!=`number`,Wc=class e extends Ic{constructor(e,t={}){super(),hc([`resourceStore`,`languageUtils`,`pluralResolver`,`interpolator`,`backendConnector`,`i18nFormat`,`utils`],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator=`.`),this.logger=Fc.create(`translator`)}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){let n={...t};if(e==null)return!1;let r=this.resolve(e,n);if(r?.res===void 0)return!1;let i=Uc(r.res);return!(n.returnObjects===!1&&i)}extractFromKey(e,t){let n=t.nsSeparator===void 0?this.options.nsSeparator:t.nsSeparator;n===void 0&&(n=`:`);let r=t.keySeparator===void 0?this.options.keySeparator:t.keySeparator,i=t.ns||this.options.defaultNS||[],a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!jc(e,n,r);if(a&&!o){let t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:fc(i)?[i]:i};let a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return{key:e,namespaces:fc(i)?[i]:i}}translate(t,n,r){let i=typeof n==`object`?{...n}:n;if(typeof i!=`object`&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i==`object`&&(i={...i}),i||={},t==null)return``;typeof t==`function`&&(t=Vc(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);let a=i.returnDetails===void 0?this.options.returnDetails:i.returnDetails,o=i.keySeparator===void 0?this.options.keySeparator:i.keySeparator,{key:s,namespaces:c}=this.extractFromKey(t[t.length-1],i),l=c[c.length-1],u=i.nsSeparator===void 0?this.options.nsSeparator:i.nsSeparator;u===void 0&&(u=`:`);let d=i.lng||this.language,f=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()===`cimode`)return f?a?{res:`${l}${u}${s}`,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${u}${s}`:a?{res:s,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:s;let p=this.resolve(t,i),m=p?.res,h=p?.usedKey||s,g=p?.exactUsedKey||s,_=[`[object Number]`,`[object Function]`,`[object RegExp]`],v=i.joinArrays===void 0?this.options.joinArrays:i.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,b=i.count!==void 0&&!fc(i.count),x=e.hasDefaultValue(i),S=b?this.pluralResolver.getSuffix(d,i.count,i):``,C=i.ordinal&&b?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):``,w=b&&!i.ordinal&&i.count===0,T=w&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${S}`]||i[`defaultValue${C}`]||i.defaultValue,E=m;y&&!m&&x&&(E=T);let D=Uc(E),O=Object.prototype.toString.apply(E);if(y&&E&&D&&_.indexOf(O)<0&&!(fc(v)&&Array.isArray(E))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn(`accessing an object - but returnObjects options is not enabled!`);let e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,E,{...i,ns:c}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(p.res=e,p.usedParams=this.getUsedParamsDetails(i),p):e}if(o){let e=Array.isArray(E),t=e?[]:{},n=e?g:h;for(let e in E)if(Object.prototype.hasOwnProperty.call(E,e)){let r=`${n}${o}${e}`;x&&!m?t[e]=this.translate(r,{...i,defaultValue:Uc(T)?T[e]:void 0,joinArrays:!1,ns:c}):t[e]=this.translate(r,{...i,joinArrays:!1,ns:c}),t[e]===r&&(t[e]=E[e])}m=t}}else if(y&&fc(v)&&Array.isArray(m))m=m.join(v),m&&=this.extendTranslation(m,t,i,r);else{let e=!1,n=!1;!this.isValidLookup(m)&&x&&(e=!0,m=T),this.isValidLookup(m)||(n=!0,m=s);let a=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:m,c=x&&T!==m&&this.options.updateMissing;if(n||e||c){if(this.logger.log(c?`updateKey`:`missingKey`,d,l,s,c?T:m),o){let e=this.resolve(s,{...i,keySeparator:!1});e&&e.res&&this.logger.warn(`Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.`)}let e=[],t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo===`fallback`&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else this.options.saveMissingTo===`all`?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);let n=(e,t,n)=>{let r=x&&n!==m?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,r,c,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,r,c,i),this.emit(`missingKey`,e,l,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach(e=>{let t=this.pluralResolver.getSuffixes(e,i);w&&i[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],s+t,i[`defaultValue${t}`]||T)})}):n(e,s,T))}m=this.extendTranslation(m,t,i,p,r),n&&m===s&&this.options.appendNamespaceToMissingKey&&(m=`${l}${u}${s}`),(n||e)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${u}${s}`:s,e?m:void 0,i))}return a?(p.res=m,p.usedParams=this.getUsedParamsDetails(i),p):m}extendTranslation(e,t,n,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let a=fc(e)&&(n?.interpolation?.skipOnVariables===void 0?this.options.interpolation.skipOnVariables:n.interpolation.skipOnVariables),o;if(a){let t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let s=n.replace&&!fc(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),e=this.interpolator.interpolate(e,s,n.lng||this.language||r.usedLng,n),a){let t=e.match(this.interpolator.nestingRegexp),r=t&&t.length;o<r&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...e)=>i?.[0]===e[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null):this.translate(...e,t),n)),n.interpolation&&this.interpolator.reset()}let a=n.postProcess||this.options.postProcess,o=fc(a)?[a]:a;return e!=null&&o?.length&&n.applyPostProcessor!==!1&&(e=Rc.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,r,i,a,o;return fc(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;let s=this.extractFromKey(e,t),c=s.key;r=c;let l=s.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));let u=t.count!==void 0&&!fc(t.count),d=u&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(fc(t.context)||typeof t.context==`number`)&&t.context!==``,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);l.forEach(e=>{this.isValidLookup(n)||(o=e,!Hc[`${p[0]}-${e}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(Hc[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(`, `)}" won't get resolved as namespace "${o}" was not yet loaded`,`This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!`)),p.forEach(r=>{if(this.isValidLookup(n))return;a=r;let o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));let n=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&e.indexOf(i)===0&&o.push(c+e.replace(i,this.options.pluralSeparator)),o.push(c+e),d&&o.push(c+n)),f){let r=`${c}${this.options.contextSeparator||`_`}${t.context}`;o.push(r),u&&(t.ordinal&&e.indexOf(i)===0&&o.push(r+e.replace(i,this.options.pluralSeparator)),o.push(r+e),d&&o.push(r+n))}}let s;for(;s=o.pop();)this.isValidLookup(n)||(i=s,n=this.getResource(r,e,s,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e===``)}getResource(e,t,n,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){let t=[`defaultValue`,`ordinal`,`context`,`replace`,`lng`,`lngs`,`fallbackLng`,`ns`,`keySeparator`,`nsSeparator`,`returnObjects`,`returnDetails`,`joinArrays`,`postProcess`,`interpolation`],n=e.replace&&!fc(e.replace),r=n?e.replace:e;if(n&&e.count!==void 0&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(let e of t)delete r[e]}return r}static hasDefaultValue(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&t.substring(0,12)===`defaultValue`&&e[t]!==void 0)return!0;return!1}},Gc=class{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Fc.create(`languageUtils`)}getScriptPartFromCode(e){if(e=Nc(e),!e||e.indexOf(`-`)<0)return null;let t=e.split(`-`);return t.length===2||(t.pop(),t[t.length-1].toLowerCase()===`x`)?null:this.formatLanguageCode(t.join(`-`))}getLanguagePartFromCode(e){if(e=Nc(e),!e||e.indexOf(`-`)<0)return e;let t=e.split(`-`);return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(fc(e)&&e.indexOf(`-`)>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load===`languageOnly`||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;let n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;let n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;let r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>{if(e===r||!(e.indexOf(`-`)<0&&r.indexOf(`-`)<0)&&(e.indexOf(`-`)>0&&r.indexOf(`-`)<0&&e.substring(0,e.indexOf(`-`))===r||e.indexOf(r)===0&&r.length>1))return e})}),t||=this.getFallbackCodes(this.options.fallbackLng)[0],t}getFallbackCodes(e,t){if(!e)return[];if(typeof e==`function`&&(e=e(t)),fc(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||=e[this.getScriptPartFromCode(t)],n||=e[this.formatLanguageCode(t)],n||=e[this.getLanguagePartFromCode(t)],n||=e.default,n||[]}toResolveHierarchy(e,t){let n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return fc(e)&&(e.indexOf(`-`)>-1||e.indexOf(`_`)>-1)?(this.options.load!==`languageOnly`&&i(this.formatLanguageCode(e)),this.options.load!==`languageOnly`&&this.options.load!==`currentOnly`&&i(this.getScriptPartFromCode(e)),this.options.load!==`currentOnly`&&i(this.getLanguagePartFromCode(e))):fc(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}},Kc={zero:0,one:1,two:2,few:3,many:4,other:5},qc={select:e=>e===1?`one`:`other`,resolvedOptions:()=>({pluralCategories:[`one`,`other`]})},Jc=class{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Fc.create(`pluralResolver`),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){let n=Nc(e===`dev`?`en`:e),r=t.ordinal?`ordinal`:`cardinal`,i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!Intl)return this.logger.error(`No Intl support, please use an Intl polyfill!`),qc;if(!e.match(/-|_/))return qc;let n=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(n,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e,t={}){let n=this.getRule(e,t);return n||=this.getRule(`dev`,t),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||=this.getRule(`dev`,t),n?n.resolvedOptions().pluralCategories.sort((e,t)=>Kc[e]-Kc[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:``}${e}`):[]}getSuffix(e,t,n={}){let r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:``}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix(`dev`,t,n))}},Yc=(e,t,n,r=`.`,i=!0)=>{let a=Cc(e,t,n);return!a&&i&&fc(n)&&(a=Mc(e,n,r),a===void 0&&(a=Mc(t,n,r))),a},Xc=e=>e.replace(/\$/g,`$$$$`),Zc=class{constructor(e={}){this.logger=Fc.create(`interpolator`),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||={escapeValue:!0};let{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:s,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:h,maxReplaces:g,alwaysFormat:_}=e.interpolation;this.escape=t===void 0?Dc:t,this.escapeValue=n===void 0?!0:n,this.useRawValueToEscape=r===void 0?!1:r,this.prefix=i?Tc(i):a||`{{`,this.suffix=o?Tc(o):s||`}}`,this.formatSeparator=c||`,`,this.unescapePrefix=l?``:u||`-`,this.unescapeSuffix=this.unescapePrefix?``:l||``,this.nestingPrefix=d?Tc(d):f||Tc(`$t(`),this.nestingSuffix=p?Tc(p):m||Tc(`)`),this.nestingOptionsSeparator=h||`,`,this.maxReplaces=g||1e3,this.alwaysFormat=_===void 0?!1:_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,`g`);this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,a,o,s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){let i=Yc(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}let i=e.split(this.formatSeparator),a=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(Yc(t,s,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...t,interpolationkey:a})};this.resetRegExp();let l=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=r?.interpolation?.skipOnVariables===void 0?this.options.interpolation.skipOnVariables:r.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Xc(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Xc(this.escape(e)):Xc(e)}].forEach(t=>{for(o=0;i=t.regex.exec(e);){let n=i[1].trim();if(a=c(n),a===void 0)if(typeof l==`function`){let t=l(e,i,r);a=fc(t)?t:``}else if(r&&Object.prototype.hasOwnProperty.call(r,n))a=``;else if(u){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=``;else !fc(a)&&!this.useRawValueToEscape&&(a=mc(a));let s=t.safeValue(a);if(e=e.replace(i[0],s),u?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,i,a,o=(e,t)=>{let n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;let r=e.split(RegExp(`${n}[ ]*{`)),i=`{${r[1]}`;e=r[0],i=this.interpolate(i,a);let o=i.match(/'/g),s=i.match(/"/g);((o?.length??0)%2==0&&!s||s.length%2!=0)&&(i=i.replace(/'/g,`"`));try{a=JSON.parse(i),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${i}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let s=[];a={...n},a=a.replace&&!fc(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=/{.*}/.test(r[1])?r[1].lastIndexOf(`}`)+1:r[1].indexOf(this.formatSeparator);if(c!==-1&&(s=r[1].slice(c).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,c)),i=t(o.call(this,r[1].trim(),a),a),i&&r[0]===e&&!fc(i))return i;fc(i)||(i=mc(i)),i||=(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),``),s.length&&(i=s.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}},Qc=e=>{let t=e.toLowerCase().trim(),n={};if(e.indexOf(`(`)>-1){let r=e.split(`(`);t=r[0].toLowerCase().trim();let i=r[1].substring(0,r[1].length-1);t===`currency`&&i.indexOf(`:`)<0?n.currency||=i.trim():t===`relativetime`&&i.indexOf(`:`)<0?n.range||=i.trim():i.split(`;`).forEach(e=>{if(e){let[t,...r]=e.split(`:`),i=r.join(`:`).trim().replace(/^'+|'+$/g,``),a=t.trim();n[a]||(n[a]=i),i===`false`&&(n[a]=!1),i===`true`&&(n[a]=!0),isNaN(i)||(n[a]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}},$c=e=>{let t={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});let o=r+JSON.stringify(a),s=t[o];return s||(s=e(Nc(r),i),t[o]=s),s(n)}},el=e=>(t,n,r)=>e(Nc(n),r)(t),tl=class{constructor(e={}){this.logger=Fc.create(`formatter`),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||`,`;let n=t.cacheInBuiltFormats?$c:el;this.formats={number:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t,style:`currency`});return e=>n.format(e)}),datetime:n((e,t)=>{let n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{let n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||`day`)}),list:n((e,t)=>{let n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=$c(t)}format(e,t,n,r={}){let i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf(`(`)>1&&i[0].indexOf(`)`)<0&&i.find(e=>e.indexOf(`)`)>-1)){let e=i.findIndex(e=>e.indexOf(`)`)>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{let{formatName:i,formatOptions:a}=Qc(t);if(this.formats[i]){let t=e;try{let o=r?.formatParams?.[r.interpolationkey]||{},s=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,s,{...a,...r,...o})}catch(e){this.logger.warn(e)}return t}else this.logger.warn(`there was no format function for ${i}`);return e},e)}},nl=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)},rl=class extends Ic{constructor(e,t,n,r={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Fc.create(`backendConnector`),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(e,t,n,r){let i={},a={},o={},s={};return e.forEach(e=>{let r=!0;t.forEach(t=>{let o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(this.state[o]===1?a[o]===void 0&&(a[o]=!0):(this.state[o]=1,r=!1,a[o]===void 0&&(a[o]=!0),i[o]===void 0&&(i[o]=!0),s[t]===void 0&&(s[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){let r=e.split(`|`),i=r[0],a=r[1];t&&this.emit(`failedLoading`,i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);let o={};this.queue.forEach(n=>{xc(n.loaded,[i],a),nl(n,e),t&&n.errors.push(t),n.pendingCount===0&&!n.done&&(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});let t=n.loaded[e];t.length&&t.forEach(t=>{o[e][t]===void 0&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit(`loaded`,o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:a});return}this.readingCalls++;let o=(o,s)=>{if(this.readingCalls--,this.waitingReads.length>0){let e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}if(o&&s&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,r+1,i*2,a)},i);return}a(o,s)},s=this.backend[n].bind(this.backend);if(s.length===2){try{let n=s(e,t);n&&typeof n.then==`function`?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}return}return s(e,t,o)}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn(`No backend was added via i18next.use. Will not load resources.`),r&&r();fc(e)&&(e=this.languageUtils.toResolveHierarchy(e)),fc(t)&&(t=[t]);let i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=``){let n=e.split(`|`),r=n[0],i=n[1];this.read(r,i,`read`,void 0,void 0,(n,a)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,a),this.loaded(e,n,a)})}saveMissing(e,t,n,r,i,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,`This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!`);return}if(!(n==null||n===``)){if(this.backend?.create){let s={...a,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=c.length===5?c(e,t,n,r,s):c(e,t,n,r),i&&typeof i.then==`function`?i.then(e=>o(null,e)).catch(o):o(null,i)}catch(e){o(e)}else c(e,t,n,r,o,s)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}},il=()=>({debug:!1,initAsync:!0,ns:[`translation`],defaultNS:[`translation`],fallbackLng:[`dev`],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:`all`,preload:!1,simplifyPluralSuffix:!0,keySeparator:`.`,nsSeparator:`:`,pluralSeparator:`_`,contextSeparator:`_`,partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:`fallback`,saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]==`object`&&(t=e[1]),fc(e[1])&&(t.defaultValue=e[1]),fc(e[2])&&(t.tDescription=e[2]),typeof e[2]==`object`||typeof e[3]==`object`){let n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:`{{`,suffix:`}}`,formatSeparator:`,`,unescapePrefix:`-`,nestingPrefix:`$t(`,nestingSuffix:`)`,nestingOptionsSeparator:`,`,maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),al=e=>(fc(e.ns)&&(e.ns=[e.ns]),fc(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),fc(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.(`cimode`)<0&&(e.supportedLngs=e.supportedLngs.concat([`cimode`])),typeof e.initImmediate==`boolean`&&(e.initAsync=e.initImmediate),e),ol=()=>{},sl=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{typeof e[t]==`function`&&(e[t]=e[t].bind(e))})},cl=class e extends Ic{constructor(e={},t){if(super(),this.options=al(e),this.services={},this.logger=Fc,this.modules={external:[]},sl(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e==`function`&&(t=e,e={}),e.defaultNS==null&&e.ns&&(fc(e.ns)?e.defaultNS=e.ns:e.ns.indexOf(`translation`)<0&&(e.defaultNS=e.ns[0]));let n=il();this.options={...n,...this.options,...al(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);let r=e=>e?typeof e==`function`?new e:e:null;if(!this.options.isClone){this.modules.logger?Fc.init(r(this.modules.logger),this.options):Fc.init(null,this.options);let e;e=this.modules.formatter?this.modules.formatter:tl;let t=new Gc(this.options);this.store=new Lc(this.options.resources,this.options);let i=this.services;i.logger=Fc,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new Jc(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate(`init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting`),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Zc(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new rl(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on(`*`,(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new Wc(this.services,this.options),this.translator.on(`*`,(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||=ol,this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&e[0]!==`dev`&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn(`init: no languageDetector is used and no lng is defined`),[`getResource`,`hasResourceBundle`,`getResourceBundle`,`getDataByLanguage`].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),[`addResource`,`addResources`,`addResourceBundle`,`removeResourceBundle`].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});let i=pc(),a=()=>{let e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn(`init: i18next is already initialized. You should call init just once!`),this.isInitialized=!0,this.options.isClone||this.logger.log(`initialized`,this.options),this.emit(`initialized`,this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),i}loadResources(e,t=ol){let n=t,r=fc(e)?e:this.language;if(typeof e==`function`&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()===`cimode`&&(!this.options.preload||this.options.preload.length===0))return n();let e=[],t=t=>{t&&t!==`cimode`&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{t!==`cimode`&&e.indexOf(t)<0&&e.push(t)})};r?t(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,n){let r=pc();return typeof e==`function`&&(n=e,e=void 0),typeof t==`function`&&(n=t,t=void 0),e||=this.languages,t||=this.options.ns,n||=ol,this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw Error(`You are passing an undefined module! Please check the object you are passing to i18next.use()`);if(!e.type)throw Error(`You are passing a wrong module! Please check the object you are passing to i18next.use()`);return e.type===`backend`&&(this.modules.backend=e),(e.type===`logger`||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type===`languageDetector`&&(this.modules.languageDetector=e),e.type===`i18nFormat`&&(this.modules.i18nFormat=e),e.type===`postProcessor`&&Rc.addPostProcessor(e),e.type===`formatter`&&(this.modules.formatter=e),e.type===`3rdParty`&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!([`cimode`,`dev`].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){let t=this.languages[e];if(!([`cimode`,`dev`].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;let n=pc();this.emit(`languageChanging`,e);let r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,a)=>{a?this.isLanguageChangingTo===e&&(r(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit(`languageChanged`,a),this.logger.log(`languageChanged`,a)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},a=t=>{!e&&!t&&this.services.languageDetector&&(t=[]);let n=fc(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(fc(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,e=>{i(e,a)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),n}getFixedT(e,t,n){let r=(e,t,...i)=>{let a;a=typeof t==`object`?{...t}:this.options.overloadTranslationOptionHandler([e,t].concat(i)),a.lng=a.lng||r.lng,a.lngs=a.lngs||r.lngs,a.ns=a.ns||r.ns,a.keyPrefix!==``&&(a.keyPrefix=a.keyPrefix||n||r.keyPrefix);let o=this.options.keySeparator||`.`,s;return a.keyPrefix&&Array.isArray(e)?s=e.map(e=>(typeof e==`function`&&(e=Vc(e,{...this.options,...t})),`${a.keyPrefix}${o}${e}`)):(typeof e==`function`&&(e=Vc(e,{...this.options,...t})),s=a.keyPrefix?`${a.keyPrefix}${o}${e}`:e),this.t(s,a)};return fc(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn(`hasLoadedNamespace: i18next was not initialized`,this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn(`hasLoadedNamespace: i18n.languages were undefined or empty`,this.languages),!1;let n=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()===`cimode`)return!0;let a=(e,t)=>{let n=this.services.backendConnector.state[`${e}|${t}`];return n===-1||n===0||n===2};if(t.precheck){let e=t.precheck(this,a);if(e!==void 0)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!r||a(i,e)))}loadNamespaces(e,t){let n=pc();return this.options.ns?(fc(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){let n=pc();fc(e)&&(e=[e]);let r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language),!e)return`rtl`;try{let t=new Intl.Locale(e);if(t&&t.getTextInfo){let e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch{}let t=`ar.shu.sqr.ssh.xaa.yhd.yud.aao.abh.abv.acm.acq.acw.acx.acy.adf.ads.aeb.aec.afb.ajp.apc.apd.arb.arq.ars.ary.arz.auz.avl.ayh.ayl.ayn.ayp.bbz.pga.he.iw.ps.pbt.pbu.pst.prp.prd.ug.ur.ydd.yds.yih.ji.yi.hbo.men.xmn.fa.jpr.peo.pes.prs.dv.sam.ckb`.split(`.`),n=this.services?.languageUtils||new Gc(il());return e.toLowerCase().indexOf(`-latn`)>1?`ltr`:t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf(`-arab`)>1?`rtl`:`ltr`}static createInstance(t={},n){let r=new e(t,n);return r.createInstance=e.createInstance,r}cloneInstance(t={},n=ol){let r=t.forkResourceStore;r&&delete t.forkResourceStore;let i={...this.options,...t,isClone:!0},a=new e(i);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),[`store`,`services`,`language`].forEach(e=>{a[e]=this[e]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r&&(a.store=new Lc(Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]={...e[t][r]},n),e[t]),e),{}),i),a.services.resourceStore=a.store),a.translator=new Wc(a.services,i),a.translator.on(`*`,(e,...t)=>{a.emit(e,...t)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}.createInstance();cl.createInstance,cl.dir,cl.init,cl.loadResources,cl.reloadResources,cl.use,cl.changeLanguage,cl.getFixedT,cl.t,cl.exists,cl.setDefaultNamespace,cl.hasLoadedNamespace,cl.loadNamespaces,cl.loadLanguages;const ll=(e,t,n,r)=>{let i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,`warn`,`react-i18next::`,!0);gl(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)};var ul={};const dl=(e,t,n,r)=>{gl(n)&&ul[n]||(gl(n)&&(ul[n]=new Date),ll(e,t,n,r))};var fl=(e,t)=>()=>{if(e.isInitialized)t();else{let n=()=>{setTimeout(()=>{e.off(`initialized`,n)},0),t()};e.on(`initialized`,n)}};const pl=(e,t,n)=>{e.loadNamespaces(t,fl(e,n))},ml=(e,t,n,r)=>{if(gl(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return pl(e,n,r);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,fl(e,r))},hl=(e,t,n={})=>!t.languages||!t.languages.length?(dl(t,`NO_LANGUAGES`,`i18n.languages were undefined or empty`,{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf(`languageChanging`)>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}),gl=e=>typeof e==`string`,_l=e=>typeof e==`object`&&!!e;var vl=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,yl={"&amp;":`&`,"&#38;":`&`,"&lt;":`<`,"&#60;":`<`,"&gt;":`>`,"&#62;":`>`,"&apos;":`'`,"&#39;":`'`,"&quot;":`"`,"&#34;":`"`,"&nbsp;":` `,"&#160;":` `,"&copy;":`©`,"&#169;":`©`,"&reg;":`®`,"&#174;":`®`,"&hellip;":`…`,"&#8230;":`…`,"&#x2F;":`/`,"&#47;":`/`},bl=e=>yl[e],xl={bindI18n:`languageChanged`,bindI18nStore:``,transEmptyNodeValue:``,transSupportBasicHtmlNodes:!0,transWrapTextNodes:``,transKeepBasicHtmlNodesFor:[`br`,`strong`,`i`,`p`],useSuspense:!0,unescape:e=>e.replace(vl,bl)};const Sl=(e={})=>{xl={...xl,...e}},Cl=()=>xl;var wl;const Tl=e=>{wl=e},El=()=>wl,Dl={type:`3rdParty`,init(e){Sl(e.options.react),Tl(e)}},Ol=(0,H.createContext)();var kl=class{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}},Al=ie(),jl={t:(e,t)=>gl(t)?t:_l(t)&&gl(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,ready:!1},Ml=()=>()=>{};const Nl=(e,t={})=>{let{i18n:n}=t,{i18n:r,defaultNS:i}=(0,H.useContext)(Ol)||{},a=n||r||El();a&&!a.reportNamespaces&&(a.reportNamespaces=new kl),a||dl(a,`NO_I18NEXT_INSTANCE`,`useTranslation: You will need to pass in an i18next instance by using initReactI18next`);let o=(0,H.useMemo)(()=>({...Cl(),...a?.options?.react,...t}),[a,t]),{useSuspense:s,keyPrefix:c}=o,l=(0,H.useMemo)(()=>{let t=e||i||a?.options?.defaultNS;return gl(t)?[t]:t||[`translation`]},[e,i,a]);a?.reportNamespaces?.addUsedNamespaces?.(l);let u=(0,H.useRef)(0),d=(0,H.useCallback)(e=>{if(!a)return Ml;let{bindI18n:t,bindI18nStore:n}=o,r=()=>{u.current+=1,e()};return t&&a.on(t,r),n&&a.store.on(n,r),()=>{t&&t.split(` `).forEach(e=>a.off(e,r)),n&&n.split(` `).forEach(e=>a.store.off(e,r))}},[a,o]),f=(0,H.useRef)(),p=(0,H.useCallback)(()=>{if(!a)return jl;let e=!!(a.isInitialized||a.initializedStoreOnce)&&l.every(e=>hl(e,a,o)),n=t.lng||a.language,r=u.current,i=f.current;if(i&&i.ready===e&&i.lng===n&&i.keyPrefix===c&&i.revision===r)return i;let s={t:a.getFixedT(n,o.nsMode===`fallback`?l:l[0],c),ready:e,lng:n,keyPrefix:c,revision:r};return f.current=s,s},[a,l,c,o,t.lng]),[m,h]=(0,H.useState)(0),{t:g,ready:_}=(0,Al.useSyncExternalStore)(d,p,p);(0,H.useEffect)(()=>{if(a&&!_&&!s){let e=()=>h(e=>e+1);t.lng?ml(a,t.lng,l,e):pl(a,l,e)}},[a,t.lng,l,_,s,m]);let v=a||{},y=(0,H.useRef)(null),b=(0,H.useRef)(),x=e=>{let t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;let n=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(n,`__original`))try{Object.defineProperty(n,`__original`,{value:e,writable:!1,enumerable:!1,configurable:!1})}catch{}return n},S=(0,H.useMemo)(()=>{let e=v,t=e?.language,n=e;e&&(y.current&&y.current.__original===e&&b.current===t?n=y.current:(n=x(e),y.current=n,b.current=t));let r=[g,n,_];return r.t=g,r.i18n=n,r.ready=_,r},[g,v,_,v.resolvedLanguage,v.language,v.languages]);if(a&&s&&!_)throw new Promise(e=>{let n=()=>e();t.lng?ml(a,t.lng,l,n):pl(a,l,n)});return S};var{slice:Pl,forEach:Fl}=[];function Il(e){return Fl.call(Pl.call(arguments,1),t=>{if(t)for(let n in t)e[n]===void 0&&(e[n]=t[n])}),e}function Ll(e){return typeof e==`string`?[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(e)):!1}var Rl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,zl=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:`/`},r=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){let e=n.maxAge-0;if(Number.isNaN(e))throw Error(`maxAge should be a Number`);r+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!Rl.test(n.domain))throw TypeError(`option domain is invalid`);r+=`; Domain=${n.domain}`}if(n.path){if(!Rl.test(n.path))throw TypeError(`option path is invalid`);r+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!=`function`)throw TypeError(`option expires is invalid`);r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+=`; HttpOnly`),n.secure&&(r+=`; Secure`),n.sameSite)switch(typeof n.sameSite==`string`?n.sameSite.toLowerCase():n.sameSite){case!0:r+=`; SameSite=Strict`;break;case`lax`:r+=`; SameSite=Lax`;break;case`strict`:r+=`; SameSite=Strict`;break;case`none`:r+=`; SameSite=None`;break;default:throw TypeError(`option sameSite is invalid`)}return n.partitioned&&(r+=`; Partitioned`),r},Bl={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:`/`,sameSite:`strict`};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=zl(e,t,i)},read(e){let t=`${e}=`,n=document.cookie.split(`;`);for(let e=0;e<n.length;e++){let r=n[e];for(;r.charAt(0)===` `;)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null},remove(e,t){this.create(e,``,-1,t)}},Vl={name:`cookie`,lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<`u`)return Bl.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:a}=t;n&&typeof document<`u`&&Bl.create(n,e,r,i,a)}},Hl={name:`querystring`,lookup(e){let{lookupQuerystring:t}=e,n;if(typeof window<`u`){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf(`?`)>-1&&(e=window.location.hash.substring(window.location.hash.indexOf(`?`)));let r=e.substring(1).split(`&`);for(let e=0;e<r.length;e++){let i=r[e].indexOf(`=`);i>0&&r[e].substring(0,i)===t&&(n=r[e].substring(i+1))}}return n}},Ul={name:`hash`,lookup(e){let{lookupHash:t,lookupFromHashIndex:n}=e,r;if(typeof window<`u`){let{hash:e}=window.location;if(e&&e.length>2){let i=e.substring(1);if(t){let e=i.split(`&`);for(let n=0;n<e.length;n++){let i=e[n].indexOf(`=`);i>0&&e[n].substring(0,i)===t&&(r=e[n].substring(i+1))}}if(r)return r;if(!r&&n>-1){let t=e.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof n==`number`?n:0]?.replace(`/`,``):void 0}}}return r}},Wl=null,Gl=()=>{if(Wl!==null)return Wl;try{if(Wl=typeof window<`u`&&window.localStorage!==null,!Wl)return!1;let e=`i18next.translate.boo`;window.localStorage.setItem(e,`foo`),window.localStorage.removeItem(e)}catch{Wl=!1}return Wl},Kl={name:`localStorage`,lookup(e){let{lookupLocalStorage:t}=e;if(t&&Gl())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Gl()&&window.localStorage.setItem(n,e)}},ql=null,Jl=()=>{if(ql!==null)return ql;try{if(ql=typeof window<`u`&&window.sessionStorage!==null,!ql)return!1;let e=`i18next.translate.boo`;window.sessionStorage.setItem(e,`foo`),window.sessionStorage.removeItem(e)}catch{ql=!1}return ql},Yl={name:`sessionStorage`,lookup(e){let{lookupSessionStorage:t}=e;if(t&&Jl())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Jl()&&window.sessionStorage.setItem(n,e)}},Xl={name:`navigator`,lookup(e){let t=[];if(typeof navigator<`u`){let{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let n=0;n<e.length;n++)t.push(e[n]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},Zl={name:`htmlTag`,lookup(e){let{htmlTag:t}=e,n,r=t||(typeof document<`u`?document.documentElement:null);return r&&typeof r.getAttribute==`function`&&(n=r.getAttribute(`lang`)),n}},Ql={name:`path`,lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>`u`)return;let n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(Array.isArray(n))return n[typeof t==`number`?t:0]?.replace(`/`,``)}},$l={name:`subdomain`,lookup(e){let{lookupFromSubdomainIndex:t}=e,n=typeof t==`number`?t+1:1,r=typeof window<`u`&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},eu=!1;try{document.cookie,eu=!0}catch{}var tu=[`querystring`,`cookie`,`localStorage`,`sessionStorage`,`navigator`,`htmlTag`];eu||tu.splice(1,1);var nu=()=>({order:tu,lookupQuerystring:`lng`,lookupCookie:`i18next`,lookupLocalStorage:`i18nextLng`,lookupSessionStorage:`i18nextLng`,caches:[`localStorage`],excludeCacheFor:[`cimode`],convertDetectedLanguage:e=>e}),ru=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type=`languageDetector`,this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Il(t,this.options||{},nu()),typeof this.options.convertDetectedLanguage==`string`&&this.options.convertDetectedLanguage.indexOf(`15897`)>-1&&(this.options.convertDetectedLanguage=e=>e.replace(`-`,`_`)),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Vl),this.addDetector(Hl),this.addDetector(Kl),this.addDetector(Yl),this.addDetector(Xl),this.addDetector(Zl),this.addDetector(Ql),this.addDetector($l),this.addDetector(Ul)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&typeof n==`string`&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>e!=null&&!Ll(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}};ru.type=`languageDetector`;var iu={zh:{translation:{common:{settings:`设置`,theme:`主题`,language:`语言`,clear:`清空`,confirm:`确认`,cancel:`取消`,success:`成功`,error:`错误`,loading:`加载中...`,save:`保存`,delete:`删除`,edit:`编辑`,add:`添加`,create:`创建`,search:`搜索`,refresh:`刷新`,authorize:`授权`,login:`登录`,file:`文件`,content:`内容`,name:`名称`,description:`描述`,close:`关闭`,ok:`确定`,yes:`是`,no:`否`},settings:{title:`设置`,quickSettings:`快速设置`,theme:`主题`,switchToDarkMode:`切换到暗黑模式`,switchToLightMode:`切换到明亮模式`,localCache:`本地缓存`,clearLocalCache:`清空所有本地数据`,clearCacheTitle:`清空本地缓存`,clearCacheDescription:`是否确定清空本地缓存？`,cacheCleared:`已清空本地缓存`,clearCacheFailed:`清空失败，请稍后重试`,language:`语言`,switchLanguage:`切换语言`,chinese:`中文`,english:`English`},space:{addWorkspace:`添加工作空间`,selectRepository:`选择仓库`,needAuthorization:`需要授权`,goAuthorize:`去授权`,searchRepository:`搜索仓库...`,loading:`加载中`,noRepository:`暂无仓库`,notFound:`未找到`,localStart:`本地开始`,noLoginRequired:`无需登录`,workspaceAdded:`工作空间添加成功`,addFailed:`添加失败，请重试`,localSpaceCreated:`已创建本地空间，可在左侧选择文件开始编辑`,createLocalSpaceFailed:`创建本地空间失败，请重试`,unauthorized:`当前平台 {{platform}} 未授权或授权已过期，请`,clickToAuthorize:`点此授权`,deleteSpace:`删除此空间`,viewInfo:`查看信息`,loginTo:`登录 {{platform}}`,spaceAdded:`成功添加空间`,spaceExists:`空间已存在`,addReadOnlySpace:`添加只读空间`,addReadOnlySpaceDesc:`输入 GitHub/Gitee 仓库链接`,enterRepoUrl:`输入仓库链接...`,invalidRepoUrl:`无效的仓库链接，请检查格式`,readOnlySpaceAdded:`只读空间添加成功`,readOnlySpaceAddFailed:`添加只读空间失败`,readonly:`只读`,guideAddSpaceTitle:`开始使用：添加工作空间`,guideAddSpaceDesc:`点击左侧加号，连接 GitHub / Gitee，并将你的仓库打开为空间。`},file:{saveSuccess:`保存成功`,loadingEditor:`加载编辑器中...`,unsaved:`未保存`,nameExists:`名称已存在`},introduction:{title:`介绍`,welcome:`欢迎使用 Gitary`,subtitle:`用 Git 的方式，管理你的笔记，AI 智能辅助`,gitIntegration:`Git 集成`,gitIntegrationDesc:`直接连接 GitHub/Gitee/GitCode 仓库，将笔记存储在你的代码仓库中`,markdownEditor:`Markdown 编辑`,markdownEditorDesc:`所见即所得的 Markdown 编辑器，支持数学公式和代码高亮`,aiDrawing:`AI 智能画图`,aiDrawingDesc:`用自然语言描述，AI 自动生成 Excalidraw 图表。AI 可以智能创建、分析和编辑图表`,aiAssistant:`全局 AI 助手`,aiAssistantDesc:`智能助手集成工具，可以操作文件、图表和工作区，具备上下文感知能力`,convenientAccess:`便捷访问`,convenientAccessDesc:`随时随地通过浏览器访问你的笔记，无需本地安装`,secure:`安全可控`,secureDesc:`笔记数据完全存储在你的 Git 仓库中，无需担心数据安全`,getStarted:`开始使用`},zenNotes:{createNewNote:`创建新笔记`,confirmCreateNew:`确定要创建新笔记吗？当前笔记将被保存。`,historyNotes:`历史笔记`,placeholder:`记录你的内心感受...`,wordCount:`字数: {{count}}`},mindFlow:{loading:`正在加载思维导图...`,uriRequired:`需要文件 URI`,newFile:`新建思维导图`,status:{idle:`所有更改已保存`,dirty:`存在未保存的更改`,saving:`保存中...`,saved:`已保存`,error:`保存失败`},toolbar:{undo:`撤销 (Ctrl+Z)`,redo:`重做 (Ctrl+Y)`,addChild:`添加子节点 (Tab)`,deleteNode:`删除节点 (Del)`},controls:{zoomIn:`放大`,zoomOut:`缩小`,reset:`重置视图`},instructions:{title:`快捷键`,show:`显示快捷键`,hide:`隐藏快捷键`,select:`选中`,selectAction:`单击`,edit:`编辑`,editAction:`双击 / 空格`,addChild:`添加子节点`,addChildAction:`Tab`,addSibling:`添加兄弟节点`,addSiblingAction:`Enter`,delete:`删除`,deleteAction:`Del / Backspace`,navigate:`导航`,navigateAction:`方向键`,pan:`移动画布`,panAction:`拖拽画布`}},auth:{unsupportedPlatform:`不支持的平台: {{platform}}`,redirecting:`即将跳转`,confirmRedirect:`是否确定跳转到{{platform}}登录页面？`},share:{title:`分享`,linkCopied:`已复制链接到剪贴板`},zenmark:{loading:`加载中...`,loadingEditor:`加载编辑器中...`,fileSaved:`文件保存成功`},tree:{refresh:`刷新`,rename:`重命名`,delete:`删除`,newFile:`文件`,newFolder:`文件夹`,newMarkdown:`Markdown`,copyUri:`复制 URI`,uriCopied:`已复制文件 URI`,download:`下载`,downloadStarted:`开始下载文件...`,downloadFailed:`下载失败`,confirmDeleteFile:`你确定要删除该文件吗？`,deleteFolderHint:`删除文件夹中全部文件后，文件夹会自动删除`,renameFolderNotSupported:`暂不支持重命名文件夹`,notFound:`未找到`,directory:`目录`,openWith:`使用 {{name}} 打开`},apps:{zenNotes:`禅意笔记`,streamingNote:`流式笔记`,mindFlow:`思维导图`,community:`社区`,aiStoryCards:`AI故事卡`,aiResume:`AI简历助手`,aiQuotes:`AI名言`,excalidraw:`Excalidraw 画板`,drawio:`Draw.io 图表`},globalChat:{welcomeTitle:`我能为您做些什么？`,welcomeDesc:`我是你的全局 AI 助手。无论是代码问题、创意写作还是日常闲聊，我都乐意效劳。`,placeholder:`输入消息...`,disclaimer:`AI 可能会出错，请核对重要信息。`,copyContent:`复制内容`,userQuestion:`用户问题`,errorOccurred:`出错了：{{message}}`,errorRetry:`出错了，请稍后再试。`,systemPrompt:`你是一个嵌入在开发者工作空间中的 AI 助手。你的任务是帮助用户解决各种问题，包括代码问题、创意写作和日常交流。

请遵循以下原则：
1. 提供简洁、高质量的回答
2. 使用 Markdown 格式化代码和文本
3. 如果用户的问题与当前上下文相关，请充分利用上下文信息
4. 对于代码问题，提供清晰、可执行的解决方案
5. 保持友好、专业的语调`,contextInfo:`当前上下文信息`,browserViewing:`用户当前在浏览器中查看: {{title}} ({{url}})`,editorEditing:`用户当前正在编辑: {{fileName}} ({{lineCount}} 行)`,projectFile:`当前项目文件: {{file}}`,contextHint:`你可以根据这些上下文信息来更好地理解用户的问题和需求。`,currentBrowserTab:`当前浏览器标签页`,url:`URL`,title:`标题`,selectedText:`选中文本`,currentEditor:`当前编辑器`,file:`文件`,path:`路径`,language:`语言`,lineCount:`行数`,fileContent:`文件内容`,fileContentTruncated:`文件内容已截断，仅显示前 {{shown}} 个字符，共 {{total}} 个字符`,currentProjectFile:`当前项目文件`,recentFiles:`最近打开的文件`},excalidraw:{title:`Excalidraw 画板（支持 AI）`,loading:`正在加载画板...`,enterApiKey:`请输入 OpenAI API 密钥`,promptPlaceholder:`描述图表内容...`,generate:`AI 生成图`,generating:`生成中...`,newFile:`新建 Excalidraw 画板`,error:`错误`,enterPromptError:`请先输入你想要生成的图的描述。`,generateFailed:`生成失败`,generateFailedDesc:`无法生成图形，请检查 API 密钥和网络连接。`,welcomeTitle:`开始你的 AI 绘图之旅`,welcomeDesc:`用自然语言描述你想要的流程图或架构图，AI 会帮你自动生成`,example1:`一个包含前端、后端和数据库的三层 Web 系统`,example2:`用户注册流程：输入信息 → 验证 → 创建账户 → 发送确认邮件`,canvasRequired:`请在 Excalidraw 画布中打开并使用该助手，以便把生成的图形写入当前画布。`,aiAssistant:`AI 绘图助手`,saving:`正在保存...`,edited:`有未保存更改`,saveError:`保存失败`,saved:`已保存`,saveNow:`立即保存`,uriRequired:`需要提供 URI`,generateSuccess:`生成成功`,diagramAdded:`图表已添加到画布`,diagramGenerated:`图表已生成！`,generateError:`生成图表时出错，请重试`,tools:{noCanvas:`当前没有可用的 Excalidraw 画布。请在一个 Excalidraw 文件中打开画布后再重试。`,promptRequired:`prompt 不能为空。`,operationsRequired:`operations 不能为空。`,invalidOperation:`无效的操作对象。`,addNodeLabelRequired:`add_node 操作需要提供 label。`,connectFromToRequired:`connect 操作需要提供 from 和 to。`,connectNodeNotFound:`connect 操作未找到对应的 from/to 节点，请确认节点文本或 ID 是否正确。`,renameTargetLabelRequired:`rename_node 需要提供 target 和 newLabel。`,renameNodeNotFound:`rename_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,renameOnlyTextNode:`rename_node 目前仅支持重命名文本节点，请确保 target 指向文本元素。`,deleteTargetRequired:`delete_node 需要提供 target。`,deleteNodeNotFound:`delete_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,unknownOperationType:`未知的操作类型: {{type}}`,getSummaryDescription:`总结当前 Excalidraw 画布中的主要节点和连接关系，用于理解现有图表结构。返回的是抽象的节点/边信息，而不是完整的 Excalidraw JSON。`,getSummaryMaxNodesDescription:`最多返回多少个节点，默认返回全部。较大的图可以指定一个较小的数以节省 token。`,generateDiagramDescription:`根据自然语言描述生成一张新的 Excalidraw 图表，并写入当前画布。适合从零创建流程图、架构图等。`,generateDiagramPromptDescription:`你想要的图表描述，例如"一个包含前端、后端和数据库的三层 Web 系统架构图"。`,generateDiagramModeDescription:`append=在现有图的基础上追加元素，replace=清空当前画布并只保留新图。`,applyOperationsDescription:`在当前 Excalidraw 图上应用一组语义化的修改操作（例如新增节点、连接箭头、重命名节点或删除节点）。适合对现有图表做小步编辑，而不是整图重生成。`,applyOperationsOperationsDescription:`要应用的操作列表。每个操作都有 op 字段（add_node | connect | rename_node | delete_node），以及对应的参数。`,applyOperationsOpDescription:`操作类型。`,applyOperationsIdDescription:`新增节点时的逻辑 ID，可选。如果提供，将作为该节点文本元素的 id，后续可以通过该 ID 引用。`,applyOperationsLabelDescription:`新增节点时显示的文本内容，例如"Redis 缓存"或"订单服务"。`,applyOperationsKindDescription:`节点类型（如 service/database/cache 等），目前仅用于语义提示，不影响样式。`}},drawio:{title:`Draw.io 图表编辑器`,loading:`正在加载编辑器...`,newFile:`新建 Draw.io 图表`,saving:`正在保存...`,saved:`已保存`,saveError:`保存失败`,edited:`有未保存更改`,saveNow:`立即保存`,uriRequired:`需要提供 URI`,tools:{noCanvas:`当前没有可用的 Draw.io 画布。请在一个 Draw.io 文件中打开画布后再重试。`,emptyCanvas:`当前画布为空，无法进行分析。`,promptRequired:`prompt 不能为空。`,analysisFailed:`分析图表时出错，请重试。`,generateDiagramDescription:`根据自然语言描述生成一张新的 Draw.io 图表，并写入当前画布。适合从零创建流程图、架构图、UML 图等。注意：对于精准操作（如添加特定节点、连接特定节点、重命名、删除等），应该使用 drawio_modify 工具，而不是此工具。重要提示：Draw.io 的更改不会自动保存到文件，需要等待自动保存（约1秒）或提醒用户手动保存。`,generateDiagramPromptDescription:`你想要的图表描述，例如"一个包含前端、后端和数据库的三层 Web 系统架构图"。注意：如果需要精准操作现有图表，请使用 drawio_modify 工具。`,generateDiagramModeDescription:`append=在现有图的基础上追加元素，replace=清空当前画布并只保留新图。注意：对于精准操作，应该使用 drawio_modify 工具。`,analyzeDescription:`分析当前 Draw.io 画布中的主要节点和连接关系，用于理解现有图表结构。返回节点、边的信息和图表摘要。分析后如需精准操作，请使用 drawio_modify 工具。`,applyOperationsDescription:`在当前 Draw.io 图上应用一组语义化的修改操作（例如新增节点、连接箭头、重命名节点或删除节点）。这是进行精准操作的首选工具，适合对现有图表做小步编辑，而不是整图重生成。比 drawio_generate_diagram 更快、更精确。重要提示：Draw.io 的更改不会自动保存到文件，需要等待自动保存（约1秒）或提醒用户手动保存。`,applyOperationsOperationsDescription:`要应用的操作列表。每个操作都有 op 字段（add_node | connect | rename_node | delete_node），以及对应的参数。`,applyOperationsOpDescription:`操作类型：add_node（添加节点）、connect（连接节点）、rename_node（重命名节点）、delete_node（删除节点）。`,applyOperationsIdDescription:`新增节点时的逻辑 ID，可选。如果提供，将作为该节点的 id，后续可以通过该 ID 引用。`,applyOperationsLabelDescription:`新增节点时显示的文本内容，例如"Redis 缓存"或"订单服务"。`,applyOperationsKindDescription:`节点类型（如 service/database/cache 等），目前仅用于语义提示，影响样式。`,applyOperationsNearDescription:`新增节点时的相对参考节点，可以是节点 ID 或节点文本。新节点将放置在该节点附近。`,applyOperationsFromDescription:`连接操作的起始节点，可以是节点 ID 或节点文本。`,applyOperationsToDescription:`连接操作的终止节点，可以是节点 ID 或节点文本。`,applyOperationsTargetDescription:`重命名/删除操作的目标节点（ID 或文本）。`,applyOperationsNewLabelDescription:`重命名操作的新文本标签。`,operationsRequired:`operations 不能为空。`,invalidOperation:`无效的操作对象。`,addNodeLabelRequired:`add_node 操作需要提供 label。`,connectFromToRequired:`connect 操作需要提供 from 和 to。`,connectNodeNotFound:`connect 操作未找到对应的 from/to 节点，请确认节点文本或 ID 是否正确。`,renameTargetLabelRequired:`rename_node 需要提供 target 和 newLabel。`,renameNodeNotFound:`rename_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,deleteTargetRequired:`delete_node 需要提供 target。`,unknownOperationType:`未知的操作类型: {{type}}`,applyOperationsFailed:`应用操作时出错，请重试。`,nodeWithoutLabel:`[节点 {{id}}]`,analysisSummary:`图表包含 {{nodeCount}} 个节点和 {{edgeCount}} 条连接线。`,aiResponseEmpty:`AI 返回的内容为空`,aiResponseInvalidFormat:`AI 返回的内容格式不正确`,aiResponseInvalidXml:`AI 返回的内容不是有效的 Draw.io XML 格式`,generateError:`生成图表时出错，请重试`}},tabs:{loading:`加载中`,unsaved:`未保存`,closeRight:`关闭右侧标签页`,closeLeft:`关闭左侧标签页`,closeOthers:`关闭其它标签页`,closeAll:`关闭所有标签页`},story:{loadDataFailed:`加载数据失败`,loadDataFailedDesc:`无法加载保存的数据，请检查您的存储设置。`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`,enterContent:`请输入内容`,generateFailed:`生成失败`,generateFailedDesc:`无法生成AI回应，请检查您的API密钥和网络连接。`,selectDirection:`请选择一个方向`},community:{loadFailed:`加载失败`,loadFailedDesc:`无法加载社区数据`,error:`错误`,enterContent:`请输入内容`,user:`用户`,publishSuccess:`发布成功`,publishSuccessDesc:`帖子已发布到社区`,publishNewPost:`发布新帖子`,shareYourThoughts:`分享你的想法...`,writeSomething:`写点什么...`,publish:`发布`},resume:{loadFailed:`加载失败`,loadFailedDesc:`无法加载保存的数据`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`,enterContent:`请输入内容`},quotes:{loadFailed:`加载失败`,loadFailedDesc:`无法加载保存的数据`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`},thoughts:{placeholder:`记录你的想法...`,confirmDelete:`确定要删除这条记录吗？`,delete:`删除`,noRecords:`还没有任何记录`,startWriting:`开始写下你的第一个想法吧...`},meta:{title:`Gitary - Notion-like editing + Excalidraw drawing for your Git repositories | 类 Notion 编辑 + Excalidraw 画图，运行在你的 Git 仓库上`,description:`Gitary 将 Notion 风格的强大编辑体验和 Excalidraw 画图能力带到你的 Git 仓库中。支持 GitHub/Gitee/GitCode，零中间存储，完全的数据所有权。类 Notion 编辑 + Excalidraw 画图 + Git 的数据控制 = 完美的知识管理方案。`,keywords:`Notion-like,Notion替代品,Notion风格,Git笔记,GitHub笔记,Gitee笔记,GitCode笔记,Markdown编辑器,知识管理,版本控制,开源笔记,数据所有权,Git知识库`},search:{placeholder:`搜索文件或内容…`,selectSpaceFirst:`先选择空间`,searching:`搜索中…`,results:`个结果`,noSpace:`请先选择一个空间`,noQuery:`输入关键词搜索文件或内容`,noQueryDesc:`支持文件名和内容搜索`,noResults:`未找到匹配结果`,noResultsDesc:`尝试使用其他关键词或重建索引`,reindex:`重建索引`,indexing:`正在索引`,indexStale:`索引可能已过期，点击接受当前基线`,indexNormal:`索引状态正常`,navigation:`导航`,open:`打开`,close:`关闭`,openSearch:`打开搜索`,openFile:`打开 {{path}}`,noFocusedSpaceToIndex:`没有聚焦的空间可索引`,noFocusedSpaceToSearch:`没有聚焦的空间可搜索`,indexedSuccess:`已索引 {{indexed}}，已移除 {{removed}}`,foundHits:`找到 {{total}} 个匹配 '{{query}}' 的结果`},browserExtension:{name:`浏览器插件`,title:`Gitary Companion`,description:`浏览器扩展插件，让您可以在 GitHub、Gitee、GitCode 仓库页面一键跳转到 Gitary`},toolInvocation:{error:`错误`,expand:`展开工具详情`,collapse:`收起工具详情`}}},en:{translation:{common:{settings:`Settings`,theme:`Theme`,language:`Language`,clear:`Clear`,confirm:`Confirm`,cancel:`Cancel`,success:`Success`,error:`Error`,loading:`Loading...`,save:`Save`,delete:`Delete`,edit:`Edit`,add:`Add`,create:`Create`,search:`Search`,refresh:`Refresh`,authorize:`Authorize`,login:`Login`,file:`File`,content:`Content`,name:`Name`,description:`Description`,close:`Close`,ok:`OK`,yes:`Yes`,no:`No`},settings:{title:`Settings`,quickSettings:`Quick Settings`,theme:`Theme`,switchToDarkMode:`Switch to Dark Mode`,switchToLightMode:`Switch to Light Mode`,localCache:`Local Cache`,clearLocalCache:`Clear all local data`,clearCacheTitle:`Clear Local Cache`,clearCacheDescription:`Are you sure you want to clear the local cache?`,cacheCleared:`Local cache cleared`,clearCacheFailed:`Failed to clear cache, please try again later`,language:`Language`,switchLanguage:`Switch Language`,chinese:`中文`,english:`English`},space:{addWorkspace:`Add Workspace`,selectRepository:`Select Repository`,needAuthorization:`Authorization Required`,goAuthorize:`Authorize`,searchRepository:`Search repository...`,loading:`Loading`,noRepository:`No repositories`,notFound:`Not found`,localStart:`Start Local`,noLoginRequired:`No login required`,workspaceAdded:`Workspace added successfully`,addFailed:`Failed to add, please try again`,localSpaceCreated:`Local space created, you can select files on the left to start editing`,createLocalSpaceFailed:`Failed to create local space, please try again`,unauthorized:`Platform {{platform}} is not authorized or authorization has expired, please`,clickToAuthorize:`click here to authorize`,deleteSpace:`Delete this space`,viewInfo:`View Info`,loginTo:`Login to {{platform}}`,spaceAdded:`Space added successfully`,spaceExists:`Space already exists`,addReadOnlySpace:`Add Read-Only Space`,addReadOnlySpaceDesc:`Enter GitHub/Gitee repository URL`,enterRepoUrl:`Enter repository URL...`,invalidRepoUrl:`Invalid repository URL, please check the format`,readOnlySpaceAdded:`Read-only space added successfully`,readOnlySpaceAddFailed:`Failed to add read-only space`,readonly:`Read-Only`,guideAddSpaceTitle:`Get Started: Add a Workspace`,guideAddSpaceDesc:`Click the plus icon on the left to connect GitHub / Gitee and open your repository as a space.`},file:{saveSuccess:`Save successful`,loadingEditor:`Loading editor...`,unsaved:`Unsaved`,nameExists:`Name already exists`},introduction:{title:`Introduction`,welcome:`Welcome to Gitary`,subtitle:`Manage your notes the Git way with AI assistance`,gitIntegration:`Git Integration`,gitIntegrationDesc:`Connect directly to GitHub/Gitee/GitCode repositories and store your notes in your code repository`,markdownEditor:`Markdown Editor`,markdownEditorDesc:`WYSIWYG Markdown editor with support for math formulas and code highlighting`,aiDrawing:`AI-Powered Drawing`,aiDrawingDesc:`Generate Excalidraw diagrams from natural language descriptions. AI can create, analyze, and edit diagrams intelligently`,aiAssistant:`Global AI Assistant`,aiAssistantDesc:`Intelligent assistant with tool integration. Can operate files, diagrams, and workspace with context awareness`,convenientAccess:`Convenient Access`,convenientAccessDesc:`Access your notes from anywhere via browser, no local installation required`,secure:`Secure & Controllable`,secureDesc:`Your notes are completely stored in your Git repository, no need to worry about data security`,getStarted:`Get Started`},zenNotes:{createNewNote:`Create New Note`,confirmCreateNew:`Are you sure you want to create a new note? The current note will be saved.`,historyNotes:`History Notes`,placeholder:`Record your inner feelings...`,wordCount:`Word count: {{count}}`},mindFlow:{loading:`Loading mind map...`,uriRequired:`File URI is required`,newFile:`New mind map`,status:{idle:`All changes saved`,dirty:`Unsaved changes`,saving:`Saving...`,saved:`Saved`,error:`Save failed`},toolbar:{undo:`Undo (Ctrl+Z)`,redo:`Redo (Ctrl+Y)`,addChild:`Add child (Tab)`,deleteNode:`Delete node (Del)`},controls:{zoomIn:`Zoom in`,zoomOut:`Zoom out`,reset:`Reset view`},instructions:{title:`Shortcuts`,show:`Show shortcuts`,hide:`Hide shortcuts`,select:`Select`,selectAction:`Click`,edit:`Edit`,editAction:`Double click / Space`,addChild:`Add child`,addChildAction:`Tab`,addSibling:`Add sibling`,addSiblingAction:`Enter`,delete:`Delete`,deleteAction:`Del / Backspace`,navigate:`Navigate`,navigateAction:`Arrow keys`,pan:`Pan`,panAction:`Drag canvas`}},auth:{unsupportedPlatform:`Unsupported platform: {{platform}}`,redirecting:`Redirecting`,confirmRedirect:`Are you sure you want to redirect to {{platform}} login page?`},share:{title:`Share`,linkCopied:`Link copied to clipboard`},zenmark:{loading:`Loading...`,loadingEditor:`Loading editor...`,fileSaved:`File saved successfully`},tree:{refresh:`Refresh`,rename:`Rename`,delete:`Delete`,newFile:`File`,newFolder:`Folder`,newMarkdown:`Markdown`,copyUri:`Copy URI`,uriCopied:`File URI copied`,download:`Download`,downloadStarted:`Downloading file...`,downloadFailed:`Download failed`,confirmDeleteFile:`Are you sure you want to delete this file?`,deleteFolderHint:`After deleting all files in the folder, the folder will be automatically deleted`,renameFolderNotSupported:`Renaming folders is not currently supported`,notFound:`Not found`,directory:`Directory`,openWith:`Open with {{name}}`},apps:{zenNotes:`Zen Notes`,streamingNote:`Streaming Note`,mindFlow:`Mind Map`,community:`Community`,aiStoryCards:`AI Story Cards`,aiResume:`AI Resume Assistant`,aiQuotes:`AI Quotes`,excalidraw:`Excalidraw Canvas`,drawio:`Draw.io Diagram`},globalChat:{welcomeTitle:`How can I help you today?`,welcomeDesc:`I'm your global AI assistant. Whether it's coding questions, creative writing, or casual chat, I'm here to help.`,placeholder:`Type a message...`,disclaimer:`AI can make mistakes. Check important info.`,copyContent:`Copy content`,userQuestion:`User Question`,errorOccurred:`Error: {{message}}`,errorRetry:`An error occurred, please try again later.`,systemPrompt:`You are a helpful AI assistant embedded inside a developer workspace. Your task is to help users solve various problems, including coding questions, creative writing, and daily communication.

Please follow these principles:
1. Provide concise, high-quality answers
2. Use Markdown to format code and text
3. If the user's question is related to the current context, make full use of the context information
4. For coding questions, provide clear, executable solutions
5. Maintain a friendly and professional tone`,contextInfo:`Current Context Information`,browserViewing:`User is currently viewing in browser: {{title}} ({{url}})`,editorEditing:`User is currently editing: {{fileName}} ({{lineCount}} lines)`,projectFile:`Current project file: {{file}}`,contextHint:`You can use this context information to better understand the user's questions and needs.`,currentBrowserTab:`Current Browser Tab`,url:`URL`,title:`Title`,selectedText:`Selected Text`,currentEditor:`Current Editor`,file:`File`,path:`Path`,language:`Language`,lineCount:`Line Count`,fileContent:`File Content`,fileContentTruncated:`File content truncated, showing first {{shown}} characters of {{total}} total`,currentProjectFile:`Current Project File`,recentFiles:`Recently Opened Files`},excalidraw:{title:`Excalidraw Canvas (with AI)`,loading:`Loading Excalidraw canvas...`,enterApiKey:`Please enter OpenAI API key`,promptPlaceholder:`Describe diagram content...`,generate:`Generate with AI`,generating:`Generating...`,newFile:`New Excalidraw canvas`,error:`Error`,enterPromptError:`Please enter a description for the diagram first.`,generateFailed:`Generation failed`,generateFailedDesc:`Unable to generate diagram, please check API key and network connection.`,welcomeTitle:`Start Your AI Drawing Journey`,welcomeDesc:`Describe the flowchart or architecture diagram you want in natural language, and AI will generate it for you`,example1:`A three-tier web system with frontend, backend, and database`,example2:`User registration flow: input info → validate → create account → send confirmation email`,canvasRequired:`Please open this assistant in the Excalidraw canvas to write generated diagrams to the current canvas.`,aiAssistant:`AI Drawing Assistant`,saving:`Saving...`,edited:`Unsaved changes`,saveError:`Save failed`,saved:`Saved`,saveNow:`Save now`,uriRequired:`URI is required`,generateSuccess:`Generation successful`,diagramAdded:`Diagram added to canvas`,diagramGenerated:`Diagram generated!`,generateError:`Error generating diagram, please try again`,tools:{noCanvas:`No Excalidraw canvas available. Please open a canvas in an Excalidraw file and try again.`,promptRequired:`Prompt cannot be empty.`,operationsRequired:`Operations cannot be empty.`,invalidOperation:`Invalid operation object.`,addNodeLabelRequired:`add_node operation requires label.`,connectFromToRequired:`connect operation requires from and to.`,connectNodeNotFound:`connect operation did not find corresponding from/to nodes, please confirm the node text or ID is correct.`,renameTargetLabelRequired:`rename_node requires target and newLabel.`,renameNodeNotFound:`rename_node did not find target node, please confirm target is correct node text or ID.`,renameOnlyTextNode:`rename_node currently only supports renaming text nodes, please ensure target points to a text element.`,deleteTargetRequired:`delete_node requires target.`,deleteNodeNotFound:`delete_node did not find target node, please confirm target is correct node text or ID.`,unknownOperationType:`Unknown operation type: {{type}}`,getSummaryDescription:`Summarize the main nodes and connections in the current Excalidraw canvas to understand the existing diagram structure. Returns abstract node/edge information, not the complete Excalidraw JSON.`,getSummaryMaxNodesDescription:`Maximum number of nodes to return, defaults to all. For larger diagrams, you can specify a smaller number to save tokens.`,generateDiagramDescription:`Generate a new Excalidraw diagram based on natural language description and write it to the current canvas. Suitable for creating flowcharts, architecture diagrams, etc. from scratch.`,generateDiagramPromptDescription:`The diagram description you want, for example "a three-tier web system architecture diagram with frontend, backend, and database".`,generateDiagramModeDescription:`append=add elements on top of existing diagram, replace=clear current canvas and keep only the new diagram.`,applyOperationsDescription:`Apply a set of semantic modification operations (such as adding nodes, connecting arrows, renaming nodes, or deleting nodes) to the current Excalidraw diagram. Suitable for small-step editing of existing diagrams, rather than regenerating the entire diagram.`,applyOperationsOperationsDescription:`List of operations to apply. Each operation has an op field (add_node | connect | rename_node | delete_node) and corresponding parameters.`,applyOperationsOpDescription:`Operation type.`,applyOperationsIdDescription:`Logical ID when adding a node, optional. If provided, it will be used as the id of the node's text element, and can be referenced later by this ID.`,applyOperationsLabelDescription:`Text content displayed when adding a node, for example "Redis Cache" or "Order Service".`,applyOperationsKindDescription:`Node type (such as service/database/cache, etc.), currently only used for semantic hints and does not affect styling.`,applyOperationsNearDescription:`Relative reference node when adding a node, can be a node ID or node text. The new node will be placed near this node.`,applyOperationsFromDescription:`Starting node in connect operation, can be a node ID or node text.`,applyOperationsToDescription:`Terminating node in connect operation, can be a node ID or node text.`,applyOperationsTargetDescription:`Target node (ID or text) for rename_node/delete_node operations.`,applyOperationsNewLabelDescription:`New text label for rename_node operation.`,createDiagramDescription:`Directly create Excalidraw diagram elements. The main Agent can generate an element array and add it to the canvas.`,createDiagramElementsDescription:`Excalidraw element array. Each element only needs to include core fields (type, x, y, width, height, etc.), and the system will automatically supplement other required fields.`,createDiagramModeDescription:`Add mode: append (append to existing elements) or replace (replace all elements).`,appendDiagramDescription:`Append Excalidraw diagram elements to the canvas. Only appends, does not replace existing elements.`,appendDiagramElementsDescription:`Excalidraw element array. Each element only needs to include core fields (type, x, y, width, height, etc.), and the system will automatically supplement other required fields.`,aiAppendDiagramDescription:`Generate and append Excalidraw diagram elements to the canvas via AI. Only appends, does not replace existing elements.`,aiAppendDiagramPromptDescription:`Description of the diagram content to generate.`,elementsRequired:`elements parameter must be an array containing at least one element.`}},drawio:{title:`Draw.io Diagram Editor`,loading:`Loading editor...`,newFile:`New Draw.io diagram`,saving:`Saving...`,saved:`Saved`,saveError:`Save failed`,edited:`Unsaved changes`,saveNow:`Save now`,uriRequired:`URI is required`,tools:{noCanvas:`No Draw.io canvas is currently available. Please open a Draw.io file with a canvas and try again.`,emptyCanvas:`The current canvas is empty and cannot be analyzed.`,promptRequired:`prompt cannot be empty.`,analysisFailed:`Error analyzing diagram, please try again.`,generateDiagramDescription:`Generate a new Draw.io diagram based on natural language description and write it to the current canvas. Suitable for creating flowcharts, architecture diagrams, UML diagrams, etc. from scratch. Note: For precise operations (such as adding specific nodes, connecting specific nodes, renaming, deleting, etc.), use drawio_modify tool instead of this tool. Important: Draw.io changes are not automatically saved to file, need to wait for auto-save (about 1 second) or remind user to save manually.`,generateDiagramPromptDescription:`Description of the diagram you want, for example "a three-tier Web system architecture diagram with frontend, backend, and database". Note: If you need precise operations on existing diagrams, use drawio_modify tool.`,generateDiagramModeDescription:`append=append elements to the existing diagram, replace=clear the current canvas and keep only the new diagram. Note: For precise operations, use drawio_modify tool.`,analyzeDescription:`Analyze the main nodes and connection relationships in the current Draw.io canvas to understand the existing diagram structure. Returns node, edge information and diagram summary. After analysis, use drawio_modify tool for precise operations.`,applyOperationsDescription:`Apply a set of semantic modification operations to the current Draw.io diagram (e.g., add node, connect arrow, rename node, or delete node). This is the preferred tool for precise operations, suitable for small-step editing of existing diagrams rather than regenerating the entire diagram. Faster and more precise than drawio_generate_diagram. Important: Draw.io changes are not automatically saved to file, need to wait for auto-save (about 1 second) or remind user to save manually.`,applyOperationsOperationsDescription:`List of operations to apply. Each operation has an op field (add_node | connect | rename_node | delete_node) and corresponding parameters.`,applyOperationsOpDescription:`Operation type: add_node (add node), connect (connect nodes), rename_node (rename node), delete_node (delete node).`,applyOperationsIdDescription:`Logical ID when adding a node, optional. If provided, it will be used as the id of the node, and can be referenced later by this ID.`,applyOperationsLabelDescription:`Text content displayed when adding a node, for example "Redis Cache" or "Order Service".`,applyOperationsKindDescription:`Node type (such as service/database/cache, etc.), currently used for semantic hints and affects styling.`,applyOperationsNearDescription:`Relative reference node when adding a node, can be a node ID or node text. The new node will be placed near this node.`,applyOperationsFromDescription:`Starting node in connect operation, can be a node ID or node text.`,applyOperationsToDescription:`Terminating node in connect operation, can be a node ID or node text.`,applyOperationsTargetDescription:`Target node (ID or text) for rename_node/delete_node operations.`,applyOperationsNewLabelDescription:`New text label for rename_node operation.`,operationsRequired:`operations cannot be empty.`,invalidOperation:`Invalid operation object.`,addNodeLabelRequired:`add_node operation requires a label.`,connectFromToRequired:`connect operation requires from and to.`,connectNodeNotFound:`connect operation did not find the corresponding from/to node, please confirm that the node text or ID is correct.`,renameTargetLabelRequired:`rename_node requires target and newLabel.`,renameNodeNotFound:`rename_node did not find the target node, please confirm that target is the correct node text or ID.`,deleteTargetRequired:`delete_node requires a target.`,unknownOperationType:`Unknown operation type: {{type}}`,applyOperationsFailed:`Error applying operations, please try again.`,nodeWithoutLabel:`[Node {{id}}]`,analysisSummary:`Diagram contains {{nodeCount}} nodes and {{edgeCount}} edges.`,aiResponseEmpty:`AI returned empty content`,aiResponseInvalidFormat:`AI returned content in invalid format`,aiResponseInvalidXml:`AI returned content is not valid Draw.io XML format`,generateError:`Error generating diagram, please try again`}},tabs:{loading:`Loading`,unsaved:`Unsaved`,closeRight:`Close tabs to the right`,closeLeft:`Close tabs to the left`,closeOthers:`Close other tabs`,closeAll:`Close all tabs`},story:{loadDataFailed:`Failed to Load Data`,loadDataFailedDesc:`Unable to load saved data, please check your storage settings.`,error:`Error`,enterApiKey:`Please enter OpenAI API key`,enterContent:`Please enter content`,generateFailed:`Generation Failed`,generateFailedDesc:`Unable to generate AI response, please check your API key and network connection.`,selectDirection:`Please select a direction`},community:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load community data`,error:`Error`,enterContent:`Please enter content`,user:`User`,publishSuccess:`Published Successfully`,publishSuccessDesc:`Post has been published to the community`,publishNewPost:`Publish New Post`,shareYourThoughts:`Share your thoughts...`,writeSomething:`Write something...`,publish:`Publish`},resume:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load saved data`,error:`Error`,enterApiKey:`Please enter OpenAI API key`,enterContent:`Please enter content`},quotes:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load saved data`,error:`Error`,enterApiKey:`Please enter OpenAI API key`},thoughts:{placeholder:`Record your thoughts...`,confirmDelete:`Are you sure you want to delete this record?`,delete:`Delete`,noRecords:`No records yet`,startWriting:`Start writing your first thought...`},meta:{title:`Gitary - Notion-like editing + Excalidraw drawing for your Git repositories`,description:`Bring Notion-style powerful editing experience and Excalidraw drawing capabilities to your Git repositories. Support GitHub, Gitee, GitCode. Zero intermediate storage, complete data ownership. Notion-like editing + Excalidraw drawing + Git's data control = perfect knowledge management.`,keywords:`Notion-like,Notion alternative,Notion-style,Git notes,GitHub notes,Gitee notes,GitCode notes,Markdown editor,knowledge management,version control,open source notes,data ownership,Git knowledge base`},search:{placeholder:`Search files or content…`,selectSpaceFirst:`Select a space first`,searching:`Searching…`,results:`results`,noSpace:`Please select a space first`,noQuery:`Enter keywords to search files or content`,noQueryDesc:`Supports filename and content search`,noResults:`No matching results found`,noResultsDesc:`Try using different keywords or rebuild index`,reindex:`Rebuild Index`,indexing:`Indexing`,indexStale:`Index may be outdated, click to accept current baseline`,indexNormal:`Index status normal`,navigation:`Navigate`,open:`Open`,close:`Close`,openSearch:`Open Search`,openFile:`Open {{path}}`,noFocusedSpaceToIndex:`No focused space to index`,noFocusedSpaceToSearch:`No focused space to search`,indexedSuccess:`Indexed {{indexed}}, removed {{removed}}`,foundHits:`Found {{total}} hits for '{{query}}'`},browserExtension:{name:`Browser Extension`,title:`Gitary Companion`,description:`Browser extension that lets you jump to Gitary from GitHub, Gitee, and GitCode repository pages with one click`},toolInvocation:{error:`Error`,expand:`Expand tool details`,collapse:`Collapse tool details`}}}},au={zh:`zh-CN`,en:`en`},ou={ogTitle:`meta[property="og:title"]`,ogDescription:`meta[property="og:description"]`,description:`meta[name="description"]`,keywords:`meta[name="keywords"]`,twitterTitle:`meta[name="twitter:title"]`,twitterDescription:`meta[name="twitter:description"]`},su=e=>{let t=au[e]||au.zh;document.documentElement.setAttribute(`lang`,t)},cu=(e,t)=>{let n=document.querySelector(e);n&&n.setAttribute(`content`,t)},lu=e=>{let t=t=>{let n=t.split(`.`),r=iu[e]?.translation;if(!r)return t;let i=r;for(let e of n)if(typeof i==`object`&&i&&e in i)i=i[e];else return t;return typeof i==`string`?i:t},n=t(`meta.title`),r=t(`meta.description`),i=t(`meta.keywords`);document.title=n,cu(ou.ogTitle,n),cu(ou.ogDescription,r),cu(ou.description,r),cu(ou.twitterTitle,n),cu(ou.twitterDescription,r),cu(ou.keywords,i)};cl.use(ru).use(Dl).init({resources:iu,fallbackLng:`zh`,supportedLngs:[`zh`,`en`],defaultNS:`translation`,interpolation:{escapeValue:!1},detection:{order:[`localStorage`,`navigator`],caches:[`localStorage`],lookupLocalStorage:`i18nextLng`},react:{useSuspense:!1}}).then(()=>{let e=cl.language||`zh`;su(e),lu(e)}),cl.on(`languageChanged`,e=>{su(e),lu(e),window.location.reload()});var uu=cl;function K(e,t){return uu.t(e,t)}var du=e=>typeof e==`boolean`?`${e}`:e===0?`0`:e;const fu=$e,pu=(e,t)=>n=>{if(t?.variants==null)return fu(e,n?.class,n?.className);let{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(e=>{let t=n?.[e],a=i?.[e];if(t===null)return null;let o=du(t)||du(a);return r[e][o]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return r===void 0||(e[n]=r),e},{});return fu(e,a,t?.compoundVariants?.reduce((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...o}[t]):{...i,...o}[t]===n})?[...e,n,r]:e},[]),n?.class,n?.className)};function q(...e){return st($e(e))}var mu=pu(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-destructive-foreground hover:bg-destructive/90`,outline:`border border-input bg-background hover:bg-accent hover:text-accent-foreground`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-10 px-4 py-2`,sm:`h-9 rounded-md px-3`,lg:`h-11 rounded-md px-8`,icon:`h-10 w-10`}},defaultVariants:{variant:`default`,size:`default`}}),hu=H.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>(0,U.jsx)(r?it:`button`,{className:q(mu({variant:t,size:n,className:e})),ref:a,...i}));hu.displayName=`Button`;var gu=0;function _u(){H.useEffect(()=>{let e=document.querySelectorAll(`[data-radix-focus-guard]`);return document.body.insertAdjacentElement(`afterbegin`,e[0]??vu()),document.body.insertAdjacentElement(`beforeend`,e[1]??vu()),gu++,()=>{gu===1&&document.querySelectorAll(`[data-radix-focus-guard]`).forEach(e=>e.remove()),gu--}},[])}function vu(){let e=document.createElement(`span`);return e.setAttribute(`data-radix-focus-guard`,``),e.tabIndex=0,e.style.outline=`none`,e.style.opacity=`0`,e.style.position=`fixed`,e.style.pointerEvents=`none`,e}var yu=`focusScope.autoFocusOnMount`,bu=`focusScope.autoFocusOnUnmount`,xu={bubbles:!1,cancelable:!0},Su=`FocusScope`,Cu=H.forwardRef((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[s,c]=H.useState(null),l=ot(i),u=ot(a),d=H.useRef(null),f=Ye(t,e=>c(e)),p=H.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;H.useEffect(()=>{if(r){let e=function(e){if(p.paused||!s)return;let t=e.target;s.contains(t)?d.current=t:Au(d.current,{select:!0})},t=function(e){if(p.paused||!s)return;let t=e.relatedTarget;t!==null&&(s.contains(t)||Au(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&Au(s)};document.addEventListener(`focusin`,e),document.addEventListener(`focusout`,t);let r=new MutationObserver(n);return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener(`focusin`,e),document.removeEventListener(`focusout`,t),r.disconnect()}}},[r,s,p.paused]),H.useEffect(()=>{if(s){ju.add(p);let e=document.activeElement;if(!s.contains(e)){let t=new CustomEvent(yu,xu);s.addEventListener(yu,l),s.dispatchEvent(t),t.defaultPrevented||(wu(Pu(Eu(s)),{select:!0}),document.activeElement===e&&Au(s))}return()=>{s.removeEventListener(yu,l),setTimeout(()=>{let t=new CustomEvent(bu,xu);s.addEventListener(bu,u),s.dispatchEvent(t),t.defaultPrevented||Au(e??document.body,{select:!0}),s.removeEventListener(bu,u),ju.remove(p)},0)}}},[s,l,u,p]);let m=H.useCallback(e=>{if(!n&&!r||p.paused)return;let t=e.key===`Tab`&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[r,a]=Tu(t);r&&a?!e.shiftKey&&i===a?(e.preventDefault(),n&&Au(r,{select:!0})):e.shiftKey&&i===r&&(e.preventDefault(),n&&Au(a,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return(0,U.jsx)(V.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});Cu.displayName=Su;function wu(e,{select:t=!1}={}){let n=document.activeElement;for(let r of e)if(Au(r,{select:t}),document.activeElement!==n)return}function Tu(e){let t=Eu(e);return[Du(t,e),Du(t.reverse(),e)]}function Eu(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t=e.tagName===`INPUT`&&e.type===`hidden`;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Du(e,t){for(let n of e)if(!Ou(n,{upTo:t}))return n}function Ou(e,{upTo:t}){if(getComputedStyle(e).visibility===`hidden`)return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display===`none`)return!0;e=e.parentElement}return!1}function ku(e){return e instanceof HTMLInputElement&&`select`in e}function Au(e,{select:t=!1}={}){if(e&&e.focus){let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ku(e)&&t&&e.select()}}var ju=Mu();function Mu(){let e=[];return{add(t){let n=e[0];t!==n&&n?.pause(),e=Nu(e,t),e.unshift(t)},remove(t){e=Nu(e,t),e[0]?.resume()}}}function Nu(e,t){let n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Pu(e){return e.filter(e=>e.tagName!==`A`)}var Fu=`Popover`,[Iu,Lu]=at(Fu,[ut]),Ru=ut(),[zu,Bu]=Iu(Fu),Vu=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,s=Ru(t),c=H.useRef(null),[l,u]=H.useState(!1),[d,f]=wt({prop:r,defaultProp:i??!1,onChange:a,caller:Fu});return(0,U.jsx)(Nt,{...s,children:(0,U.jsx)(zu,{scope:t,contentId:Xe(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:H.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:l,onCustomAnchorAdd:H.useCallback(()=>u(!0),[]),onCustomAnchorRemove:H.useCallback(()=>u(!1),[]),modal:o,children:n})})};Vu.displayName=Fu;var Hu=`PopoverAnchor`,Uu=H.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Bu(Hu,n),a=Ru(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return H.useEffect(()=>(o(),()=>s()),[o,s]),(0,U.jsx)(jt,{...a,...r,ref:t})});Uu.displayName=Hu;var Wu=`PopoverTrigger`,Gu=H.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Bu(Wu,n),a=Ru(n),o=Ye(t,i.triggerRef),s=(0,U.jsx)(V.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":od(i.open),...r,ref:o,onClick:B(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:(0,U.jsx)(jt,{asChild:!0,...a,children:s})});Gu.displayName=Wu;var Ku=`PopoverPortal`,[qu,Ju]=Iu(Ku,{forceMount:void 0}),Yu=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=Bu(Ku,t);return(0,U.jsx)(qu,{scope:t,forceMount:n,children:(0,U.jsx)(Ct,{present:n||a.open,children:(0,U.jsx)(vt,{asChild:!0,container:i,children:r})})})};Yu.displayName=Ku;var Xu=`PopoverContent`,Zu=H.forwardRef((e,t)=>{let n=Ju(Xu,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=Bu(Xu,e.__scopePopover);return(0,U.jsx)(Ct,{present:r||a.open,children:a.modal?(0,U.jsx)($u,{...i,ref:t}):(0,U.jsx)(ed,{...i,ref:t})})});Zu.displayName=Xu;var Qu=lt(`PopoverContent.RemoveScroll`),$u=H.forwardRef((e,t)=>{let n=Bu(Xu,e.__scopePopover),r=H.useRef(null),i=Ye(t,r),a=H.useRef(!1);return H.useEffect(()=>{let e=r.current;if(e)return re(e)},[]),(0,U.jsx)(te,{as:Qu,allowPinchZoom:!0,children:(0,U.jsx)(td,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:B(e.onCloseAutoFocus,e=>{e.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:B(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0;a.current=t.button===2||n},{checkForDefaultPrevented:!1}),onFocusOutside:B(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),ed=H.forwardRef((e,t)=>{let n=Bu(Xu,e.__scopePopover),r=H.useRef(!1),i=H.useRef(!1);return(0,U.jsx)(td,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),td=H.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Bu(Xu,n),p=Ru(n);return _u(),(0,U.jsx)(Cu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,U.jsx)(Qe,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:(0,U.jsx)(yt,{"data-state":od(f.open),role:`dialog`,id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-popover-content-available-width":`var(--radix-popper-available-width)`,"--radix-popover-content-available-height":`var(--radix-popper-available-height)`,"--radix-popover-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-popover-trigger-height":`var(--radix-popper-anchor-height)`}})})})}),nd=`PopoverClose`,rd=H.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Bu(nd,n);return(0,U.jsx)(V.button,{type:`button`,...r,ref:t,onClick:B(e.onClick,()=>i.onOpenChange(!1))})});rd.displayName=nd;var id=`PopoverArrow`,ad=H.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Ru(n);return(0,U.jsx)(Pt,{...i,...r,ref:t})});ad.displayName=id;function od(e){return e?`open`:`closed`}var sd=Vu,cd=Gu,ld=Yu,ud=Zu,dd=sd,fd=cd,pd=H.forwardRef(({className:e,align:t=`center`,sideOffset:n=4,...r},i)=>(0,U.jsx)(ld,{children:(0,U.jsx)(ud,{ref:i,align:t,sideOffset:n,className:q(`z-40 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...r})}));pd.displayName=ud.displayName;const md=({title:e,isActive:t,onClick:n,onClose:r,stretch:o,width:s,minWidth:c,maxWidth:u,status:d,actions:f=[]})=>{let p=[`tab`,`hover-action`];t&&p.push(`active`);let m=(0,H.useMemo)(()=>e.split(`::`).splice(-1)[0].split(`/`).splice(-1)[0],[e]),[h,g]=(0,H.useState)(!1);return(0,U.jsxs)(D,{h:`100%`,m:`0 !important`,className:p.join(` `),pl:`12px`,pr:`12px`,align:`center`,justify:`flex-start`,overflow:`hidden`,onClick:n,w:s===void 0?o?`100%`:void 0:s,minW:c,maxW:u,flexGrow:1,flexShrink:0,children:[(0,U.jsxs)(l,{textOverflow:`ellipsis`,overflow:`hidden`,whiteSpace:`nowrap`,title:e,className:`tab-title`,flexGrow:1,textDecoration:d===`deleted`?`line-through`:void 0,display:`flex`,alignItems:`center`,gap:`4px`,children:[d===`loading`&&(0,U.jsx)(a,{size:`xs`,flexShrink:0,speed:`0.8s`,thickness:`2px`,color:`currentColor`,title:K(`tabs.loading`)}),d===`unsaved`&&(0,U.jsx)(l,{w:`8px`,h:`8px`,borderRadius:`50%`,bg:`currentColor`,flexShrink:0,title:K(`tabs.unsaved`)}),m]}),(o||s||c)&&(0,U.jsx)(l,{flexGrow:1}),(0,U.jsxs)(dd,{open:h,onOpenChange:g,children:[(0,U.jsx)(fd,{asChild:!0,children:(0,U.jsx)(hu,{variant:`ghost`,size:`sm`,className:`p-0 h-auto min-w-0 hover:bg-transparent hover-visible`,onClick:e=>e.stopPropagation(),children:(0,U.jsx)(i,{as:Me})})}),(0,U.jsx)(pd,{className:`w-48 p-1`,align:`start`,side:`right`,children:(0,U.jsx)(`div`,{className:`grid gap-1`,children:f.map((e,t)=>(0,U.jsxs)(hu,{variant:`ghost`,className:q(`w-full justify-start gap-2 px-2 py-1.5 h-auto font-normal`,e.className),onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick(),g(!1)},children:[e.icon&&(0,U.jsx)(i,{as:e.icon,className:`h-4 w-4`}),(0,U.jsx)(`span`,{children:e.label})]},t))})})]}),(0,U.jsx)(i,{flexShrink:0,className:`hover-visible`,as:ve,onClick:e=>{e.stopPropagation(),e.preventDefault(),r?.(e)}})]})},hd=(0,H.forwardRef)((e,t)=>(0,U.jsx)(hu,{variant:`ghost`,className:q(`p-0 h-auto min-w-0 rounded-none hover:bg-transparent`,e.className),...e,ref:t})),gd=()=>{let e=lc.create();return window.pageBoxController=e,{proxy:e,instance:(0,U.jsx)(()=>{let t=e,{maxTabWidth:n,minTabWidth:r,usePageList:a,getPageList:o,setPageList:c,useTabBarCapacity:u,useTabBarVisible:d,useVisible:f}=t,p=a(),m=u(),_=d(),v=f(),x=(0,H.useRef)(null);(0,H.useEffect)(()=>x.current?t.observeTabBar(x.current):()=>{},[]);let S=e=>[{label:K(`tabs.closeRight`),icon:pe,onClick:()=>{let n=p.findIndex(t=>t.id===e);p.slice(n+1).forEach(e=>t.removePage(e.id))}},{label:K(`tabs.closeLeft`),icon:qe,onClick:()=>{let n=p.findIndex(t=>t.id===e);p.slice(0,n).forEach(e=>t.removePage(e.id))}},{label:K(`tabs.closeOthers`),icon:ve,onClick:()=>{p.forEach(n=>{n.id!==e&&t.removePage(n.id)})}},{label:K(`tabs.closeAll`),icon:Re,onClick:()=>{p.forEach(e=>{t.removePage(e.id)})}}],w=(0,H.useMemo)(()=>p.map(({id:e,title:i,active:a,status:s},l)=>vr.isMobile()?(0,U.jsx)(md,{minWidth:r,maxWidth:n,title:i,status:s,isActive:a,onClick:()=>{t.showPage(e)},onClose:()=>{t.removePage(e)},actions:S(e)},e):(0,U.jsx)(mo,{style:{height:`100%`},id:e,index:l,moveItem:(e,t)=>{c(po(o(),e,t))},children:(0,U.jsx)(md,{minWidth:r,maxWidth:n,title:i,status:s,isActive:a,onClick:()=>{t.showPage(e)},onClose:()=>{t.removePage(e)},actions:S(e)},e)},e)),[p,r,n,t]),T=(0,H.useMemo)(()=>(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(j,{align:`center`,h:`100%`,flexShrink:0,flexGrow:0,className:`tab-bar-right-extra`,children:[(0,U.jsx)(dc,{}),p.length>m&&(0,U.jsxs)(b,{children:[(0,U.jsx)(C,{as:s((e,t)=>(0,U.jsx)(hd,{...e,ref:t,children:(0,U.jsx)(i,{fontSize:`lg`,as:Ie})}))}),(0,U.jsx)(h,{maxW:`400px`,className:`right-list`,zIndex:100,children:p.slice(0).map(({title:e,id:n,active:i,status:a})=>(0,U.jsx)(g,{children:(0,U.jsx)(md,{minWidth:r,title:e,isActive:i,onClick:()=>t.showPage(n),onClose:()=>t.removePage(n),status:a,stretch:!0,actions:S(n)})},n))})]})]})})}),[p,m]),E=(0,H.useMemo)(()=>p.map(e=>{let{id:t,active:n,viewData:r}=e,i;return r&&(i=ep.render(r)),(0,U.jsx)(l,{m:`0 !important`,h:`100%`,w:`100%`,id:t,overflow:`auto`,display:n?`block`:`none`,children:i},t)}),[p]);return(0,U.jsx)(lc.Provider,{value:e,children:(0,U.jsxs)(y,{w:`100%`,h:`100%`,align:`stretch`,className:`page-box`,overflow:`hidden`,display:v?`flex`:`none`,gap:0,children:[(0,U.jsx)(U.Fragment,{children:_&&(0,U.jsxs)(D,{ref:x,h:`40px`,minH:`40px`,className:`tab-bar`,w:`100%`,gap:0,zIndex:999999,children:[(0,U.jsx)(hd,{className:`tab-bar-left-extra`,onClick:()=>{Sr.executeCommand(xr.ToggleHome)},children:(0,U.jsx)(i,{fontSize:`lg`,as:ze})}),(0,U.jsx)(D,{className:`tab-bar-content scroll scroll-9`,flexGrow:1,h:`100%`,overflowY:`hidden`,overflowX:`auto`,gap:0,children:vr.isMobile()?w:(0,U.jsx)(_r,{autoHide:!0,style:{width:`100%`,display:`flex`,height:`100%`,flexFlow:`row`},children:w})}),T]},`tab-bar`)}),(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(l,{flexBasis:`100%`,m:`0 !important`,className:`content-area`,h:`100%`,overflow:`hidden`,children:E},`body`)})]})})},{})}};var _d=t(Dt(),1);const vd=(e,t,n=`id`)=>{let r=(e,t,r=!1)=>{if(e.find(e=>e[n]===t[n])){if(r)return i(e,t)}else return e.push(t),e.slice();return e},i=(e,t)=>{let r=t[n],i=e.find(e=>e[n]===r);return i&&Object.assign(i,t),e.slice()},a=(e,t)=>e.filter(e=>e[n]!==t);return{add:(n,i=!1)=>e(r(t(),n,i)),update:n=>e(i(t(),n)),delete:n=>e(a(t(),n))}};var yd=oc.create({scope:`sidebar`,storage:`localStorage`});const bd=ho(()=>{let e=Bs(`ActiveViewId`,void 0,e=>(sc(e,yd),{})),{setActiveViewId:t,getActiveViewId:n,useActiveViewId:r,subscribeActiveViewId:i}=e,a=Bs(`ViewList`,[],e=>{sc(e,yd);let{setViewList:i,getViewList:a,ViewList$:o}=e,{add:s,update:c,delete:l}=vd(i,a,`id`);return{addView:s,updateView:c,removeView:l,toggleView:e=>{n()===e?t(void 0):t(e)},showView:e=>{t(e)},hideView:e=>{n()===e&&t(void 0)},useView:e=>{let[t,n]=(0,H.useState)(a().find(t=>t.id===e));return(0,H.useEffect)(()=>{let t=o.pipe(as(t=>t.find(t=>t.id===e)),ws()).subscribe(n);return()=>t.unsubscribe()},[e]),t},useActiveViewId:r}}),o=Bs(`Visible`,!0,e=>{sc(e,yd);let{getVisible:t,setVisible:n,Visible$:r}=e;return r.subscribe(e=>{console.log(`[Sidebar] visible`,e)}),{show:()=>n(!0),hide:()=>n(!1),toggle:()=>n(!t())}}),s=Bs(`Fullwidth`,!0,e=>(sc(e,yd),{})),c=()=>a.getViewList().find(e=>e.id===n()),l=()=>{let t=e.useActiveViewId()||``;return a.useView(t)},u=t=>{e.setActiveViewId(t)};return{...e,...a,...o,...s,getCurrentView:c,useCurrentView:l,setView:u,cache:yd}}),xd=()=>{let e=bd.create();return{proxy:e,instance:(0,U.jsx)(()=>{let{useVisible:t,hide:n,show:r,toggle:i,getFullwidth:a,setFullwidth:o,useFullwidth:s,getViewList:c,useActiveViewId:u,useViewList:d}=e;window.sidebarController=e;let f=t(),p=s(),m=d(),h=u();return(0,H.useEffect)(()=>{},[p]),(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(l,{maxH:`100%`,overflow:`hidden`,flexGrow:1,className:(0,_d.default)(`sidebar sidebarV2 `+(f?``:`width-collapsed`),w`
                & {
                  .view.active {
                    /* display: block; */
                    visibility: visible;
                  }
                  .view.nonActive {
                    /* display: none; */
                    position: absolute;
                    left: -99999999px;
                    top: -99999999px;
                    visibility: hidden;
                  }
                }
              `),children:m.map(e=>{let{id:t,viewData:n}=e;return(0,U.jsx)(l,{w:`100%`,h:`100%`,m:`0 !important`,className:(0,_d.default)(`view`,{active:h===t,nonActive:h!==t}),children:f&&ep.render(n)},t)})})})},{})}},Sd={useStateControl:(e,t)=>{let[n,r]=(0,H.useState)(t);return(0,H.useEffect)(()=>{e.register({setState:r,getState:()=>n})},[n,r]),[n,r]},useVisibilityControl:(e,t)=>{let[n,r]=(0,H.useState)(t);return(0,H.useEffect)(()=>{e.register({show:()=>{r(!0)},hide:()=>r(!1),toggle:()=>r(!n)})},[n,r]),{visible:n,setVisible:r}},useBooleanControl:(e,t=!1)=>{let[n,r]=(0,H.useState)(t),i=()=>r(e=>!e),a=()=>r(!0),o=()=>r(!1);return(0,H.useEffect)(()=>{e.register({toggle:i,setTrue:a,setFalse:o})},[e,i,a,o]),{value:n,setValue:r,toggle:i,setTrue:a,setFalse:o}},useBeanControl:(e,t,n)=>{let[r,i]=(0,H.useState)(n),a={};return t=t[0].toUpperCase()+t.slice(1),a[`get`+t]=()=>r,a[`set`+t]=e=>i(e),(0,H.useEffect)(()=>{e.register(a)},[e,a]),{value:r,setValue:i,...a}}},Cd=e=>{let t={},n=new Map,r=e=>{let r=n.get(e);if(r)for(;r.length;){let n=r.shift(),i=t[e];i&&i(...n)}},i=(n,a)=>{if(typeof n==`object`&&n)for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&i(e,n[e]);else t[n]=a,r(n),e&&e(n,a)},a=new Proxy(t,{get(e,t,r){if(typeof t==`string`)return(...i)=>{if(!(t in e))n.get(t)||n.set(t,[]),n.get(t).push(i);else return Reflect.get(e,t,r)(...i)}}});return t.register=i,a};function wd(e,t){let n=Cd((e,n)=>{t&&t(e,n)});return{proxy:n,instance:(0,U.jsx)(e,{proxy:n})}}function Td(){return typeof window>`u`?`localhost`:window.location.hostname}function Ed(){let e=Td();return e===`localhost`||e===`127.0.0.1`?`Localhost5173`:e===`gitary.app`||e===`www.gitary.app`?`GitaryApp`:e===`write.dimstack.com`||e===`www.write.dimstack.com`?`WriteDimstackCom`:`GitaryApp`}const Dd=({showLogo:e=!0,showName:t=!0,size:n=`md`})=>{let r={sm:{logo:`16px`,fontSize:`xs`},md:{logo:`24px`,fontSize:`sm`},lg:{logo:`32px`,fontSize:`md`}}[n];return(0,U.jsxs)(j,{align:`center`,gap:2,onClick:()=>{let e=Td();e!==`gitary.app`&&e!==`www.gitary.app`&&window.open(`https://gitary.app`,`_blank`)},cursor:`pointer`,_hover:{opacity:.8},transition:`opacity 0.2s`,children:[e&&(0,U.jsx)(O,{src:`/logo.svg`,alt:`Gitary`,width:r.logo,height:r.logo,flexShrink:0}),t&&(0,U.jsx)(f,{fontSize:r.fontSize,fontWeight:`semibold`,color:`gray.700`,_dark:{color:`gray.300`},letterSpacing:`tight`,children:`Gitary`})]})},Od=()=>wd(({proxy:e})=>Sd.useVisibilityControl(e,!0).visible&&(0,U.jsx)(l,{w:`100%`,flexShrink:0,minH:30,h:30,className:`status-bar`,borderTop:`1px solid`,borderColor:`gray.200`,bg:`gray.50`,_dark:{borderColor:`gray.700`,bg:`gray.900`},children:(0,U.jsxs)(j,{h:`100%`,align:`center`,justify:`space-between`,px:4,fontSize:`xs`,color:`gray.600`,_dark:{color:`gray.400`},children:[(0,U.jsx)(D,{spacing:2,children:(0,U.jsx)(Dd,{showLogo:!0,showName:!0,size:`sm`})}),(0,U.jsx)(f,{fontSize:`xs`,children:`Manage your knowledge the Git way`})]})},`statusBar`),(e,t)=>{Sr.registerCommandWithScope(`statusBar`,e,t)}),kd=()=>wd(({proxy:e})=>Sd.useVisibilityControl(e,!0).visible&&(0,U.jsx)(l,{w:`100%`,flexShrink:0,className:`menu-bar`,h:35,minH:35,px:4,borderBottom:`1px solid`,borderColor:`gray.200`,bg:`gray.50`,_dark:{borderColor:`gray.700`,bg:`gray.900`},children:(0,U.jsx)(j,{h:`100%`,align:`center`,children:(0,U.jsx)(Dd,{showLogo:!0,showName:!0,size:`sm`})})}),(e,t)=>{Sr.registerCommandWithScope(`titleBar`,e,t)}),Ad={RequestRedirectAuthPage:yr(`requestRedirectAuthPage`),Space:{SpacesChanged:yr(`spaces:changed`)},ActivityBar:{DragItem:yr(`activityBar:DragItem`),ActivityClicked:e=>yr(`activity:${e}:clicked`)},Shortcut:{ShortcutClicked:e=>yr(`shortcut:${e}:clicked`)},FileSaved:yr(`FileSaved`),FileDirty:yr(`FileDirty`),FileClean:yr(`FileClean`),FileLoading:yr(`FileLoading`),FileLoaded:yr(`FileLoaded`),ReadMeFileInitialized:yr(`ReadMeFileInitialized`),Action:{Clicked:e=>yr(`action:${e}:clicked`)}};function jd(){let e={},t=new ft;function n(t,n){let r=br(t);return e[r]||(e[r]=[]),e[r].push(n),function(){if(!e[r])return;let t=e[r].indexOf(n);t>-1&&e[r].splice(t,1)}}function r(n,r){let i=br(n);e[i]&&e[i].forEach(e=>{e(r)}),t.next({key:n,payload:r})}return{on:n,emit:r,connector:(e,t,n=!1)=>i=>{n&&(i.stopPropagation(),i.preventDefault()),r(e,typeof t==`function`?t(i):t)},event$:t}}const Md=jd();var Nd=oc.create({scope:`activityBar`,storage:`localStorage`});const Pd=ho(()=>{let{getActiveId:e,setActiveId:t,useActiveId:n,ActiveId$:r}=Bs(`ActiveId`,``,e=>{sc(e,Nd)}),{hide:i,show:a,toggle:o,useVisible:s,getVisible:c}=Bs(`Visible`,!0,e=>(sc(e,Nd),{hide:()=>{e.setVisible(!1)},show:()=>{e.setVisible(!0)},toggle:()=>{e.setVisible(!e.getVisible())}})),{getActivityList:l,useActivityList:u,setActivityList:d,addActivity:f,showActivity:p,setHighlightActivity:m,removeActivity:h,ActivityList$:g}=Bs(`ActivityList`,[],n=>{let r=(e,t=!1)=>{let r=n.getActivityList();if((e=>r.find(t=>t.id===e))(e.id))if(t){d(r.map(t=>t.id===e.id?{...t,...e}:t));return}else return;e.isActive&&r.forEach(e=>{e.isActive=!1}),r.push(e),d(r.slice())},i=e=>{t(e)},a=e=>{let r=n.getActivityList().find(t=>t.id===e);r&&(r.unselectable||t(e),Md.emit(Ad.ActivityBar.ActivityClicked(e)))};return{addActivity:r,showActivity:a,setHighlightActivity:i,removeActivity:t=>{let r=n.getActivityList(),i=e(),o=r.find(e=>e.id===t),s=t===i,c=r.length===1;d(r.filter(e=>e.id!==t)),o&&s&&!c&&a(r.filter(e=>e.id!==t)[0].id)}}}),{getExpanded:_,setExpanded:v,useExpanded:y,toggleExpanded:b}=Bs(`Expanded`,!1,e=>(sc(e,Nd),{toggleExpanded:()=>{e.setExpanded(!e.getExpanded())}}));gs([r,g]).subscribe(([e,n])=>{if(e){let r=n.find(t=>t.id===e);r?r.unselectable&&t(``):t(``)}});let x={};return x.h=`100%`,x.minW=`48px`,x.p=`0.5rem 0`,{direction:`column`,isMobile:!1,options:x,textFontSize:`0.8rem`,iconFontSize:`1.5rem`,getVisible:c,useVisible:s,show:a,hide:i,toggle:o,getActiveId:e,useActiveId:n,getActivityList:()=>l().sort((e,t)=>(e.order||0)-(t.order||0)),useActivityList:()=>u().sort((e,t)=>(e.order||0)-(t.order||0)),setActivityList:d,addActivity:f,showActivity:p,setHighlightActivity:m,removeActivity:h,getExpanded:_,setExpanded:v,useExpanded:y,toggleExpanded:b}});var Fd=Et,Id=At,Ld=xt,Rd=H.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,U.jsx)(bt,{ref:r,sideOffset:t,className:q(`z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...n}));Rd.displayName=bt.displayName;var zd=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Bd=(...e)=>e.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(` `),Vd={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},Hd=(0,H.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,H.createElement)(`svg`,{ref:c,...Vd,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Bd(`lucide`,i),...s},[...o.map(([e,t])=>(0,H.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Ud=(e,t)=>{let n=(0,H.forwardRef)(({className:n,...r},i)=>(0,H.createElement)(Hd,{ref:i,iconNode:t,className:Bd(`lucide-${zd(e)}`,n),...r}));return n.displayName=`${e}`,n},Wd=Ud(`ArrowRight`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),Gd=Ud(`Brain`,[[`path`,{d:`M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z`,key:`l5xja`}],[`path`,{d:`M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z`,key:`ep3f8r`}],[`path`,{d:`M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4`,key:`1p4c4q`}],[`path`,{d:`M17.599 6.5a3 3 0 0 0 .399-1.375`,key:`tmeiqw`}],[`path`,{d:`M6.003 5.125A3 3 0 0 0 6.401 6.5`,key:`105sqy`}],[`path`,{d:`M3.477 10.896a4 4 0 0 1 .585-.396`,key:`ql3yin`}],[`path`,{d:`M19.938 10.5a4 4 0 0 1 .585.396`,key:`1qfode`}],[`path`,{d:`M6 18a4 4 0 0 1-1.967-.516`,key:`2e4loj`}],[`path`,{d:`M19.967 17.484A4 4 0 0 1 18 18`,key:`159ez6`}]]),Kd=Ud(`Check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),qd=Ud(`ChevronDown`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),Jd=Ud(`ChevronLeft`,[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]]),Yd=Ud(`ChevronRight`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),Xd=Ud(`ChevronUp`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),Zd=Ud(`CircleAlert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),Qd=Ud(`CircleCheck`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),$d=Ud(`CircleDot`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}]]),ef=Ud(`Circle`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),tf=Ud(`Copy`,[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]]),nf=Ud(`Download`,[[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`polyline`,{points:`7 10 12 15 17 10`,key:`2ggqvy`}],[`line`,{x1:`12`,x2:`12`,y1:`15`,y2:`3`,key:`1vk2je`}]]),rf=Ud(`EllipsisVertical`,[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`12`,cy:`5`,r:`1`,key:`gxeob9`}],[`circle`,{cx:`12`,cy:`19`,r:`1`,key:`lyex9k`}]]),af=Ud(`Ellipsis`,[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`19`,cy:`12`,r:`1`,key:`1wjl8i`}],[`circle`,{cx:`5`,cy:`12`,r:`1`,key:`1pcz8c`}]]),of=Ud(`FileCode`,[[`path`,{d:`M10 12.5 8 15l2 2.5`,key:`1tg20x`}],[`path`,{d:`m14 12.5 2 2.5-2 2.5`,key:`yinavb`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z`,key:`1mlx9k`}]]),sf=Ud(`FilePlus`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M9 15h6`,key:`cctwl0`}],[`path`,{d:`M12 18v-6`,key:`17g6i2`}]]),cf=Ud(`FileText`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),lf=Ud(`FolderPlus`,[[`path`,{d:`M12 10v6`,key:`1bos4e`}],[`path`,{d:`M9 13h6`,key:`1uhe8q`}],[`path`,{d:`M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z`,key:`1kt360`}]]),uf=Ud(`GitBranch`,[[`line`,{x1:`6`,x2:`6`,y1:`3`,y2:`15`,key:`17qcm7`}],[`circle`,{cx:`18`,cy:`6`,r:`3`,key:`1h7g24`}],[`circle`,{cx:`6`,cy:`18`,r:`3`,key:`fqmcym`}],[`path`,{d:`M18 9a9 9 0 0 1-9 9`,key:`n2h4wq`}]]),df=Ud(`Github`,[[`path`,{d:`M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4`,key:`tonef`}],[`path`,{d:`M9 18c-4.51 2-5-2-7-2`,key:`9comsn`}]]),ff=Ud(`Heart`,[[`path`,{d:`M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z`,key:`c3ymky`}]]),pf=Ud(`History`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}],[`path`,{d:`M12 7v5l4 2`,key:`1fdv2h`}]]),mf=Ud(`Keyboard`,[[`path`,{d:`M10 8h.01`,key:`1r9ogq`}],[`path`,{d:`M12 12h.01`,key:`1mp3jc`}],[`path`,{d:`M14 8h.01`,key:`1primd`}],[`path`,{d:`M16 12h.01`,key:`1l6xoz`}],[`path`,{d:`M18 8h.01`,key:`emo2bl`}],[`path`,{d:`M6 8h.01`,key:`x9i8wu`}],[`path`,{d:`M7 16h10`,key:`wp8him`}],[`path`,{d:`M8 12h.01`,key:`czm47f`}],[`rect`,{width:`20`,height:`16`,x:`2`,y:`4`,rx:`2`,key:`18n3k1`}]]),hf=Ud(`Languages`,[[`path`,{d:`m5 8 6 6`,key:`1wu5hv`}],[`path`,{d:`m4 14 6-6 2-3`,key:`1k1g8d`}],[`path`,{d:`M2 5h12`,key:`or177f`}],[`path`,{d:`M7 2h1`,key:`1t2jsx`}],[`path`,{d:`m22 22-5-10-5 10`,key:`don7ne`}],[`path`,{d:`M14 18h6`,key:`1m8k6r`}]]),gf=Ud(`Link`,[[`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`,key:`1cjeqo`}],[`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`,key:`19qd67`}]]),_f=Ud(`LoaderCircle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),vf=Ud(`Lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),yf=Ud(`MessageCircle`,[[`path`,{d:`M7.9 20A9 9 0 1 0 4 16.1L2 22Z`,key:`vv11sd`}]]),bf=Ud(`Minus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}]]),xf=Ud(`Moon`,[[`path`,{d:`M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z`,key:`a7tn18`}]]),Sf=Ud(`Network`,[[`rect`,{x:`16`,y:`16`,width:`6`,height:`6`,rx:`1`,key:`4q2zg0`}],[`rect`,{x:`2`,y:`16`,width:`6`,height:`6`,rx:`1`,key:`8cvhb9`}],[`rect`,{x:`9`,y:`2`,width:`6`,height:`6`,rx:`1`,key:`1egb70`}],[`path`,{d:`M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3`,key:`1jsf9p`}],[`path`,{d:`M12 12V8`,key:`2874zd`}]]),Cf=Ud(`PenTool`,[[`path`,{d:`M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z`,key:`nt11vn`}],[`path`,{d:`m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18`,key:`15qc1e`}],[`path`,{d:`m2.3 2.3 7.286 7.286`,key:`1wuzzi`}],[`circle`,{cx:`11`,cy:`11`,r:`2`,key:`xmgehs`}]]),wf=Ud(`Pencil`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]]),Tf=Ud(`Plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),Ef=Ud(`Redo`,[[`path`,{d:`M21 7v6h-6`,key:`3ptur4`}],[`path`,{d:`M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7`,key:`1kgawr`}]]),Df=Ud(`RefreshCw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),Of=Ud(`RotateCcw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),kf=Ud(`Search`,[[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}],[`path`,{d:`m21 21-4.3-4.3`,key:`1qie3q`}]]),Af=Ud(`Share2`,[[`circle`,{cx:`18`,cy:`5`,r:`3`,key:`gq8acd`}],[`circle`,{cx:`6`,cy:`12`,r:`3`,key:`w7nqdw`}],[`circle`,{cx:`18`,cy:`19`,r:`3`,key:`1xt0gg`}],[`line`,{x1:`8.59`,x2:`15.42`,y1:`13.51`,y2:`17.49`,key:`47mynk`}],[`line`,{x1:`15.41`,x2:`8.59`,y1:`6.51`,y2:`10.49`,key:`1n3mei`}]]),jf=Ud(`Sparkles`,[[`path`,{d:`M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z`,key:`4pj2yx`}],[`path`,{d:`M20 3v4`,key:`1olli1`}],[`path`,{d:`M22 5h-4`,key:`1gvqau`}],[`path`,{d:`M4 17v2`,key:`vumght`}],[`path`,{d:`M5 18H3`,key:`zchphs`}]]),Mf=Ud(`Sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),Nf=Ud(`Trash2`,[[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6`,key:`4alrt4`}],[`path`,{d:`M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2`,key:`v07s0e`}],[`line`,{x1:`10`,x2:`10`,y1:`11`,y2:`17`,key:`1uufr5`}],[`line`,{x1:`14`,x2:`14`,y1:`11`,y2:`17`,key:`xtxkd`}]]),Pf=Ud(`Undo`,[[`path`,{d:`M3 7v6h6`,key:`1v2h90`}],[`path`,{d:`M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13`,key:`1r6uu6`}]]),Ff=Ud(`X`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);function If({activity:e,isExpanded:t,isActive:n=!1,onClick:r,icon:i,children:a,tooltipContent:o,className:s,iconClassName:c,textClassName:l,disableTooltip:u=!1,asChild:d=!1}){let f=(0,U.jsxs)(`button`,{className:q(`flex items-center transition-all duration-300 ease-in-out`,t?`px-3 py-1.5 w-full`:`p-1.5 aspect-square`,t?`rounded-sm`:`rounded-md`,`hover:bg-accent/80 hover:text-accent-foreground`,n&&q(`bg-accent/60 text-accent-foreground`,!t&&`shadow-sm ring-2 ring-accent/20`),!t&&`justify-center`,s),onMouseDown:e=>e.preventDefault(),onClick:r,children:[i&&(0,U.jsx)(`div`,{className:q(`flex-shrink-0 transition-all duration-300 ease-in-out`,t?`h-5 w-5`:`h-[22px] w-[22px]`,`hover:scale-105`,c),children:i}),a,t&&e.name&&(0,U.jsx)(`span`,{className:q(`ml-2.5 text-sm truncate text-muted-foreground animate-in fade-in-0 slide-in-from-left-2 duration-300`,l),children:e.name})]}),p=d?f:(0,U.jsx)(`div`,{className:`flex justify-center`,children:f}),m=o??e.name;return t||u?p:(0,U.jsx)(Fd,{delayDuration:100,children:(0,U.jsxs)(Id,{disableHoverableContent:!0,children:[(0,U.jsx)(Ld,{asChild:!0,children:p}),(0,U.jsx)(Rd,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:m})]})})}function Lf({activities:e,shortcuts:t,isExpanded:n,activeId:r,onToggleExpand:i,onActivityClick:a,onMoveActivity:o}){return(0,U.jsx)(Fd,{delayDuration:100,children:(0,U.jsxs)(`div`,{className:q(`h-full bg-background flex flex-col transition-all duration-300 ease-in-out`,`border-r border-border/40`,n?`w-[140px]`:`w-[52px]`),children:[(0,U.jsx)(`div`,{className:`flex-1 overflow-y-auto py-1`,children:e.map((e,t)=>(0,U.jsx)(zf,{activity:e,isActive:e.id===r,isExpanded:n,index:t,onMove:o,onClick:()=>a(e.id)},e.id))}),(0,U.jsx)(`div`,{className:`py-1 border-t border-border/40`,children:t.map(e=>(0,U.jsx)(Bf,{shortcut:e,isExpanded:n},e.id))}),(0,U.jsx)(`div`,{className:`py-1 border-t border-border/40`,children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,className:q(`my-1 mx-auto hover:bg-accent/50 hover:text-accent-foreground`,`w-8 h-8 rounded-sm`),onClick:i,children:n?(0,U.jsx)(Jd,{className:`h-3.5 w-3.5`}):(0,U.jsx)(Yd,{className:`h-3.5 w-3.5`})})})})]})})}function Rf({icon:e,name:t,isExpanded:n,isActive:r=!1,onClick:i}){let a=ep.useComponent(e||`AiOutlineQuestionCircle`)??(()=>null);return(0,U.jsx)(If,{activity:{id:``,name:t,icon:e},isExpanded:n,isActive:r,onClick:i,icon:(0,U.jsx)(a,{className:`w-full h-full`})})}function zf({activity:e,isActive:t,isExpanded:n,index:r,onMove:i,onClick:a}){let o=ep.useComponent(`activity:${e.id}`);return o?(0,U.jsx)(mo,{id:e.id,index:r,moveItem:i,children:(0,U.jsx)(o,{activity:e,isExpanded:n})},e.id):(0,U.jsx)(mo,{id:e.id,index:r,moveItem:i,children:(0,U.jsx)(Rf,{icon:e.icon,name:e.name,isExpanded:n,isActive:t,onClick:a})},e.id)}function Bf({shortcut:e,isExpanded:t}){let n=ep.useComponent(`shortcut:${e.id}`);return n?(0,U.jsx)(n,{shortcut:e,isExpanded:t}):(0,U.jsx)(Rf,{icon:e.icon,name:e.name,isExpanded:t,onClick:()=>{Md.emit(Ad.Shortcut.ShortcutClicked(e.id))}})}const Vf=()=>{let e=Pd.create();return{instance:(0,U.jsx)(()=>{let{useVisible:t,useActivityList:n,setActivityList:r,useActiveId:i,showActivity:a,useExpanded:o,toggleExpanded:s}=e,c=t(),l=n(),u=i(),d=o(),f=Fg.useShortcutList();return c?(0,U.jsx)(Lf,{activities:l,shortcuts:f,isExpanded:d,activeId:u,onToggleExpand:s,onActivityClick:a,onMoveActivity:(e,t)=>{r(po(l,e,t))}}):null},{}),proxy:e}};var Hf=t(Dt(),1),Uf=w`
  &.split-pane {
    display: flex;
    width: 100%;
    height: 100%;
    .resizer {
      height: 100%;
      z-index: 1;
      position: relative;
    }
    .resizer-anchor {
      position: absolute;
      width: 0;
      height: 100%;
    }
    .pane {
      display: flex;
      /* transition: all 0.1s ease; */
    }
    .left {
      // overflow-x: auto;
      overflow: hidden;
      flex-shrink: 0;
    }
    .left-inner-wrapper {
      display: flex;
      width: 100%;
      // overflow-x: auto;
    }
    .right-un {
      flex: 1;
    }
    .right {
      flex: 1;
      overflow: hidden;
    }

    &.resizable {
      .resizer-wrapper {
        .resizer-anchor {
          display: flex;
          align-items: center;
          .resizer {
            background-color: var(--splitter-color);
            cursor: ew-resize;
            width: 6px;
            flex-shrink: 0;
            flex-grow: 0;
            left: -3px;
          }
          &:hover {
            .toggle-left {
              visibility: visible;
            }
          }
          .toggle-left {
            width: 2px;
            display: flex;
            align-items: center;
            visibility: hidden;
            height: 100%;
            transition: all 0.3s ease;
            .toggle {
              margin-left: -10px;
              cursor: pointer;
            }
          }
        }
      }
    }
  }
`,Wf={Horizontal:({children:e,resizable:t=!0,initialLeftWidth:n=300,initialRightWidth:r,minLeftWidth:i=250,maxLeftWidth:a=800,toggleLeftComponent:o,enableToggleLeft:s,leftHidden:c})=>{let[l,u]=e,d=(0,H.useRef)(null),f=(0,H.useRef)(null),p=(0,H.useRef)(null),m=(0,H.useRef)(null),[h,g]=(0,H.useState)(!1);(0,H.useEffect)(()=>{c!==void 0&&g(c)},[c]);let _=(0,H.useRef)({startX:0,startY:0,leftWidth:n||0}),[v,y]=(0,H.useState)(n),[b,x]=(0,H.useState)(r),[S,C]=(0,H.useState)(!1),[,w]=(0,H.useState)(!1),T=(0,H.useCallback)(e=>{if(d.current&&p.current&&m.current&&f.current){let t=e.clientX-_.current.startX,n=f.current.parentElement.getBoundingClientRect().width,r=_.current.leftWidth+t;r=Math.max(i===void 0?0:i,Math.min(a===void 0?n:a,r));let o=r*100/n,s=100-r;y(`${o}%`),x(`${s}%`),C(!0),document.body.style.cursor=`col-resize`,p.current.style.userSelect=`none`,p.current.style.pointerEvents=`none`,m.current.style.userSelect=`none`,m.current.style.pointerEvents=`none`}},[d,f,p,m,i,a]),E=(0,H.useCallback)(()=>{d.current&&p.current&&m.current&&f.current&&(d.current.style.removeProperty(`cursor`),document.body.style.removeProperty(`cursor`),p.current.style.removeProperty(`user-select`),p.current.style.removeProperty(`pointer-events`),m.current.style.removeProperty(`user-select`),m.current.style.removeProperty(`pointer-events`),document.removeEventListener(`mousemove`,T),document.removeEventListener(`mouseup`,E),w(!1))},[T]),D=(0,H.useCallback)(e=>{w(!0),_.current.startX=e.clientX,_.current.startY=e.clientY,_.current.leftWidth=p.current.getBoundingClientRect().width,document.addEventListener(`mousemove`,T),document.addEventListener(`mouseup`,E)},[T,E]);return(0,U.jsxs)(`div`,{className:(0,Hf.default)({resizable:t,"split-pane":!0,[Uf]:!0}),children:[(0,U.jsx)(`div`,{className:(0,Hf.default)(`left pane scroll scroll-7`),ref:p,style:{...t&&!h?{width:v}:{width:0}},children:(0,U.jsxs)(`div`,{className:`left-inner-wrapper scroll scroll-8`,children:[` `,l]})}),(0,U.jsx)(`div`,{className:`resizer-wrapper`,ref:f,children:(0,U.jsxs)(`div`,{className:`resizer-anchor`,children:[(0,U.jsx)(`div`,{className:`resizer`,ref:d,onMouseDown:t?D:void 0}),s&&(0,U.jsx)(`div`,{className:`toggle-left`,children:(0,U.jsx)(`div`,{className:`toggle`,onClick:()=>{g(e=>!e)},children:o||h?`➡️`:`⬅️`})})]})}),(0,U.jsx)(`div`,{className:`${S?`right`:`right-un`} pane`,style:{...t?{width:b}:{}},ref:m,children:u})]})}},Gf=oc.create({scope:`sideResizer`,storage:`localStorage`});const Kf=ho(()=>{let{setLeftHidden:e,useLeftHidden:t,getLeftHidden:n}=Bs(`LeftHidden`,!1,e=>{sc(e,Gf)});return{setLeftHidden:e,useLeftHidden:t,getLeftHidden:n}}).create(),qf=({children:e})=>{let{useLeftHidden:t,setLeftHidden:n,getLeftHidden:r}=Kf,i=t();return(0,U.jsx)(Wf.Horizontal,{leftHidden:i,children:e})},Jf={toggleLeft:()=>Kf.setLeftHidden(!Kf.getLeftHidden())},Yf=Vf(),Xf=Od(),Zf=kd(),Qf=gd(),$f=xd(),ep=tn();ep.register(`NotFoundComponent`,({type:e})=>{let[t,n]=(0,H.useState)(!1);return(0,H.useEffect)(()=>{let e=setTimeout(()=>{n(!0)},1e3);return()=>{clearTimeout(e)}}),(0,U.jsx)(U.Fragment,{children:t&&(0,U.jsxs)(`div`,{children:[e,`组件未找到`]})})}),ep.register(`row`,({children:e,...t})=>(0,U.jsx)(l,{display:`flex`,overflow:`hidden`,className:`row`,flexDirection:`row`,w:`100%`,...t,children:e})),ep.register(`column`,({children:e,...t})=>(0,U.jsx)(l,{display:`flex`,overflow:`hidden`,className:`colomn`,flexDirection:`column`,h:`100%`,...t,children:e}));let tp=function(e){return e.SideResizer=`sideResizer`,e}({});ep.register(`activityBar`,()=>Yf.instance),ep.register(`sidebar`,()=>$f.instance),ep.register(`statusBar`,()=>Xf.instance),ep.register(`titleBar`,()=>Zf.instance),ep.register(`pageBox`,()=>Qf.instance),ep.register(tp.SideResizer,qf);const np=ic(`xbook-cache-service`);var rp=class e{disposables;constructor(e){this.disposables=[],this.disposables.push({dispose:e})}static from(...t){let n=new e(()=>{for(let e of t)e.dispose()});return n.disposables.push(...t),n}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}},ip=class{listeners=[];event=(e,t,n)=>{let r=new rp(()=>{let t=this.listeners.indexOf(e);t!==-1&&this.listeners.splice(t,1)}),i=t?e.bind(t):e;return this.listeners.push(i),n&&n.push(r),r};fire(e){for(let t of this.listeners)try{t.call(void 0,e)}catch(e){console.error(e)}}dispose(){this.listeners=[]}};const ap=new class{providers=[];onDidChangeFileEmitter=new ip;get onDidChangeFile(){return this.onDidChangeFileEmitter.event}registerProvider(e){let{id:t,scheme:n,provider:r,authority:i,options:a}=e,o=new rp(()=>{this.unregisterProvider(t)}),s={id:t,scheme:n,authority:i,provider:r,disposable:o};try{r.onDidChangeFile&&(s.onChangeUnsub=r.onDidChangeFile(e=>{Array.isArray(e)&&e.length&&this.onDidChangeFileEmitter.fire(e)}))}catch(e){console.warn(`[fs] failed to bridge onDidChangeFile for provider '${t}':`,e)}if(this.providers.some(e=>e.id===t))if(a.overwrite)this.unregisterProvider(t),this.providers.push(s);else throw Error(`Provider '${t}' already registered.`);else this.providers.push(s);return o}unregisterProvider(e){let t=this.providers.findIndex(t=>t.id===e);if(t!==-1){let e=this.providers.splice(t,1)[0];try{e.onChangeUnsub?.dispose()}catch{}try{e.disposable.dispose()}catch{}}}getProvider(e){return this.providers.find(t=>!(t.scheme&&t.scheme!==e.scheme||t.authority&&t.authority!==e.authority))?.provider}watch(e,t){let n=this.getProvider(e);if(n){if(!n.watch)throw Error(`Provider for scheme '${e.scheme}' does not support watching.`);return n.watch(e,t)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async stat(e){let t=this.getProvider(e);if(t){let n=await t.stat(e);return Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async readDirectory(e){let t=this.getProvider(e);if(t){let n=await t.readDirectory(e);return Array.isArray(n)?n:Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async createDirectory(e){let t=this.getProvider(e);if(t)await t.createDirectory(e);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async readFile(e){let t=this.getProvider(e);if(t){let n=await t.readFile(e);return n instanceof Uint8Array?n:Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async writeFile(e,t,n){let r=this.getProvider(e);if(r)await r.writeFile(e,t,n);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async delete(e,t){let n=this.getProvider(e);if(n)await n.delete(e,t);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async rename(e,t,n){let r=this.getProvider(e);if(r)await r.rename(e,t,n);else throw Error(`No provider registered for scheme '${e.scheme}'`)}};var op=t(It(),1),sp=1,cp=1e6,lp=0;function up(){return lp=(lp+1)%(2**53-1),lp.toString()}var dp=new Map,fp=e=>{if(dp.has(e))return;let t=setTimeout(()=>{dp.delete(e),gp({type:`REMOVE_TOAST`,toastId:e})},cp);dp.set(e,t)};const pp=(e,t)=>{switch(t.type){case`ADD_TOAST`:return{...e,toasts:[t.toast,...e.toasts].slice(0,sp)};case`UPDATE_TOAST`:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case`DISMISS_TOAST`:{let{toastId:n}=t;return n?fp(n):e.toasts.forEach(e=>{fp(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||n===void 0?{...e,open:!1}:e)}}case`REMOVE_TOAST`:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};var mp=[],hp={toasts:[]};function gp(e){hp=pp(hp,e),mp.forEach(e=>{e(hp)})}function _p({...e}){let t=up(),n=e=>gp({type:`UPDATE_TOAST`,toast:{...e,id:t}}),r=()=>gp({type:`DISMISS_TOAST`,toastId:t});return gp({type:`ADD_TOAST`,toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:n}}function vp(){let[e,t]=H.useState(hp);return H.useEffect(()=>(mp.push(t),()=>{let e=mp.indexOf(t);e>-1&&mp.splice(e,1)}),[e]),{...e,toast:_p,dismiss:e=>gp({type:`DISMISS_TOAST`,toastId:e})}}function yp(e){let t=e+`CollectionProvider`,[n,r]=at(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{let{scope:t,children:n}=e,r=H.useRef(null),a=H.useRef(new Map).current;return(0,U.jsx)(i,{scope:t,itemMap:a,collectionRef:r,children:n})};o.displayName=t;let s=e+`CollectionSlot`,c=lt(s),l=H.forwardRef((e,t)=>{let{scope:n,children:r}=e;return(0,U.jsx)(c,{ref:Ye(t,a(s,n).collectionRef),children:r})});l.displayName=s;let u=e+`CollectionItemSlot`,d=`data-radix-collection-item`,f=lt(u),p=H.forwardRef((e,t)=>{let{scope:n,children:r,...i}=e,o=H.useRef(null),s=Ye(t,o),c=a(u,n);return H.useEffect(()=>(c.itemMap.set(o,{ref:o,...i}),()=>void c.itemMap.delete(o))),(0,U.jsx)(f,{[d]:``,ref:s,children:r})});p.displayName=u;function m(t){let n=a(e+`CollectionConsumer`,t);return H.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])}return[{Provider:o,Slot:l,ItemSlot:p},m,r]}var bp=`ToastProvider`,[xp,Sp,Cp]=yp(`Toast`),[wp,Tp]=at(`Toast`,[Cp]),[Ep,Dp]=wp(bp),Op=e=>{let{__scopeToast:t,label:n=`Notification`,duration:r=5e3,swipeDirection:i=`right`,swipeThreshold:a=50,children:o}=e,[s,c]=H.useState(null),[l,u]=H.useState(0),d=H.useRef(!1),f=H.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${bp}\`. Expected non-empty \`string\`.`),(0,U.jsx)(xp.Provider,{scope:t,children:(0,U.jsx)(Ep,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:l,viewport:s,onViewportChange:c,onToastAdd:H.useCallback(()=>u(e=>e+1),[]),onToastRemove:H.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};Op.displayName=bp;var kp=`ToastViewport`,Ap=[`F8`],jp=`toast.viewportPause`,Mp=`toast.viewportResume`,Np=H.forwardRef((e,t)=>{let{__scopeToast:n,hotkey:r=Ap,label:i=`Notifications ({hotkey})`,...a}=e,o=Dp(kp,n),s=Sp(n),c=H.useRef(null),l=H.useRef(null),u=H.useRef(null),d=H.useRef(null),f=Ye(t,d,o.onViewportChange),p=r.join(`+`).replace(/Key/g,``).replace(/Digit/g,``),m=o.toastCount>0;H.useEffect(()=>{let e=e=>{r.length!==0&&r.every(t=>e[t]||e.code===t)&&d.current?.focus()};return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[r]),H.useEffect(()=>{let e=c.current,t=d.current;if(m&&e&&t){let n=()=>{if(!o.isClosePausedRef.current){let e=new CustomEvent(jp);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){let e=new CustomEvent(Mp);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},i=t=>{e.contains(t.relatedTarget)||r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener(`focusin`,n),e.addEventListener(`focusout`,i),e.addEventListener(`pointermove`,n),e.addEventListener(`pointerleave`,a),window.addEventListener(`blur`,n),window.addEventListener(`focus`,r),()=>{e.removeEventListener(`focusin`,n),e.removeEventListener(`focusout`,i),e.removeEventListener(`pointermove`,n),e.removeEventListener(`pointerleave`,a),window.removeEventListener(`blur`,n),window.removeEventListener(`focus`,r)}}},[m,o.isClosePausedRef]);let h=H.useCallback(({tabbingDirection:e})=>{let t=s().map(t=>{let n=t.ref.current,r=[n,...om(n)];return e===`forwards`?r:r.reverse()});return(e===`forwards`?t.reverse():t).flat()},[s]);return H.useEffect(()=>{let e=d.current;if(e){let t=t=>{let n=t.altKey||t.ctrlKey||t.metaKey;if(t.key===`Tab`&&!n){let n=document.activeElement,r=t.shiftKey;if(t.target===e&&r){l.current?.focus();return}let i=h({tabbingDirection:r?`backwards`:`forwards`}),a=i.findIndex(e=>e===n);sm(i.slice(a+1))?t.preventDefault():r?l.current?.focus():u.current?.focus()}};return e.addEventListener(`keydown`,t),()=>e.removeEventListener(`keydown`,t)}},[s,h]),(0,U.jsxs)(dt,{ref:c,role:`region`,"aria-label":i.replace(`{hotkey}`,p),tabIndex:-1,style:{pointerEvents:m?void 0:`none`},children:[m&&(0,U.jsx)(Fp,{ref:l,onFocusFromOutsideViewport:()=>{sm(h({tabbingDirection:`forwards`}))}}),(0,U.jsx)(xp.Slot,{scope:n,children:(0,U.jsx)(V.ol,{tabIndex:-1,...a,ref:f})}),m&&(0,U.jsx)(Fp,{ref:u,onFocusFromOutsideViewport:()=>{sm(h({tabbingDirection:`backwards`}))}})]})});Np.displayName=kp;var Pp=`ToastFocusProxy`,Fp=H.forwardRef((e,t)=>{let{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=Dp(Pp,n);return(0,U.jsx)(Ot,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:`fixed`},onFocus:e=>{let t=e.relatedTarget;a.viewport?.contains(t)||r()}})});Fp.displayName=Pp;var Ip=`Toast`,Lp=`toast.swipeStart`,Rp=`toast.swipeMove`,zp=`toast.swipeCancel`,Bp=`toast.swipeEnd`,Vp=H.forwardRef((e,t)=>{let{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[s,c]=wt({prop:r,defaultProp:i??!0,onChange:a,caller:Ip});return(0,U.jsx)(Ct,{present:n||s,children:(0,U.jsx)(Wp,{open:s,...o,ref:t,onClose:()=>c(!1),onPause:ot(e.onPause),onResume:ot(e.onResume),onSwipeStart:B(e.onSwipeStart,e=>{e.currentTarget.setAttribute(`data-swipe`,`start`)}),onSwipeMove:B(e.onSwipeMove,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute(`data-swipe`,`move`),e.currentTarget.style.setProperty(`--radix-toast-swipe-move-x`,`${t}px`),e.currentTarget.style.setProperty(`--radix-toast-swipe-move-y`,`${n}px`)}),onSwipeCancel:B(e.onSwipeCancel,e=>{e.currentTarget.setAttribute(`data-swipe`,`cancel`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-y`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-end-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-end-y`)}),onSwipeEnd:B(e.onSwipeEnd,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute(`data-swipe`,`end`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-y`),e.currentTarget.style.setProperty(`--radix-toast-swipe-end-x`,`${t}px`),e.currentTarget.style.setProperty(`--radix-toast-swipe-end-y`,`${n}px`),c(!1)})})})});Vp.displayName=Ip;var[Hp,Up]=wp(Ip,{onClose(){}}),Wp=H.forwardRef((e,t)=>{let{__scopeToast:n,type:r=`foreground`,duration:i,open:a,onClose:o,onEscapeKeyDown:s,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=e,h=Dp(Ip,n),[g,_]=H.useState(null),v=Ye(t,e=>_(e)),y=H.useRef(null),b=H.useRef(null),x=i||h.duration,S=H.useRef(0),C=H.useRef(x),w=H.useRef(0),{onToastAdd:T,onToastRemove:E}=h,D=ot(()=>{g?.contains(document.activeElement)&&h.viewport?.focus(),o()}),O=H.useCallback(e=>{!e||e===1/0||(window.clearTimeout(w.current),S.current=new Date().getTime(),w.current=window.setTimeout(D,e))},[D]);H.useEffect(()=>{let e=h.viewport;if(e){let t=()=>{O(C.current),l?.()},n=()=>{let e=new Date().getTime()-S.current;C.current-=e,window.clearTimeout(w.current),c?.()};return e.addEventListener(jp,n),e.addEventListener(Mp,t),()=>{e.removeEventListener(jp,n),e.removeEventListener(Mp,t)}}},[h.viewport,x,c,l,O]),H.useEffect(()=>{a&&!h.isClosePausedRef.current&&O(x)},[a,x,h.isClosePausedRef,O]),H.useEffect(()=>(T(),()=>E()),[T,E]);let k=H.useMemo(()=>g?tm(g):null,[g]);return h.viewport?(0,U.jsxs)(U.Fragment,{children:[k&&(0,U.jsx)(Gp,{__scopeToast:n,role:`status`,"aria-live":r===`foreground`?`assertive`:`polite`,"aria-atomic":!0,children:k}),(0,U.jsx)(Hp,{scope:n,onClose:D,children:Kt.createPortal((0,U.jsx)(xp.ItemSlot,{scope:n,children:(0,U.jsx)(Ze,{asChild:!0,onEscapeKeyDown:B(s,()=>{h.isFocusedToastEscapeKeyDownRef.current||D(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,U.jsx)(V.li,{role:`status`,"aria-live":`off`,"aria-atomic":!0,tabIndex:0,"data-state":a?`open`:`closed`,"data-swipe-direction":h.swipeDirection,...m,ref:v,style:{userSelect:`none`,touchAction:`none`,...e.style},onKeyDown:B(e.onKeyDown,e=>{e.key===`Escape`&&(s?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:B(e.onPointerDown,e=>{e.button===0&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:B(e.onPointerMove,e=>{if(!y.current)return;let t=e.clientX-y.current.x,n=e.clientY-y.current.y,r=!!b.current,i=[`left`,`right`].includes(h.swipeDirection),a=[`left`,`up`].includes(h.swipeDirection)?Math.min:Math.max,o=i?a(0,t):0,s=i?0:a(0,n),c=e.pointerType===`touch`?10:2,l={x:o,y:s},f={originalEvent:e,delta:l};r?(b.current=l,nm(Rp,d,f,{discrete:!1})):rm(l,h.swipeDirection,c)?(b.current=l,nm(Lp,u,f,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>c||Math.abs(n)>c)&&(y.current=null)}),onPointerUp:B(e.onPointerUp,e=>{let t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){let n=e.currentTarget,r={originalEvent:e,delta:t};rm(t,h.swipeDirection,h.swipeThreshold)?nm(Bp,p,r,{discrete:!0}):nm(zp,f,r,{discrete:!0}),n.addEventListener(`click`,e=>e.preventDefault(),{once:!0})}})})})}),h.viewport)})]}):null}),Gp=e=>{let{__scopeToast:t,children:n,...r}=e,i=Dp(Ip,t),[a,o]=H.useState(!1),[s,c]=H.useState(!1);return im(()=>o(!0)),H.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),s?null:(0,U.jsx)(vt,{asChild:!0,children:(0,U.jsx)(Ot,{...r,children:a&&(0,U.jsxs)(U.Fragment,{children:[i.label,` `,n]})})})},Kp=`ToastTitle`,qp=H.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,U.jsx)(V.div,{...r,ref:t})});qp.displayName=Kp;var Jp=`ToastDescription`,Yp=H.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,U.jsx)(V.div,{...r,ref:t})});Yp.displayName=Jp;var Xp=`ToastAction`,Zp=H.forwardRef((e,t)=>{let{altText:n,...r}=e;return n.trim()?(0,U.jsx)(em,{altText:n,asChild:!0,children:(0,U.jsx)($p,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Xp}\`. Expected non-empty \`string\`.`),null)});Zp.displayName=Xp;var Qp=`ToastClose`,$p=H.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e,i=Up(Qp,n);return(0,U.jsx)(em,{asChild:!0,children:(0,U.jsx)(V.button,{type:`button`,...r,ref:t,onClick:B(e.onClick,i.onClose)})})});$p.displayName=Qp;var em=H.forwardRef((e,t)=>{let{__scopeToast:n,altText:r,...i}=e;return(0,U.jsx)(V.div,{"data-radix-toast-announce-exclude":``,"data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function tm(e){let t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),am(e)){let n=e.ariaHidden||e.hidden||e.style.display===`none`,r=e.dataset.radixToastAnnounceExclude===``;if(!n)if(r){let n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...tm(e))}}),t}function nm(e,t,n,{discrete:r}){let i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Je(i,a):i.dispatchEvent(a)}var rm=(e,t,n=0)=>{let r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t===`left`||t===`right`?a&&r>n:!a&&i>n};function im(e=()=>{}){let t=ot(e);Mt(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}function am(e){return e.nodeType===e.ELEMENT_NODE}function om(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t=e.tagName===`INPUT`&&e.type===`hidden`;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function sm(e){let t=document.activeElement;return e.some(e=>e===t?!0:(e.focus(),document.activeElement!==t))}var cm=Op,lm=Np,um=Vp,dm=qp,fm=Yp,pm=Zp,mm=$p,hm=cm,gm=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(lm,{ref:n,className:q(`fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]`,e),...t}));gm.displayName=lm.displayName;var _m=pu(`group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full`,{variants:{variant:{default:`border bg-background text-foreground`,destructive:`destructive group border-destructive bg-destructive text-destructive-foreground`}},defaultVariants:{variant:`default`}}),vm=H.forwardRef(({className:e,variant:t,...n},r)=>(0,U.jsx)(um,{ref:r,className:q(_m({variant:t}),e),...n}));vm.displayName=um.displayName;var ym=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(pm,{ref:n,className:q(`inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive`,e),...t}));ym.displayName=pm.displayName;var bm=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(mm,{ref:n,className:q(`absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600`,e),"toast-close":``,...t,children:(0,U.jsx)(Ff,{className:`h-4 w-4`})}));bm.displayName=mm.displayName;var xm=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(dm,{ref:n,className:q(`text-sm font-semibold`,e),...t}));xm.displayName=dm.displayName;var Sm=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(fm,{ref:n,className:q(`text-sm opacity-90`,e),...t}));Sm.displayName=fm.displayName;function Cm(){let{toasts:e}=vp();return(0,U.jsxs)(hm,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return(0,U.jsxs)(vm,{...i,children:[(0,U.jsxs)(`div`,{className:`grid gap-1`,children:[t&&(0,U.jsx)(xm,{children:t}),n&&(0,U.jsx)(Sm,{children:n})]}),r,(0,U.jsx)(bm,{})]},e)}),(0,U.jsx)(gm,{})]})}function wm(e){let t=null;return()=>(t??=e(),t)}function Tm(e,t){return e.filter(e=>e!==t)}function Em(e,t){let n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);let i=[];return n.forEach(e=>i.push(e)),i}var Dm=class{enter(e){let t=this.entered.length;return this.entered=Em(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),t===0&&this.entered.length>0}leave(e){let t=this.entered.length;return this.entered=Tm(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}},Om=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}},km=e({FILE:()=>Am,HTML:()=>Nm,TEXT:()=>Mm,URL:()=>jm});const Am=`__NATIVE_FILE__`,jm=`__NATIVE_URL__`,Mm=`__NATIVE_TEXT__`,Nm=`__NATIVE_HTML__`;function Pm(e,t,n){return t.reduce((t,n)=>t||e.getData(n),``)??n}const Fm={[Am]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:[`Files`]},[Nm]:{exposeProperties:{html:(e,t)=>Pm(e,t,``),dataTransfer:e=>e},matchesTypes:[`Html`,`text/html`]},[jm]:{exposeProperties:{urls:(e,t)=>Pm(e,t,``).split(`
`),dataTransfer:e=>e},matchesTypes:[`Url`,`text/uri-list`]},[Mm]:{exposeProperties:{text:(e,t)=>Pm(e,t,``),dataTransfer:e=>e},matchesTypes:[`Text`,`text/plain`]}};function Im(e,t){let n=Fm[e];if(!n)throw Error(`native type ${e} has no configuration`);let r=new Om(n);return r.loadDataTransfer(t),r}function Lm(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(Fm).filter(e=>{let n=Fm[e];return n?.matchesTypes?n.matchesTypes.some(e=>t.indexOf(e)>-1):!1})[0]||null}const Rm=wm(()=>/firefox/i.test(navigator.userAgent)),zm=wm(()=>!!window.safari);var Bm=class{interpolate(e){let{xs:t,ys:n,c1s:r,c2s:i,c3s:a}=this,o=t.length-1;if(e===t[o])return n[o];let s=0,c=a.length-1,l;for(;s<=c;){l=Math.floor(.5*(s+c));let r=t[l];if(r<e)s=l+1;else if(r>e)c=l-1;else return n[l]}o=Math.max(0,c);let u=e-t[o],d=u*u;return n[o]+r[o]*u+i[o]*d+a[o]*u*d}constructor(e,t){let{length:n}=e,r=[];for(let e=0;e<n;e++)r.push(e);r.sort((t,n)=>e[t]<e[n]?-1:1);let i=[],a=[],o=[],s,c;for(let r=0;r<n-1;r++)s=e[r+1]-e[r],c=t[r+1]-t[r],a.push(s),i.push(c),o.push(c/s);let l=[o[0]];for(let e=0;e<a.length-1;e++){let t=o[e],n=o[e+1];if(t*n<=0)l.push(0);else{s=a[e];let r=a[e+1],i=s+r;l.push(3*i/((i+r)/t+(i+s)/n))}}l.push(o[o.length-1]);let u=[],d=[],f;for(let e=0;e<l.length-1;e++){f=o[e];let t=l[e],n=1/a[e],r=t+l[e+1]-f-f;u.push((f-t-r)*n),d.push(r*n*n)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=u,this.c3s=d}},Vm=1;function Hm(e){let t=e.nodeType===Vm?e:e.parentElement;if(!t)return null;let{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Um(e){return{x:e.clientX,y:e.clientY}}function Wm(e){return e.nodeName===`IMG`&&(Rm()||!document.documentElement?.contains(e))}function Gm(e,t,n,r){let i=e?t.width:n,a=e?t.height:r;return zm()&&e&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function Km(e,t,n,r,i){let a=Wm(t),o=Hm(a?e:t),s={x:n.x-o.x,y:n.y-o.y},{offsetWidth:c,offsetHeight:l}=e,{anchorX:u,anchorY:d}=r,{dragPreviewWidth:f,dragPreviewHeight:p}=Gm(a,t,c,l),m=()=>{let e=new Bm([0,.5,1],[s.y,s.y/l*p,s.y+p-l]).interpolate(d);return zm()&&a&&(e+=(window.devicePixelRatio-1)*p),e},h=()=>new Bm([0,.5,1],[s.x,s.x/c*f,s.x+f-c]).interpolate(u),{offsetX:g,offsetY:_}=i,v=g===0||g,y=_===0||_;return{x:v?g:h(),y:y?_:m()}}var qm=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<`u`)return window}get document(){if(this.globalContext?.document)return this.globalContext.document;if(this.window)return this.window.document}get rootElement(){return this.optionsArgs?.rootElement||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function Jm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ym(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Jm(e,t,n[t])})}return e}var Xm=class{profile(){return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:this.dragStartSourceIds?.length||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw Error(`Cannot have two HTML5 backends at the same time.`);e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)==null||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);let r=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute(`draggable`,`true`),t.addEventListener(`dragstart`,r),t.addEventListener(`selectstart`,i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener(`dragstart`,r),t.removeEventListener(`selectstart`,i),t.setAttribute(`draggable`,`false`)}}connectDropTarget(e,t){let n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener(`dragenter`,n),t.addEventListener(`dragover`,r),t.addEventListener(`drop`,i),()=>{t.removeEventListener(`dragenter`,n),t.removeEventListener(`dragover`,r),t.removeEventListener(`drop`,i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener(`dragstart`,this.handleTopDragStart),e.addEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.addEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.addEventListener(`dragenter`,this.handleTopDragEnter),e.addEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.addEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.addEventListener(`dragover`,this.handleTopDragOver),e.addEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.addEventListener(`drop`,this.handleTopDrop),e.addEventListener(`drop`,this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener(`dragstart`,this.handleTopDragStart),e.removeEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.removeEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.removeEventListener(`dragenter`,this.handleTopDragEnter),e.removeEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.removeEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.removeEventListener(`dragover`,this.handleTopDragOver),e.removeEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.removeEventListener(`drop`,this.handleTopDrop),e.removeEventListener(`drop`,this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Ym({dropEffect:this.altKeyPressed?`copy`:`move`},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?`copy`:this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId();return Ym({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(km).some(t=>km[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Im(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>this.rootElement?.addEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)==null||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||=[],this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&Hm(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;e==null||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{this.hoverRafId===null&&typeof requestAnimationFrame<`u`&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<`u`&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let n=Um(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});let{dataTransfer:r}=e,i=Lm(r);if(this.monitor.isDragging()){if(r&&typeof r.setDragImage==`function`){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){let{anchorX:e,anchorY:a,offsetX:o,offsetY:s}=this.getCurrentSourcePreviewNodeOptions(),c=Km(t,i,n,{anchorX:e,anchorY:a},{offsetX:o,offsetY:s});r.setDragImage(i,c.x,c.y)}}try{r?.setData(`application/json`,{})}catch{}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute(`draggable`)))return;else e.preventDefault()},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:n}=e,r=Lm(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Um(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`);return}this.altKeyPressed=e.altKey,this.lastClientOffset=Um(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var t;e.preventDefault(),(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}else Lm(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Um(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;typeof t.dragDrop==`function`&&(t.tagName===`INPUT`||t.tagName===`SELECT`||t.tagName===`TEXTAREA`||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new qm(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Dm(this.isNodeInDocument)}};const Zm=function(e,t,n){return new Xm(e,t,n)};var Qm;(function(e){e.mouse=`mouse`,e.touch=`touch`,e.keyboard=`keyboard`})(Qm||={});var $m=class{get delay(){return this.args.delay??0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){return this.args.ignoreContextMenu??!1}get enableHoverOutsideTarget(){return this.args.enableHoverOutsideTarget??!1}get enableKeyboardEvents(){return this.args.enableKeyboardEvents??!1}get enableMouseEvents(){return this.args.enableMouseEvents??!1}get enableTouchEvents(){return this.args.enableTouchEvents??!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){return this.args?.delayTouchStart??this.args?.delay??0}get delayMouseStart(){return this.args?.delayMouseStart??this.args?.delay??0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<`u`)return window}get document(){if(this.context?.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){return this.args?.rootElement||this.document}constructor(e,t){this.args=e,this.context=t}};function eh(e,t,n,r){return Math.sqrt(Math.abs(n-e)**2+Math.abs(r-t)**2)}function th(e,t,n,r,i){if(!i)return!1;let a=Math.atan2(r-t,n-e)*180/Math.PI+180;for(let e=0;e<i.length;++e){let t=i[e];if(t&&(t.start==null||a>=t.start)&&(t.end==null||a<=t.end))return!0}return!1}var nh={Left:1,Right:2,Center:4},rh={Left:0,Center:1,Right:2};function ih(e){return e.button===void 0||e.button===rh.Left}function ah(e){return e.buttons===void 0||(e.buttons&nh.Left)===0}function oh(e){return!!e.targetTouches}var sh=1;function ch(e){let t=e.nodeType===sh?e:e.parentElement;if(!t)return;let{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function lh(e,t){if(e.targetTouches.length===1)return uh(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return uh(e.touches[0])}function uh(e,t){return oh(e)?lh(e,t):{x:e.clientX,y:e.clientY}}const dh=(()=>{let e=!1;try{addEventListener(`test`,()=>{},Object.defineProperty({},`passive`,{get(){return e=!0,!0}}))}catch{}return e})();var fh={[Qm.mouse]:{start:`mousedown`,move:`mousemove`,end:`mouseup`,contextmenu:`contextmenu`},[Qm.touch]:{start:`touchstart`,move:`touchmove`,end:`touchend`},[Qm.keyboard]:{keydown:`keydown`}},ph=class e{profile(){return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(Ar(!e.isSetUp,`Cannot have two Touch backends at the same time.`),e.isSetUp=!0,this.addEventListener(t,`start`,this.getTopMoveStartHandler()),this.addEventListener(t,`start`,this.handleTopMoveStartCapture,!0),this.addEventListener(t,`move`,this.handleTopMove),this.addEventListener(t,`move`,this.handleTopMoveCapture,!0),this.addEventListener(t,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,`keydown`,this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,`start`,this.handleTopMoveStartCapture,!0),this.removeEventListener(t,`start`,this.handleTopMoveStart),this.removeEventListener(t,`move`,this.handleTopMoveCapture,!0),this.removeEventListener(t,`move`,this.handleTopMove),this.removeEventListener(t,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,`keydown`,this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n,r=!1){let i=dh?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){let a=fh[r][t];a&&e.addEventListener(a,n,i)})}removeEventListener(e,t,n,r=!1){let i=dh?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){let a=fh[r][t];a&&e.removeEventListener(a,n,i)})}connectDragSource(e,t){let n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,`start`,n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,`start`,n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let r=r=>{if(!this.document||!n||!this.monitor.isDragging())return;let i;switch(r.type){case fh.mouse.move:i={x:r.clientX,y:r.clientY};break;case fh.touch.move:i={x:r.touches[0]?.clientX||0,y:r.touches[0]?.clientY||0};break}let a=i==null?void 0:this.document.elementFromPoint(i.x,i.y),o=a&&t.contains(a);if(a===t||o)return this.handleMove(r,e)};return this.addEventListener(this.document.body,`move`,r),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,`move`,r))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display=`none`,this.draggedSourceNode.removeAttribute(`data-reactid`),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&ch(t)},this.handleTopMoveStartCapture=e=>{ih(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!ih(e))return;let t=uh(e);t&&(oh(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!ih(e))return;let t=e.type===fh.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:t,dragOverTargetIds:n}=this,r=this.options.enableHoverOutsideTarget,i=uh(e,this.lastTargetTouchFallback);if(!i)return;if(this._isScrolling||!this.monitor.isDragging()&&th(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,i.x,i.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty(`x`)&&t&&eh(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,i.x,i.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let a=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(a),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();let o=(n||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),s=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(i.x,i.y,o):this.document.elementsFromPoint(i.x,i.y),c=[];for(let e in s){if(!s.hasOwnProperty(e))continue;let t=s[e];for(t!=null&&c.push(t);t;)t=t.parentElement,t&&c.indexOf(t)===-1&&c.push(t)}let l=c.filter(e=>o.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,n)=>n.indexOf(e)===t);if(r)for(let e in this.targetNodes){let t=this.targetNodes.get(e);if(a&&t&&t.contains(a)&&l.indexOf(e)===-1){l.unshift(e);break}}l.reverse(),this.actions.hover(l,{clientOffset:i})},this._getDropTargetId=e=>{let t=this.targetNodes.keys(),n=t.next();for(;n.done===!1;){let r=n.value;if(e===this.targetNodes.get(r))return r;n=t.next()}},this.handleTopMoveEndCapture=e=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,ah(e)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=e=>{e.key===`Escape`&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new $m(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Qm.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Qm.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Qm.keyboard)}};const mh=function(e,t={},n={}){return new ph(e,t,n)};var hh=(()=>wd(({proxy:e})=>{let[t,n]=(0,H.useState)({type:`row`,props:{text:`Hi`}});(0,H.useEffect)(()=>{e.register({setLayout:n})},[e,n]);let{useReactEntries:r}=zg,i=r(),a=i.filter(e=>e.WrapperComponent);return(0,U.jsxs)(ya,{backend:vr.isMobile()?mh:Zm,children:[i.filter(e=>e.reactNode).map(e=>(0,U.jsx)(H.Fragment,{children:e.reactNode},e.id)),(0,U.jsx)(Cm,{}),(0,U.jsx)(j,{className:`workbench ${vr.isMobile()?`mobile`:`pc`}`,w:`100%`,h:`100%`,overflow:`hidden`,children:(e=>{let n=ep.render(t);return a.reduceRight((e,t,n)=>{let r=t.WrapperComponent;return(0,U.jsx)(r,{children:e})},n)})(0)})]})}))();const gh=(()=>({renderLayout:e=>{op.createRoot(e).render((0,U.jsx)(r,{children:hh.instance}))},sidebar:$f.proxy,pageBox:Qf.proxy,titleBar:Zf.proxy,statusBar:Xf.proxy,activityBar:Yf.proxy,workbench:hh.proxy}))();function _h(e={}){let{level:t=`INFO`,format:n=(e,t)=>`[${e}] ${t}`}=e;function r(e,r){[`DEBUG`,`INFO`,`WARNING`,`ERROR`].indexOf(e)>=[`DEBUG`,`INFO`,`WARNING`,`ERROR`].indexOf(t)&&n(e,r)}return{debug:e=>r(`DEBUG`,e),info:e=>r(`INFO`,e),warning:e=>r(`WARNING`,e),error:e=>r(`ERROR`,e)}}const vh=(()=>{let e=_h();return{debug:e.debug,info:e.info,warning:e.warning,error:e.error,createLogger:_h}})();var yh=`Dialog`,[bh,xh]=at(yh),[Sh,Ch]=bh(yh),wh=e=>{let{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,s=H.useRef(null),c=H.useRef(null),[l,u]=wt({prop:r,defaultProp:i??!1,onChange:a,caller:yh});return(0,U.jsx)(Sh,{scope:t,triggerRef:s,contentRef:c,contentId:Xe(),titleId:Xe(),descriptionId:Xe(),open:l,onOpenChange:u,onOpenToggle:H.useCallback(()=>u(e=>!e),[u]),modal:o,children:n})};wh.displayName=yh;var Th=`DialogTrigger`,Eh=H.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=Ch(Th,n),a=Ye(t,i.triggerRef);return(0,U.jsx)(V.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Kh(i.open),...r,ref:a,onClick:B(e.onClick,i.onOpenToggle)})});Eh.displayName=Th;var Dh=`DialogPortal`,[Oh,kh]=bh(Dh,{forceMount:void 0}),Ah=e=>{let{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=Ch(Dh,t);return(0,U.jsx)(Oh,{scope:t,forceMount:n,children:H.Children.map(r,e=>(0,U.jsx)(Ct,{present:n||a.open,children:(0,U.jsx)(vt,{asChild:!0,container:i,children:e})}))})};Ah.displayName=Dh;var jh=`DialogOverlay`,Mh=H.forwardRef((e,t)=>{let n=kh(jh,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=Ch(jh,e.__scopeDialog);return a.modal?(0,U.jsx)(Ct,{present:r||a.open,children:(0,U.jsx)(Ph,{...i,ref:t})}):null});Mh.displayName=jh;var Nh=lt(`DialogOverlay.RemoveScroll`),Ph=H.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=Ch(jh,n);return(0,U.jsx)(te,{as:Nh,allowPinchZoom:!0,shards:[i.contentRef],children:(0,U.jsx)(V.div,{"data-state":Kh(i.open),...r,ref:t,style:{pointerEvents:`auto`,...r.style}})})}),Fh=`DialogContent`,Ih=H.forwardRef((e,t)=>{let n=kh(Fh,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=Ch(Fh,e.__scopeDialog);return(0,U.jsx)(Ct,{present:r||a.open,children:a.modal?(0,U.jsx)(Lh,{...i,ref:t}):(0,U.jsx)(Rh,{...i,ref:t})})});Ih.displayName=Fh;var Lh=H.forwardRef((e,t)=>{let n=Ch(Fh,e.__scopeDialog),r=H.useRef(null),i=Ye(t,n.contentRef,r);return H.useEffect(()=>{let e=r.current;if(e)return re(e)},[]),(0,U.jsx)(zh,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:B(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:B(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0;(t.button===2||n)&&e.preventDefault()}),onFocusOutside:B(e.onFocusOutside,e=>e.preventDefault())})}),Rh=H.forwardRef((e,t)=>{let n=Ch(Fh,e.__scopeDialog),r=H.useRef(!1),i=H.useRef(!1);return(0,U.jsx)(zh,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),zh=H.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,s=Ch(Fh,n),c=H.useRef(null),l=Ye(t,c);return _u(),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Cu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,U.jsx)(Qe,{role:`dialog`,id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Kh(s.open),...o,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Xh,{titleId:s.titleId}),(0,U.jsx)(Qh,{contentRef:c,descriptionId:s.descriptionId})]})]})}),Bh=`DialogTitle`,Vh=H.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=Ch(Bh,n);return(0,U.jsx)(V.h2,{id:i.titleId,...r,ref:t})});Vh.displayName=Bh;var Hh=`DialogDescription`,Uh=H.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=Ch(Hh,n);return(0,U.jsx)(V.p,{id:i.descriptionId,...r,ref:t})});Uh.displayName=Hh;var Wh=`DialogClose`,Gh=H.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=Ch(Wh,n);return(0,U.jsx)(V.button,{type:`button`,...r,ref:t,onClick:B(e.onClick,()=>i.onOpenChange(!1))})});Gh.displayName=Wh;function Kh(e){return e?`open`:`closed`}var qh=`DialogTitleWarning`,[Jh,Yh]=Tt(qh,{contentName:Fh,titleName:Bh,docsSlug:`dialog`}),Xh=({titleId:e})=>{let t=Yh(qh),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return H.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Zh=`DialogDescriptionWarning`,Qh=({contentRef:e,descriptionId:t})=>{let n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Yh(Zh).contentName}}.`;return H.useEffect(()=>{let r=e.current?.getAttribute(`aria-describedby`);t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},$h=wh,eg=Eh,tg=Ah,ng=Mh,rg=Ih,ig=Vh,ag=Uh,og=Gh,sg=$h,cg=eg,lg=tg,ug=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ng,{ref:n,className:q(`fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t}));ug.displayName=ng.displayName;var dg=H.forwardRef(({className:e,children:t,...n},r)=>(0,U.jsxs)(lg,{children:[(0,U.jsx)(ug,{}),(0,U.jsxs)(rg,{ref:r,className:q(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg`,e),...n,children:[t,(0,U.jsxs)(og,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,U.jsx)(Ff,{className:`h-4 w-4`}),(0,U.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));dg.displayName=rg.displayName;var fg=({className:e,...t})=>(0,U.jsx)(`div`,{className:q(`flex flex-col space-y-1.5 text-center sm:text-left`,e),...t});fg.displayName=`DialogHeader`;var pg=({className:e,...t})=>(0,U.jsx)(`div`,{className:q(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});pg.displayName=`DialogFooter`;var mg=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ig,{ref:n,className:q(`text-lg font-semibold leading-none tracking-tight`,e),...t}));mg.displayName=ig.displayName;var hg=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ag,{ref:n,className:q(`text-sm text-muted-foreground`,e),...t}));hg.displayName=ag.displayName;var gg=H.forwardRef(({className:e,type:t,...n},r)=>(0,U.jsx)(`input`,{type:t,className:q(`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:r,...n}));gg.displayName=`Input`;var _g=t(It(),1).createRoot((()=>{let e=document.createElement(`div`);return e.id=`modal-container`,document.body.appendChild(e),e})());const vg=H.createContext(void 0),yg=(()=>{let e=({content:e,title:t,onOk:n,onCancel:r,okText:i=`Confirm`,cancelText:a=`Cancel`,footer:o=!0,width:s,height:c,closeIcon:l,modalContentClassName:u,modalBodyClassName:d})=>{let f=wd(({proxy:f})=>(0,U.jsx)(({content:e})=>{let[p,m]=(0,H.useState)(!1);(0,H.useEffect)(()=>f.register({open:()=>m(!0),close:()=>m(!1)}),[]);let h=e=>{m(e),e||r?.()},g=H.forwardRef(({className:e,children:t,showCloseButton:n=!0,...r},i)=>(0,U.jsxs)(tg,{children:[(0,U.jsx)(ng,{className:`fixed inset-0 z-50 bg-black/80 transition-opacity duration-300 data-[state=open]:opacity-100 data-[state=closed]:opacity-0`}),(0,U.jsx)(`style`,{children:`
                @keyframes dialog-fade-in {
                  from {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.96);
                  }
                  to {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                  }
                }
                @keyframes dialog-fade-out {
                  from {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                  }
                  to {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.96);
                  }
                }
                [data-radix-dialog-content][data-state="open"] {
                  animation: dialog-fade-in 300ms ease-out;
                }
                [data-radix-dialog-content][data-state="closed"] {
                  animation: dialog-fade-out 200ms ease-in;
                }
              `}),(0,U.jsxs)(rg,{ref:i,className:q(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background shadow-lg sm:rounded-lg`,e),...r,children:[t,n&&(0,U.jsxs)(og,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,U.jsx)(Ff,{className:`h-4 w-4`}),(0,U.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));return g.displayName=`DialogContent`,(0,U.jsx)(vg.Provider,{value:f,children:(0,U.jsx)(sg,{open:p,onOpenChange:h,children:(0,U.jsxs)(g,{className:q(`sm:max-w-lg p-0`,u),style:{width:s||void 0,height:c||void 0,maxWidth:s||void 0},showCloseButton:l!==!1,children:[t&&(0,U.jsx)(fg,{className:`px-6 pt-6 pb-4`,children:(0,U.jsx)(mg,{children:t})}),l&&typeof l!=`boolean`&&l,(0,U.jsx)(`div`,{className:q(`px-6`,d),children:e}),o&&(0,U.jsxs)(pg,{className:`px-6 pb-6 pt-4`,children:[(0,U.jsx)(hu,{variant:`ghost`,onClick:()=>{m(!1),r?.()},children:a}),(0,U.jsx)(hu,{onClick:()=>{n?.()},children:i})]})]})})})},{content:e}));return _g.render(f.instance),f.proxy};return{createModal:e,prompt:(t,n)=>{let r=wd(({proxy:e})=>{let[t,r]=(0,H.useState)();return(0,H.useEffect)(()=>{e.register({getInput:()=>t})},[t,e]),(0,U.jsxs)(`div`,{className:`space-y-4`,children:[n&&(0,U.jsx)(hg,{children:n}),(0,U.jsx)(gg,{onChange:e=>r(e.target.value),autoFocus:!0})]})});return new Promise(n=>{let i=e({title:t,content:r.instance,onOk:()=>{n(r.proxy.getInput()),i.close()},onCancel:()=>{n(void 0)}});i.open()})},confirm:t=>{let{title:n,description:r}=t;return new Promise(t=>{let i=e({title:n,content:r?(0,U.jsx)(hg,{children:r}):null,onOk:()=>{t(!0),i.close()},onCancel:()=>{t(!1),i.close()}});i.open()})},open:(...t)=>{let n=e(...t);return n.open(),n}}})();var bg=t(It(),1);const xg=(()=>{let e=Cd(),t=()=>{let t=T();return(0,H.useEffect)(()=>{let n=e=>n=>{t(typeof n==`string`?{description:n,status:e,duration:3e3,isClosable:!0,position:`bottom-right`}:{duration:3e3,isClosable:!0,position:`bottom-right`,...n,status:e})},r=n(`success`),i=n(`error`),a=n(`info`),o=n(`warning`),s=n(`loading`);e.register({success:r,error:i,warning:o,loading:s,info:a})},[t]),(0,U.jsx)(U.Fragment,{})};if(!document.getElementById(`message-container`)){let e=document.createElement(`div`);e.id=`message-container`,document.body&&(document.body.appendChild(e),bg.createRoot(e).render((0,U.jsx)(r,{children:(0,U.jsx)(t,{})})))}return e})(),Sg=(()=>{let e=[];return{use:t=>{Array.isArray(t)||(t=[t]),t.forEach(t=>{e.push(t),t.activate(J)})}}})();var Cg=t(It(),1),wg=({content:e,isOpen:t,onClose:n,targetRect:r})=>!t||!r?null:(0,U.jsx)(`div`,{style:{position:`absolute`,top:r.bottom+window.scrollY,left:r.left+window.scrollX,background:`white`,padding:`10px`,border:`1px solid #ccc`,borderRadius:`4px`,boxShadow:`0 2px 10px rgba(0, 0, 0, 0.1)`},onClick:n,children:e}),Tg=null,Eg=(e,t)=>{Tg&&Tg.destroy();let n=e.getBoundingClientRect(),r=document.createElement(`div`);document.body.appendChild(r);let i=Cg.createRoot(r),a=()=>{i.unmount(),document.body.removeChild(r)};return Tg={destroy:a},i.render((0,U.jsx)(wg,{content:t,isOpen:!0,onClose:()=>{a(),Tg=null},targetRect:n})),()=>{a(),Tg=null}};const Dg={open:({target:e,content:t})=>Eg(e,t)};var Og={create:()=>{let e={},t=[],n=t=>t in e,r=t=>e[t],i=(t,n)=>{e[t]=n},a=(e,n)=>{let r=t.filter(t=>t.key===e);for(let e of r)e.callback(n)};return{has:n,get:r,set:(e,t)=>{i(e,t),a(e,t)},waitAvailable:(e,i)=>{if(n(e))i(r(e));else{let n={key:e,callback:e=>{i(e);let r=t.indexOf(n);r>=0&&t.splice(r,1)}};t.push(n)}},subscribe:(e,n)=>{let r={key:e,callback:n};return t.push(r),()=>{let e=t.indexOf(r);e>=0&&t.splice(e,1)}}}}};const kg=(()=>Og.create())(),Ag=()=>{let e={},t=t=>Object.hasOwnProperty.call(e,t),n=(e,n)=>{for(let r in e=br(e),n)if(t(`${e}.${r}`))return!1;for(let t in n)r(`${e}.${t}`,n[t])},r=(t,n)=>{if(typeof t!=`string`){let e=[];for(let n of Object.keys(t)){let i=r(n,t[n]);i&&e.push(i)}return()=>e.forEach(e=>e())}else return e[t]=n,()=>delete e[t]},i=(n,...r)=>{if(!t(n))throw Error(`Service not found: ${n.toString()}`);return e[n](...r)};return{expose:r,exposeAt:n,invoke:i,createProxy:e=>new Proxy({},{get:(t,n)=>{let r=br(`${br(e)}.${n}`);return(...e)=>i(r,...e)}}),$map:e}};var jg=(e,t)=>`${e}.${t}`;const Mg=()=>{let e={},t=(t,n)=>{let r=br(t);return e[r]=n,()=>delete e[r]},n=(t,...n)=>{let r=br(t);if(!e[r])throw Error(`Service not found: ${r}`);return e[r](...n)};return{register:t,expose:t,registerFromMap:(e,n)=>{for(let r in n)n[r]&&t(jg(br(e),r),n[r])},invoke:n,createProxy:e=>new Proxy({},{get:(t,r)=>{let i=br(jg(br(e),r));return(...e)=>n(i,...e)}})}},Ng=Ag,Pg=Ng();oc.create({scope:`shortcut`,storage:`localStorage`});const Fg=ho(()=>{let{addShortcut:e,useShortcutList:t}=Bs(`ShortcutList`,[],e=>{let{add:t}=vd(e.setShortcutList,e.getShortcutList);return{addShortcut:t}});return{addShortcut:e,useShortcutList:()=>t().sort((e,t)=>(e.order||1/0)-(t.order||1/0))}}).create();let Ig=function(e){return e.Pending=`Pending`,e.Deffered=`Deffered`,e.InProgress=`InProgress`,e.Completed=`Completed`,e.Error=`Error`,e}({});var Lg=class{constructor(e,t,n=Ig.Pending){this.taskType=e,this.taskData=t,this.status=n}async execute(){this.status=Ig.InProgress;try{let e=this.taskType.execute(this.taskData);e instanceof Promise&&await e,this.status=Ig.Completed}catch(e){this.status=Ig.Error,console.error(`Task execution error:`,e)}}};const Rg=new class{constructor(e,t=new Map,n=[],r=[]){this.id=e,this.taskTypes=t,this.taskQueue=n,this.historyTasks=r}registerTaskType(e){this.taskTypes.set(e.name,e)}addTask(e,t,n={deffered:!1}){if(!this.taskTypes.has(e))throw Error(`Task type "${e}" is not registered.`);let r=new Lg(this.taskTypes.get(e),t,n.deffered?Ig.Deffered:Ig.Pending);this.taskQueue.push(r),this.saveTasks(),setTimeout(()=>{this.executeTasks()})}executeTasks(){this.taskQueue.filter(e=>e.status!==Ig.Deffered).forEach(e=>{e.status==Ig.Pending&&e.execute().then(()=>{this.archiveTask(e)})})}archiveTask(e){let t=this.taskQueue.indexOf(e);t!==-1&&(this.taskQueue.splice(t,1),this.historyTasks.push(e)),this.saveTasks()}continueInterruptedTasks(){this.taskQueue.forEach(e=>{e.status===Ig.InProgress&&e.execute().then(()=>{this.archiveTask(e)})})}saveTasks(){let e=this.serializeTasks();localStorage.setItem(this.id,JSON.stringify(e))}loadTasks(){let e=localStorage.getItem(this.id),t=null;try{t=e?JSON.parse(e):null}catch(e){console.error(`Error parsing stored tasks:`,e)}t&&this.deserializeTasks(t)}serializeTasks(){return{id:this.id,taskQueue:this.taskQueue.map(e=>({taskType:e.taskType.name,taskData:e.taskData,status:e.status})),historyTasks:this.historyTasks.map(e=>({taskType:e.taskType.name,taskData:e.taskData,status:e.status}))}}deserializeTasks(e){if(e.id!==this.id)throw Error(`Invalid serialized data for this task manager`);this.taskQueue=e.taskQueue.reduce((e,t)=>{let n=t.taskType;if(!this.taskTypes.has(n))return console.warn(`Task type "${n}" is not registered. Skipping this task.`),e;let r=new Lg(this.taskTypes.get(n),t.taskData);return r.status=t.status,r.status===Ig.Deffered&&(r.status=Ig.Pending),e.push(r),e},[]),this.historyTasks=e.historyTasks.reduce((e,t)=>{let n=t.taskType;if(!this.taskTypes.has(n))return console.warn(`Task type "${n}" is not registered. Skipping this task.`),e;let r=new Lg(this.taskTypes.get(n),t.taskData);return r.status=t.status,e.push(r),e},[])}start(){window.addEventListener(`DOMContentLoaded`,()=>{this.loadTasks(),this.continueInterruptedTasks(),this.executeTasks()})}}(`xbook::taskManager`),zg=new class{ReactEntries=Bs(`ReactEntries`,[],e=>{let{getReactEntries:t,setReactEntries:n}=e,{add:r,delete:i,update:a}=vd(n,t,`id`);return{addReactEntry:r,deleteReactEntry:i,updateReactEntry:a}});addReactEntry=e=>this.ReactEntries.addReactEntry(e);useReactEntries=()=>this.ReactEntries.useReactEntries()};var J={logService:vh,taskService:Rg,serviceBus:Pg,commandService:Sr,eventBus:Md,registry:kg,pluginService:Sg,cacheService:np,layoutService:gh,fs:ap,notificationService:xg,modalService:yg,componentService:ep,shortcutService:Fg,popupService:Dg,workbenchService:zg},Bg=e=>({doAddEvents:t=>{Object.entries(t).forEach(([t,n])=>{e.eventBus.on(t,n)})},doAddCommands:t=>{Array.isArray(t)?e.commandService.registerCommandWithScope(t[0],t[1]):t&&e.commandService.registerCommand(t)},doAddServices:t=>{Array.isArray(t)?e.serviceBus.exposeAt(t[0],t[1]):t&&e.serviceBus.expose(t)},doAddComponents:t=>{Object.entries(t).forEach(([t,n])=>{e.componentService.register(t,n)})},doAddActivities:t=>{Array.isArray(t)?t.forEach(t=>{e.layoutService.activityBar.addActivity(t)}):e.layoutService.activityBar.addActivity(t)},doAddPages:t=>{let n=(t,{id:n,title:r})=>{e.eventBus.on(`${t}::${n}`,()=>{e.layoutService.pageBox.addPage({id:n,title:r,viewData:{type:n}}),e.layoutService.pageBox.showPage(n)})},r=({id:t,title:n})=>{e.eventBus.on(t,()=>{e.layoutService.pageBox.addPage({id:t,title:n,viewData:{type:t}}),e.layoutService.pageBox.showPage(t)})};if(Array.isArray(t))for(let[e,{title:r}]of Object.entries(t[1]))n(t[0],{id:e,title:r});else if(t)for(let[e,{title:n}]of Object.entries(t))r({id:e,title:n})}});const Vg=({initilize:e,initialize:t,addCommands:n,addEvents:r,addServices:i,addComponents:a,addPages:o,addActivities:s})=>({activate:()=>{let c=Bg(J);if(r){let e=r(J);c.doAddEvents(e)}if(n){let e=n(J);c.doAddCommands(e)}if(i){let e=i(J);c.doAddServices(e)}if(a){let e=a(J);c.doAddComponents(e)}if(s){let e=s(J);c.doAddActivities(e)}if(o){let e=o(J);c.doAddPages(e)}(t||e)?.(J)}});function Hg({shortcut:e,isExpanded:t}){return(0,U.jsx)(If,{activity:{id:e.id,name:e.name,icon:e.icon},isExpanded:t,icon:(0,U.jsx)(df,{className:`w-full h-full`}),onClick:()=>{window.open(`https://github.com/Peiiii/gitary`,`_blank`,`noopener,noreferrer`)}})}var Ug={type:`column`,props:{h:`100%`,w:`100%`,className:`layout`},children:[{type:`row`,props:{h:`100%`,flexGrow:1,className:`middle-row`},children:[{type:`row`,props:{h:`100%`,flexShrink:0,className:``},children:[{type:`activityBar`},{type:`sidebar`},{type:`pageBox`}]}]}]},Wg={type:`column`,props:{h:`100%`,w:`100%`},children:[{type:`row`,props:{h:`100%`,flexGrow:1,className:`middle-row`},children:[{type:`row`,props:{flexShrink:0,h:`100%`},children:[{type:`activityBar`},{type:`row`,children:[{type:tp.SideResizer,props:{},children:[{type:`sidebar`},{type:`pageBox`}]}]}]}]}]},Gg={Initialized:`initialized:20241201`},Kg=Vg({initilize(e){window.xbook=e;let t=e.cacheService.space(`base`,`localStorage`);e.componentService.register(`Github`,df),e.shortcutService.addShortcut({id:`github`,name:`GitHub`,order:9999,icon:`Github`}),e.componentService.register(`shortcut:github`,Hg),vr.isMobile()?(e.layoutService.pageBox.showTabBar(),e.layoutService.workbench.setLayout(Ug),t.get(Gg.Initialized,!1)||(e.layoutService.sidebar.show(),e.layoutService.activityBar.show(),e.layoutService.pageBox.hide(),console.log(`initialize mobile layout:`,`sidebar:`,e.layoutService.sidebar.getVisible(),`activityBar:`,e.layoutService.activityBar.getVisible(),`pageBox:`,e.layoutService.pageBox.getVisible()),t.set(Gg.Initialized,!0)),e.commandService.registerCommand(xr.ToggleHome,()=>{e.layoutService.sidebar.getVisible()?(e.layoutService.sidebar.hide(),e.layoutService.activityBar.hide(),e.layoutService.pageBox.show()):(e.layoutService.sidebar.show(),e.layoutService.activityBar.show(),e.layoutService.pageBox.hide())}),e.commandService.registerCommand(xr.ToChatPage,()=>{e.layoutService.pageBox.show(),e.layoutService.sidebar.hide(),e.layoutService.activityBar.hide(),e.layoutService.sidebar.setFullwidth(!1)})):(e.layoutService.pageBox.showTabBar(),e.layoutService.workbench.setLayout(Wg),e.layoutService.sidebar.show(),e.layoutService.sidebar.setFullwidth(!1),e.commandService.registerCommand(xr.ToggleHome,()=>{e.layoutService.activityBar.toggle(),Jf.toggleLeft()}),e.commandService.registerCommand(xr.ToChatPage,()=>{}))}});const qg=Vg({initilize(e){e.workbenchService.addReactEntry({id:`toast-provider`,reactNode:(0,U.jsx)(Cm,{})})}}),Jg=Vg({initilize(e){e.workbenchService.addReactEntry({id:`tooltip-provider`,WrapperComponent:Fd})}});var Yg=Vg({initilize(e){e.pluginService.use([qg,Jg])}});const Xg=Vg({initilize(e){e.pluginService.use([Yg,Kg])}});var Zg=class{parse(e){if(!this.isValid(e))throw Error(`Invalid URI format for scheme: ${this.scheme}`);return this.parseUri(e)}isValid(e){return e.startsWith(`${this.scheme}:`)}getConfig(){return{}}getDefaultComponents(){return{scheme:this.scheme,authority:``,path:``,query:``,fragment:``}}parseUri(e){return{...this.getDefaultComponents()}}},Qg=class extends Zg{scheme=`file`;getConfig(){return{requiresAuthority:!1,supportsQuery:!1,supportsFragment:!1}}parseUri(e){let t=e.slice(this.scheme.length+1);if(t.startsWith(`///`))return{scheme:this.scheme,authority:``,path:t.slice(2),query:``,fragment:``};if(t.startsWith(`//`)){let[e,...n]=t.slice(2).split(`/`);return{scheme:this.scheme,authority:e,path:`/`+n.join(`/`),query:``,fragment:``}}throw Error(`Invalid file URI format`)}},$g=class extends Zg{scheme=`http`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!0}}parseUri(e){let t=new URL(e);return{scheme:this.scheme,authority:t.username?`${t.username}${t.password?`:`+t.password:``}@${t.host}`:t.host,path:t.pathname||`/`,query:t.search.slice(1),fragment:t.hash.slice(1)}}},e_=class extends $g{scheme=`https`},t_=class extends Zg{scheme=`command`;getConfig(){return{requiresAuthority:!1,supportsQuery:!0,supportsFragment:!1}}parseUri(e){let[t,n]=e.slice(this.scheme.length+1).split(`?`);return{scheme:this.scheme,authority:``,path:t,query:n||``,fragment:``}}},n_=class extends Zg{scheme=`db`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!1}}parseUri(e){let t=new URL(e),n=t.username?`${t.username}${t.password?`:`+t.password:``}@${t.host}`:t.host;return{scheme:this.scheme,authority:n,path:t.pathname,query:t.search.slice(1),fragment:``}}},r_=class extends Zg{scheme=`git`;getConfig(){return{requiresAuthority:!0,supportsQuery:!1,supportsFragment:!0}}parseUri(e){let[t,n]=e.slice(this.scheme.length+3).split(`#`),[r,...i]=t.split(`/`);return{scheme:this.scheme,authority:r,path:`/`+i.join(`/`),fragment:n||``,query:``}}},i_=class extends Zg{scheme=`memfs`;getConfig(){return{requiresAuthority:!1,supportsQuery:!1,supportsFragment:!1}}parseUri(e){let t=e.slice(this.scheme.length+1);return{scheme:this.scheme,authority:``,path:t.startsWith(`///`)?t.slice(2):t,query:``,fragment:``}}},a_=class extends Zg{scheme=`space`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!0}}parseUri(e){if(e.startsWith(`space:///`))throw Error(`Space URI requires spaceId`);let t=new URL(e),[n,r=``]=decodeURIComponent(t.pathname).split(`#`);return{scheme:this.scheme,authority:t.host,path:n,query:t.search.slice(1),fragment:r||t.hash.slice(1)}}},o_=class e{static instance;parsers=new Map;constructor(){this.register(new Qg),this.register(new $g),this.register(new e_),this.register(new t_),this.register(new n_),this.register(new r_),this.register(new i_),this.register(new a_)}static getInstance(){return e.instance||=new e,e.instance}register(e){this.parsers.set(e.scheme,e)}parse(e){let t=this.extractScheme(e),n=this.parsers.get(t);if(!n)throw Error(`No parser registered for scheme: ${t}`);return n.parse(e)}extractScheme(e){let t=e.match(/^([a-zA-Z][a-zA-Z0-9+.-]*?):/);if(!t)throw Error(`Invalid URI: ${e}`);return t[1]}},s_=class e{scheme;authority;path;query;fragment;constructor(e){this.scheme=e.scheme||``,this.authority=e.authority||``,this.path=e.path||``,this.query=e.query||``,this.fragment=e.fragment||``}get fsPath(){if(!this.scheme)throw Error(`Cannot derive fsPath for non-file scheme`);return this.path.replace(/\//g,`\\`)}with(t){return t?new e({scheme:t.scheme||this.scheme,authority:t.authority||this.authority,path:t.path||this.path,query:t.query||this.query,fragment:t.fragment||this.fragment}):this}toString(e){let t=`${this.scheme}:`;return this.authority&&(t+=`//${this.authority}`),t+=this.path,this.query&&!e?t+=`?${this._encodeQuery(this.query)}`:this.query&&(t+=`?${this.query}`),this.fragment&&!e?t+=`#${this._encodeFragment(this.fragment)}`:this.fragment&&(t+=`#${this.fragment}`),t}toJSON(){return{scheme:this.scheme,authority:this.authority,path:this.path,query:this.query,fragment:this.fragment}}_encodeQuery(e){return encodeURIComponent(e).replace(/%20/g,`+`)}_encodeFragment(e){return encodeURIComponent(e).replace(/%20/g,`+`)}static parse(t,n=!1){try{return new e(o_.getInstance().parse(t))}catch(t){if(n)throw t;return new e({})}}static file(e){return c_.file(e)}static joinPath(e,...t){return c_.joinPath(e,...t)}},c_={parse(e){let[t,n]=e.split(`:`,2),r=`http:${n}`,i=new URL(r),a=i.host,o=i.pathname,s=i.search.slice(1),c=i.hash.slice(1);return new s_({scheme:t,authority:a,path:o.replace(/^\/+/,``),query:s,fragment:c})},file(e){return new s_({scheme:`file`,path:e})},joinPath(e,...t){let n=e.path;for(let e of t)e.startsWith(`/`)?n=e:n.endsWith(`/`)||e.startsWith(`?`)||e.startsWith(`#`)?n+=e:n+=`/`+e;return e.with({path:n})}},l_=class{static generateHash(...e){let t=e.join(``),n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return(n>>>0).toString()}};const u_=(()=>{let e=e=>l_.generateHash(e),t=()=>J.registry.get(`spaceStore`),n=(t,n,r)=>e(`${t}:${n}:${r}`),r=(e,t,n)=>new s_({scheme:`space`,authority:e,path:t,fragment:n?.fragment||``,query:n?.query||``}),i=e=>s_.parse(e),a=e=>s_.parse(e).authority,o=e=>s_.parse(e).path;return{getStore:t,generateSpaceId:n,getUri:r,generateHash:e,parseUri:i,getSpaceIdFromUri:a,getInSpacePathFromUri:o,getFileName:e=>o(e).split(`/`).pop()}})();var d_=({spaceId:e})=>{let{t}=Nl(),[n,r]=(0,H.useState)(`Gitee`);return(0,H.useEffect)(()=>{let t=yv.getSpace(e);t&&r(t.platform)},[e]),(0,U.jsx)(l,{p:`1rem`,children:(0,U.jsx)(A,{onClick:()=>{yv.redirectAuthPage(e)},children:t(`space.loginTo`,{platform:n})})})};function f_(){let e={};function t(t,n){return e[t]||(e[t]=[]),e[t].push(n),function(){if(!e[t])return;let r=e[t].indexOf(n);r>-1&&e[t].splice(r,1)}}function n(t,...n){e[t]&&e[t].forEach(e=>{e(...n)})}return{on:t,emit:n,connector:(e,t,r=!1)=>i=>{r&&(i.stopPropagation(),i.preventDefault()),n(e,typeof t==`function`?t(i):t)}}}const p_=e=>{let t=nc(e),{namespaces:n}=t;return Object.assign(t,{getItem:e=>n[e].get(),setItem:(e,t)=>{n[e].set(t)},getItem$:e=>n[e].$})},m_=e=>{let{namespaces:t}=nc(e);return{get:e=>t[br(e)].get(),set:(e,n)=>{t[br(e)].set(n)},get$:e=>t[br(e)].$}},h_=e=>{let{id:t}=e||{};t||=Lt();let n=f_(),r=p_({}),i=Ng();return{id:t,emit:n.emit,on:n.on,expose:i.expose,invoke:i.invoke,get:r.get,set:r.set}};function g_(e,t){let n;try{n=e()}catch{return}return{getItem:e=>{let r=e=>e===null?null:JSON.parse(e,t?.reviver),i=n.getItem(e)??null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,t?.replacer)),removeItem:e=>n.removeItem(e)}}var __=e=>t=>{try{let n=e(t);return n instanceof Promise?n:{then(e){return __(e)(n)},catch(e){return this}}}catch(e){return{then(e){return this},catch(t){return __(t)(e)}}}},v_=(e,t)=>(n,r,i)=>{let a={storage:g_(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,s=new Set,c=new Set,l=a.storage;if(!l)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},r,i);let u=()=>{let e=a.partialize({...r()});return l.setItem(a.name,{state:e,version:a.version})},d=i.setState;i.setState=(e,t)=>(d(e,t),u());let f=e((...e)=>(n(...e),u()),r,i);i.getInitialState=()=>f;let p,m=()=>{if(!l)return;o=!1,s.forEach(e=>e(r()??f));let e=a.onRehydrateStorage?.call(a,r()??f)||void 0;return __(l.getItem.bind(l))(a.name).then(e=>{if(e)if(typeof e.version==`number`&&e.version!==a.version){if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error(`State loaded from storage couldn't be migrated since no migrate function was provided`)}else return[!1,e.state];return[!1,void 0]}).then(e=>{let[t,i]=e;if(p=a.merge(i,r()??f),n(p,!0),t)return u()}).then(()=>{e?.(p,void 0),p=r(),o=!0,c.forEach(e=>e(p))}).catch(t=>{e?.(void 0,t)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(l=e.storage)},clearStorage:()=>{l?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||m(),p||f};const y_=({name:e=`dataLayer`,initialState:t,primaryKey:n=`id`,persistConfig:r})=>{let i=new pt(1),a=h_(),o=(e,i)=>({data:t,rehydrated:!r,init:n=>{e({data:n||t})},upsert:t=>{e(e=>{let r=e.data.slice(),i=t[n],a=r.findIndex(e=>e[n]===i);return a>=0?r[a]={...r[a],...t}:r.push(t),{data:r}})},reduce:t=>{e(e=>({data:t(e.data)}))},update:t=>{e(e=>{let r=e.data.slice(),i=t[n],a=r.findIndex(e=>e[n]===i);return a>=0&&(r[a]={...r[a],...t}),{data:r}})},clear:()=>{e({data:[]})},add:t=>{e(e=>({data:[...e.data,t]}))},delete:t=>{e(e=>({data:e.data.filter(e=>e[n]!==t)}))}}),s;if(r&&r.type===`LocalStorage`){let e,t=v_((t,n,r)=>(e=r,o(t,n)),{name:r.name,storage:g_(()=>window.localStorage),onRehydrateStorage:()=>()=>{e&&e.setState({rehydrated:!0},!1),a.emit(`load`),i.next(!0)}});s=Jt()(t)}else s=Jt()(o),a.emit(`load`),i.next(!0);function c(e,t){let[n,r]=(0,H.useState)(t(e.getState()));return(0,H.useEffect)(()=>{let i=e.subscribe(()=>{let i=t(e.getState());i!==n&&r(i)});return()=>i()},[e,t,n]),n}let l=()=>c(s,e=>e.data),u=e=>c(s,t=>t.data.find(t=>t[n]===e)),d=e=>c(s,t=>e(t.data)),f=[],p=e=>{for(let t of f)t(e)},m=e=>(f.push(e),()=>h(e)),h=e=>{f=f.filter(t=>t!==e)},g=()=>({init:t=>{s.getState().init(t),p({type:`${e}/init`,payload:t})},upsert:t=>{s.getState().upsert(t),p({type:`${e}/upsert`,payload:t})},reduce:t=>{s.getState().reduce(t),p({type:`${e}/reduce`,payload:t})},update:t=>{s.getState().update(t),p({type:`${e}/update`,payload:t})},clear:()=>{s.getState().clear(),p({type:`${e}/clear`})},add:t=>{s.getState().add(t),p({type:`${e}/add`,payload:t})},delete:t=>{s.getState().delete(t),p({type:`${e}/delete`,payload:t})}});return{reduxStore:{getState:()=>({[e]:{data:s.getState().data}}),subscribe:e=>s.subscribe(e)},useSelector:d,useData:l,useRecord:u,applyChanges:e=>{let t=g();e.forEach(e=>{switch(e.type){case`add`:e.value&&t.add(e.value);break;case`delete`:t.delete(e.id);break;case`update`:e.value&&t.update(e.value);break}})},getActions:g,getData:()=>s.getState().data,getRecord:e=>s.getState().data.find(t=>t[n]===e),id:Lt(),addObserver:m,removeObserver:h,on:a.on,waitUtilLoaded:e=>{let t=i.subscribe(e);return()=>t.unsubscribe()}}},b_=(e,t)=>{let n=new pt(1);return n.next(e()),t(e=>{n.next(e)}),n};var x_=`3.7.7`,S_=x_,C_=typeof Buffer==`function`,w_=typeof TextDecoder==`function`?new TextDecoder:void 0,T_=typeof TextEncoder==`function`?new TextEncoder:void 0,E_=Array.prototype.slice.call(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`),D_=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(E_),O_=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,k_=String.fromCharCode.bind(String),A_=typeof Uint8Array.from==`function`?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),j_=e=>e.replace(/=/g,``).replace(/[+\/]/g,e=>e==`+`?`-`:`_`),M_=e=>e.replace(/[^A-Za-z0-9\+\/]/g,``),N_=e=>{let t,n,r,i,a=``,o=e.length%3;for(let o=0;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw TypeError(`invalid character found`);t=n<<16|r<<8|i,a+=E_[t>>18&63]+E_[t>>12&63]+E_[t>>6&63]+E_[t&63]}return o?a.slice(0,o-3)+`===`.substring(o):a},P_=typeof btoa==`function`?e=>btoa(e):C_?e=>Buffer.from(e,`binary`).toString(`base64`):N_,F_=C_?e=>Buffer.from(e).toString(`base64`):e=>{let t=4096,n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(k_.apply(null,e.subarray(r,r+t)));return P_(n.join(``))},I_=(e,t=!1)=>t?j_(F_(e)):F_(e),L_=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?k_(192|t>>>6)+k_(128|t&63):k_(224|t>>>12&15)+k_(128|t>>>6&63)+k_(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return k_(240|t>>>18&7)+k_(128|t>>>12&63)+k_(128|t>>>6&63)+k_(128|t&63)}},R_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,z_=e=>e.replace(R_,L_),B_=C_?e=>Buffer.from(e,`utf8`).toString(`base64`):T_?e=>F_(T_.encode(e)):e=>P_(z_(e)),V_=(e,t=!1)=>t?j_(B_(e)):B_(e),H_=e=>V_(e,!0),U_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W_=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return k_((t>>>10)+55296)+k_((t&1023)+56320);case 3:return k_((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return k_((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},G_=e=>e.replace(U_,W_),K_=e=>{if(e=e.replace(/\s+/g,``),!O_.test(e))throw TypeError(`malformed base64.`);e+=`==`.slice(2-(e.length&3));let t,n=``,r,i;for(let a=0;a<e.length;)t=D_[e.charAt(a++)]<<18|D_[e.charAt(a++)]<<12|(r=D_[e.charAt(a++)])<<6|(i=D_[e.charAt(a++)]),n+=r===64?k_(t>>16&255):i===64?k_(t>>16&255,t>>8&255):k_(t>>16&255,t>>8&255,t&255);return n},q_=typeof atob==`function`?e=>atob(M_(e)):C_?e=>Buffer.from(e,`base64`).toString(`binary`):K_,J_=C_?e=>A_(Buffer.from(e,`base64`)):e=>A_(q_(e).split(``).map(e=>e.charCodeAt(0))),Y_=e=>J_(Z_(e)),X_=C_?e=>Buffer.from(e,`base64`).toString(`utf8`):w_?e=>w_.decode(J_(e)):e=>G_(q_(e)),Z_=e=>M_(e.replace(/[-_]/g,e=>e==`-`?`+`:`/`)),Q_=e=>X_(Z_(e)),$_=e=>{if(typeof e!=`string`)return!1;let t=e.replace(/\s+/g,``).replace(/={0,2}$/,``);return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},ev=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),tv=function(){let e=(e,t)=>Object.defineProperty(String.prototype,e,ev(t));e(`fromBase64`,function(){return Q_(this)}),e(`toBase64`,function(e){return V_(this,e)}),e(`toBase64URI`,function(){return V_(this,!0)}),e(`toBase64URL`,function(){return V_(this,!0)}),e(`toUint8Array`,function(){return Y_(this)})},nv=function(){let e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,ev(t));e(`toBase64`,function(e){return I_(this,e)}),e(`toBase64URI`,function(){return I_(this,!0)}),e(`toBase64URL`,function(){return I_(this,!0)})},rv={version:x_,VERSION:S_,atob:q_,atobPolyfill:K_,btoa:P_,btoaPolyfill:N_,fromBase64:Q_,toBase64:V_,encode:V_,encodeURI:H_,encodeURL:H_,utob:z_,btou:G_,decode:Q_,isValid:$_,fromUint8Array:I_,toUint8Array:Y_,extendString:tv,extendUint8Array:nv,extendBuiltins:()=>{tv(),nv()}},iv=function e(t){function n(e,t,r){var i,a={};if(Array.isArray(e))return e.concat(t);for(i in e)a[r?i.toLowerCase():i]=e[i];for(i in t){var o=r?i.toLowerCase():i,s=t[i];a[o]=o in a&&typeof s==`object`?n(a[o],s,o==`headers`):s}return a}function r(e,r,i,a,o){var s=typeof e==`string`?e:(r=e).url,c={config:r},l=n(t,r),u={};a||=l.data,(l.transformRequest||[]).map(function(e){a=e(a,l.headers)||a}),l.auth&&(u.authorization=l.auth),a&&typeof a==`object`&&typeof a.append!=`function`&&typeof a.text!=`function`&&(a=JSON.stringify(a),u[`content-type`]=`application/json`);try{u[l.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp(`(^|; )`+l.xsrfCookieName+`=([^;]*)`))[2])}catch{}return l.baseURL&&(s=s.replace(/^(?!.*\/\/)\/?/,l.baseURL+`/`)),l.params&&(s+=(~s.indexOf(`?`)?`&`:`?`)+(l.paramsSerializer?l.paramsSerializer(l.params):new URLSearchParams(l.params))),(l.fetch||fetch)(s,{method:(i||l.method||`get`).toUpperCase(),body:a,headers:n(l.headers,u,!0),credentials:l.withCredentials?`include`:o}).then(function(e){for(var t in e)typeof e[t]!=`function`&&(c[t]=e[t]);return l.responseType==`stream`?(c.data=e.body,c):e[l.responseType||`text`]().then(function(e){c.data=e,c.data=JSON.parse(e)}).catch(Object).then(function(){return(l.validateStatus?l.validateStatus(e.status):e.ok)?c:Promise.reject(c)})})}return t||={},r.request=r,r.get=function(e,t){return r(e,t,`get`)},r.delete=function(e,t){return r(e,t,`delete`)},r.head=function(e,t){return r(e,t,`head`)},r.options=function(e,t){return r(e,t,`options`)},r.post=function(e,t,n){return r(e,n,`post`,t)},r.put=function(e,t,n){return r(e,n,`put`,t)},r.patch=function(e,t,n){return r(e,n,`patch`,t)},r.all=Promise.all.bind(Promise),r.spread=function(e){return e.apply.bind(e,e)},r.CancelToken=typeof AbortController==`function`?AbortController:Object,r.defaults=t,r.create=e,r}(),av=`https://gitee.com/api/v5`;const ov=({redirectUri:e,clientId:t})=>`https://gitee.com/oauth/authorize?client_id=${t}&redirect_uri=${e}&response_type=code&scope=user_info%20projects&state=${encodeURIComponent(JSON.stringify({platform:`gitee`}))}`;var sv=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const cv=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://gitee.com/oauth/token?grant_type=authorization_code&code=${e}&client_id=${t}&redirect_uri=${r}&client_secret=${n}`;return console.log(`url:`,i),(await iv.post(i)).data},lv=async({refreshToken:e})=>{let t=`https://gitee.com/oauth/token?grant_type=refresh_token&refresh_token=${e}`;return(await iv.post(t)).data};var uv=(()=>{let e=e=>e.split(`/`).map(e=>encodeURIComponent(e)).join(`/`);return{getUserInfo:()=>`${av}/user`,createBranch:(e,t)=>`${av}/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`${av}/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`${av}/repos/${e}/${t}/branches`,createRepo:()=>`${av}/user/repos`,getRepo:(e,t)=>`${av}/repos/${e}/${t}`,deleteRepo:(e,t)=>`${av}/repos/${e}/${t}`,clearRepo:(e,t)=>`${av}/repos/${e}/${t}/clear`,getRepoList:()=>`${av}/user/repos`,createFile:(t,n,r)=>`${av}/repos/${t}/${n}/contents/${e(r)}`,updateFile:(t,n,r)=>`${av}/repos/${t}/${n}/contents/${e(r)}`,deleteFile:(t,n,r)=>`${av}/repos/${t}/${n}/contents/${e(r)}`,getPathContents:(t,n,r)=>`${av}/repos/${t}/${n}/contents/${e(r)}`}})();const dv=({getAccessToken:e})=>{let t=async(e,t,n=`POST`)=>{let r=new FormData;return Object.keys(t).forEach(e=>{r.append(e,t[e])}),iv.request({method:n,url:e,data:r})},n={getInfo:async()=>iv.get(uv.getUserInfo(),{params:sv({access_token:e()})})},r={get:async({owner:t,repo:n})=>iv.get(uv.getRepo(t,n),{params:sv({access_token:e()})}),add:async({repo:n})=>{let r={access_token:e(),name:n,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t(uv.createRepo(),r)},getList:async({page:t=1,per_page:n=20})=>iv.get(uv.getRepoList(),{params:sv({access_token:e(),page:t,per_page:n})}),delete:async({owner:t,repo:n})=>iv.delete(uv.deleteRepo(t,n),{params:{access_token:e(),owner:t,repo:n}}),clear:async({owner:t,repo:n})=>iv.put(uv.clearRepo(t,n),{params:{access_token:e(),owner:t,repo:n}})},i={get:async({owner:t,repo:n,branch:r})=>iv.get(uv.getBranch(t,n,r),{params:sv({access_token:e(),owner:t,repo:n,branch:r})}),getList:async({owner:t,repo:n})=>iv.get(uv.getBranchList(t,n),{params:sv({access_token:e(),owner:t,repo:n})}),add:async({owner:n,repo:r,branch:i,refs:a=`master`})=>{let o={access_token:e(),owner:n,repo:r,branch_name:i,refs:a};return t(uv.createBranch(n,r),o)}},a=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),o=async({owner:t,repo:n,path:r})=>iv.get(uv.getPathContents(t,n,r),{params:sv({access_token:e(),owner:t,repo:n,path:r})});return{File:{add:async({owner:n,repo:r,path:i,content:o,message:s,branch:c=`master`})=>{a(o)||(o=rv.encode(o)),s||=`create `+i;let l={access_token:e(),owner:n,path:i,content:o,message:s,branch:c};return t(uv.createFile(n,r,i),l)},update:async({owner:n,repo:r,path:i,content:s,message:c,branch:l=`master`,sha:u=null})=>(a(s)||(s=rv.encode(s)),u||=(await o({owner:n,repo:r,path:i})).data.sha,c||=`update `+i,t(uv.updateFile(n,r,i),{access_token:e(),owner:n,repo:r,path:i,content:s,message:c,branch:l,sha:u},`PUT`)),delete:async({owner:t,repo:n,path:r,sha:i,message:a})=>(i||=(await o({owner:t,repo:n,path:r})).data.sha,a||=`delete `+r,iv.delete(uv.deleteFile(t,n,r),{params:{access_token:e(),owner:t,repo:n,path:r,sha:i,message:a}})),get:async({owner:e,repo:t,path:n})=>{let r=await o({owner:e,repo:t,path:n}),i=r.data;return!i||Array.isArray(i)||typeof i.content!=`string`?r:(i.rawContent=i.content,i.uint8array=rv.toUint8Array(i.rawContent),i.content=rv.decode(i.rawContent),r)},getInfo:o},Repo:r,User:n,Branch:i}},fv=new class{triggers=new Map;add=e=>{let{repo:t,id:n}=e;J.componentService.register(`AiFillFolder`,ye),J.layoutService.sidebar.addView({id:n,viewData:{type:`folderTree`,props:{space:e}}},!0),J.eventBus.on(Ad.ActivityBar.ActivityClicked(n),()=>{J.layoutService.sidebar.setView(n)})};focus=e=>{J.layoutService.activityBar.showActivity(e),J.layoutService.sidebar.setView(e)};getCurrentViewId=()=>J.layoutService.sidebar.getCurrentView()?.id;useCurrentViewId=()=>J.layoutService.sidebar.useCurrentView()?.id;onCurrentViewIdChanged=e=>{J.layoutService.sidebar.subscribeActiveViewId(e)};getCurrentViewId$=()=>J.layoutService.sidebar.ActiveViewId$;remove=e=>{J.layoutService.activityBar.removeActivity(e),J.layoutService.sidebar.removeView(e),this.triggers.delete(e)};registerTrigger=(e,t)=>(this.triggers.set(e,t),()=>{this.triggers.delete(e)});trigger=e=>{let t=this.triggers.get(e);t&&t()}},pv=(e,t,n,r)=>{let i=(0,H.useMemo)(()=>typeof e==`function`?e():e,[]);(0,H.useEffect)(()=>{let e=i.subscribe({next:t,error:n,complete:r});return()=>{e.unsubscribe()}},[])},mv=(e,t)=>{if(e===null)return t;try{return JSON.parse(e)}catch{return t}},hv=new class{storageKey=`authInfo-v2`;authProviders=[];authProvidersChange$=new ft;AuthRecords=Bs(`AuthRecords`,[],e=>{let{AuthRecords$:t,setAuthRecords:n,getAuthRecords:r}=e,i=()=>{let e=mv(localStorage.getItem(this.storageKey),void 0);e&&n(e)};i(),t.pipe(js(1)).subscribe(e=>{localStorage.setItem(this.storageKey,JSON.stringify(e))});let a=e=>{let n=t.pipe(js(1)).subscribe(e);return()=>n.unsubscribe()},o=e=>{n(r().filter(t=>t.id!==e))},s=e=>{r().find(t=>t.id===e.id)?n(r().map(t=>t.id===e.id?e:t)):n([...r(),e])},c=e=>r().find(t=>t.id===e);return{load:i,onChange:a,removeRecord:o,addRecord:s,getRecord:c,useRecord:e=>{let[n,r]=(0,H.useState)(c(e));return pv(()=>t.pipe(as(t=>t.find(t=>t.id===e)),ws()),e=>{r(e)}),n}}});getAuthRecords=this.AuthRecords.getAuthRecords;setAuthRecords=this.AuthRecords.setAuthRecords;useAuthRecords=this.AuthRecords.useAuthRecords;authRecords$=this.AuthRecords.AuthRecords$;removeAuthRecord=this.AuthRecords.removeRecord;onAuthRecordsChange=this.AuthRecords.onChange;addAuthRecord=this.AuthRecords.addRecord;getAuthRecord=this.AuthRecords.getRecord;useAuthRecord=this.AuthRecords.useRecord;saveAuthInfo=e=>{this.addAuthRecord({...e,id:this.generateAuthId(e)})};generateAuthId=e=>`${e.platform}-${e.username}`;getAnyAuthInfo=(e,t)=>this.getAuthRecords().find(t=>t.platform===e);getAuthInfo=(e,t)=>this.getAuthRecords().find(n=>n.platform===e&&n.username===t);authenticate=async e=>{let{platform:t,username:n,repo:r,needConfirm:i}=e,a=this.authProviders.find(e=>e.platform===t);if(!a){J.notificationService.error(K(`auth.unsupportedPlatform`,{platform:t}));return}await a.authenticate({username:n,repo:r,needConfirm:i})};registerAuthProvider=e=>{this.authProviders.push(e),this.authProvidersChange$.next(this.authProviders)};onAuthProvidersChange=e=>{let t=this.authProvidersChange$.subscribe(e);return()=>t.unsubscribe()};hasReadPermission=(e,t)=>{let n=this.getAnyAuthInfo(e,t);return!!n&&this.checkSessionValid(n)};isSessionValid=(e,t)=>{let n=this.getAuthInfo(e,t);return this.checkSessionValid(n)};checkSessionValid(e){return!e||!e.accessToken?!1:e.expirationTime?e.createdAt?(e.createdAt+e.expirationTime)*1e3>Date.now():!1:!0}tryRefreshAuthInfo=async(e,t)=>{let n=this.getAuthInfo(e,t);if(!n)return;let r=this.authProviders.find(t=>t.platform===e);if(r&&r.refresh&&n.refreshToken)return await r.refresh({...n,refreshToken:n.refreshToken})};hasWritePermission=(e,t)=>{let n=this.getAuthInfo(e,t);return!!n&&this.checkSessionValid(n)};useAuthProviders=()=>{let[e,t]=(0,H.useState)(this.authProviders);return pv(()=>this.authProvidersChange$,()=>{t(this.authProviders)}),{authProviders:e}}},gv=new class{platforms=new Map;register(e){this.platforms.set(e.id,e)}getPlatform(e){return this.platforms.get(e)}getPlatforms(){return Array.from(this.platforms.values())}},_v={LastFocusedSpaceId:`ui:lastFocusedSpaceId`},vv={get(e){try{return localStorage.getItem(e)??void 0}catch{return}},set(e,t){try{localStorage.setItem(e,t)}catch{}},remove(e){try{localStorage.removeItem(e)}catch{}},getJSON(e){let t=this.get(e);if(t)try{return JSON.parse(t)}catch{return}},setJSON(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}},yv=new class e{static LAST_FOCUSED_SPACE_KEY=_v.LastFocusedSpaceId;spaceStore=y_({initialState:[],persistConfig:{name:`spaces`,type:`LocalStorage`}});setSpaces=e=>{this.spaceStore.getActions().init(e)};useSpaces=()=>{let[e,t]=(0,H.useState)(this.spaceStore.getData());return(0,H.useEffect)(()=>{this.spaceStore.reduxStore.subscribe(()=>{t(this.spaceStore.getData())})},[]),e};getSpaceStore=()=>this.spaceStore;getSpaces=()=>this.spaceStore.getData();onLoad=e=>this.spaceStore.on(`load`,e);constructor(){J.registry.set(`spaceStore`,this.spaceStore),this.spaceStore.reduxStore.subscribe(()=>{J.eventBus.emit(Ad.Space.SpacesChanged,this.spaceStore.getData())}),fv.onCurrentViewIdChanged(t=>{t&&vv.set(e.LAST_FOCUSED_SPACE_KEY,t)}),this.spaceStore.waitUtilLoaded(()=>{let t=vv.get(e.LAST_FOCUSED_SPACE_KEY);t&&this.spaceStore.getRecord(t)&&setTimeout(()=>this.focusSpace(t),0)})}refreshAuth=e=>new Promise(t=>{let n=this.spaceStore.getRecord(e);if(!n.auth)return t(!1);lv({refreshToken:n.auth?.refresh_token}).then(e=>{this.spaceStore.getActions().update({...n,auth:e}),t(!0)}).catch(e=>{console.log(`auth error:`,e),t(!1)})});login=e=>{let t=this.spaceStore.getRecord(e);J.modalService.createModal({title:K(`space.loginTo`,{platform:t.platform}),content:(0,U.jsx)(d_,{spaceId:e}),footer:!1}).open()};redirectAuthPage=e=>{J.eventBus.emit(Ad.RequestRedirectAuthPage,e)};isAuthorized=e=>{let t=this.spaceStore.getRecord(e);return t?hv.hasReadPermission(t.platform,t.owner):!1};useAutoRefreshAuth=(e,t=1)=>{let n=this.spaceStore.getRecord(e),r=hv.getAnyAuthInfo(n?.platform||``),i=hv.useAuthRecord(hv.generateAuthId({platform:r?.platform||``,username:r?.username||``})),[a,o]=(0,H.useState)(0);(0,H.useEffect)(()=>{hv.isSessionValid(i?.platform||``,i?.username||``)||a<t&&hv.tryRefreshAuthInfo(i?.platform||``,i?.username||``).then(e=>{o(a+1)}).catch(e=>{console.log(`tryRefreshAuthInfo error:`,e),o(a+1)})},[i])};usePermissions=e=>{let t=this.spaceStore.getRecord(e);if(!t)return{hasReadPermission:!1,hasWritePermission:!1};if([`idb`].includes(t.platform))return{hasReadPermission:!0,hasWritePermission:!0};let[n,r]=(0,H.useState)(hv.hasReadPermission(t.platform,t.owner)),[i,a]=(0,H.useState)(hv.hasWritePermission(t.platform,t.owner));return(0,H.useEffect)(()=>{hv.onAuthRecordsChange(()=>{r(hv.hasReadPermission(t.platform,t.owner)),a(hv.hasWritePermission(t.platform,t.owner))})},[]),{hasReadPermission:n,hasWritePermission:i}};getSpace=e=>this.spaceStore.getRecord(e);getSpaceByInfo=e=>{let t=u_.generateSpaceId(e.platform,e.owner,e.repo);return this.spaceStore.getRecord(t)};updateSpace=e=>{this.spaceStore.getActions().update(e)};addSpace=(e,t)=>{let{platform:n,owner:r,repo:i,readonly:a}=e,o=this.spaceStore,s=u_.generateSpaceId(n,r,i),{focus:c,silent:l}=t||{},u=o.getRecord(s);return o.waitUtilLoaded(()=>{o.getActions().upsert({...e,id:s})}),u?l||J.notificationService.success(K(`space.spaceExists`)):l||J.notificationService.success(K(`space.spaceAdded`)),c&&this.focusSpace(s),{platform:n,owner:r,repo:i,id:s,readonly:a}};focusSpace=e=>{fv.focus(e),setTimeout(()=>{fv.trigger(e)},100)};getFocusedSpace=()=>{let e=fv.getCurrentViewId();if(e)return this.spaceStore.getRecord(e)};useFocusedSpace=()=>{let e=fv.useCurrentViewId();return this.spaceStore.getRecord(e)};getFocusedSpace$=()=>fv.getCurrentViewId$().pipe(Ms(e=>b_(()=>this.spaceStore.getRecord(e),t=>this.spaceStore.reduxStore.subscribe(()=>{t(this.spaceStore.getRecord(e))}))));parseRepoUrl=e=>{try{let t=new URL(e),n=Array.from(gv.getPlatforms()).find(e=>e.hostname===t.hostname);if(!n)return{};let[r,i,...a]=t.pathname.replace(/^\/|\/$/g,``).split(`/`);return!r||!i||a.length>0?{}:{platform:n?.id||``,owner:r||``,repo:(i||``).replace(/\.git$/,``)}}catch{return{platform:``,owner:``,repo:``}}};subscribeSpaces=e=>{e(this.spaceStore.getData()),this.spaceStore.reduxStore.subscribe(()=>{e(this.spaceStore.getData())})}};var bv=`# 欢迎使用 Gitary

**Notion-like 编辑 + AI 智能画图 + 全局 AI 助手，运行在你的 Git 仓库上**

Gitary 是一个强大的知识管理工具，将 Notion 风格的编辑体验、AI 智能画图和全局 AI 助手带到你的 Git 仓库中。

## 🚀 核心功能

- **📝 Notion-like 编辑**：所见即所得的 Markdown 编辑器，支持数学公式、代码高亮
- **🎨 专业图表绘制**：支持 Excalidraw 和 Draw.io，绘制流程图、架构图、UML 图等
- **🧠 思维导图**：创建和编辑思维导图，支持节点编辑、拖拽布局、自动保存
- **🤖 AI 智能画图**：用自然语言描述，AI 自动生成 Excalidraw 图表
- **💬 全局 AI 助手**：智能助手集成工具，可以操作文件、图表和工作区
- **🔄 Git 集成**：笔记直接存储在 Git 仓库，享受版本控制和云端同步
- **🔐 数据所有权**：完全的数据控制权，数据在你的 Git 仓库中

## 💡 快速开始

1. **创建笔记**：在文件树中右键创建新的 Markdown 文件
2. **使用 Excalidraw**：创建 \`.excalidraw.json\` 文件开始画图
3. **使用 Draw.io**：创建 \`.drawio\` 文件创建专业图表（流程图、UML 图等）
4. **使用思维导图**：创建 \`.mindmap.json\` 文件创建思维导图，支持节点编辑和拖拽布局
5. **AI 生成图表**：在 Excalidraw 中打开 AI 助手，用自然语言描述生成图表
6. **全局 AI 助手**：点击侧边栏的 AI 图标，随时获取智能帮助
7. **连接 Git 仓库**：查看「连接-Git-仓库.md」了解如何连接 GitHub/Gitee

## 📚 更多文档

- **Markdown 教程**：查看「Markdown-教程.md」学习 Markdown 语法
- **连接 Git 仓库**：查看「连接-Git-仓库.md」了解如何连接 GitHub/Gitee
- **Excalidraw 示例**：打开「Excalidraw-示例.excalidraw.json」查看画图示例
- **Draw.io 示例**：打开「Draw.io-示例.drawio」查看专业图表示例
- **思维导图示例**：打开「思维导图-示例.mindmap.json」查看思维导图示例
`,xv=`# Welcome to Gitary

**Notion-like editing + AI-powered Excalidraw drawing + Global AI Assistant for your Git repositories**

Gitary is a powerful knowledge management tool that brings Notion-style editing experience, AI-powered diagram generation, and a global AI assistant to your Git repositories.

## 🚀 Core Features

- **📝 Notion-like Editing**: WYSIWYG Markdown editor with support for math formulas and code highlighting
- **🎨 Professional Diagramming**: Support for Excalidraw and Draw.io to create flowcharts, architecture diagrams, UML diagrams, and more
- **🧠 Mind Map**: Create and edit mind maps with node editing, drag-and-drop layout, and auto-save
- **🤖 AI-Powered Diagram Generation**: Describe in natural language, AI automatically generates Excalidraw diagrams
- **💬 Global AI Assistant**: Intelligent assistant with tool integration, can operate files, diagrams, and workspace
- **🔄 Git Integration**: Notes stored directly in Git repositories, enjoy version control and cloud synchronization
- **🔐 Data Ownership**: Complete data control, your data stays in your Git repositories

## 💡 Quick Start

1. **Create Notes**: Right-click in the file tree to create new Markdown files
2. **Use Excalidraw**: Create \`.excalidraw.json\` files to start drawing
3. **Use Draw.io**: Create \`.drawio\` files to create professional diagrams (flowcharts, UML diagrams, etc.)
4. **Use Mind Map**: Create \`.mindmap.json\` files to create mind maps with node editing and drag-and-drop layout
5. **AI Diagram Generation**: Open AI assistant in Excalidraw, describe in natural language to generate diagrams
6. **Global AI Assistant**: Click the AI icon in the sidebar for intelligent help anytime
7. **Connect Git Repository**: Check "Connect-Git-Repository.md" to learn how to connect GitHub/Gitee

## 📚 More Documentation

- **Markdown Tutorial**: Check "Markdown-Tutorial.md" to learn Markdown syntax
- **Connect Git Repository**: Check "Connect-Git-Repository.md" to learn how to connect GitHub/Gitee
- **Excalidraw Example**: Open "Excalidraw-Example.excalidraw.json" to see drawing examples
- **Draw.io Example**: Open "Draw.io-Example.drawio" to see professional diagram examples
- **Mind Map Example**: Open "Mind-Map-Example.mindmap.json" to see mind map examples
`,Sv=`# 连接 Gitee/GitHub 仓库

## 快速开始

将你的 Gitee 或 GitHub 仓库连接为工作空间，让笔记存储在 Git 仓库中，享受版本控制和云端同步。

## 连接步骤

### 1. 打开添加工作空间菜单

点击左侧边栏的 **加号 (+)** 按钮，打开添加工作空间菜单。

### 2. 选择平台

在菜单中选择 **GitHub** 或 **Gitee**。

### 3. 授权登录

- 如果尚未授权，点击 **"去授权"** 按钮
- 系统会跳转到对应平台的授权页面
- 完成授权后，会自动返回应用

### 4. 选择仓库

- 授权成功后，展开平台菜单
- 在仓库列表中选择你想要连接的仓库
- 点击仓库名称即可添加为工作空间

## 注意事项

- 首次连接需要授权，授权后可以访问你的所有仓库
- 可以选择任意公开或私有仓库作为工作空间
- 支持多个仓库同时作为工作空间使用
- 笔记文件会直接存储在仓库中，支持 Git 版本控制

## 开始使用

连接成功后，你可以在左侧文件树中看到仓库文件，开始创建和编辑你的笔记！

## 🤖 AI 功能

连接 Git 仓库后，你还可以使用 Gitary 的强大 AI 功能：

- **AI 智能画图**：在 Excalidraw 文件中，打开 AI 助手，用自然语言描述即可自动生成图表
- **全局 AI 助手**：点击侧边栏的 AI 图标，随时获取智能帮助，AI 可以：
  - 读取和搜索文件
  - 生成和编辑 Excalidraw 图表
  - 分析代码和文档
  - 提供上下文感知的建议

所有 AI 生成的内容都会直接保存到你的 Git 仓库中，享受完整的版本控制！

`,Cv=`# Connect Gitee/GitHub Repository

## Quick Start

Connect your Gitee or GitHub repository as a workspace to store notes in Git repositories, enjoying version control and cloud synchronization.

## Connection Steps

### 1. Open Add Workspace Menu

Click the **plus (+)** button in the left sidebar to open the add workspace menu.

### 2. Select Platform

Choose **GitHub** or **Gitee** from the menu.

### 3. Authorize Login

- If not yet authorized, click the **"Authorize"** button
- The system will redirect to the platform's authorization page
- After completing authorization, you will automatically return to the application

### 4. Select Repository

- After successful authorization, expand the platform menu
- Select the repository you want to connect from the repository list
- Click the repository name to add it as a workspace

## Notes

- First-time connection requires authorization, after which you can access all your repositories
- You can choose any public or private repository as a workspace
- Multiple repositories can be used as workspaces simultaneously
- Note files are stored directly in the repository, supporting Git version control

## Get Started

After successful connection, you can see the repository files in the left file tree and start creating and editing your notes!

## 🤖 AI Features

After connecting your Git repository, you can also use Gitary's powerful AI features:

- **AI-Powered Diagram Generation**: In Excalidraw files, open the AI assistant and describe in natural language to automatically generate diagrams
- **Global AI Assistant**: Click the AI icon in the sidebar for intelligent help anytime. The AI can:
  - Read and search files
  - Generate and edit Excalidraw diagrams
  - Analyze code and documents
  - Provide context-aware suggestions

All AI-generated content is saved directly to your Git repository, enjoying full version control!

`,wv=`# Markdown 简介与使用教程

## 1. Markdown 简介

Markdown 是一种轻量级标记语言，使用简洁的语法进行文本格式化，使得文档编写者能够专注于内容而非格式，特别适合技术文档、笔记和博客的编写。

## 2. Markdown 基本语法

### 标题 (Headers)

编写示例：

\`\`\`markdown
# 一级标题
## 二级标题
### 三级标题
\`\`\`

渲染结果：

---

# 一级标题

## 二级标题

### 三级标题

### 段落与换行

编写示例：

\`\`\`markdown
这是一个段落。  
这是同一段落的下一行。  
\`\`\`

渲染结果： 这是一个段落。\\
这是同一段落的下一行。

### 强调 (Emphasis)

编写示例：

\`\`\`markdown
*斜体* 和 **加粗** 和 _下划线_
\`\`\`

渲染结果： *斜体* 和 **加粗** 和 *下划线*

### 删除线 (Strikethrough)

编写示例：

\`\`\`markdown
~~删除线~~
\`\`\`

渲染结果： ~~删除线~~

### 列表

编写示例：

\`\`\`markdown
- 无序列表项1
- 无序列表项2

1. 有序列表项1
2. 有序列表项2
\`\`\`

渲染结果：

- 无序列表项1

- 无序列表项2

  1. 有序列表项1
  2. 有序列表项2

### 链接与图片

编写示例：

\`\`\`markdown
[链接文本](https://www.baidu.com)
![图片描述](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)
\`\`\`

渲染结果： [链接文本](https://baidu.com)\\
![图片描述](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)

### 引用 (Blockquotes)

编写示例：

\`\`\`markdown
> 这是一个引用。
\`\`\`

渲染结果：

> 这是一个引用。

### 代码块 (Code Blocks)

编写示例：

\`\`\`markdown
\`行内代码\`

\\\`\`\`javascript
// 多行代码块
console.log("Hello, World!");
\\\`\`\`
\`\`\`

渲染结果： \`行内代码\`

\`\`\`javascript
// 多行代码块
console.log("Hello, World!");
\`\`\`

### 分割线

编写示例：

\`\`\`markdown
---
\`\`\`

渲染结果

---

## 3. Markdown 高级语法

### 表格 (Tables)

编写示例：

\`\`\`markdown
| 头部1 | 头部2 | 头部3 |
|-------|-------|-------|
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |
\`\`\`

渲染结果：

| 头部1 | 头部2 | 头部3 |
|-------|-------|-------|
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |

### 任务列表 (Task Lists)

编写示例：

\`\`\`markdown
- [x] 完成任务
- [ ] 未完成任务
\`\`\`

渲染结果：

- [x] 完成任务

- [ ] 未完成任务

### 公式 (Math)

编写示例：

\`\`\`markdown
行内公式：$E = mc^2$

块级公式：
$$
\\sum_{i=1}^{n} a_i^2
$$
\`\`\`

渲染结果： 行内公式：$E = mc^2$

块级公式：

$$
\\sum_{i=1}^{n} a_i^2
$$

### Mermaid 图表 (Mermaid Diagrams)

我们的编辑器支持 Mermaid 图表，可以绘制流程图、序列图、甘特图等多种图表类型。

#### 流程图示例：

\`\`\`mermaid
flowchart TD
    A[开始] --> B{判断条件}
    B -->|是| C[执行操作1]
    B -->|否| D[执行操作2]
    C --> E[结束]
    D --> E
\`\`\`

#### 序列图示例：

\`\`\`mermaid
sequenceDiagram
    participant 用户
    participant 前端
    participant 后端
    participant 数据库
    
    用户->>前端: 发送请求
    前端->>后端: 处理请求
    后端->>数据库: 查询数据
    数据库-->>后端: 返回结果
    后端-->>前端: 返回数据
    前端-->>用户: 显示结果
\`\`\`

#### 甘特图示例：

\`\`\`mermaid
gantt
    title 项目开发计划
    dateFormat YYYY-MM-DD
    section 设计阶段
    需求分析 :done, des1, 2024-01-01, 2024-01-05
    原型设计 :active, des2, 2024-01-06, 2024-01-10
    section 开发阶段
    前端开发 :dev1, 2024-01-11, 2024-01-20
    后端开发 :dev2, 2024-01-11, 2024-01-20
    section 测试阶段
    功能测试 :test1, 2024-01-21, 2024-01-25
\`\`\`

#### 类图示例：

\`\`\`mermaid
classDiagram
    class 用户 {
        +String 姓名
        +String 邮箱
        +登录()
        +登出()
    }
    class 文章 {
        +String 标题
        +String 内容
        +发布()
        +编辑()
    }
    用户 "1" --> "*" 文章 : 创建
\`\`\`

#### 状态图示例：

\`\`\`mermaid
stateDiagram-v2
    [*] --> 待处理
    待处理 --> 进行中: 开始处理
    进行中 --> 已完成: 完成任务
    进行中 --> 待处理: 暂停
    已完成 --> [*]
\`\`\`

---

`,Tv=`# Markdown Introduction and Tutorial

## 1. Markdown Introduction

Markdown is a lightweight markup language that uses simple syntax for text formatting, allowing document writers to focus on content rather than format. It is particularly suitable for technical documentation, notes, and blog writing.

## 2. Markdown Basic Syntax

### Headers

Example:

\`\`\`markdown
# Level 1 Header
## Level 2 Header
### Level 3 Header
\`\`\`

Rendering result:

---

# Level 1 Header

## Level 2 Header

### Level 3 Header

### Paragraphs and Line Breaks

Example:

\`\`\`markdown
This is a paragraph.  
This is the next line of the same paragraph.  
\`\`\`

Rendering result: This is a paragraph.\\
This is the next line of the same paragraph.

### Emphasis

Example:

\`\`\`markdown
*Italic* and **Bold** and _Underline_
\`\`\`

Rendering result: *Italic* and **Bold** and *Underline*

### Strikethrough

Example:

\`\`\`markdown
~~Strikethrough~~
\`\`\`

Rendering result: ~~Strikethrough~~

### Lists

Example:

\`\`\`markdown
- Unordered list item 1
- Unordered list item 2

1. Ordered list item 1
2. Ordered list item 2
\`\`\`

Rendering result:

- Unordered list item 1

- Unordered list item 2

  1. Ordered list item 1
  2. Ordered list item 2

### Links and Images

Example:

\`\`\`markdown
[Link text](https://www.example.com)
![Image description](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)
\`\`\`

Rendering result: [Link text](https://example.com)\\
![Image description](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)

### Blockquotes

Example:

\`\`\`markdown
> This is a blockquote.
\`\`\`

Rendering result:

> This is a blockquote.

### Code Blocks

Example:

\`\`\`markdown
\`Inline code\`

\\\`\`\`javascript
// Multi-line code block
console.log("Hello, World!");
\\\`\`\`
\`\`\`

Rendering result: \`Inline code\`

\`\`\`javascript
// Multi-line code block
console.log("Hello, World!");
\`\`\`

### Horizontal Rule

Example:

\`\`\`markdown
---
\`\`\`

Rendering result

---

## 3. Markdown Advanced Syntax

### Tables

Example:

\`\`\`markdown
| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |
\`\`\`

Rendering result:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |

### Task Lists

Example:

\`\`\`markdown
- [x] Completed task
- [ ] Incomplete task
\`\`\`

Rendering result:

- [x] Completed task

- [ ] Incomplete task

### Math Formulas

Example:

\`\`\`markdown
Inline formula: $E = mc^2$

Block formula:
$$
\\sum_{i=1}^{n} a_i^2
$$
\`\`\`

Rendering result: Inline formula: $E = mc^2$

Block formula:

$$
\\sum_{i=1}^{n} a_i^2
$$

### Mermaid Diagrams

Our editor supports Mermaid diagrams, allowing you to create flowcharts, sequence diagrams, Gantt charts, and many other diagram types.

#### Flowchart example:

\`\`\`mermaid
flowchart TD
    A[Start] --> B{Decision}
    B -->|Yes| C[Action 1]
    B -->|No| D[Action 2]
    C --> E[End]
    D --> E
\`\`\`

#### Sequence diagram example:

\`\`\`mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database
    
    User->>Frontend: Send Request
    Frontend->>Backend: Process Request
    Backend->>Database: Query Data
    Database-->>Backend: Return Results
    Backend-->>Frontend: Return Data
    Frontend-->>User: Display Results
\`\`\`

#### Gantt chart example:

\`\`\`mermaid
gantt
    title Project Development Plan
    dateFormat YYYY-MM-DD
    section Design Phase
    Requirements Analysis :done, des1, 2024-01-01, 2024-01-05
    Prototype Design :active, des2, 2024-01-06, 2024-01-10
    section Development Phase
    Frontend Development :dev1, 2024-01-11, 2024-01-20
    Backend Development :dev2, 2024-01-11, 2024-01-20
    section Testing Phase
    Functional Testing :test1, 2024-01-21, 2024-01-25
\`\`\`

#### Class diagram example:

\`\`\`mermaid
classDiagram
    class User {
        +String name
        +String email
        +login()
        +logout()
    }
    class Article {
        +String title
        +String content
        +publish()
        +edit()
    }
    User "1" --> "*" Article : creates
\`\`\`

#### State diagram example:

\`\`\`mermaid
stateDiagram-v2
    [*] --> Pending
    Pending --> InProgress: Start Processing
    InProgress --> Completed: Complete Task
    InProgress --> Pending: Pause
    Completed --> [*]
\`\`\`

---

`,Ev=`{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1001,
      "isDeleted": false,
      "id": "title-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 200,
      "y": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#4f46e5",
      "width": 400,
      "height": 80,
      "seed": 1001,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1001,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1002,
      "isDeleted": false,
      "id": "title-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 280,
      "y": 75,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "width": 240,
      "height": 30,
      "seed": 1002,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1002,
      "link": null,
      "locked": false,
      "fontSize": 36,
      "fontFamily": 3,
      "text": "Gitary",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Gitary",
      "lineHeight": 1.25,
      "baseline": 25
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1003,
      "isDeleted": false,
      "id": "subtitle-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 0,
      "y": 150,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 800,
      "height": 25,
      "seed": 1003,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1003,
      "link": null,
      "locked": false,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "类 Notion 编辑 + 专业图表绘制（Excalidraw & Draw.io），运行在你的 Git 仓库上",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "类 Notion 编辑 + 专业图表绘制（Excalidraw & Draw.io），运行在你的 Git 仓库上",
      "lineHeight": 1.25,
      "baseline": 18
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1004,
      "isDeleted": false,
      "id": "feature-1",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e0f2fe",
      "width": 180,
      "height": 120,
      "seed": 1004,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-1-text"
        }
      ],
      "updated": 1004,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1005,
      "isDeleted": false,
      "id": "feature-1-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1005,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1005,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "📝 类 Notion\\n编辑体验\\nWYSIWYG",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-1",
      "originalText": "📝 类 Notion\\n编辑体验\\nWYSIWYG",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1006,
      "isDeleted": false,
      "id": "feature-2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 310,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1006,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-2-text"
        }
      ],
      "updated": 1006,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1007,
      "isDeleted": false,
      "id": "feature-2-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 335,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1007,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1007,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔄 Git 集成\\nGitHub/Gitee\\n零中间存储",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-2",
      "originalText": "🔄 Git 集成\\nGitHub/Gitee\\n零中间存储",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1008,
      "isDeleted": false,
      "id": "feature-3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dbeafe",
      "width": 180,
      "height": 120,
      "seed": 1008,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-3-text"
        }
      ],
      "updated": 1008,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1009,
      "isDeleted": false,
      "id": "feature-3-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1009,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1009,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 VS Code\\n风格界面\\n专业环境",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-3",
      "originalText": "🎨 VS Code\\n风格界面\\n专业环境",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1010,
      "isDeleted": false,
      "id": "feature-4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fce7f3",
      "width": 180,
      "height": 120,
      "seed": 1010,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-4-text"
        }
      ],
      "updated": 1010,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1011,
      "isDeleted": false,
      "id": "feature-4-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1011,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1011,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔍 全文检索\\n快速搜索\\n代码与文档",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-4",
      "originalText": "🔍 全文检索\\n快速搜索\\n代码与文档",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1012,
      "isDeleted": false,
      "id": "feature-5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 290,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dcfce7",
      "width": 220,
      "height": 120,
      "seed": 1012,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-5-text"
        }
      ],
      "updated": 1012,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1013,
      "isDeleted": false,
      "id": "feature-5-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 315,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 170,
      "height": 70,
      "seed": 1013,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1013,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 专业图表\\nExcalidraw & Draw.io\\n流程图 UML 图",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-5",
      "originalText": "🎨 专业图表\\nExcalidraw & Draw.io\\n流程图 UML 图",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1016,
      "isDeleted": false,
      "id": "feature-6",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1016,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-6-text"
        }
      ],
      "updated": 1016,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1017,
      "isDeleted": false,
      "id": "feature-6-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1017,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1017,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🤖 AI 智能\\n画图与助手\\n自然语言生成",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-6",
      "originalText": "🤖 AI 智能\\n画图与助手\\n自然语言生成",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "ellipse",
      "version": 141,
      "versionNonce": 1014,
      "isDeleted": false,
      "id": "advantage-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 250,
      "y": 540,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 300,
      "height": 100,
      "seed": 1014,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": [
        {
          "type": "text",
          "id": "advantage-text"
        }
      ],
      "updated": 1014,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1015,
      "isDeleted": false,
      "id": "advantage-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 300,
      "y": 570,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 200,
      "height": 40,
      "seed": 1015,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1015,
      "link": null,
      "locked": false,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "✅ 完全的数据控制权\\n✅ 无服务依赖",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "advantage-box",
      "originalText": "✅ 完全的数据控制权\\n✅ 无服务依赖",
      "lineHeight": 1.25,
      "baseline": 35
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
`,Dv=`{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1001,
      "isDeleted": false,
      "id": "title-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 200,
      "y": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#4f46e5",
      "width": 400,
      "height": 80,
      "seed": 1001,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1001,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1002,
      "isDeleted": false,
      "id": "title-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 280,
      "y": 75,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "width": 240,
      "height": 30,
      "seed": 1002,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1002,
      "link": null,
      "locked": false,
      "fontSize": 36,
      "fontFamily": 3,
      "text": "Gitary",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Gitary",
      "lineHeight": 1.25,
      "baseline": 25
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1003,
      "isDeleted": false,
      "id": "subtitle-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 0,
      "y": 150,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 800,
      "height": 25,
      "seed": 1003,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1003,
      "link": null,
      "locked": false,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "Notion-like editing + Professional diagramming (Excalidraw & Draw.io) for your Git repositories",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Notion-like editing + Professional diagramming (Excalidraw & Draw.io) for your Git repositories",
      "lineHeight": 1.25,
      "baseline": 18
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1004,
      "isDeleted": false,
      "id": "feature-1",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e0f2fe",
      "width": 180,
      "height": 120,
      "seed": 1004,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-1-text"
        }
      ],
      "updated": 1004,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1005,
      "isDeleted": false,
      "id": "feature-1-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1005,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1005,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "📝 Notion-like\\nEditor\\nWYSIWYG",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-1",
      "originalText": "📝 Notion-like\\nEditor\\nWYSIWYG",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1006,
      "isDeleted": false,
      "id": "feature-2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 310,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1006,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-2-text"
        }
      ],
      "updated": 1006,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1007,
      "isDeleted": false,
      "id": "feature-2-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 335,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1007,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1007,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔄 Git Integration\\nGitHub/Gitee\\nZero Storage",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-2",
      "originalText": "🔄 Git Integration\\nGitHub/Gitee\\nZero Storage",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1008,
      "isDeleted": false,
      "id": "feature-3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dbeafe",
      "width": 180,
      "height": 120,
      "seed": 1008,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-3-text"
        }
      ],
      "updated": 1008,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1009,
      "isDeleted": false,
      "id": "feature-3-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1009,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1009,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 VS Code\\nStyle UI\\nProfessional",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-3",
      "originalText": "🎨 VS Code\\nStyle UI\\nProfessional",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1010,
      "isDeleted": false,
      "id": "feature-4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fce7f3",
      "width": 180,
      "height": 120,
      "seed": 1010,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-4-text"
        }
      ],
      "updated": 1010,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1011,
      "isDeleted": false,
      "id": "feature-4-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1011,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1011,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔍 Full-Text\\nSearch\\nFast & Accurate",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-4",
      "originalText": "🔍 Full-Text\\nSearch\\nFast & Accurate",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1012,
      "isDeleted": false,
      "id": "feature-5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 290,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dcfce7",
      "width": 220,
      "height": 120,
      "seed": 1012,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-5-text"
        }
      ],
      "updated": 1012,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1013,
      "isDeleted": false,
      "id": "feature-5-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 315,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 170,
      "height": 70,
      "seed": 1013,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1013,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 Professional\\nDiagramming\\nExcalidraw & Draw.io",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-5",
      "originalText": "🎨 Professional\\nDiagramming\\nExcalidraw & Draw.io",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1016,
      "isDeleted": false,
      "id": "feature-6",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1016,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-6-text"
        }
      ],
      "updated": 1016,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1017,
      "isDeleted": false,
      "id": "feature-6-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1017,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1017,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🤖 AI-Powered\\nDiagram & Assistant\\nNatural Language",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-6",
      "originalText": "🤖 AI-Powered\\nDiagram & Assistant\\nNatural Language",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "ellipse",
      "version": 141,
      "versionNonce": 1014,
      "isDeleted": false,
      "id": "advantage-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 250,
      "y": 540,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 300,
      "height": 100,
      "seed": 1014,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": [
        {
          "type": "text",
          "id": "advantage-text"
        }
      ],
      "updated": 1014,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1015,
      "isDeleted": false,
      "id": "advantage-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 300,
      "y": 570,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 200,
      "height": 40,
      "seed": 1015,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1015,
      "link": null,
      "locked": false,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "✅ Complete Data Control\\n✅ No Service Dependency",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "advantage-box",
      "originalText": "✅ Complete Data Control\\n✅ No Service Dependency",
      "lineHeight": 1.25,
      "baseline": 35
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
`,Ov=`<mxfile host="app.diagrams.net">
  <diagram name="示例图表" id="example-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="欢迎使用 Draw.io" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4f46e5;strokeColor=#1e1e1e;fontColor=#ffffff;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3" value="开始" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4" value="处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5" value="完成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dcfce7;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="200" as="sourcePoint" />
            <mxPoint x="450" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="320" as="sourcePoint" />
            <mxPoint x="450" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="440" as="sourcePoint" />
            <mxPoint x="450" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="这是一个简单的流程图示例&#xa;你可以使用 Draw.io 创建各种图表：&#xa;• 流程图&#xa;• UML 图&#xa;• 网络图&#xa;• 架构图" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#1e1e1e;align=left;verticalAlign=top;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="400" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

`,kv=`<mxfile host="app.diagrams.net">
  <diagram name="Example Diagram" id="example-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="Welcome to Draw.io" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4f46e5;strokeColor=#1e1e1e;fontColor=#ffffff;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3" value="Start" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4" value="Process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5" value="End" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dcfce7;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="200" as="sourcePoint" />
            <mxPoint x="450" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="320" as="sourcePoint" />
            <mxPoint x="450" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="440" as="sourcePoint" />
            <mxPoint x="450" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="This is a simple flowchart example&#xa;You can use Draw.io to create various diagrams:&#xa;• Flowcharts&#xa;• UML diagrams&#xa;• Network diagrams&#xa;• Architecture diagrams" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#1e1e1e;align=left;verticalAlign=top;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="400" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

`,Av=`{
  "rootId": "root",
  "nodes": {
    "root": {
      "id": "root",
      "text": "Gitary 思维导图功能",
      "parentId": null,
      "children": ["node1", "node2", "node3"],
      "isExpanded": true,
      "depth": 0
    },
    "node1": {
      "id": "node1",
      "text": "核心功能",
      "parentId": "root",
      "children": ["node1-1", "node1-2", "node1-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node1-1": {
      "id": "node1-1",
      "text": "节点编辑",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node1-2": {
      "id": "node1-2",
      "text": "拖拽布局",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node1-3": {
      "id": "node1-3",
      "text": "自动保存",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2": {
      "id": "node2",
      "text": "快捷键操作",
      "parentId": "root",
      "children": ["node2-1", "node2-2", "node2-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node2-1": {
      "id": "node2-1",
      "text": "Tab: 添加子节点",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2-2": {
      "id": "node2-2",
      "text": "Enter: 添加兄弟节点",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2-3": {
      "id": "node2-3",
      "text": "Space: 编辑节点",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3": {
      "id": "node3",
      "text": "使用场景",
      "parentId": "root",
      "children": ["node3-1", "node3-2", "node3-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node3-1": {
      "id": "node3-1",
      "text": "知识整理",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3-2": {
      "id": "node3-2",
      "text": "项目规划",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3-3": {
      "id": "node3-3",
      "text": "头脑风暴",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    }
  }
}

`,jv=`{
  "rootId": "root",
  "nodes": {
    "root": {
      "id": "root",
      "text": "Gitary Mind Map Features",
      "parentId": null,
      "children": ["node1", "node2", "node3"],
      "isExpanded": true,
      "depth": 0
    },
    "node1": {
      "id": "node1",
      "text": "Core Features",
      "parentId": "root",
      "children": ["node1-1", "node1-2", "node1-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node1-1": {
      "id": "node1-1",
      "text": "Node Editing",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node1-2": {
      "id": "node1-2",
      "text": "Drag & Drop Layout",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node1-3": {
      "id": "node1-3",
      "text": "Auto Save",
      "parentId": "node1",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2": {
      "id": "node2",
      "text": "Keyboard Shortcuts",
      "parentId": "root",
      "children": ["node2-1", "node2-2", "node2-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node2-1": {
      "id": "node2-1",
      "text": "Tab: Add Child",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2-2": {
      "id": "node2-2",
      "text": "Enter: Add Sibling",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node2-3": {
      "id": "node2-3",
      "text": "Space: Edit Node",
      "parentId": "node2",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3": {
      "id": "node3",
      "text": "Use Cases",
      "parentId": "root",
      "children": ["node3-1", "node3-2", "node3-3"],
      "isExpanded": true,
      "depth": 1
    },
    "node3-1": {
      "id": "node3-1",
      "text": "Knowledge Organization",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3-2": {
      "id": "node3-2",
      "text": "Project Planning",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    },
    "node3-3": {
      "id": "node3-3",
      "text": "Brainstorming",
      "parentId": "node3",
      "children": [],
      "isExpanded": true,
      "depth": 2
    }
  }
}

`,Mv=oc.create({scope:`spaceStateCache`,storage:`localStorage`}),Nv=()=>({isIndexedDbReadMeFileInitialized:!1}),Pv=()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`},Fv=()=>Pv()===`en`?xv:bv,Iv=()=>Pv()===`en`?Cv:Sv,Lv=()=>Pv()===`en`?Tv:wv,Rv=()=>Pv()===`zh`?Ev:Dv,zv=()=>Pv()===`zh`?Ov:kv,Bv=()=>Pv()===`zh`?Av:jv;const Vv=Vg({initilize(e){yv.getSpaceStore().waitUtilLoaded(async()=>{let t={platform:`idb`,owner:`root`,repo:`home`};yv.addSpace(t,{silent:!0});let n=yv.getSpaceByInfo(t);if(n){let{isIndexedDbReadMeFileInitialized:t}=Mv.get(n.id,Nv());if(!t){let t=Fv(),r=Iv(),i=async(t,r)=>{let i;try{await e.fs.readFile(u_.getUri(n.id,t)),i=!0}catch{i=!1}if(!i){let i=new TextEncoder().encode(r);await e.fs.writeFile(u_.getUri(n.id,t),i,{overwrite:!0,create:!0})}},a=Pv(),o=a===`en`?`/Connect-Git-Repository.md`:`/连接-Git-仓库.md`,s=a===`en`?`/Markdown-Tutorial.md`:`/Markdown-教程.md`,c=a===`zh`?`/Excalidraw-示例.excalidraw.json`:`/Excalidraw-Example.excalidraw.json`,l=a===`zh`?`/Draw.io-示例.drawio`:`/Draw.io-Example.drawio`,u=a===`zh`?`/思维导图-示例.mindmap.json`:`/Mind-Map-Example.mindmap.json`,d=Lv(),f=Rv(),p=zv(),m=Bv();await i(`/README.md`,t),await i(o,r),await i(s,d),await i(c,f),await i(l,p),await i(u,m),Mv.set(n.id,{...Mv.get(n.id,Nv()),isIndexedDbReadMeFileInitialized:!0}),e.eventBus.emit(Ad.ReadMeFileInitialized,{spaceId:n.id})}}})}});var Hv=()=>{let e=window.location.hash.match(/\/https:\/\/([^.]+)\.com\/([^/]+)\/([^/]+)/);if(!e)return null;let[,t,n,r]=e;return{platform:t,owner:n,repo:r}},Uv=()=>{let e=new bo(Hv());return window.addEventListener(`hashchange`,()=>e.next(Hv())),e};const Wv=Vg({initilize(e){Uv().subscribe(e=>{if(!e)return;let{platform:t,owner:n,repo:r}=e;yv.focusSpace(u_.generateSpaceId(t,n,r))}),b_(()=>yv.getFocusedSpace(),e=>yv.getFocusedSpace$().subscribe(e)).subscribe(e=>{if(!e)return;let{platform:t,owner:n,repo:r}=e,i=`/${location.search}#/https://${t}.com/${n}/${r}`;window.location.pathname!==i&&window.history.pushState(null,``,i)})}});var Gv=class{openers=[];listeners=[];open=async(e,t)=>{if(!t||!t.path)return;let n=t.path.split(`/`).pop(),r=this.getMatchedOpeners(n)[0];if(r){let n=u_.getUri(e,t.path).toString();r.init(n),vr.isMobile()&&J.commandService.executeCommand(`client:toggleHome`)}};openWith=async(e,t,n)=>{if(!t||!t.path)return;let r=this.openers.find(e=>e.id===n);if(!r)return;let i=t.path.split(`/`).pop();if(!this.match(r,i))return;let a=u_.getUri(e,t.path).toString();r.init(a),vr.isMobile()&&J.commandService.executeCommand(`client:toggleHome`)};register=e=>{if(!e.id)return!1;this.openers=this.openers.filter(t=>t.id!==e.id),this.openers.push(e);for(let t of this.listeners)t(e);return!0};getOpeners=()=>[...this.openers];getMatchedOpeners=e=>this.openers.filter(t=>this.match(t,e)).sort((e,t)=>(t.priority||0)-(e.priority||0));subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)});match=(e,t)=>typeof e.match==`function`?e.match(t):typeof e.match[0]==`string`?!!e.match.find(e=>t.endsWith(e)):e.match[0]instanceof RegExp?!!e.match.find(e=>e.test(t)):!1};const Kv=new Gv;var qv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`rounded-lg border bg-card text-card-foreground shadow-sm`,e),...t}));qv.displayName=`Card`;var Jv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`flex flex-col space-y-1.5 p-6`,e),...t}));Jv.displayName=`CardHeader`;var Yv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`text-2xl font-semibold leading-none tracking-tight`,e),...t}));Yv.displayName=`CardTitle`;var Xv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`text-sm text-muted-foreground`,e),...t}));Xv.displayName=`CardDescription`;var Zv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`p-6 pt-0`,e),...t}));Zv.displayName=`CardContent`;var Qv=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`div`,{ref:n,className:q(`flex items-center p-6 pt-0`,e),...t}));Qv.displayName=`CardFooter`;const $v=`RFC3986`,ey={RFC1738:e=>String(e).replace(/%20/g,`+`),RFC3986:e=>String(e)};var ty=Array.isArray,ny=(()=>{let e=[];for(let t=0;t<256;++t)e.push(`%`+((t<16?`0`:``)+t.toString(16)).toUpperCase());return e})(),ry=1024;const iy=(e,t,n,r,i)=>{if(e.length===0)return e;let a=e;if(typeof e==`symbol`?a=Symbol.prototype.toString.call(e):typeof e!=`string`&&(a=String(e)),n===`iso-8859-1`)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return`%26%23`+parseInt(e.slice(2),16)+`%3B`});let o=``;for(let e=0;e<a.length;e+=ry){let t=a.length>=ry?a.slice(e,e+ry):a,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r===45||r===46||r===95||r===126||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||i===`RFC1738`&&(r===40||r===41)){n[n.length]=t.charAt(e);continue}if(r<128){n[n.length]=ny[r];continue}if(r<2048){n[n.length]=ny[192|r>>6]+ny[128|r&63];continue}if(r<55296||r>=57344){n[n.length]=ny[224|r>>12]+ny[128|r>>6&63]+ny[128|r&63];continue}e+=1,r=65536+((r&1023)<<10|t.charCodeAt(e)&1023),n[n.length]=ny[240|r>>18]+ny[128|r>>12&63]+ny[128|r>>6&63]+ny[128|r&63]}o+=n.join(``)}return o};function ay(e){return!e||typeof e!=`object`?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function oy(e,t){if(ty(e)){let n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}var sy=Object.prototype.hasOwnProperty,cy={brackets(e){return String(e)+`[]`},comma:`comma`,indices(e,t){return String(e)+`[`+t+`]`},repeat(e){return String(e)}},ly=Array.isArray,uy=Array.prototype.push,dy=function(e,t){uy.apply(e,ly(t)?t:[t])},fy=Date.prototype.toISOString,py={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:`indices`,charset:`utf-8`,charsetSentinel:!1,delimiter:`&`,encode:!0,encodeDotInKeys:!1,encoder:iy,encodeValuesOnly:!1,format:$v,formatter:ey[$v],indices:!1,serializeDate(e){return fy.call(e)},skipNulls:!1,strictNullHandling:!1};function my(e){return typeof e==`string`||typeof e==`number`||typeof e==`boolean`||typeof e==`symbol`||typeof e==`bigint`}var hy={};function gy(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){let v=e,y=_,b=0,x=!1;for(;(y=y.get(hy))!==void 0&&!x;){let t=y.get(e);if(b+=1,t!==void 0){if(t===b)throw RangeError(`Cyclic object value`);x=!0}y.get(hy)===void 0&&(b=0)}if(typeof l==`function`?v=l(t,v):v instanceof Date?v=f?.(v):n===`comma`&&ly(v)&&(v=oy(v,function(e){return e instanceof Date?f?.(e):e})),v===null){if(a)return c&&!h?c(t,py.encoder,g,`key`,p):t;v=``}if(my(v)||ay(v)){if(c){let e=h?t:c(t,py.encoder,g,`key`,p);return[m?.(e)+`=`+m?.(c(v,py.encoder,g,`value`,p))]}return[m?.(t)+`=`+m?.(String(v))]}let S=[];if(v===void 0)return S;let C;if(n===`comma`&&ly(v))h&&c&&(v=oy(v,c)),C=[{value:v.length>0?v.join(`,`)||null:void 0}];else if(ly(l))C=l;else{let e=Object.keys(v);C=u?e.sort(u):e}let w=s?String(t).replace(/\./g,`%2E`):String(t),T=r&&ly(v)&&v.length===1?w+`[]`:w;if(i&&ly(v)&&v.length===0)return T+`[]`;for(let t=0;t<C.length;++t){let y=C[t],x=typeof y==`object`&&y.value!==void 0?y.value:v[y];if(o&&x===null)continue;let w=d&&s?y.replace(/\./g,`%2E`):y,E=ly(v)?typeof n==`function`?n(T,w):T:T+(d?`.`+w:`[`+w+`]`);_.set(e,b);let D=new WeakMap;D.set(hy,_),dy(S,gy(x,E,n,r,i,a,o,s,n===`comma`&&h&&ly(v)?null:c,l,u,d,f,p,m,h,g,D))}return S}function _y(e=py){if(e.allowEmptyArrays!==void 0&&typeof e.allowEmptyArrays!=`boolean`)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(e.encodeDotInKeys!==void 0&&typeof e.encodeDotInKeys!=`boolean`)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!=`function`)throw TypeError(`Encoder has to be a function.`);let t=e.charset||py.charset;if(e.charset!==void 0&&e.charset!==`utf-8`&&e.charset!==`iso-8859-1`)throw TypeError(`The charset option must be either utf-8, iso-8859-1, or undefined`);let n=$v;if(e.format!==void 0){if(!sy.call(ey,e.format))throw TypeError(`Unknown format option provided.`);n=e.format}let r=ey[n],i=py.filter;(typeof e.filter==`function`||ly(e.filter))&&(i=e.filter);let a;if(a=e.arrayFormat&&e.arrayFormat in cy?e.arrayFormat:`indices`in e?e.indices?`indices`:`repeat`:py.arrayFormat,`commaRoundTrip`in e&&typeof e.commaRoundTrip!=`boolean`)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let o=e.allowDots===void 0?e.encodeDotInKeys?!0:py.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix==`boolean`?e.addQueryPrefix:py.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays==`boolean`?!!e.allowEmptyArrays:py.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel==`boolean`?e.charsetSentinel:py.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:e.delimiter===void 0?py.delimiter:e.delimiter,encode:typeof e.encode==`boolean`?e.encode:py.encode,encodeDotInKeys:typeof e.encodeDotInKeys==`boolean`?e.encodeDotInKeys:py.encodeDotInKeys,encoder:typeof e.encoder==`function`?e.encoder:py.encoder,encodeValuesOnly:typeof e.encodeValuesOnly==`boolean`?e.encodeValuesOnly:py.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate==`function`?e.serializeDate:py.serializeDate,skipNulls:typeof e.skipNulls==`boolean`?e.skipNulls:py.skipNulls,sort:typeof e.sort==`function`?e.sort:null,strictNullHandling:typeof e.strictNullHandling==`boolean`?e.strictNullHandling:py.strictNullHandling}}function vy(e,t={}){let n=e,r=_y(t),i,a;typeof r.filter==`function`?(a=r.filter,n=a(``,n)):ly(r.filter)&&(a=r.filter,i=a);let o=[];if(typeof n!=`object`||!n)return``;let s=cy[r.arrayFormat],c=s===`comma`&&r.commaRoundTrip;i||=Object.keys(n),r.sort&&i.sort(r.sort);let l=new WeakMap;for(let e=0;e<i.length;++e){let t=i[e];r.skipNulls&&n[t]===null||dy(o,gy(n[t],t,s,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}let u=o.join(r.delimiter),d=r.addQueryPrefix===!0?`?`:``;return r.charsetSentinel&&(r.charset===`iso-8859-1`?d+=`utf8=%26%2310003%3B&`:d+=`utf8=%E2%9C%93&`),u.length>0?d+u:``}const yy=`4.104.0`;let by=!1,xy,Sy,Cy,wy,Ty,Ey,Dy,Oy,ky;function Ay(e,t={auto:!1}){if(by)throw Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(xy)throw Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${xy}'\``);by=t.auto,xy=e.kind,Sy=e.fetch,e.Request,e.Response,e.Headers,Cy=e.FormData,e.Blob,wy=e.File,Ty=e.ReadableStream,Ey=e.getMultipartRequestOptions,Dy=e.getDefaultAgent,Oy=e.fileFromPath,ky=e.isFsReadStream}var jy=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return`MultipartBody`}};function My({manuallyImported:e}={}){let t=e?`You may need to use polyfills`:"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n",n,r,i,a;try{n=fetch,r=Request,i=Response,a=Headers}catch(e){throw Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:`web`,fetch:n,Request:r,Response:i,Headers:a,FormData:typeof FormData<`u`?FormData:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<`u`?Blob:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<`u`?File:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<`u`?ReadableStream:class{constructor(){throw Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new jy(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}const Ny=()=>{xy||Ay(My(),{auto:!0})};Ny();var Y=class extends Error{},Py=class e extends Y{constructor(t,n,r,i){super(`${e.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.request_id=i?.[`x-request-id`],this.error=n;let a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,n){let r=t?.message?typeof t.message==`string`?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||`(no status code or body)`}static generate(t,n,r,i){if(!t||!i)return new Iy({message:r,cause:Ub(n)});let a=n?.error;return t===400?new Ry(t,a,r,i):t===401?new zy(t,a,r,i):t===403?new By(t,a,r,i):t===404?new Vy(t,a,r,i):t===409?new Hy(t,a,r,i):t===422?new Uy(t,a,r,i):t===429?new Wy(t,a,r,i):t>=500?new Gy(t,a,r,i):new e(t,a,r,i)}},Fy=class extends Py{constructor({message:e}={}){super(void 0,void 0,e||`Request was aborted.`,void 0)}},Iy=class extends Py{constructor({message:e,cause:t}){super(void 0,void 0,e||`Connection error.`,void 0),t&&(this.cause=t)}},Ly=class extends Iy{constructor({message:e}={}){super({message:e??`Request timed out.`})}},Ry=class extends Py{},zy=class extends Py{},By=class extends Py{},Vy=class extends Py{},Hy=class extends Py{},Uy=class extends Py{},Wy=class extends Py{},Gy=class extends Py{},Ky=class extends Y{constructor(){super(`Could not parse response content as the length limit was reached`)}},qy=class extends Y{constructor(){super(`Could not parse response content as the request was rejected by the content filter`)}},Jy=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},Yy=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},Xy,Zy=class{constructor(){Xy.set(this,void 0),this.buffer=new Uint8Array,Jy(this,Xy,null,`f`)}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e==`string`?new TextEncoder().encode(e):e,n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;let r=[],i;for(;(i=Qy(this.buffer,Yy(this,Xy,`f`)))!=null;){if(i.carriage&&Yy(this,Xy,`f`)==null){Jy(this,Xy,i.index,`f`);continue}if(Yy(this,Xy,`f`)!=null&&(i.index!==Yy(this,Xy,`f`)+1||i.carriage)){r.push(this.decodeText(this.buffer.slice(0,Yy(this,Xy,`f`)-1))),this.buffer=this.buffer.slice(Yy(this,Xy,`f`)),Jy(this,Xy,null,`f`);continue}let e=Yy(this,Xy,`f`)===null?i.preceding:i.preceding-1,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(i.index),Jy(this,Xy,null,`f`)}return r}decodeText(e){if(e==null)return``;if(typeof e==`string`)return e;if(typeof Buffer<`u`){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Y(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<`u`){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??=new TextDecoder(`utf8`),this.textDecoder.decode(e);throw new Y(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Y(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`)}flush(){return this.buffer.length?this.decode(`
`):[]}};Xy=new WeakMap,Zy.NEWLINE_CHARS=new Set([`
`,`\r`]),Zy.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Qy(e,t){for(let n=t??0;n<e.length;n++){if(e[n]===10)return{preceding:n,index:n+1,carriage:!1};if(e[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function $y(e){for(let t=0;t<e.length-1;t++){if(e[t]===10&&e[t+1]===10||e[t]===13&&e[t+1]===13)return t+2;if(e[t]===13&&e[t+1]===10&&t+3<e.length&&e[t+2]===13&&e[t+3]===10)return t+4}return-1}function eb(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var tb=class e{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(t,n){let r=!1;async function*i(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let r of nb(t,n))if(!e){if(r.data.startsWith(`[DONE]`)){e=!0;continue}if(r.event===null||r.event.startsWith(`response.`)||r.event.startsWith(`transcript.`)){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error(`Could not parse message into JSON:`,r.data),console.error(`From chunk:`,r.raw),e}if(e&&e.error)throw new Py(void 0,e.error,void 0,kb(t.headers));yield e}else{let e;try{e=JSON.parse(r.data)}catch(e){throw console.error(`Could not parse message into JSON:`,r.data),console.error(`From chunk:`,r.raw),e}if(r.event==`error`)throw new Py(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}}e=!0}catch(e){if(e instanceof Error&&e.name===`AbortError`)return;throw e}finally{e||n.abort()}}return new e(i,n)}static fromReadableStream(t,n){let r=!1;async function*i(){let e=new Zy,n=eb(t);for await(let t of n)for(let n of e.decode(t))yield n;for(let t of e.flush())yield t}async function*a(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of i())e||t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&e.name===`AbortError`)return;throw e}finally{e||n.abort()}}return new e(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],r=this.iterator(),i=e=>({next:()=>{if(e.length===0){let e=r.next();t.push(e),n.push(e)}return e.shift()}});return[new e(()=>i(t),this.controller),new e(()=>i(n),this.controller)]}toReadableStream(){let e=this,t,n=new TextEncoder;return new Ty({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{let{value:r,done:i}=await t.next();if(i)return e.close();let a=n.encode(JSON.stringify(r)+`
`);e.enqueue(a)}catch(t){e.error(t)}},async cancel(){await t.return?.()}})}};async function*nb(e,t){if(!e.body)throw t.abort(),new Y(`Attempted to iterate over a response with no body`);let n=new ib,r=new Zy,i=eb(e.body);for await(let e of rb(i))for(let t of r.decode(e)){let e=n.decode(t);e&&(yield e)}for(let e of r.flush()){let t=n.decode(e);t&&(yield t)}}async function*rb(e){let t=new Uint8Array;for await(let n of e){if(n==null)continue;let e=n instanceof ArrayBuffer?new Uint8Array(n):typeof n==`string`?new TextEncoder().encode(n):n,r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length),t=r;let i;for(;(i=$y(t))!==-1;)yield t.slice(0,i),t=t.slice(i)}t.length>0&&(yield t)}var ib=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith(`\r`)&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(`:`))return null;let[t,n,r]=ab(e,`:`);return r.startsWith(` `)&&(r=r.substring(1)),t===`event`?this.event=r:t===`data`&&this.data.push(r),null}};function ab(e,t){let n=e.indexOf(t);return n===-1?[e,``,``]:[e.substring(0,n),t,e.substring(n+t.length)]}const ob=e=>typeof e==`object`&&!!e&&typeof e.url==`string`&&typeof e.blob==`function`,sb=e=>typeof e==`object`&&!!e&&typeof e.name==`string`&&typeof e.lastModified==`number`&&cb(e),cb=e=>typeof e==`object`&&!!e&&typeof e.size==`number`&&typeof e.type==`string`&&typeof e.text==`function`&&typeof e.slice==`function`&&typeof e.arrayBuffer==`function`,lb=e=>sb(e)||ob(e)||ky(e);async function ub(e,t,n){if(e=await e,sb(e))return e;if(ob(e)){let r=await e.blob();return t||=new URL(e.url).pathname.split(/[\\/]/).pop()??`unknown_file`,new wy(cb(r)?[await r.arrayBuffer()]:[r],t,n)}let r=await db(e);if(t||=pb(e)??`unknown_file`,!n?.type){let e=r[0]?.type;typeof e==`string`&&(n={...n,type:e})}return new wy(r,t,n)}async function db(e){let t=[];if(typeof e==`string`||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(cb(e))t.push(await e.arrayBuffer());else if(hb(e))for await(let n of e)t.push(n);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${fb(e)}`);return t}function fb(e){return`[${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(`, `)}]`}function pb(e){return mb(e.name)||mb(e.filename)||mb(e.path)?.split(/[\\/]/).pop()}var mb=e=>{if(typeof e==`string`)return e;if(typeof Buffer<`u`&&e instanceof Buffer)return String(e)},hb=e=>typeof e==`object`&&!!e&&typeof e[Symbol.asyncIterator]==`function`;const gb=e=>e&&typeof e==`object`&&e.body&&e[Symbol.toStringTag]===`MultipartBody`,_b=async e=>Ey(await vb(e.body),e),vb=async e=>{let t=new Cy;return await Promise.all(Object.entries(e||{}).map(([e,n])=>yb(t,e,n))),t};var yb=async(e,t,n)=>{if(n!==void 0){if(n==null)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n==`string`||typeof n==`number`||typeof n==`boolean`)e.append(t,String(n));else if(lb(n)){let r=await ub(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>yb(e,t+`[]`,n)));else if(typeof n==`object`)await Promise.all(Object.entries(n).map(([n,r])=>yb(e,`${t}[${n}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},bb=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},xb=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},Sb;Ny();async function Cb(e){let{response:t}=e;if(e.options.stream)return Yb(`response`,t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):tb.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let n=t.headers.get(`content-type`)?.split(`;`)[0]?.trim();if(n?.includes(`application/json`)||n?.endsWith(`+json`)){let e=await t.json();return Yb(`response`,t.status,t.url,t.headers,e),wb(e,t)}let r=await t.text();return Yb(`response`,t.status,t.url,t.headers,r),r}function wb(e,t){return!e||typeof e!=`object`||Array.isArray(e)?e:Object.defineProperty(e,`_request_id`,{value:t.headers.get(`x-request-id`),enumerable:!1})}var Tb=class e extends Promise{constructor(e,t=Cb){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(t){return new e(this.responsePromise,async e=>wb(t(await this.parseResponse(e),e),e.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get(`x-request-id`)}}parse(){return this.parsedPromise||=this.responsePromise.then(this.parseResponse),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},Eb=class{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:i}){this.baseURL=e,this.maxRetries=Hb(`maxRetries`,t),this.timeout=Hb(`timeout`,n),this.httpAgent=r,this.fetch=i??Sy}authHeaders(e){return{}}defaultHeaders(e){return{Accept:`application/json`,"Content-Type":`application/json`,"User-Agent":this.getUserAgent(),...Lb(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Xb()}`}get(e,t){return this.methodRequest(`get`,e,t)}post(e,t){return this.methodRequest(`post`,e,t)}patch(e,t){return this.methodRequest(`patch`,e,t)}put(e,t){return this.methodRequest(`put`,e,t)}delete(e,t){return this.methodRequest(`delete`,e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{let r=n&&cb(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:`get`,path:e,...n})}calculateContentLength(e){if(typeof e==`string`){if(typeof Buffer<`u`)return Buffer.byteLength(e,`utf8`).toString();if(typeof TextEncoder<`u`)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){let n={...e},{method:r,path:i,query:a,headers:o={}}=n,s=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body==`string`?n.body:gb(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(s),l=this.buildURL(i,a);`timeout`in n&&Hb(`timeout`,n.timeout),n.timeout=n.timeout??this.timeout;let u=n.httpAgent??this.httpAgent??Dy(l),d=n.timeout+1e3;typeof u?.options?.timeout==`number`&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&r!==`get`&&(e.idempotencyKey||=this.defaultIdempotencyKey(),o[this.idempotencyHeader]=e.idempotencyKey);let f=this.buildHeaders({options:n,headers:o,contentLength:c,retryCount:t});return{req:{method:r,...s&&{body:s},headers:f,...u&&{agent:u},signal:n.signal??null},url:l,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){let i={};n&&(i[`content-length`]=n);let a=this.defaultHeaders(e);return qb(i,a),qb(i,t),gb(e.body)&&xy!==`node`&&delete i[`content-type`],$b(a,`x-stainless-retry-count`)===void 0&&$b(t,`x-stainless-retry-count`)===void 0&&(i[`x-stainless-retry-count`]=String(r)),$b(a,`x-stainless-timeout`)===void 0&&$b(t,`x-stainless-timeout`)===void 0&&e.timeout&&(i[`x-stainless-timeout`]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return Py.generate(e,t,n,r)}request(e,t=null){return new Tb(this.makeRequest(e,t))}async makeRequest(e,t){let n=await e,r=n.maxRetries??this.maxRetries;t??=r,await this.prepareOptions(n);let{req:i,url:a,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(i,{url:a,options:n}),Yb(`request`,a,n,i.headers),n.signal?.aborted)throw new Fy;let s=new AbortController,c=await this.fetchWithTimeout(a,i,o,s).catch(Ub);if(c instanceof Error){if(n.signal?.aborted)throw new Fy;if(t)return this.retryRequest(n,t);throw c.name===`AbortError`?new Ly:new Iy({cause:c})}let l=kb(c.headers);if(!c.ok){if(t&&this.shouldRetry(c))return Yb(`response (error; ${`retrying, ${t} attempts remaining`})`,c.status,a,l),this.retryRequest(n,t,l);let e=await c.text().catch(e=>Ub(e).message),r=Rb(e),i=r?void 0:e;throw Yb(`response (error; ${t?`(error; no more retries left)`:`(error; not retryable)`})`,c.status,a,l,i),this.makeStatusError(c.status,r,i,l)}return{response:c,options:n,controller:s}}requestAPIList(e,t){let n=this.makeRequest(t,null);return new Ob(this,n,e)}buildURL(e,t){let n=Bb(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith(`/`)&&e.startsWith(`/`)?e.slice(1):e)),r=this.defaultQuery();return Gb(r)||(t={...r,...t}),typeof t==`object`&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>t!==void 0).map(([e,t])=>{if(typeof t==`string`||typeof t==`number`||typeof t==`boolean`)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(t===null)return`${encodeURIComponent(e)}=`;throw new Y(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join(`&`)}async fetchWithTimeout(e,t,n,r){let{signal:i,...a}=t||{};i&&i.addEventListener(`abort`,()=>r.abort());let o=setTimeout(()=>r.abort(),n),s={signal:r.signal,...a};return s.method&&=s.method.toUpperCase(),this.fetch.call(void 0,e,s).finally(()=>{clearTimeout(o)})}shouldRetry(e){let t=e.headers.get(`x-should-retry`);return t===`true`?!0:t===`false`?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r,i=n?.[`retry-after-ms`];if(i){let e=parseFloat(i);Number.isNaN(e)||(r=e)}let a=n?.[`retry-after`];if(a&&!r){let e=parseFloat(a);r=Number.isNaN(e)?Date.parse(a)-Date.now():e*1e3}if(!(r&&0<=r&&r<60*1e3)){let n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Vb(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){let n=t-e;return Math.min(.5*2**n,8)*(1-Math.random()*.25)*1e3}getUserAgent(){return`${this.constructor.name}/JS ${yy}`}},Db=class{constructor(e,t,n,r){Sb.set(this,void 0),bb(this,Sb,e,`f`),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new Y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if(`params`in e&&typeof t.query==`object`)t.query={...t.query,...e.params};else if(`url`in e){let n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(let[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await xb(this,Sb,`f`).requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Sb=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}},Ob=class extends Tb{constructor(e,t,n){super(t,async t=>new n(e,t.response,await Cb(t),t.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}};const kb=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let n=t.toString();return e[n.toLowerCase()]||e[n]}});var Ab={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0};const jb=e=>typeof e==`object`&&!!e&&!Gb(e)&&Object.keys(e).every(e=>Kb(Ab,e));var Mb=()=>{if(typeof Deno<`u`&&Deno.build!=null)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":yy,"X-Stainless-OS":Fb(Deno.build.os),"X-Stainless-Arch":Pb(Deno.build.arch),"X-Stainless-Runtime":`deno`,"X-Stainless-Runtime-Version":typeof Deno.version==`string`?Deno.version:Deno.version?.deno??`unknown`};if(typeof EdgeRuntime<`u`)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":yy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":`edge`,"X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<`u`?process:0)===`[object process]`)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":yy,"X-Stainless-OS":Fb(process.platform),"X-Stainless-Arch":Pb(process.arch),"X-Stainless-Runtime":`node`,"X-Stainless-Runtime-Version":process.version};let e=Nb();return e?{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":yy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`unknown`,"X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":yy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`unknown`,"X-Stainless-Runtime":`unknown`,"X-Stainless-Runtime-Version":`unknown`}};function Nb(){if(typeof navigator>`u`||!navigator)return null;for(let{key:e,pattern:t}of[{key:`edge`,pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`ie`,pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`ie`,pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`chrome`,pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`firefox`,pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`safari`,pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n)return{browser:e,version:`${n[1]||0}.${n[2]||0}.${n[3]||0}`}}return null}var Pb=e=>e===`x32`?`x32`:e===`x86_64`||e===`x64`?`x64`:e===`arm`?`arm`:e===`aarch64`||e===`arm64`?`arm64`:e?`other:${e}`:`unknown`,Fb=e=>(e=e.toLowerCase(),e.includes(`ios`)?`iOS`:e===`android`?`Android`:e===`darwin`?`MacOS`:e===`win32`?`Windows`:e===`freebsd`?`FreeBSD`:e===`openbsd`?`OpenBSD`:e===`linux`?`Linux`:e?`Other:${e}`:`Unknown`),Ib,Lb=()=>Ib??=Mb();const Rb=e=>{try{return JSON.parse(e)}catch{return}};var zb=/^[a-z][a-z0-9+.-]*:/i,Bb=e=>zb.test(e);const Vb=e=>new Promise(t=>setTimeout(t,e));var Hb=(e,t)=>{if(typeof t!=`number`||!Number.isInteger(t))throw new Y(`${e} must be an integer`);if(t<0)throw new Y(`${e} must be a positive integer`);return t};const Ub=e=>{if(e instanceof Error)return e;if(typeof e==`object`&&e)try{return Error(JSON.stringify(e))}catch{}return Error(e)},Wb=e=>{if(typeof process<`u`)return{}?.[e]?.trim()??void 0;if(typeof Deno<`u`)return Deno.env?.get?.(e)?.trim()};function Gb(e){if(!e)return!0;for(let t in e)return!1;return!0}function Kb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qb(e,t){for(let n in t){if(!Kb(t,n))continue;let r=n.toLowerCase();if(!r)continue;let i=t[n];i===null?delete e[r]:i!==void 0&&(e[r]=i)}}var Jb=new Set([`authorization`,`api-key`]);function Yb(e,...t){if(typeof process<`u`&&{}?.DEBUG===`true`){let n=t.map(e=>{if(!e)return e;if(e.headers){let t={...e,headers:{...e.headers}};for(let n in e.headers)Jb.has(n.toLowerCase())&&(t.headers[n]=`REDACTED`);return t}let t=null;for(let n in e)Jb.has(n.toLowerCase())&&(t??={...e},t[n]=`REDACTED`);return t??e});console.log(`OpenAI:DEBUG:${e}`,...n)}}var Xb=()=>`xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`.replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e===`x`?t:t&3|8).toString(16)});const Zb=()=>typeof window<`u`&&window.document!==void 0&&typeof navigator<`u`,Qb=e=>typeof e?.get==`function`,$b=(e,t)=>{let n=t.toLowerCase();if(Qb(e)){let r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(let i of[t,n,t.toUpperCase(),r]){let t=e.get(i);if(t)return t}}for(let[r,i]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${t} header, using the first entry.`),i[0]):i},ex=e=>{if(typeof Buffer<`u`){let t=Buffer.from(e,`base64`);return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{let t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}};function tx(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}var nx=class extends Db{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}},rx=class extends Db{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if(`params`in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let t=e[e.length-1]?.id;return t?{params:{after:t}}:null}},ix=class{constructor(e){this._client=e}},ax=class extends ix{list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,cx,{query:t,...n})}},ox=class extends ix{constructor(){super(...arguments),this.messages=new ax(this._client)}create(e,t){return this._client.post(`/chat/completions`,{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/chat/completions`,sx,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}},sx=class extends rx{},cx=class extends rx{};ox.ChatCompletionsPage=sx,ox.Messages=ax;var lx=class extends ix{constructor(){super(...arguments),this.completions=new ox(this._client)}};lx.Completions=ox,lx.ChatCompletionsPage=sx;var ux=class extends ix{create(e,t){return this._client.post(`/audio/speech`,{body:e,...t,headers:{Accept:`application/octet-stream`,...t?.headers},__binaryResponse:!0})}},dx=class extends ix{create(e,t){return this._client.post(`/audio/transcriptions`,_b({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}},fx=class extends ix{create(e,t){return this._client.post(`/audio/translations`,_b({body:e,...t,__metadata:{model:e.model}}))}},px=class extends ix{constructor(){super(...arguments),this.transcriptions=new dx(this._client),this.translations=new fx(this._client),this.speech=new ux(this._client)}};px.Transcriptions=dx,px.Translations=fx,px.Speech=ux;var mx=class extends ix{create(e,t){return this._client.post(`/batches`,{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/batches`,hx,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}},hx=class extends rx{};mx.BatchesPage=hx;var gx=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},_x=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},vx,yx,bx,xx,Sx,Cx,wx,Tx,Ex,Dx,Ox,kx,Ax,jx=class{constructor(){vx.add(this),this.controller=new AbortController,yx.set(this,void 0),bx.set(this,()=>{}),xx.set(this,()=>{}),Sx.set(this,void 0),Cx.set(this,()=>{}),wx.set(this,()=>{}),Tx.set(this,{}),Ex.set(this,!1),Dx.set(this,!1),Ox.set(this,!1),kx.set(this,!1),gx(this,yx,new Promise((e,t)=>{gx(this,bx,e,`f`),gx(this,xx,t,`f`)}),`f`),gx(this,Sx,new Promise((e,t)=>{gx(this,Cx,e,`f`),gx(this,wx,t,`f`)}),`f`),_x(this,yx,`f`).catch(()=>{}),_x(this,Sx,`f`).catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit(`end`)},_x(this,vx,`m`,Ax).bind(this))},0)}_connected(){this.ended||(_x(this,bx,`f`).call(this),this._emit(`connect`))}get ended(){return _x(this,Ex,`f`)}get errored(){return _x(this,Dx,`f`)}get aborted(){return _x(this,Ox,`f`)}abort(){this.controller.abort()}on(e,t){return(_x(this,Tx,`f`)[e]||(_x(this,Tx,`f`)[e]=[])).push({listener:t}),this}off(e,t){let n=_x(this,Tx,`f`)[e];if(!n)return this;let r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(_x(this,Tx,`f`)[e]||(_x(this,Tx,`f`)[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{gx(this,kx,!0,`f`),e!==`error`&&this.once(`error`,n),this.once(e,t)})}async done(){gx(this,kx,!0,`f`),await _x(this,Sx,`f`)}_emit(e,...t){if(_x(this,Ex,`f`))return;e===`end`&&(gx(this,Ex,!0,`f`),_x(this,Cx,`f`).call(this));let n=_x(this,Tx,`f`)[e];if(n&&(_x(this,Tx,`f`)[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),e===`abort`){let e=t[0];!_x(this,kx,`f`)&&!n?.length&&Promise.reject(e),_x(this,xx,`f`).call(this,e),_x(this,wx,`f`).call(this,e),this._emit(`end`);return}if(e===`error`){let e=t[0];!_x(this,kx,`f`)&&!n?.length&&Promise.reject(e),_x(this,xx,`f`).call(this,e),_x(this,wx,`f`).call(this,e),this._emit(`end`)}}_emitFinal(){}};yx=new WeakMap,bx=new WeakMap,xx=new WeakMap,Sx=new WeakMap,Cx=new WeakMap,wx=new WeakMap,Tx=new WeakMap,Ex=new WeakMap,Dx=new WeakMap,Ox=new WeakMap,kx=new WeakMap,vx=new WeakSet,Ax=function(e){if(gx(this,Dx,!0,`f`),e instanceof Error&&e.name===`AbortError`&&(e=new Fy),e instanceof Fy)return gx(this,Ox,!0,`f`),this._emit(`abort`,e);if(e instanceof Y)return this._emit(`error`,e);if(e instanceof Error){let t=new Y(e.message);return t.cause=e,this._emit(`error`,t)}return this._emit(`error`,new Y(String(e)))};var X=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},Mx=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},Nx,Px,Fx,Ix,Lx,Rx,zx,Bx,Vx,Hx,Ux,Wx,Gx,Kx,qx,Jx,Yx,Xx,Zx,Qx,$x,eS,tS=class e extends jx{constructor(){super(...arguments),Nx.add(this),Px.set(this,[]),Fx.set(this,{}),Ix.set(this,{}),Lx.set(this,void 0),Rx.set(this,void 0),zx.set(this,void 0),Bx.set(this,void 0),Vx.set(this,void 0),Hx.set(this,void 0),Ux.set(this,void 0),Wx.set(this,void 0),Gx.set(this,void 0)}[(Px=new WeakMap,Fx=new WeakMap,Ix=new WeakMap,Lx=new WeakMap,Rx=new WeakMap,zx=new WeakMap,Bx=new WeakMap,Vx=new WeakMap,Hx=new WeakMap,Ux=new WeakMap,Wx=new WeakMap,Gx=new WeakMap,Nx=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`event`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){let n=new e;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener(`abort`,()=>this.controller.abort())),this._connected();let r=tb.fromReadableStream(e,this.controller);for await(let e of r)X(this,Nx,`m`,Kx).call(this,e);if(r.controller.signal?.aborted)throw new Fy;return this._addRun(X(this,Nx,`m`,qx).call(this))}toReadableStream(){return new tb(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i,a){let o=new e;return o._run(()=>o._runToolAssistantStream(t,n,r,i,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":`stream`}})),o}async _createToolAssistantStream(e,t,n,r,i){let a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener(`abort`,()=>this.controller.abort()));let o={...r,stream:!0},s=await e.submitToolOutputs(t,n,o,{...i,signal:this.controller.signal});this._connected();for await(let e of s)X(this,Nx,`m`,Kx).call(this,e);if(s.controller.signal?.aborted)throw new Fy;return this._addRun(X(this,Nx,`m`,qx).call(this))}static createThreadAssistantStream(t,n,r){let i=new e;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}static createAssistantStream(t,n,r,i){let a=new e;return a._run(()=>a._runAssistantStream(t,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":`stream`}})),a}currentEvent(){return X(this,Ux,`f`)}currentRun(){return X(this,Wx,`f`)}currentMessageSnapshot(){return X(this,Lx,`f`)}currentRunStepSnapshot(){return X(this,Gx,`f`)}async finalRunSteps(){return await this.done(),Object.values(X(this,Fx,`f`))}async finalMessages(){return await this.done(),Object.values(X(this,Ix,`f`))}async finalRun(){if(await this.done(),!X(this,Rx,`f`))throw Error(`Final run was not received.`);return X(this,Rx,`f`)}async _createThreadAssistantStream(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort()));let i={...t,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(let e of a)X(this,Nx,`m`,Kx).call(this,e);if(a.controller.signal?.aborted)throw new Fy;return this._addRun(X(this,Nx,`m`,qx).call(this))}async _createAssistantStream(e,t,n,r){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener(`abort`,()=>this.controller.abort()));let a={...n,stream:!0},o=await e.create(t,a,{...r,signal:this.controller.signal});this._connected();for await(let e of o)X(this,Nx,`m`,Kx).call(this,e);if(o.controller.signal?.aborted)throw new Fy;return this._addRun(X(this,Nx,`m`,qx).call(this))}static accumulateDelta(e,t){for(let[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(t==null){e[n]=r;continue}if(n===`index`||n===`type`){e[n]=r;continue}if(typeof t==`string`&&typeof r==`string`)t+=r;else if(typeof t==`number`&&typeof r==`number`)t+=r;else if(tx(t)&&tx(r))t=this.accumulateDelta(t,r);else if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>typeof e==`string`||typeof e==`number`)){t.push(...r);continue}for(let e of r){if(!tx(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let n=e.index;if(n==null)throw console.error(e),Error("Expected array delta entry to have an `index` property");if(typeof n!=`number`)throw Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);let r=t[n];r==null?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`);e[n]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,i){return await this._createToolAssistantStream(n,e,t,r,i)}};Kx=function(e){if(!this.ended)switch(Mx(this,Ux,e,`f`),X(this,Nx,`m`,Xx).call(this,e),e.event){case`thread.created`:break;case`thread.run.created`:case`thread.run.queued`:case`thread.run.in_progress`:case`thread.run.requires_action`:case`thread.run.completed`:case`thread.run.incomplete`:case`thread.run.failed`:case`thread.run.cancelling`:case`thread.run.cancelled`:case`thread.run.expired`:X(this,Nx,`m`,eS).call(this,e);break;case`thread.run.step.created`:case`thread.run.step.in_progress`:case`thread.run.step.delta`:case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:X(this,Nx,`m`,Yx).call(this,e);break;case`thread.message.created`:case`thread.message.in_progress`:case`thread.message.delta`:case`thread.message.completed`:case`thread.message.incomplete`:X(this,Nx,`m`,Jx).call(this,e);break;case`error`:throw Error(`Encountered an error event in event processing - errors should be processed earlier`);default:}},qx=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);if(!X(this,Rx,`f`))throw Error(`Final run has not been received`);return X(this,Rx,`f`)},Jx=function(e){let[t,n]=X(this,Nx,`m`,Qx).call(this,e,X(this,Lx,`f`));Mx(this,Lx,t,`f`),X(this,Ix,`f`)[t.id]=t;for(let e of n){let n=t.content[e.index];n?.type==`text`&&this._emit(`textCreated`,n.text)}switch(e.event){case`thread.message.created`:this._emit(`messageCreated`,e.data);break;case`thread.message.in_progress`:break;case`thread.message.delta`:if(this._emit(`messageDelta`,e.data.delta,t),e.data.delta.content)for(let n of e.data.delta.content){if(n.type==`text`&&n.text){let e=n.text,r=t.content[n.index];if(r&&r.type==`text`)this._emit(`textDelta`,e,r.text);else throw Error(`The snapshot associated with this text delta is not text or missing`)}if(n.index!=X(this,zx,`f`)){if(X(this,Bx,`f`))switch(X(this,Bx,`f`).type){case`text`:this._emit(`textDone`,X(this,Bx,`f`).text,X(this,Lx,`f`));break;case`image_file`:this._emit(`imageFileDone`,X(this,Bx,`f`).image_file,X(this,Lx,`f`));break}Mx(this,zx,n.index,`f`)}Mx(this,Bx,t.content[n.index],`f`)}break;case`thread.message.completed`:case`thread.message.incomplete`:if(X(this,zx,`f`)!==void 0){let t=e.data.content[X(this,zx,`f`)];if(t)switch(t.type){case`image_file`:this._emit(`imageFileDone`,t.image_file,X(this,Lx,`f`));break;case`text`:this._emit(`textDone`,t.text,X(this,Lx,`f`));break}}X(this,Lx,`f`)&&this._emit(`messageDone`,e.data),Mx(this,Lx,void 0,`f`)}},Yx=function(e){let t=X(this,Nx,`m`,Zx).call(this,e);switch(Mx(this,Gx,t,`f`),e.event){case`thread.run.step.created`:this._emit(`runStepCreated`,e.data);break;case`thread.run.step.delta`:let n=e.data.delta;if(n.step_details&&n.step_details.type==`tool_calls`&&n.step_details.tool_calls&&t.step_details.type==`tool_calls`)for(let e of n.step_details.tool_calls)e.index==X(this,Vx,`f`)?this._emit(`toolCallDelta`,e,t.step_details.tool_calls[e.index]):(X(this,Hx,`f`)&&this._emit(`toolCallDone`,X(this,Hx,`f`)),Mx(this,Vx,e.index,`f`),Mx(this,Hx,t.step_details.tool_calls[e.index],`f`),X(this,Hx,`f`)&&this._emit(`toolCallCreated`,X(this,Hx,`f`)));this._emit(`runStepDelta`,e.data.delta,t);break;case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:Mx(this,Gx,void 0,`f`),e.data.step_details.type==`tool_calls`&&X(this,Hx,`f`)&&(this._emit(`toolCallDone`,X(this,Hx,`f`)),Mx(this,Hx,void 0,`f`)),this._emit(`runStepDone`,e.data,t);break;case`thread.run.step.in_progress`:break}},Xx=function(e){X(this,Px,`f`).push(e),this._emit(`event`,e)},Zx=function(e){switch(e.event){case`thread.run.step.created`:return X(this,Fx,`f`)[e.data.id]=e.data,e.data;case`thread.run.step.delta`:let t=X(this,Fx,`f`)[e.data.id];if(!t)throw Error(`Received a RunStepDelta before creation of a snapshot`);let n=e.data;if(n.delta){let r=tS.accumulateDelta(t,n.delta);X(this,Fx,`f`)[e.data.id]=r}return X(this,Fx,`f`)[e.data.id];case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:case`thread.run.step.in_progress`:X(this,Fx,`f`)[e.data.id]=e.data;break}if(X(this,Fx,`f`)[e.data.id])return X(this,Fx,`f`)[e.data.id];throw Error(`No snapshot available`)},Qx=function(e,t){let n=[];switch(e.event){case`thread.message.created`:return[e.data,n];case`thread.message.delta`:if(!t)throw Error(`Received a delta with no existing snapshot (there should be one from message creation)`);let r=e.data;if(r.delta.content)for(let e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=X(this,Nx,`m`,$x).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case`thread.message.in_progress`:case`thread.message.completed`:case`thread.message.incomplete`:if(t)return[t,n];throw Error(`Received thread message event with no existing snapshot`)}throw Error(`Tried to accumulate a non-message event`)},$x=function(e,t){return tS.accumulateDelta(t,e)},eS=function(e){switch(Mx(this,Wx,e.data,`f`),e.event){case`thread.run.created`:break;case`thread.run.queued`:break;case`thread.run.in_progress`:break;case`thread.run.requires_action`:case`thread.run.cancelled`:case`thread.run.failed`:case`thread.run.completed`:case`thread.run.expired`:Mx(this,Rx,e.data,`f`),X(this,Hx,`f`)&&(this._emit(`toolCallDone`,X(this,Hx,`f`)),Mx(this,Hx,void 0,`f`));break;case`thread.run.cancelling`:break}};var nS=class extends ix{create(e,t){return this._client.post(`/assistants`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/assistants`,rS,{query:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},rS=class extends rx{};nS.AssistantsPage=rS;function iS(e){return typeof e.parse==`function`}const aS=e=>e?.role===`assistant`,oS=e=>e?.role===`function`,sS=e=>e?.role===`tool`;function cS(e){return e?.$brand===`auto-parseable-response-format`}function lS(e){return e?.$brand===`auto-parseable-tool`}function uS(e,t){return!t||!hS(t)?{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}:dS(e,t)}function dS(e,t){let n=e.choices.map(e=>{if(e.finish_reason===`length`)throw new Ky;if(e.finish_reason===`content_filter`)throw new qy;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>pS(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?fS(t,e.message.content):null}}});return{...e,choices:n}}function fS(e,t){return e.response_format?.type===`json_schema`&&e.response_format?.type===`json_schema`?`$parseRaw`in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function pS(e,t){let n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:lS(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function mS(e,t){if(!e)return!1;let n=e.tools?.find(e=>e.function?.name===t.function.name);return lS(n)||n?.function.strict||!1}function hS(e){return cS(e.response_format)?!0:e.tools?.some(e=>lS(e)||e.type===`function`&&e.function.strict===!0)??!1}function gS(e){for(let t of e??[]){if(t.type!==`function`)throw new Y(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Y(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var _S=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},vS,yS,bS,xS,SS,CS,wS,TS,ES=10,DS=class extends jx{constructor(){super(...arguments),vS.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit(`chatCompletion`,e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if(`content`in e||(e.content=null),this.messages.push(e),t){if(this._emit(`message`,e),(oS(e)||sS(e))&&e.content)this._emit(`functionCallResult`,e.content);else if(aS(e)&&e.function_call)this._emit(`functionCall`,e.function_call);else if(aS(e)&&e.tool_calls)for(let t of e.tool_calls)t.type===`function`&&this._emit(`functionCall`,t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Y(`stream ended without producing a ChatCompletion`);return e}async finalContent(){return await this.done(),_S(this,vS,`m`,yS).call(this)}async finalMessage(){return await this.done(),_S(this,vS,`m`,bS).call(this)}async finalFunctionCall(){return await this.done(),_S(this,vS,`m`,xS).call(this)}async finalFunctionCallResult(){return await this.done(),_S(this,vS,`m`,SS).call(this)}async totalUsage(){return await this.done(),_S(this,vS,`m`,CS).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit(`finalChatCompletion`,e);let t=_S(this,vS,`m`,bS).call(this);t&&this._emit(`finalMessage`,t);let n=_S(this,vS,`m`,yS).call(this);n&&this._emit(`finalContent`,n);let r=_S(this,vS,`m`,xS).call(this);r&&this._emit(`finalFunctionCall`,r);let i=_S(this,vS,`m`,SS).call(this);i!=null&&this._emit(`finalFunctionCallResult`,i),this._chatCompletions.some(e=>e.usage)&&this._emit(`totalUsage`,_S(this,vS,`m`,CS).call(this))}async _createChatCompletion(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),_S(this,vS,`m`,wS).call(this,t);let i=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(dS(i,t))}async _runChatCompletion(e,t,n){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){let r=`function`,{function_call:i=`auto`,stream:a,...o}=t,s=typeof i!=`string`&&i?.name,{maxChatCompletions:c=ES}=n||{},l={};for(let e of t.functions)l[e.name||e.function.name]=e;let u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){let t=(await this._createChatCompletion(e,{...o,function_call:i,functions:u,messages:[...this.messages]},n)).choices[0]?.message;if(!t)throw new Y(`missing message in ChatCompletion response`);if(!t.function_call)return;let{name:a,arguments:c}=t.function_call,d=l[a];if(d){if(s&&s!==a){let e=`Invalid function_call: ${JSON.stringify(a)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,name:a,content:e});continue}}else{let e=`Invalid function_call: ${JSON.stringify(a)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(`, `)}. Please try again`;this._addMessage({role:r,name:a,content:e});continue}let f;try{f=iS(d)?await d.parse(c):c}catch(e){this._addMessage({role:r,name:a,content:e instanceof Error?e.message:String(e)});continue}let p=await d.function(f,this),m=_S(this,vS,`m`,TS).call(this,p);if(this._addMessage({role:r,name:a,content:m}),s)return}}async _runTools(e,t,n){let r=`tool`,{tool_choice:i=`auto`,stream:a,...o}=t,s=typeof i!=`string`&&i?.function?.name,{maxChatCompletions:c=ES}=n||{},l=t.tools.map(e=>{if(lS(e)){if(!e.$callback)throw new Y("Tool given to `.runTools()` that does not have an associated function");return{type:`function`,function:{function:e.$callback,name:e.function.name,description:e.function.description||``,parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(let e of l)e.type===`function`&&(u[e.function.name||e.function.function.name]=e.function);let d=`tools`in t?l.map(e=>e.type===`function`?{type:`function`,function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){let t=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:d,messages:[...this.messages]},n)).choices[0]?.message;if(!t)throw new Y(`missing message in ChatCompletion response`);if(!t.tool_calls?.length)return;for(let e of t.tool_calls){if(e.type!==`function`)continue;let t=e.id,{name:n,arguments:i}=e.function,a=u[n];if(a){if(s&&s!==n){let e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(`, `)}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let o;try{o=iS(a)?await a.parse(i):i}catch(e){let n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}let c=await a.function(o,this),l=_S(this,vS,`m`,TS).call(this,c);if(this._addMessage({role:r,tool_call_id:t,content:l}),s)return}}}};vS=new WeakSet,yS=function(){return _S(this,vS,`m`,bS).call(this).content??null},bS=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(aS(t)){let{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new Y(`stream ended without producing a ChatCompletionMessage with role=assistant`)},xS=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(aS(t)&&t?.function_call)return t.function_call;if(aS(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},SS=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(oS(t)&&t.content!=null||sS(t)&&t.content!=null&&typeof t.content==`string`&&this.messages.some(e=>e.role===`assistant`&&e.tool_calls?.some(e=>e.type===`function`&&e.id===t.tool_call_id)))return t.content}},CS=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},wS=function(e){if(e.n!=null&&e.n>1)throw new Y(`ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.`)},TS=function(e){return typeof e==`string`?e:e===void 0?`undefined`:JSON.stringify(e)};var OS=class e extends DS{static runFunctions(t,n,r){let i=new e,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runFunctions`}};return i._run(()=>i._runFunctions(t,n,a)),i}static runTools(t,n,r){let i=new e,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runTools`}};return i._run(()=>i._runTools(t,n,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),aS(e)&&e.content&&this._emit(`content`,e.content)}},kS=1,AS=2,jS=4,MS=8,NS=16,PS=32,FS=64,IS=128,LS=256,RS=IS|LS,zS=496,BS=AS|497,VS=jS|MS,HS={STR:kS,NUM:AS,ARR:jS,OBJ:MS,NULL:NS,BOOL:PS,NAN:FS,INFINITY:IS,MINUS_INFINITY:LS,INF:RS,SPECIAL:zS,ATOM:BS,COLLECTION:VS,ALL:BS|VS},US=class extends Error{},WS=class extends Error{};function GS(e,t=HS.ALL){if(typeof e!=`string`)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return KS(e.trim(),t)}var KS=(e,t)=>{let n=e.length,r=0,i=e=>{throw new US(`${e} at position ${r}`)},a=e=>{throw new WS(`${e} at position ${r}`)},o=()=>(d(),r>=n&&i(`Unexpected end of input`),e[r]===`"`?s():e[r]===`{`?c():e[r]===`[`?l():e.substring(r,r+4)===`null`||HS.NULL&t&&n-r<4&&`null`.startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)===`true`||HS.BOOL&t&&n-r<4&&`true`.startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)===`false`||HS.BOOL&t&&n-r<5&&`false`.startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)===`Infinity`||HS.INFINITY&t&&n-r<8&&`Infinity`.startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)===`-Infinity`||HS.MINUS_INFINITY&t&&1<n-r&&n-r<9&&`-Infinity`.startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)===`NaN`||HS.NAN&t&&n-r<3&&`NaN`.startsWith(e.substring(r))?(r+=3,NaN):u()),s=()=>{let o=r,s=!1;for(r++;r<n&&(e[r]!==`"`||s&&e[r-1]===`\\`);)s=e[r]===`\\`?!s:!1,r++;if(e.charAt(r)==`"`)try{return JSON.parse(e.substring(o,++r-Number(s)))}catch(e){a(String(e))}else if(HS.STR&t)try{return JSON.parse(e.substring(o,r-Number(s))+`"`)}catch{return JSON.parse(e.substring(o,e.lastIndexOf(`\\`))+`"`)}i(`Unterminated string literal`)},c=()=>{r++,d();let a={};try{for(;e[r]!==`}`;){if(d(),r>=n&&HS.OBJ&t)return a;let i=s();d(),r++;try{let e=o();Object.defineProperty(a,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(HS.OBJ&t)return a;throw e}d(),e[r]===`,`&&r++}}catch{if(HS.OBJ&t)return a;i(`Expected '}' at end of object`)}return r++,a},l=()=>{r++;let n=[];try{for(;e[r]!==`]`;)n.push(o()),d(),e[r]===`,`&&r++}catch{if(HS.ARR&t)return n;i(`Expected ']' at end of array`)}return r++,n},u=()=>{if(r===0){e===`-`&&HS.NUM&t&&i(`Not sure what '-' is`);try{return JSON.parse(e)}catch(n){if(HS.NUM&t)try{return e[e.length-1]===`.`?JSON.parse(e.substring(0,e.lastIndexOf(`.`))):JSON.parse(e.substring(0,e.lastIndexOf(`e`)))}catch{}a(String(n))}}let o=r;for(e[r]===`-`&&r++;e[r]&&!`,]}`.includes(e[r]);)r++;r==n&&!(HS.NUM&t)&&i(`Unterminated number literal`);try{return JSON.parse(e.substring(o,r))}catch{e.substring(o,r)===`-`&&HS.NUM&t&&i(`Not sure what '-' is`);try{return JSON.parse(e.substring(o,e.lastIndexOf(`e`)))}catch(e){a(String(e))}}},d=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},qS=e=>GS(e,HS.ALL^HS.NUM),JS=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},YS=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},XS,ZS,QS,$S,eC,tC,nC,rC,iC,aC,oC,sC,cC=class e extends DS{constructor(e){super(),XS.add(this),ZS.set(this,void 0),QS.set(this,void 0),$S.set(this,void 0),JS(this,ZS,e,`f`),JS(this,QS,[],`f`)}get currentChatCompletionSnapshot(){return YS(this,$S,`f`)}static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){let i=new e(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}async _createChatCompletion(e,t,n){super._createChatCompletion;let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),YS(this,XS,`m`,eC).call(this);let i=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let e of i)YS(this,XS,`m`,nC).call(this,e);if(i.controller.signal?.aborted)throw new Fy;return this._addChatCompletion(YS(this,XS,`m`,aC).call(this))}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener(`abort`,()=>this.controller.abort())),YS(this,XS,`m`,eC).call(this),this._connected();let r=tb.fromReadableStream(e,this.controller),i;for await(let e of r)i&&i!==e.id&&this._addChatCompletion(YS(this,XS,`m`,aC).call(this)),YS(this,XS,`m`,nC).call(this,e),i=e.id;if(r.controller.signal?.aborted)throw new Fy;return this._addChatCompletion(YS(this,XS,`m`,aC).call(this))}[(ZS=new WeakMap,QS=new WeakMap,$S=new WeakMap,XS=new WeakSet,eC=function(){this.ended||JS(this,$S,void 0,`f`)},tC=function(e){let t=YS(this,QS,`f`)[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},YS(this,QS,`f`)[e.index]=t,t)},nC=function(e){if(this.ended)return;let t=YS(this,XS,`m`,sC).call(this,e);this._emit(`chunk`,e,t);for(let n of e.choices){let e=t.choices[n.index];n.delta.content!=null&&e.message?.role===`assistant`&&e.message?.content&&(this._emit(`content`,n.delta.content,e.message.content),this._emit(`content.delta`,{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),n.delta.refusal!=null&&e.message?.role===`assistant`&&e.message?.refusal&&this._emit(`refusal.delta`,{delta:n.delta.refusal,snapshot:e.message.refusal}),n.logprobs?.content!=null&&e.message?.role===`assistant`&&this._emit(`logprobs.content.delta`,{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),n.logprobs?.refusal!=null&&e.message?.role===`assistant`&&this._emit(`logprobs.refusal.delta`,{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let r=YS(this,XS,`m`,tC).call(this,e);e.finish_reason&&(YS(this,XS,`m`,iC).call(this,e),r.current_tool_call_index!=null&&YS(this,XS,`m`,rC).call(this,e,r.current_tool_call_index));for(let t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(YS(this,XS,`m`,iC).call(this,e),r.current_tool_call_index!=null&&YS(this,XS,`m`,rC).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(let t of n.delta.tool_calls??[]){let n=e.message.tool_calls?.[t.index];n?.type&&(n?.type===`function`?this._emit(`tool_calls.function.arguments.delta`,{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??``}):n?.type)}}},rC=function(e,t){if(YS(this,XS,`m`,tC).call(this,e).done_tool_calls.has(t))return;let n=e.message.tool_calls?.[t];if(!n)throw Error(`no tool call snapshot`);if(!n.type)throw Error("tool call snapshot missing `type`");if(n.type===`function`){let e=YS(this,ZS,`f`)?.tools?.find(e=>e.type===`function`&&e.function.name===n.function.name);this._emit(`tool_calls.function.arguments.done`,{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:lS(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},iC=function(e){let t=YS(this,XS,`m`,tC).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let n=YS(this,XS,`m`,oC).call(this);this._emit(`content.done`,{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit(`refusal.done`,{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit(`logprobs.content.done`,{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit(`logprobs.refusal.done`,{refusal:e.logprobs.refusal}))},aC=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);let e=YS(this,$S,`f`);if(!e)throw new Y(`request ended without sending any chunks`);return JS(this,$S,void 0,`f`),JS(this,QS,[],`f`),lC(e,YS(this,ZS,`f`))},oC=function(){let e=YS(this,ZS,`f`)?.response_format;return cS(e)?e:null},sC=function(e){var t,n,r,i;let a=YS(this,$S,`f`),{choices:o,...s}=e;a?Object.assign(a,s):a=JS(this,$S,{...s,choices:[]},`f`);for(let{delta:o,finish_reason:s,index:c,logprobs:l=null,...u}of e.choices){let e=a.choices[c];if(e||=a.choices[c]={finish_reason:s,index:c,message:{},logprobs:l,...u},l)if(!e.logprobs)e.logprobs=Object.assign({},l);else{let{content:r,refusal:i,...a}=l;Object.assign(e.logprobs,a),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),i&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...i))}if(s&&(e.finish_reason=s,YS(this,ZS,`f`)&&hS(YS(this,ZS,`f`)))){if(s===`length`)throw new Ky;if(s===`content_filter`)throw new qy}if(Object.assign(e,u),!o)continue;let{content:d,refusal:f,function_call:p,role:m,tool_calls:h,...g}=o;if(Object.assign(e.message,g),f&&(e.message.refusal=(e.message.refusal||``)+f),m&&(e.message.role=m),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=``),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),d&&(e.message.content=(e.message.content||``)+d,!e.message.refusal&&YS(this,XS,`m`,oC).call(this)&&(e.message.parsed=qS(e.message.content))),h){e.message.tool_calls||(e.message.tool_calls=[]);for(let{index:t,id:n,type:r,function:a,...o}of h){let s=(i=e.message.tool_calls)[t]??(i[t]={});Object.assign(s,o),n&&(s.id=n),r&&(s.type=r),a&&(s.function??={name:a.name??``,arguments:``}),a?.name&&(s.function.name=a.name),a?.arguments&&(s.function.arguments+=a.arguments,mS(YS(this,ZS,`f`),s)&&(s.function.parsed_arguments=qS(s.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`chunk`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tb(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function lC(e,t){let{id:n,choices:r,created:i,model:a,system_fingerprint:o,...s}=e;return uS({...s,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:i,...a})=>{if(!n)throw new Y(`missing finish_reason for choice ${r}`);let{content:o=null,function_call:s,tool_calls:c,...l}=t,u=t.role;if(!u)throw new Y(`missing role for choice ${r}`);if(s){let{arguments:e,name:c}=s;if(e==null)throw new Y(`missing function_call.arguments for choice ${r}`);if(!c)throw new Y(`missing function_call.name for choice ${r}`);return{...a,message:{content:o,function_call:{arguments:e,name:c},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}return c?{...a,index:r,finish_reason:n,logprobs:i,message:{...l,role:u,content:o,refusal:t.refusal??null,tool_calls:c.map((t,n)=>{let{function:i,type:a,id:o,...s}=t,{arguments:c,name:l,...u}=i||{};if(o==null)throw new Y(`missing choices[${r}].tool_calls[${n}].id\n${uC(e)}`);if(a==null)throw new Y(`missing choices[${r}].tool_calls[${n}].type\n${uC(e)}`);if(l==null)throw new Y(`missing choices[${r}].tool_calls[${n}].function.name\n${uC(e)}`);if(c==null)throw new Y(`missing choices[${r}].tool_calls[${n}].function.arguments\n${uC(e)}`);return{...s,id:o,type:a,function:{...u,name:l,arguments:c}}})}}:{...a,message:{...l,content:o,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}),created:i,model:a,object:`chat.completion`,...o?{system_fingerprint:o}:{}},t)}function uC(e){return JSON.stringify(e)}var dC=class e extends cC{static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){let i=new e(null),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runFunctions`}};return i._run(()=>i._runFunctions(t,n,a)),i}static runTools(t,n,r){let i=new e(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runTools`}};return i._run(()=>i._runTools(t,n,a)),i}},fC=class extends ix{parse(e,t){return gS(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":`beta.chat.completions.parse`}})._thenUnwrap(t=>dS(t,e))}runFunctions(e,t){return e.stream?dC.runFunctions(this._client,e,t):OS.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?dC.runTools(this._client,e,t):OS.runTools(this._client,e,t)}stream(e,t){return cC.createChatCompletion(this._client,e,t)}},pC=class extends ix{constructor(){super(...arguments),this.completions=new fC(this._client)}};(function(e){e.Completions=fC})(pC||={});var mC=class extends ix{create(e,t){return this._client.post(`/realtime/sessions`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},hC=class extends ix{create(e,t){return this._client.post(`/realtime/transcription_sessions`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},gC=class extends ix{constructor(){super(...arguments),this.sessions=new mC(this._client),this.transcriptionSessions=new hC(this._client)}};gC.Sessions=mC,gC.TranscriptionSessions=hC;var _C=class extends ix{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,vC,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},vC=class extends rx{};_C.MessagesPage=vC;var yC=class extends ix{retrieve(e,t,n,r={},i){return jb(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...i,headers:{"OpenAI-Beta":`assistants=v2`,...i?.headers}})}list(e,t,n={},r){return jb(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,bC,{query:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}},bC=class extends rx{};yC.RunStepsPage=bC;var xC=class extends ix{constructor(){super(...arguments),this.steps=new yC(this._client)}create(e,t,n){let{include:r,...i}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:i,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,SC,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return tS.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(i.status){case`queued`:case`in_progress`:case`cancelling`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=a.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Vb(e);break;case`requires_action`:case`incomplete`:case`cancelled`:case`completed`:case`failed`:case`expired`:return i}}}stream(e,t,n){return tS.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){let i=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,i.id,r)}submitToolOutputsStream(e,t,n,r){return tS.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}},SC=class extends rx{};xC.RunsPage=SC,xC.Steps=yC,xC.RunStepsPage=bC;var CC=class extends ix{constructor(){super(...arguments),this.runs=new xC(this._client),this.messages=new _C(this._client)}create(e={},t){return jb(e)?this.create({},e):this._client.post(`/threads`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}createAndRun(e,t){return this._client.post(`/threads/runs`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return tS.createThreadAssistantStream(e,this._client.beta.threads,t)}};CC.Runs=xC,CC.RunsPage=SC,CC.Messages=_C,CC.MessagesPage=vC;var wC=class extends ix{constructor(){super(...arguments),this.realtime=new gC(this._client),this.chat=new pC(this._client),this.assistants=new nS(this._client),this.threads=new CC(this._client)}};wC.Realtime=gC,wC.Assistants=nS,wC.AssistantsPage=rS,wC.Threads=CC;var TC=class extends ix{create(e,t){return this._client.post(`/completions`,{body:e,...t,stream:e.stream??!1})}},EC=class extends ix{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:`application/binary`,...n?.headers},__binaryResponse:!0})}},DC=class extends ix{constructor(){super(...arguments),this.content=new EC(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,_b({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,OC,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:`*/*`,...n?.headers}})}},OC=class extends rx{};DC.FileListResponsesPage=OC,DC.Content=EC;var kC=class extends ix{constructor(){super(...arguments),this.files=new DC(this._client)}create(e,t){return this._client.post(`/containers`,{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/containers`,AC,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:`*/*`,...t?.headers}})}},AC=class extends rx{};kC.ContainerListResponsesPage=AC,kC.Files=DC,kC.FileListResponsesPage=OC;var jC=class extends ix{create(e,t){let n=!!e.encoding_format,r=n?e.encoding_format:`base64`;n&&Yb(`Request`,`User defined encoding_format:`,e.encoding_format);let i=this._client.post(`/embeddings`,{body:{...e,encoding_format:r},...t});return n?i:(Yb(`response`,`Decoding base64 embeddings to float32 array`),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{let t=e.embedding;e.embedding=ex(t)}),e)))}},MC=class extends ix{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return jb(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,NC,{query:n,...r})}},NC=class extends rx{};MC.OutputItemListResponsesPage=NC;var PC=class extends ix{constructor(){super(...arguments),this.outputItems=new MC(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,FC,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}},FC=class extends rx{};PC.RunListResponsesPage=FC,PC.OutputItems=MC,PC.OutputItemListResponsesPage=NC;var IC=class extends ix{constructor(){super(...arguments),this.runs=new PC(this._client)}create(e,t){return this._client.post(`/evals`,{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/evals`,LC,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}},LC=class extends rx{};IC.EvalListResponsesPage=LC,IC.Runs=PC,IC.RunListResponsesPage=FC;var RC=class extends ix{create(e,t){return this._client.post(`/files`,_b({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/files`,zC,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:`application/binary`,...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=1800*1e3}={}){let r=new Set([`processed`,`error`,`deleted`]),i=Date.now(),a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Vb(t),a=await this.retrieve(e),Date.now()-i>n)throw new Ly({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}},zC=class extends rx{};RC.FileObjectsPage=zC;var BC=class extends ix{},VC=class extends ix{run(e,t){return this._client.post(`/fine_tuning/alpha/graders/run`,{body:e,...t})}validate(e,t){return this._client.post(`/fine_tuning/alpha/graders/validate`,{body:e,...t})}},HC=class extends ix{constructor(){super(...arguments),this.graders=new VC(this._client)}};HC.Graders=VC;var UC=class extends ix{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,WC,{body:t,method:`post`,...n})}retrieve(e,t={},n){return jb(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}},WC=class extends nx{};UC.PermissionCreateResponsesPage=WC;var GC=class extends ix{constructor(){super(...arguments),this.permissions=new UC(this._client)}};GC.Permissions=UC,GC.PermissionCreateResponsesPage=WC;var KC=class extends ix{list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,qC,{query:t,...n})}},qC=class extends rx{};KC.FineTuningJobCheckpointsPage=qC;var JC=class extends ix{constructor(){super(...arguments),this.checkpoints=new KC(this._client)}create(e,t){return this._client.post(`/fine_tuning/jobs`,{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/fine_tuning/jobs`,YC,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return jb(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,XC,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}},YC=class extends rx{},XC=class extends rx{};JC.FineTuningJobsPage=YC,JC.FineTuningJobEventsPage=XC,JC.Checkpoints=KC,JC.FineTuningJobCheckpointsPage=qC;var ZC=class extends ix{constructor(){super(...arguments),this.methods=new BC(this._client),this.jobs=new JC(this._client),this.checkpoints=new GC(this._client),this.alpha=new HC(this._client)}};ZC.Methods=BC,ZC.Jobs=JC,ZC.FineTuningJobsPage=YC,ZC.FineTuningJobEventsPage=XC,ZC.Checkpoints=GC,ZC.Alpha=HC;var QC=class extends ix{},$C=class extends ix{constructor(){super(...arguments),this.graderModels=new QC(this._client)}};$C.GraderModels=QC;var ew=class extends ix{createVariation(e,t){return this._client.post(`/images/variations`,_b({body:e,...t}))}edit(e,t){return this._client.post(`/images/edits`,_b({body:e,...t}))}generate(e,t){return this._client.post(`/images/generations`,{body:e,...t})}},tw=class extends ix{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList(`/models`,nw,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}},nw=class extends nx{};tw.ModelsPage=nw;var rw=class extends ix{create(e,t){return this._client.post(`/moderations`,{body:e,...t})}};function iw(e,t){return!t||!sw(t)?{...e,output_parsed:null,output:e.output.map(e=>e.type===`function_call`?{...e,parsed_arguments:null}:e.type===`message`?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}:aw(e,t)}function aw(e,t){let n=e.output.map(e=>{if(e.type===`function_call`)return{...e,parsed_arguments:uw(t,e)};if(e.type===`message`){let n=e.content.map(e=>e.type===`output_text`?{...e,parsed:ow(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,`output_text`)||dw(r),Object.defineProperty(r,`output_parsed`,{enumerable:!0,get(){for(let e of r.output)if(e.type===`message`){for(let t of e.content)if(t.type===`output_text`&&t.parsed!==null)return t.parsed}return null}}),r}function ow(e,t){return e.text?.format?.type===`json_schema`?`$parseRaw`in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t):null}function sw(e){return!!cS(e.text?.format)}function cw(e){return e?.$brand===`auto-parseable-tool`}function lw(e,t){return e.find(e=>e.type===`function`&&e.name===t)}function uw(e,t){let n=lw(e.tools??[],t.name);return{...t,...t,parsed_arguments:cw(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function dw(e){let t=[];for(let n of e.output)if(n.type===`message`)for(let e of n.content)e.type===`output_text`&&t.push(e.text);e.output_text=t.join(``)}var fw=class extends ix{list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,Ew,{query:t,...n})}},pw=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},mw=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},hw,gw,_w,vw,yw,bw,xw,Sw,Cw=class e extends jx{constructor(e){super(),hw.add(this),gw.set(this,void 0),_w.set(this,void 0),vw.set(this,void 0),pw(this,gw,e,`f`)}static createResponse(t,n,r){let i=new e(n);return i._run(()=>i._createOrRetrieveResponse(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}async _createOrRetrieveResponse(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),mw(this,hw,`m`,yw).call(this);let i,a=null;`response_id`in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=t.starting_after??null):i=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let e of i)mw(this,hw,`m`,bw).call(this,e,a);if(i.controller.signal?.aborted)throw new Fy;return mw(this,hw,`m`,xw).call(this)}[(gw=new WeakMap,_w=new WeakMap,vw=new WeakMap,hw=new WeakSet,yw=function(){this.ended||pw(this,_w,void 0,`f`)},bw=function(e,t){if(this.ended)return;let n=(e,n)=>{(t==null||n.sequence_number>t)&&this._emit(e,n)},r=mw(this,hw,`m`,Sw).call(this,e);switch(n(`event`,e),e.type){case`response.output_text.delta`:{let t=r.output[e.output_index];if(!t)throw new Y(`missing output at index ${e.output_index}`);if(t.type===`message`){let r=t.content[e.content_index];if(!r)throw new Y(`missing content at index ${e.content_index}`);if(r.type!==`output_text`)throw new Y(`expected content to be 'output_text', got ${r.type}`);n(`response.output_text.delta`,{...e,snapshot:r.text})}break}case`response.function_call_arguments.delta`:{let t=r.output[e.output_index];if(!t)throw new Y(`missing output at index ${e.output_index}`);t.type===`function_call`&&n(`response.function_call_arguments.delta`,{...e,snapshot:t.arguments});break}default:n(e.type,e);break}},xw=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);let e=mw(this,_w,`f`);if(!e)throw new Y(`request ended without sending any events`);pw(this,_w,void 0,`f`);let t=ww(e,mw(this,gw,`f`));return pw(this,vw,t,`f`),t},Sw=function(e){let t=mw(this,_w,`f`);if(!t){if(e.type!==`response.created`)throw new Y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=pw(this,_w,e.response,`f`),t}switch(e.type){case`response.output_item.added`:t.output.push(e.item);break;case`response.content_part.added`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);n.type===`message`&&n.content.push(e.part);break}case`response.output_text.delta`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);if(n.type===`message`){let t=n.content[e.content_index];if(!t)throw new Y(`missing content at index ${e.content_index}`);if(t.type!==`output_text`)throw new Y(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case`response.function_call_arguments.delta`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);n.type===`function_call`&&(n.arguments+=e.delta);break}case`response.completed`:pw(this,_w,e.response,`f`);break}return t},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`event`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=mw(this,vw,`f`);if(!e)throw new Y(`stream ended without producing a ChatCompletion`);return e}};function ww(e,t){return iw(e,t)}var Tw=class extends ix{constructor(){super(...arguments),this.inputItems=new fw(this._client)}create(e,t){return this._client.post(`/responses`,{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>(`object`in e&&e.object===`response`&&dw(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:`*/*`,...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>aw(t,e))}stream(e,t){return Cw.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:`*/*`,...t?.headers}})}},Ew=class extends rx{};Tw.InputItems=fw;var Dw=class extends ix{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,_b({body:t,...n}))}},Ow=class extends ix{constructor(){super(...arguments),this.parts=new Dw(this._client)}create(e,t){return this._client.post(`/uploads`,{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}};Ow.Parts=Dw;const kw=async e=>{let t=await Promise.allSettled(e),n=t.filter(e=>e.status===`rejected`);if(n.length){for(let e of n)console.error(e.reason);throw Error(`${n.length} promise(s) failed - see the above errors`)}let r=[];for(let e of t)e.status===`fulfilled`&&r.push(e.value);return r};var Aw=class extends ix{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return jb(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,jw,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let i=await this.retrieve(e,t,{...n,headers:r}).withResponse(),a=i.data;switch(a.status){case`in_progress`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=i.response.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Vb(e);break;case`failed`:case`completed`:return a}}}async upload(e,t,n){let r=await this._client.files.create({file:t,purpose:`assistants`},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){let r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,Mw,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},jw=class extends rx{},Mw=class extends nx{};Aw.VectorStoreFilesPage=jw,Aw.FileContentResponsesPage=Mw;var Nw=class extends ix{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return jb(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,jw,{query:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(i.status){case`in_progress`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=a.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Vb(e);break;case`failed`:case`cancelled`:case`completed`:return i}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=r?.maxConcurrency??5,a=Math.min(i,t.length),o=this._client,s=t.values(),c=[...n];async function l(e){for(let t of e){let e=await o.files.create({file:t,purpose:`assistants`},r);c.push(e.id)}}return await kw(Array(a).fill(s).map(l)),await this.createAndPoll(e,{file_ids:c})}},Pw=class extends ix{constructor(){super(...arguments),this.files=new Aw(this._client),this.fileBatches=new Nw(this._client)}create(e,t){return this._client.post(`/vector_stores`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}list(e={},t){return jb(e)?this.list({},e):this._client.getAPIList(`/vector_stores`,Fw,{query:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,Iw,{body:t,method:`post`,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},Fw=class extends rx{},Iw=class extends nx{};Pw.VectorStoresPage=Fw,Pw.VectorStoreSearchResponsesPage=Iw,Pw.Files=Aw,Pw.VectorStoreFilesPage=jw,Pw.FileContentResponsesPage=Mw,Pw.FileBatches=Nw;var Lw,Rw=class extends Eb{constructor({baseURL:e=Wb(`OPENAI_BASE_URL`),apiKey:t=Wb(`OPENAI_API_KEY`),organization:n=Wb(`OPENAI_ORG_ID`)??null,project:r=Wb(`OPENAI_PROJECT_ID`)??null,...i}={}){if(t===void 0)throw new Y(`The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).`);let a={apiKey:t,organization:n,project:r,...i,baseURL:e||`https://api.openai.com/v1`};if(!a.dangerouslyAllowBrowser&&Zb())throw new Y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new TC(this),this.chat=new lx(this),this.embeddings=new jC(this),this.files=new RC(this),this.images=new ew(this),this.audio=new px(this),this.moderations=new rw(this),this.models=new tw(this),this.fineTuning=new ZC(this),this.graders=new $C(this),this.vectorStores=new Pw(this),this.beta=new wC(this),this.batches=new mx(this),this.uploads=new Ow(this),this.responses=new Tw(this),this.evals=new IC(this),this.containers=new kC(this),this._options=a,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return vy(e,{arrayFormat:`brackets`})}};Lw=Rw,Rw.OpenAI=Lw,Rw.DEFAULT_TIMEOUT=6e5,Rw.OpenAIError=Y,Rw.APIError=Py,Rw.APIConnectionError=Iy,Rw.APIConnectionTimeoutError=Ly,Rw.APIUserAbortError=Fy,Rw.NotFoundError=Vy,Rw.ConflictError=Hy,Rw.RateLimitError=Wy,Rw.BadRequestError=Ry,Rw.AuthenticationError=zy,Rw.InternalServerError=Gy,Rw.PermissionDeniedError=By,Rw.UnprocessableEntityError=Uy,Rw.toFile=ub,Rw.fileFromPath=Oy,Rw.Completions=TC,Rw.Chat=lx,Rw.ChatCompletionsPage=sx,Rw.Embeddings=jC,Rw.Files=RC,Rw.FileObjectsPage=zC,Rw.Images=ew,Rw.Audio=px,Rw.Moderations=rw,Rw.Models=tw,Rw.ModelsPage=nw,Rw.FineTuning=ZC,Rw.Graders=$C,Rw.VectorStores=Pw,Rw.VectorStoresPage=Fw,Rw.VectorStoreSearchResponsesPage=Iw,Rw.Beta=wC,Rw.Batches=mx,Rw.BatchesPage=hx,Rw.Uploads=Ow,Rw.Responses=Tw,Rw.Evals=IC,Rw.EvalListResponsesPage=LC,Rw.Containers=kC,Rw.ContainerListResponsesPage=AC;var zw=Rw,Bw=e=>e.replace(/\/+$/,``),Vw=class{name;defaultModel;baseUrl;apiKey;client;constructor(e,t){this.name=e,this.baseUrl=Bw(t?.baseUrl||`https://api.openai.com/v1`),this.apiKey=t?.apiKey,this.defaultModel=t?.defaultModel||`gpt-4o-mini`,this.client=new zw({apiKey:this.apiKey||``,baseURL:this.baseUrl,defaultHeaders:t?.headers&&Object.keys(t.headers).length?t.headers:void 0,dangerouslyAllowBrowser:!0})}mapMessage(e){switch(e.role){case`system`:case`user`:return{role:e.role,content:e.content};case`assistant`:return{role:`assistant`,content:e.content,name:e.name,tool_calls:e.toolCalls};case`tool`:return{role:`tool`,content:e.content,tool_call_id:e.name||`tool-call-${Math.random().toString(36).slice(2)}`};default:return{role:`user`,content:e.content}}}async chat(e){let t=e.model||this.defaultModel;if(!t)throw Error(`Provider "${this.name}" 未配置模型`);if(!this.apiKey)throw Error(`Provider "${this.name}" 未配置 API Key`);let n=(await this.client.chat.completions.create({model:t,messages:(e.messages||[]).map(e=>this.mapMessage(e)),tools:e.tools?.map(e=>({type:e.type,function:{name:e.function.name,description:e.function.description,parameters:e.function.parameters}}))})).choices?.[0]?.message,r={messages:[]};if(n){let e=n.name;r.messages.push({role:n.role,content:n.content??``,name:e}),n.tool_calls&&n.tool_calls.length&&(r.toolCalls=n.tool_calls.map(e=>({id:e.id,type:e.type,function:{name:e.function.name,arguments:e.function.arguments}})))}return r}async chatStream(e){let t=e.model||this.defaultModel;if(!t)throw Error(`Provider "${this.name}" 未配置模型`);if(!this.apiKey)throw Error(`Provider "${this.name}" 未配置 API Key`);let n=await this.client.chat.completions.create({model:t,messages:(e.messages||[]).map(e=>this.mapMessage(e)),tools:e.tools?.map(e=>({type:e.type,function:{name:e.function.name,description:e.function.description,parameters:e.function.parameters}})),stream:!0});async function*r(){for await(let e of n)yield{choices:e.choices?.map(e=>({delta:{content:e.delta?.content,tool_calls:e.delta?.tool_calls?.map(e=>({id:e.id,index:e.index??0,type:e.type,function:{name:e.function?.name,arguments:e.function?.arguments}}))},finish_reason:e.finish_reason}))}}return r()}};const Hw={openai:{baseUrl:`https://api.openai.com/v1`,apiKey:void 0,defaultModel:`gpt-4o-mini`},dashscope:{baseUrl:`https://dashscope.aliyuncs.com/compatible-mode/v1`,apiKey:`sk-06c61fc3bb2543069ed235e2df877f8a`,defaultModel:`qwen3-max`},openrouter:{baseUrl:`https://openrouter.ai/api/v1`,apiKey:void 0,defaultModel:`gpt-4o-mini`},deepseek:{baseUrl:`https://api.deepseek.com/v1`,apiKey:void 0,defaultModel:`deepseek-3.2`},kimi:{baseUrl:`https://api.moonshot.cn/v1`,apiKey:void 0,defaultModel:`kimi-k2-thingking`},glm:{baseUrl:`https://open.bigmodel.cn/api/paas/v4`,apiKey:void 0,defaultModel:`glm-4.6`}},Uw=new class{serviceOptions;providerCache=new Map;defaultProvider;defaultProviderName;constructor(e){if(this.serviceOptions=e,e?.provider){this.defaultProvider=e.provider,this.defaultProviderName=e.providerName||e.provider.name||`openai`,this.providerCache.set(this.defaultProviderName,e.provider);return}let t=e?.providerName||`dashscope`;this.defaultProviderName=t;let n=this.resolveProvider(t);this.defaultProvider=n,this.providerCache.set(t,n)}resolveProvider(e){let t=Hw[e];if(!t)throw Error(`未识别的 AI provider: ${e}`);return new Vw(e,{baseUrl:this.serviceOptions?.baseUrl||t.baseUrl,apiKey:this.serviceOptions?.apiKey||t.apiKey,defaultModel:this.serviceOptions?.model||t.defaultModel})}getProvider(e){if(!e)return this.defaultProvider;let t=this.providerCache.get(e);if(t)return t;let n=this.resolveProvider(e);return this.providerCache.set(e,n),n}parseModel(e){if(!e)return{provider:this.defaultProviderName,model:void 0};let t=e.split(`/`);if(t.length>1){let e=t[0];if(Hw[e])return{provider:e,model:t.slice(1).join(`/`)||void 0}}return{provider:this.defaultProviderName,model:e}}async chat(e){let{provider:t,model:n}=this.parseModel(e.model);return this.getProvider(t).chat({...e,model:n})}async chatStream(e,t){let{provider:n,model:r}=this.parseModel(e.model),i=await this.getProvider(n).chatStream({...e,model:r}),a=``,o=[];for await(let e of i){let n=e.choices?.[0]?.delta;if(n&&(n.content&&(a+=n.content,t(n.content)),n.tool_calls))for(let e of n.tool_calls){let t=e.index??0;o[t]||(o[t]={id:e.id||``,type:`function`,function:{name:``,arguments:``}}),e.function?.name&&(o[t].function.name+=e.function.name),e.function?.arguments&&(o[t].function.arguments+=e.function.arguments)}}return{messages:[{role:`assistant`,content:a}],toolCalls:o.length>0?o:void 0}}async chatStreamChunks(e){let{provider:t,model:n}=this.parseModel(e.model);return this.getProvider(t).chatStream({...e,model:n})}};var Ww=class{model;constructor(e=`gpt-4o-mini`){this.model=e}async callAPI(e,t){let n=(await Uw.chat({model:this.model,messages:e})).messages[0];if(!n)throw Error(`AI 网关未返回任何消息`);return n.content}async generateText(e){return this.callAPI([{role:`user`,content:e}])}async generateJSONResponse(e){return this.callAPI([{role:`user`,content:e}],{type:`json_object`})}async generateSceneDescription(e,t){let n=`${t.length?`之前的情节：
`+t.join(`
`)+`

`:``}基于以下内容，请详细描述一个完整的场景或情节：${e}
要求：
1. 保持与之前情节的连贯性
2. 添加细节描述，包括环境、人物状态、动作等
3. 控制在200字以内`;return this.callAPI([{role:`user`,content:n}])}async generateDivergentOptions(e,t){let n=`${t.length?`之前的情节：
`+t.join(`
`)+`

`:``}当前情节：${e}
    
请提供3个合理的剧情发展方向：
1. 每个方向都要简短但具体
2. 确保与已有情节连贯
3. 每个方向都要有独特性`;return this.callAPI([{role:`user`,content:n}])}};function Gw({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)([]),[a,o]=(0,H.useState)(``),[s,c]=(0,H.useState)(!1),{toast:l}=vp(),u=new Ww(`gpt-4o-mini`);return(0,H.useEffect)(()=>{(async()=>{try{let e=await t();e&&i(e.quotes||[])}catch(e){console.error(`Error loading data:`,e),l({title:n(`quotes.loadFailed`),description:n(`quotes.loadFailedDesc`),variant:`destructive`})}})()},[t,n,l]),(0,H.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({quotes:r})}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[r,e]),(0,U.jsx)(`div`,{className:`min-h-screen bg-gray-50 p-4`,children:(0,U.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,U.jsxs)(qv,{className:`mb-8`,children:[(0,U.jsxs)(Jv,{children:[(0,U.jsx)(Yv,{children:`AI名言生成器`}),(0,U.jsx)(Xv,{children:`生成富有哲理的名言`})]}),(0,U.jsxs)(Zv,{className:`space-y-4`,children:[(0,U.jsx)(gg,{placeholder:`输入主题或类别（可选）`,value:a,onChange:e=>o(e.target.value)}),(0,U.jsx)(hu,{onClick:async()=>{c(!0);try{let e=`创作一句极具洞察力和启发性的观点或思考。${a?`围绕主题：${a}`:``}

要求：
1. 内容要有独特视角，展现深刻的思考
2. 可以是反直觉的洞察，或是对常见现象的重新诠释
3. 语言要简练有力，一针见血
4. 可以挑战传统观点，但要有说服力
5. 创造一个虚构的作者（可以是中文名或英文名）
6. 严格按照以下JSON格式输出，不要包含其他内容：
{
  "content": "你的洞察/思考内容",
  "author": "作者名字"
}`,t=await u.generateText(e),n;try{let e=t.trim().replace(/```json\n?|\n?```/g,``);if(n=JSON.parse(e),!n.content||!n.author)throw Error(`响应格式不正确`)}catch(e){throw console.error(`Parse error:`,e),console.log(`Raw response:`,t),Error(`AI响应格式错误`)}let r={id:Date.now().toString(),content:n.content,author:n.author,category:a||`通用`,timestamp:new Date().toISOString()};i(e=>[r,...e]),o(``),l({title:`生成成功`,description:`新的名言已生成`})}catch(e){console.error(`Error:`,e),l({title:`生成失败`,description:e instanceof Error?e.message:`生成名言时出错，请重试`,variant:`destructive`})}finally{c(!1)}},disabled:s,className:`w-full`,children:s?`生成中...`:`生成名言`})]})]}),(0,U.jsx)(`div`,{className:`space-y-4`,children:r.map(e=>(0,U.jsx)(qv,{className:`bg-white`,children:(0,U.jsxs)(Zv,{className:`pt-6`,children:[(0,U.jsxs)(`blockquote`,{className:`border-l-4 border-blue-500 pl-4 italic`,children:[(0,U.jsx)(`p`,{className:`text-lg text-gray-800 mb-2`,children:e.content}),(0,U.jsx)(`footer`,{className:`text-right`,children:(0,U.jsxs)(`cite`,{className:`text-gray-600`,children:[`—— `,e.author]})})]}),(0,U.jsxs)(`div`,{className:`mt-4 text-sm text-gray-500 flex justify-between`,children:[(0,U.jsx)(`span`,{children:e.category}),(0,U.jsx)(`time`,{children:new Date(e.timestamp).toLocaleString()})]})]})},e.id))})]})})}const Kw=({uri:e})=>e?(0,U.jsx)(Gw,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{quotes:[]}}}}):(0,U.jsx)(`div`,{children:`uri is required`}),qw=Vg({initilize(e){e.componentService.register(`ai-quotes`,Kw),Kv.register({id:`ai-quotes`,label:K(`apps.aiQuotes`),match:[`.aiquotes.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`ai-quotes:${t}`,title:`${K(`apps.aiQuotes`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-quotes`,props:{uri:t}}})}})}});function Jw(e,[t,n]){return Math.min(n,Math.max(t,e))}var Yw=H.createContext(void 0);function Xw(e){let t=H.useContext(Yw);return e||t||`ltr`}function Zw(e){let t=H.useRef({value:e,previous:e});return H.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Qw=t(k(),1),$w=[` `,`Enter`,`ArrowUp`,`ArrowDown`],eT=[` `,`Enter`],tT=`Select`,[nT,rT,iT]=yp(tT),[aT,oT]=at(tT,[iT,ut]),sT=ut(),[cT,lT]=aT(tT),[uT,dT]=aT(tT),fT=e=>{let{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:m}=e,h=sT(t),[g,_]=H.useState(null),[v,y]=H.useState(null),[b,x]=H.useState(!1),S=Xw(l),[C,w]=wt({prop:r,defaultProp:i??!1,onChange:a,caller:tT}),[T,E]=wt({prop:o,defaultProp:s,onChange:c,caller:tT}),D=H.useRef(null),O=g?m||!!g.closest(`form`):!0,[k,A]=H.useState(new Set),j=Array.from(k).map(e=>e.props.value).join(`;`);return(0,U.jsx)(Nt,{...h,children:(0,U.jsxs)(cT,{required:p,scope:t,trigger:g,onTriggerChange:_,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:x,contentId:Xe(),value:T,onValueChange:E,open:C,onOpenChange:w,dir:S,triggerPointerDownPosRef:D,disabled:f,children:[(0,U.jsx)(nT.Provider,{scope:t,children:(0,U.jsx)(uT,{scope:e.__scopeSelect,onNativeOptionAdd:H.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:H.useCallback(e=>{A(t=>{let n=new Set(t);return n.delete(e),n})},[]),children:n})}),O?(0,U.jsxs)(sE,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:e=>E(e.target.value),disabled:f,form:m,children:[T===void 0?(0,U.jsx)(`option`,{value:``}):null,Array.from(k)]},j):null]})})};fT.displayName=tT;var pT=`SelectTrigger`,mT=H.forwardRef((e,t)=>{let{__scopeSelect:n,disabled:r=!1,...i}=e,a=sT(n),o=lT(pT,n),s=o.disabled||r,c=Ye(t,o.onTriggerChange),l=rT(n),u=H.useRef(`touch`),[d,f,p]=lE(e=>{let t=l().filter(e=>!e.disabled),n=uE(t,e,t.find(e=>e.value===o.value));n!==void 0&&o.onValueChange(n.value)}),m=e=>{s||(o.onOpenChange(!0),p()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,U.jsx)(jt,{asChild:!0,...a,children:(0,U.jsx)(V.button,{type:`button`,role:`combobox`,"aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":`none`,dir:o.dir,"data-state":o.open?`open`:`closed`,disabled:s,"data-disabled":s?``:void 0,"data-placeholder":cE(o.value)?``:void 0,...i,ref:c,onClick:B(i.onClick,e=>{e.currentTarget.focus(),u.current!==`mouse`&&m(e)}),onPointerDown:B(i.onPointerDown,e=>{u.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),e.button===0&&e.ctrlKey===!1&&e.pointerType===`mouse`&&(m(e),e.preventDefault())}),onKeyDown:B(i.onKeyDown,e=>{let t=d.current!==``;!(e.ctrlKey||e.altKey||e.metaKey)&&e.key.length===1&&f(e.key),!(t&&e.key===` `)&&$w.includes(e.key)&&(m(),e.preventDefault())})})})});mT.displayName=pT;var hT=`SelectValue`,gT=H.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:i,children:a,placeholder:o=``,...s}=e,c=lT(hT,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=Ye(t,c.onValueNodeChange);return Mt(()=>{l(u)},[l,u]),(0,U.jsx)(V.span,{...s,ref:d,style:{pointerEvents:`none`},children:cE(c.value)?(0,U.jsx)(U.Fragment,{children:o}):a})});gT.displayName=hT;var _T=`SelectIcon`,vT=H.forwardRef((e,t)=>{let{__scopeSelect:n,children:r,...i}=e;return(0,U.jsx)(V.span,{"aria-hidden":!0,...i,ref:t,children:r||`▼`})});vT.displayName=_T;var yT=`SelectPortal`,bT=e=>(0,U.jsx)(vt,{asChild:!0,...e});bT.displayName=yT;var xT=`SelectContent`,ST=H.forwardRef((e,t)=>{let n=lT(xT,e.__scopeSelect),[r,i]=H.useState();if(Mt(()=>{i(new DocumentFragment)},[]),!n.open){let t=r;return t?Qw.createPortal((0,U.jsx)(wT,{scope:e.__scopeSelect,children:(0,U.jsx)(nT.Slot,{scope:e.__scopeSelect,children:(0,U.jsx)(`div`,{children:e.children})})}),t):null}return(0,U.jsx)(OT,{...e,ref:t})});ST.displayName=xT;var CT=10,[wT,TT]=aT(xT),ET=`SelectContentImpl`,DT=lt(`SelectContent.RemoveScroll`),OT=H.forwardRef((e,t)=>{let{__scopeSelect:n,position:r=`item-aligned`,onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:g,..._}=e,v=lT(xT,n),[y,b]=H.useState(null),[x,S]=H.useState(null),C=Ye(t,e=>b(e)),[w,T]=H.useState(null),[E,D]=H.useState(null),O=rT(n),[k,A]=H.useState(!1),j=H.useRef(!1);H.useEffect(()=>{if(y)return re(y)},[y]),_u();let M=H.useCallback(e=>{let[t,...n]=O().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(let n of e)if(n===i||(n?.scrollIntoView({block:`nearest`}),n===t&&x&&(x.scrollTop=0),n===r&&x&&(x.scrollTop=x.scrollHeight),n?.focus(),document.activeElement!==i))return},[O,x]),N=H.useCallback(()=>M([w,y]),[M,w,y]);H.useEffect(()=>{k&&N()},[k,N]);let{onOpenChange:P,triggerPointerDownPosRef:F}=v;H.useEffect(()=>{if(y){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(F.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():y.contains(n.target)||P(!1),document.removeEventListener(`pointermove`,t),F.current=null};return F.current!==null&&(document.addEventListener(`pointermove`,t),document.addEventListener(`pointerup`,n,{capture:!0,once:!0})),()=>{document.removeEventListener(`pointermove`,t),document.removeEventListener(`pointerup`,n,{capture:!0})}}},[y,P,F]),H.useEffect(()=>{let e=()=>P(!1);return window.addEventListener(`blur`,e),window.addEventListener(`resize`,e),()=>{window.removeEventListener(`blur`,e),window.removeEventListener(`resize`,e)}},[P]);let[ee,I]=lE(e=>{let t=O().filter(e=>!e.disabled),n=uE(t,e,t.find(e=>e.ref.current===document.activeElement));n&&setTimeout(()=>n.ref.current.focus())}),L=H.useCallback((e,t,n)=>{let r=!j.current&&!n;(v.value!==void 0&&v.value===t||r)&&(T(e),r&&(j.current=!0))},[v.value]),ne=H.useCallback(()=>y?.focus(),[y]),ie=H.useCallback((e,t,n)=>{let r=!j.current&&!n;(v.value!==void 0&&v.value===t||r)&&D(e)},[v.value]),ae=r===`popper`?MT:AT,oe=ae===MT?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:g}:{};return(0,U.jsx)(wT,{scope:n,content:y,viewport:x,onViewportChange:S,itemRefCallback:L,selectedItem:w,onItemLeave:ne,itemTextRefCallback:ie,focusSelectedItem:N,selectedItemText:E,position:r,isPositioned:k,searchRef:ee,children:(0,U.jsx)(te,{as:DT,allowPinchZoom:!0,children:(0,U.jsx)(Cu,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:B(i,e=>{v.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,U.jsx)(Qe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:(0,U.jsx)(ae,{role:`listbox`,id:v.contentId,"data-state":v.open?`open`:`closed`,dir:v.dir,onContextMenu:e=>e.preventDefault(),..._,...oe,onPlaced:()=>A(!0),ref:C,style:{display:`flex`,flexDirection:`column`,outline:`none`,..._.style},onKeyDown:B(_.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if(e.key===`Tab`&&e.preventDefault(),!t&&e.key.length===1&&I(e.key),[`ArrowUp`,`ArrowDown`,`Home`,`End`].includes(e.key)){let t=O().filter(e=>!e.disabled).map(e=>e.ref.current);if([`ArrowUp`,`End`].includes(e.key)&&(t=t.slice().reverse()),[`ArrowUp`,`ArrowDown`].includes(e.key)){let n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});OT.displayName=ET;var kT=`SelectItemAlignedPosition`,AT=H.forwardRef((e,t)=>{let{__scopeSelect:n,onPlaced:r,...i}=e,a=lT(xT,n),o=TT(xT,n),[s,c]=H.useState(null),[l,u]=H.useState(null),d=Ye(t,e=>u(e)),f=rT(n),p=H.useRef(!1),m=H.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:_,focusSelectedItem:v}=o,y=H.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&h&&g&&_){let e=a.trigger.getBoundingClientRect(),t=l.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),i=_.getBoundingClientRect();if(a.dir!==`rtl`){let r=i.left-t.left,a=n.left-r,o=e.left-a,c=e.width+o,l=Math.max(c,t.width),u=window.innerWidth-CT,d=Jw(a,[CT,Math.max(CT,u-l)]);s.style.minWidth=c+`px`,s.style.left=d+`px`}else{let r=t.right-i.right,a=window.innerWidth-n.right-r,o=window.innerWidth-e.right-a,c=e.width+o,l=Math.max(c,t.width),u=window.innerWidth-CT,d=Jw(a,[CT,Math.max(CT,u-l)]);s.style.minWidth=c+`px`,s.style.right=d+`px`}let o=f(),c=window.innerHeight-CT*2,u=h.scrollHeight,d=window.getComputedStyle(l),m=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),y=parseInt(d.borderBottomWidth,10),b=parseInt(d.paddingBottom,10),x=m+v+u+b+y,S=Math.min(g.offsetHeight*5,x),C=window.getComputedStyle(h),w=parseInt(C.paddingTop,10),T=parseInt(C.paddingBottom,10),E=e.top+e.height/2-CT,D=c-E,O=g.offsetHeight/2,k=g.offsetTop+O,A=m+v+k,j=x-A;if(A<=E){let e=o.length>0&&g===o[o.length-1].ref.current;s.style.bottom=`0px`;let t=l.clientHeight-h.offsetTop-h.offsetHeight,n=A+Math.max(D,O+(e?T:0)+t+y);s.style.height=n+`px`}else{let e=o.length>0&&g===o[0].ref.current;s.style.top=`0px`;let t=Math.max(E,m+h.offsetTop+(e?w:0)+O)+j;s.style.height=t+`px`,h.scrollTop=A-E+h.offsetTop}s.style.margin=`${CT}px 0`,s.style.minHeight=S+`px`,s.style.maxHeight=c+`px`,r?.(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,h,g,_,a.dir,r]);Mt(()=>y(),[y]);let[b,x]=H.useState();return Mt(()=>{l&&x(window.getComputedStyle(l).zIndex)},[l]),(0,U.jsx)(NT,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:H.useCallback(e=>{e&&m.current===!0&&(y(),v?.(),m.current=!1)},[y,v]),children:(0,U.jsx)(`div`,{ref:c,style:{display:`flex`,flexDirection:`column`,position:`fixed`,zIndex:b},children:(0,U.jsx)(V.div,{...i,ref:d,style:{boxSizing:`border-box`,maxHeight:`100%`,...i.style}})})})});AT.displayName=kT;var jT=`SelectPopperPosition`,MT=H.forwardRef((e,t)=>{let{__scopeSelect:n,align:r=`start`,collisionPadding:i=CT,...a}=e,o=sT(n);return(0,U.jsx)(yt,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:`border-box`,...a.style,"--radix-select-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-select-content-available-width":`var(--radix-popper-available-width)`,"--radix-select-content-available-height":`var(--radix-popper-available-height)`,"--radix-select-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-select-trigger-height":`var(--radix-popper-anchor-height)`}})});MT.displayName=jT;var[NT,PT]=aT(xT,{}),FT=`SelectViewport`,IT=H.forwardRef((e,t)=>{let{__scopeSelect:n,nonce:r,...i}=e,a=TT(FT,n),o=PT(FT,n),s=Ye(t,a.onViewportChange),c=H.useRef(0);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`style`,{dangerouslySetInnerHTML:{__html:`[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}`},nonce:r}),(0,U.jsx)(nT.Slot,{scope:n,children:(0,U.jsx)(V.div,{"data-radix-select-viewport":``,role:`presentation`,...i,ref:s,style:{position:`relative`,flex:1,overflow:`hidden auto`,...i.style},onScroll:B(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=o;if(r?.current&&n){let e=Math.abs(c.current-t.scrollTop);if(e>0){let r=window.innerHeight-CT*2,i=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),o=Math.max(i,a);if(o<r){let i=o+e,a=Math.min(r,i),s=i-a;n.style.height=a+`px`,n.style.bottom===`0px`&&(t.scrollTop=s>0?s:0,n.style.justifyContent=`flex-end`)}}}c.current=t.scrollTop})})})]})});IT.displayName=FT;var LT=`SelectGroup`,[RT,zT]=aT(LT),BT=H.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=Xe();return(0,U.jsx)(RT,{scope:n,id:i,children:(0,U.jsx)(V.div,{role:`group`,"aria-labelledby":i,...r,ref:t})})});BT.displayName=LT;var VT=`SelectLabel`,HT=H.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=zT(VT,n);return(0,U.jsx)(V.div,{id:i.id,...r,ref:t})});HT.displayName=VT;var UT=`SelectItem`,[WT,GT]=aT(UT),KT=H.forwardRef((e,t)=>{let{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,s=lT(UT,n),c=TT(UT,n),l=s.value===r,[u,d]=H.useState(a??``),[f,p]=H.useState(!1),m=Ye(t,e=>c.itemRefCallback?.(e,r,i)),h=Xe(),g=H.useRef(`touch`),_=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(r===``)throw Error(`A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.`);return(0,U.jsx)(WT,{scope:n,value:r,disabled:i,textId:h,isSelected:l,onItemTextChange:H.useCallback(e=>{d(t=>t||(e?.textContent??``).trim())},[]),children:(0,U.jsx)(nT.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:(0,U.jsx)(V.div,{role:`option`,"aria-labelledby":h,"data-highlighted":f?``:void 0,"aria-selected":l&&f,"data-state":l?`checked`:`unchecked`,"aria-disabled":i||void 0,"data-disabled":i?``:void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:B(o.onFocus,()=>p(!0)),onBlur:B(o.onBlur,()=>p(!1)),onClick:B(o.onClick,()=>{g.current!==`mouse`&&_()}),onPointerUp:B(o.onPointerUp,()=>{g.current===`mouse`&&_()}),onPointerDown:B(o.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:B(o.onPointerMove,e=>{g.current=e.pointerType,i?c.onItemLeave?.():g.current===`mouse`&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:B(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:B(o.onKeyDown,e=>{c.searchRef?.current!==``&&e.key===` `||(eT.includes(e.key)&&_(),e.key===` `&&e.preventDefault())})})})})});KT.displayName=UT;var qT=`SelectItemText`,JT=H.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:i,...a}=e,o=lT(qT,n),s=TT(qT,n),c=GT(qT,n),l=dT(qT,n),[u,d]=H.useState(null),f=Ye(t,e=>d(e),c.onItemTextChange,e=>s.itemTextRefCallback?.(e,c.value,c.disabled)),p=u?.textContent,m=H.useMemo(()=>(0,U.jsx)(`option`,{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=l;return Mt(()=>(h(m),()=>g(m)),[h,g,m]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(V.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qw.createPortal(a.children,o.valueNode):null]})});JT.displayName=qT;var YT=`SelectItemIndicator`,XT=H.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return GT(YT,n).isSelected?(0,U.jsx)(V.span,{"aria-hidden":!0,...r,ref:t}):null});XT.displayName=YT;var ZT=`SelectScrollUpButton`,QT=H.forwardRef((e,t)=>{let n=TT(ZT,e.__scopeSelect),r=PT(ZT,e.__scopeSelect),[i,a]=H.useState(!1),o=Ye(t,r.onScrollButtonChange);return Mt(()=>{if(n.viewport&&n.isPositioned){let e=function(){a(t.scrollTop>0)},t=n.viewport;return e(),t.addEventListener(`scroll`,e),()=>t.removeEventListener(`scroll`,e)}},[n.viewport,n.isPositioned]),i?(0,U.jsx)(tE,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop-=t.offsetHeight)}}):null});QT.displayName=ZT;var $T=`SelectScrollDownButton`,eE=H.forwardRef((e,t)=>{let n=TT($T,e.__scopeSelect),r=PT($T,e.__scopeSelect),[i,a]=H.useState(!1),o=Ye(t,r.onScrollButtonChange);return Mt(()=>{if(n.viewport&&n.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;a(Math.ceil(t.scrollTop)<e)},t=n.viewport;return e(),t.addEventListener(`scroll`,e),()=>t.removeEventListener(`scroll`,e)}},[n.viewport,n.isPositioned]),i?(0,U.jsx)(tE,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop+=t.offsetHeight)}}):null});eE.displayName=$T;var tE=H.forwardRef((e,t)=>{let{__scopeSelect:n,onAutoScroll:r,...i}=e,a=TT(`SelectScrollButton`,n),o=H.useRef(null),s=rT(n),c=H.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return H.useEffect(()=>()=>c(),[c]),Mt(()=>{s().find(e=>e.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:`nearest`})},[s]),(0,U.jsx)(V.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:B(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:B(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:B(i.onPointerLeave,()=>{c()})})}),nE=`SelectSeparator`,rE=H.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return(0,U.jsx)(V.div,{"aria-hidden":!0,...r,ref:t})});rE.displayName=nE;var iE=`SelectArrow`,aE=H.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=sT(n),a=lT(iE,n),o=TT(iE,n);return a.open&&o.position===`popper`?(0,U.jsx)(Pt,{...i,...r,ref:t}):null});aE.displayName=iE;var oE=`SelectBubbleInput`,sE=H.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{let i=H.useRef(null),a=Ye(r,i),o=Zw(t);return H.useEffect(()=>{let e=i.current;if(!e)return;let n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,`value`).set;if(o!==t&&r){let n=new Event(`change`,{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[o,t]),(0,U.jsx)(V.select,{...n,style:{...St,...n.style},ref:a,defaultValue:t})});sE.displayName=oE;function cE(e){return e===``||e===void 0}function lE(e){let t=ot(e),n=H.useRef(``),r=H.useRef(0),i=H.useCallback(e=>{let i=n.current+e;t(i),(function e(t){n.current=t,window.clearTimeout(r.current),t!==``&&(r.current=window.setTimeout(()=>e(``),1e3))})(i)},[t]),a=H.useCallback(()=>{n.current=``,window.clearTimeout(r.current)},[]);return H.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function uE(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,a=dE(e,Math.max(i,0));r.length===1&&(a=a.filter(e=>e!==n));let o=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return o===n?void 0:o}function dE(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fE=fT,pE=mT,mE=gT,hE=vT,gE=bT,_E=ST,vE=IT,yE=HT,bE=KT,xE=JT,SE=XT,CE=QT,wE=eE,TE=rE,EE=fE,DE=mE,OE=H.forwardRef(({className:e,children:t,...n},r)=>(0,U.jsxs)(pE,{ref:r,className:q(`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1`,e),...n,children:[t,(0,U.jsx)(hE,{asChild:!0,children:(0,U.jsx)(qd,{className:`h-4 w-4 opacity-50`})})]}));OE.displayName=pE.displayName;var kE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(CE,{ref:n,className:q(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,U.jsx)(Xd,{className:`h-4 w-4`})}));kE.displayName=CE.displayName;var AE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(wE,{ref:n,className:q(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,U.jsx)(qd,{className:`h-4 w-4`})}));AE.displayName=wE.displayName;var jE=H.forwardRef(({className:e,children:t,position:n=`popper`,...r},i)=>(0,U.jsx)(gE,{children:(0,U.jsxs)(_E,{ref:i,className:q(`relative z-40 max-h-[300px] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,n===`popper`&&`data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1`,e),position:n,...r,children:[(0,U.jsx)(kE,{}),(0,U.jsx)(vE,{className:q(`p-1`,n===`popper`&&`h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]`),children:t}),(0,U.jsx)(AE,{})]})}));jE.displayName=_E.displayName;var ME=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(yE,{ref:n,className:q(`py-1.5 pl-8 pr-2 text-sm font-semibold`,e),...t}));ME.displayName=yE.displayName;var NE=H.forwardRef(({className:e,children:t,...n},r)=>(0,U.jsxs)(bE,{ref:r,className:q(`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,U.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,U.jsx)(SE,{children:(0,U.jsx)(Kd,{className:`h-4 w-4`})})}),(0,U.jsx)(xE,{children:t})]}));NE.displayName=bE.displayName;var PE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(TE,{ref:n,className:q(`-mx-1 my-1 h-px bg-muted`,e),...t}));PE.displayName=TE.displayName;var FE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(`textarea`,{className:q(`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:n,...t}));FE.displayName=`Textarea`;var IE=(e,t,n)=>{let r=e.scrollTop,i=e.scrollHeight-r-e.clientHeight<=t;return{nextScrollTop:r,shouldStick:i,shouldUnstick:!i&&r<n}},LE=e=>e.firstElementChild||e,RE=class{container=null;lastScrollTop=0;threshold;resizeObserver;rafId=null;isSticky$;containerRef;constructor(e=20){this.threshold=e,this.isSticky$=new bo(!0),this.containerRef=e=>{e?this.attach(e):this.detach()}}getStickySnapshot(){return this.isSticky$.getValue()}setThreshold(e){this.threshold!==e&&(this.threshold=e,this.evaluateStickiness())}attach(e){if(this.container===e){this.evaluateStickiness();return}this.detach(),this.container=e,this.lastScrollTop=e.scrollTop,e.addEventListener(`scroll`,this.handleScroll,{passive:!0}),this.observeResizes(),this.evaluateStickiness()}detach(){this.container&&=(this.container.removeEventListener(`scroll`,this.handleScroll),this.teardownResizeObserver(),null)}setSticky=e=>{this.commitSticky(e)};setStickyAction=e=>{let t=typeof e==`function`?e(this.getStickySnapshot()):e;this.setSticky(t)};scrollToBottom=(e=`smooth`)=>{this.container&&this.container.scrollTo({top:this.container.scrollHeight,behavior:e})};notifyNewItem=()=>{this.ensureStickyScroll(`auto`)};handleScroll=()=>{this.evaluateStickiness()};evaluateStickiness(){if(!this.container)return;let e=IE(this.container,this.threshold,this.lastScrollTop);if(this.lastScrollTop=e.nextScrollTop,e.shouldStick){this.commitSticky(!0);return}e.shouldUnstick&&this.commitSticky(!1)}commitSticky(e){this.isSticky$.getValue()!==e&&this.isSticky$.next(e)}observeResizes(){!this.container||typeof ResizeObserver>`u`||(this.resizeObserver=new ResizeObserver(()=>{this.isSticky$.getValue()&&(this.cancelAnimation(),this.rafId=requestAnimationFrame(()=>this.ensureStickyScroll(`auto`)))}),this.resizeObserver.observe(LE(this.container)))}ensureStickyScroll(e=`auto`){this.isSticky$.getValue()&&this.scrollToBottom(e)}teardownResizeObserver(){this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.cancelAnimation()}cancelAnimation(){this.rafId!=null&&(cancelAnimationFrame(this.rafId),this.rafId=null)}};function zE(e){let[t,n]=(0,H.useState)(()=>e.getValue());return(0,H.useEffect)(()=>{let t=e.subscribe(n);return()=>t.unsubscribe()},[e]),t}function BE(e){let{threshold:t=20}=e||{},n=(0,H.useRef)(null);n.current?n.current.setThreshold(t):n.current=new RE(t);let r=n.current,i=zE(r.isSticky$);return{containerRef:r.containerRef,isSticky:i,setIsSticky:r.setStickyAction,scrollToBottom:r.scrollToBottom,notifyNewItem:r.notifyNewItem}}var VE=[{id:`gpt-4o`,name:`GPT-4O`},{id:`gpt-4o-mini`,name:`GPT-4O Mini`},{id:`gpt-4`,name:`GPT-4`},{id:`gpt-4-turbo-preview`,name:`GPT-4 Turbo`},{id:`gpt-3.5-turbo`,name:`GPT-3.5 Turbo`}];function HE({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)(``),[a,o]=(0,H.useState)(!1),[s,c]=(0,H.useState)([]),[l,u]=(0,H.useState)(null),[d,f]=(0,H.useState)(``),{toast:p}=vp(),[m,h]=(0,H.useState)(`gpt-4o-mini`),g=(0,H.useMemo)(()=>new Ww(m),[m]),{containerRef:_,notifyNewItem:v,scrollToBottom:y,setIsSticky:b}=BE({threshold:80});(0,H.useEffect)(()=>{(async()=>{try{let e=await t();e&&(c(e.conversation||[]),h(e.selectedModel||`gpt-4o-mini`))}catch(e){console.error(`Error loading data:`,e),p({title:n(`story.loadDataFailed`),description:n(`story.loadDataFailedDesc`),variant:`destructive`})}})()},[t,n,p]),(0,H.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({conversation:s,selectedModel:m}),console.log(`Auto saved successfully`)}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[s,m,e]);let x=async()=>{if(!r.trim()){p({title:n(`story.error`),description:n(`story.enterContent`),variant:`destructive`});return}o(!0);try{let e=T(),t=await g.generateSceneDescription(r,e),n=await g.generateDivergentOptions(t,[...e,t]);c(e=>[...e,{type:`user`,content:r},{type:`scene`,content:t},{type:`divergent`,content:n}]),i(``)}catch(e){console.error(`Error:`,e),p({title:n(`story.generateFailed`),description:n(`story.generateFailedDesc`),variant:`destructive`})}finally{o(!1)}},S=e=>{u(e)},C=async()=>{if(!l){p({title:n(`story.error`),description:n(`story.selectDirection`),variant:`destructive`});return}o(!0);try{let e=d.trim()?`${l}: ${d}`:l,t=T(),n=await g.generateSceneDescription(e,t),r=await g.generateDivergentOptions(n,[...t,n]);c(t=>[...t,{type:`user`,content:e},{type:`scene`,content:n},{type:`divergent`,content:r}]),u(null),f(``)}catch(e){console.error(`Error:`,e),p({title:`生成失败`,description:`无法开始新一轮对话，请重试。`})}finally{o(!1)}},w=(e,t)=>{let n={};switch(e.type){case`user`:return(0,U.jsxs)(qv,{className:`w-full mb-4 bg-slate-50 border-slate-200 shadow-sm`,children:[(0,U.jsx)(Jv,{className:`pb-2`,children:(0,U.jsx)(Yv,{className:`text-sm text-slate-600`,children:`用户输入`})}),(0,U.jsx)(Zv,{children:(0,U.jsx)(`p`,{className:`text-slate-800`,children:e.content})})]},t);case`scene`:return(0,U.jsxs)(qv,{className:`w-full mb-4 bg-white border-blue-100 shadow-md`,children:[(0,U.jsxs)(Jv,{className:`pb-2`,children:[(0,U.jsx)(Yv,{className:`text-lg text-blue-800`,children:`情节描述`}),(0,U.jsx)(Xv,{className:`text-blue-600`,children:`当前场景与故事发展`})]}),(0,U.jsx)(Zv,{children:(0,U.jsx)(`p`,{className:`text-slate-700 leading-relaxed whitespace-pre-line`,children:e.content})})]},t);case`divergent`:{let r=e.content.split(`
`).filter(e=>e.trim().length>0).map(e=>{let[t,n]=e.split(`:`);return{title:t?.trim(),description:n?.trim()}});return(0,U.jsxs)(qv,{className:`w-full mb-4 bg-gradient-to-b from-white to-green-50 border-green-100 shadow-md`,...n,children:[(0,U.jsxs)(Jv,{className:`pb-2`,children:[(0,U.jsx)(Yv,{className:`text-lg text-green-800`,children:`故事分支`}),(0,U.jsx)(Xv,{className:`text-green-600`,children:`选择接下来的发展方向`})]}),(0,U.jsx)(Zv,{children:(0,U.jsx)(`div`,{className:`grid gap-4`,children:r.map(({title:e,description:t},n)=>(0,U.jsxs)(`div`,{className:`group relative overflow-hidden rounded-lg border border-green-100 bg-white shadow-sm 
                      hover:shadow-md hover:border-green-200 transition-all duration-200`,onClick:()=>S(e),children:[(0,U.jsxs)(`div`,{className:`p-4`,children:[(0,U.jsx)(`h4`,{className:`font-medium text-green-800 mb-2 group-hover:text-green-700`,children:e}),(0,U.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed mb-3`,children:t}),(0,U.jsx)(hu,{size:`sm`,variant:`outline`,className:`w-full bg-white border-green-200 text-green-700 
                          hover:bg-green-50 hover:text-green-800 hover:border-green-300
                          transition-colors duration-200`,children:`选择此方向`})]}),(0,U.jsx)(`div`,{className:`absolute inset-0 border-2 border-transparent 
                      group-hover:border-green-200 rounded-lg transition-colors duration-200`})]},n))})})]},t)}default:return null}},T=(0,H.useCallback)(()=>s.filter(e=>e.type===`scene`).map(e=>e.content),[s]);(0,H.useEffect)(()=>{v()},[s,v]);let E=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),l?C():x())};return(0,U.jsxs)(`div`,{className:`flex flex-col h-full`,children:[(0,U.jsx)(`div`,{className:`flex-1 overflow-auto p-4 pb-[200px] scroll-smooth`,ref:_,onMouseEnter:()=>b(!1),onMouseLeave:()=>b(!0),children:(0,U.jsx)(`div`,{className:`max-w-3xl mx-auto space-y-4`,children:s.map((e,t)=>w(e,t))})}),(0,U.jsx)(`div`,{className:`relative bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4`,children:(0,U.jsxs)(`div`,{className:`max-w-3xl mx-auto space-y-3`,children:[(0,U.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,U.jsx)(`div`,{className:`flex-1`}),(0,U.jsxs)(EE,{value:m,onValueChange:h,children:[(0,U.jsx)(OE,{className:`w-[180px]`,children:(0,U.jsx)(DE,{placeholder:`选择模型`})}),(0,U.jsx)(jE,{children:VE.map(e=>(0,U.jsx)(NE,{value:e.id,children:e.name},e.id))})]})]}),l?(0,U.jsxs)(`div`,{className:`space-y-2`,children:[(0,U.jsxs)(`div`,{className:`text-sm font-medium`,children:[`继续 `,l,` 方向`]}),(0,U.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,U.jsx)(FE,{placeholder:`输入进一步描述...`,value:d,onChange:e=>f(e.target.value),onKeyDown:E,className:`min-h-[80px]`}),(0,U.jsx)(hu,{onClick:C,disabled:a,className:`shrink-0`,onMouseDown:()=>y(`auto`),children:`开始新一轮`})]})]}):(0,U.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,U.jsx)(gg,{placeholder:`输入任意内容...`,value:r,onChange:e=>i(e.target.value),onKeyDown:E}),(0,U.jsx)(hu,{onClick:x,disabled:a,className:`shrink-0`,onMouseDown:()=>y(`auto`),children:a?`生成中...`:`发送`})]})]})})]})}const UE=({uri:e})=>(console.log(`uri`,e),e?(0,U.jsx)(HE,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}}):(0,U.jsx)(`div`,{children:`uri is required`})),WE=Vg({initilize(e){e.componentService.register(`ai-story-cards`,UE),Kv.register({id:`ai-story-cards`,label:K(`apps.aiStoryCards`),match:[`.aicard.json`],priority:100,init:t=>{console.log(`open uri:`,t),e.layoutService.pageBox.addPage({id:`ai-story-cards:${t}`,title:`${K(`apps.aiStoryCards`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-story-cards`,props:{uri:t}}})}})}});var GE=$h,KE=tg,qE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ng,{className:q(`fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t,ref:n}));qE.displayName=ng.displayName;var JE=pu(`fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500`,{variants:{side:{top:`inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top`,bottom:`inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom`,left:`inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm`,right:`inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm`}},defaultVariants:{side:`right`}}),YE=H.forwardRef(({side:e=`right`,className:t,children:n,...r},i)=>(0,U.jsxs)(KE,{children:[(0,U.jsx)(qE,{}),(0,U.jsxs)(rg,{ref:i,className:q(JE({side:e}),t),...r,children:[n,(0,U.jsxs)(og,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary`,children:[(0,U.jsx)(Ff,{className:`h-4 w-4`}),(0,U.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));YE.displayName=rg.displayName;var XE=({className:e,...t})=>(0,U.jsx)(`div`,{className:q(`flex flex-col space-y-2 text-center sm:text-left`,e),...t});XE.displayName=`SheetHeader`;var ZE=({className:e,...t})=>(0,U.jsx)(`div`,{className:q(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});ZE.displayName=`SheetFooter`;var QE=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ig,{ref:n,className:q(`text-lg font-semibold text-foreground`,e),...t}));QE.displayName=ig.displayName;var $E=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(ag,{ref:n,className:q(`text-sm text-muted-foreground`,e),...t}));$E.displayName=ag.displayName;var eD=n(((e,t)=>{(function(n,r){typeof e==`object`&&typeof t==`object`?t.exports=r(c()):typeof define==`function`&&define.amd?define(`lib`,[`react`],r):typeof e==`object`?e.lib=r(c()):n.lib=r(n.react)})(typeof self<`u`?self:e,function(e){return function(){var t={155:function(t){t.exports=e}},n={};function r(e){var i=n[e];if(i!==void 0)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})};var i={};r.r(i),r.d(i,{useReactToPrint:function(){return p}});var a=r(155);function o({level:e=`error`,messages:t,suppressErrors:n=!1}){n||(e===`error`?console.error(t):e===`warning`?console.warn(t):console.debug(t))}function s(e,t){if(t||!e){let e=document.getElementById(`printWindow`);e&&document.body.removeChild(e)}}function c(e){return e instanceof Error?e:Error(`Unknown Error`)}function l(e,t){let{documentTitle:n,onAfterPrint:r,onPrintError:i,preserveAfterPrint:a,print:l,suppressErrors:u}=t;setTimeout(()=>{if(e.contentWindow){function t(){r?.(),s(a)}if(e.contentWindow.focus(),l)l(e).then(t).catch(e=>{i?i(`print`,c(e)):o({messages:["An error was thrown by the specified `print` function"],suppressErrors:u})});else{if(e.contentWindow.print){let t=e.contentDocument?.title??``,r=e.ownerDocument.title;n&&(e.ownerDocument.title=n,e.contentDocument&&(e.contentDocument.title=n)),e.contentWindow.print(),n&&(e.ownerDocument.title=r,e.contentDocument&&(e.contentDocument.title=t))}else o({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:u});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>(navigator.userAgent??navigator.vendor??(`opera`in window&&window.opera)).match(e))?setTimeout(t,500):t()}}else o({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:u})},500)}function u(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),r=n.nextNode();for(;r;)t.push(r),r=n.nextNode();return t}function d(e,t,n){let r=u(e),i=u(t);if(r.length===i.length)for(let e=0;e<r.length;e++){let t=r[e],a=i[e],o=t.shadowRoot;if(o!==null){let e=a.attachShadow({mode:o.mode});e.innerHTML=o.innerHTML,d(o,e,n)}}else o({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:n})}function f(e,t,n,r){let{contentNode:i,clonedContentNode:a,clonedImgNodes:s,clonedVideoNodes:u,numResourcesToLoad:f,originalCanvasNodes:p}=n,{bodyClass:m,fonts:h,ignoreGlobalStyles:g,pageStyle:_,nonce:v,suppressErrors:y,copyShadowRoots:b}=r;e.onload=null;let x=e.contentDocument??e.contentWindow?.document;if(x){let n=x.body.appendChild(a);b&&d(i,n,!!y),h&&(e.contentDocument?.fonts&&e.contentWindow?.FontFace?h.forEach(n=>{let r=new FontFace(n.family,n.source,{weight:n.weight,style:n.style});e.contentDocument.fonts.add(r),r.loaded.then(()=>{t(r)}).catch(e=>{t(r,[`Failed loading the font:`,r,`Load error:`,c(e)])})}):(h.forEach(e=>{t(e)}),o({messages:[`"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page`],suppressErrors:y})));let r=_??`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`,l=x.createElement(`style`);v&&(l.setAttribute(`nonce`,v),x.head.setAttribute(`nonce`,v)),l.appendChild(x.createTextNode(r)),x.head.appendChild(l),m&&x.body.classList.add(...m.split(` `));let f=x.querySelectorAll(`canvas`);for(let e=0;e<p.length;++e){let t=p[e],n=f[e];if(n===void 0){o({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:y});continue}let r=n.getContext(`2d`);r&&r.drawImage(t,0,0)}for(let e=0;e<s.length;e++){let n=s[e],r=n.getAttribute(`src`);if(r){let e=new Image;e.onload=()=>{t(n)},e.onerror=(e,r,i,a,o)=>{t(n,[`Error loading <img>`,n,`Error`,o])},e.src=r}else t(n,[`Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.`,n])}for(let e=0;e<u.length;e++){let n=u[e];n.preload=`auto`;let r=n.getAttribute(`poster`);if(r){let e=new Image;e.onload=()=>{t(n)},e.onerror=(e,i,a,o,s)=>{t(n,[`Error loading video poster`,r,`for video`,n,`Error:`,s])},e.src=r}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(e,r,i,a,o)=>{t(n,[`Error loading video`,n,`Error`,o])},n.onstalled=()=>{t(n,[`Loading video stalled, skipping`,n])}):t(n,["Error loading video, `src` is empty",n])}let S=`select`,C=i.querySelectorAll(S),w=x.querySelectorAll(S);for(let e=0;e<C.length;e++)w[e].value=C[e].value;if(!g){let e=document.querySelectorAll(`style, link[rel~='stylesheet'], link[as='style']`);for(let n=0,r=e.length;n<r;++n){let r=e[n];if(r.tagName.toLowerCase()===`style`){let e=x.createElement(r.tagName),t=r.sheet;if(t){let i=``;try{let e=t.cssRules.length;for(let n=0;n<e;++n)typeof t.cssRules[n].cssText==`string`&&(i+=`${t.cssRules[n].cssText}\r\n`)}catch(e){o({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",r,`Original error: ${c(e).message}`],level:`warning`})}e.setAttribute(`id`,`react-to-print-${n}`),v&&e.setAttribute(`nonce`,v),e.appendChild(x.createTextNode(i)),x.head.appendChild(e)}}else if(r.getAttribute(`href`))if(r.hasAttribute(`disabled`))o({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",r],level:`warning`}),t(r);else{let e=x.createElement(r.tagName);for(let t=0,n=r.attributes.length;t<n;++t){let n=r.attributes[t];n&&e.setAttribute(n.nodeName,n.nodeValue??``)}e.onload=()=>{t(e)},e.onerror=(n,r,i,a,o)=>{t(e,[`Failed to load`,e,`Error:`,o])},v&&e.setAttribute(`nonce`,v),x.head.appendChild(e)}else o({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",r],level:`warning`}),t(r)}}}f===0&&l(e,r)}function p({bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:i,ignoreGlobalStyles:u,nonce:d,onAfterPrint:p,onBeforePrint:m,onPrintError:h,pageStyle:g,preserveAfterPrint:_,print:v,suppressErrors:y}){return(0,a.useCallback)(a=>{function b(){let s={bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:i,ignoreGlobalStyles:u,nonce:d,onAfterPrint:p,onBeforePrint:m,onPrintError:h,pageStyle:g,preserveAfterPrint:_,print:v,suppressErrors:y},c=function(){let e=document.createElement(`iframe`);return e.width=`${document.documentElement.clientWidth}px`,e.height=`${document.documentElement.clientHeight}px`,e.style.position=`absolute`,e.style.top=`-${document.documentElement.clientHeight+100}px`,e.style.left=`-${document.documentElement.clientWidth+100}px`,e.id=`printWindow`,e.srcdoc=`<!DOCTYPE html>`,e}(),b=function(e,t){let{contentRef:n,fonts:r,ignoreGlobalStyles:i,suppressErrors:a}=t,s=function({contentRef:e,optionalContent:t,suppressErrors:n}){return t&&typeof t==`function`?(e&&o({level:`warning`,messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),t()):e?e.current:void o({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:n})}({contentRef:n,optionalContent:e,suppressErrors:a});if(!s)return;let c=s.cloneNode(!0),l=document.querySelectorAll(`link[rel~='stylesheet'], link[as='style']`),u=c.querySelectorAll(`img`),d=c.querySelectorAll(`video`),f=r?r.length:0;return{contentNode:s,clonedContentNode:c,clonedImgNodes:u,clonedVideoNodes:d,numResourcesToLoad:(i?0:l.length)+u.length+d.length+f,originalCanvasNodes:s.querySelectorAll(`canvas`)}}(a,s);if(!b)return void o({messages:[`There is nothing to print`],suppressErrors:y});(function(e,t,n,r){e.onload=()=>{f(e,t,n,r)},document.body.appendChild(e)})(c,function(e,t,n){let{suppressErrors:r}=e,i=[],a=[];return function(s,c){i.includes(s)?o({level:`debug`,messages:[`Tried to mark a resource that has already been handled`,s],suppressErrors:r}):(c?(o({messages:[`"react-to-print" was unable to load a resource but will continue attempting to print the page`,...c],suppressErrors:r}),a.push(s)):i.push(s),i.length+a.length===t&&l(n,e))}}(s,b.numResourcesToLoad,c),b,s)}s(_,!0),m?m().then(()=>{b()}).catch(e=>{h?.(`onBeforePrint`,c(e))}):b()},[e,t,n,r,i,u,d,p,m,h,g,_,v,y])}return i}()})}))();function tD({resume:e}){let t=(0,H.useRef)(null),n=(0,eD.useReactToPrint)({contentRef:t,documentTitle:`${e.basics.name}_简历`,pageStyle:`
      @page {
        size: A4;
        margin: 20mm;
      }
      @media print {
        html, body {
          height: initial !important;
          overflow: initial !important;
          -webkit-print-color-adjust: exact;
        }
        
        /* 强制分页设置 */
        .page-break-after {
          page-break-after: always;
        }
        
        /* 避免元素内部分页 */
        .no-break-inside {
          break-inside: avoid;
        }
        
        /* 确保新章节从新页开始 */
        .break-before {
          break-before: page;
        }

        /* 防止孤行 */
        p, h2, h3, h4 {
          orphans: 3;
          widows: 3;
        }
      }
    `});return(0,U.jsxs)(`div`,{className:`relative`,children:[(0,U.jsxs)(`button`,{onClick:()=>n(),className:`fixed bottom-6 right-6 bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group z-50`,title:`导出PDF`,children:[(0,U.jsx)(`svg`,{className:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,U.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4`})}),(0,U.jsx)(`span`,{className:`absolute right-full mr-2 bg-gray-800 text-white px-2 py-1 rounded text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200`,children:`导出PDF`})]}),(0,U.jsxs)(`div`,{ref:t,className:`space-y-8 px-6 mt-8 print:mt-8 print:px-8`,children:[(0,U.jsxs)(`div`,{className:`text-center border-b pb-6 print:pb-4 no-break-inside`,children:[(0,U.jsx)(`h2`,{className:`text-2xl font-bold`,children:e.basics.name}),(0,U.jsx)(`p`,{className:`text-xl text-gray-600 mt-2`,children:e.basics.title}),(0,U.jsxs)(`p`,{className:`text-sm text-gray-500 mt-2`,children:[`工作经验：`,e.basics.experience]}),(0,U.jsx)(`p`,{className:`text-gray-700 mt-4 leading-relaxed`,children:e.basics.summary})]}),(0,U.jsxs)(`div`,{className:`no-break-inside`,children:[(0,U.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,U.jsx)(`span`,{className:`bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,U.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,U.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 10V3L4 14h7v7l9-11h-7z`})})}),`专业技能`]}),(0,U.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:e.skills.map((e,t)=>(0,U.jsx)(`span`,{className:`px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm`,children:e},t))})]}),(0,U.jsxs)(`div`,{className:`break-before`,children:[(0,U.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,U.jsx)(`span`,{className:`bg-green-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,U.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,U.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z`})})}),`工作经历`]}),(0,U.jsx)(`div`,{className:`space-y-6`,children:e.experience.map((e,t)=>(0,U.jsxs)(`div`,{className:`relative pl-8 before:content-[''] before:absolute before:left-3 before:top-2 before:w-[2px] before:h-full before:bg-gray-200 no-break-inside`,children:[(0,U.jsx)(`div`,{className:`absolute left-0 top-1.5 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center`,children:(0,U.jsx)(`div`,{className:`w-3 h-3 bg-gray-400 rounded-full`})}),(0,U.jsx)(`h4`,{className:`font-semibold text-gray-800`,children:e.company}),(0,U.jsxs)(`p`,{className:`text-sm text-gray-600 mt-1`,children:[e.position,` | `,e.duration]}),(0,U.jsx)(`ul`,{className:`mt-2 space-y-1`,children:e.highlights.map((e,t)=>(0,U.jsxs)(`li`,{className:`text-gray-600 text-sm`,children:[`• `,e]},t))})]},t))})]}),(0,U.jsxs)(`div`,{className:`break-before`,children:[(0,U.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,U.jsx)(`span`,{className:`bg-purple-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,U.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,U.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2`})})}),`项目经历`]}),(0,U.jsx)(`div`,{className:`space-y-6`,children:e.projects.map((e,t)=>(0,U.jsxs)(`div`,{className:`bg-gray-50 rounded-lg p-4 no-break-inside`,children:[(0,U.jsx)(`h4`,{className:`font-semibold text-gray-800`,children:e.name}),(0,U.jsx)(`p`,{className:`text-gray-600 mt-2 text-sm`,children:e.description}),(0,U.jsxs)(`div`,{className:`mt-3`,children:[(0,U.jsx)(`p`,{className:`text-sm font-medium text-gray-700`,children:`主要成就：`}),(0,U.jsx)(`ul`,{className:`mt-1 space-y-1`,children:e.achievements.map((e,t)=>(0,U.jsxs)(`li`,{className:`text-gray-600 text-sm`,children:[`• `,e]},t))})]}),(0,U.jsx)(`div`,{className:`mt-3 flex flex-wrap gap-2`,children:e.technologies.map((e,t)=>(0,U.jsx)(`span`,{className:`px-2 py-1 bg-white text-gray-600 rounded text-xs border`,children:e},t))})]},t))})]})]})]})}var nD=n(((e,t)=>{(function(){var n,r=`4.17.21`,i=200,a=`Unsupported core-js use. Try https://npms.io/search?q=ponyfill.`,o=`Expected a function`,s="Invalid `variable` option passed into `_.template`",c=`__lodash_hash_undefined__`,l=500,u=`__lodash_placeholder__`,d=1,f=2,p=4,m=1,h=2,g=1,_=2,v=4,y=8,b=16,x=32,S=64,C=128,w=256,T=512,E=30,D=`...`,O=800,k=16,A=1,j=2,M=3,N=1/0,P=9007199254740991,F=17976931348623157e292,ee=NaN,I=4294967295,L=I-1,te=I>>>1,ne=[[`ary`,C],[`bind`,g],[`bindKey`,_],[`curry`,y],[`curryRight`,b],[`flip`,T],[`partial`,x],[`partialRight`,S],[`rearg`,w]],re=`[object Arguments]`,ie=`[object Array]`,ae=`[object AsyncFunction]`,oe=`[object Boolean]`,se=`[object Date]`,ce=`[object DOMException]`,le=`[object Error]`,ue=`[object Function]`,de=`[object GeneratorFunction]`,fe=`[object Map]`,pe=`[object Number]`,me=`[object Null]`,he=`[object Object]`,R=`[object Promise]`,ge=`[object Proxy]`,_e=`[object RegExp]`,ve=`[object Set]`,ye=`[object String]`,be=`[object Symbol]`,z=`[object Undefined]`,xe=`[object WeakMap]`,Se=`[object WeakSet]`,Ce=`[object ArrayBuffer]`,we=`[object DataView]`,Te=`[object Float32Array]`,Ee=`[object Float64Array]`,De=`[object Int8Array]`,Oe=`[object Int16Array]`,ke=`[object Int32Array]`,Ae=`[object Uint8Array]`,je=`[object Uint8ClampedArray]`,Me=`[object Uint16Array]`,Ne=`[object Uint32Array]`,Pe=/\b__p \+= '';/g,Fe=/\b(__p \+=) '' \+/g,Ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Le=/&(?:amp|lt|gt|quot|#39);/g,Re=/[&<>"']/g,ze=RegExp(Le.source),Be=RegExp(Re.source),Ve=/<%-([\s\S]+?)%>/g,He=/<%([\s\S]+?)%>/g,Ue=/<%=([\s\S]+?)%>/g,We=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/,Ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qe=/[\\^$.*+?()[\]{}|]/g,Je=RegExp(qe.source),Ye=/^\s+/,Xe=/\s/,Ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qe=/\{\n\/\* \[wrapped with (.+)\] \*/,$e=/,? & /,et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/[()=,{}\[\]\/\s]/,nt=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,at=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ct=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,dt=/['\n\r\u2028\u2029\\]/g,ft=`\\ud800-\\udfff`,pt=`\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff`,mt=`\\u2700-\\u27bf`,ht=`a-z\\xdf-\\xf6\\xf8-\\xff`,gt=`\\xac\\xb1\\xd7\\xf7`,_t=`\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf`,vt=`\\u2000-\\u206f`,yt=` \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000`,bt=`A-Z\\xc0-\\xd6\\xd8-\\xde`,xt=`\\ufe0e\\ufe0f`,St=gt+_t+vt+yt,Ct=`['’]`,wt=`[`+ft+`]`,Tt=`[`+St+`]`,V=`[`+pt+`]`,Et=`\\d+`,Dt=`[`+mt+`]`,Ot=`[`+ht+`]`,kt=`[^`+ft+St+Et+mt+ht+bt+`]`,At=`\\ud83c[\\udffb-\\udfff]`,jt=`(?:`+V+`|`+At+`)`,Mt=`[^`+ft+`]`,Nt=`(?:\\ud83c[\\udde6-\\uddff]){2}`,Pt=`[\\ud800-\\udbff][\\udc00-\\udfff]`,Ft=`[`+bt+`]`,It=`\\u200d`,Lt=`(?:`+Ot+`|`+kt+`)`,Rt=`(?:`+Ft+`|`+kt+`)`,zt=`(?:`+Ct+`(?:d|ll|m|re|s|t|ve))?`,Bt=`(?:`+Ct+`(?:D|LL|M|RE|S|T|VE))?`,Vt=jt+`?`,H=`[`+xt+`]?`,Ht=`(?:`+It+`(?:`+[Mt,Nt,Pt].join(`|`)+`)`+H+Vt+`)*`,Ut=`\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])`,Wt=`\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])`,Gt=H+Vt+Ht,Kt=`(?:`+[Dt,Nt,Pt].join(`|`)+`)`+Gt,U=`(?:`+[Mt+V+`?`,V,Nt,Pt,wt].join(`|`)+`)`,qt=RegExp(Ct,`g`),Jt=RegExp(V,`g`),Yt=RegExp(At+`(?=`+At+`)|`+U+Gt,`g`),Xt=RegExp([Ft+`?`+Ot+`+`+zt+`(?=`+[Tt,Ft,`$`].join(`|`)+`)`,Rt+`+`+Bt+`(?=`+[Tt,Ft+Lt,`$`].join(`|`)+`)`,Ft+`?`+Lt+`+`+zt,Ft+`+`+Bt,Wt,Ut,Et,Kt].join(`|`),`g`),Zt=RegExp(`[`+It+ft+pt+xt+`]`),Qt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=`Array.Buffer.DataView.Date.Error.Float32Array.Float64Array.Function.Int8Array.Int16Array.Int32Array.Map.Math.Object.Promise.RegExp.Set.String.Symbol.TypeError.Uint8Array.Uint8ClampedArray.Uint16Array.Uint32Array.WeakMap._.clearTimeout.isFinite.parseInt.setTimeout`.split(`.`),en=-1,tn={};tn[Te]=tn[Ee]=tn[De]=tn[Oe]=tn[ke]=tn[Ae]=tn[je]=tn[Me]=tn[Ne]=!0,tn[re]=tn[ie]=tn[Ce]=tn[oe]=tn[we]=tn[se]=tn[le]=tn[ue]=tn[fe]=tn[pe]=tn[he]=tn[_e]=tn[ve]=tn[ye]=tn[xe]=!1;var nn={};nn[re]=nn[ie]=nn[Ce]=nn[we]=nn[oe]=nn[se]=nn[Te]=nn[Ee]=nn[De]=nn[Oe]=nn[ke]=nn[fe]=nn[pe]=nn[he]=nn[_e]=nn[ve]=nn[ye]=nn[be]=nn[Ae]=nn[je]=nn[Me]=nn[Ne]=!0,nn[le]=nn[ue]=nn[xe]=!1;var rn={À:`A`,Á:`A`,Â:`A`,Ã:`A`,Ä:`A`,Å:`A`,à:`a`,á:`a`,â:`a`,ã:`a`,ä:`a`,å:`a`,Ç:`C`,ç:`c`,Ð:`D`,ð:`d`,È:`E`,É:`E`,Ê:`E`,Ë:`E`,è:`e`,é:`e`,ê:`e`,ë:`e`,Ì:`I`,Í:`I`,Î:`I`,Ï:`I`,ì:`i`,í:`i`,î:`i`,ï:`i`,Ñ:`N`,ñ:`n`,Ò:`O`,Ó:`O`,Ô:`O`,Õ:`O`,Ö:`O`,Ø:`O`,ò:`o`,ó:`o`,ô:`o`,õ:`o`,ö:`o`,ø:`o`,Ù:`U`,Ú:`U`,Û:`U`,Ü:`U`,ù:`u`,ú:`u`,û:`u`,ü:`u`,Ý:`Y`,ý:`y`,ÿ:`y`,Æ:`Ae`,æ:`ae`,Þ:`Th`,þ:`th`,ß:`ss`,Ā:`A`,Ă:`A`,Ą:`A`,ā:`a`,ă:`a`,ą:`a`,Ć:`C`,Ĉ:`C`,Ċ:`C`,Č:`C`,ć:`c`,ĉ:`c`,ċ:`c`,č:`c`,Ď:`D`,Đ:`D`,ď:`d`,đ:`d`,Ē:`E`,Ĕ:`E`,Ė:`E`,Ę:`E`,Ě:`E`,ē:`e`,ĕ:`e`,ė:`e`,ę:`e`,ě:`e`,Ĝ:`G`,Ğ:`G`,Ġ:`G`,Ģ:`G`,ĝ:`g`,ğ:`g`,ġ:`g`,ģ:`g`,Ĥ:`H`,Ħ:`H`,ĥ:`h`,ħ:`h`,Ĩ:`I`,Ī:`I`,Ĭ:`I`,Į:`I`,İ:`I`,ĩ:`i`,ī:`i`,ĭ:`i`,į:`i`,ı:`i`,Ĵ:`J`,ĵ:`j`,Ķ:`K`,ķ:`k`,ĸ:`k`,Ĺ:`L`,Ļ:`L`,Ľ:`L`,Ŀ:`L`,Ł:`L`,ĺ:`l`,ļ:`l`,ľ:`l`,ŀ:`l`,ł:`l`,Ń:`N`,Ņ:`N`,Ň:`N`,Ŋ:`N`,ń:`n`,ņ:`n`,ň:`n`,ŋ:`n`,Ō:`O`,Ŏ:`O`,Ő:`O`,ō:`o`,ŏ:`o`,ő:`o`,Ŕ:`R`,Ŗ:`R`,Ř:`R`,ŕ:`r`,ŗ:`r`,ř:`r`,Ś:`S`,Ŝ:`S`,Ş:`S`,Š:`S`,ś:`s`,ŝ:`s`,ş:`s`,š:`s`,Ţ:`T`,Ť:`T`,Ŧ:`T`,ţ:`t`,ť:`t`,ŧ:`t`,Ũ:`U`,Ū:`U`,Ŭ:`U`,Ů:`U`,Ű:`U`,Ų:`U`,ũ:`u`,ū:`u`,ŭ:`u`,ů:`u`,ű:`u`,ų:`u`,Ŵ:`W`,ŵ:`w`,Ŷ:`Y`,ŷ:`y`,Ÿ:`Y`,Ź:`Z`,Ż:`Z`,Ž:`Z`,ź:`z`,ż:`z`,ž:`z`,Ĳ:`IJ`,ĳ:`ij`,Œ:`Oe`,œ:`oe`,ŉ:`'n`,ſ:`s`},an={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`},on={"&amp;":`&`,"&lt;":`<`,"&gt;":`>`,"&quot;":`"`,"&#39;":`'`},sn={"\\":`\\`,"'":`'`,"\n":`n`,"\r":`r`,"\u2028":`u2028`,"\u2029":`u2029`},cn=parseFloat,ln=parseInt,un=typeof global==`object`&&global&&global.Object===Object&&global,dn=typeof self==`object`&&self&&self.Object===Object&&self,fn=un||dn||Function(`return this`)(),pn=typeof e==`object`&&e&&!e.nodeType&&e,mn=pn&&typeof t==`object`&&t&&!t.nodeType&&t,hn=mn&&mn.exports===pn,gn=hn&&un.process,_n=function(){try{return mn&&mn.require&&mn.require(`util`).types||gn&&gn.binding&&gn.binding(`util`)}catch{}}(),vn=_n&&_n.isArrayBuffer,yn=_n&&_n.isDate,bn=_n&&_n.isMap,xn=_n&&_n.isRegExp,Sn=_n&&_n.isSet,Cn=_n&&_n.isTypedArray;function wn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tn(e,t,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function En(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function Dn(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function On(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kn(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function An(e,t){return!!(e!=null&&e.length)&&Hn(e,t,0)>-1}function jn(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Mn(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nn(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Pn(e,t,n,r){var i=-1,a=e==null?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Fn(e,t,n,r){var i=e==null?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function In(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ln=Kn(`length`);function Rn(e){return e.split(``)}function zn(e){return e.match(et)||[]}function Bn(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Vn(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Hn(e,t,n){return t===t?vr(e,t,n):Vn(e,Wn,n)}function Un(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Wn(e){return e!==e}function Gn(e,t){var n=e==null?0:e.length;return n?Xn(e,t)/n:ee}function Kn(e){return function(t){return t==null?n:t[e]}}function qn(e){return function(t){return e==null?n:e[t]}}function Jn(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function Yn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Xn(e,t){for(var r,i=-1,a=e.length;++i<a;){var o=t(e[i]);o!==n&&(r=r===n?o:r+o)}return r}function Zn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Qn(e,t){return Mn(t,function(t){return[t,e[t]]})}function $n(e){return e&&e.slice(0,Sr(e)+1).replace(Ye,``)}function er(e){return function(t){return e(t)}}function tr(e,t){return Mn(t,function(t){return e[t]})}function nr(e,t){return e.has(t)}function rr(e,t){for(var n=-1,r=e.length;++n<r&&Hn(t,e[n],0)>-1;);return n}function ir(e,t){for(var n=e.length;n--&&Hn(t,e[n],0)>-1;);return n}function ar(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var or=qn(rn),sr=qn(an);function cr(e){return`\\`+sn[e]}function lr(e,t){return e==null?n:e[t]}function ur(e){return Zt.test(e)}function dr(e){return Qt.test(e)}function fr(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function pr(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function mr(e,t){return function(n){return e(t(n))}}function hr(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];(o===t||o===u)&&(e[n]=u,a[i++]=n)}return a}function gr(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function _r(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function vr(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function yr(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function br(e){return ur(e)?wr(e):Ln(e)}function xr(e){return ur(e)?Tr(e):Rn(e)}function Sr(e){for(var t=e.length;t--&&Xe.test(e.charAt(t)););return t}var Cr=qn(on);function wr(e){for(var t=Yt.lastIndex=0;Yt.test(e);)++t;return t}function Tr(e){return e.match(Yt)||[]}function Er(e){return e.match(Xt)||[]}var Dr=(function e(t){t=t==null?fn:Dr.defaults(fn.Object(),t,Dr.pick(fn,$t));var Xe=t.Array,et=t.Date,ft=t.Error,pt=t.Function,mt=t.Math,ht=t.Object,gt=t.RegExp,_t=t.String,vt=t.TypeError,yt=Xe.prototype,bt=pt.prototype,xt=ht.prototype,St=t[`__core-js_shared__`],Ct=bt.toString,wt=xt.hasOwnProperty,Tt=0,V=function(){var e=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}(),Et=xt.toString,Dt=Ct.call(ht),Ot=fn._,kt=gt(`^`+Ct.call(wt).replace(qe,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`),At=hn?t.Buffer:n,jt=t.Symbol,Mt=t.Uint8Array,Nt=At?At.allocUnsafe:n,Pt=mr(ht.getPrototypeOf,ht),Ft=ht.create,It=xt.propertyIsEnumerable,Lt=yt.splice,Rt=jt?jt.isConcatSpreadable:n,zt=jt?jt.iterator:n,Bt=jt?jt.toStringTag:n,Vt=function(){try{var e=ts(ht,`defineProperty`);return e({},``,{}),e}catch{}}(),H=t.clearTimeout!==fn.clearTimeout&&t.clearTimeout,Ht=et&&et.now!==fn.Date.now&&et.now,Ut=t.setTimeout!==fn.setTimeout&&t.setTimeout,Wt=mt.ceil,Gt=mt.floor,Kt=ht.getOwnPropertySymbols,U=At?At.isBuffer:n,Yt=t.isFinite,Xt=yt.join,Zt=mr(ht.keys,ht),Qt=mt.max,rn=mt.min,an=et.now,on=t.parseInt,sn=mt.random,un=yt.reverse,dn=ts(t,`DataView`),pn=ts(t,`Map`),mn=ts(t,`Promise`),gn=ts(t,`Set`),_n=ts(t,`WeakMap`),Ln=ts(ht,`create`),Rn=_n&&new _n,qn={},vr=Bs(dn),wr=Bs(pn),Tr=Bs(mn),Or=Bs(gn),kr=Bs(_n),Ar=jt?jt.prototype:n,jr=Ar?Ar.valueOf:n,Mr=Ar?Ar.toString:n;function W(e){if(ju(e)&&!mu(e)&&!(e instanceof Ir)){if(e instanceof Fr)return e;if(wt.call(e,`__wrapped__`))return Hs(e)}return new Fr(e)}var Nr=function(){function e(){}return function(t){if(!Au(t))return{};if(Ft)return Ft(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Pr(){}function Fr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}W.templateSettings={escape:Ve,evaluate:He,interpolate:Ue,variable:``,imports:{_:W}},W.prototype=Pr.prototype,W.prototype.constructor=W,Fr.prototype=Nr(Pr.prototype),Fr.prototype.constructor=Fr;function Ir(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=I,this.__views__=[]}function Lr(){var e=new Ir(this.__wrapped__);return e.__actions__=po(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=po(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=po(this.__views__),e}function Rr(){if(this.__filtered__){var e=new Ir(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function zr(){var e=this.__wrapped__.value(),t=this.__dir__,n=mu(e),r=t<0,i=n?e.length:0,a=os(0,i,this.__views__),o=a.start,s=a.end,c=s-o,l=r?s:o-1,u=this.__iteratees__,d=u.length,f=0,p=rn(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return qa(e,this.__actions__);var m=[];outer:for(;c--&&f<p;){l+=t;for(var h=-1,g=e[l];++h<d;){var _=u[h],v=_.iteratee,y=_.type,b=v(g);if(y==j)g=b;else if(!b){if(y==A)continue outer;break outer}}m[f++]=g}return m}Ir.prototype=Nr(Pr.prototype),Ir.prototype.constructor=Ir;function Br(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vr(){this.__data__=Ln?Ln(null):{},this.size=0}function Hr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Ur(e){var t=this.__data__;if(Ln){var r=t[e];return r===c?n:r}return wt.call(t,e)?t[e]:n}function Wr(e){var t=this.__data__;return Ln?t[e]!==n:wt.call(t,e)}function Gr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ln&&t===n?c:t,this}Br.prototype.clear=Vr,Br.prototype.delete=Hr,Br.prototype.get=Ur,Br.prototype.has=Wr,Br.prototype.set=Gr;function Kr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qr(){this.__data__=[],this.size=0}function Jr(e){var t=this.__data__,n=yi(t,e);return n<0?!1:(n==t.length-1?t.pop():Lt.call(t,n,1),--this.size,!0)}function Yr(e){var t=this.__data__,r=yi(t,e);return r<0?n:t[r][1]}function Xr(e){return yi(this.__data__,e)>-1}function Zr(e,t){var n=this.__data__,r=yi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}Kr.prototype.clear=qr,Kr.prototype.delete=Jr,Kr.prototype.get=Yr,Kr.prototype.has=Xr,Kr.prototype.set=Zr;function Qr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $r(){this.size=0,this.__data__={hash:new Br,map:new(pn||Kr),string:new Br}}function ei(e){var t=$o(this,e).delete(e);return this.size-=t?1:0,t}function ti(e){return $o(this,e).get(e)}function ni(e){return $o(this,e).has(e)}function ri(e,t){var n=$o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}Qr.prototype.clear=$r,Qr.prototype.delete=ei,Qr.prototype.get=ti,Qr.prototype.has=ni,Qr.prototype.set=ri;function ii(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Qr;++t<n;)this.add(e[t])}function ai(e){return this.__data__.set(e,c),this}function oi(e){return this.__data__.has(e)}ii.prototype.add=ii.prototype.push=ai,ii.prototype.has=oi;function si(e){this.size=(this.__data__=new Kr(e)).size}function ci(){this.__data__=new Kr,this.size=0}function li(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ui(e){return this.__data__.get(e)}function di(e){return this.__data__.has(e)}function fi(e,t){var n=this.__data__;if(n instanceof Kr){var r=n.__data__;if(!pn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qr(r)}return n.set(e,t),this.size=n.size,this}si.prototype.clear=ci,si.prototype.delete=li,si.prototype.get=ui,si.prototype.has=di,si.prototype.set=fi;function pi(e,t){var n=mu(e),r=!n&&q(e),i=!n&&!r&&yu(e),a=!n&&!r&&!i&&Ku(e),o=n||r||i||a,s=o?Zn(e.length,_t):[],c=s.length;for(var l in e)(t||wt.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||ms(l,c)))&&s.push(l);return s}function mi(e){var t=e.length;return t?e[Ea(0,t-1)]:n}function hi(e,t){return Ls(po(e),Ti(t,0,e.length))}function gi(e){return Ls(po(e))}function _i(e,t,r){(r!==n&&!du(e[t],r)||r===n&&!(t in e))&&Ci(e,t,r)}function vi(e,t,r){var i=e[t];(!(wt.call(e,t)&&du(i,r))||r===n&&!(t in e))&&Ci(e,t,r)}function yi(e,t){for(var n=e.length;n--;)if(du(e[n][0],t))return n;return-1}function bi(e,t,n,r){return ji(e,function(e,i,a){t(r,e,n(e),a)}),r}function xi(e,t){return e&&mo(t,Od(t),e)}function Si(e,t){return e&&mo(t,kd(t),e)}function Ci(e,t,n){t==`__proto__`&&Vt?Vt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function wi(e,t){for(var r=-1,i=t.length,a=Xe(i),o=e==null;++r<i;)a[r]=o?n:Sd(e,t[r]);return a}function Ti(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Ei(e,t,r,i,a,o){var s,c=t&d,l=t&f,u=t&p;if(r&&(s=a?r(e,i,a,o):r(e)),s!==n)return s;if(!Au(e))return e;var m=mu(e);if(m){if(s=ls(e),!c)return po(e,s)}else{var h=as(e),g=h==ue||h==de;if(yu(e))return no(e,c);if(h==he||h==re||g&&!a){if(s=l||g?{}:us(e),!c)return l?go(e,Si(s,e)):ho(e,xi(s,e))}else{if(!nn[h])return a?e:{};s=ds(e,h,c)}}o||=new si;var _=o.get(e);if(_)return _;o.set(e,s),Uu(e)?e.forEach(function(n){s.add(Ei(n,t,r,n,e,o))}):Mu(e)&&e.forEach(function(n,i){s.set(i,Ei(n,t,r,i,e,o))});var v=m?n:(u?l?Yo:Jo:l?kd:Od)(e);return En(v||e,function(n,i){v&&(i=n,n=e[i]),vi(s,i,Ei(n,t,r,i,e,o))}),s}function Di(e){var t=Od(e);return function(n){return Oi(n,e,t)}}function Oi(e,t,r){var i=r.length;if(e==null)return!i;for(e=ht(e);i--;){var a=r[i],o=t[a],s=e[a];if(s===n&&!(a in e)||!o(s))return!1}return!0}function ki(e,t,r){if(typeof e!=`function`)throw new vt(o);return Ns(function(){e.apply(n,r)},t)}function Ai(e,t,n,r){var a=-1,o=An,s=!0,c=e.length,l=[],u=t.length;if(!c)return l;n&&(t=Mn(t,er(n))),r?(o=jn,s=!1):t.length>=i&&(o=nr,s=!1,t=new ii(t));outer:for(;++a<c;){var d=e[a],f=n==null?d:n(d);if(d=r||d!==0?d:0,s&&f===f){for(var p=u;p--;)if(t[p]===f)continue outer;l.push(d)}else o(t,f,r)||l.push(d)}return l}var ji=yo(Bi),Mi=yo(Vi,!0);function Ni(e,t){var n=!0;return ji(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function Pi(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(s!=null&&(c===n?s===s&&!Gu(s):r(s,c)))var c=s,l=o}return l}function Fi(e,t,r,i){var a=e.length;for(r=ed(r),r<0&&(r=-r>a?0:a+r),i=i===n||i>a?a:ed(i),i<0&&(i+=a),i=r>i?0:td(i);r<i;)e[r++]=t;return e}function Ii(e,t){var n=[];return ji(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Li(e,t,n,r,i){var a=-1,o=e.length;for(n||=ps,i||=[];++a<o;){var s=e[a];t>0&&n(s)?t>1?Li(s,t-1,n,r,i):Nn(i,s):r||(i[i.length]=s)}return i}var Ri=bo(),zi=bo(!0);function Bi(e,t){return e&&Ri(e,t,Od)}function Vi(e,t){return e&&zi(e,t,Od)}function Hi(e,t){return kn(t,function(t){return Du(e[t])})}function Ui(e,t){t=Qa(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[zs(t[r++])];return r&&r==i?e:n}function Wi(e,t,n){var r=t(e);return mu(e)?r:Nn(r,n(e))}function Gi(e){return e==null?e===n?z:me:Bt&&Bt in ht(e)?ns(e):Ds(e)}function Ki(e,t){return e>t}function qi(e,t){return e!=null&&wt.call(e,t)}function Ji(e,t){return e!=null&&t in ht(e)}function Yi(e,t,n){return e>=rn(t,n)&&e<Qt(t,n)}function Xi(e,t,r){for(var i=r?jn:An,a=e[0].length,o=e.length,s=o,c=Xe(o),l=1/0,u=[];s--;){var d=e[s];s&&t&&(d=Mn(d,er(t))),l=rn(d.length,l),c[s]=!r&&(t||a>=120&&d.length>=120)?new ii(s&&d):n}d=e[0];var f=-1,p=c[0];outer:for(;++f<a&&u.length<l;){var m=d[f],h=t?t(m):m;if(m=r||m!==0?m:0,!(p?nr(p,h):i(u,h,r))){for(s=o;--s;){var g=c[s];if(!(g?nr(g,h):i(e[s],h,r)))continue outer}p&&p.push(h),u.push(m)}}return u}function Zi(e,t,n,r){return Bi(e,function(e,i,a){t(r,n(e),i,a)}),r}function Qi(e,t,r){t=Qa(t,e),e=ks(e,t);var i=e==null?e:e[zs(pc(t))];return i==null?n:wn(i,e,r)}function $i(e){return ju(e)&&Gi(e)==re}function ea(e){return ju(e)&&Gi(e)==Ce}function ta(e){return ju(e)&&Gi(e)==se}function na(e,t,n,r,i){return e===t?!0:e==null||t==null||!ju(e)&&!ju(t)?e!==e&&t!==t:ra(e,t,n,r,na,i)}function ra(e,t,n,r,i,a){var o=mu(e),s=mu(t),c=o?ie:as(e),l=s?ie:as(t);c=c==re?he:c,l=l==re?he:l;var u=c==he,d=l==he,f=c==l;if(f&&yu(e)){if(!yu(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new si,o||Ku(e)?Wo(e,t,n,r,i,a):Go(e,t,c,n,r,i,a);if(!(n&m)){var p=u&&wt.call(e,`__wrapped__`),h=d&&wt.call(t,`__wrapped__`);if(p||h){var g=p?e.value():e,_=h?t.value():t;return a||=new si,i(g,_,n,r,a)}}return f?(a||=new si,Ko(e,t,n,r,i,a)):!1}function ia(e){return ju(e)&&as(e)==fe}function aa(e,t,r,i){var a=r.length,o=a,s=!i;if(e==null)return!o;for(e=ht(e);a--;){var c=r[a];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){c=r[a];var l=c[0],u=e[l],d=c[1];if(s&&c[2]){if(u===n&&!(l in e))return!1}else{var f=new si;if(i)var p=i(u,d,l,e,t,f);if(!(p===n?na(d,u,m|h,i,f):p))return!1}}return!0}function oa(e){return!Au(e)||ys(e)?!1:(Du(e)?kt:ot).test(Bs(e))}function sa(e){return ju(e)&&Gi(e)==_e}function ca(e){return ju(e)&&as(e)==ve}function la(e){return ju(e)&&ku(e.length)&&!!tn[Gi(e)]}function ua(e){return typeof e==`function`?e:e==null?Lf:typeof e==`object`?mu(e)?ga(e[0],e[1]):ha(e):Xf(e)}function da(e){if(!xs(e))return Zt(e);var t=[];for(var n in ht(e))wt.call(e,n)&&n!=`constructor`&&t.push(n);return t}function fa(e){if(!Au(e))return Es(e);var t=xs(e),n=[];for(var r in e)r==`constructor`&&(t||!wt.call(e,r))||n.push(r);return n}function pa(e,t){return e<t}function ma(e,t){var n=-1,r=gu(e)?Xe(e.length):[];return ji(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function ha(e){var t=es(e);return t.length==1&&t[0][2]?Cs(t[0][0],t[0][1]):function(n){return n===e||aa(n,e,t)}}function ga(e,t){return gs(e)&&Ss(t)?Cs(zs(e),t):function(r){var i=Sd(r,e);return i===n&&i===t?wd(r,e):na(t,i,m|h)}}function _a(e,t,r,i,a){e!==t&&Ri(t,function(o,s){if(a||=new si,Au(o))va(e,t,s,r,_a,i,a);else{var c=i?i(js(e,s),o,s+``,e,t,a):n;c===n&&(c=o),_i(e,s,c)}},kd)}function va(e,t,r,i,a,o,s){var c=js(e,r),l=js(t,r),u=s.get(l);if(u){_i(e,r,u);return}var d=o?o(c,l,r+``,e,t,s):n,f=d===n;if(f){var p=mu(l),m=!p&&yu(l),h=!p&&!m&&Ku(l);d=l,p||m||h?mu(c)?d=c:_u(c)?d=po(c):m?(f=!1,d=no(l,!0)):h?(f=!1,d=so(l,!0)):d=[]:Bu(l)||q(l)?(d=c,q(c)?d=rd(c):(!Au(c)||Du(c))&&(d=us(l))):f=!1}f&&(s.set(l,d),a(d,l,i,o,s),s.delete(l)),_i(e,r,d)}function ya(e,t){var r=e.length;if(r)return t+=t<0?r:0,ms(t,r)?e[t]:n}function ba(e,t,n){t=t.length?Mn(t,function(e){return mu(e)?function(t){return Ui(t,e.length===1?e[0]:e)}:e}):[Lf];var r=-1;return t=Mn(t,er(G())),Yn(ma(e,function(e,n,i){return{criteria:Mn(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return lo(e,t,n)})}function xa(e,t){return Sa(e,t,function(t,n){return wd(e,n)})}function Sa(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Ui(e,o);n(s,o)&&Ma(a,Qa(o,e),s)}return a}function Ca(e){return function(t){return Ui(t,e)}}function wa(e,t,n,r){var i=r?Un:Hn,a=-1,o=t.length,s=e;for(e===t&&(t=po(t)),n&&(s=Mn(e,er(n)));++a<o;)for(var c=0,l=t[a],u=n?n(l):l;(c=i(s,u,c,r))>-1;)s!==e&&Lt.call(s,c,1),Lt.call(e,c,1);return e}function Ta(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ms(i)?Lt.call(e,i,1):Wa(e,i)}}return e}function Ea(e,t){return e+Gt(sn()*(t-e+1))}function Da(e,t,n,r){for(var i=-1,a=Qt(Wt((t-e)/(n||1)),0),o=Xe(a);a--;)o[r?a:++i]=e,e+=n;return o}function Oa(e,t){var n=``;if(!e||t<1||t>P)return n;do t%2&&(n+=e),t=Gt(t/2),t&&(e+=e);while(t);return n}function ka(e,t){return Ps(Os(e,t,Lf),e+``)}function Aa(e){return mi(qd(e))}function ja(e,t){var n=qd(e);return Ls(n,Ti(t,0,n.length))}function Ma(e,t,r,i){if(!Au(e))return e;t=Qa(t,e);for(var a=-1,o=t.length,s=o-1,c=e;c!=null&&++a<o;){var l=zs(t[a]),u=r;if(l===`__proto__`||l===`constructor`||l===`prototype`)return e;if(a!=s){var d=c[l];u=i?i(d,l,c):n,u===n&&(u=Au(d)?d:ms(t[a+1])?[]:{})}vi(c,l,u),c=c[l]}return e}var Na=Rn?function(e,t){return Rn.set(e,t),e}:Lf,Pa=Vt?function(e,t){return Vt(e,`toString`,{configurable:!0,enumerable:!1,value:Nf(t),writable:!0})}:Lf;function Fa(e){return Ls(qd(e))}function Ia(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Xe(i);++r<i;)a[r]=e[r+t];return a}function La(e,t){var n;return ji(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Ra(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t==`number`&&t===t&&i<=te){for(;r<i;){var a=r+i>>>1,o=e[a];o!==null&&!Gu(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return za(e,t,Lf,n)}function za(e,t,r,i){var a=0,o=e==null?0:e.length;if(o===0)return 0;t=r(t);for(var s=t!==t,c=t===null,l=Gu(t),u=t===n;a<o;){var d=Gt((a+o)/2),f=r(e[d]),p=f!==n,m=f===null,h=f===f,g=Gu(f);if(s)var _=i||h;else _=u?h&&(i||p):c?h&&p&&(i||!m):l?h&&p&&!m&&(i||!g):m||g?!1:i?f<=t:f<t;_?a=d+1:o=d}return rn(o,L)}function Ba(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!du(s,c)){var c=s;a[i++]=o===0?0:o}}return a}function Va(e){return typeof e==`number`?e:Gu(e)?ee:+e}function Ha(e){if(typeof e==`string`)return e;if(mu(e))return Mn(e,Ha)+``;if(Gu(e))return Mr?Mr.call(e):``;var t=e+``;return t==`0`&&1/e==-N?`-0`:t}function Ua(e,t,n){var r=-1,a=An,o=e.length,s=!0,c=[],l=c;if(n)s=!1,a=jn;else if(o>=i){var u=t?null:Ro(e);if(u)return gr(u);s=!1,a=nr,l=new ii}else l=t?[]:c;outer:for(;++r<o;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue outer;t&&l.push(f),c.push(d)}else a(l,f,n)||(l!==c&&l.push(f),c.push(d))}return c}function Wa(e,t){return t=Qa(t,e),e=ks(e,t),e==null||delete e[zs(pc(t))]}function Ga(e,t,n,r){return Ma(e,t,n(Ui(e,t)),r)}function Ka(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Ia(e,r?0:a,r?a+1:i):Ia(e,r?a+1:0,r?i:a)}function qa(e,t){var n=e;return n instanceof Ir&&(n=n.value()),Pn(t,function(e,t){return t.func.apply(t.thisArg,Nn([e],t.args))},n)}function Ja(e,t,n){var r=e.length;if(r<2)return r?Ua(e[0]):[];for(var i=-1,a=Xe(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=Ai(a[i]||o,e[s],t,n));return Ua(Li(a,1),t,n)}function Ya(e,t,r){for(var i=-1,a=e.length,o=t.length,s={};++i<a;){var c=i<o?t[i]:n;r(s,e[i],c)}return s}function Xa(e){return _u(e)?e:[]}function Za(e){return typeof e==`function`?e:Lf}function Qa(e,t){return mu(e)?e:gs(e,t)?[e]:Rs(ad(e))}var $a=ka;function eo(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:Ia(e,t,r)}var to=H||function(e){return fn.clearTimeout(e)};function no(e,t){if(t)return e.slice();var n=e.length,r=Nt?Nt(n):new e.constructor(n);return e.copy(r),r}function ro(e){var t=new e.constructor(e.byteLength);return new Mt(t).set(new Mt(e)),t}function io(e,t){var n=t?ro(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ao(e){var t=new e.constructor(e.source,it.exec(e));return t.lastIndex=e.lastIndex,t}function oo(e){return jr?ht(jr.call(e)):{}}function so(e,t){var n=t?ro(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function co(e,t){if(e!==t){var r=e!==n,i=e===null,a=e===e,o=Gu(e),s=t!==n,c=t===null,l=t===t,u=Gu(t);if(!c&&!u&&!o&&e>t||o&&s&&l&&!c&&!u||i&&s&&l||!r&&l||!a)return 1;if(!i&&!o&&!u&&e<t||u&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!l)return-1}return 0}function lo(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var c=co(i[r],a[r]);if(c)return r>=s?c:c*(n[r]==`desc`?-1:1)}return e.index-t.index}function uo(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,c=t.length,l=Qt(a-o,0),u=Xe(c+l),d=!r;++s<c;)u[s]=t[s];for(;++i<o;)(d||i<a)&&(u[n[i]]=e[i]);for(;l--;)u[s++]=e[i++];return u}function fo(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,c=-1,l=t.length,u=Qt(a-s,0),d=Xe(u+l),f=!r;++i<u;)d[i]=e[i];for(var p=i;++c<l;)d[p+c]=t[c];for(;++o<s;)(f||i<a)&&(d[p+n[o]]=e[i++]);return d}function po(e,t){var n=-1,r=e.length;for(t||=Xe(r);++n<r;)t[n]=e[n];return t}function mo(e,t,r,i){var a=!r;r||={};for(var o=-1,s=t.length;++o<s;){var c=t[o],l=i?i(r[c],e[c],c,r,e):n;l===n&&(l=e[c]),a?Ci(r,c,l):vi(r,c,l)}return r}function ho(e,t){return mo(e,rs(e),t)}function go(e,t){return mo(e,is(e),t)}function _o(e,t){return function(n,r){var i=mu(n)?Tn:bi,a=t?t():{};return i(n,e,G(r,2),a)}}function vo(e){return ka(function(t,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;for(o=e.length>3&&typeof o==`function`?(a--,o):n,s&&hs(r[0],r[1],s)&&(o=a<3?n:o,a=1),t=ht(t);++i<a;){var c=r[i];c&&e(t,c,i,o)}return t})}function yo(e,t){return function(n,r){if(n==null)return n;if(!gu(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=ht(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function bo(e){return function(t,n,r){for(var i=-1,a=ht(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}function xo(e,t,n){var r=t&g,i=wo(e);function a(){return(this&&this!==fn&&this instanceof a?i:e).apply(r?n:this,arguments)}return a}function So(e){return function(t){t=ad(t);var r=ur(t)?xr(t):n,i=r?r[0]:t.charAt(0),a=r?eo(r,1).join(``):t.slice(1);return i[e]()+a}}function Co(e){return function(t){return Pn(Of(ef(t).replace(qt,``)),e,``)}}function wo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nr(e.prototype),r=e.apply(n,t);return Au(r)?r:n}}function To(e,t,r){var i=wo(e);function a(){for(var o=arguments.length,s=Xe(o),c=o,l=Qo(a);c--;)s[c]=arguments[c];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:hr(s,l);return o-=u.length,o<r?Io(e,t,Oo,a.placeholder,n,s,u,n,n,r-o):wn(this&&this!==fn&&this instanceof a?i:e,this,s)}return a}function Eo(e){return function(t,r,i){var a=ht(t);if(!gu(t)){var o=G(r,3);t=Od(t),r=function(e){return o(a[e],e,a)}}var s=e(t,r,i);return s>-1?a[o?t[s]:s]:n}}function Do(e){return qo(function(t){var r=t.length,i=r,a=Fr.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if(typeof s!=`function`)throw new vt(o);if(a&&!c&&Zo(s)==`wrapper`)var c=new Fr([],!0)}for(i=c?i:r;++i<r;){s=t[i];var l=Zo(s),u=l==`wrapper`?Xo(s):n;c=u&&vs(u[0])&&u[1]==(C|y|x|w)&&!u[4].length&&u[9]==1?c[Zo(u[0])].apply(c,u[3]):s.length==1&&vs(s)?c[l]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&e.length==1&&mu(n))return c.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}})}function Oo(e,t,r,i,a,o,s,c,l,u){var d=t&C,f=t&g,p=t&_,m=t&(y|b),h=t&T,v=p?n:wo(e);function x(){for(var n=arguments.length,g=Xe(n),_=n;_--;)g[_]=arguments[_];if(m)var y=Qo(x),b=ar(g,y);if(i&&(g=uo(g,i,a,m)),o&&(g=fo(g,o,s,m)),n-=b,m&&n<u){var S=hr(g,y);return Io(e,t,Oo,x.placeholder,r,g,S,c,l,u-n)}var C=f?r:this,w=p?C[e]:e;return n=g.length,c?g=As(g,c):h&&n>1&&g.reverse(),d&&l<n&&(g.length=l),this&&this!==fn&&this instanceof x&&(w=v||wo(w)),w.apply(C,g)}return x}function ko(e,t){return function(n,r){return Zi(n,e,t(r),{})}}function Ao(e,t){return function(r,i){var a;if(r===n&&i===n)return t;if(r!==n&&(a=r),i!==n){if(a===n)return i;typeof r==`string`||typeof i==`string`?(r=Ha(r),i=Ha(i)):(r=Va(r),i=Va(i)),a=e(r,i)}return a}}function jo(e){return qo(function(t){return t=Mn(t,er(G())),ka(function(n){var r=this;return e(t,function(e){return wn(e,r,n)})})})}function Mo(e,t){t=t===n?` `:Ha(t);var r=t.length;if(r<2)return r?Oa(t,e):t;var i=Oa(t,Wt(e/br(t)));return ur(t)?eo(xr(i),0,e).join(``):i.slice(0,e)}function No(e,t,n,r){var i=t&g,a=wo(e);function o(){for(var t=-1,s=arguments.length,c=-1,l=r.length,u=Xe(l+s),d=this&&this!==fn&&this instanceof o?a:e;++c<l;)u[c]=r[c];for(;s--;)u[c++]=arguments[++t];return wn(d,i?n:this,u)}return o}function Po(e){return function(t,r,i){return i&&typeof i!=`number`&&hs(t,r,i)&&(r=i=n),t=$u(t),r===n?(r=t,t=0):r=$u(r),i=i===n?t<r?1:-1:$u(i),Da(t,r,i,e)}}function Fo(e){return function(t,n){return typeof t==`string`&&typeof n==`string`||(t=nd(t),n=nd(n)),e(t,n)}}function Io(e,t,r,i,a,o,s,c,l,u){var d=t&y,f=d?s:n,p=d?n:s,m=d?o:n,h=d?n:o;t|=d?x:S,t&=~(d?S:x),t&v||(t&=~(g|_));var b=[e,t,a,m,f,h,p,c,l,u],C=r.apply(n,b);return vs(e)&&Ms(C,b),C.placeholder=i,Fs(C,e,t)}function Lo(e){var t=mt[e];return function(e,n){if(e=nd(e),n=n==null?0:rn(ed(n),292),n&&Yt(e)){var r=(ad(e)+`e`).split(`e`);return r=(ad(t(r[0]+`e`+(+r[1]+n)))+`e`).split(`e`),+(r[0]+`e`+(+r[1]-n))}return t(e)}}var Ro=gn&&1/gr(new gn([,-0]))[1]==N?function(e){return new gn(e)}:Gf;function zo(e){return function(t){var n=as(t);return n==fe?pr(t):n==ve?_r(t):Qn(t,e(t))}}function Bo(e,t,r,i,a,s,c,l){var u=t&_;if(!u&&typeof e!=`function`)throw new vt(o);var d=i?i.length:0;if(d||(t&=~(x|S),i=a=n),c=c===n?c:Qt(ed(c),0),l=l===n?l:ed(l),d-=a?a.length:0,t&S){var f=i,p=a;i=a=n}var m=u?n:Xo(e),h=[e,t,r,i,a,f,p,s,c,l];if(m&&Ts(h,m),e=h[0],t=h[1],r=h[2],i=h[3],a=h[4],l=h[9]=h[9]===n?u?0:e.length:Qt(h[9]-d,0),!l&&t&(y|b)&&(t&=~(y|b)),!t||t==g)var v=xo(e,t,r);else v=t==y||t==b?To(e,t,l):(t==x||t==(g|x))&&!a.length?No(e,t,r,i):Oo.apply(n,h);return Fs((m?Na:Ms)(v,h),e,t)}function Vo(e,t,r,i){return e===n||du(e,xt[r])&&!wt.call(i,r)?t:e}function Ho(e,t,r,i,a,o){return Au(e)&&Au(t)&&(o.set(t,e),_a(e,t,n,Ho,o),o.delete(t)),e}function Uo(e){return Bu(e)?n:e}function Wo(e,t,r,i,a,o){var s=r&m,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,g=r&h?new ii:n;for(o.set(e,t),o.set(t,e);++f<c;){var _=e[f],v=t[f];if(i)var y=s?i(v,_,f,t,e,o):i(_,v,f,e,t,o);if(y!==n){if(y)continue;p=!1;break}if(g){if(!In(t,function(e,t){if(!nr(g,t)&&(_===e||a(_,e,r,i,o)))return g.push(t)})){p=!1;break}}else if(!(_===v||a(_,v,r,i,o))){p=!1;break}}return o.delete(e),o.delete(t),p}function Go(e,t,n,r,i,a,o){switch(n){case we:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ce:return!(e.byteLength!=t.byteLength||!a(new Mt(e),new Mt(t)));case oe:case se:case pe:return du(+e,+t);case le:return e.name==t.name&&e.message==t.message;case _e:case ye:return e==t+``;case fe:var s=pr;case ve:var c=r&m;if(s||=gr,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=h,o.set(e,t);var u=Wo(s(e),s(t),r,i,a,o);return o.delete(e),u;case be:if(jr)return jr.call(e)==jr.call(t)}return!1}function Ko(e,t,r,i,a,o){var s=r&m,c=Jo(e),l=c.length;if(l!=Jo(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:wt.call(t,d)))return!1}var f=o.get(e),p=o.get(t);if(f&&p)return f==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var g=s;++u<l;){d=c[u];var _=e[d],v=t[d];if(i)var y=s?i(v,_,d,t,e,o):i(_,v,d,e,t,o);if(!(y===n?_===v||a(_,v,r,i,o):y)){h=!1;break}g||=d==`constructor`}if(h&&!g){var b=e.constructor,x=t.constructor;b!=x&&`constructor`in e&&`constructor`in t&&!(typeof b==`function`&&b instanceof b&&typeof x==`function`&&x instanceof x)&&(h=!1)}return o.delete(e),o.delete(t),h}function qo(e){return Ps(Os(e,n,nc),e+``)}function Jo(e){return Wi(e,Od,rs)}function Yo(e){return Wi(e,kd,is)}var Xo=Rn?function(e){return Rn.get(e)}:Gf;function Zo(e){for(var t=e.name+``,n=qn[t],r=wt.call(qn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(a==null||a==e)return i.name}return t}function Qo(e){return(wt.call(W,`placeholder`)?W:e).placeholder}function G(){var e=W.iteratee||Rf;return e=e===Rf?ua:e,arguments.length?e(arguments[0],arguments[1]):e}function $o(e,t){var n=e.__data__;return _s(t)?n[typeof t==`string`?`string`:`hash`]:n.map}function es(e){for(var t=Od(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ss(i)]}return t}function ts(e,t){var r=lr(e,t);return oa(r)?r:n}function ns(e){var t=wt.call(e,Bt),r=e[Bt];try{e[Bt]=n;var i=!0}catch{}var a=Et.call(e);return i&&(t?e[Bt]=r:delete e[Bt]),a}var rs=Kt?function(e){return e==null?[]:(e=ht(e),kn(Kt(e),function(t){return It.call(e,t)}))}:ep,is=Kt?function(e){for(var t=[];e;)Nn(t,rs(e)),e=Pt(e);return t}:ep,as=Gi;(dn&&as(new dn(new ArrayBuffer(1)))!=we||pn&&as(new pn)!=fe||mn&&as(mn.resolve())!=R||gn&&as(new gn)!=ve||_n&&as(new _n)!=xe)&&(as=function(e){var t=Gi(e),r=t==he?e.constructor:n,i=r?Bs(r):``;if(i)switch(i){case vr:return we;case wr:return fe;case Tr:return R;case Or:return ve;case kr:return xe}return t});function os(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case`drop`:e+=o;break;case`dropRight`:t-=o;break;case`take`:t=rn(t,e+o);break;case`takeRight`:e=Qt(e,t-o);break}}return{start:e,end:t}}function ss(e){var t=e.match(Qe);return t?t[1].split($e):[]}function cs(e,t,n){t=Qa(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=zs(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&ku(i)&&ms(o,i)&&(mu(e)||q(e)))}function ls(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&wt.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}function us(e){return typeof e.constructor==`function`&&!xs(e)?Nr(Pt(e)):{}}function ds(e,t,n){var r=e.constructor;switch(t){case Ce:return ro(e);case oe:case se:return new r(+e);case we:return io(e,n);case Te:case Ee:case De:case Oe:case ke:case Ae:case je:case Me:case Ne:return so(e,n);case fe:return new r;case pe:case ye:return new r(e);case _e:return ao(e);case ve:return new r;case be:return oo(e)}}function fs(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?`& `:``)+t[r],t=t.join(n>2?`, `:` `),e.replace(Ze,`{
/* [wrapped with `+t+`] */
`)}function ps(e){return mu(e)||q(e)||!!(Rt&&e&&e[Rt])}function ms(e,t){var n=typeof e;return t??=P,!!t&&(n==`number`||n!=`symbol`&&ct.test(e))&&e>-1&&e%1==0&&e<t}function hs(e,t,n){if(!Au(n))return!1;var r=typeof t;return(r==`number`?gu(n)&&ms(t,n.length):r==`string`&&t in n)?du(n[t],e):!1}function gs(e,t){if(mu(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||Gu(e)?!0:Ge.test(e)||!We.test(e)||t!=null&&e in ht(t)}function _s(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}function vs(e){var t=Zo(e),n=W[t];if(typeof n!=`function`||!(t in Ir.prototype))return!1;if(e===n)return!0;var r=Xo(n);return!!r&&e===r[0]}function ys(e){return!!V&&V in e}var bs=St?Du:tp;function xs(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||xt)}function Ss(e){return e===e&&!Au(e)}function Cs(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in ht(r))}}function ws(e){var t=Jl(e,function(e){return n.size===l&&n.clear(),e}),n=t.cache;return t}function Ts(e,t){var n=e[1],r=t[1],i=n|r,a=i<(g|_|C),o=r==C&&n==y||r==C&&n==w&&e[7].length<=t[8]||r==(C|w)&&t[7].length<=t[8]&&n==y;if(!(a||o))return e;r&g&&(e[2]=t[2],i|=n&g?0:v);var s=t[3];if(s){var c=e[3];e[3]=c?uo(c,s,t[4]):s,e[4]=c?hr(e[3],u):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?fo(c,s,t[6]):s,e[6]=c?hr(e[5],u):t[6]),s=t[7],s&&(e[7]=s),r&C&&(e[8]=e[8]==null?t[8]:rn(e[8],t[8])),e[9]??=t[9],e[0]=t[0],e[1]=i,e}function Es(e){var t=[];if(e!=null)for(var n in ht(e))t.push(n);return t}function Ds(e){return Et.call(e)}function Os(e,t,r){return t=Qt(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Qt(n.length-t,0),o=Xe(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Xe(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),wn(e,this,s)}}function ks(e,t){return t.length<2?e:Ui(e,Ia(t,0,-1))}function As(e,t){for(var r=e.length,i=rn(t.length,r),a=po(e);i--;){var o=t[i];e[i]=ms(o,r)?a[o]:n}return e}function js(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}var Ms=Is(Na),Ns=Ut||function(e,t){return fn.setTimeout(e,t)},Ps=Is(Pa);function Fs(e,t,n){var r=t+``;return Ps(e,fs(r,Vs(ss(r),n)))}function Is(e){var t=0,r=0;return function(){var i=an(),a=k-(i-r);if(r=i,a>0){if(++t>=O)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ls(e,t){var r=-1,i=e.length,a=i-1;for(t=t===n?i:t;++r<t;){var o=Ea(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}var Rs=ws(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(Ke,function(e,n,r,i){t.push(r?i.replace(nt,`$1`):n||e)}),t});function zs(e){if(typeof e==`string`||Gu(e))return e;var t=e+``;return t==`0`&&1/e==-N?`-0`:t}function Bs(e){if(e!=null){try{return Ct.call(e)}catch{}try{return e+``}catch{}}return``}function Vs(e,t){return En(ne,function(n){var r=`_.`+n[0];t&n[1]&&!An(e,r)&&e.push(r)}),e.sort()}function Hs(e){if(e instanceof Ir)return e.clone();var t=new Fr(e.__wrapped__,e.__chain__);return t.__actions__=po(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Us(e,t,r){t=(r?hs(e,t,r):t===n)?1:Qt(ed(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=Xe(Wt(i/t));a<i;)s[o++]=Ia(e,a,a+=t);return s}function Ws(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}function Gs(){var e=arguments.length;if(!e)return[];for(var t=Xe(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Nn(mu(n)?po(n):[n],Li(t,1))}var Ks=ka(function(e,t){return _u(e)?Ai(e,Li(t,1,_u,!0)):[]}),qs=ka(function(e,t){var r=pc(t);return _u(r)&&(r=n),_u(e)?Ai(e,Li(t,1,_u,!0),G(r,2)):[]}),Js=ka(function(e,t){var r=pc(t);return _u(r)&&(r=n),_u(e)?Ai(e,Li(t,1,_u,!0),n,r):[]});function Ys(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:ed(t),Ia(e,t<0?0:t,i)):[]}function Xs(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:ed(t),t=i-t,Ia(e,0,t<0?0:t)):[]}function Zs(e,t){return e&&e.length?Ka(e,G(t,3),!0,!0):[]}function Qs(e,t){return e&&e.length?Ka(e,G(t,3),!0):[]}function $s(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!=`number`&&hs(e,t,n)&&(n=0,r=i),Fi(e,t,n,r)):[]}function ec(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:ed(n);return i<0&&(i=Qt(r+i,0)),Vn(e,G(t,3),i)}function tc(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var a=i-1;return r!==n&&(a=ed(r),a=r<0?Qt(i+a,0):rn(a,i-1)),Vn(e,G(t,3),a,!0)}function nc(e){return e!=null&&e.length?Li(e,1):[]}function rc(e){return e!=null&&e.length?Li(e,N):[]}function ic(e,t){return e!=null&&e.length?(t=t===n?1:ed(t),Li(e,t)):[]}function ac(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function oc(e){return e&&e.length?e[0]:n}function sc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:ed(n);return i<0&&(i=Qt(r+i,0)),Hn(e,t,i)}function cc(e){return e!=null&&e.length?Ia(e,0,-1):[]}var lc=ka(function(e){var t=Mn(e,Xa);return t.length&&t[0]===e[0]?Xi(t):[]}),uc=ka(function(e){var t=pc(e),r=Mn(e,Xa);return t===pc(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Xi(r,G(t,2)):[]}),dc=ka(function(e){var t=pc(e),r=Mn(e,Xa);return t=typeof t==`function`?t:n,t&&r.pop(),r.length&&r[0]===e[0]?Xi(r,n,t):[]});function fc(e,t){return e==null?``:Xt.call(e,t)}function pc(e){var t=e==null?0:e.length;return t?e[t-1]:n}function mc(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var a=i;return r!==n&&(a=ed(r),a=a<0?Qt(i+a,0):rn(a,i-1)),t===t?yr(e,t,a):Vn(e,Wn,a,!0)}function hc(e,t){return e&&e.length?ya(e,ed(t)):n}var gc=ka(_c);function _c(e,t){return e&&e.length&&t&&t.length?wa(e,t):e}function vc(e,t,n){return e&&e.length&&t&&t.length?wa(e,t,G(n,2)):e}function yc(e,t,r){return e&&e.length&&t&&t.length?wa(e,t,n,r):e}var bc=qo(function(e,t){var n=e==null?0:e.length,r=wi(e,t);return Ta(e,Mn(t,function(e){return ms(e,n)?+e:e}).sort(co)),r});function xc(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],a=e.length;for(t=G(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ta(e,i),n}function Sc(e){return e==null?e:un.call(e)}function Cc(e,t,r){var i=e==null?0:e.length;return i?(r&&typeof r!=`number`&&hs(e,t,r)?(t=0,r=i):(t=t==null?0:ed(t),r=r===n?i:ed(r)),Ia(e,t,r)):[]}function wc(e,t){return Ra(e,t)}function Tc(e,t,n){return za(e,t,G(n,2))}function Ec(e,t){var n=e==null?0:e.length;if(n){var r=Ra(e,t);if(r<n&&du(e[r],t))return r}return-1}function Dc(e,t){return Ra(e,t,!0)}function Oc(e,t,n){return za(e,t,G(n,2),!0)}function kc(e,t){if(e!=null&&e.length){var n=Ra(e,t,!0)-1;if(du(e[n],t))return n}return-1}function Ac(e){return e&&e.length?Ba(e):[]}function jc(e,t){return e&&e.length?Ba(e,G(t,2)):[]}function Mc(e){var t=e==null?0:e.length;return t?Ia(e,1,t):[]}function Nc(e,t,r){return e&&e.length?(t=r||t===n?1:ed(t),Ia(e,0,t<0?0:t)):[]}function Pc(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:ed(t),t=i-t,Ia(e,t<0?0:t,i)):[]}function Fc(e,t){return e&&e.length?Ka(e,G(t,3),!1,!0):[]}function Ic(e,t){return e&&e.length?Ka(e,G(t,3)):[]}var Lc=ka(function(e){return Ua(Li(e,1,_u,!0))}),Rc=ka(function(e){var t=pc(e);return _u(t)&&(t=n),Ua(Li(e,1,_u,!0),G(t,2))}),zc=ka(function(e){var t=pc(e);return t=typeof t==`function`?t:n,Ua(Li(e,1,_u,!0),n,t)});function Bc(e){return e&&e.length?Ua(e):[]}function Vc(e,t){return e&&e.length?Ua(e,G(t,2)):[]}function Hc(e,t){return t=typeof t==`function`?t:n,e&&e.length?Ua(e,n,t):[]}function Uc(e){if(!(e&&e.length))return[];var t=0;return e=kn(e,function(e){if(_u(e))return t=Qt(e.length,t),!0}),Zn(t,function(t){return Mn(e,Kn(t))})}function Wc(e,t){if(!(e&&e.length))return[];var r=Uc(e);return t==null?r:Mn(r,function(e){return wn(t,n,e)})}var Gc=ka(function(e,t){return _u(e)?Ai(e,t):[]}),Kc=ka(function(e){return Ja(kn(e,_u))}),qc=ka(function(e){var t=pc(e);return _u(t)&&(t=n),Ja(kn(e,_u),G(t,2))}),Jc=ka(function(e){var t=pc(e);return t=typeof t==`function`?t:n,Ja(kn(e,_u),n,t)}),Yc=ka(Uc);function Xc(e,t){return Ya(e||[],t||[],vi)}function Zc(e,t){return Ya(e||[],t||[],Ma)}var Qc=ka(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r==`function`?(e.pop(),r):n,Wc(e,r)});function $c(e){var t=W(e);return t.__chain__=!0,t}function el(e,t){return t(e),e}function tl(e,t){return t(e)}var nl=qo(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,a=function(t){return wi(t,e)};return t>1||this.__actions__.length||!(i instanceof Ir)||!ms(r)?this.thru(a):(i=i.slice(r,+r+(t?1:0)),i.__actions__.push({func:tl,args:[a],thisArg:n}),new Fr(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e}))});function rl(){return $c(this)}function il(){return new Fr(this.value(),this.__chain__)}function al(){this.__values__===n&&(this.__values__=Qu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}}function ol(){return this}function sl(e){for(var t,r=this;r instanceof Pr;){var i=Hs(r);i.__index__=0,i.__values__=n,t?a.__wrapped__=i:t=i;var a=i;r=r.__wrapped__}return a.__wrapped__=e,t}function cl(){var e=this.__wrapped__;if(e instanceof Ir){var t=e;return this.__actions__.length&&(t=new Ir(this)),t=t.reverse(),t.__actions__.push({func:tl,args:[Sc],thisArg:n}),new Fr(t,this.__chain__)}return this.thru(Sc)}function ll(){return qa(this.__wrapped__,this.__actions__)}var ul=_o(function(e,t,n){wt.call(e,n)?++e[n]:Ci(e,n,1)});function dl(e,t,r){var i=mu(e)?On:Ni;return r&&hs(e,t,r)&&(t=n),i(e,G(t,3))}function fl(e,t){return(mu(e)?kn:Ii)(e,G(t,3))}var pl=Eo(ec),ml=Eo(tc);function hl(e,t){return Li(wl(e,t),1)}function gl(e,t){return Li(wl(e,t),N)}function _l(e,t,r){return r=r===n?1:ed(r),Li(wl(e,t),r)}function vl(e,t){return(mu(e)?En:ji)(e,G(t,3))}function yl(e,t){return(mu(e)?Dn:Mi)(e,G(t,3))}var bl=_o(function(e,t,n){wt.call(e,n)?e[n].push(t):Ci(e,n,[t])});function xl(e,t,n,r){e=gu(e)?e:qd(e),n=n&&!r?ed(n):0;var i=e.length;return n<0&&(n=Qt(i+n,0)),Wu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Hn(e,t,n)>-1}var Sl=ka(function(e,t,n){var r=-1,i=typeof t==`function`,a=gu(e)?Xe(e.length):[];return ji(e,function(e){a[++r]=i?wn(t,e,n):Qi(e,t,n)}),a}),Cl=_o(function(e,t,n){Ci(e,n,t)});function wl(e,t){return(mu(e)?Mn:ma)(e,G(t,3))}function Tl(e,t,r,i){return e==null?[]:(mu(t)||(t=t==null?[]:[t]),r=i?n:r,mu(r)||(r=r==null?[]:[r]),ba(e,t,r))}var El=_o(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Dl(e,t,n){var r=mu(e)?Pn:Jn,i=arguments.length<3;return r(e,G(t,4),n,i,ji)}function Ol(e,t,n){var r=mu(e)?Fn:Jn,i=arguments.length<3;return r(e,G(t,4),n,i,Mi)}function kl(e,t){return(mu(e)?kn:Ii)(e,Yl(G(t,3)))}function Al(e){return(mu(e)?mi:Aa)(e)}function jl(e,t,r){return t=(r?hs(e,t,r):t===n)?1:ed(t),(mu(e)?hi:ja)(e,t)}function Ml(e){return(mu(e)?gi:Fa)(e)}function Nl(e){if(e==null)return 0;if(gu(e))return Wu(e)?br(e):e.length;var t=as(e);return t==fe||t==ve?e.size:da(e).length}function Pl(e,t,r){var i=mu(e)?In:La;return r&&hs(e,t,r)&&(t=n),i(e,G(t,3))}var Fl=ka(function(e,t){if(e==null)return[];var n=t.length;return n>1&&hs(e,t[0],t[1])?t=[]:n>2&&hs(t[0],t[1],t[2])&&(t=[t[0]]),ba(e,Li(t,1),[])}),Il=Ht||function(){return fn.Date.now()};function Ll(e,t){if(typeof t!=`function`)throw new vt(o);return e=ed(e),function(){if(--e<1)return t.apply(this,arguments)}}function Rl(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Bo(e,C,n,n,n,n,t)}function zl(e,t){var r;if(typeof t!=`function`)throw new vt(o);return e=ed(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var Bl=ka(function(e,t,n){var r=g;if(n.length){var i=hr(n,Qo(Bl));r|=x}return Bo(e,r,t,n,i)}),Vl=ka(function(e,t,n){var r=g|_;if(n.length){var i=hr(n,Qo(Vl));r|=x}return Bo(t,r,e,n,i)});function Hl(e,t,r){t=r?n:t;var i=Bo(e,y,n,n,n,n,n,t);return i.placeholder=Hl.placeholder,i}function Ul(e,t,r){t=r?n:t;var i=Bo(e,b,n,n,n,n,n,t);return i.placeholder=Ul.placeholder,i}function Wl(e,t,r){var i,a,s,c,l,u,d=0,f=!1,p=!1,m=!0;if(typeof e!=`function`)throw new vt(o);t=nd(t)||0,Au(r)&&(f=!!r.leading,p=`maxWait`in r,s=p?Qt(nd(r.maxWait)||0,t):s,m=`trailing`in r?!!r.trailing:m);function h(t){var r=i,o=a;return i=a=n,d=t,c=e.apply(o,r),c}function g(e){return d=e,l=Ns(y,t),f?h(e):c}function _(e){var n=e-u,r=e-d,i=t-n;return p?rn(i,s-r):i}function v(e){var r=e-u,i=e-d;return u===n||r>=t||r<0||p&&i>=s}function y(){var e=Il();if(v(e))return b(e);l=Ns(y,_(e))}function b(e){return l=n,m&&i?h(e):(i=a=n,c)}function x(){l!==n&&to(l),d=0,i=u=a=l=n}function S(){return l===n?c:b(Il())}function C(){var e=Il(),r=v(e);if(i=arguments,a=this,u=e,r){if(l===n)return g(u);if(p)return to(l),l=Ns(y,t),h(u)}return l===n&&(l=Ns(y,t)),c}return C.cancel=x,C.flush=S,C}var Gl=ka(function(e,t){return ki(e,1,t)}),Kl=ka(function(e,t,n){return ki(e,nd(t)||0,n)});function ql(e){return Bo(e,T)}function Jl(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw new vt(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Jl.Cache||Qr),n}Jl.Cache=Qr;function Yl(e){if(typeof e!=`function`)throw new vt(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Xl(e){return zl(2,e)}var Zl=$a(function(e,t){t=t.length==1&&mu(t[0])?Mn(t[0],er(G())):Mn(Li(t,1),er(G()));var n=t.length;return ka(function(r){for(var i=-1,a=rn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return wn(e,this,r)})}),Ql=ka(function(e,t){return Bo(e,x,n,t,hr(t,Qo(Ql)))}),$l=ka(function(e,t){return Bo(e,S,n,t,hr(t,Qo($l)))}),eu=qo(function(e,t){return Bo(e,w,n,n,n,t)});function tu(e,t){if(typeof e!=`function`)throw new vt(o);return t=t===n?t:ed(t),ka(e,t)}function nu(e,t){if(typeof e!=`function`)throw new vt(o);return t=t==null?0:Qt(ed(t),0),ka(function(n){var r=n[t],i=eo(n,0,t);return r&&Nn(i,r),wn(e,this,i)})}function ru(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw new vt(o);return Au(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),Wl(e,t,{leading:r,maxWait:t,trailing:i})}function iu(e){return Rl(e,1)}function au(e,t){return Ql(Za(t),e)}function ou(){if(!arguments.length)return[];var e=arguments[0];return mu(e)?e:[e]}function su(e){return Ei(e,p)}function cu(e,t){return t=typeof t==`function`?t:n,Ei(e,p,t)}function lu(e){return Ei(e,d|p)}function uu(e,t){return t=typeof t==`function`?t:n,Ei(e,d|p,t)}function K(e,t){return t==null||Oi(e,t,Od(t))}function du(e,t){return e===t||e!==e&&t!==t}var fu=Fo(Ki),pu=Fo(function(e,t){return e>=t}),q=$i(function(){return arguments}())?$i:function(e){return ju(e)&&wt.call(e,`callee`)&&!It.call(e,`callee`)},mu=Xe.isArray,hu=vn?er(vn):ea;function gu(e){return e!=null&&ku(e.length)&&!Du(e)}function _u(e){return ju(e)&&gu(e)}function vu(e){return e===!0||e===!1||ju(e)&&Gi(e)==oe}var yu=U||tp,bu=yn?er(yn):ta;function xu(e){return ju(e)&&e.nodeType===1&&!Bu(e)}function Su(e){if(e==null)return!0;if(gu(e)&&(mu(e)||typeof e==`string`||typeof e.splice==`function`||yu(e)||Ku(e)||q(e)))return!e.length;var t=as(e);if(t==fe||t==ve)return!e.size;if(xs(e))return!da(e).length;for(var n in e)if(wt.call(e,n))return!1;return!0}function Cu(e,t){return na(e,t)}function wu(e,t,r){r=typeof r==`function`?r:n;var i=r?r(e,t):n;return i===n?na(e,t,n,r):!!i}function Tu(e){if(!ju(e))return!1;var t=Gi(e);return t==le||t==ce||typeof e.message==`string`&&typeof e.name==`string`&&!Bu(e)}function Eu(e){return typeof e==`number`&&Yt(e)}function Du(e){if(!Au(e))return!1;var t=Gi(e);return t==ue||t==de||t==ae||t==ge}function Ou(e){return typeof e==`number`&&e==ed(e)}function ku(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=P}function Au(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}function ju(e){return typeof e==`object`&&!!e}var Mu=bn?er(bn):ia;function Nu(e,t){return e===t||aa(e,t,es(t))}function Pu(e,t,r){return r=typeof r==`function`?r:n,aa(e,t,es(t),r)}function Fu(e){return zu(e)&&e!=+e}function Iu(e){if(bs(e))throw new ft(a);return oa(e)}function Lu(e){return e===null}function Ru(e){return e==null}function zu(e){return typeof e==`number`||ju(e)&&Gi(e)==pe}function Bu(e){if(!ju(e)||Gi(e)!=he)return!1;var t=Pt(e);if(t===null)return!0;var n=wt.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Ct.call(n)==Dt}var Vu=xn?er(xn):sa;function Hu(e){return Ou(e)&&e>=-P&&e<=P}var Uu=Sn?er(Sn):ca;function Wu(e){return typeof e==`string`||!mu(e)&&ju(e)&&Gi(e)==ye}function Gu(e){return typeof e==`symbol`||ju(e)&&Gi(e)==be}var Ku=Cn?er(Cn):la;function qu(e){return e===n}function Ju(e){return ju(e)&&as(e)==xe}function Yu(e){return ju(e)&&Gi(e)==Se}var Xu=Fo(pa),Zu=Fo(function(e,t){return e<=t});function Qu(e){if(!e)return[];if(gu(e))return Wu(e)?xr(e):po(e);if(zt&&e[zt])return fr(e[zt]());var t=as(e);return(t==fe?pr:t==ve?gr:qd)(e)}function $u(e){return e?(e=nd(e),e===N||e===-N?(e<0?-1:1)*F:e===e?e:0):e===0?e:0}function ed(e){var t=$u(e),n=t%1;return t===t?n?t-n:t:0}function td(e){return e?Ti(ed(e),0,I):0}function nd(e){if(typeof e==`number`)return e;if(Gu(e))return ee;if(Au(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=Au(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=$n(e);var n=B.test(e);return n||st.test(e)?ln(e.slice(2),n?2:8):at.test(e)?ee:+e}function rd(e){return mo(e,kd(e))}function id(e){return e?Ti(ed(e),-P,P):e===0?e:0}function ad(e){return e==null?``:Ha(e)}var od=vo(function(e,t){if(xs(t)||gu(t)){mo(t,Od(t),e);return}for(var n in t)wt.call(t,n)&&vi(e,n,t[n])}),sd=vo(function(e,t){mo(t,kd(t),e)}),cd=vo(function(e,t,n,r){mo(t,kd(t),e,r)}),ld=vo(function(e,t,n,r){mo(t,Od(t),e,r)}),ud=qo(wi);function dd(e,t){var n=Nr(e);return t==null?n:xi(n,t)}var fd=ka(function(e,t){e=ht(e);var r=-1,i=t.length,a=i>2?t[2]:n;for(a&&hs(t[0],t[1],a)&&(i=1);++r<i;)for(var o=t[r],s=kd(o),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===n||du(d,xt[u])&&!wt.call(e,u))&&(e[u]=o[u])}return e}),pd=ka(function(e){return e.push(n,Ho),wn(Nd,n,e)});function md(e,t){return Bn(e,G(t,3),Bi)}function hd(e,t){return Bn(e,G(t,3),Vi)}function gd(e,t){return e==null?e:Ri(e,G(t,3),kd)}function _d(e,t){return e==null?e:zi(e,G(t,3),kd)}function vd(e,t){return e&&Bi(e,G(t,3))}function yd(e,t){return e&&Vi(e,G(t,3))}function bd(e){return e==null?[]:Hi(e,Od(e))}function xd(e){return e==null?[]:Hi(e,kd(e))}function Sd(e,t,r){var i=e==null?n:Ui(e,t);return i===n?r:i}function Cd(e,t){return e!=null&&cs(e,t,qi)}function wd(e,t){return e!=null&&cs(e,t,Ji)}var Td=ko(function(e,t,n){t!=null&&typeof t.toString!=`function`&&(t=Et.call(t)),e[t]=n},Nf(Lf)),Ed=ko(function(e,t,n){t!=null&&typeof t.toString!=`function`&&(t=Et.call(t)),wt.call(e,t)?e[t].push(n):e[t]=[n]},G),Dd=ka(Qi);function Od(e){return gu(e)?pi(e):da(e)}function kd(e){return gu(e)?pi(e,!0):fa(e)}function Ad(e,t){var n={};return t=G(t,3),Bi(e,function(e,r,i){Ci(n,t(e,r,i),e)}),n}function jd(e,t){var n={};return t=G(t,3),Bi(e,function(e,r,i){Ci(n,r,t(e,r,i))}),n}var Md=vo(function(e,t,n){_a(e,t,n)}),Nd=vo(function(e,t,n,r){_a(e,t,n,r)}),Pd=qo(function(e,t){var n={};if(e==null)return n;var r=!1;t=Mn(t,function(t){return t=Qa(t,e),r||=t.length>1,t}),mo(e,Yo(e),n),r&&(n=Ei(n,d|f|p,Uo));for(var i=t.length;i--;)Wa(n,t[i]);return n});function Fd(e,t){return Ld(e,Yl(G(t)))}var Id=qo(function(e,t){return e==null?{}:xa(e,t)});function Ld(e,t){if(e==null)return{};var n=Mn(Yo(e),function(e){return[e]});return t=G(t),Sa(e,n,function(e,n){return t(e,n[0])})}function Rd(e,t,r){t=Qa(t,e);var i=-1,a=t.length;for(a||(a=1,e=n);++i<a;){var o=e==null?n:e[zs(t[i])];o===n&&(i=a,o=r),e=Du(o)?o.call(e):o}return e}function zd(e,t,n){return e==null?e:Ma(e,t,n)}function Bd(e,t,r,i){return i=typeof i==`function`?i:n,e==null?e:Ma(e,t,r,i)}var Vd=zo(Od),Hd=zo(kd);function Ud(e,t,n){var r=mu(e),i=r||yu(e)||Ku(e);if(t=G(t,4),n==null){var a=e&&e.constructor;n=i?r?new a:[]:Au(e)&&Du(a)?Nr(Pt(e)):{}}return(i?En:Bi)(e,function(e,r,i){return t(n,e,r,i)}),n}function Wd(e,t){return e==null?!0:Wa(e,t)}function Gd(e,t,n){return e==null?e:Ga(e,t,Za(n))}function Kd(e,t,r,i){return i=typeof i==`function`?i:n,e==null?e:Ga(e,t,Za(r),i)}function qd(e){return e==null?[]:tr(e,Od(e))}function Jd(e){return e==null?[]:tr(e,kd(e))}function Yd(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=nd(r),r=r===r?r:0),t!==n&&(t=nd(t),t=t===t?t:0),Ti(nd(e),t,r)}function Xd(e,t,r){return t=$u(t),r===n?(r=t,t=0):r=$u(r),e=nd(e),Yi(e,t,r)}function Zd(e,t,r){if(r&&typeof r!=`boolean`&&hs(e,t,r)&&(t=r=n),r===n&&(typeof t==`boolean`?(r=t,t=n):typeof e==`boolean`&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=$u(e),t===n?(t=e,e=0):t=$u(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var a=sn();return rn(e+a*(t-e+cn(`1e-`+((a+``).length-1))),t)}return Ea(e,t)}var Qd=Co(function(e,t,n){return t=t.toLowerCase(),e+(n?$d(t):t)});function $d(e){return Df(ad(e).toLowerCase())}function ef(e){return e=ad(e),e&&e.replace(lt,or).replace(Jt,``)}function tf(e,t,r){e=ad(e),t=Ha(t);var i=e.length;r=r===n?i:Ti(ed(r),0,i);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function nf(e){return e=ad(e),e&&Be.test(e)?e.replace(Re,sr):e}function rf(e){return e=ad(e),e&&Je.test(e)?e.replace(qe,`\\$&`):e}var af=Co(function(e,t,n){return e+(n?`-`:``)+t.toLowerCase()}),of=Co(function(e,t,n){return e+(n?` `:``)+t.toLowerCase()}),sf=So(`toLowerCase`);function cf(e,t,n){e=ad(e),t=ed(t);var r=t?br(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Mo(Gt(i),n)+e+Mo(Wt(i),n)}function lf(e,t,n){e=ad(e),t=ed(t);var r=t?br(e):0;return t&&r<t?e+Mo(t-r,n):e}function uf(e,t,n){e=ad(e),t=ed(t);var r=t?br(e):0;return t&&r<t?Mo(t-r,n)+e:e}function df(e,t,n){return n||t==null?t=0:t&&=+t,on(ad(e).replace(Ye,``),t||0)}function ff(e,t,r){return t=(r?hs(e,t,r):t===n)?1:ed(t),Oa(ad(e),t)}function pf(){var e=arguments,t=ad(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var mf=Co(function(e,t,n){return e+(n?`_`:``)+t.toLowerCase()});function hf(e,t,r){return r&&typeof r!=`number`&&hs(e,t,r)&&(t=r=n),r=r===n?I:r>>>0,r?(e=ad(e),e&&(typeof t==`string`||t!=null&&!Vu(t))&&(t=Ha(t),!t&&ur(e))?eo(xr(e),0,r):e.split(t,r)):[]}var gf=Co(function(e,t,n){return e+(n?` `:``)+Df(t)});function _f(e,t,n){return e=ad(e),n=n==null?0:Ti(ed(n),0,e.length),t=Ha(t),e.slice(n,n+t.length)==t}function vf(e,t,r){var i=W.templateSettings;r&&hs(e,t,r)&&(t=n),e=ad(e),t=cd({},t,i,Vo);var a=cd({},t.imports,i.imports,Vo),o=Od(a),c=tr(a,o),l,u,d=0,f=t.interpolate||ut,p=`__p += '`,m=gt((t.escape||ut).source+`|`+f.source+`|`+(f===Ue?rt:ut).source+`|`+(t.evaluate||ut).source+`|$`,`g`),h=`//# sourceURL=`+(wt.call(t,`sourceURL`)?(t.sourceURL+``).replace(/\s/g,` `):`lodash.templateSources[`+ ++en+`]`)+`
`;e.replace(m,function(t,n,r,i,a,o){return r||=i,p+=e.slice(d,o).replace(dt,cr),n&&(l=!0,p+=`' +
__e(`+n+`) +
'`),a&&(u=!0,p+=`';
`+a+`;
__p += '`),r&&(p+=`' +
((__t = (`+r+`)) == null ? '' : __t) +
'`),d=o+t.length,t}),p+=`';
`;var g=wt.call(t,`variable`)&&t.variable;if(!g)p=`with (obj) {
`+p+`
}
`;else if(tt.test(g))throw new ft(s);p=(u?p.replace(Pe,``):p).replace(Fe,`$1`).replace(Ie,`$1;`),p=`function(`+(g||`obj`)+`) {
`+(g?``:`obj || (obj = {});
`)+`var __t, __p = ''`+(l?`, __e = _.escape`:``)+(u?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+p+`return __p
}`;var _=kf(function(){return pt(o,h+`return `+p).apply(n,c)});if(_.source=p,Tu(_))throw _;return _}function yf(e){return ad(e).toLowerCase()}function bf(e){return ad(e).toUpperCase()}function xf(e,t,r){if(e=ad(e),e&&(r||t===n))return $n(e);if(!e||!(t=Ha(t)))return e;var i=xr(e),a=xr(t);return eo(i,rr(i,a),ir(i,a)+1).join(``)}function Sf(e,t,r){if(e=ad(e),e&&(r||t===n))return e.slice(0,Sr(e)+1);if(!e||!(t=Ha(t)))return e;var i=xr(e);return eo(i,0,ir(i,xr(t))+1).join(``)}function Cf(e,t,r){if(e=ad(e),e&&(r||t===n))return e.replace(Ye,``);if(!e||!(t=Ha(t)))return e;var i=xr(e);return eo(i,rr(i,xr(t))).join(``)}function wf(e,t){var r=E,i=D;if(Au(t)){var a=`separator`in t?t.separator:a;r=`length`in t?ed(t.length):r,i=`omission`in t?Ha(t.omission):i}e=ad(e);var o=e.length;if(ur(e)){var s=xr(e);o=s.length}if(r>=o)return e;var c=r-br(i);if(c<1)return i;var l=s?eo(s,0,c).join(``):e.slice(0,c);if(a===n)return l+i;if(s&&(c+=l.length-c),Vu(a)){if(e.slice(c).search(a)){var u,d=l;for(a.global||(a=gt(a.source,ad(it.exec(a))+`g`)),a.lastIndex=0;u=a.exec(d);)var f=u.index;l=l.slice(0,f===n?c:f)}}else if(e.indexOf(Ha(a),c)!=c){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+i}function Tf(e){return e=ad(e),e&&ze.test(e)?e.replace(Le,Cr):e}var Ef=Co(function(e,t,n){return e+(n?` `:``)+t.toUpperCase()}),Df=So(`toUpperCase`);function Of(e,t,r){return e=ad(e),t=r?n:t,t===n?dr(e)?Er(e):zn(e):e.match(t)||[]}var kf=ka(function(e,t){try{return wn(e,n,t)}catch(e){return Tu(e)?e:new ft(e)}}),Af=qo(function(e,t){return En(t,function(t){t=zs(t),Ci(e,t,Bl(e[t],e))}),e});function jf(e){var t=e==null?0:e.length,n=G();return e=t?Mn(e,function(e){if(typeof e[1]!=`function`)throw new vt(o);return[n(e[0]),e[1]]}):[],ka(function(n){for(var r=-1;++r<t;){var i=e[r];if(wn(i[0],this,n))return wn(i[1],this,n)}})}function Mf(e){return Di(Ei(e,d))}function Nf(e){return function(){return e}}function Pf(e,t){return e==null||e!==e?t:e}var Ff=Do(),If=Do(!0);function Lf(e){return e}function Rf(e){return ua(typeof e==`function`?e:Ei(e,d))}function zf(e){return ha(Ei(e,d))}function Bf(e,t){return ga(e,Ei(t,d))}var Vf=ka(function(e,t){return function(n){return Qi(n,e,t)}}),Hf=ka(function(e,t){return function(n){return Qi(e,n,t)}});function Uf(e,t,n){var r=Od(t),i=Hi(t,r);n==null&&!(Au(t)&&(i.length||!r.length))&&(n=t,t=e,e=this,i=Hi(t,Od(t)));var a=!(Au(n)&&`chain`in n)||!!n.chain,o=Du(e);return En(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=po(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nn([this.value()],arguments))})}),e}function Wf(){return fn._===this&&(fn._=Ot),this}function Gf(){}function Kf(e){return e=ed(e),ka(function(t){return ya(t,e)})}var qf=jo(Mn),Jf=jo(On),Yf=jo(In);function Xf(e){return gs(e)?Kn(zs(e)):Ca(e)}function Zf(e){return function(t){return e==null?n:Ui(e,t)}}var Qf=Po(),$f=Po(!0);function ep(){return[]}function tp(){return!1}function np(){return{}}function rp(){return``}function ip(){return!0}function ap(e,t){if(e=ed(e),e<1||e>P)return[];var n=I,r=rn(e,I);t=G(t),e-=I;for(var i=Zn(r,t);++n<e;)t(n);return i}function op(e){return mu(e)?Mn(e,zs):Gu(e)?[e]:po(Rs(ad(e)))}function sp(e){var t=++Tt;return ad(e)+t}var cp=Ao(function(e,t){return e+t},0),lp=Lo(`ceil`),up=Ao(function(e,t){return e/t},1),dp=Lo(`floor`);function fp(e){return e&&e.length?Pi(e,Lf,Ki):n}function pp(e,t){return e&&e.length?Pi(e,G(t,2),Ki):n}function mp(e){return Gn(e,Lf)}function hp(e,t){return Gn(e,G(t,2))}function gp(e){return e&&e.length?Pi(e,Lf,pa):n}function _p(e,t){return e&&e.length?Pi(e,G(t,2),pa):n}var vp=Ao(function(e,t){return e*t},1),yp=Lo(`round`),bp=Ao(function(e,t){return e-t},0);function xp(e){return e&&e.length?Xn(e,Lf):0}function Sp(e,t){return e&&e.length?Xn(e,G(t,2)):0}return W.after=Ll,W.ary=Rl,W.assign=od,W.assignIn=sd,W.assignInWith=cd,W.assignWith=ld,W.at=ud,W.before=zl,W.bind=Bl,W.bindAll=Af,W.bindKey=Vl,W.castArray=ou,W.chain=$c,W.chunk=Us,W.compact=Ws,W.concat=Gs,W.cond=jf,W.conforms=Mf,W.constant=Nf,W.countBy=ul,W.create=dd,W.curry=Hl,W.curryRight=Ul,W.debounce=Wl,W.defaults=fd,W.defaultsDeep=pd,W.defer=Gl,W.delay=Kl,W.difference=Ks,W.differenceBy=qs,W.differenceWith=Js,W.drop=Ys,W.dropRight=Xs,W.dropRightWhile=Zs,W.dropWhile=Qs,W.fill=$s,W.filter=fl,W.flatMap=hl,W.flatMapDeep=gl,W.flatMapDepth=_l,W.flatten=nc,W.flattenDeep=rc,W.flattenDepth=ic,W.flip=ql,W.flow=Ff,W.flowRight=If,W.fromPairs=ac,W.functions=bd,W.functionsIn=xd,W.groupBy=bl,W.initial=cc,W.intersection=lc,W.intersectionBy=uc,W.intersectionWith=dc,W.invert=Td,W.invertBy=Ed,W.invokeMap=Sl,W.iteratee=Rf,W.keyBy=Cl,W.keys=Od,W.keysIn=kd,W.map=wl,W.mapKeys=Ad,W.mapValues=jd,W.matches=zf,W.matchesProperty=Bf,W.memoize=Jl,W.merge=Md,W.mergeWith=Nd,W.method=Vf,W.methodOf=Hf,W.mixin=Uf,W.negate=Yl,W.nthArg=Kf,W.omit=Pd,W.omitBy=Fd,W.once=Xl,W.orderBy=Tl,W.over=qf,W.overArgs=Zl,W.overEvery=Jf,W.overSome=Yf,W.partial=Ql,W.partialRight=$l,W.partition=El,W.pick=Id,W.pickBy=Ld,W.property=Xf,W.propertyOf=Zf,W.pull=gc,W.pullAll=_c,W.pullAllBy=vc,W.pullAllWith=yc,W.pullAt=bc,W.range=Qf,W.rangeRight=$f,W.rearg=eu,W.reject=kl,W.remove=xc,W.rest=tu,W.reverse=Sc,W.sampleSize=jl,W.set=zd,W.setWith=Bd,W.shuffle=Ml,W.slice=Cc,W.sortBy=Fl,W.sortedUniq=Ac,W.sortedUniqBy=jc,W.split=hf,W.spread=nu,W.tail=Mc,W.take=Nc,W.takeRight=Pc,W.takeRightWhile=Fc,W.takeWhile=Ic,W.tap=el,W.throttle=ru,W.thru=tl,W.toArray=Qu,W.toPairs=Vd,W.toPairsIn=Hd,W.toPath=op,W.toPlainObject=rd,W.transform=Ud,W.unary=iu,W.union=Lc,W.unionBy=Rc,W.unionWith=zc,W.uniq=Bc,W.uniqBy=Vc,W.uniqWith=Hc,W.unset=Wd,W.unzip=Uc,W.unzipWith=Wc,W.update=Gd,W.updateWith=Kd,W.values=qd,W.valuesIn=Jd,W.without=Gc,W.words=Of,W.wrap=au,W.xor=Kc,W.xorBy=qc,W.xorWith=Jc,W.zip=Yc,W.zipObject=Xc,W.zipObjectDeep=Zc,W.zipWith=Qc,W.entries=Vd,W.entriesIn=Hd,W.extend=sd,W.extendWith=cd,Uf(W,W),W.add=cp,W.attempt=kf,W.camelCase=Qd,W.capitalize=$d,W.ceil=lp,W.clamp=Yd,W.clone=su,W.cloneDeep=lu,W.cloneDeepWith=uu,W.cloneWith=cu,W.conformsTo=K,W.deburr=ef,W.defaultTo=Pf,W.divide=up,W.endsWith=tf,W.eq=du,W.escape=nf,W.escapeRegExp=rf,W.every=dl,W.find=pl,W.findIndex=ec,W.findKey=md,W.findLast=ml,W.findLastIndex=tc,W.findLastKey=hd,W.floor=dp,W.forEach=vl,W.forEachRight=yl,W.forIn=gd,W.forInRight=_d,W.forOwn=vd,W.forOwnRight=yd,W.get=Sd,W.gt=fu,W.gte=pu,W.has=Cd,W.hasIn=wd,W.head=oc,W.identity=Lf,W.includes=xl,W.indexOf=sc,W.inRange=Xd,W.invoke=Dd,W.isArguments=q,W.isArray=mu,W.isArrayBuffer=hu,W.isArrayLike=gu,W.isArrayLikeObject=_u,W.isBoolean=vu,W.isBuffer=yu,W.isDate=bu,W.isElement=xu,W.isEmpty=Su,W.isEqual=Cu,W.isEqualWith=wu,W.isError=Tu,W.isFinite=Eu,W.isFunction=Du,W.isInteger=Ou,W.isLength=ku,W.isMap=Mu,W.isMatch=Nu,W.isMatchWith=Pu,W.isNaN=Fu,W.isNative=Iu,W.isNil=Ru,W.isNull=Lu,W.isNumber=zu,W.isObject=Au,W.isObjectLike=ju,W.isPlainObject=Bu,W.isRegExp=Vu,W.isSafeInteger=Hu,W.isSet=Uu,W.isString=Wu,W.isSymbol=Gu,W.isTypedArray=Ku,W.isUndefined=qu,W.isWeakMap=Ju,W.isWeakSet=Yu,W.join=fc,W.kebabCase=af,W.last=pc,W.lastIndexOf=mc,W.lowerCase=of,W.lowerFirst=sf,W.lt=Xu,W.lte=Zu,W.max=fp,W.maxBy=pp,W.mean=mp,W.meanBy=hp,W.min=gp,W.minBy=_p,W.stubArray=ep,W.stubFalse=tp,W.stubObject=np,W.stubString=rp,W.stubTrue=ip,W.multiply=vp,W.nth=hc,W.noConflict=Wf,W.noop=Gf,W.now=Il,W.pad=cf,W.padEnd=lf,W.padStart=uf,W.parseInt=df,W.random=Zd,W.reduce=Dl,W.reduceRight=Ol,W.repeat=ff,W.replace=pf,W.result=Rd,W.round=yp,W.runInContext=e,W.sample=Al,W.size=Nl,W.snakeCase=mf,W.some=Pl,W.sortedIndex=wc,W.sortedIndexBy=Tc,W.sortedIndexOf=Ec,W.sortedLastIndex=Dc,W.sortedLastIndexBy=Oc,W.sortedLastIndexOf=kc,W.startCase=gf,W.startsWith=_f,W.subtract=bp,W.sum=xp,W.sumBy=Sp,W.template=vf,W.times=ap,W.toFinite=$u,W.toInteger=ed,W.toLength=td,W.toLower=yf,W.toNumber=nd,W.toSafeInteger=id,W.toString=ad,W.toUpper=bf,W.trim=xf,W.trimEnd=Sf,W.trimStart=Cf,W.truncate=wf,W.unescape=Tf,W.uniqueId=sp,W.upperCase=Ef,W.upperFirst=Df,W.each=vl,W.eachRight=yl,W.first=oc,Uf(W,function(){var e={};return Bi(W,function(t,n){wt.call(W.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),W.VERSION=r,En([`bind`,`bindKey`,`curry`,`curryRight`,`partial`,`partialRight`],function(e){W[e].placeholder=W}),En([`drop`,`take`],function(e,t){Ir.prototype[e]=function(r){r=r===n?1:Qt(ed(r),0);var i=this.__filtered__&&!t?new Ir(this):this.clone();return i.__filtered__?i.__takeCount__=rn(r,i.__takeCount__):i.__views__.push({size:rn(r,I),type:e+(i.__dir__<0?`Right`:``)}),i},Ir.prototype[e+`Right`]=function(t){return this.reverse()[e](t).reverse()}}),En([`filter`,`map`,`takeWhile`],function(e,t){var n=t+1,r=n==A||n==M;Ir.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:G(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),En([`head`,`last`],function(e,t){var n=`take`+(t?`Right`:``);Ir.prototype[e]=function(){return this[n](1).value()[0]}}),En([`initial`,`tail`],function(e,t){var n=`drop`+(t?``:`Right`);Ir.prototype[e]=function(){return this.__filtered__?new Ir(this):this[n](1)}}),Ir.prototype.compact=function(){return this.filter(Lf)},Ir.prototype.find=function(e){return this.filter(e).head()},Ir.prototype.findLast=function(e){return this.reverse().find(e)},Ir.prototype.invokeMap=ka(function(e,t){return typeof e==`function`?new Ir(this):this.map(function(n){return Qi(n,e,t)})}),Ir.prototype.reject=function(e){return this.filter(Yl(G(e)))},Ir.prototype.slice=function(e,t){e=ed(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Ir(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=ed(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Ir.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ir.prototype.toArray=function(){return this.take(I)},Bi(Ir.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=W[i?`take`+(t==`last`?`Right`:``):t],o=i||/^find/.test(t);a&&(W.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof Ir,l=s[0],u=c||mu(t),d=function(e){var t=a.apply(W,Nn([e],s));return i&&f?t[0]:t};u&&r&&typeof l==`function`&&l.length!=1&&(c=u=!1);var f=this.__chain__,p=!!this.__actions__.length,m=o&&!f,h=c&&!p;if(!o&&u){t=h?t:new Ir(this);var g=e.apply(t,s);return g.__actions__.push({func:tl,args:[d],thisArg:n}),new Fr(g,f)}return m&&h?e.apply(this,s):(g=this.thru(d),m?i?g.value()[0]:g.value():g)})}),En([`pop`,`push`,`shift`,`sort`,`splice`,`unshift`],function(e){var t=yt[e],n=/^(?:push|sort|unshift)$/.test(e)?`tap`:`thru`,r=/^(?:pop|shift)$/.test(e);W.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(mu(i)?i:[],e)}return this[n](function(n){return t.apply(mu(n)?n:[],e)})}}),Bi(Ir.prototype,function(e,t){var n=W[t];if(n){var r=n.name+``;wt.call(qn,r)||(qn[r]=[]),qn[r].push({name:t,func:n})}}),qn[Oo(n,_).name]=[{name:`wrapper`,func:n}],Ir.prototype.clone=Lr,Ir.prototype.reverse=Rr,Ir.prototype.value=zr,W.prototype.at=nl,W.prototype.chain=rl,W.prototype.commit=il,W.prototype.next=al,W.prototype.plant=sl,W.prototype.reverse=cl,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=ll,W.prototype.first=W.prototype.head,zt&&(W.prototype[zt]=ol),W})();typeof define==`function`&&typeof define.amd==`object`&&define.amd?(fn._=Dr,define(function(){return Dr})):mn?((mn.exports=Dr)._=Dr,pn._=Dr):fn._=Dr}).call(e)}))();function rD({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)([]),[a,o]=(0,H.useState)(``),[s,c]=(0,H.useState)(!1),[l,u]=(0,H.useState)(null),{toast:d}=vp(),{containerRef:f,notifyNewItem:p,scrollToBottom:m,setIsSticky:h}=BE({threshold:80}),g=new Ww(`gpt-4o-mini`),_=(0,H.useRef)({messages:r});(0,H.useEffect)(()=>{(async()=>{try{let e=await t();e&&i(e.messages||[])}catch(e){console.error(`Error loading data:`,e),d({title:n(`resume.loadFailed`),description:n(`resume.loadFailedDesc`),variant:`destructive`})}})()},[t,n,d]),(0,H.useEffect)(()=>{let t={messages:r};if((0,nD.isEqual)(t,_.current))return;let n=setTimeout(async()=>{try{await e(t),_.current=t}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(n)},[r,e]),(0,H.useEffect)(()=>{p()},[r,p]);let v=async()=>{if(!a.trim()){d({title:n(`resume.error`),description:n(`resume.enterContent`),variant:`destructive`});return}c(!0);try{let e={type:`user`,content:a,timestamp:new Date().toISOString()};i(t=>[...t,e]),o(``),requestAnimationFrame(()=>m());let t=`你是一个专业的简历顾问。基于用户的输入："${a}"，
请提供专业的建议和帮助。如果收集到足够信息，请生成一份简历。

历史对话：
${r.map(e=>`${e.type}: ${e.content}`).join(`
`)}

请返回以下格式的JSON：
{
  "reply": "你的回复",
  "generateResume": true/false,
  "resumeData": {
    "basics": {
      "name": "姓名",
      "title": "职位",
      "experience": "经验年限",
      "summary": "个人总结"
    },
    "skills": ["技能1", "技能2"],
    "experience": [{
      "company": "公司名",
      "position": "职位",
      "duration": "时间段",
      "highlights": ["亮点1", "亮点2"]
    }],
    "projects": [{
      "name": "项目名",
      "description": "描述",
      "achievements": ["成就1", "成就2"],
      "technologies": ["技术1", "技术2"]
    }]
  }
}`,n=await g.generateJSONResponse(t),s=JSON.parse(n),c=[{type:`assistant`,content:s.reply,timestamp:new Date().toISOString()}];s.generateResume&&c.push({type:`resume-card`,content:`简历预览`,resumeData:s.resumeData,timestamp:new Date().toISOString()}),i(e=>[...e,...c])}catch(e){console.error(`Error:`,e),d({title:`生成失败`,description:`无法生成回应，请检查您的API密钥和网络连接。`,variant:`destructive`})}finally{c(!1)}};return(0,U.jsxs)(`div`,{className:`min-h-screen bg-gray-50 p-4`,children:[(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto`,children:[(0,U.jsx)(qv,{className:`mb-4`,children:(0,U.jsx)(Jv,{children:(0,U.jsx)(Yv,{children:`AI简历助手`})})}),(0,U.jsx)(`div`,{className:`space-y-4 mb-4 max-h-[60vh] overflow-auto`,ref:f,onMouseEnter:()=>h(!1),onMouseLeave:()=>h(!0),children:r.map(e=>{switch(e.type){case`resume-card`:return(0,U.jsxs)(qv,{className:`cursor-pointer hover:shadow-lg transition-shadow`,onClick:()=>u(e.resumeData||null),children:[(0,U.jsx)(Jv,{children:(0,U.jsx)(Yv,{children:`简历预览`})}),(0,U.jsx)(Zv,{children:(0,U.jsxs)(`div`,{className:`space-y-2`,children:[(0,U.jsx)(`h3`,{children:e.resumeData?.basics.title}),(0,U.jsx)(`p`,{children:e.resumeData?.basics.summary})]})})]},e.timestamp);default:return(0,U.jsx)(`div`,{className:`p-4 rounded-lg mb-4 ${e.type===`user`?`bg-blue-100 ml-12`:`bg-gray-100 mr-12`}`,children:e.content},e.timestamp)}})}),(0,U.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,U.jsx)(gg,{placeholder:`告诉我你想找什么样的工作，或分享你的经历...`,value:a,onChange:e=>o(e.target.value),onKeyDown:e=>e.key===`Enter`&&!e.shiftKey&&v()}),(0,U.jsx)(hu,{onClick:v,disabled:s,className:`shrink-0`,children:s?`生成中...`:`发送`})]})]}),(0,U.jsx)(GE,{open:!!l,onOpenChange:()=>u(null),children:(0,U.jsxs)(YE,{side:`right`,className:`w-[1000px] overflow-y-auto max-h-screen p-8`,children:[(0,U.jsx)(XE,{className:`mb-6`,children:(0,U.jsx)(QE,{children:`个人简历`})}),l&&(0,U.jsx)(tD,{resume:l})]})})]})}const iD=({uri:e})=>e?(0,U.jsx)(rD,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{messages:[],apiKey:``}}}}):(0,U.jsx)(`div`,{children:`uri is required`}),aD=Vg({initilize(e){e.componentService.register(`ai-resume`,iD),Kv.register({id:`ai-resume`,label:K(`apps.aiResume`),match:[`.airesume.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`ai-resume:${t}`,title:`${K(`apps.aiResume`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-resume`,props:{uri:t}}})}})}});var oD=`rovingFocusGroup.onEntryFocus`,sD={bubbles:!1,cancelable:!0},cD=`RovingFocusGroup`,[lD,uD,dD]=yp(cD),[fD,pD]=at(cD,[dD]),[mD,hD]=fD(cD),gD=H.forwardRef((e,t)=>(0,U.jsx)(lD.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,U.jsx)(lD.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,U.jsx)(_D,{...e,ref:t})})}));gD.displayName=cD;var _D=H.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=H.useRef(null),p=Ye(t,f),m=Xw(a),[h,g]=wt({prop:o,defaultProp:s??null,onChange:c,caller:cD}),[_,v]=H.useState(!1),y=ot(l),b=uD(n),x=H.useRef(!1),[S,C]=H.useState(0);return H.useEffect(()=>{let e=f.current;if(e)return e.addEventListener(oD,y),()=>e.removeEventListener(oD,y)},[y]),(0,U.jsx)(mD,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:h,onItemFocus:H.useCallback(e=>g(e),[g]),onItemShiftTab:H.useCallback(()=>v(!0),[]),onFocusableItemAdd:H.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:H.useCallback(()=>C(e=>e-1),[]),children:(0,U.jsx)(V.div,{tabIndex:_||S===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:`none`,...e.style},onMouseDown:B(e.onMouseDown,()=>{x.current=!0}),onFocus:B(e.onFocus,e=>{let t=!x.current;if(e.target===e.currentTarget&&t&&!_){let t=new CustomEvent(oD,sD);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=b().filter(e=>e.focusable);CD([e.find(e=>e.active),e.find(e=>e.id===h),...e].filter(Boolean).map(e=>e.ref.current),u)}}x.current=!1}),onBlur:B(e.onBlur,()=>v(!1))})})}),vD=`RovingFocusGroupItem`,yD=H.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...s}=e,c=Xe(),l=a||c,u=hD(vD,n),d=u.currentTabStopId===l,f=uD(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:h}=u;return H.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),(0,U.jsx)(lD.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:(0,U.jsx)(V.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:B(e.onMouseDown,e=>{r?u.onItemFocus(l):e.preventDefault()}),onFocus:B(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:B(e.onKeyDown,e=>{if(e.key===`Tab`&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=SD(e,u.orientation,u.dir);if(t!==void 0){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=f().filter(e=>e.focusable).map(e=>e.ref.current);if(t===`last`)n.reverse();else if(t===`prev`||t===`next`){t===`prev`&&n.reverse();let r=n.indexOf(e.currentTarget);n=u.loop?wD(n,r+1):n.slice(r+1)}setTimeout(()=>CD(n))}}),children:typeof o==`function`?o({isCurrentTabStop:d,hasTabStop:h!=null}):o})})});yD.displayName=vD;var bD={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`};function xD(e,t){return t===`rtl`?e===`ArrowLeft`?`ArrowRight`:e===`ArrowRight`?`ArrowLeft`:e:e}function SD(e,t,n){let r=xD(e.key,n);if(!(t===`vertical`&&[`ArrowLeft`,`ArrowRight`].includes(r))&&!(t===`horizontal`&&[`ArrowUp`,`ArrowDown`].includes(r)))return bD[r]}function CD(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function wD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var TD=gD,ED=yD,DD=[`Enter`,` `],OD=[`ArrowDown`,`PageUp`,`Home`],kD=[`ArrowUp`,`PageDown`,`End`],AD=[...OD,...kD],jD={ltr:[...DD,`ArrowRight`],rtl:[...DD,`ArrowLeft`]},MD={ltr:[`ArrowLeft`],rtl:[`ArrowRight`]},ND=`Menu`,[PD,FD,ID]=yp(ND),[LD,RD]=at(ND,[ID,ut,pD]),zD=ut(),BD=pD(),[VD,HD]=LD(ND),[UD,WD]=LD(ND),GD=e=>{let{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,s=zD(t),[c,l]=H.useState(null),u=H.useRef(!1),d=ot(a),f=Xw(i);return H.useEffect(()=>{let e=()=>{u.current=!0,document.addEventListener(`pointerdown`,t,{capture:!0,once:!0}),document.addEventListener(`pointermove`,t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener(`keydown`,e,{capture:!0}),()=>{document.removeEventListener(`keydown`,e,{capture:!0}),document.removeEventListener(`pointerdown`,t,{capture:!0}),document.removeEventListener(`pointermove`,t,{capture:!0})}},[]),(0,U.jsx)(Nt,{...s,children:(0,U.jsx)(VD,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:(0,U.jsx)(UD,{scope:t,onClose:H.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};GD.displayName=ND;var KD=`MenuAnchor`,qD=H.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=zD(n);return(0,U.jsx)(jt,{...i,...r,ref:t})});qD.displayName=KD;var JD=`MenuPortal`,[YD,XD]=LD(JD,{forceMount:void 0}),ZD=e=>{let{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=HD(JD,t);return(0,U.jsx)(YD,{scope:t,forceMount:n,children:(0,U.jsx)(Ct,{present:n||a.open,children:(0,U.jsx)(vt,{asChild:!0,container:i,children:r})})})};ZD.displayName=JD;var QD=`MenuContent`,[$D,eO]=LD(QD),tO=H.forwardRef((e,t)=>{let n=XD(QD,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=HD(QD,e.__scopeMenu),o=WD(QD,e.__scopeMenu);return(0,U.jsx)(PD.Provider,{scope:e.__scopeMenu,children:(0,U.jsx)(Ct,{present:r||a.open,children:(0,U.jsx)(PD.Slot,{scope:e.__scopeMenu,children:o.modal?(0,U.jsx)(nO,{...i,ref:t}):(0,U.jsx)(rO,{...i,ref:t})})})})}),nO=H.forwardRef((e,t)=>{let n=HD(QD,e.__scopeMenu),r=H.useRef(null),i=Ye(t,r);return H.useEffect(()=>{let e=r.current;if(e)return re(e)},[]),(0,U.jsx)(aO,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:B(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rO=H.forwardRef((e,t)=>{let n=HD(QD,e.__scopeMenu);return(0,U.jsx)(aO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),iO=lt(`MenuContent.ScrollLock`),aO=H.forwardRef((e,t)=>{let{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...h}=e,g=HD(QD,n),_=WD(QD,n),v=zD(n),y=BD(n),b=FD(n),[x,S]=H.useState(null),C=H.useRef(null),w=Ye(t,C,g.onContentChange),T=H.useRef(0),E=H.useRef(``),D=H.useRef(0),O=H.useRef(null),k=H.useRef(`right`),A=H.useRef(0),j=m?te:H.Fragment,M=m?{as:iO,allowPinchZoom:!0}:void 0,N=e=>{let t=E.current+e,n=b().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,a=UO(n.map(e=>e.textValue),t,i),o=n.find(e=>e.textValue===a)?.ref.current;(function e(t){E.current=t,window.clearTimeout(T.current),t!==``&&(T.current=window.setTimeout(()=>e(``),1e3))})(t),o&&setTimeout(()=>o.focus())};H.useEffect(()=>()=>window.clearTimeout(T.current),[]),_u();let P=H.useCallback(e=>k.current===O.current?.side&&GO(e,O.current?.area),[]);return(0,U.jsx)($D,{scope:n,searchRef:E,onItemEnter:H.useCallback(e=>{P(e)&&e.preventDefault()},[P]),onItemLeave:H.useCallback(e=>{P(e)||(C.current?.focus(),S(null))},[P]),onTriggerLeave:H.useCallback(e=>{P(e)&&e.preventDefault()},[P]),pointerGraceTimerRef:D,onPointerGraceIntentChange:H.useCallback(e=>{O.current=e},[]),children:(0,U.jsx)(j,{...M,children:(0,U.jsx)(Cu,{asChild:!0,trapped:i,onMountAutoFocus:B(a,e=>{e.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,U.jsx)(Qe,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:(0,U.jsx)(TD,{asChild:!0,...y,dir:_.dir,orientation:`vertical`,loop:r,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:B(c,e=>{_.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,U.jsx)(yt,{role:`menu`,"aria-orientation":`vertical`,"data-state":RO(g.open),"data-radix-menu-content":``,dir:_.dir,...v,...h,ref:w,style:{outline:`none`,...h.style},onKeyDown:B(h.onKeyDown,e=>{let t=e.target.closest(`[data-radix-menu-content]`)===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=e.key.length===1;t&&(e.key===`Tab`&&e.preventDefault(),!n&&r&&N(e.key));let i=C.current;if(e.target!==i||!AD.includes(e.key))return;e.preventDefault();let a=b().filter(e=>!e.disabled).map(e=>e.ref.current);kD.includes(e.key)&&a.reverse(),VO(a)}),onBlur:B(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),E.current=``)}),onPointerMove:B(e.onPointerMove,KO(e=>{let t=e.target,n=A.current!==e.clientX;e.currentTarget.contains(t)&&n&&(k.current=e.clientX>A.current?`right`:`left`,A.current=e.clientX)}))})})})})})})});tO.displayName=QD;var oO=`MenuGroup`,sO=H.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,U.jsx)(V.div,{role:`group`,...r,ref:t})});sO.displayName=oO;var cO=`MenuLabel`,lO=H.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,U.jsx)(V.div,{...r,ref:t})});lO.displayName=cO;var uO=`MenuItem`,dO=`menu.itemSelect`,fO=H.forwardRef((e,t)=>{let{disabled:n=!1,onSelect:r,...i}=e,a=H.useRef(null),o=WD(uO,e.__scopeMenu),s=eO(uO,e.__scopeMenu),c=Ye(t,a),l=H.useRef(!1),u=()=>{let e=a.current;if(!n&&e){let t=new CustomEvent(dO,{bubbles:!0,cancelable:!0});e.addEventListener(dO,e=>r?.(e),{once:!0}),Je(e,t),t.defaultPrevented?l.current=!1:o.onClose()}};return(0,U.jsx)(pO,{...i,ref:c,disabled:n,onClick:B(e.onClick,u),onPointerDown:t=>{e.onPointerDown?.(t),l.current=!0},onPointerUp:B(e.onPointerUp,e=>{l.current||e.currentTarget?.click()}),onKeyDown:B(e.onKeyDown,e=>{let t=s.searchRef.current!==``;n||t&&e.key===` `||DD.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});fO.displayName=uO;var pO=H.forwardRef((e,t)=>{let{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=eO(uO,n),s=BD(n),c=H.useRef(null),l=Ye(t,c),[u,d]=H.useState(!1),[f,p]=H.useState(``);return H.useEffect(()=>{let e=c.current;e&&p((e.textContent??``).trim())},[a.children]),(0,U.jsx)(PD.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:(0,U.jsx)(ED,{asChild:!0,...s,focusable:!r,children:(0,U.jsx)(V.div,{role:`menuitem`,"data-highlighted":u?``:void 0,"aria-disabled":r||void 0,"data-disabled":r?``:void 0,...a,ref:l,onPointerMove:B(e.onPointerMove,KO(e=>{r?o.onItemLeave(e):(o.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:B(e.onPointerLeave,KO(e=>o.onItemLeave(e))),onFocus:B(e.onFocus,()=>d(!0)),onBlur:B(e.onBlur,()=>d(!1))})})})}),mO=`MenuCheckboxItem`,hO=H.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:r,...i}=e;return(0,U.jsx)(CO,{scope:e.__scopeMenu,checked:n,children:(0,U.jsx)(fO,{role:`menuitemcheckbox`,"aria-checked":zO(n)?`mixed`:n,...i,ref:t,"data-state":BO(n),onSelect:B(i.onSelect,()=>r?.(zO(n)?!0:!n),{checkForDefaultPrevented:!1})})})});hO.displayName=mO;var gO=`MenuRadioGroup`,[_O,vO]=LD(gO,{value:void 0,onValueChange:()=>{}}),yO=H.forwardRef((e,t)=>{let{value:n,onValueChange:r,...i}=e,a=ot(r);return(0,U.jsx)(_O,{scope:e.__scopeMenu,value:n,onValueChange:a,children:(0,U.jsx)(sO,{...i,ref:t})})});yO.displayName=gO;var bO=`MenuRadioItem`,xO=H.forwardRef((e,t)=>{let{value:n,...r}=e,i=vO(bO,e.__scopeMenu),a=n===i.value;return(0,U.jsx)(CO,{scope:e.__scopeMenu,checked:a,children:(0,U.jsx)(fO,{role:`menuitemradio`,"aria-checked":a,...r,ref:t,"data-state":BO(a),onSelect:B(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});xO.displayName=bO;var SO=`MenuItemIndicator`,[CO,wO]=LD(SO,{checked:!1}),TO=H.forwardRef((e,t)=>{let{__scopeMenu:n,forceMount:r,...i}=e,a=wO(SO,n);return(0,U.jsx)(Ct,{present:r||zO(a.checked)||a.checked===!0,children:(0,U.jsx)(V.span,{...i,ref:t,"data-state":BO(a.checked)})})});TO.displayName=SO;var EO=`MenuSeparator`,DO=H.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,U.jsx)(V.div,{role:`separator`,"aria-orientation":`horizontal`,...r,ref:t})});DO.displayName=EO;var OO=`MenuArrow`,kO=H.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=zD(n);return(0,U.jsx)(Pt,{...i,...r,ref:t})});kO.displayName=OO;var AO=`MenuSub`,[jO,MO]=LD(AO),NO=e=>{let{__scopeMenu:t,children:n,open:r=!1,onOpenChange:i}=e,a=HD(AO,t),o=zD(t),[s,c]=H.useState(null),[l,u]=H.useState(null),d=ot(i);return H.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),(0,U.jsx)(Nt,{...o,children:(0,U.jsx)(VD,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:(0,U.jsx)(jO,{scope:t,contentId:Xe(),triggerId:Xe(),trigger:s,onTriggerChange:c,children:n})})})};NO.displayName=AO;var PO=`MenuSubTrigger`,FO=H.forwardRef((e,t)=>{let n=HD(PO,e.__scopeMenu),r=WD(PO,e.__scopeMenu),i=MO(PO,e.__scopeMenu),a=eO(PO,e.__scopeMenu),o=H.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=H.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return H.useEffect(()=>u,[u]),H.useEffect(()=>{let e=s.current;return()=>{window.clearTimeout(e),c(null)}},[s,c]),(0,U.jsx)(qD,{asChild:!0,...l,children:(0,U.jsx)(pO,{id:i.triggerId,"aria-haspopup":`menu`,"aria-expanded":n.open,"aria-controls":i.contentId,"data-state":RO(n.open),...e,ref:Ft(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),!(e.disabled||t.defaultPrevented)&&(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:B(e.onPointerMove,KO(t=>{a.onItemEnter(t),!t.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:B(e.onPointerLeave,KO(e=>{u();let t=n.content?.getBoundingClientRect();if(t){let r=n.content?.dataset.side,i=r===`right`,o=i?-5:5,c=t[i?`left`:`right`],l=t[i?`right`:`left`];a.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:c,y:t.bottom}],side:r}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:B(e.onKeyDown,t=>{let i=a.searchRef.current!==``;e.disabled||i&&t.key===` `||jD[r.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});FO.displayName=PO;var IO=`MenuSubContent`,LO=H.forwardRef((e,t)=>{let n=XD(QD,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=HD(QD,e.__scopeMenu),o=WD(QD,e.__scopeMenu),s=MO(IO,e.__scopeMenu),c=H.useRef(null),l=Ye(t,c);return(0,U.jsx)(PD.Provider,{scope:e.__scopeMenu,children:(0,U.jsx)(Ct,{present:r||a.open,children:(0,U.jsx)(PD.Slot,{scope:e.__scopeMenu,children:(0,U.jsx)(aO,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:l,align:`start`,side:o.dir===`rtl`?`left`:`right`,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:B(e.onFocusOutside,e=>{e.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:B(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:B(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),n=MD[o.dir].includes(e.key);t&&n&&(a.onOpenChange(!1),s.trigger?.focus(),e.preventDefault())})})})})})});LO.displayName=IO;function RO(e){return e?`open`:`closed`}function zO(e){return e===`indeterminate`}function BO(e){return zO(e)?`indeterminate`:e?`checked`:`unchecked`}function VO(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function HO(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function UO(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,a=HO(e,Math.max(i,0));r.length===1&&(a=a.filter(e=>e!==n));let o=a.find(e=>e.toLowerCase().startsWith(r.toLowerCase()));return o===n?void 0:o}function WO(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e],s=t[a],c=o.x,l=o.y,u=s.x,d=s.y;l>r!=d>r&&n<(u-c)*(r-l)/(d-l)+c&&(i=!i)}return i}function GO(e,t){return t?WO({x:e.clientX,y:e.clientY},t):!1}function KO(e){return t=>t.pointerType===`mouse`?e(t):void 0}var qO=GD,JO=qD,YO=ZD,XO=tO,ZO=sO,QO=lO,$O=fO,ek=hO,tk=yO,nk=xO,rk=TO,ik=DO,ak=kO,ok=FO,sk=LO,ck=`DropdownMenu`,[lk,uk]=at(ck,[RD]),dk=RD(),[fk,pk]=lk(ck),mk=e=>{let{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:s=!0}=e,c=dk(t),l=H.useRef(null),[u,d]=wt({prop:i,defaultProp:a??!1,onChange:o,caller:ck});return(0,U.jsx)(fk,{scope:t,triggerId:Xe(),triggerRef:l,contentId:Xe(),open:u,onOpenChange:d,onOpenToggle:H.useCallback(()=>d(e=>!e),[d]),modal:s,children:(0,U.jsx)(qO,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})};mk.displayName=ck;var hk=`DropdownMenuTrigger`,gk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=pk(hk,n),o=dk(n);return(0,U.jsx)(JO,{asChild:!0,...o,children:(0,U.jsx)(V.button,{type:`button`,id:a.triggerId,"aria-haspopup":`menu`,"aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?`open`:`closed`,"data-disabled":r?``:void 0,disabled:r,...i,ref:Ft(t,a.triggerRef),onPointerDown:B(e.onPointerDown,e=>{!r&&e.button===0&&e.ctrlKey===!1&&(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:B(e.onKeyDown,e=>{r||([`Enter`,` `].includes(e.key)&&a.onOpenToggle(),e.key===`ArrowDown`&&a.onOpenChange(!0),[`Enter`,` `,`ArrowDown`].includes(e.key)&&e.preventDefault())})})})});gk.displayName=hk;var _k=`DropdownMenuPortal`,vk=e=>{let{__scopeDropdownMenu:t,...n}=e,r=dk(t);return(0,U.jsx)(YO,{...r,...n})};vk.displayName=_k;var yk=`DropdownMenuContent`,bk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=pk(yk,n),a=dk(n),o=H.useRef(!1);return(0,U.jsx)(XO,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:B(e.onCloseAutoFocus,e=>{o.current||i.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:B(e.onInteractOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0,r=t.button===2||n;(!i.modal||r)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});bk.displayName=yk;var xk=`DropdownMenuGroup`,Sk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(ZO,{...i,...r,ref:t})});Sk.displayName=xk;var Ck=`DropdownMenuLabel`,wk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(QO,{...i,...r,ref:t})});wk.displayName=Ck;var Tk=`DropdownMenuItem`,Ek=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)($O,{...i,...r,ref:t})});Ek.displayName=Tk;var Dk=`DropdownMenuCheckboxItem`,Ok=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(ek,{...i,...r,ref:t})});Ok.displayName=Dk;var kk=`DropdownMenuRadioGroup`,Ak=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(tk,{...i,...r,ref:t})});Ak.displayName=kk;var jk=`DropdownMenuRadioItem`,Mk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(nk,{...i,...r,ref:t})});Mk.displayName=jk;var Nk=`DropdownMenuItemIndicator`,Pk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(rk,{...i,...r,ref:t})});Pk.displayName=Nk;var Fk=`DropdownMenuSeparator`,Ik=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(ik,{...i,...r,ref:t})});Ik.displayName=Fk;var Lk=`DropdownMenuArrow`,Rk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(ak,{...i,...r,ref:t})});Rk.displayName=Lk;var zk=`DropdownMenuSubTrigger`,Bk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(ok,{...i,...r,ref:t})});Bk.displayName=zk;var Vk=`DropdownMenuSubContent`,Hk=H.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=dk(n);return(0,U.jsx)(sk,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});Hk.displayName=Vk;var Uk=mk,Wk=gk,Gk=vk,Kk=bk,qk=wk,Jk=Ek,Yk=Ok,Xk=Mk,Zk=Pk,Qk=Ik,$k=Bk,eA=Hk,tA=Uk,nA=Wk,rA=H.forwardRef(({className:e,inset:t,children:n,...r},i)=>(0,U.jsxs)($k,{ref:i,className:q(`flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...r,children:[n,(0,U.jsx)(Yd,{className:`ml-auto`})]}));rA.displayName=$k.displayName;var iA=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(eA,{ref:n,className:q(`z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...t}));iA.displayName=eA.displayName;var aA=H.forwardRef(({className:e,sideOffset:t=4,onCloseAutoFocus:n,...r},i)=>(0,U.jsx)(Gk,{children:(0,U.jsx)(Kk,{ref:i,sideOffset:t,className:q(`z-40 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),onCloseAutoFocus:e=>{e.preventDefault(),n?.(e)},...r})}));aA.displayName=Kk.displayName;var oA=H.forwardRef(({className:e,inset:t,...n},r)=>(0,U.jsx)(Jk,{ref:r,className:q(`relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...n}));oA.displayName=Jk.displayName;var sA=H.forwardRef(({className:e,children:t,checked:n,...r},i)=>(0,U.jsxs)(Yk,{ref:i,className:q(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),checked:n,...r,children:[(0,U.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,U.jsx)(Zk,{children:(0,U.jsx)(Kd,{className:`h-4 w-4`})})}),t]}));sA.displayName=Yk.displayName;var cA=H.forwardRef(({className:e,children:t,...n},r)=>(0,U.jsxs)(Xk,{ref:r,className:q(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,U.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,U.jsx)(Zk,{children:(0,U.jsx)(ef,{className:`h-2 w-2 fill-current`})})}),t]}));cA.displayName=Xk.displayName;var lA=H.forwardRef(({className:e,inset:t,...n},r)=>(0,U.jsx)(qk,{ref:r,className:q(`px-2 py-1.5 text-sm font-semibold`,t&&`pl-8`,e),...n}));lA.displayName=qk.displayName;var uA=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(Qk,{ref:n,className:q(`-mx-1 my-1 h-px bg-muted`,e),...t}));uA.displayName=Qk.displayName;var dA=({className:e,...t})=>(0,U.jsx)(`span`,{className:q(`ml-auto text-xs tracking-widest opacity-60`,e),...t});dA.displayName=`DropdownMenuShortcut`;var fA=[`😊`,`😐`,`😢`,`😡`,`🤔`];function pA({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)([]),[a,o]=(0,H.useState)(``),[s,c]=(0,H.useState)(`😊`),[l,u]=(0,H.useState)(null),[d,f]=(0,H.useState)(!1);(0,H.useEffect)(()=>{(async()=>{try{if(t)i(await t());else{let e=localStorage.getItem(`thoughts`);e&&i(JSON.parse(e))}}catch(e){console.error(`Failed to load thoughts:`,e)}})()},[t]),(0,H.useEffect)(()=>{(async()=>{try{e?await e(r):localStorage.setItem(`thoughts`,JSON.stringify(r))}catch(e){console.error(`Failed to save thoughts:`,e)}})()},[r,e]),(0,H.useEffect)(()=>{let e=e=>{d&&!e.target.closest(`.mood-picker`)&&f(!1)};return document.addEventListener(`click`,e),()=>{document.removeEventListener(`click`,e)}},[d]);let p=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),m())},m=()=>{if(a.trim()){let e={id:Date.now(),content:a,timestamp:Date.now(),mood:s};i(t=>[e,...t]),o(``)}},h=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,U.jsx)(`div`,{className:`min-h-screen bg-gray-50`,children:(0,U.jsxs)(`div`,{className:`max-w-2xl mx-auto px-4 py-6`,children:[(0,U.jsx)(`div`,{className:`sticky top-4 z-10 mb-8`,children:(0,U.jsx)(`div`,{className:`flex space-x-2`,children:(0,U.jsxs)(`div`,{className:`flex-grow flex space-x-2 items-center border rounded-xl px-4 py-3 bg-white shadow-lg hover:shadow-xl transition-shadow duration-200 focus-within:shadow-xl focus-within:ring-1 focus-within:ring-blue-100`,children:[(0,U.jsxs)(`div`,{className:`relative mood-picker`,children:[(0,U.jsx)(hu,{variant:`ghost`,size:`sm`,className:`text-xl p-1.5 h-auto hover:bg-gray-50 rounded-full transition-colors`,onClick:()=>f(!d),children:s}),d&&(0,U.jsx)(`div`,{className:`absolute top-full left-0 mt-2 bg-white shadow-xl rounded-lg p-2 z-20 border border-gray-100`,children:(0,U.jsx)(`div`,{className:`flex gap-1.5`,children:fA.map(e=>(0,U.jsx)(hu,{variant:`ghost`,size:`sm`,className:`text-xl p-2 h-auto hover:bg-gray-50 rounded-full transition-colors`,onClick:()=>{c(e),f(!1)},children:e},e))})})]}),(0,U.jsx)(gg,{type:`text`,value:a,onChange:e=>o(e.target.value),onKeyPress:p,placeholder:n(`thoughts.placeholder`),className:`flex-grow border-0 focus:ring-0 focus-visible:ring-0 focus:outline-none px-0 placeholder-gray-400 text-base`,autoFocus:!0})]})})}),(0,U.jsxs)(`div`,{className:`space-y-4 pb-6`,children:[r.map(e=>(0,U.jsx)(qv,{className:`group bg-white border-transparent hover:border-gray-200 shadow-sm hover:shadow transition-all duration-200`,children:(0,U.jsx)(Zv,{className:`p-5`,children:(0,U.jsxs)(`div`,{className:`flex justify-between items-start gap-4`,children:[(0,U.jsxs)(`div`,{className:`flex-grow`,children:[(0,U.jsx)(`p`,{className:`whitespace-pre-wrap text-base leading-relaxed text-gray-700`,children:e.content}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mt-3 text-sm text-gray-500`,children:[(0,U.jsx)(`span`,{className:`text-lg`,children:e.mood}),(0,U.jsx)(`span`,{className:`text-gray-300`,children:`•`}),(0,U.jsx)(`time`,{dateTime:new Date(e.timestamp).toISOString(),children:new Date(e.timestamp).toLocaleString()})]})]}),(0,U.jsxs)(tA,{children:[(0,U.jsx)(nA,{asChild:!0,children:(0,U.jsx)(hu,{variant:`ghost`,size:`sm`,className:`opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-gray-400 hover:text-gray-600 -mr-2`,children:(0,U.jsx)(af,{className:`h-4 w-4`})})}),(0,U.jsx)(aA,{align:`end`,className:`w-[160px]`,children:(0,U.jsxs)(oA,{className:`text-red-600 focus:text-red-700 focus:bg-red-50`,onClick:()=>{window.confirm(n(`thoughts.confirmDelete`))&&h(e.id)},children:[(0,U.jsx)(Nf,{className:`h-4 w-4 mr-2`}),n(`thoughts.delete`)]})})]})]})})},e.id)),r.length===0&&(0,U.jsxs)(`div`,{className:`text-center text-gray-400 py-16 bg-white rounded-xl border border-dashed border-gray-200`,children:[(0,U.jsx)(`p`,{className:`text-lg`,children:n(`thoughts.noRecords`)}),(0,U.jsx)(`p`,{className:`text-sm mt-1`,children:n(`thoughts.startWriting`)})]})]})]})})}const mA=({uri:e})=>e?(0,U.jsx)(pA,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}}):(0,U.jsx)(`div`,{children:`uri is required`}),hA=Vg({initilize(e){e.componentService.register(`streaming-note`,mA),Kv.register({id:`streaming-note`,label:K(`apps.streamingNote`),match:[`.streaming.json`],priority:100,init:t=>{console.log(`open uri:`,t),e.layoutService.pageBox.addPage({id:`streaming-note:${t}`,title:`${K(`apps.streamingNote`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`streaming-note`,props:{uri:t}}})}})}});function gA({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)([]),[a,o]=(0,H.useState)(null),[s,c]=(0,H.useState)(!1);(0,H.useEffect)(()=>{(async()=>{try{let e;if(t)e=await t();else{let t=localStorage.getItem(`zenNotes`);e=t?JSON.parse(t):[]}if(i(e),e.length===0){let e={id:Date.now().toString(),content:``,createdAt:new Date().toISOString()};o(e),l(e)}else o(e[0])}catch(e){console.error(`Failed to load notes:`,e)}})()},[t]);let l=async t=>{let n=a?r.map(e=>e.id===t.id?t:e):[t,...r];i(n);try{e?await e(n):localStorage.setItem(`zenNotes`,JSON.stringify(n))}catch(e){console.error(`Failed to save notes:`,e)}},u=e=>{if(a){let t={...a,content:e.target.value};o(t),l(t)}},d=()=>{let e={id:Date.now().toString(),content:``,createdAt:new Date().toISOString()};o(e),l(e)},f=e=>{o(e)};return(0,U.jsxs)(`div`,{className:`min-h-screen flex flex-col transition-colors duration-300 ${s?`bg-gray-900 text-gray-100`:`bg-gray-100 text-gray-900`}`,children:[(0,U.jsxs)(`nav`,{className:`p-4 flex justify-between items-center border-b ${s?`border-gray-700`:`border-gray-200`}`,children:[(0,U.jsx)(`h1`,{className:`text-2xl font-semibold`,children:`Zen Notes`}),(0,U.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,U.jsxs)(sg,{children:[(0,U.jsx)(cg,{asChild:!0,children:(0,U.jsx)(hu,{variant:`outline`,size:`icon`,className:`${s?`border-gray-700 hover:bg-gray-800 hover:text-gray-100`:`hover:bg-gray-100`}`,children:(0,U.jsx)(Tf,{className:`h-4 w-4`})})}),(0,U.jsxs)(dg,{className:`${s?`bg-gray-800 text-gray-100 border-gray-700`:`bg-white`}`,children:[(0,U.jsx)(fg,{children:(0,U.jsx)(mg,{children:n(`zenNotes.createNewNote`)})}),(0,U.jsx)(`p`,{className:s?`text-gray-300`:`text-gray-600`,children:n(`zenNotes.confirmCreateNew`)}),(0,U.jsx)(hu,{onClick:d,className:s?`bg-blue-600 hover:bg-blue-700`:``,children:n(`common.ok`)})]})]}),(0,U.jsxs)(sg,{children:[(0,U.jsx)(cg,{asChild:!0,children:(0,U.jsx)(hu,{variant:`outline`,size:`icon`,className:`${s?`border-gray-700 hover:bg-gray-800 hover:text-gray-100`:`hover:bg-gray-100`}`,children:(0,U.jsx)(pf,{className:`h-4 w-4`})})}),(0,U.jsxs)(dg,{className:`${s?`bg-gray-800 text-gray-100 border-gray-700`:`bg-white`}`,children:[(0,U.jsx)(fg,{children:(0,U.jsx)(mg,{children:n(`zenNotes.historyNotes`)})}),(0,U.jsx)(`div`,{className:`max-h-96 overflow-y-auto`,children:r.map(e=>(0,U.jsxs)(`div`,{className:`p-2 cursor-pointer ${s?`hover:bg-gray-700`:`hover:bg-gray-100`}`,onClick:()=>f(e),children:[(0,U.jsx)(`p`,{className:`font-semibold`,children:new Date(e.createdAt).toLocaleString()}),(0,U.jsx)(`p`,{className:`truncate ${s?`text-gray-300`:`text-gray-600`}`,children:e.content})]},e.id))})]})]}),(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,onClick:()=>{c(!s)},"aria-label":s?`Switch to light mode`:`Switch to dark mode`,className:`${s?`hover:bg-gray-800 text-gray-100`:`hover:bg-gray-100`}`,children:s?(0,U.jsx)(Mf,{className:`h-4 w-4`}):(0,U.jsx)(xf,{className:`h-4 w-4`})})]})]}),(0,U.jsx)(`main`,{className:`flex-1 flex items-center justify-center p-4`,children:(0,U.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,U.jsx)(FE,{value:a?.content||``,onChange:u,placeholder:n(`zenNotes.placeholder`),className:`w-full h-64 p-4 rounded-lg resize-none focus:ring-2 focus:ring-opacity-50 transition-all duration-300 ${s?`bg-gray-800 text-gray-100 focus:ring-blue-500 border-gray-700 placeholder-gray-500`:`bg-white text-gray-900 focus:ring-blue-500 placeholder-gray-400`}`}),(0,U.jsx)(`p`,{className:`mt-2 text-sm ${s?`text-gray-400`:`text-gray-500`}`,children:n(`zenNotes.wordCount`,{count:a?.content.length||0})})]})})]})}const _A=({uri:e})=>e?(0,U.jsx)(gA,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return[]}}}):(0,U.jsx)(`div`,{children:`uri is required`}),vA=Vg({initilize(e){e.componentService.register(`zen-notes`,_A),Kv.register({id:`zen-notes`,label:K(`apps.zenNotes`),match:[`.zennotes.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`zen-notes:${t}`,title:`${K(`apps.zenNotes`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`zen-notes`,props:{uri:t}}})}})}});var yA=n((e=>{var t=c();function n(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var r=typeof Object.is==`function`?Object.is:n,i=t.useState,a=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),c=r[0].inst,l=r[1];return o(function(){c.value=n,c.getSnapshot=t,u(c)&&l({inst:c})},[e,n,t]),a(function(){return u(c)&&l({inst:c}),e(function(){u(c)&&l({inst:c})})},[e]),s(n),n}function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch{return!0}}function d(e,t){return t()}var f=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?d:l;e.useSyncExternalStore=t.useSyncExternalStore===void 0?f:t.useSyncExternalStore})),bA=n(((e,t)=>{t.exports=yA()}))();function xA(){return(0,bA.useSyncExternalStore)(SA,()=>!0,()=>!1)}function SA(){return()=>{}}var CA=`Avatar`,[wA,TA]=at(CA),[EA,DA]=wA(CA),OA=H.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,a]=H.useState(`idle`);return(0,U.jsx)(EA,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:(0,U.jsx)(V.span,{...r,ref:t})})});OA.displayName=CA;var kA=`AvatarImage`,AA=H.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=DA(kA,n),s=PA(r,a),c=ot(e=>{i(e),o.onImageLoadingStatusChange(e)});return Mt(()=>{s!==`idle`&&c(s)},[s,c]),s===`loaded`?(0,U.jsx)(V.img,{...a,ref:t,src:r}):null});AA.displayName=kA;var jA=`AvatarFallback`,MA=H.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,a=DA(jA,n),[o,s]=H.useState(r===void 0);return H.useEffect(()=>{if(r!==void 0){let e=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&a.imageLoadingStatus!==`loaded`?(0,U.jsx)(V.span,{...i,ref:t}):null});MA.displayName=jA;function NA(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function PA(e,{referrerPolicy:t,crossOrigin:n}){let r=xA(),i=H.useRef(null),a=(()=>r?(i.current||=new window.Image,i.current):null)(),[o,s]=H.useState(()=>NA(a,e));return Mt(()=>{s(NA(a,e))},[a,e]),Mt(()=>{let e=e=>()=>{s(e)};if(!a)return;let r=e(`loaded`),i=e(`error`);return a.addEventListener(`load`,r),a.addEventListener(`error`,i),t&&(a.referrerPolicy=t),typeof n==`string`&&(a.crossOrigin=n),()=>{a.removeEventListener(`load`,r),a.removeEventListener(`error`,i)}},[a,n,t]),o}var FA=OA,IA=AA,LA=MA,RA=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(FA,{ref:n,className:q(`relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));RA.displayName=FA.displayName;var zA=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(IA,{ref:n,className:q(`aspect-square h-full w-full`,e),...t}));zA.displayName=IA.displayName;var BA=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(LA,{ref:n,className:q(`flex h-full w-full items-center justify-center rounded-full bg-muted`,e),...t}));BA.displayName=LA.displayName;function VA({saveData:e,loadData:t}){let{t:n}=Nl(),[r,i]=(0,H.useState)([]),[a,o]=(0,H.useState)(``),{toast:s}=vp();(0,H.useEffect)(()=>{(async()=>{try{let e=await t?.();e?.posts&&i(e.posts)}catch(e){console.error(`Error loading data:`,e),s({title:n(`community.loadFailed`),description:n(`community.loadFailedDesc`),variant:`destructive`})}})()},[t,n,s]),(0,H.useEffect)(()=>{let t=setTimeout(async()=>{try{await e?.({posts:r})}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[r,e]);let c=async()=>{if(!a.trim()){s({title:n(`community.error`),description:n(`community.enterContent`),variant:`destructive`});return}let e={id:Date.now().toString(),content:a,author:{name:n(`community.user`)+Math.floor(Math.random()*1e3),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${Date.now()}`},likes:0,comments:0,createdAt:new Date().toISOString()};i(t=>[e,...t]),o(``),s({title:n(`community.publishSuccess`),description:n(`community.publishSuccessDesc`)})},l=e=>{i(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t))};return(0,U.jsx)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`,children:(0,U.jsxs)(`div`,{className:`max-w-2xl mx-auto p-4`,children:[(0,U.jsxs)(qv,{className:`mb-8 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`,children:[(0,U.jsxs)(Jv,{children:[(0,U.jsx)(Yv,{className:`dark:text-gray-100`,children:n(`community.publishNewPost`)}),(0,U.jsx)(Xv,{className:`dark:text-gray-400`,children:n(`community.shareYourThoughts`)})]}),(0,U.jsx)(Zv,{children:(0,U.jsx)(FE,{placeholder:n(`community.writeSomething`),value:a,onChange:e=>o(e.target.value),className:`min-h-[100px] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 
                border-gray-200 dark:border-gray-700 placeholder-gray-400 dark:placeholder-gray-500`})}),(0,U.jsx)(Qv,{className:`flex justify-end`,children:(0,U.jsx)(hu,{onClick:c,className:`dark:bg-blue-600 dark:hover:bg-blue-700`,children:n(`community.publish`)})})]}),(0,U.jsx)(`div`,{className:`space-y-4`,children:r.map(e=>(0,U.jsxs)(qv,{className:`overflow-hidden bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`,children:[(0,U.jsxs)(Jv,{className:`flex flex-row items-center gap-4`,children:[(0,U.jsxs)(RA,{children:[(0,U.jsx)(zA,{src:e.author.avatar}),(0,U.jsx)(BA,{className:`dark:bg-gray-700 dark:text-gray-100`,children:e.author.name[0]})]}),(0,U.jsxs)(`div`,{className:`flex-1`,children:[(0,U.jsx)(Yv,{className:`text-base dark:text-gray-100`,children:e.author.name}),(0,U.jsx)(Xv,{className:`dark:text-gray-400`,children:new Date(e.createdAt).toLocaleString()})]}),(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,className:`dark:hover:bg-gray-700`,children:(0,U.jsx)(rf,{className:`h-4 w-4 dark:text-gray-400`})})]}),(0,U.jsx)(Zv,{children:(0,U.jsx)(`p`,{className:`text-gray-700 dark:text-gray-300 whitespace-pre-wrap`,children:e.content})}),(0,U.jsx)(Qv,{className:`border-t dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50`,children:(0,U.jsxs)(`div`,{className:`flex gap-4 text-gray-500 dark:text-gray-400`,children:[(0,U.jsxs)(hu,{variant:`ghost`,size:`sm`,className:`gap-2 dark:hover:bg-gray-700`,onClick:()=>l(e.id),children:[(0,U.jsx)(ff,{className:`h-4 w-4`}),(0,U.jsx)(`span`,{children:e.likes})]}),(0,U.jsxs)(hu,{variant:`ghost`,size:`sm`,className:`gap-2 dark:hover:bg-gray-700`,children:[(0,U.jsx)(yf,{className:`h-4 w-4`}),(0,U.jsx)(`span`,{children:e.comments})]}),(0,U.jsx)(hu,{variant:`ghost`,size:`sm`,className:`dark:hover:bg-gray-700`,children:(0,U.jsx)(Af,{className:`h-4 w-4`})})]})})]},e.id))})]})})}const HA=({uri:e})=>e?(0,U.jsx)(VA,{saveData:async t=>{try{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})}catch(e){console.error(`Failed to save data:`,e)}},loadData:async()=>{try{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{posts:[]}}}}):(0,U.jsx)(`div`,{children:`uri is required`}),UA=Vg({initilize(e){e.componentService.register(`community`,HA),Kv.register({id:`community`,label:K(`apps.community`),match:[`.community.json`],priority:100,init:async t=>e.layoutService.pageBox.addPage({id:`community:${t}`,title:`${K(`apps.community`)}:${u_.getFileName(t)}`,viewData:{type:`community`,props:{uri:t}}})})}}),WA={fontFamily:`ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif`,fontSize:`14px`,fontWeight:`500`,lineHeight:`1.5`,padding:`8px 12px`},GA={rootId:`root`,nodes:{root:{id:`root`,text:`Root`,parentId:null,children:[],isExpanded:!0,depth:0}}};var KA=null,qA=()=>typeof document>`u`?null:(KA||(KA=document.createElement(`div`),KA.id=`mindmap-measure-el`,Object.assign(KA.style,{position:`absolute`,visibility:`hidden`,top:`-9999px`,left:`-9999px`,width:`auto`,height:`auto`,whiteSpace:`pre-wrap`,wordBreak:`break-word`,overflowWrap:`break-word`,boxSizing:`border-box`,fontFamily:WA.fontFamily,fontSize:WA.fontSize,fontWeight:WA.fontWeight,lineHeight:WA.lineHeight,padding:WA.padding}),document.body.appendChild(KA)),KA),JA=e=>{let t=qA();if(!t)return{width:Math.max(50,Math.min(400,e.length*8)),height:40};t.style.maxWidth=`400px`,t.style.width=`fit-content`,t.textContent=e||` `;let n=t.getBoundingClientRect().width+2,r=Math.max(Math.min(n,400),50);return t.style.width=`${r}px`,{width:r,height:Math.max(t.getBoundingClientRect().height,40)}};const YA=(e,t)=>{let n={};Object.values(e.nodes).forEach(e=>{n[e.id]={...e,x:void 0,y:void 0,width:void 0,height:void 0}}),t&&Object.entries(t).forEach(([e,t])=>{n[e]&&(n[e]={...n[e],text:t})});let r=(e,t)=>{let i=n[e];if(!i)return 0;i.depth=t;let{width:a,height:o}=JA(i.text);if(i.width=a,i.height=o,!i.children.length||!i.isExpanded)return i.subtreeHeight=o,o;let s=0;return i.children.forEach(e=>{s+=r(e,t+1)}),s+=(i.children.length-1)*20,i.subtreeHeight=Math.max(o,s),i.subtreeHeight};r(e.rootId,0);let i=(e,t,r)=>{let a=n[e];if(!a||(a.x=t,a.y=r,!a.children.length||!a.isExpanded))return;let o=0;a.children.forEach(e=>{let t=n[e];t&&(o+=t.subtreeHeight)}),o+=(a.children.length-1)*20;let s=r-o/2;a.children.forEach(e=>{let r=n[e];if(!r)return;let o=r.subtreeHeight,c=s+o/2;i(e,t+a.width/2+60+r.width/2,c),s+=o+20})};return i(e.rootId,0,0),n},XA=e=>{let t=zE(e.state$),n=(0,H.useMemo)(()=>YA(t.history.present,t.drafts),[t.history.present,t.drafts]),r=(0,H.useCallback)(t=>{e.setSelectedId(t)},[e]),i=(0,H.useCallback)(t=>{e.setEditingId(t)},[e]),a=(0,H.useCallback)((t,n)=>{e.updateNodeText(t,n)},[e]),o=(0,H.useCallback)((t,n)=>{e.updateDraft(t,n)},[e]),s=(0,H.useCallback)(t=>{e.addChild(t)},[e]),c=(0,H.useCallback)(t=>{e.addSibling(t)},[e]),l=(0,H.useCallback)(t=>{e.deleteNode(t)},[e]),u=(0,H.useCallback)(t=>{e.toggleCollapse(t)},[e]),d=(0,H.useCallback)(()=>{e.undo()},[e]),f=(0,H.useCallback)(()=>{e.redo()},[e]);return{nodes:n,selectedId:t.selectedId,setSelectedId:r,editingId:t.editingId,setEditingId:i,updateNodeText:a,updateDraft:o,addChild:s,addSibling:c,deleteNode:l,toggleCollapse:u,undo:d,redo:f,canUndo:t.history.past.length>0,canRedo:t.history.future.length>0,data:t.history.present}};let ZA=function(e){return e.LIGHT=`LIGHT`,e.DARK=`DARK`,e.MIDNIGHT=`MIDNIGHT`,e}({});const QA={[ZA.LIGHT]:{bg:`bg-slate-50`,nodeBg:`fill-white`,text:`text-slate-900`,edge:`stroke-slate-300`,highlight:`stroke-blue-500`},[ZA.DARK]:{bg:`bg-slate-900`,nodeBg:`fill-slate-800`,text:`text-slate-100`,edge:`stroke-slate-600`,highlight:`stroke-indigo-400`},[ZA.MIDNIGHT]:{bg:`bg-black`,nodeBg:`fill-zinc-900`,text:`text-zinc-200`,edge:`stroke-zinc-700`,highlight:`stroke-emerald-500`}};let $A=function(e){return e.IDLE=`IDLE`,e.DIRTY=`DIRTY`,e.SAVING=`SAVING`,e.SAVED=`SAVED`,e.ERROR=`ERROR`,e}({});const ej=({canUndo:e,canRedo:t,onUndo:n,onRedo:r,onAdd:i,onDelete:a,labels:o,className:s=``})=>(0,U.jsxs)(`div`,{className:`absolute top-4 left-1/2 -translate-x-1/2 z-20 flex items-center gap-2 p-2 rounded-2xl bg-white/80 dark:bg-slate-800/80 backdrop-blur-md shadow-lg border border-slate-200 dark:border-slate-700 ${s}`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-1 border-r border-slate-200 dark:border-slate-700 pr-2`,children:[(0,U.jsx)(`button`,{onClick:n,disabled:!e,className:`p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-30 disabled:cursor-not-allowed text-slate-700 dark:text-slate-200 transition-colors`,title:o.undo,children:(0,U.jsx)(Pf,{size:18})}),(0,U.jsx)(`button`,{onClick:r,disabled:!t,className:`p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-30 disabled:cursor-not-allowed text-slate-700 dark:text-slate-200 transition-colors`,title:o.redo,children:(0,U.jsx)(Ef,{size:18})})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1 border-r border-slate-200 dark:border-slate-700 pr-2`,children:[(0,U.jsx)(`button`,{onClick:i,className:`p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 transition-colors`,title:o.addChild,children:(0,U.jsx)(Tf,{size:18})}),(0,U.jsx)(`button`,{onClick:a,className:`p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors`,title:o.deleteNode,children:(0,U.jsx)(Nf,{size:18})})]})]}),tj=({source:e,target:t,theme:n})=>{if(e.x===void 0||e.y===void 0||t.x===void 0||t.y===void 0)return null;let r=QA[n],i=e.width||50,a=t.width||50,o=e.x+i/2,s=e.y,c=t.x-a/2,l=t.y,u=(c-o)/2;return(0,U.jsx)(`path`,{d:`
    M ${o} ${s}
    C ${o+u} ${s},
      ${c-u} ${l},
      ${c} ${l}
  `,fill:`none`,strokeWidth:`2`,className:`${r.edge} transition-all duration-300 ease-in-out`})},nj=({node:e,theme:t,isSelected:n,isEditing:r,onSelect:i,onEditStart:a,onEditChange:o,onEditEnd:s,onToggleCollapse:c,onAddChild:l})=>{let u=(0,H.useRef)(null),d=QA[t],f=e.width??50,p=e.height??40;(0,H.useEffect)(()=>{r&&u.current&&(u.current.focus(),u.current.select())},[r]);let m=t=>{t.key===`Enter`&&!t.shiftKey&&(t.preventDefault(),s(e.id,e.text)),t.key===`Escape`&&(t.preventDefault(),s(e.id,e.text)),t.stopPropagation()},h=e.children.length>0,g={fontFamily:WA.fontFamily,fontSize:WA.fontSize,fontWeight:WA.fontWeight,lineHeight:WA.lineHeight,padding:WA.padding,whiteSpace:`pre-wrap`,wordBreak:`break-word`,overflowWrap:`break-word`,textAlign:`left`};return(0,U.jsxs)(`g`,{transform:`translate(${e.x}, ${e.y})`,className:`transition-transform duration-300 ease-in-out cursor-pointer group`,onClick:t=>{t.stopPropagation(),i(e.id)},onDoubleClick:t=>{t.stopPropagation(),a(e.id)},children:[(0,U.jsx)(`rect`,{x:-f/2,y:-p/2,width:f,height:p,rx:8,className:`${d.nodeBg} ${n?`stroke-2 ${d.highlight}`:`stroke-1 stroke-slate-200 dark:stroke-slate-700`} shadow-sm transition-all duration-200`}),(0,U.jsx)(`foreignObject`,{x:-f/2,y:-p/2,width:f,height:p,className:`pointer-events-none`,children:(0,U.jsx)(`div`,{className:`w-full h-full`,children:r?(0,U.jsx)(`textarea`,{ref:u,value:e.text,onChange:t=>o(e.id,t.target.value),onKeyDown:m,onBlur:()=>s(e.id,e.text),className:`pointer-events-auto w-full h-full bg-transparent resize-none outline-none text-slate-800 dark:text-white border-0 m-0 overflow-hidden`,style:{...g,margin:0}}):(0,U.jsx)(`div`,{className:`w-full h-full ${d.text}`,style:g,children:e.text})})}),h&&(0,U.jsxs)(`g`,{transform:`translate(${f/2+12}, 0)`,onClick:t=>{t.stopPropagation(),c(e.id)},className:`opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer`,children:[(0,U.jsx)(`circle`,{r:`8`,className:`fill-white dark:fill-slate-800 stroke-slate-300 dark:stroke-slate-600`}),(0,U.jsx)(`text`,{dy:`.3em`,textAnchor:`middle`,className:`text-[10px] fill-slate-500 font-bold select-none pointer-events-none`,children:e.isExpanded?`-`:`+`})]}),(0,U.jsxs)(`g`,{transform:`translate(0, ${p/2+12})`,onClick:t=>{t.stopPropagation(),l(e.id)},className:`opacity-0 ${n?`opacity-100`:`group-hover:opacity-50`} transition-opacity cursor-pointer`,children:[(0,U.jsx)(`circle`,{r:`8`,className:`fill-blue-500 stroke-none`}),(0,U.jsx)(`path`,{d:`M-3 0 H3 M0 -3 V3`,stroke:`white`,strokeWidth:`1.5`})]})]})},rj=({onZoomIn:e,onZoomOut:t,onReset:n,labels:r,className:i=``})=>(0,U.jsx)(`div`,{className:`absolute bottom-4 left-4 z-20 flex flex-col gap-2 ${i}`,children:(0,U.jsxs)(`div`,{className:`flex flex-col rounded-xl bg-white/80 dark:bg-slate-800/80 backdrop-blur-md shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:e,className:`p-3 hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 transition-colors border-b border-slate-200 dark:border-slate-700 active:bg-slate-200 dark:active:bg-slate-600`,title:r.zoomIn,children:(0,U.jsx)(Tf,{size:20})}),(0,U.jsx)(`button`,{onClick:t,className:`p-3 hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 transition-colors border-b border-slate-200 dark:border-slate-700 active:bg-slate-200 dark:active:bg-slate-600`,title:r.zoomOut,children:(0,U.jsx)(bf,{size:20})}),(0,U.jsx)(`button`,{onClick:n,className:`p-3 hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 transition-colors active:bg-slate-200 dark:active:bg-slate-600`,title:r.reset,children:(0,U.jsx)(Of,{size:20})})]})}),ij=({title:e,toggleShow:t,toggleHide:n,items:r,className:i=``})=>{let[a,o]=(0,H.useState)(!1);return(0,U.jsxs)(`div`,{className:`absolute bottom-4 right-4 z-20 flex flex-col items-end gap-3 ${i}`,children:[a&&(0,U.jsxs)(`div`,{className:`p-4 rounded-xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-lg border border-slate-200 dark:border-slate-700 text-xs text-slate-500 dark:text-slate-400 select-none animate-in fade-in slide-in-from-bottom-4 duration-200 origin-bottom-right`,children:[(0,U.jsx)(`h4`,{className:`font-bold mb-3 uppercase tracking-wider text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 pb-2`,children:e}),(0,U.jsx)(`div`,{className:`grid grid-cols-[auto_1fr] gap-x-6 gap-y-2`,children:r.map(e=>(0,U.jsxs)(H.Fragment,{children:[(0,U.jsx)(`span`,{children:e.label}),(0,U.jsx)(`span`,{className:`text-slate-800 dark:text-slate-200 font-medium text-right`,children:e.action})]},e.label))})]}),(0,U.jsx)(`button`,{onClick:()=>o(!a),className:`p-3 rounded-full shadow-lg border transition-all duration-300 flex items-center justify-center ${a?`bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-100 rotate-90`:`bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400`}`,title:a?n:t,children:a?(0,U.jsx)(Ff,{size:24}):(0,U.jsx)(mf,{size:24})})]})};var aj=()=>typeof window>`u`?{x:0,y:0,scale:1}:{x:window.innerWidth/2,y:window.innerHeight/2,scale:1},oj=e=>{if(e){let t=e.getBoundingClientRect();return{width:t.width||1,height:t.height||1}}return typeof window<`u`?{width:window.innerWidth,height:window.innerHeight}:{width:1,height:1}},sj={[$A.IDLE]:`text-slate-500 bg-white/90 border-slate-200`,[$A.DIRTY]:`text-amber-700 bg-amber-50 border-amber-200`,[$A.SAVING]:`text-blue-700 bg-blue-50 border-blue-200`,[$A.SAVED]:`text-emerald-700 bg-emerald-50 border-emerald-200`,[$A.ERROR]:`text-red-700 bg-red-50 border-red-200`};const cj=({store:e,saveStatus:t})=>{let{t:n}=Nl(),{colorMode:r}=v(),i=r===`dark`?ZA.DARK:ZA.LIGHT,{nodes:a,selectedId:o,setSelectedId:s,editingId:c,setEditingId:l,updateNodeText:u,updateDraft:d,addChild:f,addSibling:p,deleteNode:m,toggleCollapse:h,undo:g,redo:_,canUndo:y,canRedo:b}=XA(e),[x,S]=(0,H.useState)(aj),[C,w]=(0,H.useState)(!1),[T,E]=(0,H.useState)({x:0,y:0}),D=(0,H.useRef)(null),O=(0,H.useRef)(!1),k=(0,H.useCallback)(e=>{if(!o)return;let t=a[o];if(!t)return;let n=null,r=Object.values(a);if(e===`left`&&t.parentId)n=t.parentId;else if(e===`right`&&t.children.length>0&&t.isExpanded)n=t.children[Math.floor(t.children.length/2)];else{let i=t.x||0,a=t.y||0,o=1/0;r.forEach(r=>{if(r.id===t.id)return;let s=r.x||0,c=r.y||0,l=s-i,u=c-a,d=!1;if(e===`up`&&(d=u<-10&&Math.abs(l)<100),e===`down`&&(d=u>10&&Math.abs(l)<100),e===`right`&&(d=l>10),d){let e=Math.sqrt(l*l+u*u);e<o&&(o=e,n=r.id)}})}n&&s(n)},[a,o,s]);(0,H.useEffect)(()=>{let e=e=>{if(!c){if((e.ctrlKey||e.metaKey)&&e.key===`z`){e.preventDefault(),g();return}if((e.ctrlKey||e.metaKey)&&e.key===`y`){e.preventDefault(),_();return}switch(e.key){case`Tab`:e.preventDefault(),o&&f(o);break;case`Enter`:e.preventDefault(),o&&p(o);break;case`Backspace`:case`Delete`:o&&m(o);break;case` `:e.preventDefault(),o&&l(o);break;case`ArrowLeft`:e.preventDefault(),k(`left`);break;case`ArrowRight`:e.preventDefault(),k(`right`);break;case`ArrowUp`:e.preventDefault(),k(`up`);break;case`ArrowDown`:e.preventDefault(),k(`down`);break;default:break}}};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[o,c,f,p,m,g,_,k,l]);let A=(0,H.useCallback)(e=>{if(e.preventDefault(),O.current=!0,e.ctrlKey||e.metaKey){let t=Math.min(Math.max(.1,x.scale-e.deltaY*.001),5);S(e=>({...e,scale:t}))}else S(t=>({...t,x:t.x-e.deltaX,y:t.y-e.deltaY}))},[x.scale]),j=e=>{(e.target.tagName===`svg`||e.target.id===`canvas-bg`)&&(w(!0),E({x:e.clientX,y:e.clientY}),s(null),O.current=!0)},M=e=>{if(C){let t=e.clientX-T.x,n=e.clientY-T.y;S(e=>({...e,x:e.x+t,y:e.y+n})),E({x:e.clientX,y:e.clientY})}},N=()=>{w(!1)},P=()=>S(e=>(O.current=!0,{...e,scale:Math.min(e.scale*1.2,5)})),F=()=>S(e=>(O.current=!0,{...e,scale:Math.max(e.scale/1.2,.1)}));(0,H.useEffect)(()=>{let e=D.current;if(!e)return;let t=e=>{e.preventDefault()},n=[`gesturestart`,`gesturechange`,`gestureend`];return n.forEach(n=>{e.addEventListener(n,t,{passive:!1})}),()=>{n.forEach(n=>{e.removeEventListener(n,t)})}},[]);let ee=(0,H.useCallback)(()=>{O.current=!1;let e=Object.values(a).filter(e=>{if(e.x===void 0||e.y===void 0)return!1;let t=e;for(;t.parentId;){let e=a[t.parentId];if(!e||!e.isExpanded)return!1;t=e}return!0});if(!e.length){S(aj());return}let t=1/0,n=-1/0,r=1/0,i=-1/0;e.forEach(e=>{if(e.x===void 0||e.y===void 0)return;let{x:a,y:o}=e,s=e.width||400,c=e.height||40;t=Math.min(t,a-s/2),n=Math.max(n,a+s/2),r=Math.min(r,o-c/2),i=Math.max(i,o+c/2)});let o=Math.max(n-t,100),s=Math.max(i-r,100),{width:c,height:l}=oj(D.current),u=Math.max(c-160,100),d=Math.max(l-160,100),f=u/o,p=d/s,m=Math.min(f,p);m=Math.min(m,1.2),m=Math.max(m,.1);let h=t+o/2,g=r+s/2;S({x:c/2-h*m,y:l/2-g*m,scale:m})},[a]);(0,H.useEffect)(()=>{O.current||Object.values(a).some(e=>e.x!==void 0&&e.y!==void 0)&&ee()},[ee,a]);let I=(0,H.useMemo)(()=>{switch(t){case $A.SAVING:return n(`mindFlow.status.saving`);case $A.SAVED:return n(`mindFlow.status.saved`);case $A.ERROR:return n(`mindFlow.status.error`);case $A.DIRTY:return n(`mindFlow.status.dirty`);case $A.IDLE:default:return n(`mindFlow.status.idle`)}},[t,n]),L=(0,H.useMemo)(()=>({undo:n(`mindFlow.toolbar.undo`),redo:n(`mindFlow.toolbar.redo`),addChild:n(`mindFlow.toolbar.addChild`),deleteNode:n(`mindFlow.toolbar.deleteNode`)}),[n]),te=(0,H.useMemo)(()=>({zoomIn:n(`mindFlow.controls.zoomIn`),zoomOut:n(`mindFlow.controls.zoomOut`),reset:n(`mindFlow.controls.reset`)}),[n]),ne=(0,H.useMemo)(()=>[{label:n(`mindFlow.instructions.select`),action:n(`mindFlow.instructions.selectAction`)},{label:n(`mindFlow.instructions.edit`),action:n(`mindFlow.instructions.editAction`)},{label:n(`mindFlow.instructions.addChild`),action:n(`mindFlow.instructions.addChildAction`)},{label:n(`mindFlow.instructions.addSibling`),action:n(`mindFlow.instructions.addSiblingAction`)},{label:n(`mindFlow.instructions.delete`),action:n(`mindFlow.instructions.deleteAction`)},{label:n(`mindFlow.instructions.navigate`),action:n(`mindFlow.instructions.navigateAction`)},{label:n(`mindFlow.instructions.pan`),action:n(`mindFlow.instructions.panAction`)}],[n]),re=QA[i],ie=(0,H.useMemo)(()=>Object.values(a).map(e=>{if(!e.parentId)return null;let t=a[e.parentId];return!t||!t.isExpanded?null:(0,U.jsx)(tj,{source:t,target:e,theme:i},`edge-${e.id}`)}),[a,i]),ae=(0,H.useMemo)(()=>Object.values(a).filter(e=>{if(!e.parentId)return!0;let t=a[e.parentId];return t&&t.isExpanded&&t.x!==void 0}).map(e=>(0,U.jsx)(nj,{node:e,theme:i,isSelected:o===e.id,isEditing:c===e.id,onSelect:s,onEditStart:l,onEditChange:d,onEditEnd:(e,t)=>{u(e,t),d(e,null),l(null)},onToggleCollapse:h,onAddChild:f},e.id)),[a,i,o,c,s,l,d,u,h,f]),oe=(0,U.jsx)(`div`,{className:`w-full h-full cursor-grab active:cursor-grabbing`,onWheel:A,onMouseDown:j,onMouseMove:M,onMouseUp:N,onMouseLeave:N,children:(0,U.jsx)(`svg`,{id:`canvas-bg`,className:`w-full h-full block`,xmlns:`http://www.w3.org/2000/svg`,children:(0,U.jsxs)(`g`,{transform:`translate(${x.x}, ${x.y}) scale(${x.scale})`,children:[ie,ae]})})});return(0,U.jsxs)(`div`,{ref:D,className:`relative w-full h-full overflow-hidden ${re.bg} selection:bg-blue-500/30`,children:[(0,U.jsx)(ej,{canUndo:y,canRedo:b,onUndo:g,onRedo:_,onAdd:()=>o&&f(o),onDelete:()=>o&&m(o),labels:L}),(0,U.jsx)(`div`,{className:`absolute top-4 right-4 z-20 px-3 py-1.5 rounded-full border text-xs font-medium shadow-sm ${sj[t]}`,children:I}),oe,(0,U.jsx)(rj,{onZoomIn:P,onZoomOut:F,onReset:ee,labels:te}),(0,U.jsx)(ij,{title:n(`mindFlow.instructions.title`),toggleShow:n(`mindFlow.instructions.show`),toggleHide:n(`mindFlow.instructions.hide`),items:ne})]})};var lj=e=>({id:e.id,text:e.text,parentId:e.parentId,children:[...e.children],isExpanded:e.isExpanded,depth:e.depth});const uj=e=>({rootId:e.rootId,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,lj(t)]))}),dj=e=>JSON.stringify(e),fj=e=>{if(!e||typeof e!=`object`||!(`rootId`in e)||!(`nodes`in e))return uj(GA);let t=e,n=typeof t.rootId==`string`?t.rootId:GA.rootId,r=t.nodes??{};if(!r[n])return uj(GA);let i={};for(let[e,t]of Object.entries(r)){if(!t||typeof t!=`object`)continue;let{text:n,parentId:r,children:a,isExpanded:o,depth:s}=t;i[e]={id:e,text:typeof n==`string`?n:``,parentId:typeof r==`string`||r===null?r:null,children:Array.isArray(a)?a.filter(e=>typeof e==`string`):[],isExpanded:typeof o==`boolean`?o:!0,depth:typeof s==`number`?s:0}}return i[n]?uj({rootId:n,nodes:i}):uj(GA)};var pj=e=>({past:[],present:uj(e),future:[]}),mj=e=>({history:pj(e),drafts:{},selectedId:e.rootId,editingId:null}),hj=(e,t)=>({past:[...e.history.past,e.history.present],present:uj(t),future:[]}),gj=class{subject;data$;constructor(e=GA){this.subject=new bo(mj(e)),this.data$=this.subject.asObservable().pipe(as(e=>e.history.present))}get state$(){return this.subject}getCurrentState(){return this.subject.getValue()}getCurrentData(){return this.subject.getValue().history.present}replaceData(e){this.subject.next(mj(e))}setSelectedId=e=>{let t=this.getCurrentState();this.subject.next({...t,selectedId:e})};setEditingId=e=>{let t=this.getCurrentState();this.subject.next({...t,editingId:e})};updateDraft=(e,t)=>{let n=this.getCurrentState(),r={...n.drafts};t===null?delete r[e]:r[e]=t,this.subject.next({...n,drafts:r})};emitWithHistory(e){let t=this.getCurrentState();this.subject.next({...t,history:hj(t,e)})}updateNodeText=(e,t)=>{let n=this.getCurrentState(),r={...n.history.present.nodes};r[e]&&(r[e]={...r[e],text:t},this.emitWithHistory({...n.history.present,nodes:r}))};toggleCollapse=e=>{let t=this.getCurrentState(),n={...t.history.present.nodes};n[e]&&(n[e]={...n[e],isExpanded:!n[e].isExpanded},this.emitWithHistory({...t.history.present,nodes:n}))};addChild=e=>{let t=this.getCurrentState(),n=t.history.present.nodes[e];if(!n)return;let r=`node-${Date.now()}`,i={id:r,text:`New Idea`,parentId:e,children:[],isExpanded:!0},a={...t.history.present.nodes};a[r]=i,a[e]={...n,children:[...n.children,r],isExpanded:!0},this.subject.next({...t,history:hj(t,{...t.history.present,nodes:a}),selectedId:r,editingId:r})};addSibling=e=>{let t=this.getCurrentState(),n=t.history.present.nodes[e];if(!n||!n.parentId)return;let r=t.history.present.nodes[n.parentId];if(!r)return;let i=`node-${Date.now()}`,a={id:i,text:`New Idea`,parentId:n.parentId,children:[],isExpanded:!0},o={...t.history.present.nodes};o[i]=a;let s=[...r.children],c=s.indexOf(e);s.splice(c+1,0,i),o[r.id]={...r,children:s},this.subject.next({...t,history:hj(t,{...t.history.present,nodes:o}),selectedId:i,editingId:i})};deleteNode=e=>{let t=this.getCurrentState(),n=t.history.present.nodes[e];if(!n||!n.parentId)return;let r={...t.history.present.nodes},i=e=>{let t=r[e];t&&(t.children.forEach(i),delete r[e])};i(e),r[n.parentId]={...r[n.parentId],children:r[n.parentId].children.filter(t=>t!==e)},this.subject.next({...t,history:hj(t,{...t.history.present,nodes:r}),selectedId:n.parentId})};undo=()=>{let e=this.getCurrentState();if(!e.history.past.length)return;let t=e.history.past[e.history.past.length-1],n=e.history.past.slice(0,-1);this.subject.next({...e,history:{past:n,present:t,future:[e.history.present,...e.history.future]}})};redo=()=>{let e=this.getCurrentState();if(!e.history.future.length)return;let[t,...n]=e.history.future;this.subject.next({...e,history:{past:[...e.history.past,e.history.present],present:t,future:n}})};canUndo(){return this.subject.getValue().history.past.length>0}canRedo(){return this.subject.getValue().history.future.length>0}};function _j(e){let t=(0,H.useRef)(e);t.current=e;let n=(0,H.useRef)();return n.current||=((...e)=>t.current(...e)),n.current}var vj=1e3;const yj=({uri:e})=>{let{t}=Nl(),[n,r]=(0,H.useState)(null),[i,a]=(0,H.useState)(!0),[o,s]=(0,H.useState)($A.IDLE),c=_j(async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(uj(t))),{create:!0,overwrite:!0})}),l=_j(async()=>{try{let t=await J.fs.readFile(s_.parse(e));return fj(JSON.parse(new TextDecoder().decode(t)))}catch(e){return console.warn(`Load mind map failed, using defaults:`,e),uj(GA)}});(0,H.useEffect)(()=>{let e=!1;return a(!0),(async()=>{let t=await l();e||(r(e=>e?(e.replaceData(t),e):new gj(t)),s($A.IDLE),a(!1))})(),()=>{e=!0}},[l,e]),(0,H.useEffect)(()=>{if(!n)return;let e=n.data$.pipe(as(e=>uj(e)),ws((e,t)=>dj(e)===dj(t)),As({bufferSize:1,refCount:!0})),t=e.pipe(js(1)).subscribe(()=>{s($A.DIRTY)}),r=e.pipe(js(1),Cs(vj)).subscribe(async e=>{try{s($A.SAVING),await c(e),s($A.SAVED)}catch(e){console.error(`Auto save mind map failed:`,e),s($A.ERROR)}});return()=>{t.unsubscribe(),r.unsubscribe()}},[n,c]);let u=_j(async()=>{if(n)try{s($A.SAVING),await c(n.getCurrentData()),s($A.SAVED)}catch(e){console.error(`Manual save mind map failed:`,e),s($A.ERROR)}});return(0,H.useEffect)(()=>{if(o!==$A.SAVED)return;let e=window.setTimeout(()=>{s($A.IDLE)},2e3);return()=>{window.clearTimeout(e)}},[o]),(0,H.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&(e.key===`s`||e.key===`S`)&&(e.preventDefault(),u())};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[u]),e?i||!n?(0,U.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`mindFlow.loading`)}):(0,U.jsx)(cj,{store:n,saveStatus:o}):(0,U.jsx)(`div`,{className:`p-4 text-sm text-muted-foreground`,children:t(`mindFlow.uriRequired`)})},bj={excalidraw:{extensions:[`.excalidraw.json`,`.excalidraw`],icon:Cf,color:`#6366f1`},drawio:{extensions:[`.drawio`,`.xml`],icon:Sf,color:`#f59e0b`},mindMap:{extensions:[`.mindmap.json`,`.mindflow.json`],icon:Gd,color:`#0ea5e9`},markdown:{extensions:[`.md`,`.markdown`],icon:We,color:`#14668b`},json:{extensions:[`.json`],icon:Ne,color:`#8b6914`},typescript:{extensions:[`.ts`,`.tsx`],icon:he,color:`#3178c6`},javascript:{extensions:[`.js`,`.jsx`,`.mjs`],icon:me,color:`#997e1a`},html:{extensions:[`.html`,`.htm`],icon:xe,color:`#e34c26`},css:{extensions:[`.css`,`.scss`,`.sass`,`.less`],icon:Ge,color:`#264de4`},python:{extensions:[`.py`,`.pyw`,`.pyc`],icon:we,color:`#3776ab`},rust:{extensions:[`.rs`],icon:R,color:`#dea584`},go:{extensions:[`.go`],icon:Ce,color:`#00add8`},config:{extensions:[`.yml`,`.yaml`,`.toml`,`.ini`,`.conf`,`.config`],icon:Pe,color:`#6e6e6e`},default:{extensions:[],icon:fe,color:`var(--secondary-color)`}},xj=e=>{let t=e.toLowerCase();for(let[,e]of Object.entries(bj))for(let n of e.extensions)if(t.endsWith(n.toLowerCase()))return e;return bj.default};var Sj=bj.mindMap.color;const Cj=Vg({initilize(e){e.componentService.register(`mind-flow`,yj),Kv.register({id:`mind-flow`,label:K(`apps.mindFlow`),showInTreeMenu:!0,icon:{name:`Brain`,color:Sj},match:[`.mindflow.json`,`.mindmap.json`],priority:100,templates:[{id:`new-mindflow`,label:K(`mindFlow.newFile`),defaultFileName:`Untitled.mindmap.json`,initialContent:JSON.stringify(GA,null,2),icon:{name:`Brain`,color:Sj}}],init:t=>{e.layoutService.pageBox.addPage({id:`mind-flow:${t}`,title:`${K(`apps.mindFlow`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`mind-flow`,props:{uri:t}}})}})}});function wj(e){if(typeof e==`string`||typeof e==`number`)return``+e;let t=``;if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=wj(e[n]))!==``&&(t+=(t&&` `)+r);else for(let n in e)e[n]&&(t+=(t&&` `)+n);return t}var Tj=t(ue(),1),{useDebugValue:Ej}=H.default,{useSyncExternalStoreWithSelector:Dj}=Tj.default,Oj=e=>e;function kj(e,t=Oj,n){let r=Dj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ej(r),r}var Aj=(e,t)=>{let n=ee(e),r=(e,r=t)=>kj(n,e,r);return Object.assign(r,n),r},jj=(e,t)=>e?Aj(e,t):Aj;function Mj(e,t){if(Object.is(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Nj={value:()=>{}};function Pj(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new Fj(n)}function Fj(e){this._=e}function Ij(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}Fj.prototype=Pj.prototype={constructor:Fj,on:function(e,t){var n=this._,r=Ij(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Lj(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Rj(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Rj(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fj(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Lj(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Rj(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Nj,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var zj=Pj,Bj={svg:`http://www.w3.org/2000/svg`,xhtml:`http://www.w3.org/1999/xhtml`,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function Vj(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),Bj.hasOwnProperty(t)?{space:Bj[t],local:e}:e}function Hj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===`http://www.w3.org/1999/xhtml`&&t.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?t.createElement(e):t.createElementNS(n,e)}}function Uj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wj(e){var t=Vj(e);return(t.local?Uj:Hj)(t)}function Gj(){}function Kj(e){return e==null?Gj:function(){return this.querySelector(e)}}function qj(e){typeof e!=`function`&&(e=Kj(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new FN(r,this._parents)}function Jj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yj(){return[]}function Xj(e){return e==null?Yj:function(){return this.querySelectorAll(e)}}function Zj(e){return function(){return Jj(e.apply(this,arguments))}}function Qj(e){e=typeof e==`function`?Zj(e):Xj(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new FN(r,i)}function $j(e){return function(){return this.matches(e)}}function eM(e){return function(t){return t.matches(e)}}var tM=Array.prototype.find;function nM(e){return function(){return tM.call(this.children,e)}}function rM(){return this.firstElementChild}function iM(e){return this.select(e==null?rM:nM(typeof e==`function`?e:eM(e)))}var aM=Array.prototype.filter;function oM(){return Array.from(this.children)}function sM(e){return function(){return aM.call(this.children,e)}}function cM(e){return this.selectAll(e==null?oM:sM(typeof e==`function`?e:eM(e)))}function lM(e){typeof e!=`function`&&(e=$j(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new FN(r,this._parents)}function uM(e){return Array(e.length)}function dM(){return new FN(this._enter||this._groups.map(uM),this._parents)}function fM(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fM.prototype={constructor:fM,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pM(e){return function(){return e}}function mM(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new fM(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function hM(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new fM(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function gM(e){return e.__data__}function _M(e,t){if(!arguments.length)return Array.from(this,gM);var n=t?hM:mM,r=this._parents,i=this._groups;typeof e!=`function`&&(e=pM(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=vM(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m);n(u,d,h,g,c[l]=Array(f),p,t);for(var _=0,v=0,y,b;_<m;++_)if(y=h[_]){for(_>=v&&(v=_+1);!(b=g[v])&&++v<m;);y._next=b||null}}return o=new FN(o,r),o._enter=s,o._exit=c,o}function vM(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function yM(){return new FN(this._exit||this._groups.map(uM),this._parents)}function bM(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function xM(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new FN(s,this._parents)}function SM(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function CM(e){e||=wM;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new FN(i,this._parents).order()}function wM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function TM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function EM(){return Array.from(this)}function DM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function OM(){let e=0;for(let t of this)++e;return e}function kM(){return!this.node()}function AM(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function jM(e){return function(){this.removeAttribute(e)}}function MM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function NM(e,t){return function(){this.setAttribute(e,t)}}function PM(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function FM(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function IM(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function LM(e,t){var n=Vj(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?MM:jM:typeof t==`function`?n.local?IM:FM:n.local?PM:NM)(n,t))}function RM(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zM(e){return function(){this.style.removeProperty(e)}}function BM(e,t,n){return function(){this.style.setProperty(e,t,n)}}function VM(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function HM(e,t,n){return arguments.length>1?this.each((t==null?zM:typeof t==`function`?VM:BM)(e,t,n??``)):UM(this.node(),e)}function UM(e,t){return e.style.getPropertyValue(t)||RM(e).getComputedStyle(e,null).getPropertyValue(t)}function WM(e){return function(){delete this[e]}}function GM(e,t){return function(){this[e]=t}}function KM(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qM(e,t){return arguments.length>1?this.each((t==null?WM:typeof t==`function`?KM:GM)(e,t)):this.node()[e]}function JM(e){return e.trim().split(/^|\s+/)}function YM(e){return e.classList||new XM(e)}function XM(e){this._node=e,this._names=JM(e.getAttribute(`class`)||``)}XM.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function ZM(e,t){for(var n=YM(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function QM(e,t){for(var n=YM(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function $M(e){return function(){ZM(this,e)}}function eN(e){return function(){QM(this,e)}}function tN(e,t){return function(){(t.apply(this,arguments)?ZM:QM)(this,e)}}function nN(e,t){var n=JM(e+``);if(arguments.length<2){for(var r=YM(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?tN:t?$M:eN)(n,t))}function rN(){this.textContent=``}function iN(e){return function(){this.textContent=e}}function aN(e){return function(){this.textContent=e.apply(this,arguments)??``}}function oN(e){return arguments.length?this.each(e==null?rN:(typeof e==`function`?aN:iN)(e)):this.node().textContent}function sN(){this.innerHTML=``}function cN(e){return function(){this.innerHTML=e}}function lN(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function uN(e){return arguments.length?this.each(e==null?sN:(typeof e==`function`?lN:cN)(e)):this.node().innerHTML}function dN(){this.nextSibling&&this.parentNode.appendChild(this)}function fN(){return this.each(dN)}function pN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mN(){return this.each(pN)}function hN(e){var t=typeof e==`function`?e:Wj(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gN(){return null}function _N(e,t){var n=typeof e==`function`?e:Wj(e),r=t==null?gN:typeof t==`function`?t:Kj(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vN(){var e=this.parentNode;e&&e.removeChild(this)}function yN(){return this.each(vN)}function bN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SN(e){return this.select(e?xN:bN)}function CN(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function wN(e){return function(t){e.call(this,t,this.__data__)}}function TN(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function EN(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function DN(e,t,n){return function(){var r=this.__on,i,a=wN(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ON(e,t,n){var r=TN(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?DN:EN,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function kN(e,t,n){var r=RM(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function AN(e,t){return function(){return kN(this,e,t)}}function jN(e,t){return function(){return kN(this,e,t.apply(this,arguments))}}function MN(e,t){return this.each((typeof t==`function`?jN:AN)(e,t))}function*NN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var PN=[null];function FN(e,t){this._groups=e,this._parents=t}function IN(){return new FN([[document.documentElement]],PN)}function LN(){return this}FN.prototype=IN.prototype={constructor:FN,select:qj,selectAll:Qj,selectChild:iM,selectChildren:cM,filter:lM,data:_M,enter:dM,exit:yM,join:bM,merge:xM,selection:LN,order:SM,sort:CM,call:TM,nodes:EM,node:DM,size:OM,empty:kM,each:AM,attr:LM,style:HM,property:qM,classed:nN,text:oN,html:uN,raise:fN,lower:mN,append:hN,insert:_N,remove:yN,clone:SN,datum:CN,on:ON,dispatch:MN,[Symbol.iterator]:NN};var RN=IN;function zN(e){return typeof e==`string`?new FN([[document.querySelector(e)]],[document.documentElement]):new FN([[e]],PN)}function BN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function VN(e,t){if(e=BN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const HN={passive:!1},UN={capture:!0,passive:!1};function WN(e){e.stopImmediatePropagation()}function GN(e){e.preventDefault(),e.stopImmediatePropagation()}function KN(e){var t=e.document.documentElement,n=zN(e).on(`dragstart.drag`,GN,UN);`onselectstart`in t?n.on(`selectstart.drag`,GN,UN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function qN(e,t){var n=e.document.documentElement,r=zN(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,GN,UN),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var JN=e=>()=>e;function YN(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}YN.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function XN(e){return!e.ctrlKey&&!e.button}function ZN(){return this.parentNode}function QN(e,t){return t??{x:e.x,y:e.y}}function $N(){return navigator.maxTouchPoints||`ontouchstart`in this}function eP(){var e=XN,t=ZN,n=QN,r=$N,i={},a=zj(`start`,`drag`,`end`),o=0,s,c,l,u,d=0;function f(e){e.on(`mousedown.drag`,p).filter(r).on(`touchstart.drag`,g).on(`touchmove.drag`,_,HN).on(`touchend.drag touchcancel.drag`,v).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function p(n,r){if(!(u||!e.call(this,n,r))){var i=y(this,t.call(this,n,r),n,r,`mouse`);i&&(zN(n.view).on(`mousemove.drag`,m,UN).on(`mouseup.drag`,h,UN),KN(n.view),WN(n),l=!1,s=n.clientX,c=n.clientY,i(`start`,n))}}function m(e){if(GN(e),!l){var t=e.clientX-s,n=e.clientY-c;l=t*t+n*n>d}i.mouse(`drag`,e)}function h(e){zN(e.view).on(`mousemove.drag mouseup.drag`,null),qN(e.view,l),GN(e),i.mouse(`end`,e)}function g(n,r){if(e.call(this,n,r)){var i=n.changedTouches,a=t.call(this,n,r),o=i.length,s,c;for(s=0;s<o;++s)(c=y(this,a,n,r,i[s].identifier,i[s]))&&(WN(n),c(`start`,n,i[s]))}}function _(e){var t=e.changedTouches,n=t.length,r,a;for(r=0;r<n;++r)(a=i[t[r].identifier])&&(GN(e),a(`drag`,e,t[r]))}function v(e){var t=e.changedTouches,n=t.length,r,a;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),r=0;r<n;++r)(a=i[t[r].identifier])&&(WN(e),a(`end`,e,t[r]))}function y(e,t,r,s,c,l){var u=a.copy(),d=VN(l||r,t),p,m,h;if((h=n.call(e,new YN(`beforestart`,{sourceEvent:r,target:f,identifier:c,active:o,x:d[0],y:d[1],dx:0,dy:0,dispatch:u}),s))!=null)return p=h.x-d[0]||0,m=h.y-d[1]||0,function n(r,a,l){var g=d,_;switch(r){case`start`:i[c]=n,_=o++;break;case`end`:delete i[c],--o;case`drag`:d=VN(l||a,t),_=o;break}u.call(r,e,new YN(r,{sourceEvent:a,subject:h,target:f,identifier:c,active:_,x:d[0]+p,y:d[1]+m,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:u}),s)}}return f.filter=function(t){return arguments.length?(e=typeof t==`function`?t:JN(!!t),f):e},f.container=function(e){return arguments.length?(t=typeof e==`function`?e:JN(e),f):t},f.subject=function(e){return arguments.length?(n=typeof e==`function`?e:JN(e),f):n},f.touchable=function(e){return arguments.length?(r=typeof e==`function`?e:JN(!!e),f):r},f.on=function(){var e=a.on.apply(a,arguments);return e===a?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function tP(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function rP(){}var iP=.7,aP=1/iP,oP=`\\s*([+-]?\\d+)\\s*`,sP=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,cP=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,lP=/^#([0-9a-f]{3,8})$/,uP=RegExp(`^rgb\\(${oP},${oP},${oP}\\)$`),dP=RegExp(`^rgb\\(${cP},${cP},${cP}\\)$`),fP=RegExp(`^rgba\\(${oP},${oP},${oP},${sP}\\)$`),pP=RegExp(`^rgba\\(${cP},${cP},${cP},${sP}\\)$`),mP=RegExp(`^hsl\\(${sP},${cP},${cP}\\)$`),hP=RegExp(`^hsla\\(${sP},${cP},${cP},${sP}\\)$`),gP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tP(rP,xP,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_P,formatHex:_P,formatHex8:vP,formatHsl:yP,formatRgb:bP,toString:bP});function _P(){return this.rgb().formatHex()}function vP(){return this.rgb().formatHex8()}function yP(){return PP(this).formatHsl()}function bP(){return this.rgb().formatRgb()}function xP(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=lP.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?SP(t):n===3?new EP(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?CP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?CP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uP.exec(e))?new EP(t[1],t[2],t[3],1):(t=dP.exec(e))?new EP(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fP.exec(e))?CP(t[1],t[2],t[3],t[4]):(t=pP.exec(e))?CP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mP.exec(e))?NP(t[1],t[2]/100,t[3]/100,1):(t=hP.exec(e))?NP(t[1],t[2]/100,t[3]/100,t[4]):gP.hasOwnProperty(e)?SP(gP[e]):e===`transparent`?new EP(NaN,NaN,NaN,0):null}function SP(e){return new EP(e>>16&255,e>>8&255,e&255,1)}function CP(e,t,n,r){return r<=0&&(e=t=n=NaN),new EP(e,t,n,r)}function wP(e){return e instanceof rP||(e=xP(e)),e?(e=e.rgb(),new EP(e.r,e.g,e.b,e.opacity)):new EP}function TP(e,t,n,r){return arguments.length===1?wP(e):new EP(e,t,n,r??1)}function EP(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tP(EP,TP,nP(rP,{brighter(e){return e=e==null?aP:aP**+e,new EP(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?iP:iP**+e,new EP(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new EP(jP(this.r),jP(this.g),jP(this.b),AP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DP,formatHex:DP,formatHex8:OP,formatRgb:kP,toString:kP}));function DP(){return`#${MP(this.r)}${MP(this.g)}${MP(this.b)}`}function OP(){return`#${MP(this.r)}${MP(this.g)}${MP(this.b)}${MP((isNaN(this.opacity)?1:this.opacity)*255)}`}function kP(){let e=AP(this.opacity);return`${e===1?`rgb(`:`rgba(`}${jP(this.r)}, ${jP(this.g)}, ${jP(this.b)}${e===1?`)`:`, ${e})`}`}function AP(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jP(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function MP(e){return e=jP(e),(e<16?`0`:``)+e.toString(16)}function NP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new IP(e,t,n,r)}function PP(e){if(e instanceof IP)return new IP(e.h,e.s,e.l,e.opacity);if(e instanceof rP||(e=xP(e)),!e)return new IP;if(e instanceof IP)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new IP(o,s,c,e.opacity)}function FP(e,t,n,r){return arguments.length===1?PP(e):new IP(e,t,n,r??1)}function IP(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tP(IP,FP,nP(rP,{brighter(e){return e=e==null?aP:aP**+e,new IP(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?iP:iP**+e,new IP(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new EP(zP(e>=240?e-240:e+120,i,r),zP(e,i,r),zP(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new IP(LP(this.h),RP(this.s),RP(this.l),AP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=AP(this.opacity);return`${e===1?`hsl(`:`hsla(`}${LP(this.h)}, ${RP(this.s)*100}%, ${RP(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function LP(e){return e=(e||0)%360,e<0?e+360:e}function RP(e){return Math.max(0,Math.min(1,e||0))}function zP(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var BP=e=>()=>e;function VP(e,t){return function(n){return e+n*t}}function HP(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function UP(e,t){var n=t-e;return n?VP(e,n>180||n<-180?n-360*Math.round(n/360):n):BP(isNaN(e)?t:e)}function WP(e){return(e=+e)==1?GP:function(t,n){return n-t?HP(t,n,e):BP(isNaN(t)?n:t)}}function GP(e,t){var n=t-e;return n?VP(e,n):BP(isNaN(e)?t:e)}var KP=(function e(t){var n=WP(t);function r(e,t){var r=n((e=TP(e)).r,(t=TP(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=GP(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function qP(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var JP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YP=new RegExp(JP.source,`g`);function XP(e){return function(){return e}}function ZP(e){return function(t){return e(t)+``}}function QP(e,t){var n=JP.lastIndex=YP.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=JP.exec(e))&&(i=YP.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:qP(r,i)})),n=YP.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?ZP(c[0].x):XP(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}var $P=180/Math.PI,eF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tF(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*$P,skewX:Math.atan(c)*$P,scaleX:o,scaleY:s}}var nF;function rF(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?eF:tF(t.a,t.b,t.c,t.d,t.e,t.f)}function iF(e){return e==null||(nF||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),nF.setAttribute(`transform`,e),!(e=nF.transform.baseVal.consolidate()))?eF:(e=e.matrix,tF(e.a,e.b,e.c,e.d,e.e,e.f))}function aF(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:qP(e,i)},{i:c-2,x:qP(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:qP(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:qP(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:qP(e,n)},{i:s-2,x:qP(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var oF=aF(rF,`px, `,`px)`,`deg)`),sF=aF(iF,`, `,`)`,`)`),cF=1e-12;function lF(e){return((e=Math.exp(e))+1/e)/2}function uF(e){return((e=Math.exp(e))-1/e)/2}function dF(e){return((e=Math.exp(2*e))-1)/(e+1)}var fF=(function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<cF)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=lF(y),c=s/(n*g)*(i*dF(t*r+y)-uF(y));return[a+c*d,o+c*f,s*i/lF(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i})(Math.SQRT2,2,4),pF=0,mF=0,hF=0,gF=1e3,_F,vF,yF=0,bF=0,xF=0,SF=typeof performance==`object`&&performance.now?performance:Date,CF=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wF(){return bF||=(CF(TF),SF.now()+xF)}function TF(){bF=0}function EF(){this._call=this._time=this._next=null}EF.prototype=DF.prototype={constructor:EF,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?wF():+n)+(t==null?0:+t),!this._next&&vF!==this&&(vF?vF._next=this:_F=this,vF=this),this._call=e,this._time=n,MF()},stop:function(){this._call&&(this._call=null,this._time=1/0,MF())}};function DF(e,t,n){var r=new EF;return r.restart(e,t,n),r}function OF(){wF(),++pF;for(var e=_F,t;e;)(t=bF-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pF}function kF(){bF=(yF=SF.now())+xF,pF=mF=0;try{OF()}finally{pF=0,jF(),bF=0}}function AF(){var e=SF.now(),t=e-yF;t>gF&&(xF-=t,yF=e)}function jF(){for(var e,t=_F,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_F=n);vF=e,MF(r)}function MF(e){pF||(mF&&=clearTimeout(mF),e-bF>24?(e<1/0&&(mF=setTimeout(kF,e-SF.now()-xF)),hF&&=clearInterval(hF)):(hF||=(yF=SF.now(),setInterval(AF,gF)),pF=1,CF(kF)))}function NF(e,t,n){var r=new EF;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var PF=zj(`start`,`end`,`cancel`,`interrupt`),FF=[];function IF(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;BF(e,n,{name:t,index:r,group:i,on:PF,tween:FF,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function LF(e,t){var n=zF(e,t);if(n.state>0)throw Error(`too late; already scheduled`);return n}function RF(e,t){var n=zF(e,t);if(n.state>3)throw Error(`too late; already running`);return n}function zF(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function BF(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=DF(a,0,n.time);function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==1)return c();for(l in r)if(f=r[l],f.name===n.name){if(f.state===3)return NF(o);f.state===4?(f.state=6,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(NF(function(){n.state===3&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===2){for(n.state=3,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===5&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function VF(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function HF(e){return this.each(function(){VF(this,e)})}function UF(e,t){var n,r;return function(){var i=RF(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function WF(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=RF(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function GF(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=zF(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?UF:WF)(n,e,t))}function KF(e,t,n){var r=e._id;return e.each(function(){var e=RF(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return zF(e,r).value[t]}}function qF(e,t){var n;return(typeof t==`number`?qP:t instanceof xP?KP:(n=xP(t))?(t=n,KP):QP)(e,t)}function JF(e){return function(){this.removeAttribute(e)}}function YF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function XF(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function ZF(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function QF(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function $F(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function eI(e,t){var n=Vj(e),r=n===`transform`?sF:qF;return this.attrTween(e,typeof t==`function`?(n.local?$F:QF)(n,r,KF(this,`attr.`+e,t)):t==null?(n.local?YF:JF)(n):(n.local?ZF:XF)(n,r,t))}function tI(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nI(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rI(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&nI(e,i)),n}return i._value=t,i}function iI(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&tI(e,i)),n}return i._value=t,i}function aI(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=Vj(e);return this.tween(n,(r.local?rI:iI)(r,t))}function oI(e,t){return function(){LF(this,e).delay=+t.apply(this,arguments)}}function sI(e,t){return t=+t,function(){LF(this,e).delay=t}}function cI(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?oI:sI)(t,e)):zF(this.node(),t).delay}function lI(e,t){return function(){RF(this,e).duration=+t.apply(this,arguments)}}function uI(e,t){return t=+t,function(){RF(this,e).duration=t}}function dI(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?lI:uI)(t,e)):zF(this.node(),t).duration}function fI(e,t){if(typeof t!=`function`)throw Error();return function(){RF(this,e).ease=t}}function pI(e){var t=this._id;return arguments.length?this.each(fI(t,e)):zF(this.node(),t).ease}function mI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();RF(this,e).ease=n}}function hI(e){if(typeof e!=`function`)throw Error();return this.each(mI(this._id,e))}function gI(e){typeof e!=`function`&&(e=$j(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new GI(r,this._parents,this._name,this._id)}function _I(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new GI(o,this._parents,this._name,this._id)}function vI(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function yI(e,t,n){var r,i,a=vI(t)?LF:RF;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function bI(e,t){var n=this._id;return arguments.length<2?zF(this.node(),n).on.on(e):this.each(yI(n,e,t))}function xI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function SI(){return this.on(`end.remove`,xI(this._id))}function CI(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Kj(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,IF(l[f],t,n,f,l,zF(u,n)));return new GI(a,this._parents,t,n)}function wI(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Xj(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=zF(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&IF(p,t,n,h,f,m);a.push(f),o.push(u)}return new GI(a,o,t,n)}var TI=RN.prototype.constructor;function EI(){return new TI(this._groups,this._parents)}function DI(e,t){var n,r,i;return function(){var a=UM(this,e),o=(this.style.removeProperty(e),UM(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function OI(e){return function(){this.style.removeProperty(e)}}function kI(e,t,n){var r,i=n+``,a;return function(){var o=UM(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function AI(e,t,n){var r,i,a;return function(){var o=UM(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),UM(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function jI(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=RF(this,e),l=c.on,u=c.value[a]==null?s||=OI(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function MI(e,t,n){var r=(e+=``)==`transform`?oF:qF;return t==null?this.styleTween(e,DI(e,r)).on(`end.style.`+e,OI(e)):typeof t==`function`?this.styleTween(e,AI(e,r,KF(this,`style.`+e,t))).each(jI(this._id,e)):this.styleTween(e,kI(e,r,t),n).on(`end.style.`+e,null)}function NI(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function PI(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&NI(e,a,n)),r}return a._value=t,a}function FI(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,PI(e,t,n??``))}function II(e){return function(){this.textContent=e}}function LI(e){return function(){this.textContent=e(this)??``}}function RI(e){return this.tween(`text`,typeof e==`function`?LI(KF(this,`text`,e)):II(e==null?``:e+``))}function zI(e){return function(t){this.textContent=e.call(this,t)}}function BI(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&zI(r)),t}return r._value=e,r}function VI(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,BI(e))}function HI(){for(var e=this._name,t=this._id,n=qI(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=zF(c,t);IF(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new GI(r,this._parents,e,n)}function UI(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=RF(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var WI=0;function GI(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function KI(e){return RN().transition(e)}function qI(){return++WI}var JI=RN.prototype;GI.prototype=KI.prototype={constructor:GI,select:CI,selectAll:wI,selectChild:JI.selectChild,selectChildren:JI.selectChildren,filter:gI,merge:_I,selection:EI,transition:HI,call:JI.call,nodes:JI.nodes,node:JI.node,size:JI.size,empty:JI.empty,each:JI.each,on:bI,attr:eI,attrTween:aI,style:MI,styleTween:FI,text:RI,textTween:VI,remove:SI,tween:GF,delay:cI,duration:dI,ease:pI,easeVarying:hI,end:UI,[Symbol.iterator]:JI[Symbol.iterator]};function YI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var XI={time:null,delay:0,duration:250,ease:YI};function ZI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function QI(e){var t,n;e instanceof GI?(t=e._id,e=e._name):(t=qI(),(n=XI).time=wF(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&IF(c,e,t,l,o,n||ZI(c,t));return new GI(r,this._parents,e,t)}RN.prototype.interrupt=HF,RN.prototype.transition=QI;var $I=e=>()=>e;function eL(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tL(e,t,n){this.k=e,this.x=t,this.y=n}tL.prototype={constructor:tL,scale:function(e){return e===1?this:new tL(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tL(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var nL=new tL(1,0,0);rL.prototype=tL.prototype;function rL(e){for(;!e.__zoom;)if(!(e=e.parentNode))return nL;return e.__zoom}function iL(e){e.stopImmediatePropagation()}function aL(e){e.preventDefault(),e.stopImmediatePropagation()}function oL(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function sL(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cL(){return this.__zoom||nL}function lL(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function uL(){return navigator.maxTouchPoints||`ontouchstart`in this}function dL(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function fL(){var e=oL,t=sL,n=dL,r=lL,i=uL,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=fF,l=zj(`start`,`zoom`,`end`),u,d,f,p=500,m=150,h=0,g=10;function _(e){e.property(`__zoom`,cL).on(`wheel.zoom`,w,{passive:!1}).on(`mousedown.zoom`,T).on(`dblclick.zoom`,E).filter(i).on(`touchstart.zoom`,D).on(`touchmove.zoom`,O).on(`touchend.zoom touchcancel.zoom`,k).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}_.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,cL),e===i?i.interrupt().each(function(){S(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):x(e,t,n,r)},_.scaleBy=function(e,t,n,r){_.scaleTo(e,function(){return this.__zoom.k*(typeof t==`function`?t.apply(this,arguments):t)},n,r)},_.scaleTo=function(e,r,i,a){_.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?b(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(y(v(a,l),s,c),e,o)},i,a)},_.translateBy=function(e,r,i,a){_.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},_.translateTo=function(e,r,i,a,s){_.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?b(e):typeof a==`function`?a.apply(this,arguments):a;return n(nL.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function v(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new tL(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new tL(e.k,r,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,n,r,i){e.on(`start.zoom`,function(){S(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){S(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=S(e,a).event(i),s=t.apply(e,a),l=r==null?b(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new tL(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function S(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=zN(this.that).datum();l.call(e,this.that,new eL(e,{sourceEvent:this.sourceEvent,target:_,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function w(t,...i){if(!e.apply(this,arguments))return;var s=S(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=VN(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],VF(this),s.start();aL(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(y(v(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function T(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=S(this,r,!0).event(t),s=zN(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=VN(t,i),l=t.clientX,u=t.clientY;KN(t.view),iL(t),a.mouse=[c,this.__zoom.invert(c)],VF(this),a.start();function d(e){if(aL(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>h}a.event(e).zoom(`mouse`,n(y(a.that.__zoom,a.mouse[0]=VN(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),qN(e.view,a.moved),aL(e),a.event(e).end()}}function E(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=VN(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(y(v(a,u),c,l),t.apply(this,i),o);aL(r),s>0?zN(this).transition().duration(s).call(x,d,c,r):zN(this).call(_.transform,d,c,r)}}function D(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=S(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(iL(t),s=0;s<i;++s)c=r[s],l=VN(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),VF(this),a.start())}}function O(e,...t){if(this.__zooming){var r=S(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(aL(e),s=0;s<a;++s)c=i[s],l=VN(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=v(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(y(c,l,u),r.extent,o))}}function k(e,...t){if(this.__zooming){var n=S(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(iL(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=VN(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<g)){var s=zN(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return _.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:$I(+e),_):r},_.filter=function(t){return arguments.length?(e=typeof t==`function`?t:$I(!!t),_):e},_.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:$I(!!e),_):i},_.extent=function(e){return arguments.length?(t=typeof e==`function`?e:$I([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),_):t},_.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],_):[a[0],a[1]]},_.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(e){return arguments.length?(n=e,_):n},_.duration=function(e){return arguments.length?(s=+e,_):s},_.interpolate=function(e){return arguments.length?(c=e,_):c},_.on=function(){var e=l.on.apply(l,arguments);return e===l?_:e},_.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,_):Math.sqrt(h)},_.tapDistance=function(e){return arguments.length?(g=+e,_):g},_}k();var pL=(0,H.createContext)(null),mL=pL.Provider,hL={error001:()=>`[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001`,error002:()=>`It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.`,error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>`The React Flow parent container needs a width and a height to render the graph.`,error005:()=>`Only child nodes can use a parent extent.`,error006:()=>`Can't create edge. An edge needs a source and a target.`,error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?`target`:`source`} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>`Handle: No node id found. Make sure to only use a Handle inside a custom Node.`,error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},gL=hL.error001();function _L(e,t){let n=(0,H.useContext)(pL);if(n===null)throw Error(gL);return kj(n,e,t)}var vL=()=>{let e=(0,H.useContext)(pL);if(e===null)throw Error(gL);return(0,H.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},yL=e=>e.userSelectionActive?`none`:`all`;function bL({position:e,children:t,className:n,style:r,...i}){let a=_L(yL),o=`${e}`.split(`-`);return H.createElement(`div`,{className:wj([`react-flow__panel`,n,...o]),style:{...r,pointerEvents:a},...i},t)}function xL({proOptions:e,position:t=`bottom-right`}){return e?.hideAttribution?null:H.createElement(bL,{position:t,className:`react-flow__attribution`,"data-message":`Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro`},H.createElement(`a`,{href:`https://reactflow.dev`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`React Flow attribution`},`React Flow`))}var SL=(0,H.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{let d=(0,H.useRef)(null),[f,p]=(0,H.useState)({x:0,y:0,width:0,height:0}),m=wj([`react-flow__edge-textwrapper`,l]);return(0,H.useEffect)(()=>{if(d.current){let e=d.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n===void 0||!n?null:H.createElement(`g`,{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:m,visibility:f.width?`visible`:`hidden`,...u},i&&H.createElement(`rect`,{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:`react-flow__edge-textbg`,style:a,rx:s,ry:s}),H.createElement(`text`,{className:`react-flow__edge-text`,y:f.height/2,dy:`0.3em`,ref:d,style:r},n),c)}),CL=e=>({width:e.offsetWidth,height:e.offsetHeight}),wL=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),TL=(e={x:0,y:0},t)=>({x:wL(e.x,t[0][0],t[1][0]),y:wL(e.y,t[0][1],t[1][1])}),EL=(e,t,n)=>e<t?wL(Math.abs(e-t),1,50)/50:e>n?-wL(Math.abs(e-n),1,50)/50:0,DL=(e,t)=>[EL(e.x,35,t.width-35)*20,EL(e.y,35,t.height-35)*20],OL=e=>e.getRootNode?.()||window?.document,kL=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),AL=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),jL=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ML=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),NL=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},PL=e=>FL(e.width)&&FL(e.height)&&FL(e.x)&&FL(e.y),FL=e=>!isNaN(e)&&isFinite(e),IL=Symbol.for(`internals`),LL=[`Enter`,` `,`Escape`],RL=(e,t)=>{},zL=e=>`nativeEvent`in e;function BL(e){let t=(zL(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return[`INPUT`,`SELECT`,`TEXTAREA`].includes(t?.nodeName)||t?.hasAttribute(`contenteditable`)||!!t?.closest(`.nokey`)}var VL=e=>`clientX`in e,HL=(e,t)=>{let n=VL(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},UL=()=>typeof navigator<`u`&&navigator?.userAgent?.indexOf(`Mac`)>=0,WL=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p=20})=>H.createElement(H.Fragment,null,H.createElement(`path`,{id:e,style:u,d:t,fill:`none`,className:`react-flow__edge-path`,markerEnd:d,markerStart:f}),p&&H.createElement(`path`,{d:t,fill:`none`,strokeOpacity:0,strokeWidth:p,className:`react-flow__edge-interaction`}),i&&FL(n)&&FL(r)?H.createElement(SL,{x:n,y:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null);WL.displayName=`BaseEdge`;function GL(e,t,n){return n===void 0?n:r=>{let i=t().edges.find(t=>t.id===e);i&&n(r,{...i})}}function KL({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=n<e?n+i:n-i,o=Math.abs(r-t)/2;return[a,r<t?r+o:r-o,i,o]}function qL({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let c=e*.125+i*.375+o*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125;return[c,l,Math.abs(c-e),Math.abs(l-t)]}var JL;(function(e){e.Strict=`strict`,e.Loose=`loose`})(JL||={});var YL;(function(e){e.Free=`free`,e.Vertical=`vertical`,e.Horizontal=`horizontal`})(YL||={});var XL;(function(e){e.Partial=`partial`,e.Full=`full`})(XL||={});var ZL;(function(e){e.Bezier=`default`,e.Straight=`straight`,e.Step=`step`,e.SmoothStep=`smoothstep`,e.SimpleBezier=`simplebezier`})(ZL||={});var QL;(function(e){e.Arrow=`arrow`,e.ArrowClosed=`arrowclosed`})(QL||={});var Z;(function(e){e.Left=`left`,e.Top=`top`,e.Right=`right`,e.Bottom=`bottom`})(Z||={});function $L({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Z.Left||e===Z.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function eR({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top}){let[o,s]=$L({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=$L({pos:a,x1:r,y1:i,x2:e,y2:t}),[u,d,f,p]=qL({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${s} ${c},${l} ${r},${i}`,u,d,f,p]}var tR=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:a=Z.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})=>{let[g,_,v]=eR({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a});return H.createElement(WL,{path:g,labelX:_,labelY:v,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})});tR.displayName=`SimpleBezierEdge`;var nR={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},rR=({source:e,sourcePosition:t=Z.Bottom,target:n})=>t===Z.Left||t===Z.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},iR=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function aR({source:e,sourcePosition:t=Z.Bottom,target:n,targetPosition:r=Z.Top,center:i,offset:a}){let o=nR[t],s=nR[r],c={x:e.x+o.x*a,y:e.y+o.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=rR({source:c,sourcePosition:t,target:l}),d=u.x===0?`y`:`x`,f=u[d],p=[],m,h,g={x:0,y:0},_={x:0,y:0},[v,y,b,x]=KL({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){m=i.x??v,h=i.y??y;let e=[{x:m,y:c.y},{x:m,y:l.y}],t=[{x:c.x,y:h},{x:l.x,y:h}];p=o[d]===f?d===`x`?e:t:d===`x`?t:e}else{let i=[{x:c.x,y:l.y}],u=[{x:l.x,y:c.y}];if(p=d===`x`?o.x===f?u:i:o.y===f?i:u,t===r){let t=Math.abs(e[d]-n[d]);if(t<=a){let r=Math.min(a-1,a-t);o[d]===f?g[d]=(c[d]>e[d]?-1:1)*r:_[d]=(l[d]>n[d]?-1:1)*r}}if(t!==r){let e=d===`x`?`y`:`x`,t=o[d]===s[e],n=c[e]>l[e],r=c[e]<l[e];(o[d]===1&&(!t&&n||t&&r)||o[d]!==1&&(!t&&r||t&&n))&&(p=d===`x`?i:u)}let v={x:c.x+g.x,y:c.y+g.y},y={x:l.x+_.x,y:l.y+_.y};Math.max(Math.abs(v.x-p[0].x),Math.abs(y.x-p[0].x))>=Math.max(Math.abs(v.y-p[0].y),Math.abs(y.y-p[0].y))?(m=(v.x+y.x)/2,h=p[0].y):(m=p[0].x,h=(v.y+y.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...p,{x:l.x+_.x,y:l.y+_.y},n],m,h,b,x]}function oR(e,t,n,r){let i=Math.min(iR(e,t)/2,iR(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1;return`L ${a},${o+i*(e.y<n.y?-1:1)}Q ${a},${o} ${a+i*s},${o}`}function sR({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,borderRadius:o=5,centerX:s,centerY:c,offset:l=20}){let[u,d,f,p,m]=aR({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((e,t,n)=>{let r=``;return r=n>0&&n<u.length-1?oR(u[n-1],t,u[n+1],o):`${n===0?`M`:`L`}${t.x} ${t.y}`,e+=r,e},``),d,f,p,m]}var cR=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:d=Z.Bottom,targetPosition:f=Z.Top,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=sR({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:h?.borderRadius,offset:h?.offset});return H.createElement(WL,{path:_,labelX:v,labelY:y,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:m,interactionWidth:g})});cR.displayName=`SmoothStepEdge`;var lR=(0,H.memo)(e=>H.createElement(cR,{...e,pathOptions:(0,H.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));lR.displayName=`StepEdge`;function uR({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,a,o,s]=KL({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,o,s]}var dR=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})=>{let[m,h,g]=uR({sourceX:e,sourceY:t,targetX:n,targetY:r});return H.createElement(WL,{path:m,labelX:h,labelY:g,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})});dR.displayName=`StraightEdge`;function fR(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function pR({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Z.Left:return[t-fR(t-r,a),n];case Z.Right:return[t+fR(r-t,a),n];case Z.Top:return[t,n-fR(n-i,a)];case Z.Bottom:return[t,n+fR(i-n,a)]}}function mR({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,curvature:o=.25}){let[s,c]=pR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=pR({pos:a,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,p,m]=qL({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,p,m]}var hR=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:a=Z.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=mR({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a,curvature:h?.curvature});return H.createElement(WL,{path:_,labelX:v,labelY:y,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g})});hR.displayName=`BezierEdge`;var gR=(0,H.createContext)(null),_R=gR.Provider;gR.Consumer;var vR=()=>(0,H.useContext)(gR),yR=e=>`id`in e&&`source`in e&&`target`in e,bR=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||``}-${n}${r||``}`,xR=(e,t)=>e===void 0?``:typeof e==`string`?e:`${t?`${t}__`:``}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join(`&`)}`,SR=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),CR=(e,t)=>{if(!e.source||!e.target)return hL.error006(),t;let n;return n=yR(e)?{...e}:{...e,id:bR(e)},SR(n,t)?t:t.concat(n)},wR=({x:e,y:t},[n,r,i],a,[o,s])=>{let c={x:(e-n)/i,y:(t-r)/i};return a?{x:o*Math.round(c.x/o),y:s*Math.round(c.y/s)}:c},TR=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),ER=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},DR=(e,t=[0,0])=>e.length===0?{x:0,y:0,width:0,height:0}:jL(e.reduce((e,n)=>{let{x:r,y:i}=ER(n,t).positionAbsolute;return kL(e,AL({x:r,y:i,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),OR=(e,t,[n,r,i]=[0,0,1],a=!1,o=!1,s=[0,0])=>{let c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:i=!1}=e;if(o&&!r||i)return!1;let{positionAbsolute:u}=ER(e,s),d=NL(c,{x:u.x,y:u.y,width:t||0,height:n||0}),f=t===void 0||n===void 0||t===null||n===null,p=a&&d>0,m=(t||0)*(n||0);(f||p||d>=m||e.dragging)&&l.push(e)}),l},kR=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},AR=(e,t,n,r,i,a=.1)=>{let o=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=wL(Math.min(o,s),r,i),l=e.x+e.width/2,u=e.y+e.height/2;return{x:t/2-l*c,y:n/2-u*c,zoom:c}},jR=(e,t=0)=>e.transition().duration(t);function MR(e,t,n,r){return(t[n]||[]).reduce((t,i)=>(`${e.id}-${i.id}-${n}`!==r&&t.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),t),[])}function NR(e,t,n,r,i,a){let{x:o,y:s}=HL(e),c=t.elementsFromPoint(o,s).find(e=>e.classList.contains(`react-flow__handle`));if(c){let e=c.getAttribute(`data-nodeid`);if(e){let t=RR(void 0,c),r=c.getAttribute(`data-handleid`),o=a({nodeId:e,id:r,type:t});if(o){let a=i.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:o}}}}let l=[],u=1/0;if(i.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=a(e);t<=u&&(t<u?l=[{handle:e,validHandleResult:n}]:t===u&&l.push({handle:e,validHandleResult:n}),u=t)}}),!l.length)return{handle:null,validHandleResult:FR()};if(l.length===1)return l[0];let d=l.some(({validHandleResult:e})=>e.isValid),f=l.some(({handle:e})=>e.type===`target`);return l.find(({handle:e,validHandleResult:t})=>f?e.type===`target`:d?t.isValid:!0)||l[0]}var PR={source:null,target:null,sourceHandle:null,targetHandle:null},FR=()=>({handleDomNode:null,isValid:!1,connection:PR,endHandle:null});function IR(e,t,n,r,i,a,o){let s=i===`target`,c=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...FR(),handleDomNode:c};if(c){let e=RR(void 0,c),i=c.getAttribute(`data-nodeid`),o=c.getAttribute(`data-handleid`),u=c.classList.contains(`connectable`),d=c.classList.contains(`connectableend`),f={source:s?i:n,sourceHandle:s?o:r,target:s?n:i,targetHandle:s?r:o};l.connection=f,u&&d&&(t===JL.Strict?s&&e===`source`||!s&&e===`target`:i!==n||o!==r)&&(l.endHandle={nodeId:i,handleId:o,type:e},l.isValid=a(f))}return l}function LR({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,i)=>{if(i[IL]){let{handleBounds:a}=i[IL],o=[],s=[];a&&(o=MR(i,a,`source`,`${t}-${n}-${r}`),s=MR(i,a,`target`,`${t}-${n}-${r}`)),e.push(...o,...s)}return e},[])}function RR(e,t){return e||(t?.classList.contains(`target`)?`target`:t?.classList.contains(`source`)?`source`:null)}function zR(e){e?.classList.remove(`valid`,`connecting`,`react-flow__handle-valid`,`react-flow__handle-connecting`)}function BR(e,t){let n=null;return t?n=`valid`:e&&!t&&(n=`invalid`),n}function VR({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:a,setState:o,isValidConnection:s,edgeUpdaterType:c,onReconnectEnd:l}){let u=OL(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:p,connectionRadius:m,onConnectStart:h,panBy:g,getNodes:_,cancelConnection:v}=a(),y=0,b,{x,y:S}=HL(e),C=u?.elementFromPoint(x,S),w=RR(c,C),T=f?.getBoundingClientRect();if(!T||!w)return;let E,D=HL(e,T),O=!1,k=null,A=!1,j=null,M=LR({nodes:_(),nodeId:n,handleId:t,handleType:w}),N=()=>{if(!p)return;let[e,t]=DL(D,T);g({x:e,y:t}),y=requestAnimationFrame(N)};o({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:w,connectionStartHandle:{nodeId:n,handleId:t,type:w},connectionEndHandle:null}),h?.(e,{nodeId:n,handleId:t,handleType:w});function P(e){let{transform:r}=a();D=HL(e,T);let{handle:c,validHandleResult:l}=NR(e,u,wR(D,r,!1,[1,1]),m,M,e=>IR(e,d,n,t,i?`target`:`source`,s,u));if(b=c,O||=(N(),!0),j=l.handleDomNode,k=l.connection,A=l.isValid,o({connectionPosition:b&&A?TR({x:b.x,y:b.y},r):D,connectionStatus:BR(!!b,A),connectionEndHandle:l.endHandle}),!b&&!A&&!j)return zR(E);k.source!==k.target&&j&&(zR(E),E=j,j.classList.add(`connecting`,`react-flow__handle-connecting`),j.classList.toggle(`valid`,A),j.classList.toggle(`react-flow__handle-valid`,A))}function F(e){(b||j)&&k&&A&&r?.(k),a().onConnectEnd?.(e),c&&l?.(e),zR(E),v(),cancelAnimationFrame(y),O=!1,A=!1,k=null,j=null,u.removeEventListener(`mousemove`,P),u.removeEventListener(`mouseup`,F),u.removeEventListener(`touchmove`,P),u.removeEventListener(`touchend`,F)}u.addEventListener(`mousemove`,P),u.addEventListener(`mouseup`,F),u.addEventListener(`touchmove`,P),u.addEventListener(`touchend`,F)}var HR=()=>!0,UR=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),WR=(e,t,n)=>r=>{let{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:o}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n}},GR=(0,H.forwardRef)(({type:e=`source`,position:t=Z.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:o,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p)=>{let m=o||null,h=e===`target`,g=vL(),_=vR(),{connectOnClick:v,noPanClassName:y}=_L(UR,Mj),{connecting:b,clickConnecting:x}=_L(WR(_,m,e),Mj);_||g.getState().onError?.(`010`,hL.error010());let S=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),i={...t,...e};if(r){let{edges:e,setEdges:t}=g.getState();t(CR(i,e))}n?.(i),s?.(i)},C=e=>{if(!_)return;let t=VL(e);i&&(t&&e.button===0||!t)&&VR({event:e,handleId:m,nodeId:_,onConnect:S,isTarget:h,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||HR}),t?u?.(e):d?.(e)},w=t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:o,connectionMode:s,isValidConnection:c}=g.getState();if(!_||!o&&!i)return;if(!o){r?.(t,{nodeId:_,handleId:m,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:m}});return}let l=OL(t.target),u=n||c||HR,{connection:d,isValid:f}=IR({nodeId:_,id:m,type:e},s,o.nodeId,o.handleId||null,o.type,u,l);f&&S(d),a?.(t),g.setState({connectionClickStartHandle:null})};return H.createElement(`div`,{"data-handleid":m,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${m}-${e}`,className:wj([`react-flow__handle`,`react-flow__handle-${t}`,`nodrag`,y,l,{source:!h,target:h,connectable:r,connectablestart:i,connectableend:a,connecting:x,connectionindicator:r&&(i&&!b||a&&b)}]),onMouseDown:C,onTouchStart:C,onClick:v?w:void 0,ref:p,...f},c)});GR.displayName=`Handle`;var KR=(0,H.memo)(GR),qR=({data:e,isConnectable:t,targetPosition:n=Z.Top,sourcePosition:r=Z.Bottom})=>H.createElement(H.Fragment,null,H.createElement(KR,{type:`target`,position:n,isConnectable:t}),e?.label,H.createElement(KR,{type:`source`,position:r,isConnectable:t}));qR.displayName=`DefaultNode`;var JR=(0,H.memo)(qR),YR=({data:e,isConnectable:t,sourcePosition:n=Z.Bottom})=>H.createElement(H.Fragment,null,e?.label,H.createElement(KR,{type:`source`,position:n,isConnectable:t}));YR.displayName=`InputNode`;var XR=(0,H.memo)(YR),ZR=({data:e,isConnectable:t,targetPosition:n=Z.Top})=>H.createElement(H.Fragment,null,H.createElement(KR,{type:`target`,position:n,isConnectable:t}),e?.label);ZR.displayName=`OutputNode`;var QR=(0,H.memo)(ZR),$R=()=>null;$R.displayName=`GroupNode`;var ez=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),tz=e=>e.id;function nz(e,t){return Mj(e.selectedNodes.map(tz),t.selectedNodes.map(tz))&&Mj(e.selectedEdges.map(tz),t.selectedEdges.map(tz))}var rz=(0,H.memo)(({onSelectionChange:e})=>{let t=vL(),{selectedNodes:n,selectedEdges:r}=_L(ez,nz);return(0,H.useEffect)(()=>{let i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(e=>e(i))},[n,r,e]),null});rz.displayName=`SelectionListener`;var iz=e=>!!e.onSelectionChange;function az({onSelectionChange:e}){let t=_L(iz);return e||t?H.createElement(rz,{onSelectionChange:e}):null}var oz=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function sz(e,t){(0,H.useEffect)(()=>{e!==void 0&&t(e)},[e])}function cz(e,t,n){(0,H.useEffect)(()=>{t!==void 0&&n({[e]:t})},[t])}var lz=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:a,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:m,minZoom:h,maxZoom:g,nodeExtent:_,onNodesChange:v,onEdgesChange:y,elementsSelectable:b,connectionMode:x,snapGrid:S,snapToGrid:C,translateExtent:w,connectOnClick:T,defaultEdgeOptions:E,fitView:D,fitViewOptions:O,onNodesDelete:k,onEdgesDelete:A,onNodeDrag:j,onNodeDragStart:M,onNodeDragStop:N,onSelectionDrag:P,onSelectionDragStart:F,onSelectionDragStop:ee,noPanClassName:I,nodeOrigin:L,rfId:te,autoPanOnConnect:ne,autoPanOnNodeDrag:re,onError:ie,connectionRadius:ae,isValidConnection:oe,nodeDragThreshold:se})=>{let{setNodes:ce,setEdges:le,setDefaultNodesAndEdges:ue,setMinZoom:de,setMaxZoom:fe,setTranslateExtent:pe,setNodeExtent:me,reset:he}=_L(oz,Mj),R=vL();return(0,H.useEffect)(()=>{let e=r?.map(e=>({...e,...E}));return ue(n,e),()=>{he()}},[]),cz(`defaultEdgeOptions`,E,R.setState),cz(`connectionMode`,x,R.setState),cz(`onConnect`,i,R.setState),cz(`onConnectStart`,a,R.setState),cz(`onConnectEnd`,o,R.setState),cz(`onClickConnectStart`,s,R.setState),cz(`onClickConnectEnd`,c,R.setState),cz(`nodesDraggable`,l,R.setState),cz(`nodesConnectable`,u,R.setState),cz(`nodesFocusable`,d,R.setState),cz(`edgesFocusable`,f,R.setState),cz(`edgesUpdatable`,p,R.setState),cz(`elementsSelectable`,b,R.setState),cz(`elevateNodesOnSelect`,m,R.setState),cz(`snapToGrid`,C,R.setState),cz(`snapGrid`,S,R.setState),cz(`onNodesChange`,v,R.setState),cz(`onEdgesChange`,y,R.setState),cz(`connectOnClick`,T,R.setState),cz(`fitViewOnInit`,D,R.setState),cz(`fitViewOnInitOptions`,O,R.setState),cz(`onNodesDelete`,k,R.setState),cz(`onEdgesDelete`,A,R.setState),cz(`onNodeDrag`,j,R.setState),cz(`onNodeDragStart`,M,R.setState),cz(`onNodeDragStop`,N,R.setState),cz(`onSelectionDrag`,P,R.setState),cz(`onSelectionDragStart`,F,R.setState),cz(`onSelectionDragStop`,ee,R.setState),cz(`noPanClassName`,I,R.setState),cz(`nodeOrigin`,L,R.setState),cz(`rfId`,te,R.setState),cz(`autoPanOnConnect`,ne,R.setState),cz(`autoPanOnNodeDrag`,re,R.setState),cz(`onError`,ie,R.setState),cz(`connectionRadius`,ae,R.setState),cz(`isValidConnection`,oe,R.setState),cz(`nodeDragThreshold`,se,R.setState),sz(e,ce),sz(t,le),sz(h,de),sz(g,fe),sz(w,pe),sz(_,me),null},uz={display:`none`},dz={position:`absolute`,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,clipPath:`inset(100%)`},fz=`react-flow__node-desc`,pz=`react-flow__edge-desc`,mz=`react-flow__aria-live`,hz=e=>e.ariaLiveMessage;function gz({rfId:e}){let t=_L(hz);return H.createElement(`div`,{id:`${mz}-${e}`,"aria-live":`assertive`,"aria-atomic":`true`,style:dz},t)}function _z({rfId:e,disableKeyboardA11y:t}){return H.createElement(H.Fragment,null,H.createElement(`div`,{id:`${fz}-${e}`,style:uz},`Press enter or space to select a node.`,!t&&`You can then use the arrow keys to move the node around.`,` Press delete to remove it and escape to cancel.`,` `),H.createElement(`div`,{id:`${pz}-${e}`,style:uz},`Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.`),!t&&H.createElement(gz,{rfId:e}))}var vz=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,H.useState)(!1),i=(0,H.useRef)(!1),a=(0,H.useRef)(new Set([])),[o,s]=(0,H.useMemo)(()=>{if(e!==null){let t=(Array.isArray(e)?e:[e]).filter(e=>typeof e==`string`).map(e=>e.split(`+`));return[t,t.reduce((e,t)=>e.concat(...t),[])]}return[[],[]]},[e]);return(0,H.useEffect)(()=>{let n=typeof document<`u`?document:null,c=t?.target||n;if(e!==null){let e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&BL(e))return!1;let n=bz(e.code,s);a.current.add(e[n]),yz(o,a.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&BL(e))return!1;let n=bz(e.code,s);yz(o,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),e.key===`Meta`&&a.current.clear(),i.current=!1},l=()=>{a.current.clear(),r(!1)};return c?.addEventListener(`keydown`,e),c?.addEventListener(`keyup`,n),window.addEventListener(`blur`,l),()=>{c?.removeEventListener(`keydown`,e),c?.removeEventListener(`keyup`,n),window.removeEventListener(`blur`,l)}}},[e,r]),n};function yz(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function bz(e,t){return t.includes(e)?`code`:`key`}function xz(e,t,n,r){let i=e.parentNode||e.parentId;if(!i)return n;let a=t.get(i),o=ER(a,r);return xz(a,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(a[IL]?.z??0)>(n.z??0)?a[IL]?.z??0:n.z??0},r)}function Sz(e,t,n){e.forEach(r=>{let i=r.parentNode||r.parentId;if(i&&!e.has(i))throw Error(`Parent node ${i} not found`);if(i||n?.[r.id]){let{x:i,y:a,z:o}=xz(r,e,{...r.position,z:r[IL]?.z??0},t);r.positionAbsolute={x:i,y:a},r[IL].z=o,n?.[r.id]&&(r[IL].isParent=!0)}})}function Cz(e,t,n,r){let i=new Map,a={},o=r?1e3:0;return e.forEach(e=>{let n=(FL(e.zIndex)?e.zIndex:0)+(e.selected?o:0),r=t.get(e.id),s={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(a[c]=!0);let l=r?.type&&r?.type!==e.type;Object.defineProperty(s,IL,{enumerable:!1,value:{handleBounds:l?void 0:r?.[IL]?.handleBounds,z:n}}),i.set(e.id,s)}),Sz(i,n,a),i}function wz(e,t={}){let{getNodes:n,width:r,height:i,minZoom:a,maxZoom:o,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!l&&u;if(s&&c&&(f||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),l=e.every(e=>e.width&&e.height);if(e.length>0&&l){let{x:n,y:l,zoom:u}=AR(DR(e,d),r,i,t.minZoom??a,t.maxZoom??o,t.padding??.1),f=nL.translate(n,l).scale(u);return typeof t.duration==`number`&&t.duration>0?s.transform(jR(c,t.duration),f):s.transform(c,f),!0}}return!1}function Tz(e,t){return e.forEach(e=>{let n=t.get(e.id);n&&t.set(n.id,{...n,[IL]:n[IL],selected:e.selected})}),new Map(t)}function Ez(e,t){return t.map(t=>{let n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function Dz({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:i,edges:a,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e?.length&&(c&&r({nodeInternals:Tz(e,i)}),o?.(e)),t?.length&&(l&&r({edges:Ez(t,a)}),s?.(t))}var Oz=()=>{},kz={zoomIn:Oz,zoomOut:Oz,zoomTo:Oz,getZoom:()=>1,setViewport:Oz,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Oz,fitBounds:Oz,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Az=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),jz=()=>{let e=vL(),{d3Zoom:t,d3Selection:n}=_L(Az,Mj);return(0,H.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(jR(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(jR(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(jR(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{let[a,o,s]=e.getState().transform,c=nL.translate(r.x??a,r.y??o).scale(r.zoom??s);t.transform(jR(n,i?.duration),c)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>wz(e.getState,t),setCenter:(r,i,a)=>{let{width:o,height:s,maxZoom:c}=e.getState(),l=a?.zoom===void 0?c:a.zoom,u=o/2-r*l,d=s/2-i*l,f=nL.translate(u,d).scale(l);t.transform(jR(n,a?.duration),f)},fitBounds:(r,i)=>{let{width:a,height:o,minZoom:s,maxZoom:c}=e.getState(),{x:l,y:u,zoom:d}=AR(r,a,o,s,c,i?.padding??.1),f=nL.translate(l,u).scale(d);t.transform(jR(n,i?.duration),f)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:i}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),wR(t,n,r,i)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:i,domNode:a}=e.getState();if(!a)return t;let{x:o,y:s}=a.getBoundingClientRect();return wR({x:t.x-o,y:t.y-s},n,r,i)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:i,y:a}=r.getBoundingClientRect(),o=TR(t,n);return{x:o.x+i,y:o.y+a}},viewportInitialized:!0}:kz,[t,n])};function Mz(){let e=jz(),t=vL(),n=(0,H.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,H.useCallback)(e=>t.getState().nodeInternals.get(e),[]),i=(0,H.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),a=(0,H.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),o=(0,H.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:i,onNodesChange:a}=t.getState(),o=n(),s=typeof e==`function`?e(o):e;i?r(s):a&&a(s.length===0?o.map(e=>({type:`remove`,id:e.id})):s.map(e=>({item:e,type:`reset`})))},[]),s=(0,H.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:a}=t.getState(),o=typeof e==`function`?e(n):e;i?r(o):a&&a(o.length===0?n.map(e=>({type:`remove`,id:e.id})):o.map(e=>({item:e,type:`reset`})))},[]),c=(0,H.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:i,hasDefaultNodes:a,onNodesChange:o}=t.getState();a?i([...r(),...n]):o&&o(n.map(e=>({item:e,type:`add`})))},[]),l=(0,H.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:i,hasDefaultEdges:a,onEdgesChange:o}=t.getState();a?i([...r,...n]):o&&o(n.map(e=>({item:e,type:`add`})))},[]),u=(0,H.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[i,a,o]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:a,zoom:o}}},[]),d=(0,H.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:i,edges:a,hasDefaultNodes:o,hasDefaultEdges:s,onNodesDelete:c,onEdgesDelete:l,onNodesChange:u,onEdgesChange:d}=t.getState(),f=(e||[]).map(e=>e.id),p=(n||[]).map(e=>e.id),m=i().reduce((e,t)=>{let n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return(typeof t.deletable!=`boolean`||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),h=a.filter(e=>typeof e.deletable==`boolean`?e.deletable:!0),g=h.filter(e=>p.includes(e.id));if(m||g){let e=kR(m,h),n=[...g,...e],i=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(s||o)&&(s&&t.setState({edges:a.filter(e=>!i.includes(e.id))}),o&&(m.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),i.length>0&&(l?.(n),d&&d(i.map(e=>({id:e,type:`remove`})))),m.length>0&&(c?.(m),u&&u(m.map(e=>({id:e.id,type:`remove`}))))}},[]),f=(0,H.useCallback)(e=>{let n=PL(e),r=n?null:t.getState().nodeInternals.get(e.id);return!n&&!r?[null,null,n]:[n?e:ML(r),r,n]},[]),p=(0,H.useCallback)((e,n=!0,r)=>{let[i,a,o]=f(e);return i?(r||t.getState().getNodes()).filter(e=>{if(!o&&(e.id===a.id||!e.positionAbsolute))return!1;let t=NL(ML(e),i);return n&&t>0||t>=i.width*i.height}):[]},[]),m=(0,H.useCallback)((e,t,n=!0)=>{let[r]=f(e);if(!r)return!1;let i=NL(r,t);return n&&i>0||i>=r.width*r.height},[]);return(0,H.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:o,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,r,i,a,o,s,c,l,u,d,p,m])}var Nz={actInsideInputWithModifier:!1},Pz=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=vL(),{deleteElements:r}=Mz(),i=vz(e,Nz),a=vz(t);(0,H.useEffect)(()=>{if(i){let{edges:e,getNodes:t}=n.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,H.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])};function Fz(e){let t=vL();(0,H.useEffect)(()=>{let n,r=()=>{if(!e.current)return;let n=CL(e.current);(n.height===0||n.width===0)&&t.getState().onError?.(`004`,hL.error004()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener(`resize`,r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener(`resize`,r),n&&e.current&&n.unobserve(e.current)}},[])}var Iz={position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},Lz=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Rz=e=>({x:e.x,y:e.y,zoom:e.k}),zz=(e,t)=>e.target.closest(`.${t}`),Bz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Vz=e=>{let t=e.ctrlKey&&UL()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Hz=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Uz=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=YL.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:p,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:_=!0,children:v,noWheelClassName:y,noPanClassName:b})=>{let x=(0,H.useRef)(),S=vL(),C=(0,H.useRef)(!1),w=(0,H.useRef)(!1),T=(0,H.useRef)(null),E=(0,H.useRef)({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:k,userSelectionActive:A}=_L(Hz,Mj),j=vz(g),M=(0,H.useRef)(0),N=(0,H.useRef)(!1),P=(0,H.useRef)();return Fz(T),(0,H.useEffect)(()=>{if(T.current){let e=T.current.getBoundingClientRect(),t=fL().scaleExtent([m,h]).translateExtent(p),n=zN(T.current).call(t),r=nL.translate(f.x,f.y).scale(wL(f.zoom,m,h)),i=[[0,0],[e.width,e.height]],a=t.constrain()(r,i,p);t.transform(n,a),t.wheelDelta(Vz),S.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on(`wheel.zoom`),transform:[a.x,a.y,a.k],domNode:T.current.closest(`.react-flow`)})}},[]),(0,H.useEffect)(()=>{O&&D&&(o&&!j&&!A?O.on(`wheel.zoom`,r=>{if(zz(r,y))return!1;r.preventDefault(),r.stopImmediatePropagation();let i=O.property(`__zoom`).k||1;if(r.ctrlKey&&a){let e=VN(r),t=i*2**Vz(r);D.scaleTo(O,t,e,r);return}let o=r.deltaMode===1?20:1,l=c===YL.Vertical?0:r.deltaX*o,u=c===YL.Horizontal?0:r.deltaY*o;!UL()&&r.shiftKey&&c!==YL.Vertical&&(l=r.deltaY*o,u=0),D.translateBy(O,-(l/i)*s,-(u/i)*s,{internal:!0});let d=Rz(O.property(`__zoom`)),{onViewportChangeStart:f,onViewportChange:p,onViewportChangeEnd:m}=S.getState();clearTimeout(P.current),N.current||(N.current=!0,t?.(r,d),f?.(d)),N.current&&(e?.(r,d),p?.(d),P.current=setTimeout(()=>{n?.(r,d),m?.(d),N.current=!1},150))},{passive:!1}):k!==void 0&&O.on(`wheel.zoom`,function(e,t){if(!_&&e.type===`wheel`&&!e.ctrlKey||zz(e,y))return null;e.preventDefault(),k.call(this,e,t)},{passive:!1}))},[A,o,c,O,D,k,j,a,_,y,t,e,n]),(0,H.useEffect)(()=>{D&&D.on(`start`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=S.getState(),r=Rz(e.transform);C.current=!0,E.current=r,e.sourceEvent?.type===`mousedown`&&S.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[D,t]),(0,H.useEffect)(()=>{D&&(A&&!C.current?D.on(`zoom`,null):A||D.on(`zoom`,t=>{let{onViewportChange:n}=S.getState();if(S.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),w.current=!!(r&&Bz(d,M.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=Rz(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[A,D,e,d,r]),(0,H.useEffect)(()=>{D&&D.on(`end`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:t}=S.getState();if(C.current=!1,S.setState({paneDragging:!1}),r&&Bz(d,M.current??0)&&!w.current&&r(e.sourceEvent),w.current=!1,(n||t)&&Lz(E.current,e.transform)){let r=Rz(e.transform);E.current=r,clearTimeout(x.current),x.current=setTimeout(()=>{t?.(r),n?.(e.sourceEvent,r)},o?150:0)}})},[D,o,d,n,r]),(0,H.useEffect)(()=>{D&&D.filter(e=>{let t=j||i,n=a&&e.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&e.button===1&&e.type===`mousedown`&&(zz(e,`react-flow__node`)||zz(e,`react-flow__edge`)))return!0;if(!d&&!t&&!o&&!l&&!a||A||!l&&e.type===`dblclick`||zz(e,y)&&e.type===`wheel`||zz(e,b)&&(e.type!==`wheel`||o&&e.type===`wheel`&&!j)||!a&&e.ctrlKey&&e.type===`wheel`||!t&&!o&&!n&&e.type===`wheel`||!d&&(e.type===`mousedown`||e.type===`touchstart`)||Array.isArray(d)&&!d.includes(e.button)&&e.type===`mousedown`)return!1;let r=Array.isArray(d)&&d.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||e.type===`wheel`)&&r})},[A,D,i,a,o,l,d,u,j]),H.createElement(`div`,{className:`react-flow__renderer`,ref:T,style:Iz},v)},Wz=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Gz(){let{userSelectionActive:e,userSelectionRect:t}=_L(Wz,Mj);return e&&t?H.createElement(`div`,{className:`react-flow__selection react-flow__container`,style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Kz(e,t){let n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){let e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function qz(e,t){if(e.some(e=>e.type===`reset`))return e.filter(e=>e.type===`reset`).map(e=>e.item);let n=e.filter(e=>e.type===`add`).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(r.length===0)return t.push(n),t;let i={...n};for(let e of r)if(e)switch(e.type){case`select`:i.selected=e.selected;break;case`position`:e.position!==void 0&&(i.position=e.position),e.positionAbsolute!==void 0&&(i.positionAbsolute=e.positionAbsolute),e.dragging!==void 0&&(i.dragging=e.dragging),i.expandParent&&Kz(t,i);break;case`dimensions`:e.dimensions!==void 0&&(i.width=e.dimensions.width,i.height=e.dimensions.height),e.updateStyle!==void 0&&(i.style={...i.style||{},...e.dimensions}),typeof e.resizing==`boolean`&&(i.resizing=e.resizing),i.expandParent&&Kz(t,i);break;case`remove`:return t}return t.push(i),t},n)}function Jz(e,t){return qz(e,t)}function Yz(e,t){return qz(e,t)}var Xz=(e,t)=>({id:e,type:`select`,selected:t});function Zz(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(Xz(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(Xz(n.id,!1))),e},[])}var Qz=(e,t)=>n=>{n.target===t.current&&e?.(n)},$z=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),eB=(0,H.memo)(({isSelecting:e,selectionMode:t=XL.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{let f=(0,H.useRef)(null),p=vL(),m=(0,H.useRef)(0),h=(0,H.useRef)(0),g=(0,H.useRef)(),{userSelectionActive:_,elementsSelectable:v,dragging:y}=_L($z,Mj),b=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),m.current=0,h.current=0},x=e=>{a?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},S=e=>{if(Array.isArray(n)&&n?.includes(2)){e.preventDefault();return}o?.(e)},C=s?e=>s(e):void 0,w=t=>{let{resetSelectedElements:n,domNode:i}=p.getState();if(g.current=i?.getBoundingClientRect(),!v||!e||t.button!==0||t.target!==f.current||!g.current)return;let{x:a,y:o}=HL(t,g.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:a,startY:o,x:a,y:o}}),r?.(t)},T=n=>{let{userSelectionRect:r,nodeInternals:i,edges:a,transform:o,onNodesChange:s,onEdgesChange:c,nodeOrigin:l,getNodes:u}=p.getState();if(!e||!g.current||!r)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});let d=HL(n,g.current),f=r.startX??0,_=r.startY??0,v={...r,x:d.x<f?d.x:f,y:d.y<_?d.y:_,width:Math.abs(d.x-f),height:Math.abs(d.y-_)},y=u(),b=OR(i,v,o,t===XL.Partial,!0,l),x=kR(b,a).map(e=>e.id),S=b.map(e=>e.id);if(m.current!==S.length){m.current=S.length;let e=Zz(y,S);e.length&&s?.(e)}if(h.current!==x.length){h.current=x.length;let e=Zz(a,x);e.length&&c?.(e)}p.setState({userSelectionRect:v})},E=e=>{if(e.button!==0)return;let{userSelectionRect:t}=p.getState();!_&&t&&e.target===f.current&&x?.(e),p.setState({nodesSelectionActive:m.current>0}),b(),i?.(e)},D=e=>{_&&(p.setState({nodesSelectionActive:m.current>0}),i?.(e)),b()},O=v&&(e||_);return H.createElement(`div`,{className:wj([`react-flow__pane`,{dragging:y,selection:e}]),onClick:O?void 0:Qz(x,f),onContextMenu:Qz(S,f),onWheel:Qz(C,f),onMouseEnter:O?void 0:c,onMouseDown:O?w:void 0,onMouseMove:O?T:l,onMouseUp:O?E:void 0,onMouseLeave:O?D:u,ref:f,style:Iz},d,H.createElement(Gz,null))});eB.displayName=`Pane`;function tB(e,t){let n=e.parentNode||e.parentId;if(!n)return!1;let r=t.get(n);return r?r.selected?!0:tB(r,t):!1}function nB(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function rB(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!tB(n,e))&&(n.draggable||t&&n.draggable===void 0)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function iB(e,t){return!t||t===`parent`?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function aB(e,t,n,r,i=[0,0],a){let o=iB(e,e.extent||r),s=o,c=e.parentNode||e.parentId;if(e.extent===`parent`&&!e.expandParent)if(c&&e.width&&e.height){let t=n.get(c),{x:r,y:a}=ER(t,i).positionAbsolute;s=t&&FL(r)&&FL(a)&&FL(t.width)&&FL(t.height)?[[r+e.width*i[0],a+e.height*i[1]],[r+t.width-e.width+e.width*i[0],a+t.height-e.height+e.height*i[1]]]:s}else a?.(`005`,hL.error005()),s=o;else if(e.extent&&c&&e.extent!==`parent`){let{x:t,y:r}=ER(n.get(c),i).positionAbsolute;s=[[e.extent[0][0]+t,e.extent[0][1]+r],[e.extent[1][0]+t,e.extent[1][1]+r]]}let l={x:0,y:0};c&&(l=ER(n.get(c),i).positionAbsolute);let u=s&&s!==`parent`?TL(t,s):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function oB({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}var sB=(e,t,n,r)=>{let i=t.querySelectorAll(e);if(!i||!i.length)return null;let a=Array.from(i),o=t.getBoundingClientRect(),s={x:o.width*r[0],y:o.height*r[1]};return a.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute(`data-handleid`),position:e.getAttribute(`data-handlepos`),x:(t.left-o.left-s.x)/n,y:(t.top-o.top-s.y)/n,...CL(e)}})};function cB(e,t,n){return n===void 0?n:r=>{let i=t().nodeInternals.get(e);i&&n(r,{...i})}}function lB({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:s,onError:c}=t.getState(),l=s.get(e);if(!l){c?.(`012`,hL.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function uB(){let e=vL();return(0,H.useCallback)(({sourceEvent:t})=>{let{transform:n,snapGrid:r,snapToGrid:i}=e.getState(),a=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY,s={x:(a-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:i?r[0]*Math.round(s.x/r[0]):s.x,ySnapped:i?r[1]*Math.round(s.y/r[1]):s.y,...s}},[])}function dB(e){return(t,n,r)=>e?.(t,r)}function fB({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,selectNodesOnDrag:o}){let s=vL(),[c,l]=(0,H.useState)(!1),u=(0,H.useRef)([]),d=(0,H.useRef)({x:null,y:null}),f=(0,H.useRef)(0),p=(0,H.useRef)(null),m=(0,H.useRef)({x:0,y:0}),h=(0,H.useRef)(null),g=(0,H.useRef)(!1),_=(0,H.useRef)(!1),v=(0,H.useRef)(!1),y=uB();return(0,H.useEffect)(()=>{if(e?.current){let c=zN(e.current),b=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:a,updateNodePositions:o,nodeExtent:c,snapGrid:f,snapToGrid:p,nodeOrigin:m,onError:g}=s.getState();d.current={x:e,y:t};let _=!1,v={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&c&&(v=AL(DR(u.current,m))),u.current=u.current.map(r=>{let i={x:e-r.distance.x,y:t-r.distance.y};p&&(i.x=f[0]*Math.round(i.x/f[0]),i.y=f[1]*Math.round(i.y/f[1]));let a=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];u.current.length>1&&c&&!r.extent&&(a[0][0]=r.positionAbsolute.x-v.x+c[0][0],a[1][0]=r.positionAbsolute.x+(r.width??0)-v.x2+c[1][0],a[0][1]=r.positionAbsolute.y-v.y+c[0][1],a[1][1]=r.positionAbsolute.y+(r.height??0)-v.y2+c[1][1]);let o=aB(r,i,n,a,m,g);return _=_||r.position.x!==o.position.x||r.position.y!==o.position.y,r.position=o.position,r.positionAbsolute=o.positionAbsolute,r}),!_)return;o(u.current,!0,!0),l(!0);let y=i?r:dB(a);if(y&&h.current){let[e,t]=oB({nodeId:i,dragItems:u.current,nodeInternals:n});y(h.current,e,t)}},x=()=>{if(!p.current)return;let[e,t]=DL(m.current,p.current);if(e!==0||t!==0){let{transform:n,panBy:r}=s.getState();d.current.x=(d.current.x??0)-e/n[2],d.current.y=(d.current.y??0)-t/n[2],r({x:e,y:t})&&b(d.current)}f.current=requestAnimationFrame(x)},S=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:c,unselectNodesAndEdges:l,onNodeDragStart:f,onSelectionDragStart:p}=s.getState();_.current=!0;let m=i?f:dB(p);(!o||!a)&&!r&&i&&(n.get(i)?.selected||l()),i&&a&&o&&lB({id:i,store:s,nodeRef:e});let h=y(t);if(d.current=h,u.current=rB(n,c,h,i),m&&u.current){let[e,r]=oB({nodeId:i,dragItems:u.current,nodeInternals:n});m(t.sourceEvent,e,r)}};if(t)c.on(`.drag`,null);else{let t=eP().on(`start`,e=>{let{domNode:t,nodeDragThreshold:n}=s.getState();n===0&&S(e),v.current=!1,d.current=y(e),p.current=t?.getBoundingClientRect()||null,m.current=HL(e.sourceEvent,p.current)}).on(`drag`,e=>{let t=y(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=s.getState();if(e.sourceEvent.type===`touchmove`&&e.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!g.current&&_.current&&n&&(g.current=!0,x()),!_.current){let n=t.xSnapped-(d?.current?.x??0),i=t.ySnapped-(d?.current?.y??0);Math.sqrt(n*n+i*i)>r&&S(e)}(d.current.x!==t.xSnapped||d.current.y!==t.ySnapped)&&u.current&&_.current&&(h.current=e.sourceEvent,m.current=HL(e.sourceEvent,p.current),b(t))}}).on(`end`,e=>{if(!(!_.current||v.current)&&(l(!1),g.current=!1,_.current=!1,cancelAnimationFrame(f.current),u.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:a}=s.getState(),o=i?r:dB(a);if(t(u.current,!1,!1),o){let[t,r]=oB({nodeId:i,dragItems:u.current,nodeInternals:n});o(e.sourceEvent,t,r)}}}).filter(t=>{let i=t.target;return!t.button&&(!n||!nB(i,`.${n}`,e))&&(!r||nB(i,r,e))});return c.call(t),()=>{c.on(`.drag`,null)}}}},[e,t,n,r,a,s,i,o,y]),c}function pB(){let e=vL();return(0,H.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:i,getNodes:a,snapToGrid:o,snapGrid:s,onError:c,nodesDraggable:l}=e.getState(),u=a().filter(e=>e.selected&&(e.draggable||l&&e.draggable===void 0)),d=o?s[0]:5,f=o?s[1]:5,p=t.isShiftPressed?4:1,m=t.x*d*p,h=t.y*f*p;i(u.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+h};o&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));let{positionAbsolute:i,position:a}=aB(e,t,n,r,void 0,c);e.position=a,e.positionAbsolute=i}return e}),!0,!1)},[])}var mB={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},hB=e=>{let t=({id:t,type:n,data:r,xPos:i,yPos:a,xPosOrigin:o,yPosOrigin:s,selected:c,onClick:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onContextMenu:p,onDoubleClick:m,style:h,className:g,isDraggable:_,isSelectable:v,isConnectable:y,isFocusable:b,selectNodesOnDrag:x,sourcePosition:S,targetPosition:C,hidden:w,resizeObserver:T,dragHandle:E,zIndex:D,isParent:O,noDragClassName:k,noPanClassName:A,initialized:j,disableKeyboardA11y:M,ariaLabel:N,rfId:P,hasHandleBounds:F})=>{let ee=vL(),I=(0,H.useRef)(null),L=(0,H.useRef)(null),te=(0,H.useRef)(S),ne=(0,H.useRef)(C),re=(0,H.useRef)(n),ie=v||_||l||u||d||f,ae=pB(),oe=cB(t,ee.getState,u),se=cB(t,ee.getState,d),ce=cB(t,ee.getState,f),le=cB(t,ee.getState,p),ue=cB(t,ee.getState,m),de=e=>{let{nodeDragThreshold:n}=ee.getState();if(v&&(!x||!_||n>0)&&lB({id:t,store:ee,nodeRef:I}),l){let n=ee.getState().nodeInternals.get(t);n&&l(e,{...n})}},fe=e=>{BL(e)||M||(LL.includes(e.key)&&v?lB({id:t,store:ee,unselect:e.key===`Escape`,nodeRef:I}):_&&c&&Object.prototype.hasOwnProperty.call(mB,e.key)&&(ee.setState({ariaLiveMessage:`Moved selected node ${e.key.replace(`Arrow`,``).toLowerCase()}. New position, x: ${~~i}, y: ${~~a}`}),ae({x:mB[e.key].x,y:mB[e.key].y,isShiftPressed:e.shiftKey})))};(0,H.useEffect)(()=>()=>{L.current&&=(T?.unobserve(L.current),null)},[]),(0,H.useEffect)(()=>{if(I.current&&!w){let e=I.current;(!j||!F||L.current!==e)&&(L.current&&T?.unobserve(L.current),T?.observe(e),L.current=e)}},[w,j,F]),(0,H.useEffect)(()=>{let e=re.current!==n,r=te.current!==S,i=ne.current!==C;I.current&&(e||r||i)&&(e&&(re.current=n),r&&(te.current=S),i&&(ne.current=C),ee.getState().updateNodeDimensions([{id:t,nodeElement:I.current,forceUpdate:!0}]))},[t,n,S,C]);let pe=fB({nodeRef:I,disabled:w||!_,noDragClassName:k,handleSelector:E,nodeId:t,isSelectable:v,selectNodesOnDrag:x});return w?null:H.createElement(`div`,{className:wj([`react-flow__node`,`react-flow__node-${n}`,{[A]:_},g,{selected:c,selectable:v,parent:O,dragging:pe}]),ref:I,style:{zIndex:D,transform:`translate(${o}px,${s}px)`,pointerEvents:ie?`all`:`none`,visibility:j?`visible`:`hidden`,...h},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:oe,onMouseMove:se,onMouseLeave:ce,onContextMenu:le,onClick:de,onDoubleClick:ue,onKeyDown:b?fe:void 0,tabIndex:b?0:void 0,role:b?`button`:void 0,"aria-describedby":M?void 0:`${fz}-${P}`,"aria-label":N},H.createElement(_R,{value:t},H.createElement(e,{id:t,data:r,type:n,xPos:i,yPos:a,selected:c,isConnectable:y,sourcePosition:S,targetPosition:C,dragging:pe,dragHandle:E,zIndex:D})))};return t.displayName=`NodeWrapper`,(0,H.memo)(t)},gB=e=>({...DR(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive});function _B({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=vL(),{width:i,height:a,x:o,y:s,transformString:c,userSelectionActive:l}=_L(gB,Mj),u=pB(),d=(0,H.useRef)(null);if((0,H.useEffect)(()=>{n||d.current?.focus({preventScroll:!0})},[n]),fB({nodeRef:d}),l||!i||!a)return null;let f=e?t=>{e(t,r.getState().getNodes().filter(e=>e.selected))}:void 0;return H.createElement(`div`,{className:wj([`react-flow__nodesselection`,`react-flow__container`,t]),style:{transform:c}},H.createElement(`div`,{ref:d,className:`react-flow__nodesselection-rect`,onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(mB,e.key)&&u({x:mB[e.key].x,y:mB[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:a,top:s,left:o}}))}var vB=(0,H.memo)(_B),yB=e=>e.nodesSelectionActive,bB=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:_,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:E,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,preventScrolling:j,onSelectionContextMenu:M,noWheelClassName:N,noPanClassName:P,disableKeyboardA11y:F})=>{let ee=_L(yB),I=vz(d),L=vz(_),te=L||E,ne=L||S,re=I||f&&te!==!0;return Pz({deleteKeyCode:s,multiSelectionKeyCode:g}),H.createElement(Uz,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:ne,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:!I&&te,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:N,noPanClassName:P},H.createElement(eB,{onSelectionStart:m,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:te,isSelecting:!!re,selectionMode:p},e,ee&&H.createElement(vB,{onSelectionContextMenu:M,noPanClassName:P,disableKeyboardA11y:F})))};bB.displayName=`FlowRenderer`;var xB=(0,H.memo)(bB);function SB(e){return _L((0,H.useCallback)(t=>e?OR(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[e]))}function CB(e){let t={input:hB(e.input||XR),default:hB(e.default||JR),output:hB(e.output||QR),group:hB(e.group||$R)},n=Object.keys(e).filter(e=>![`input`,`default`,`output`,`group`].includes(e)).reduce((t,n)=>(t[n]=hB(e[n]||JR),t),{});return{...t,...n}}var wB=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r||i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},TB=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),EB=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:o}=_L(TB,Mj),s=SB(e.onlyRenderVisibleElements),c=(0,H.useRef)(),l=(0,H.useMemo)(()=>{if(typeof ResizeObserver>`u`)return null;let e=new ResizeObserver(e=>{a(e.map(e=>({id:e.target.getAttribute(`data-id`),nodeElement:e.target,forceUpdate:!0})))});return c.current=e,e},[]);return(0,H.useEffect)(()=>()=>{c?.current?.disconnect()},[]),H.createElement(`div`,{className:`react-flow__nodes`,style:Iz},s.map(a=>{let s=a.type||`default`;e.nodeTypes[s]||(o?.(`003`,hL.error003(s)),s=`default`);let c=e.nodeTypes[s]||e.nodeTypes.default,u=!!(a.draggable||t&&a.draggable===void 0),d=!!(a.selectable||i&&a.selectable===void 0),f=!!(a.connectable||n&&a.connectable===void 0),p=!!(a.focusable||r&&a.focusable===void 0),m=e.nodeExtent?TL(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,h=m?.x??0,g=m?.y??0,_=wB({x:h,y:g,width:a.width??0,height:a.height??0,origin:e.nodeOrigin});return H.createElement(c,{key:a.id,id:a.id,className:a.className,style:a.style,type:s,data:a.data,sourcePosition:a.sourcePosition||Z.Bottom,targetPosition:a.targetPosition||Z.Top,hidden:a.hidden,xPos:h,yPos:g,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:u,isSelectable:d,isConnectable:f,isFocusable:p,resizeObserver:l,dragHandle:a.dragHandle,zIndex:a[IL]?.z??0,isParent:!!a[IL]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel,hasHandleBounds:!!a[IL]?.handleBounds})}))};EB.displayName=`NodeRenderer`;var DB=(0,H.memo)(EB),OB=(e,t,n)=>n===Z.Left?e-t:n===Z.Right?e+t:e,kB=(e,t,n)=>n===Z.Top?e-t:n===Z.Bottom?e+t:e,AB=`react-flow__edgeupdater`,jB=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:o,type:s})=>H.createElement(`circle`,{onMouseDown:i,onMouseEnter:a,onMouseOut:o,className:wj([AB,`${AB}-${s}`]),cx:OB(t,r,e),cy:kB(n,r,e),r,stroke:`transparent`,fill:`transparent`}),MB=()=>!0,NB=e=>{let t=({id:t,className:n,type:r,data:i,onClick:a,onEdgeDoubleClick:o,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,source:g,target:_,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,elementsSelectable:w,hidden:T,sourceHandleId:E,targetHandleId:D,onContextMenu:O,onMouseEnter:k,onMouseMove:A,onMouseLeave:j,reconnectRadius:M,onReconnect:N,onReconnectStart:P,onReconnectEnd:F,markerEnd:ee,markerStart:I,rfId:L,ariaLabel:te,isFocusable:ne,isReconnectable:re,pathOptions:ie,interactionWidth:ae,disableKeyboardA11y:oe})=>{let se=(0,H.useRef)(null),[ce,le]=(0,H.useState)(!1),[ue,de]=(0,H.useState)(!1),fe=vL(),pe=(0,H.useMemo)(()=>`url('#${xR(I,L)}')`,[I,L]),me=(0,H.useMemo)(()=>`url('#${xR(ee,L)}')`,[ee,L]);if(T)return null;let he=e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:i,multiSelectionActive:o}=fe.getState(),s=n.find(e=>e.id===t);s&&(w&&(fe.setState({nodesSelectionActive:!1}),s.selected&&o?(i({nodes:[],edges:[s]}),se.current?.blur()):r([t])),a&&a(e,s))},R=GL(t,fe.getState,o),ge=GL(t,fe.getState,O),_e=GL(t,fe.getState,k),ve=GL(t,fe.getState,A),ye=GL(t,fe.getState,j),be=(e,n)=>{if(e.button!==0)return;let{edges:r,isValidConnection:i}=fe.getState(),a=n?_:g,o=(n?D:E)||null,s=n?`target`:`source`,c=i||MB,l=n,u=r.find(e=>e.id===t);de(!0),P?.(e,u,s),VR({event:e,handleId:o,nodeId:a,onConnect:e=>N?.(u,e),isTarget:l,getState:fe.getState,setState:fe.setState,isValidConnection:c,edgeUpdaterType:s,onReconnectEnd:e=>{de(!1),F?.(e,u,s)}})},z=e=>be(e,!0),xe=e=>be(e,!1),Se=()=>le(!0),Ce=()=>le(!1),we=!w&&!a;return H.createElement(`g`,{className:wj([`react-flow__edge`,`react-flow__edge-${r}`,n,{selected:s,animated:c,inactive:we,updating:ce}]),onClick:he,onDoubleClick:R,onContextMenu:ge,onMouseEnter:_e,onMouseMove:ve,onMouseLeave:ye,onKeyDown:ne?e=>{if(!oe&&LL.includes(e.key)&&w){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:i}=fe.getState();e.key===`Escape`?(se.current?.blur(),n({edges:[i.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:ne?0:void 0,role:ne?`button`:`img`,"data-testid":`rf__edge-${t}`,"aria-label":te===null?void 0:te||`Edge from ${g} to ${_}`,"aria-describedby":ne?`${pz}-${L}`:void 0,ref:se},!ue&&H.createElement(e,{id:t,source:g,target:_,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,data:i,style:h,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,sourceHandleId:E,targetHandleId:D,markerStart:pe,markerEnd:me,pathOptions:ie,interactionWidth:ae}),re&&H.createElement(H.Fragment,null,(re===`source`||re===!0)&&H.createElement(jB,{position:S,centerX:v,centerY:y,radius:M,onMouseDown:z,onMouseEnter:Se,onMouseOut:Ce,type:`source`}),(re===`target`||re===!0)&&H.createElement(jB,{position:C,centerX:b,centerY:x,radius:M,onMouseDown:xe,onMouseEnter:Se,onMouseOut:Ce,type:`target`})))};return t.displayName=`EdgeWrapper`,(0,H.memo)(t)};function PB(e){let t={default:NB(e.default||hR),straight:NB(e.bezier||dR),step:NB(e.step||lR),smoothstep:NB(e.step||cR),simplebezier:NB(e.simplebezier||tR)},n=Object.keys(e).filter(e=>![`default`,`bezier`].includes(e)).reduce((t,n)=>(t[n]=NB(e[n]||hR),t),{});return{...t,...n}}function FB(e,t,n=null){let r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,a=n?.width||t.width,o=n?.height||t.height;switch(e){case Z.Top:return{x:r+a/2,y:i};case Z.Right:return{x:r+a,y:i+o/2};case Z.Bottom:return{x:r+a/2,y:i+o};case Z.Left:return{x:r,y:i+o/2}}}function IB(e,t){return e?e.length===1||!t?e[0]:t&&e.find(e=>e.id===t)||null:null}var LB=(e,t,n,r,i,a)=>{let o=FB(n,e,t),s=FB(a,r,i);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function RB({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:o,height:s,transform:c}){let l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);let u=AL({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:s/c[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function zB(e){let t=e?.[IL]?.handleBounds||null,n=t&&e?.width&&e?.height&&e?.positionAbsolute?.x!==void 0&&e?.positionAbsolute?.y!==void 0;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var BB=[{level:0,isMaxLevel:!0,edges:[]}];function VB(e,t,n=!1){let r=-1,i=e.reduce((e,i)=>{let a=FL(i.zIndex),o=a?i.zIndex:0;if(n){let e=t.get(i.target),n=t.get(i.source),r=i.selected||e?.selected||n?.selected,s=Math.max(n?.[IL]?.z||0,e?.[IL]?.z||0,1e3);o=(a?i.zIndex:0)+(r?s:0)}return e[o]?e[o].push(i):e[o]=[i],r=o>r?o:r,e},{}),a=Object.entries(i).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return a.length===0?BB:a}function HB(e,t,n){return VB(_L((0,H.useCallback)(n=>e?n.edges.filter(e=>{let r=t.get(e.source),i=t.get(e.target);return r?.width&&r?.height&&i?.width&&i?.height&&RB({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:i.width,targetHeight:i.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t])),t,n)}var UB=({color:e=`none`,strokeWidth:t=1})=>H.createElement(`polyline`,{style:{stroke:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,fill:`none`,points:`-5,-4 0,0 -5,4`}),WB=({color:e=`none`,strokeWidth:t=1})=>H.createElement(`polyline`,{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4 -5,-4`}),GB={[QL.Arrow]:UB,[QL.ArrowClosed]:WB};function KB(e){let t=vL();return(0,H.useMemo)(()=>Object.prototype.hasOwnProperty.call(GB,e)?GB[e]:(t.getState().onError?.(`009`,hL.error009(e)),null),[e])}var qB=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a=`strokeWidth`,strokeWidth:o,orient:s=`auto-start-reverse`})=>{let c=KB(t);return c?H.createElement(`marker`,{className:`react-flow__arrowhead`,id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:`-10 -10 20 20`,markerUnits:a,orient:s,refX:`0`,refY:`0`},H.createElement(c,{color:n,strokeWidth:o})):null},JB=({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,i)=>([i.markerStart,i.markerEnd].forEach(i=>{if(i&&typeof i==`object`){let a=xR(i,t);r.includes(a)||(n.push({id:a,color:i.color||e,...i}),r.push(a))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))},YB=({defaultColor:e,rfId:t})=>{let n=_L((0,H.useCallback)(JB({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return H.createElement(`defs`,null,n.map(e=>H.createElement(qB,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};YB.displayName=`MarkerDefinitions`;var XB=(0,H.memo)(YB),ZB=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),QB=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,children:g,disableKeyboardA11y:_})=>{let{edgesFocusable:v,edgesUpdatable:y,elementsSelectable:b,width:x,height:S,connectionMode:C,nodeInternals:w,onError:T}=_L(ZB,Mj),E=HB(t,w,n);return x?H.createElement(H.Fragment,null,E.map(({level:t,edges:n,isMaxLevel:g})=>H.createElement(`svg`,{key:t,style:{zIndex:t},width:x,height:S,className:`react-flow__edges react-flow__container`},g&&H.createElement(XB,{defaultColor:e,rfId:r}),H.createElement(`g`,null,n.map(e=>{let[t,n,g]=zB(w.get(e.source)),[x,S,E]=zB(w.get(e.target));if(!g||!E)return null;let D=e.type||`default`;i[D]||(T?.(`011`,hL.error011(D)),D=`default`);let O=i[D]||i.default,k=C===JL.Strict?S.target:(S.target??[]).concat(S.source??[]),A=IB(n.source,e.sourceHandle),j=IB(k,e.targetHandle),M=A?.position||Z.Bottom,N=j?.position||Z.Top,P=!!(e.focusable||v&&e.focusable===void 0),F=e.reconnectable||e.updatable,ee=f!==void 0&&(F||y&&F===void 0);if(!A||!j)return T?.(`008`,hL.error008(A,e)),null;let{sourceX:I,sourceY:L,targetX:te,targetY:ne}=LB(t,A,M,x,j,N);return H.createElement(O,{key:e.id,id:e.id,className:wj([e.className,a]),type:D,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:I,sourceY:L,targetX:te,targetY:ne,sourcePosition:M,targetPosition:N,elementsSelectable:b,onContextMenu:o,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,rfId:r,ariaLabel:e.ariaLabel,isFocusable:P,isReconnectable:ee,pathOptions:`pathOptions`in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:_})})))),g):null};QB.displayName=`EdgeRenderer`;var $B=(0,H.memo)(QB),eV=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tV({children:e}){let t=_L(eV);return H.createElement(`div`,{className:`react-flow__viewport react-flow__container`,style:{transform:t}},e)}function nV(e){let t=Mz(),n=(0,H.useRef)(!1);(0,H.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var rV={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top},iV=({nodeId:e,handleType:t,style:n,type:r=ZL.Bezier,CustomComponent:i,connectionStatus:a})=>{let{fromNode:o,handleId:s,toX:c,toY:l,connectionMode:u}=_L((0,H.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),Mj),d=o?.[IL]?.handleBounds,f=d?.[t];if(u===JL.Loose&&(f||=d?.[t===`source`?`target`:`source`]),!o||!f)return null;let p=s?f.find(e=>e.id===s):f[0],m=p?p.x+p.width/2:(o.width??0)/2,h=p?p.y+p.height/2:o.height??0,g=(o.positionAbsolute?.x??0)+m,_=(o.positionAbsolute?.y??0)+h,v=p?.position,y=v?rV[v]:null;if(!v||!y)return null;if(i)return H.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:g,fromY:_,toX:c,toY:l,fromPosition:v,toPosition:y,connectionStatus:a});let b=``,x={sourceX:g,sourceY:_,sourcePosition:v,targetX:c,targetY:l,targetPosition:y};return r===ZL.Bezier?[b]=mR(x):r===ZL.Step?[b]=sR({...x,borderRadius:0}):r===ZL.SmoothStep?[b]=sR(x):r===ZL.SimpleBezier?[b]=eR(x):b=`M${g},${_} ${c},${l}`,H.createElement(`path`,{d:b,fill:`none`,className:`react-flow__connection-path`,style:n})};iV.displayName=`ConnectionLine`;var aV=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function oV({containerStyle:e,style:t,type:n,component:r}){let{nodeId:i,handleType:a,nodesConnectable:o,width:s,height:c,connectionStatus:l}=_L(aV,Mj);return i&&a&&s&&o?H.createElement(`svg`,{style:e,width:s,height:c,className:`react-flow__edges react-flow__connectionline react-flow__container`},H.createElement(`g`,{className:wj([`react-flow__connection`,l])},H.createElement(iV,{nodeId:i,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:l}))):null}function sV(e,t){return(0,H.useRef)(null),vL(),(0,H.useMemo)(()=>t(e),[e])}var cV=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:a,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:h,onSelectionEnd:g,connectionLineType:_,connectionLineStyle:v,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:k,selectNodesOnDrag:A,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,preventScrolling:F,defaultMarkerColor:ee,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:te,panOnScrollSpeed:ne,panOnScrollMode:re,zoomOnDoubleClick:ie,panOnDrag:ae,onPaneClick:oe,onPaneMouseEnter:se,onPaneMouseMove:ce,onPaneMouseLeave:le,onPaneScroll:ue,onPaneContextMenu:de,onEdgeContextMenu:fe,onEdgeMouseEnter:pe,onEdgeMouseMove:me,onEdgeMouseLeave:he,onReconnect:R,onReconnectStart:ge,onReconnectEnd:_e,reconnectRadius:ve,noDragClassName:ye,noWheelClassName:be,noPanClassName:z,elevateEdgesOnSelect:xe,disableKeyboardA11y:Se,nodeOrigin:Ce,nodeExtent:we,rfId:Te})=>{let Ee=sV(e,CB),De=sV(t,PB);return nV(a),H.createElement(xB,{onPaneClick:oe,onPaneMouseEnter:se,onPaneMouseMove:ce,onPaneMouseLeave:le,onPaneContextMenu:de,onPaneScroll:ue,deleteKeyCode:D,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:I,zoomOnPinch:L,zoomOnDoubleClick:ie,panOnScroll:te,panOnScrollSpeed:ne,panOnScrollMode:re,panOnDrag:ae,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,onSelectionContextMenu:m,preventScrolling:F,noDragClassName:ye,noWheelClassName:be,noPanClassName:z,disableKeyboardA11y:Se},H.createElement(tV,null,H.createElement($B,{edgeTypes:De,onEdgeClick:s,onEdgeDoubleClick:l,onlyRenderVisibleElements:O,onEdgeContextMenu:fe,onEdgeMouseEnter:pe,onEdgeMouseMove:me,onEdgeMouseLeave:he,onReconnect:R,onReconnectStart:ge,onReconnectEnd:_e,reconnectRadius:ve,defaultMarkerColor:ee,noPanClassName:z,elevateEdgesOnSelect:!!xe,disableKeyboardA11y:Se,rfId:Te},H.createElement(oV,{style:v,type:_,component:y,containerStyle:b})),H.createElement(`div`,{className:`react-flow__edgelabel-renderer`}),H.createElement(DB,{nodeTypes:Ee,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:A,onlyRenderVisibleElements:O,noPanClassName:z,noDragClassName:ye,disableKeyboardA11y:Se,nodeOrigin:Ce,nodeExtent:we,rfId:Te})))};cV.displayName=`GraphView`;var lV=(0,H.memo)(cV),uV=[[-1/0,-1/0],[1/0,1/0]],dV={rfId:`1`,width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:uV,nodeExtent:uV,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:`source`,connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:JL.Strict,domNode:null,paneDragging:!1,noPanClassName:`nopan`,nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:``,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:RL,isValidConnection:void 0},fV=()=>jj((e,t)=>({...dV,setNodes:n=>{let{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:Cz(n,r,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let i=n!==void 0,a=r!==void 0;e({nodeInternals:i?Cz(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:a?r:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c?.querySelector(`.react-flow__viewport`);if(!u)return;let d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((e,t)=>{let n=i.get(t.id);if(n?.hidden)i.set(n.id,{...n,[IL]:{...n[IL],handleBounds:void 0}});else if(n){let r=CL(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(i.set(n.id,{...n,[IL]:{...n[IL],handleBounds:{source:sB(`.source`,t.nodeElement,f,l),target:sB(`.target`,t.nodeElement,f,l)}},...r}),e.push({id:n.id,type:`dimensions`,dimensions:r}))}return e},[]);Sz(i,l);let m=o||a&&!o&&wz(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:m}),p?.length>0&&r?.(p)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:i}=t();i(e.map(e=>{let t={id:e.id,type:`position`,dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:c}=t();n?.length&&(a&&e({nodeInternals:Cz(Jz(n,s()),i,o,c)}),r?.(n))},addSelectedNodes:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>Xz(e,!0)):(o=Zz(a(),n),s=Zz(i,[])),Dz({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>Xz(e,!0)):(o=Zz(i,n),s=Zz(a(),[])),Dz({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:i,getNodes:a}=t(),o=n||a(),s=r||i;Dz({changedNodes:o.map(e=>(e.selected=!1,Xz(e.id,!1))),changedEdges:s.map(e=>Xz(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t();Dz({changedNodes:r().filter(e=>e.selected).map(e=>Xz(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>Xz(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=TL(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:i,d3Zoom:a,d3Selection:o,translateExtent:s}=t();if(!a||!o||!e.x&&!e.y)return!1;let c=nL.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),l=[[0,0],[r,i]],u=a?.constrain()(c,l,s);return a.transform(o,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:dV.connectionNodeId,connectionHandleId:dV.connectionHandleId,connectionHandleType:dV.connectionHandleType,connectionStatus:dV.connectionStatus,connectionStartHandle:dV.connectionStartHandle,connectionEndHandle:dV.connectionEndHandle}),reset:()=>e({...dV})}),Object.is),pV=({children:e})=>{let t=(0,H.useRef)(null);return t.current||=fV(),H.createElement(mL,{value:t.current},e)};pV.displayName=`ReactFlowProvider`;var mV=({children:e})=>(0,H.useContext)(pL)?H.createElement(H.Fragment,null,e):H.createElement(pV,null,e);mV.displayName=`ReactFlowWrapper`;var hV={input:XR,default:JR,output:QR,group:$R},gV={default:hR,straight:dR,step:lR,smoothstep:cR,simplebezier:tR},_V=[0,0],vV=[15,15],yV={x:0,y:0,zoom:1},bV={width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,zIndex:0},xV=(0,H.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a=hV,edgeTypes:o=gV,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onNodesDelete:E,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:k,onSelectionDrag:A,onSelectionDragStop:j,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,connectionMode:F=JL.Strict,connectionLineType:ee=ZL.Bezier,connectionLineStyle:I,connectionLineComponent:L,connectionLineContainerStyle:te,deleteKeyCode:ne=`Backspace`,selectionKeyCode:re=`Shift`,selectionOnDrag:ie=!1,selectionMode:ae=XL.Full,panActivationKeyCode:oe=`Space`,multiSelectionKeyCode:se=UL()?`Meta`:`Control`,zoomActivationKeyCode:ce=UL()?`Meta`:`Control`,snapToGrid:le=!1,snapGrid:ue=vV,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:fe=!0,nodesDraggable:pe,nodesConnectable:me,nodesFocusable:he,nodeOrigin:R=_V,edgesFocusable:ge,edgesUpdatable:_e,elementsSelectable:ve,defaultViewport:ye=yV,minZoom:be=.5,maxZoom:z=2,translateExtent:xe=uV,preventScrolling:Se=!0,nodeExtent:Ce,defaultMarkerColor:we=`#b1b1b7`,zoomOnScroll:Te=!0,zoomOnPinch:Ee=!0,panOnScroll:De=!1,panOnScrollSpeed:Oe=.5,panOnScrollMode:ke=YL.Free,zoomOnDoubleClick:Ae=!0,panOnDrag:je=!0,onPaneClick:Me,onPaneMouseEnter:Ne,onPaneMouseMove:Pe,onPaneMouseLeave:Fe,onPaneScroll:Ie,onPaneContextMenu:Le,children:Re,onEdgeContextMenu:ze,onEdgeDoubleClick:Be,onEdgeMouseEnter:Ve,onEdgeMouseMove:He,onEdgeMouseLeave:Ue,onEdgeUpdate:We,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:Ke,onReconnect:qe,onReconnectStart:Je,onReconnectEnd:Ye,reconnectRadius:Xe=10,edgeUpdaterRadius:Ze=10,onNodesChange:Qe,onEdgesChange:$e,noDragClassName:et=`nodrag`,noWheelClassName:tt=`nowheel`,noPanClassName:nt=`nopan`,fitView:rt=!1,fitViewOptions:it,connectOnClick:at=!0,attributionPosition:B,proOptions:ot,defaultEdgeOptions:st,elevateNodesOnSelect:ct=!0,elevateEdgesOnSelect:lt=!1,disableKeyboardA11y:ut=!1,autoPanOnConnect:dt=!0,autoPanOnNodeDrag:ft=!0,connectionRadius:pt=20,isValidConnection:mt,onError:ht,style:gt,id:_t,nodeDragThreshold:vt,...yt},bt)=>{let xt=_t||`1`;return H.createElement(`div`,{...yt,style:{...gt,...bV},ref:bt,className:wj([`react-flow`,i]),"data-testid":`rf__wrapper`,id:_t},H.createElement(mV,null,H.createElement(lV,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:o,connectionLineType:ee,connectionLineStyle:I,connectionLineComponent:L,connectionLineContainerStyle:te,selectionKeyCode:re,selectionOnDrag:ie,selectionMode:ae,deleteKeyCode:ne,multiSelectionKeyCode:se,panActivationKeyCode:oe,zoomActivationKeyCode:ce,onlyRenderVisibleElements:de,selectNodesOnDrag:fe,defaultViewport:ye,translateExtent:xe,minZoom:be,maxZoom:z,preventScrolling:Se,zoomOnScroll:Te,zoomOnPinch:Ee,zoomOnDoubleClick:Ae,panOnScroll:De,panOnScrollSpeed:Oe,panOnScrollMode:ke,panOnDrag:je,onPaneClick:Me,onPaneMouseEnter:Ne,onPaneMouseMove:Pe,onPaneMouseLeave:Fe,onPaneScroll:Ie,onPaneContextMenu:Le,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,onEdgeContextMenu:ze,onEdgeDoubleClick:Be,onEdgeMouseEnter:Ve,onEdgeMouseMove:He,onEdgeMouseLeave:Ue,onReconnect:qe??We,onReconnectStart:Je??Ge,onReconnectEnd:Ye??Ke,reconnectRadius:Xe??Ze,defaultMarkerColor:we,noDragClassName:et,noWheelClassName:tt,noPanClassName:nt,elevateEdgesOnSelect:lt,rfId:xt,disableKeyboardA11y:ut,nodeOrigin:R,nodeExtent:Ce}),H.createElement(lz,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,nodesDraggable:pe,nodesConnectable:me,nodesFocusable:he,edgesFocusable:ge,edgesUpdatable:_e,elementsSelectable:ve,elevateNodesOnSelect:ct,minZoom:be,maxZoom:z,nodeExtent:Ce,onNodesChange:Qe,onEdgesChange:$e,snapToGrid:le,snapGrid:ue,connectionMode:F,translateExtent:xe,connectOnClick:at,defaultEdgeOptions:st,fitView:rt,fitViewOptions:it,onNodesDelete:E,onEdgesDelete:D,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onSelectionDrag:A,onSelectionDragStart:k,onSelectionDragStop:j,noPanClassName:nt,nodeOrigin:R,rfId:xt,autoPanOnConnect:dt,autoPanOnNodeDrag:ft,onError:ht,connectionRadius:pt,isValidConnection:mt,nodeDragThreshold:vt}),H.createElement(az,{onSelectionChange:O}),Re,H.createElement(xL,{proOptions:ot,position:B}),H.createElement(_z,{rfId:xt,disableKeyboardA11y:ut})))});xV.displayName=`ReactFlow`;function SV(e){return t=>{let[n,r]=(0,H.useState)(t);return[n,r,(0,H.useCallback)(t=>r(n=>e(t,n)),[])]}}var CV=SV(Jz),wV=SV(Yz);function TV(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`},H.createElement(`path`,{d:`M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z`}))}function EV(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 5`},H.createElement(`path`,{d:`M0 0h32v4.2H0z`}))}function DV(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 30`},H.createElement(`path`,{d:`M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z`}))}function OV(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},H.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z`}))}function kV(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},H.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z`}))}var AV=({children:e,className:t,...n})=>H.createElement(`button`,{type:`button`,className:wj([`react-flow__controls-button`,t]),...n},e);AV.displayName=`ControlButton`;var jV=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),MV=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:o,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d=`bottom-left`})=>{let f=vL(),[p,m]=(0,H.useState)(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:_}=_L(jV,Mj),{zoomIn:v,zoomOut:y,fitView:b}=Mz();if((0,H.useEffect)(()=>{m(!0)},[]),!p)return null;let x=()=>{v(),a?.()},S=()=>{y(),o?.()},C=()=>{b(i),s?.()},w=()=>{f.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),c?.(!h)};return H.createElement(bL,{className:wj([`react-flow__controls`,l]),position:d,style:e,"data-testid":`rf__controls`},t&&H.createElement(H.Fragment,null,H.createElement(AV,{onClick:x,className:`react-flow__controls-zoomin`,title:`zoom in`,"aria-label":`zoom in`,disabled:_},H.createElement(TV,null)),H.createElement(AV,{onClick:S,className:`react-flow__controls-zoomout`,title:`zoom out`,"aria-label":`zoom out`,disabled:g},H.createElement(EV,null))),n&&H.createElement(AV,{className:`react-flow__controls-fitview`,onClick:C,title:`fit view`,"aria-label":`fit view`},H.createElement(DV,null)),r&&H.createElement(AV,{className:`react-flow__controls-interactive`,onClick:w,title:`toggle interactivity`,"aria-label":`toggle interactivity`},h?H.createElement(kV,null):H.createElement(OV,null)),u)};MV.displayName=`Controls`;var NV=(0,H.memo)(MV),PV;(function(e){e.Lines=`lines`,e.Dots=`dots`,e.Cross=`cross`})(PV||={});function FV({color:e,dimensions:t,lineWidth:n}){return H.createElement(`path`,{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function IV({color:e,radius:t}){return H.createElement(`circle`,{cx:t,cy:t,r:t,fill:e})}var LV={[PV.Dots]:`#91919a`,[PV.Lines]:`#eee`,[PV.Cross]:`#e2e2e2`},RV={[PV.Dots]:1,[PV.Lines]:1,[PV.Cross]:6},zV=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function BV({id:e,variant:t=PV.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:o,style:s,className:c}){let l=(0,H.useRef)(null),{transform:u,patternId:d}=_L(zV,Mj),f=o||LV[t],p=r||RV[t],m=t===PV.Dots,h=t===PV.Cross,g=Array.isArray(n)?n:[n,n],_=[g[0]*u[2]||1,g[1]*u[2]||1],v=p*u[2],y=h?[v,v]:_,b=m?[v/a,v/a]:[y[0]/a,y[1]/a];return H.createElement(`svg`,{className:wj([`react-flow__background`,c]),style:{...s,position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},ref:l,"data-testid":`rf__background`},H.createElement(`pattern`,{id:d+e,x:u[0]%_[0],y:u[1]%_[1],width:_[0],height:_[1],patternUnits:`userSpaceOnUse`,patternTransform:`translate(-${b[0]},-${b[1]})`},m?H.createElement(IV,{color:f,radius:v/a}):H.createElement(FV,{dimensions:y,color:f,lineWidth:i})),H.createElement(`rect`,{x:`0`,y:`0`,width:`100%`,height:`100%`,fill:`url(#${d+e})`}))}BV.displayName=`Background`;var VV=(0,H.memo)(BV),HV=[{id:`1`,type:`input`,data:{label:`Input Node`},position:{x:250,y:25}},{id:`2`,data:{label:`Default Node`},position:{x:100,y:125}},{id:`3`,type:`output`,data:{label:`Output Node`},position:{x:250,y:250}}],UV=[{id:`e1-2`,source:`1`,target:`2`},{id:`e2-3`,source:`2`,target:`3`}];function WV({saveData:e,loadData:t}){let[n,r,i]=CV(HV),[a,o,s]=wV(UV);(0,H.useEffect)(()=>{(async()=>{try{let e=await t();e&&(e.nodes&&r(e.nodes),e.edges&&o(e.edges))}catch(e){console.error(`Error loading data:`,e)}})()},[t,r,o]),(0,H.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({nodes:n,edges:a}),console.log(`Auto saved successfully`)}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[n,a,e]);let c=(0,H.useCallback)(e=>o(t=>CR(e,t)),[o]);return(0,U.jsxs)(`div`,{className:`h-screen w-full relative`,children:[(0,U.jsx)(`div`,{className:`absolute top-4 left-4 z-10`,children:(0,U.jsx)(qv,{className:`p-4`,children:(0,U.jsx)(hu,{onClick:()=>{let e={id:`${n.length+1}`,data:{label:`Node ${n.length+1}`},position:{x:Math.random()*500,y:Math.random()*500}};return r(t=>[...t,e]),e},children:`Add Node`})})}),(0,U.jsxs)(xV,{nodes:n,edges:a,onNodesChange:i,onEdgesChange:s,onConnect:c,fitView:!0,children:[(0,U.jsx)(VV,{}),(0,U.jsx)(NV,{})]})]})}const GV=({uri:e})=>e?(0,U.jsx)(WV,{saveData:async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await J.fs.readFile(s_.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{nodes:[],edges:[]}}}}):(0,U.jsx)(`div`,{children:`uri is required`}),KV=Vg({initilize(e){e.componentService.register(`flow-demo`,GV),Kv.register({id:`flow-demo`,label:`Flow Demo`,match:[`.flowdemo.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`flow-demo:${t}`,title:`Flow Demo:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`flow-demo`,props:{uri:t}}})}})}});let qV=function(e){return e.IDLE=`idle`,e.DIRTY=`dirty`,e.SAVING=`saving`,e.SAVED=`saved`,e.ERROR=`error`,e}({});var JV=Array.isArray,YV=`[object AsyncFunction]`,XV=`[object Function]`,ZV=`[object GeneratorFunction]`,QV=`[object Proxy]`;function $V(e){if(!rn(e))return!1;var t=kn(e);return t==XV||t==ZV||t==YV||t==QV}var eH=$V,tH=sn[`__core-js_shared__`],nH=function(){var e=/[^.]+$/.exec(tH&&tH.keys&&tH.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function rH(e){return!!nH&&nH in e}var iH=rH,aH=Function.prototype.toString;function oH(e){if(e!=null){try{return aH.call(e)}catch{}try{return e+``}catch{}}return``}var sH=oH,cH=/[\\^$.*+?()[\]{}|]/g,lH=/^\[object .+?Constructor\]$/,uH=Function.prototype,dH=Object.prototype,fH=uH.toString,pH=dH.hasOwnProperty,mH=RegExp(`^`+fH.call(pH).replace(cH,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function hH(e){return!rn(e)||iH(e)?!1:(eH(e)?mH:lH).test(sH(e))}var gH=hH;function _H(e,t){return e?.[t]}var vH=_H;function yH(e,t){var n=vH(e,t);return gH(n)?n:void 0}var bH=yH,xH=bH(sn,`WeakMap`),SH=9007199254740991,CH=/^(?:0|[1-9]\d*)$/;function wH(e,t){var n=typeof e;return t??=SH,!!t&&(n==`number`||n!=`symbol`&&CH.test(e))&&e>-1&&e%1==0&&e<t}var TH=wH;function EH(e,t){return e===t||e!==e&&t!==t}var DH=EH,OH=9007199254740991;function kH(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=OH}var AH=kH;function jH(e){return e!=null&&AH(e.length)&&!eH(e)}var MH=jH,NH=Object.prototype;function PH(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||NH)}var FH=PH;function IH(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var LH=IH,RH=`[object Arguments]`;function zH(e){return jn(e)&&kn(e)==RH}var BH=zH,VH=Object.prototype,HH=VH.hasOwnProperty,UH=VH.propertyIsEnumerable,WH=BH(function(){return arguments}())?BH:function(e){return jn(e)&&HH.call(e,`callee`)&&!UH.call(e,`callee`)};function GH(){return!1}var KH=GH,qH=typeof exports==`object`&&exports&&!exports.nodeType&&exports,JH=qH&&typeof module==`object`&&module&&!module.nodeType&&module,YH=JH&&JH.exports===qH?sn.Buffer:void 0,XH=(YH?YH.isBuffer:void 0)||KH,ZH=`[object Arguments]`,QH=`[object Array]`,$H=`[object Boolean]`,eU=`[object Date]`,tU=`[object Error]`,nU=`[object Function]`,rU=`[object Map]`,iU=`[object Number]`,aU=`[object Object]`,oU=`[object RegExp]`,sU=`[object Set]`,cU=`[object String]`,lU=`[object WeakMap]`,uU=`[object ArrayBuffer]`,dU=`[object DataView]`,fU=`[object Float32Array]`,pU=`[object Float64Array]`,mU=`[object Int8Array]`,hU=`[object Int16Array]`,gU=`[object Int32Array]`,_U=`[object Uint8Array]`,vU=`[object Uint8ClampedArray]`,yU=`[object Uint16Array]`,bU=`[object Uint32Array]`,xU={};xU[fU]=xU[pU]=xU[mU]=xU[hU]=xU[gU]=xU[_U]=xU[vU]=xU[yU]=xU[bU]=!0,xU[ZH]=xU[QH]=xU[uU]=xU[$H]=xU[dU]=xU[eU]=xU[tU]=xU[nU]=xU[rU]=xU[iU]=xU[aU]=xU[oU]=xU[sU]=xU[cU]=xU[lU]=!1;function SU(e){return jn(e)&&AH(e.length)&&!!xU[kn(e)]}var CU=SU;function wU(e){return function(t){return e(t)}}var TU=wU,EU=typeof exports==`object`&&exports&&!exports.nodeType&&exports,DU=EU&&typeof module==`object`&&module&&!module.nodeType&&module,OU=DU&&DU.exports===EU&&an.process,kU=function(){try{return DU&&DU.require&&DU.require(`util`).types||OU&&OU.binding&&OU.binding(`util`)}catch{}}(),AU=kU&&kU.isTypedArray,jU=AU?TU(AU):CU,MU=Object.prototype.hasOwnProperty;function NU(e,t){var n=JV(e),r=!n&&WH(e),i=!n&&!r&&XH(e),a=!n&&!r&&!i&&jU(e),o=n||r||i||a,s=o?LH(e.length,String):[],c=s.length;for(var l in e)(t||MU.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||TH(l,c)))&&s.push(l);return s}var PU=NU;function FU(e,t){return function(n){return e(t(n))}}var IU=FU,LU=IU(Object.keys,Object),RU=Object.prototype.hasOwnProperty;function zU(e){if(!FH(e))return LU(e);var t=[];for(var n in Object(e))RU.call(e,n)&&n!=`constructor`&&t.push(n);return t}var BU=zU;function VU(e){return MH(e)?PU(e):BU(e)}var HU=VU,UU=bH(Object,`create`);function WU(){this.__data__=UU?UU(null):{},this.size=0}var GU=WU;function KU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qU=KU,JU=`__lodash_hash_undefined__`,YU=Object.prototype.hasOwnProperty;function XU(e){var t=this.__data__;if(UU){var n=t[e];return n===JU?void 0:n}return YU.call(t,e)?t[e]:void 0}var ZU=XU,QU=Object.prototype.hasOwnProperty;function $U(e){var t=this.__data__;return UU?t[e]!==void 0:QU.call(t,e)}var eW=$U,tW=`__lodash_hash_undefined__`;function nW(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=UU&&t===void 0?tW:t,this}var rW=nW;function iW(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}iW.prototype.clear=GU,iW.prototype.delete=qU,iW.prototype.get=ZU,iW.prototype.has=eW,iW.prototype.set=rW;var aW=iW;function oW(){this.__data__=[],this.size=0}var sW=oW;function cW(e,t){for(var n=e.length;n--;)if(DH(e[n][0],t))return n;return-1}var lW=cW,uW=Array.prototype.splice;function dW(e){var t=this.__data__,n=lW(t,e);return n<0?!1:(n==t.length-1?t.pop():uW.call(t,n,1),--this.size,!0)}var fW=dW;function pW(e){var t=this.__data__,n=lW(t,e);return n<0?void 0:t[n][1]}var mW=pW;function hW(e){return lW(this.__data__,e)>-1}var gW=hW;function _W(e,t){var n=this.__data__,r=lW(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var vW=_W;function yW(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yW.prototype.clear=sW,yW.prototype.delete=fW,yW.prototype.get=mW,yW.prototype.has=gW,yW.prototype.set=vW;var bW=yW,xW=bH(sn,`Map`);function SW(){this.size=0,this.__data__={hash:new aW,map:new(xW||bW),string:new aW}}var CW=SW;function wW(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var TW=wW;function EW(e,t){var n=e.__data__;return TW(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var DW=EW;function OW(e){var t=DW(this,e).delete(e);return this.size-=t?1:0,t}var kW=OW;function AW(e){return DW(this,e).get(e)}var jW=AW;function MW(e){return DW(this,e).has(e)}var NW=MW;function PW(e,t){var n=DW(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var FW=PW;function IW(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}IW.prototype.clear=CW,IW.prototype.delete=kW,IW.prototype.get=jW,IW.prototype.has=NW,IW.prototype.set=FW;var LW=IW;function RW(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var zW=RW;function BW(){this.__data__=new bW,this.size=0}var VW=BW;function HW(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var UW=HW;function WW(e){return this.__data__.get(e)}var GW=WW;function KW(e){return this.__data__.has(e)}var qW=KW,JW=200;function YW(e,t){var n=this.__data__;if(n instanceof bW){var r=n.__data__;if(!xW||r.length<JW-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new LW(r)}return n.set(e,t),this.size=n.size,this}var XW=YW;function ZW(e){this.size=(this.__data__=new bW(e)).size}ZW.prototype.clear=VW,ZW.prototype.delete=UW,ZW.prototype.get=GW,ZW.prototype.has=qW,ZW.prototype.set=XW;var QW=ZW;function $W(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var eG=$W;function tG(){return[]}var nG=tG,rG=Object.prototype.propertyIsEnumerable,iG=Object.getOwnPropertySymbols,aG=iG?function(e){return e==null?[]:(e=Object(e),eG(iG(e),function(t){return rG.call(e,t)}))}:nG;function oG(e,t,n){var r=t(e);return JV(e)?r:zW(r,n(e))}var sG=oG;function cG(e){return sG(e,HU,aG)}var lG=cG,uG=bH(sn,`DataView`),dG=bH(sn,`Promise`),fG=bH(sn,`Set`),pG=`[object Map]`,mG=`[object Object]`,hG=`[object Promise]`,gG=`[object Set]`,_G=`[object WeakMap]`,vG=`[object DataView]`,yG=sH(uG),bG=sH(xW),xG=sH(dG),SG=sH(fG),CG=sH(xH),wG=kn;(uG&&wG(new uG(new ArrayBuffer(1)))!=vG||xW&&wG(new xW)!=pG||dG&&wG(dG.resolve())!=hG||fG&&wG(new fG)!=gG||xH&&wG(new xH)!=_G)&&(wG=function(e){var t=kn(e),n=t==mG?e.constructor:void 0,r=n?sH(n):``;if(r)switch(r){case yG:return vG;case bG:return pG;case xG:return hG;case SG:return gG;case CG:return _G}return t});var TG=wG,EG=sn.Uint8Array,DG=`__lodash_hash_undefined__`;function OG(e){return this.__data__.set(e,DG),this}var kG=OG;function AG(e){return this.__data__.has(e)}var jG=AG;function MG(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new LW;++t<n;)this.add(e[t])}MG.prototype.add=MG.prototype.push=kG,MG.prototype.has=jG;var NG=MG;function PG(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var FG=PG;function IG(e,t){return e.has(t)}var LG=IG,RG=1,zG=2;function BG(e,t,n,r,i,a){var o=n&RG,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&zG?new NG:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!FG(t,function(e,t){if(!LG(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var VG=BG;function HG(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var UG=HG;function WG(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var GG=WG,KG=1,qG=2,JG=`[object Boolean]`,YG=`[object Date]`,XG=`[object Error]`,ZG=`[object Map]`,QG=`[object Number]`,$G=`[object RegExp]`,eK=`[object Set]`,tK=`[object String]`,nK=`[object Symbol]`,rK=`[object ArrayBuffer]`,iK=`[object DataView]`,aK=hn?hn.prototype:void 0,oK=aK?aK.valueOf:void 0;function sK(e,t,n,r,i,a,o){switch(n){case iK:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rK:return!(e.byteLength!=t.byteLength||!a(new EG(e),new EG(t)));case JG:case YG:case QG:return DH(+e,+t);case XG:return e.name==t.name&&e.message==t.message;case $G:case tK:return e==t+``;case ZG:var s=UG;case eK:var c=r&KG;if(s||=GG,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=qG,o.set(e,t);var u=VG(s(e),s(t),r,i,a,o);return o.delete(e),u;case nK:if(oK)return oK.call(e)==oK.call(t)}return!1}var cK=sK,lK=1,uK=Object.prototype.hasOwnProperty;function dK(e,t,n,r,i,a){var o=n&lK,s=lG(e),c=s.length;if(c!=lG(t).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in t:uK.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=o;++l<c;){u=s[l];var h=e[u],g=t[u];if(r)var _=o?r(g,h,u,t,e,a):r(h,g,u,e,t,a);if(!(_===void 0?h===g||i(h,g,n,r,a):_)){p=!1;break}m||=u==`constructor`}if(p&&!m){var v=e.constructor,y=t.constructor;v!=y&&`constructor`in e&&`constructor`in t&&!(typeof v==`function`&&v instanceof v&&typeof y==`function`&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p}var fK=dK,pK=1,mK=`[object Arguments]`,hK=`[object Array]`,gK=`[object Object]`,_K=Object.prototype.hasOwnProperty;function vK(e,t,n,r,i,a){var o=JV(e),s=JV(t),c=o?hK:TG(e),l=s?hK:TG(t);c=c==mK?gK:c,l=l==mK?gK:l;var u=c==gK,d=l==gK,f=c==l;if(f&&XH(e)){if(!XH(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new QW,o||jU(e)?VG(e,t,n,r,i,a):cK(e,t,c,n,r,i,a);if(!(n&pK)){var p=u&&_K.call(e,`__wrapped__`),m=d&&_K.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new QW,i(h,g,n,r,a)}}return f?(a||=new QW,fK(e,t,n,r,i,a)):!1}var yK=vK;function bK(e,t,n,r,i){return e===t?!0:e==null||t==null||!jn(e)&&!jn(t)?e!==e&&t!==t:yK(e,t,n,r,bK,i)}var xK=bK;function SK(e,t){return xK(e,t)}var CK=SK;const wK=Qt((e,t)=>({contexts:[],addContexts:t=>{e(e=>{if(!t.length)return e;let n=new Map(e.contexts.map(e=>[e.id,e])),r=!1;return t.forEach(e=>{let t={id:e.id,description:e.description,value:e.value},i=n.get(e.id);(!i||!CK(i,t))&&(n.set(e.id,t),r=!0)}),r?{contexts:Array.from(n.values())}:e})},removeContexts:t=>{e(e=>{if(!t.length)return e;let n=new Set(t),r=e.contexts.filter(e=>!n.has(e.id));return r.length===e.contexts.length?e:{contexts:r}})},getAllContexts:()=>t().contexts.map(e=>({description:e.description,value:e.value})),clearAllContexts:()=>{e({contexts:[]})}})),TK=new class{addContexts=e=>{wK.getState().addContexts(e)};removeContexts=e=>{wK.getState().removeContexts(e)};getAllContexts=()=>wK.getState().getAllContexts();clearAllContexts=()=>{wK.getState().clearAllContexts()}},EK=e=>{let t=(0,H.useMemo)(()=>new bo(e),[]);return(0,H.useEffect)(()=>{t.getValue()!==e&&t.next(e)},[e,t]),t};function DK(e){let t=EK(e),n=(0,H.useRef)([]);pv(()=>t.pipe(ws((e,t)=>CK(e,t))),e=>{n.current.length>0&&TK.removeContexts(n.current);let t=e.map(e=>({...e,id:Lt()}));TK.addContexts(t),n.current=t.map(e=>e.id)}),(0,H.useEffect)(()=>()=>{n.current.length>0&&(TK.removeContexts(n.current),n.current=[])},[])}function OK(e){let[t,n]=(0,H.useState)([]);(0,H.useEffect)(()=>{let t=e.pipe(xs(e=>e!==null&&Array.isArray(e.elements)),Cs(500),as(e=>{let t=(e.elements??[]).filter(e=>!e||typeof e!=`object`?!1:!e.isDeleted);return t.length?[{description:`current_excalidraw_elements`,value:JSON.stringify(t)}]:[]}),ws((e,t)=>JSON.stringify(e)===JSON.stringify(t))).subscribe(e=>{n(e)});return()=>{t.unsubscribe()}},[e]),DK(t)}function kK(e){return JSON.stringify({elements:e?.elements,files:e?.files})}const AK=e=>{let[t,n]=(0,H.useState)(null),[r,i]=(0,H.useState)(!1),a=_j(async()=>{try{let t=await J.fs.readFile(s_.parse(e)),n=JSON.parse(new TextDecoder().decode(t));return!n||typeof n!=`object`?null:(console.log(`loadData`,{parsed:n}),jK(n))}catch{return console.error(`loadData error`),null}});return(0,H.useEffect)(()=>{let e=!1;return i(!0),(async()=>{let t=await a();e||(n(t),i(!1))})(),()=>{e=!0}},[e,a]),{scene:t,loading:r}},jK=e=>{let t=(e.elements??[]).filter(e=>!e||typeof e!=`object`?!1:!e.isDeleted);return{elements:t.length>0?t:void 0,files:e.files,appState:e.appState?{zoom:e.appState.zoom}:void 0}};var MK=(0,H.lazy)(async()=>({default:(await oe(()=>import(`./excalidraw-ai-canvas-DPgFWc0r.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))).ExcalidrawAICanvas}));const NK=({uri:e})=>{let{t}=Nl(),[n,r]=(0,H.useState)(qV.IDLE),i=(0,H.useMemo)(()=>new bo(null),[]),{scene:a,loading:o}=AK(e);(0,H.useEffect)(()=>{a&&!o&&i.next(a)},[a,o,i]);let s=_j(async t=>{let n=jK(t);await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(JSON.stringify(n)),{create:!0,overwrite:!0})});(0,H.useEffect)(()=>{let e=i.pipe(xs(e=>e!==null&&e.elements!==void 0),Cs(1e3),ws((e,t)=>kK(e)===kK(t)),js(1)).subscribe(async e=>{try{r(qV.SAVING),await s(e),r(qV.SAVED)}catch(e){console.error(`Auto save excalidraw data failed:`,e),r(qV.ERROR)}});return()=>{e.unsubscribe()}},[i,s]);let c=_j(e=>{i.next(e),kK(e)!==kK(i.getValue())&&r(qV.DIRTY)}),l=_j(async()=>{let e=i.getValue();if(e)try{r(qV.SAVING),await s(e),r(qV.SAVED)}catch(e){console.error(`Manual save excalidraw data failed:`,e),r(qV.ERROR)}});return(0,H.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&(e.key===`s`||e.key===`S`)&&(e.preventDefault(),l())};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[l]),OK(i),e?o?(0,U.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`excalidraw.loading`)}):(0,U.jsx)(H.Suspense,{fallback:(0,U.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`excalidraw.loading`)}),children:(0,U.jsx)(MK,{initialValue:a,onChange:c,showSaveStatus:!0,saveStatus:n,onSaveClick:l},e)}):(0,U.jsx)(`div`,{children:t(`excalidraw.uriRequired`)})};var PK=bj.excalidraw.color;const FK=Vg({initilize(e){e.componentService.register(`excalidraw`,NK),Kv.register({id:`excalidraw`,label:K(`apps.excalidraw`),showInTreeMenu:!0,icon:{name:`PenTool`,color:PK},match:[`.excalidraw.json`,`.excalidraw`],priority:100,templates:[{id:`new-excalidraw`,label:K(`excalidraw.newFile`),defaultFileName:`Untitled.excalidraw.json`,initialContent:`{}`,icon:{name:`PenTool`,color:PK}}],init:t=>{e.layoutService.pageBox.addPage({id:`excalidraw:${t}`,title:`${K(`apps.excalidraw`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`excalidraw`,props:{uri:t}}})}})}});let IK=function(e){return e.IDLE=`idle`,e.DIRTY=`dirty`,e.SAVING=`saving`,e.SAVED=`saved`,e.ERROR=`error`,e}({});const LK=e=>{let[t,n]=(0,H.useState)(null),[r,i]=(0,H.useState)(!1),a=_j(async()=>{try{let t=await J.fs.readFile(s_.parse(e));return new TextDecoder().decode(t)||`<mxfile><diagram></diagram></mxfile>`}catch{return`<mxfile><diagram></diagram></mxfile>`}});return(0,H.useEffect)(()=>{let e=!1;return i(!0),(async()=>{let t=await a();e||(n(t),i(!1))})(),()=>{e=!0}},[e,a]),{xml:t,loading:r}};var RK=new class{currentHandle=null;register(e){this.currentHandle=e}unregister(e){this.currentHandle===e&&(this.currentHandle=null)}getCurrentHandle(){return this.currentHandle}};function zK(e){RK.register(e)}function BK(e){RK.unregister(e)}function VK(){return RK.getCurrentHandle()}var HK=`https://embed.diagrams.net`;function UK({xmlRef:e,iframeRef:t,onChange:n}){(0,H.useEffect)(()=>{let n={getXml(){return e.current},updateXml(n){let r=t.current;r&&(e.current=n,r.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:n}),HK))},getIframe(){return t.current}};return zK(n),()=>BK(n)},[_j(n),e,t])}var WK=`https://embed.diagrams.net`,GK=`${WK}/?embed=1&ui=atlas&spin=1&proto=json&saveAndExit=0`;const KK=({initialXml:e,onChange:t,onSave:n})=>{let r=(0,H.useRef)(null),i=(0,H.useRef)(e||`<mxfile><diagram></diagram></mxfile>`),a=(0,H.useRef)(!1),o=(0,H.useRef)(e);(0,H.useEffect)(()=>{if(e&&!a.current)i.current=e,o.current=e,a.current=!0;else if(e&&e!==o.current&&(o.current=e,i.current!==e)){i.current=e;let t=r.current;t&&t.contentWindow&&t.contentWindow.postMessage(JSON.stringify({action:`load`,xml:e}),WK)}},[e]),UK({xmlRef:i,iframeRef:r,onChange:t});let s=_j(t),c=_j(n||(()=>{})),l=_j(e=>{if(e.origin!==WK)return;let t=r.current;if(t){if(e.data===`ready`)i.current&&t.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:i.current}),WK);else if(typeof e.data==`string`)try{let n=JSON.parse(e.data);n.event===`change`?n.xml&&(i.current=n.xml,s(n.xml)):n.event===`save`?n.xml&&(i.current=n.xml,c(n.xml)):n.event===`init`&&i.current&&t.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:i.current}),WK)}catch(e){console.error(`Failed to parse draw.io message:`,e)}}});return(0,H.useEffect)(()=>(window.addEventListener(`message`,l),()=>window.removeEventListener(`message`,l)),[l]),(0,U.jsx)(`iframe`,{ref:r,src:(0,H.useMemo)(()=>{let e=o.current||`<mxfile><diagram></diagram></mxfile>`;return`${GK}&xml=${encodeURIComponent(e)}`},[]),className:`w-full h-full border-0`,title:`Draw.io Editor`})},qK=({xml:e,onChange:t,onSave:n,saveStatus:r})=>{let{t:i}=Nl();return(0,U.jsxs)(`div`,{className:`h-full w-full relative`,children:[(0,U.jsx)(`div`,{className:`absolute top-4 right-4 z-10`,children:(0,U.jsx)(Fd,{children:(0,U.jsxs)(Id,{children:[(0,U.jsx)(Ld,{asChild:!0,children:(0,U.jsx)(`div`,{className:`flex items-center justify-center`,children:(()=>r===IK.SAVING?(0,U.jsx)(_f,{className:`h-4 w-4 animate-spin`}):r===IK.DIRTY?(0,U.jsx)($d,{className:`h-4 w-4`}):r===IK.ERROR?(0,U.jsx)(Zd,{className:`h-4 w-4 text-destructive`}):(0,U.jsx)(Qd,{className:`h-4 w-4 text-green-600`}))()})}),(0,U.jsx)(Rd,{children:(()=>r===IK.SAVING?i(`drawio.saving`):r===IK.DIRTY?i(`drawio.edited`):r===IK.ERROR?i(`drawio.saveError`):i(`drawio.saved`))()})]})})}),(0,U.jsx)(KK,{initialXml:e,onChange:t,onSave:n})]})};function JK(e){return e??``}const YK=({uri:e})=>{let{t}=Nl(),[n,r]=(0,H.useState)(IK.IDLE),i=(0,H.useMemo)(()=>new bo(null),[]),{xml:a,loading:o}=LK(e);(0,H.useEffect)(()=>{a&&!o&&i.next(a)},[a,o,i]);let s=_j(async t=>{await J.fs.writeFile(s_.parse(e),new TextEncoder().encode(t),{create:!0,overwrite:!0})});(0,H.useEffect)(()=>{let e=i.pipe(xs(e=>e!==null&&e!==``),Cs(1e3),ws((e,t)=>JK(e)===JK(t)),js(1)).subscribe(async e=>{try{r(IK.SAVING),await s(e),r(IK.SAVED)}catch(e){console.error(`Auto save drawio data failed:`,e),r(IK.ERROR)}});return()=>{e.unsubscribe()}},[i,s]);let c=_j(e=>{i.next(e),JK(e)!==JK(i.getValue())&&r(IK.DIRTY)}),l=_j(async e=>{try{r(IK.SAVING),await s(e),r(IK.SAVED)}catch(e){console.error(`Save drawio data failed:`,e),r(IK.ERROR)}});return e?o?(0,U.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`drawio.loading`)}):(0,U.jsx)(qK,{xml:a,onChange:c,onSave:l,saveStatus:n}):(0,U.jsx)(`div`,{children:t(`drawio.uriRequired`)})};var XK=bj.drawio.color;const ZK=Vg({initilize(e){e.componentService.register(`drawio`,YK),Kv.register({id:`drawio`,label:K(`apps.drawio`),showInTreeMenu:!0,icon:{name:`Network`,color:XK},match:[`.drawio`],priority:100,templates:[{id:`new-drawio`,label:K(`drawio.newFile`),defaultFileName:`Untitled.drawio`,initialContent:`<mxfile><diagram></diagram></mxfile>`,icon:{name:`Network`,color:XK}}],init:t=>{e.layoutService.pageBox.addPage({id:`drawio:${t}`,title:`${K(`apps.drawio`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`drawio`,props:{uri:t}}})}})}}),QK=Vg({initilize(e){e.pluginService.use([qw,WE,aD,hA,vA,UA,Cj,KV,FK,ZK])}}),$K=Rt,eq=zt,tq=e=>{let[t,n]=(0,H.useState)(null),[r,i]=(0,H.useState)(!0),[a,o]=(0,H.useState)(null);return(0,H.useEffect)(()=>{e().then(e=>n(e)).catch(e=>o(e)).finally(()=>i(!1))},[]),[{data:t,loading:r,error:a},{refetch:()=>{i(!0),e().then(e=>n(e)).catch(e=>o(e)).finally(()=>i(!1))},mutate:e=>{n(e)}}]};var nq=H.lazy(()=>oe(()=>import(`./custom-monaco-editor-BA7nZOgK.js`),__vite__mapDeps([14,1,2,3,4,5,15,16])).then(e=>({default:e.CustomMonacoEditor}))),rq={js:`javascript`,ts:`typescript`,json:`json`,html:`html`,css:`css`,md:`markdown`,scss:`scss`,less:`less`,jsx:`javascript`,tsx:`typescript`,yaml:`yaml`,yml:`yaml`,xml:`xml`,ini:`ini`,conf:`ini`,java:`java`,cpp:`cpp`,cxx:`cpp`,cc:`cpp`,hpp:`cpp`,hxx:`cpp`,py:`python`,sh:`shell`,bash:`shell`,zsh:`shell`,bat:`bat`,ps1:`powershell`,psm1:`powershell`,sql:`sql`,php:`php`,go:`go`,rb:`ruby`,lua:`lua`,pl:`perl`,rs:`rust`,cs:`csharp`,fs:`fsharp`,swift:`swift`,kt:`kotlin`,scala:`scala`,perl:`perl`,coffee:`coffeescript`,toml:`plaintext`,csv:`plaintext`,properties:`plaintext`,log:`plaintext`};const iq=({uri:e})=>{let{t}=Nl();e=e.replace(`::`,`:/xxx.com`);let[{data:n,loading:r}]=tq(()=>J.fs.readFile(s_.parse(e)).then(e=>new TextDecoder().decode(e))),i=e.split(`.`).pop();(0,H.useEffect)(()=>{!r&&n!==void 0&&J.eventBus.emit(Ad.FileLoaded,{uri:e})},[r,n,e]);let a=H.useRef(n||null),o=n=>{J.fs.writeFile(s_.parse(e),new TextEncoder().encode(n),{overwrite:!0,create:!1}).then(()=>{J.notificationService.success(t(`file.saveSuccess`))})};return(0,U.jsx)(H.Suspense,{fallback:(0,U.jsx)(`div`,{children:t(`file.loadingEditor`)}),children:(0,U.jsx)(nq,{value:n||``,language:i&&rq[i]||`txt`,onChange:e=>{a.current=e},keyBindings:[{key:$K.CtrlCmd|eq.KeyS,action:()=>{a.current!==null&&o(a.current)}}]})})},aq=`ada.adb.ads.applescript.as.asc.ascii.ascx.asm.asmx.asp.aspx.atom.au3.awk.bas.bash.bashrc.bat.bbcolors.bcp.bdsgroup.bdsproj.bib.bowerrc.c.cbl.cc.cfc.cfg.cfm.cfml.cgi.cjs.clj.cljs.cls.cmake.cmd.cnf.cob.code-snippets.coffee.coffeekup.conf.cp.cpp.cpt.cpy.crt.cs.csh.cson.csproj.csr.css.csslintrc.csv.ctl.curlrc.cxx.d.dart.dfm.diff.dof.dpk.dpr.dproj.dtd.eco.editorconfig.ejs.el.elm.emacs.eml.ent.erb.erl.eslintignore.eslintrc.ex.exs.f.f03.f77.f90.f95.fish.for.fpp.frm.fs.fsproj.fsx.ftn.gemrc.gemspec.gitattributes.gitconfig.gitignore.gitkeep.gitmodules.go.gpp.gradle.graphql.groovy.groupproj.grunit.gtmpl.gvimrc.h.haml.hbs.hgignore.hh.hpp.hrl.hs.hta.htaccess.htc.htm.html.htpasswd.hxx.iced.iml.inc.inf.info.ini.ino.int.irbrc.itcl.itermcolors.itk.jade.java.jhtm.jhtml.js.jscsrc.jshintignore.jshintrc.json.json5.jsonld.jsp.jspx.jsx.ksh.less.lhs.lisp.log.ls.lsp.lua.m.m4.mak.map.markdown.master.md.mdown.mdwn.mdx.metadata.mht.mhtml.mjs.mk.mkd.mkdn.mkdown.ml.mli.mm.mxml.nfm.nfo.noon.npmignore.npmrc.nuspec.nvmrc.ops.pas.pasm.patch.pbxproj.pch.pem.pg.php.php3.php4.php5.phpt.phtml.pir.pl.pm.pmc.pod.pot.prettierrc.properties.props.pt.pug.purs.py.pyx.r.rake.rb.rbw.rc.rdoc.rdoc_options.resx.rexx.rhtml.rjs.rlib.ron.rs.rss.rst.rtf.rvmrc.rxml.s.sass.scala.scm.scss.seestyle.sh.shtml.sln.sls.spec.sql.sqlite.sqlproj.srt.ss.sss.st.strings.sty.styl.stylus.sub.sublime-build.sublime-commands.sublime-completions.sublime-keymap.sublime-macro.sublime-menu.sublime-project.sublime-settings.sublime-workspace.sv.svc.svg.swift.t.tcl.tcsh.terminal.tex.text.textile.tg.tk.tmLanguage.tmpl.tmTheme.tpl.ts.tsv.tsx.tt.tt2.ttml.twig.toml.txt.v.vb.vbproj.vbs.vcproj.vcxproj.vh.vhd.vhdl.vim.viminfo.vimrc.vm.vue.webapp.webmanifest.wsc.x-php.xaml.xht.xhtml.xml.xs.xsd.xsl.xslt.y.yaml.yml.zsh.zshrc`.split(`.`),oq=`LICENSE,LICENSE.txt,LICENSE.md,README,README.txt,Makefile,Dockerfile,.dockerignore,.env,.env.local,.env.development,.env.production,.env.test,CHANGELOG,CHANGELOG.txt,CHANGELOG.md,CONTRIBUTING,CONTRIBUTING.txt,CONTRIBUTING.md,AUTHORS,AUTHORS.txt,NOTICE,NOTICE.txt,COPYING,COPYING.txt,.gitattributes,.gitignore,.gitmodules,.editorconfig,.prettierrc,.prettierignore,.eslintrc,.eslintignore,.npmignore,.npmrc,.nvmrc,.bashrc,.zshrc,.vimrc,.gvimrc`.split(`,`),sq=({xbook:e,pageId:t,uri:n,viewType:r,title:i,viewProps:a})=>{let o=e.layoutService.pageBox;if((o.getPageList?.()||[]).find(e=>e.id===t)){o.showPage(t);return}o.addPage({id:t,title:i??n,status:`loading`,viewData:{type:r,props:a??{uri:n}}}),e.eventBus.emit(Ad.FileLoading,{uri:n})};var cq=Vg({addComponents(e){return{"text-file-view":iq}},initilize(e){Kv.register({id:`text-file-view`,label:`Monaco Editor`,icon:`FileCode`,showInTreeMenu:!0,priority:-20,match:[...aq.map(e=>`.${e}`),...oq],init:t=>{sq({xbook:e,pageId:`text-file-view:${t}`,uri:t,viewType:`text-file-view`})}});let t=(t,n)=>{(e.layoutService.pageBox.getPageList?.()||[]).filter(e=>e.viewData?.props?.uri===t).forEach(t=>{e.layoutService.pageBox.updatePage({id:t.id,status:n})})};e.eventBus.on(Ad.FileLoaded,({uri:e})=>{t(e,void 0)})}}),lq=`::`,uq=e=>{let[t,...n]=e.split(lq);return{spaceId:t,path:n.join(lq)}};const dq=(()=>({service:{open:async(e,t)=>u_.getUri(e,t).toString(),read:async e=>{let t=/:\/\//.test(e)?u_.parseUri(e):u_.getUri(...Object.values(uq(e))),n=await J.fs.readFile(t);return new TextDecoder().decode(n)},write:async(e,t)=>{let n=/:\/\//.test(e)?u_.parseUri(e):u_.getUri(...Object.values(uq(e))),r=new TextEncoder().encode(t);return await J.fs.writeFile(n,r,{overwrite:!0,create:!0}),!0}},generateFileId:(e,t)=>`${e}${lq}${t}`,isRootPath:e=>e===`/`||e===`.`||e===``}))();function fq(e,t){let n=t?.autosave??!1,r=t?.debounceMs??500,[i,a]=(0,H.useState)(``),[o,s]=(0,H.useState)(``),[c,l]=(0,H.useState)(!0),[u,d]=(0,H.useState)(!1),[f,p]=(0,H.useState)(null),m=(0,H.useRef)(null),h=(0,H.useRef)(!1),g=i!==o;(0,H.useEffect)(()=>{if(c)return;let t=h.current;h.current=g,g&&!t?J.eventBus.emit(Ad.FileDirty,{uri:e}):!g&&t&&J.eventBus.emit(Ad.FileClean,{uri:e})},[g,c,e]),(0,H.useEffect)(()=>{let t=!1;return l(!0),dq.service.read(e).then(n=>{t||(a(n),s(n),h.current=!1,l(!1),J.eventBus.emit(Ad.FileLoaded,{uri:e}))}).catch(n=>{t||(p(String(n?.message||n)),l(!1),J.eventBus.emit(Ad.FileLoaded,{uri:e}))}),()=>{t=!0}},[e]);let _=(0,H.useCallback)(async t=>{let n=t===void 0?i:t;d(!0);try{await dq.service.write(e,n),s(n),h.current=!1,J.eventBus.emit(Ad.FileSaved),J.eventBus.emit(Ad.FileClean,{uri:e})}catch(e){p(String(e?.message||e))}finally{d(!1)}},[e,i]),v=(0,H.useCallback)(e=>{a(e),n&&(m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_()},r))},[n,r,_]);return(0,H.useEffect)(()=>()=>{m.current&&window.clearTimeout(m.current)},[]),{content:i,setContent:v,flush:_,loading:c,saving:u,error:f,isDirty:g}}var pq=(0,H.lazy)(async()=>({default:(await oe(()=>import(`./es-RELsoNZJ.js`),__vite__mapDeps([17,1,2,3,4,5,8,9,7,10,11,12]))).ZenmarkEditor}));const mq=e=>{let{t}=Nl(),{uri:n}=e,{content:r,setContent:i,loading:a,flush:o}=fq(n,{autosave:!1}),s=(0,H.useRef)(null),[c,l]=(0,H.useState)(null);return(0,H.useEffect)(()=>{let e=!1;return oe(()=>import(`./es-RELsoNZJ.js`),__vite__mapDeps([17,1,2,3,4,5,8,9,7,10,11,12])).then(t=>{e||l({KeyMod:t.KeyMod,KeyCode:t.KeyCode,matchesKeybinding:t.matchesKeybinding})}).catch(e=>{console.error(`Failed to load zenmark-editor keybindings`,e)}),()=>{e=!0}},[]),(0,H.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&(e.key===`s`||e.key===`S`)&&!e.shiftKey&&s.current?.contains(document.activeElement)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o())};return document.addEventListener(`keydown`,e,!0),()=>{document.removeEventListener(`keydown`,e,!0)}},[o]),a?(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 h-full`,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center gap-3 text-center`,children:[(0,U.jsx)(_f,{className:`h-6 w-6 animate-spin text-muted-foreground/70`}),(0,U.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,U.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`zenmark.loading`)}),(0,U.jsx)(`p`,{className:`text-xs text-muted-foreground/60 truncate max-w-xs`,children:n.split(`/`).pop()})]})]})}):(0,U.jsx)(`div`,{ref:s,style:{height:`100%`},children:(0,U.jsx)(H.Suspense,{fallback:(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 h-full`,children:(0,U.jsxs)(`div`,{className:`flex flex-col items-center gap-3 text-center`,children:[(0,U.jsx)(_f,{className:`h-6 w-6 animate-spin text-muted-foreground/70`}),(0,U.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,U.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`zenmark.loadingEditor`)}),(0,U.jsx)(`p`,{className:`text-xs text-muted-foreground/60 truncate max-w-xs`,children:n.split(`/`).pop()})]})]})}),children:(0,U.jsx)(pq,{value:r,onChange:e=>{i(e)},onKeyDown:e=>{if(!c)return!1;let t=c.KeyMod.CtrlCmd|c.KeyCode.KEY_S;return c.matchesKeybinding(e,t)?(e.preventDefault(),e.stopPropagation(),o(),!0):!1}})})})};var hq=bj.markdown.color,gq=Vg({async initilize(e){e.componentService.register(`zenmark-editor`,mq),Kv.register({id:`zenmark-editor`,label:K(`apps.zenNotes`),icon:{name:`SiMarkdown`,color:hq},showInTreeMenu:!0,priority:-10,match:[`.md`,`.markdown`,`.MD`],init:t=>{sq({xbook:e,pageId:`zenmark-editor:${t}`,uri:t,viewType:`zenmark-editor`})}});let t=(t,n)=>{(e.layoutService.pageBox.getPageList?.()||[]).filter(e=>e.viewData?.props?.uri===t).forEach(t=>{e.layoutService.pageBox.updatePage({id:t.id,status:n})})};e.eventBus.on(Ad.FileSaved,()=>{e.notificationService.success({title:K(`zenmark.fileSaved`),duration:1e3})}),e.eventBus.on(Ad.FileDirty,({uri:e})=>{t(e,`unsaved`)}),e.eventBus.on(Ad.FileClean,({uri:e})=>{t(e,void 0)}),e.eventBus.on(Ad.FileLoaded,({uri:e})=>{t(e,void 0)})}});const _q=Vg({async initilize(e){e.pluginService.use([QK,cq,gq])}});var vq=oc.create({scope:`showCurrentSpacePagesOnly`,storage:`localStorage`});const yq=Vg({initilize(e){e.layoutService.pageBox.subscribePageList(e=>{let t=yv.getFocusedSpace();t?.id&&vq.set(t.id,e)}),yv.getFocusedSpace$().pipe(ws((e,t)=>e?.id===t?.id),Ds()).subscribe(([t,n])=>{let r=e.layoutService.pageBox.getPageList();if(t?.id&&vq.set(t.id,r),n?.id){let t=vq.get(n.id,void 0);t?e.layoutService.pageBox.setPageList(t):e.layoutService.pageBox.setPageList([])}})}});let bq=function(e){return e[e.Unknown=0]=`Unknown`,e[e.File=1]=`File`,e[e.Directory=2]=`Directory`,e[e.SymbolicLink=64]=`SymbolicLink`,e}({});var xq=class{async readDirectory(e,t){let n=u_.getUri(e,t);return J.fs.readDirectory(n)}async readFile(e,t){let n=u_.getUri(e,t);return J.fs.readFile(n)}async stat(e,t){try{let n=u_.getUri(e,t),r=await J.fs.stat(n);return{mtime:r.mtime,size:r.size}}catch{return{}}}};const Sq=e=>{let t=e.toLowerCase();return[`.png`,`.jpg`,`.jpeg`,`.gif`,`.webp`,`.ico`,`.pdf`,`.zip`,`.tar`,`.gz`,`.7z`,`.mp3`,`.mp4`,`.mov`,`.wav`,`.ttf`,`.woff`,`.woff2`,`.exe`,`.dll`].some(e=>t.endsWith(e))||t.startsWith(`.git/`)},Cq=e=>{let t=e.split(`/`);if(t.some(e=>[`.git`,`node_modules`,`.next`,`dist`,`build`].includes(e)))return!0;let n=t[t.length-1];return!![`.DS_Store`,`Thumbs.db`].includes(n)};var wq=ic(`search-meta`,`localStorage`),Tq=class{getAll(e){return wq.get(e,{})||{}}set(e,t,n){let r=this.getAll(e);r[t]=n,wq.set(e,r)}remove(e,t){let n=this.getAll(e);delete n[t],wq.set(e,n)}listPaths(e){return Object.keys(this.getAll(e))}REPO_META_KEY=`__repo__`;getRepoMeta(e){let t=wq.get(e,{}),n=t?t[this.REPO_META_KEY]:void 0;return n&&typeof n==`object`?n:{}}setRepoMeta(e,t){let n=this.getAll(e),r=n[this.REPO_META_KEY],i={...typeof r==`object`&&r?r:{},...t};n[this.REPO_META_KEY]=i,wq.set(e,n)}},Eq=e=>{let t=e.charCodeAt(0);return t>=19968&&t<=40959||t>=13312&&t<=19903||t>=131072&&t<=173791||t>=173824&&t<=177983||t>=177984&&t<=178207||t>=178208&&t<=183983},Dq=e=>e.toLowerCase(),Oq=e=>{let t=[];if(!e||!/^[a-z0-9_]+$/.test(e)||e.length<3||e.length>48)return t;for(let n=0;n<=e.length-3;n++)t.push(e.slice(n,n+3));return t};const kq=e=>{if(!e)return[];let t=Dq(e),n=[],r=0;for(;r<t.length;){let e=t[r],i=Eq(e),a=r+1;for(;a<t.length&&Eq(t[a])===i;)a++;let o=t.slice(r,a);if(i)if(o.length===1)n.push(o);else for(let e=0;e<o.length-1;e++)n.push(o.slice(e,e+2));else{let e=o.split(/[^a-z0-9_]+/g).filter(Boolean);for(let t of e){n.push(t);let e=Oq(t);e.length&&n.push(...e)}}r=a}return n},Aq=(e,t)=>{let n=kq(e||``),r=kq(t||``);return[...n,...n,...r]};var jq=ic(`search-index`,`localStorage`),Mq=class{terms=new Map;docs=new Map;pathIndex=new Map;getSpaceTerms(e){return this.terms.has(e)||this.terms.set(e,new Map),this.terms.get(e)}getSpaceDocs(e){return this.docs.has(e)||this.docs.set(e,new Map),this.docs.get(e)}getSpacePathIndex(e){return this.pathIndex.has(e)||this.pathIndex.set(e,new Map),this.pathIndex.get(e)}async upsert(e,t){let n=this.getSpaceTerms(e),r=this.getSpaceDocs(e),i=this.getSpacePathIndex(e);for(let a of t){let t=r.get(a.id);t&&this.removeDocTokens(e,t);let o=Aq(a.title||``,a.text||``),s=new Map;o.forEach(e=>s.set(e,(s.get(e)||0)+1));let c={id:a.id,spaceId:a.spaceId,path:a.path,title:a.title,text:a.text,len:Math.max(1,o.length)};r.set(a.id,c),i.has(a.path)||i.set(a.path,new Set),i.get(a.path).add(a.id);for(let[e,t]of s)n.has(e)||n.set(e,new Map),n.get(e).set(a.id,t)}await this.persist(e)}async removeByPath(e,t){let n=this.getSpaceDocs(e),r=this.getSpacePathIndex(e),i=r.get(t);if(i){for(let t of Array.from(i)){let r=n.get(t);r&&this.removeDocTokens(e,r),n.delete(t)}r.delete(t),await this.persist(e)}}removeDocTokens(e,t){let n=this.getSpaceTerms(e),r=Aq(t.title||``,t.text||``),i=new Set(r);for(let e of i){let r=n.get(e);r&&(r.delete(t.id),r.size===0&&n.delete(e))}let a=this.getSpacePathIndex(e),o=a.get(t.path);o&&(o.delete(t.id),o.size===0&&a.delete(t.path))}async search(e,t,n={}){let r=this.getSpaceTerms(e),i=this.getSpaceDocs(e),a=kq(t).filter(Boolean),o=new Map,s=Math.max(1,i.size);for(let e of a){let t=r.get(e);if(!t)continue;let n=t.size,a=Math.log(1+s/n);for(let[e,n]of t){let t=i.get(e);if(!t)continue;let r=n/t.len,s=(o.get(e)||0)+r*a;o.set(e,s)}}let c=Array.from(o.entries()).sort((e,t)=>t[1]-e[1]).map(([e,t])=>{let n=i.get(e);return{id:n.id,spaceId:n.spaceId,path:n.path,title:n.title,snippet:this.makeSnippet(n.text,a),score:t}}),{limit:l=20,offset:u=0}=n;return{hits:c.slice(u,u+l),total:c.length}}makeSnippet(e,t,n=96){if(!e)return``;let r=e.toLowerCase(),i=-1;for(let e of t){let t=r.indexOf(e);if(t!==-1){i=t;break}}if(i===-1)return e.slice(0,n);let a=Math.max(0,i-Math.floor(n/2)),o=Math.min(e.length,a+n);return(a>0?`...`:``)+e.slice(a,o)+(o<e.length?`...`:``)}async persist(e){let t=this.getSpaceTerms(e),n=this.getSpaceDocs(e),r=this.getSpacePathIndex(e),i={terms:Array.from(t.entries()).map(([e,t])=>[e,Array.from(t.entries())]),docs:Array.from(n.entries()),paths:Array.from(r.entries()).map(([e,t])=>[e,Array.from(t.values())])};jq.set(e,i)}async restore(e){let t=jq.get(e);if(!t)return;let n=new Map;for(let[e,r]of t.terms)n.set(e,new Map(r));this.terms.set(e,n);let r=new Map(t.docs);this.docs.set(e,r);let i=new Map;for(let[e,n]of t.paths)i.set(e,new Set(n));this.pathIndex.set(e,i)}async drop(e){this.terms.delete(e),this.docs.delete(e),this.pathIndex.delete(e),jq.remove(e)}getDocCount(e){return this.getSpaceDocs(e).size}async scanSubstring(e,t,n={}){let{limit:r=50,offset:i=0}=n,a=(t||``).toLowerCase();if(!a)return{hits:[],total:0};let o=Array.from(this.getSpaceDocs(e).values()),s=[];for(let e of o){let t=e.text.toLowerCase().indexOf(a);t!==-1&&s.push({id:e.id,spaceId:e.spaceId,path:e.path,title:e.title,snippet:this.makeSnippet(e.text,[a],96),score:1/(1+t)+.1/(1+e.len)})}return s.sort((e,t)=>t.score-e.score),{hits:s.slice(i,i+r),total:s.length}}};async function Nq(e){let t=yv.getSpace(e);if(!t)return{isLarge:!1,reason:`no-space`};let{platform:n,owner:r,repo:i}=t;if(n===`github`){let e=hv.getAnyAuthInfo(n,r)?.accessToken,t=`https://api.github.com/repos/${r}/${i}/zipball`;try{let n=await iv.head(t,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),r=Number(n.headers.get(`Content-Length`)||n.headers.get(`content-length`)||0);return r&&r>=52428800?{isLarge:!0,reason:`archive-size`,metrics:{contentLength:r}}:{isLarge:!1,reason:`archive-size`,metrics:{contentLength:r}}}catch{return{isLarge:!1,reason:`head-failed`}}}return{isLarge:!1,reason:`no-estimator`}}var Pq=class{async tryFetchZip(e){let t=yv.getSpace(e);if(!t)return;let{platform:n,owner:r,repo:i}=t;if(n!==`github`)return;let a=hv.getAnyAuthInfo(n,r)?.accessToken,o=`https://api.github.com/repos/${r}/${i}/zipball`;return(await iv.get(o,{responseType:`arrayBuffer`,headers:a?{Authorization:`Bearer ${a}`}:void 0})).data}async enumerate(e){try{await this.tryFetchZip(e);return}catch{return}}},Fq=new TextDecoder,Iq=e=>u_.generateHash(e);const Lq=new class{reader;meta=new Tq;index=new Mq;logs=new Map;onLogEmitter=new ip;onProgressEmitter=new ip;watching=new Set;fsListenerRegistered=!1;constructor(e=new xq){this.reader=e}async restore(e){await this.index.restore(e)}async dropSpace(e){await this.index.drop(e)}async search(e,t,n){await this.index.restore(e);let r=(t||``).trim();return/^[a-z0-9]$/i.test(r)?(this.log(e,`Substring scan fallback for short query: '${r}'`),this.index.scanSubstring(e,r,n)):this.index.search(e,r,n)}onLog(e){return this.onLogEmitter.event(e)}onProgress(e){return this.onProgressEmitter.event(e)}getLogs(e){return this.logs.get(e)||[]}clearLogs(e){this.logs.delete(e)}getDocCount(e){return this.index.getDocCount(e)}log(e,t,n=`info`){let r=this.logs.get(e)||[],i=`[${new Date().toLocaleTimeString()}] ${t}`;r.push(i),r.length>500&&r.shift(),this.logs.set(e,r),this.onLogEmitter.fire({spaceId:e,message:i,level:n})}async indexSpace(e,t={}){await this.index.restore(e);let n=new Set,r=0,i=0,a=Date.now();this.log(e,`Index start: full=${!!t.full}`),this.onProgressEmitter.fire({spaceId:e,phase:`start`,indexed:0,removed:0});try{let t=await Nq(e);if(this.log(e,`Sizer: isLarge=${t.isLarge} reason=${t.reason||``}`),t.isLarge){let t=await new Pq().enumerate(e);if(t&&t.length)for(let a of t){if(!a.path||Cq(a.path))continue;let t=a.path.split(`/`).pop()||a.path;if(Sq(t))continue;let o=a.content||``,s=[{id:u_.generateHash(`${e}:${a.path}`),spaceId:e,path:a.path,title:t,text:o,updatedAt:Date.now()}];await this.index.upsert(e,s),this.meta.set(e,a.path,{hash:u_.generateHash(o),updatedAt:Date.now()}),n.add(a.path),r++,r%100==0&&this.onProgressEmitter.fire({spaceId:e,phase:`archive`,indexed:r,removed:i})}}}catch{}let o=async i=>{let a=await this.reader.readDirectory(e,i);for(let[s,c]of a){let a=i.endsWith(`/`)?i+s:i+`/`+s;Cq(a)||(c===bq.Directory?await o(a):c===bq.File&&(await this.processFile(e,a,t),n.add(a),r++))}};r===0&&(this.log(e,`Walk scan start`),await o(`/`));let s=this.meta.listPaths(e);for(let t of s)n.has(t)||(await this.index.removeByPath(e,t),this.meta.remove(e,t),i++);let c=Date.now()-a;return this.log(e,`Index done: indexed=${r}, removed=${i}, docs=${this.getDocCount(e)}, took=${c}ms`),this.onProgressEmitter.fire({spaceId:e,phase:`done`,indexed:r,removed:i}),{indexed:r,removed:i}}async reindexPaths(e,t){await this.index.restore(e);let n=0;for(let r of t)await this.processFile(e,r,{full:!0}),n++;return n}async processFile(e,t,n){let r=t.split(`/`).pop()||t;if(Sq(r))return;let i=await this.reader.stat?.(e,t)||{},a=this.meta.getAll(e)[t],o=``,s=a?.hash;if((()=>n.full||!a?!0:typeof i.mtime==`number`&&typeof i.size==`number`?a.mtime!==i.mtime||a.size!==i.size:!0)())try{let c=await this.reader.readFile(e,t);if(o=Fq.decode(c),s=Iq(o),!n.full&&a&&!i.mtime&&!i.size&&a.hash===s){this.log(e,`Skip unchanged ${t}`);return}let l=[{id:Iq(`${e}:${t}`),spaceId:e,path:t,title:r,text:o,updatedAt:Date.now()}];await this.index.upsert(e,l),this.onProgressEmitter.fire({spaceId:e,phase:`file`,indexed:1,removed:0,path:t})}catch(n){let r=n instanceof Error?n.message:String(n);this.log(e,`Error reading ${t}: ${r}`,`error`)}this.meta.set(e,t,{mtime:i.mtime,size:i.size,hash:s,updatedAt:Date.now()})}startWatch(e){this.watching.has(e)||(this.watching.add(e),this.ensureFsListener(),this.log(e,`FS watch enabled`))}stopWatch(e){this.watching.delete(e),this.log(e,`FS watch disabled`)}ensureFsListener(){if(!this.fsListenerRegistered)try{J.fs.onDidChangeFile?.(e=>{if(Array.isArray(e))for(let t of e){let e=t.uri.toString(),n=u_.getSpaceIdFromUri(e);if(!n||!this.watching.has(n))continue;let r=u_.getInSpacePathFromUri(e);this.log(n,`FS change ${r}`),this.processFile(n,r,{full:!1})}}),this.fsListenerRegistered=!0}catch{}}};async function Rq(e,t,n){try{let r=(await iv.get(`https://api.github.com/repos/${e}/${t}`,{headers:n?{Authorization:`Bearer ${n}`}:void 0})).data?.default_branch||`master`;return(await iv.get(`https://api.github.com/repos/${e}/${t}/commits/${r}`,{headers:n?{Authorization:`Bearer ${n}`}:void 0})).data?.sha}catch{return}}async function zq(e,t,n){try{let r=await iv.head(`https://api.github.com/repos/${e}/${t}/zipball`,{headers:n?{Authorization:`Bearer ${n}`}:void 0}),i=Number(r.headers.get(`content-length`)||r.headers.get(`Content-Length`)||0);return{etag:r.headers.get(`etag`)||r.headers.get(`ETag`)||void 0,contentLength:i||void 0}}catch{return{}}}async function Bq(e){let t=yv.getSpace(e);if(!t)return;let{platform:n,owner:r,repo:i}=t;if(n===`github`){let e=hv.getAnyAuthInfo(n,r)?.accessToken,[t,a]=await Promise.all([Rq(r,i,e),zq(r,i,e)]);return{head:t,etag:a.etag,contentLength:a.contentLength}}}const Vq=new class{spaceId$=new bo(void 0);query$=new bo(``);debouncedQuery$=this.query$.pipe(Cs(200),ws(),As(1));loading$=new bo(!1);watching$=new bo(!1);indexing$=new bo(!1);results$=gs([this.spaceId$,this.debouncedQuery$]).pipe(Ms(([e,t])=>!e||!t?is({hits:[],total:0}):(this.loading$.next(!0),rs(Lq.search(e,t,{limit:50})).pipe(as(e=>({hits:e.hits.map(e=>({id:e.id,path:e.path,title:e.title,snippet:e.snippet})),total:e.total})),Ns(()=>this.loading$.next(!1)),Ss(e=>(console.warn(`search error`,e),this.loading$.next(!1),is({hits:[],total:0})))))),As(1));docCount$=new bo(0);sizer$=this.spaceId$.pipe(Ms(e=>e?rs(Nq(e)).pipe(as(e=>({isLarge:e.isLarge,reason:e.reason})),Ss(()=>is({isLarge:!1,reason:`error`}))):is(null)),As(1));logs$=new bo([]);stale$=new bo(null);lastValidatedAt$=new bo(void 0);meta=new Tq;constructor(){this.spaceId$.pipe(ws()).subscribe(async e=>{if(!e){this.docCount$.next(0),this.logs$.next([]);return}await Lq.restore(e),this.docCount$.next(Lq.getDocCount(e)),this.logs$.next(Lq.getLogs(e))}),Lq.onProgress(e=>{let t=this.spaceId$.getValue();!e||!t||e.spaceId!==t||this.docCount$.next(Lq.getDocCount(t))}),Lq.onLog(e=>{let t=this.spaceId$.getValue();!e||!t||e.spaceId!==t||this.logs$.next([...Lq.getLogs(t)])})}setSpaceId(e){this.spaceId$.next(e)}setQuery(e){this.query$.next(e)}async reindex(){let e=this.spaceId$.getValue();if(e||=yv.getFocusedSpace()?.id||gh.sidebar.getActiveViewId?.(),e){this.indexing$.next(!0);try{let{indexed:t,removed:n}=await Lq.indexSpace(e,{full:!0});this.docCount$.next(Lq.getDocCount(e)),xg.success(`索引完成：新增/更新 ${t}，移除 ${n}`)}catch(e){let t=e instanceof Error?e.message:String(e);xg.error(`重建索引失败：${t}`)}finally{this.indexing$.next(!1)}}}toggleWatch(){let e=this.spaceId$.getValue();if(!e)return;let t=!this.watching$.getValue();this.watching$.next(t),t?Lq.startWatch(e):Lq.stopWatch(e)}async validate(){let e=this.spaceId$.getValue();if(!e)return;let t=await Bq(e),n=this.meta.getRepoMeta(e),r=typeof n.head==`string`&&typeof t?.head==`string`?n.head!==t.head:null;this.stale$.next(r);let i=Date.now();this.lastValidatedAt$.next(i),this.meta.setRepoMeta(e,{validatedAt:i,etag:t?.etag})}async acceptCurrentHead(){let e=this.spaceId$.getValue();if(!e)return;let t=await Bq(e);if(t?.head){let n=Date.now();this.meta.setRepoMeta(e,{head:t.head,validatedAt:n,etag:t.etag}),this.stale$.next(!1),this.lastValidatedAt$.next(n)}}};function Hq(e,t){let[n,r]=(0,H.useState)(t);return(0,H.useEffect)(()=>{let t=e.subscribe(r);return()=>t.unsubscribe()},[e]),n}const Uq=()=>{let e=yv.useSpaces(),t=Hq(Vq.spaceId$,Vq.spaceId$.getValue()),n=Hq(Vq.query$,Vq.query$.getValue()),r=Hq(Vq.loading$,Vq.loading$.getValue()),i=Hq(Vq.results$,{hits:[],total:0}),a=Hq(Vq.docCount$,Vq.docCount$.getValue()),o=Hq(Vq.sizer$,null),s=Hq(Vq.logs$,[]),c=Hq(Vq.watching$,!1),l=Hq(Vq.indexing$,!1),u=Hq(Vq.stale$,null),d=Hq(Vq.lastValidatedAt$,Vq.lastValidatedAt$.getValue?.()||void 0);(0,H.useEffect)(()=>{if(!Vq.spaceId$.getValue()){let t=yv.getFocusedSpace();t?.id?Vq.setSpaceId(t.id):e[0]?.id&&Vq.setSpaceId(e[0].id)}},[e.length]);let f=e=>{Vq.setSpaceId(e)},p=e=>Vq.setQuery(e),m=()=>Vq.toggleWatch(),h=()=>Vq.reindex(),g=()=>Vq.validate(),_=()=>Vq.acceptCurrentHead(),v=(0,H.useRef)(new Set);return(0,H.useEffect)(()=>{t&&a===0&&!l&&!v.current.has(t)&&(v.current.add(t),Vq.reindex())},[t,a,l]),{spaces:e,spaceId:t,selectSpace:f,q:n,setQ:p,loading:r,items:i.hits,total:i.total,docCount:a,sizer:o,logs:s,watching:c,indexing:l,toggleWatch:m,reindex:h,stale:u,lastValidatedAt:d,validate:g,acceptHead:_}},Wq=({spaceId:e,query:t,onQueryChange:n,loading:r,stale:i,onValidate:a,onAcceptHead:o,onKeyDown:s,disabled:c=!1})=>{let{t:l}=Nl(),u=(0,H.useRef)(null);return(0,H.useEffect)(()=>{u.current?.focus(),u.current?.select()},[]),(0,U.jsx)(`div`,{className:`relative flex-shrink-0 px-4`,children:(0,U.jsxs)(`div`,{className:`relative flex items-center gap-2.5 px-4 py-3 transition-all duration-200`,children:[(0,U.jsx)(Fe,{className:`h-4 w-4 text-muted-foreground flex-shrink-0 transition-colors duration-200`}),(0,U.jsx)(gg,{ref:u,value:t,onChange:e=>n(e.target.value),placeholder:l(e?`search.placeholder`:`search.selectSpaceFirst`),onKeyDown:s,className:`flex-1 border-0 bg-transparent text-sm placeholder:text-muted-foreground/50 focus-visible:ring-0 focus-visible:ring-offset-0`,disabled:c}),r&&(0,U.jsx)(_f,{className:`h-4 w-4 animate-spin text-muted-foreground flex-shrink-0`}),!r&&typeof i==`boolean`&&(0,U.jsx)(`button`,{type:`button`,onClick:i?o:a,className:q(`flex items-center gap-1 rounded-lg px-2 py-1 text-sm transition-all duration-150`,`hover:bg-background/60 focus:outline-none`,i?`text-amber-600 dark:text-amber-400`:`text-emerald-600 dark:text-emerald-400`),title:l(i?`search.indexStale`:`search.indexNormal`),children:i?(0,U.jsx)(Zd,{className:`h-3.5 w-3.5`}):(0,U.jsx)(Qd,{className:`h-3.5 w-3.5`})})]})})},Gq=({type:e})=>{let{t}=Nl();return e===`no-space`?(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0`,children:(0,U.jsx)(`div`,{className:`text-center`,children:(0,U.jsx)(`p`,{className:`text-sm text-muted-foreground/70`,children:t(`search.noSpace`)})})}):e===`loading`?(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 text-sm text-muted-foreground/70`,children:(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,U.jsx)(_f,{className:`h-4 w-4 animate-spin`}),(0,U.jsx)(`span`,{children:t(`search.searching`)})]})}):e===`no-query`?(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 px-4`,children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`div`,{className:`mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-muted/30`,children:(0,U.jsx)(Fe,{className:`h-6 w-6 text-muted-foreground/40`})}),(0,U.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:t(`search.noQuery`)}),(0,U.jsx)(`p`,{className:`mt-1 text-sm text-muted-foreground/60`,children:t(`search.noQueryDesc`)})]})}):(0,U.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 px-4`,children:(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsx)(`div`,{className:`mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-muted/20`,children:(0,U.jsx)(cf,{className:`h-6 w-6 text-muted-foreground/40`})}),(0,U.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`search.noResults`)}),(0,U.jsx)(`p`,{className:`mt-1 text-sm text-muted-foreground/60`,children:t(`search.noResultsDesc`)})]})})},Kq=(e,t)=>{if(!e)return null;if(!t)return(0,U.jsx)(U.Fragment,{children:e});let n=t.toLowerCase(),r=e,i=r.toLowerCase(),a=[],o=0;for(;o<r.length;){let e=i.indexOf(n,o);if(e===-1){a.push(r.slice(o));break}e>o&&a.push(r.slice(o,e)),a.push((0,U.jsx)(`mark`,{className:`bg-yellow-200/60 dark:bg-yellow-900/40 rounded px-0.5 font-medium`,children:r.slice(e,e+n.length)},e)),o=e+n.length}return(0,U.jsx)(U.Fragment,{children:a})};var qq=e=>(e.split(`/`).pop()||``).split(`.`).pop()||``;const Jq=({item:e,query:t,isActive:n,onSelect:r,onMouseEnter:i,itemRef:a})=>{let{t:o}=Nl(),s=qq(e.path);return(0,U.jsx)(`div`,{ref:a,className:q(`group relative cursor-pointer rounded-lg px-4 py-2.5 transition-all duration-150`,`hover:bg-muted/40 focus-within:bg-muted/40`,n&&`bg-muted/50`),onMouseEnter:i,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},onFocus:i,tabIndex:0,role:`button`,"aria-label":o(`search.openFile`,{path:e.path}),children:(0,U.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,U.jsx)(`div`,{className:`mt-0.5 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-md text-xs font-medium text-muted-foreground/60 bg-muted/40 group-hover:bg-muted/60 transition-colors`,children:s||`·`}),(0,U.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,U.jsx)(`div`,{className:`truncate text-sm font-medium text-foreground`,children:Kq(e.title||e.path.split(`/`).pop()||e.path,t)}),(0,U.jsx)(`div`,{className:`mt-0.5 truncate text-sm text-muted-foreground/70`,children:e.path}),e.snippet&&(0,U.jsx)(`div`,{className:`mt-1.5 line-clamp-2 text-sm leading-relaxed text-muted-foreground/80`,children:Kq(e.snippet,t)})]}),(0,U.jsx)(Yd,{className:`h-3.5 w-3.5 flex-shrink-0 text-muted-foreground/30 opacity-0 group-hover:opacity-100 transition-opacity`})]})})},Yq=({items:e,query:t,loading:n,activeIndex:r,onItemSelect:i,onItemHover:a,activeItemRef:o})=>{let s=(0,H.useRef)(null);(0,H.useEffect)(()=>{if(o?.current&&s.current){let e=s.current,t=o.current,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();(r.bottom>n.bottom||r.top<n.top)&&t.scrollIntoView({block:`nearest`,behavior:`smooth`})}},[r,o]);let c=(()=>n&&t?`loading`:t?t&&e.length===0?`no-results`:null:`no-query`)();return(0,U.jsxs)(`div`,{ref:s,className:`mt-3 flex-1 min-h-0 overflow-auto rounded-xl scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent`,children:[c&&(0,U.jsx)(Gq,{type:c}),!c&&e.length>0&&(0,U.jsx)(`div`,{className:`space-y-0.5`,children:e.map((e,n)=>(0,U.jsx)(Jq,{item:e,query:t,isActive:n===r,onSelect:()=>i(n),onMouseEnter:()=>a(n),itemRef:n===r?o:void 0},e.id))})]})},Xq=({loading:e,query:t,total:n})=>{let{t:r}=Nl();return(0,U.jsx)(`div`,{className:`mt-3 flex items-center justify-between px-4 flex-shrink-0`,children:(0,U.jsx)(`div`,{className:`flex items-center gap-2 text-sm text-muted-foreground/80`,children:e?(0,U.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(_f,{className:`h-3 w-3 animate-spin`}),(0,U.jsx)(`span`,{children:r(`search.searching`)})]}):t&&n>0?(0,U.jsxs)(`span`,{children:[(0,U.jsx)(`span`,{className:`font-medium text-foreground`,children:n}),(0,U.jsx)(`span`,{className:`ml-1`,children:r(`search.results`)})]}):null})})},Zq=({itemsCount:e,activeIndex:t})=>{let{t:n}=Nl();return(0,U.jsxs)(`div`,{className:`mt-4 pt-3 border-t border-border/30 flex items-center justify-between px-4 pb-3 text-xs text-muted-foreground/70 flex-shrink-0`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,U.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↑`}),(0,U.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↓`}),(0,U.jsx)(`span`,{className:`text-xs`,children:n(`search.navigation`)}),(0,U.jsx)(`span`,{className:`text-muted-foreground/50`,children:`·`}),(0,U.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↵`}),(0,U.jsx)(`span`,{className:`text-xs`,children:n(`search.open`)}),(0,U.jsx)(`span`,{className:`text-muted-foreground/50`,children:`·`}),(0,U.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`ESC`}),(0,U.jsx)(`span`,{className:`text-xs`,children:n(`search.close`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e>0&&(0,U.jsxs)(`div`,{className:`text-muted-foreground/60 text-xs`,children:[t+1,` / `,e]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1.5 text-muted-foreground/50 text-xs`,children:[(0,U.jsx)(`kbd`,{className:`rounded-md bg-muted/40 px-1.5 py-0.5 font-mono text-xs`,children:`⌘K`}),(0,U.jsx)(`span`,{children:n(`search.openSearch`)})]})]})]})},Qq=({space:e,onReindex:t,indexing:n=!1,disabled:r=!1})=>{let{t:i}=Nl();return e?(0,U.jsxs)(`div`,{className:`px-4 pb-2 flex items-center justify-between`,children:[(0,U.jsxs)(`div`,{className:`text-xs font-medium text-muted-foreground/50 uppercase tracking-wider`,children:[e.owner,`/`,e.repo]}),t&&(0,U.jsx)(`button`,{type:`button`,onClick:t,disabled:r||n,className:`text-xs text-muted-foreground/60 hover:text-muted-foreground/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:n?(0,U.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(_f,{className:`h-3 w-3 animate-spin`}),(0,U.jsx)(`span`,{children:i(`search.indexing`)})]}):i(`search.reindex`)})]}):null},$q=({onClose:e})=>{let{spaceId:t,q:n,setQ:r,items:i,total:a,loading:o,reindex:s,indexing:c,stale:l,validate:u,acceptHead:d}=Uq(),[f,p]=(0,H.useState)(0),m=(0,H.useRef)(null);(0,H.useEffect)(()=>{p(0)},[t,n]);let h=(0,H.useCallback)(async(n,r)=>{if(!t)return;let a=i[n];if(!a)return;yv.focusSpace(t);let o={id:a.path,name:a.path.split(`/`).pop()||a.path,path:a.path,type:`file`};await Kv.open(t,o),gh.pageBox.show?.(),r?.keepOpen||e()},[t,i,e]);return(0,U.jsxs)(`div`,{className:`w-full max-w-3xl flex flex-col`,style:{height:`520px`,maxHeight:`80vh`},children:[(0,U.jsx)(Wq,{spaceId:t,query:n,onQueryChange:r,loading:o,stale:l,onValidate:u,onAcceptHead:d,onKeyDown:(0,H.useCallback)(t=>{if(t.key===`Escape`){e();return}if(t.key===`ArrowDown`){t.preventDefault(),p(e=>Math.min(e+1,Math.max(0,i.length-1)));return}if(t.key===`ArrowUp`){t.preventDefault(),p(e=>Math.max(0,e-1));return}if(t.key===`Enter`){t.preventDefault(),i.length>0&&h(f,{keepOpen:t.metaKey||t.ctrlKey});return}},[i.length,f,h,e]),disabled:!t}),(0,U.jsx)(Qq,{space:t?yv.getSpace(t):void 0,onReindex:s,indexing:c,disabled:!t}),(0,U.jsxs)(`div`,{className:`flex-1 flex flex-col min-h-0 overflow-hidden`,children:[!t&&(0,U.jsx)(Gq,{type:`no-space`}),t&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Xq,{loading:o,query:n,total:a}),(0,U.jsx)(Yq,{items:i,query:n,loading:o,activeIndex:f,onItemSelect:e=>h(e),onItemHover:p,activeItemRef:m})]})]}),t&&(0,U.jsx)(Zq,{itemsCount:i.length,activeIndex:f})]})},eJ=Vg({async initilize(e){e.componentService.register(`AiOutlineSearch`,Fe);try{e.layoutService.sidebar.removeView(`search`)}catch{}e.layoutService.activityBar.addActivity({id:`search`,name:`Search`,icon:`AiOutlineSearch`,unselectable:!0,order:30}),e.eventBus.on(Ad.ActivityBar.ActivityClicked(`search`),()=>{e.commandService.executeCommand(`search.quickOpen`)}),e.commandService.registerCommand(`search.indexSpace`,async t=>{let n=t||yv.getFocusedSpace()?.id;if(!n)return e.notificationService.warning(K(`search.noFocusedSpaceToIndex`));let{indexed:r,removed:i}=await Lq.indexSpace(n,{full:!0});e.notificationService.success(K(`search.indexedSuccess`,{indexed:r,removed:i}))}),e.commandService.registerCommand(`search.searchInSpace`,async(t,n)=>{let r=n||yv.getFocusedSpace()?.id;if(!r)return e.notificationService.warning(K(`search.noFocusedSpaceToSearch`));let i=await Lq.search(r,t,{limit:20});return console.log(`search results`,{spaceId:r,query:t,res:i}),e.notificationService.success(K(`search.foundHits`,{total:i.total,query:t})),i}),e.commandService.registerCommand(`search.quickOpen`,async()=>{let t=yv.getFocusedSpace();t?.id&&Vq.setSpaceId(t.id);let n=e.modalService.open({footer:!1,closeIcon:!0,modalContentClassName:`sm:max-w-3xl`,modalBodyClassName:`p-0`,content:(0,U.jsx)($q,{onClose:()=>n.close()})})}),window.addEventListener(`keydown`,t=>{if((t.metaKey||t.ctrlKey)&&(t.key===`k`||t.key===`K`)){let n=t.target,r=(n?.tagName||``).toLowerCase(),i=n?.isContentEditable;if(r===`input`||r===`textarea`||i)return;t.preventDefault(),e.commandService.executeCommand(`search.quickOpen`)}})}});function tJ({activity:e,isExpanded:t}){return(0,U.jsx)(If,{activity:e,isExpanded:t,onClick:()=>{let e=Td();e!==`gitary.app`&&e!==`www.gitary.app`&&window.open(`https://gitary.app`,`_blank`)},icon:(0,U.jsx)(`img`,{src:`/logo.svg`,alt:`Gitary`,className:`w-full h-full object-contain`}),textClassName:`font-semibold tracking-tight`})}const nJ=Vg({initilize(e){let t=`gitary-brand`;e.componentService.register(`activity:${t}`,tJ),e.layoutService.activityBar.addActivity({id:t,icon:`gitary-logo`,name:`Gitary`,order:0,unselectable:!0},!0)}});var rJ=()=>typeof window>`u`||typeof window.matchMedia!=`function`?!1:!window.matchMedia(`(max-width: 768px)`).matches,iJ=g_(()=>{if(typeof window>`u`){let e=new Map;return{getItem:t=>e.get(t)??null,setItem:(t,n)=>{e.set(t,n)},removeItem:t=>{e.delete(t)},clear:()=>{e.clear()},key:t=>Array.from(e.keys())[t]??null,get length(){return e.size}}}let e=window.localStorage;return{getItem:t=>rJ()?e.getItem(t):null,setItem:(t,n)=>{rJ()&&e.setItem(t,n)},removeItem:t=>{rJ()&&e.removeItem(t)},clear:()=>{rJ()&&e.clear()},key:t=>rJ()?e.key(t)??null:null,get length(){return rJ()?e.length:0}}});const aJ=Qt()(v_(e=>({globalSidecar:{open:!1,activePaneId:void 0},setGlobalSidecarState:t=>e({globalSidecar:t}),updateGlobalSidecarState:t=>e(e=>({globalSidecar:{...e.globalSidecar,...t}}))}),{name:`global-ui:global-sidecar`,storage:iJ,partialize:e=>({globalSidecar:e.globalSidecar})})),oJ=new class{getGlobalSidecarState=()=>aJ.getState().globalSidecar;setGlobalSidecarState=e=>{aJ.getState().setGlobalSidecarState(e)};updateGlobalSidecarState=e=>{aJ.getState().updateGlobalSidecarState(e)};openGlobalSidecar=e=>{let t={...aJ.getState().globalSidecar,open:!0,activePaneId:e};aJ.getState().setGlobalSidecarState(t)};toggleGlobalSidecar=e=>{let t=aJ.getState().globalSidecar,n=t.activePaneId===e&&t.open?{...t,open:!1}:{...t,open:!0,activePaneId:e};aJ.getState().setGlobalSidecarState(n)};closeGlobalSidecar=()=>{let e=aJ.getState().globalSidecar;if(!e.open)return;let t={...e,open:!1};aJ.getState().setGlobalSidecarState(t)}};var sJ=new Map,cJ=new Set;const lJ=e=>{sJ.set(e.id,e),cJ.forEach(e=>e(new Map(sJ)))},uJ=()=>new Map(sJ),dJ=e=>(cJ.add(e),()=>{cJ.delete(e)}),fJ=(0,H.createContext)(null),pJ=()=>{let e=(0,H.useContext)(fJ);if(!e)throw Error(`useGlobalSidecar must be used within GlobalSidecarProvider`);return e};var mJ=400,hJ=200,gJ=150,_J=-50;function vJ(){let[e,t]=(0,H.useState)(!1);return(0,H.useEffect)(()=>{if(typeof window>`u`||typeof window.matchMedia!=`function`)return;let e=window.matchMedia(`(max-width: 768px)`),n=e=>{t(e.matches)};if(t(e.matches),typeof e.addEventListener==`function`)return e.addEventListener(`change`,n),()=>e.removeEventListener(`change`,n);if(typeof e.addListener==`function`)return e.addListener(n),()=>e.removeListener(n)},[]),e}const yJ=({children:e})=>{let t=vJ(),[n,r]=(0,H.useState)(()=>uJ()),i=aJ(e=>e.globalSidecar.open),a=aJ(e=>e.globalSidecar.activePaneId),[o,s]=(0,H.useState)({}),[c,l]=(0,H.useState)(!1);(0,H.useEffect)(()=>dJ(e=>{r(e);let{globalSidecar:t}=aJ.getState(),n=t.activePaneId;if(e.size===0)oJ.updateGlobalSidecarState({activePaneId:void 0,open:!1});else if(n&&!e.has(n)){let t=e.values().next().value;oJ.updateGlobalSidecarState({activePaneId:t?.id})}}),[]),(0,H.useEffect)(()=>{if(i){l(!1);let e=hJ+_J,t=setTimeout(()=>{l(!0)},e);return()=>clearTimeout(t)}else l(!1)},[i]);let u=(0,H.useCallback)((e,t)=>{n.has(e)&&(s(t||{}),oJ.openGlobalSidecar(e))},[n]),d=(0,H.useCallback)(e=>{n.has(e)&&oJ.toggleGlobalSidecar(e)},[n]),f=(0,H.useCallback)(()=>{oJ.closeGlobalSidecar()},[]),p=(0,H.useMemo)(()=>({open:i,activePaneId:a,openPane:u,togglePane:d,closePane:f}),[i,a,u,d,f]),m=(0,H.useMemo)(()=>[...n.values()],[n]),h=(0,H.useMemo)(()=>[...m].sort((e,t)=>(e.order??0)-(t.order??0)),[m]),g=h.find(e=>e.id===a),_=g?.component;return(0,U.jsx)(fJ.Provider,{value:p,children:(0,U.jsxs)(`div`,{className:`flex h-full w-full overflow-hidden relative`,children:[(0,U.jsx)(`div`,{className:`flex-1 min-w-0`,children:e}),h.length>0&&(0,U.jsxs)(U.Fragment,{children:[t&&(0,U.jsx)(`div`,{className:`fixed bottom-4 right-4 z-40 flex flex-col items-center gap-3`,children:h.map(e=>{let t=e.icon??yf,n=e.id===a&&i;return(0,U.jsx)(`button`,{onClick:()=>{n?f():u(e.id)},className:q(`group flex h-11 w-11 items-center justify-center rounded-full shadow-md border bg-background/95 backdrop-blur-sm transition-all`,n?`text-foreground`:`text-muted-foreground hover:bg-muted/80 hover:text-foreground`),title:e.title,children:(0,U.jsx)(t,{className:`h-5 w-5`})},e.id)})}),(!t||t&&i)&&(0,U.jsxs)(`div`,{className:q(`bg-background/95 backdrop-blur-sm z-50`,t?`fixed inset-0 flex justify-end`:`flex h-full relative`),style:{"--global-ai-sidebar-width":`clamp(280px, 80vw, ${mJ}px)`},children:[t&&i&&(0,U.jsx)(`div`,{className:`absolute inset-0 bg-black/40 z-0`,onClick:f}),(0,U.jsx)(`div`,{className:q(`overflow-hidden flex flex-col bg-background border-l border-border/40 transition-all ease-in-out relative z-10`,t?i&&g?`w-full max-w-[480px] h-full translate-x-0`:`w-0 h-full translate-x-full`:i&&g?`w-[--global-ai-sidebar-width]`:`w-0`),style:{transitionDuration:`${hJ}ms`},children:i&&g&&_?(0,U.jsxs)(`div`,{className:q(`h-full flex flex-col transition-opacity`,c?`opacity-100`:`opacity-0`),style:{transitionDuration:`${gJ}ms`},children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 bg-background/80 backdrop-blur-md sticky top-0 z-10 border-b border-border/40`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2.5`,children:[g.icon&&(0,U.jsx)(`div`,{className:`w-5 h-5`,children:(0,U.jsx)(g.icon,{className:`w-full h-full`})}),(0,U.jsx)(`p`,{className:`text-sm font-medium text-foreground/90 tracking-tight`,children:g.title})]}),(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,onClick:f,className:`h-6 w-6 rounded-full hover:bg-muted/50 text-muted-foreground transition-colors`,children:`×`})]}),(0,U.jsx)(`div`,{className:`flex-1 min-h-0 flex flex-col overflow-hidden`,children:(0,U.jsx)(_,{...o,closePane:f})})]}):null}),!t&&(0,U.jsx)(`div`,{className:`w-[52px] flex flex-col items-center py-6 gap-4 border-l border-border/40 bg-background/50 backdrop-blur-sm`,children:h.map(e=>{let t=e.icon??yf,n=e.id===a&&i;return(0,U.jsx)(`button`,{onClick:()=>{n?f():u(e.id)},className:q(`group relative flex h-10 w-10 items-center justify-center rounded-xl transition-all duration-200 ease-out`,n?`bg-muted text-foreground`:`text-muted-foreground hover:bg-muted/80 hover:text-foreground`),title:e.title,children:(0,U.jsx)(t,{className:q(`h-5 w-5 transition-transform duration-200`,n?`scale-100`:`group-hover:scale-110`)})},e.id)})})]})]})]})})};var bJ=H.lazy(async()=>({default:(await oe(()=>import(`./global-chat-panel-DYXk6nXW.js`),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13]))).GlobalChatPanel}));const xJ=()=>{let{t:e}=Nl();return(0,U.jsx)(H.Suspense,{fallback:(0,U.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:e(`globalChat.loading`)||`Loading AI assistant...`}),children:(0,U.jsx)(bJ,{})})},SJ=({className:e})=>(0,U.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,className:e,children:[(0,U.jsx)(`defs`,{children:(0,U.jsxs)(`linearGradient`,{id:`ai-grad`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,U.jsx)(`stop`,{offset:`0%`,stopColor:`#6366f1`}),(0,U.jsx)(`stop`,{offset:`100%`,stopColor:`#a855f7`})]})}),(0,U.jsx)(`path`,{d:`M12 2L15 8L21 9L16.5 14L18 20L12 17L6 20L7.5 14L3 9L9 8L12 2Z`,fill:`url(#ai-grad)`})]}),CJ=({content:e,className:t,isDark:n=!1})=>(0,U.jsx)(`div`,{className:q(`max-w-none text-sm break-words`,t),children:(0,U.jsx)(Bt,{remarkPlugins:[Vt],components:{code(e){let{children:t,className:r,node:i,ref:a,...o}=e,s=/language-(\w+)/.exec(r||``);return s?(0,U.jsx)(`div`,{className:`relative group`,children:(0,U.jsx)(M,{...o,PreTag:`div`,language:s[1],style:n?P:N,className:`rounded-md border border-border/50 !my-3`,customStyle:{margin:0,padding:`1rem`,backgroundColor:`transparent`},children:String(t).replace(/\n$/,``)})}):(0,U.jsx)(`code`,{...o,className:q(`bg-muted px-1.5 py-0.5 rounded-sm font-mono text-xs`,r),children:t})},p({children:e}){return(0,U.jsx)(`p`,{className:`mb-2 last:mb-0 leading-relaxed`,children:e})},ul({children:e}){return(0,U.jsx)(`ul`,{className:`list-disc list-outside ml-4 mb-2 space-y-1`,children:e})},ol({children:e}){return(0,U.jsx)(`ol`,{className:`list-decimal list-outside ml-4 mb-2 space-y-1`,children:e})},li({children:e}){return(0,U.jsx)(`li`,{className:`leading-relaxed`,children:e})},h1({children:e}){return(0,U.jsx)(`h1`,{className:`text-base font-bold mt-4 mb-2 border-b pb-1`,children:e})},h2({children:e}){return(0,U.jsx)(`h2`,{className:`text-sm font-bold mt-3 mb-2`,children:e})},h3({children:e}){return(0,U.jsx)(`h3`,{className:`text-sm font-semibold mt-2 mb-1`,children:e})},h4({children:e}){return(0,U.jsx)(`h4`,{className:`text-xs font-semibold mt-2 mb-1`,children:e})},a({children:e,href:t}){return(0,U.jsx)(`a`,{href:t,target:`_blank`,rel:`noreferrer`,className:`text-primary underline underline-offset-4 hover:text-primary/80`,children:e})},blockquote({children:e}){return(0,U.jsx)(`blockquote`,{className:`border-l-2 border-primary/50 pl-4 italic text-muted-foreground my-2`,children:e})},table({children:e}){return(0,U.jsx)(`div`,{className:`my-4 w-full overflow-y-auto rounded-md border border-border`,children:(0,U.jsx)(`table`,{className:`w-full text-sm m-0 border-collapse`,children:e})})},thead({children:e}){return(0,U.jsx)(`thead`,{className:`bg-muted/50 text-left font-medium border-b border-border`,children:e})},tbody({children:e}){return(0,U.jsx)(`tbody`,{className:`divide-y divide-border/50`,children:e})},tr({children:e}){return(0,U.jsx)(`tr`,{className:`hover:bg-muted/30 transition-colors m-0 p-0`,children:e})},th({children:e}){return(0,U.jsx)(`th`,{className:`px-4 py-2 font-medium border-r border-border/50 last:border-r-0`,children:e})},td({children:e}){return(0,U.jsx)(`td`,{className:`px-4 py-2 border-r border-border/50 last:border-r-0`,children:e})},hr(){return(0,U.jsx)(`hr`,{className:`my-4 border-border`})}},children:e})});var wJ=!1,TJ=()=>{wJ||=(lJ({id:`global-chat`,title:`AI Assistant`,description:`跨页面问答与命令`,icon:SJ,order:1,component:xJ}),!0)};const EJ=Vg({initilize(e){TJ(),e.workbenchService.addReactEntry({id:`global-sidecar`,WrapperComponent:yJ})}});function DJ({shortcut:e,isExpanded:t}){return(0,U.jsx)(If,{activity:{id:e.id,name:e.name,icon:e.icon},isExpanded:t,icon:(0,U.jsx)(Te,{className:`w-full h-full`}),onClick:()=>{window.open(`https://chromewebstore.google.com/detail/gitary-companion/halhhaelcfghngkpkikcnlcjbmlkgjed`,`_blank`,`noopener,noreferrer`)}})}const OJ=Vg({initilize(e){e.componentService.register(`AiOutlineChrome`,Te),e.shortcutService.addShortcut({id:`browser-extension`,name:K(`browserExtension.name`),order:9998,icon:`AiOutlineChrome`}),e.componentService.register(`shortcut:browser-extension`,DJ)}});var kJ=Vg({initilize(e){e.pluginService.use([nJ,EJ,_q,Wv,yq,eJ,OJ,Vv])}});const AJ=Vg({initilize(e){yv.subscribeSpaces(e=>{let t=!1,n=e.map(e=>(e.id.includes(`:`)&&(t=!0),{...e,id:e.id.includes(`:`)?u_.generateHash(e.id):e.id}));t&&yv.setSpaces(n)})}});var jJ=Vg({initilize(e){e.pluginService.use([AJ])}}),MJ={localhost:{clientId:`be57567173ecb4139e99e54a216e3e728f1c355d3f8a4568bb417bc94c7e1194`,clientSecret:`5dbc1127b37fb2849a425d3e47d856df1f5efa6fa9be5c9793224ecc15d2b376`,redirectUri:`http://localhost:3000/gitee_login/index.html`},eiooie:{clientId:`4f4b30de2e5102ee76c1a30a98193fb5e090b4600831c030f313e0ec530e68f9`,clientSecret:`5700145980a135586925608a325dba18c7b2459ef75203a9ff0768737ae83252`,redirectUri:`https://apps.eiooie.com/gitee_login/index.html`},WriteDimstackCom:{clientId:`e9d3ac7adbf20644f335257353e1798d709062b85b73896a4d4f762b7ee92e40`,clientSecret:`c4bb089c4585b53ae68150b847a99ef3445de57c060082256c296b725df46de1`,redirectUri:`https://write.dimstack.com/?platform=gitee`},GitaryApp:{clientId:`9bdeb8edca91d4fdf2293aa0853b0ef8968cb4b730ca3411623be9e70c829ce4`,clientSecret:`655be51197357be09f7d408489604f0b2fc091d814bd5145f082c3fac993b770`,redirectUri:`https://gitary.app/?platform=gitee`},Localhost5173:{clientId:`7fa2b5a6e0445f723e8bc04850293d604ca2d50b537e90ed71e344edcbdb87da`,clientSecret:`45a3e2898145673b20f1198d0be5ac7600b4f3c792f5e2a0f40238ca4a984ca5`,redirectUri:`http://localhost:5173/?platform=gitee`}},NJ=MJ[Ed()]||MJ.GitaryApp;function PJ(e,t){let n=new URL(e),r=n.searchParams;return Object.keys(t).forEach(e=>{let n=t[e];n===null?r.delete(e):r.set(e,n)}),n.search=r.toString(),n.toString()}var FJ=window.history,IJ=document.location,LJ=()=>new Proxy({},{get(e,t){return new URLSearchParams(IJ.search).get(t)},set(e,t,n){let r={};for(let[e,t]of new URLSearchParams(IJ.search))r[e]=t;r[t]=n;let i=[];return Object.keys(r).forEach(e=>{i.push(`${e}=${r[e]}`)}),IJ.search=`?`+i.join(`&&`),!0}}),RJ=()=>{let e=LJ();return new Proxy(IJ,{get(t,n){return n===`query`?e:t[n]}})},zJ=()=>RJ(),BJ={counter:-1,bank:{},addListener:function(e){return this.counter+=1,this.bank[this.counter]=e,()=>{delete this.bank[this.counter]}},callAll:function(){Object.keys(this.bank).map(e=>this.bank[e](VJ.location))}},VJ={location:zJ(),length:FJ.length,createHref:function(e){let t=``;if(e.query&&Object.keys(e.query).length){t=`?`;let n=[];Object.keys(e.query).map(t=>{n.push(`${t}=${encodeURIComponent(e.query[t])}`)}),t+=n.join(`&`)}return e.pathname+t},push:function(e,t=!0){typeof e==`object`&&(e=this.createHref(e)),FJ.pushState({},``,e),this.location=zJ(),this.length=FJ.length,t&&BJ.callAll()},listen:function(e){return BJ.addListener(e)},update:function(){this.location=zJ(),this.length=FJ.length,BJ.callAll()}};window.onpopstate=()=>{VJ.update()};var HJ=VJ,UJ=e=>{let t=Math.ceil(Date.now()/1e3);if(typeof e==`number`&&Number.isFinite(e))return e;if(typeof e==`string`&&e){let t=Date.parse(e);if(!Number.isNaN(t))return Math.ceil(t/1e3)}return t},WJ=e=>{if(!(typeof e!=`string`||!e))try{let t=JSON.parse(e);if(t&&typeof t==`object`&&`platform`in t&&typeof t.platform==`string`)return t.platform}catch{}};const GJ=({platform:e,createToken:t,clientId:n,clientSecret:r,redirectUri:i,fetchUserInfo:a})=>({name:`CheckAuthCodeAndNext:`+e,execute(e){let{platform:o,username:s}=e,c=HJ.location.query.code,l=HJ.location.query.platform,u=HJ.location.query.state,d=WJ(u);c&&(o===l||o===d)&&(t({clientId:n,clientSecret:r,redirectUri:i,code:c}).then(async e=>{let t;if(a){let n=await a({accessToken:e.access_token});n&&(t=n.username)}e&&hv.saveAuthInfo({platform:o,username:t||s,accessToken:e.access_token,refreshToken:e.refresh_token,expirationTime:e.expires_in,refreshTokenExpirationTime:e.refresh_token_expires_in,createdAt:UJ(e.created_at),scope:e.scope,tokenType:e.token_type})}),HJ.push(PJ(location.href,{code:null,platform:null,state:null})))}}),KJ=({platform:e,refreshAccessToken:t,getLoginUrl:n,callbackTaskName:r,id:i,title:a,description:o})=>({platform:e,id:i,title:a,description:o,refresh:async e=>{let{platform:n,username:r,refreshToken:i}=e,a=await t({refreshToken:i});hv.saveAuthInfo({platform:n,username:r,accessToken:a.access_token,refreshToken:a.refresh_token,expirationTime:a.expires_in,refreshTokenExpirationTime:a.refresh_token_expires_in,createdAt:UJ(a.created_at),scope:a.scope,tokenType:a.token_type})},getLoginUrl:n,authenticate:async t=>{let{username:i,repo:a,needConfirm:o}=t||{};if(o){let{t}=await oe(()=>import(`./utils-CsqCtv42.js`),[]).then(e=>({t:e.t}));if(!await J.modalService.confirm({title:t(`auth.redirecting`),description:t(`auth.confirmRedirect`,{platform:e})}))return}localStorage.setItem(`authRepo`,a||``),localStorage.setItem(`authOwner`,i||``),J.taskService.addTask(r,{platform:e,username:i},{deffered:!0});let s=n();window.open(s,`_self`)}});var qJ=Vg({initilize(e){let t=GJ({platform:`gitee`,clientId:NJ.clientId,clientSecret:NJ.clientSecret,redirectUri:NJ.redirectUri,createToken:cv,fetchUserInfo:async({accessToken:e})=>{let t=await dv({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name,response:t}}}),n=KJ({id:`gitee`,platform:`gitee`,callbackTaskName:t.name,refreshAccessToken:lv,getLoginUrl:()=>ov({clientId:NJ.clientId,redirectUri:NJ.redirectUri})});e.taskService.registerTaskType(t),hv.registerAuthProvider(n)}}),JJ={localhost:{clientId:`be57567173ecb4139e99e54a216e3e728f1c355d3f8a4568bb417bc94c7e1194`,clientSecret:`5dbc1127b37fb2849a425d3e47d856df1f5efa6fa9be5c9793224ecc15d2b376`,redirectUri:`http://localhost:3000/gitee_login/index.html`},eiooie:{clientId:`4f4b30de2e5102ee76c1a30a98193fb5e090b4600831c030f313e0ec530e68f9`,clientSecret:`5700145980a135586925608a325dba18c7b2459ef75203a9ff0768737ae83252`,redirectUri:`https://apps.eiooie.com/gitee_login/index.html`},WriteDimstackCom:{clientId:`Ov23lifrUzI6VGkwpGWd`,clientSecret:`91701fd46c951ef707084f6142e5a11ddb55f744`,redirectUri:`https://write.dimstack.com/?platform=github`},GitaryApp:{clientId:`Ov23li7gtCm6evUeqZ4d`,clientSecret:`c1b0b88727cb4f4c279d9bc6b82552f8ba760155`,redirectUri:`https://gitary.app/?platform=github`},Localhost5173:{clientId:`Ov23li1cdcxP0rM2KVLq`,clientSecret:`34f80b513b96b5371682c6131e160eb41fc3e70f`,redirectUri:`http://localhost:5173/?platform=github`}},YJ=JJ[Ed()]||JJ.GitaryApp;function XJ(){return typeof navigator==`object`&&`userAgent`in navigator?navigator.userAgent:typeof process==`object`&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:`<environment undetectable>`}function ZJ(e,t,n,r){if(typeof n!=`function`)throw Error(`method for before hook must be a function`);return r||={},Array.isArray(t)?t.reverse().reduce((t,n)=>ZJ.bind(null,e,n,t,r),n)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((e,t)=>t.hook.bind(null,e,r),n)():n(r))}function QJ(e,t,n,r){let i=r;e.registry[n]||(e.registry[n]=[]),t===`before`&&(r=(e,t)=>Promise.resolve().then(i.bind(null,t)).then(e.bind(null,t))),t===`after`&&(r=(e,t)=>{let n;return Promise.resolve().then(e.bind(null,t)).then(e=>(n=e,i(n,t))).then(()=>n)}),t===`error`&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch(e=>i(e,t))),e.registry[n].push({hook:r,orig:i})}function $J(e,t,n){if(!e.registry[t])return;let r=e.registry[t].map(e=>e.orig).indexOf(n);r!==-1&&e.registry[t].splice(r,1)}var eY=Function.bind,tY=eY.bind(eY);function nY(e,t,n){let r=tY($J,null).apply(null,n?[t,n]:[t]);e.api={remove:r},e.remove=r,[`before`,`error`,`after`,`wrap`].forEach(r=>{let i=n?[t,r,n]:[t,r];e[r]=e.api[r]=tY(QJ,null).apply(null,i)})}function rY(){let e=Symbol(`Singular`),t={registry:{}},n=ZJ.bind(null,t,e);return nY(n,t,e),n}function iY(){let e={registry:{}},t=ZJ.bind(null,e);return nY(t,e),t}var aY={Singular:rY,Collection:iY},oY=`octokit-endpoint.js/0.0.0-development ${XJ()}`,sY={method:`GET`,baseUrl:`https://api.github.com`,headers:{accept:`application/vnd.github.v3+json`,"user-agent":oY},mediaType:{format:``}};function cY(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}function lY(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function uY(e,t){let n=Object.assign({},e);return Object.keys(t).forEach(r=>{lY(t[r])&&r in e?n[r]=uY(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}function dY(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function fY(e,t,n){if(typeof t==`string`){let[e,r]=t.split(` `);n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);n.headers=cY(n.headers),dY(n),dY(n.headers);let r=uY(e||{},n);return n.url===`/graphql`&&(e&&e.mediaType.previews?.length&&(r.mediaType.previews=e.mediaType.previews.filter(e=>!r.mediaType.previews.includes(e)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(e=>e.replace(/-preview/,``))),r}function pY(e,t){let n=/\?/.test(e)?`&`:`?`,r=Object.keys(t);return r.length===0?e:e+n+r.map(e=>e===`q`?`q=`+t.q.split(`+`).map(encodeURIComponent).join(`+`):`${e}=${encodeURIComponent(t[e])}`).join(`&`)}var mY=/\{[^{}}]+\}/g;function hY(e){return e.replace(RegExp(`(?:^\\W+)|(?:(?<!\\W)\\W+$)`,`g`),``).split(/,/)}function gY(e){let t=e.match(mY);return t?t.map(hY).reduce((e,t)=>e.concat(t),[]):[]}function _Y(e,t){let n={__proto__:null};for(let r of Object.keys(e))t.indexOf(r)===-1&&(n[r]=e[r]);return n}function vY(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,`[`).replace(/%5D/g,`]`)),e}).join(``)}function yY(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}function bY(e,t,n){return t=e===`+`||e===`#`?vY(t):yY(t),n?yY(n)+`=`+t:t}function xY(e){return e!=null}function SY(e){return e===`;`||e===`&`||e===`?`}function CY(e,t,n,r){var i=e[n],a=[];if(xY(i)&&i!==``)if(typeof i==`string`||typeof i==`number`||typeof i==`boolean`)i=i.toString(),r&&r!==`*`&&(i=i.substring(0,parseInt(r,10))),a.push(bY(t,i,SY(t)?n:``));else if(r===`*`)Array.isArray(i)?i.filter(xY).forEach(function(e){a.push(bY(t,e,SY(t)?n:``))}):Object.keys(i).forEach(function(e){xY(i[e])&&a.push(bY(t,i[e],e))});else{let e=[];Array.isArray(i)?i.filter(xY).forEach(function(n){e.push(bY(t,n))}):Object.keys(i).forEach(function(n){xY(i[n])&&(e.push(yY(n)),e.push(bY(t,i[n].toString())))}),SY(t)?a.push(yY(n)+`=`+e.join(`,`)):e.length!==0&&a.push(e.join(`,`))}else t===`;`?xY(i)&&a.push(yY(n)):i===``&&(t===`&`||t===`?`)?a.push(yY(n)+`=`):i===``&&a.push(``);return a}function wY(e){return{expand:TY.bind(null,e)}}function TY(e,t){var n=[`+`,`#`,`.`,`/`,`;`,`?`,`&`];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){let e=``,i=[];if(n.indexOf(r.charAt(0))!==-1&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);i.push(CY(t,e,r[1],r[2]||r[3]))}),e&&e!==`+`){var a=`,`;return e===`?`?a=`&`:e!==`#`&&(a=e),(i.length===0?``:e)+i.join(a)}else return i.join(`,`)}else return vY(i)}),e===`/`?e:e.replace(/\/$/,``)}function EY(e){let t=e.method.toUpperCase(),n=(e.url||`/`).replace(/:([a-z]\w+)/g,`{$1}`),r=Object.assign({},e.headers),i,a=_Y(e,[`method`,`baseUrl`,`url`,`headers`,`request`,`mediaType`]),o=gY(n);n=wY(n).expand(a),/^http/.test(n)||(n=e.baseUrl+n);let s=_Y(a,Object.keys(e).filter(e=>o.includes(e)).concat(`baseUrl`));return/application\/octet-stream/i.test(r.accept)||(e.mediaType.format&&(r.accept=r.accept.split(/,/).map(t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(`,`)),n.endsWith(`/graphql`)&&e.mediaType.previews?.length&&(r.accept=(r.accept.match(RegExp(`(?<![\\w-])[\\w-]+(?=-preview)`,`g`))||[]).concat(e.mediaType.previews).map(t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:`+json`}`).join(`,`))),[`GET`,`HEAD`].includes(t)?n=pY(n,s):`data`in s?i=s.data:Object.keys(s).length&&(i=s),!r[`content-type`]&&i!==void 0&&(r[`content-type`]=`application/json; charset=utf-8`),[`PATCH`,`PUT`].includes(t)&&i===void 0&&(i=``),Object.assign({method:t,url:n,headers:r},i===void 0?null:{body:i},e.request?{request:e.request}:null)}function DY(e,t,n){return EY(fY(e,t,n))}function OY(e,t){let n=fY(e,t),r=DY.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:OY.bind(null,n),merge:fY.bind(null,n),parse:EY})}var kY=OY(null,sY),AY=n(((e,t)=>{var n=function(){};n.prototype=Object.create(null);var r=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,i=/\\([\v\u0020-\u00ff])/gu,a=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,o={type:``,parameters:new n};Object.freeze(o.parameters),Object.freeze(o);function s(e){if(typeof e!=`string`)throw TypeError(`argument header is required and must be a string`);let t=e.indexOf(`;`),o=t===-1?e.trim():e.slice(0,t).trim();if(a.test(o)===!1)throw TypeError(`invalid media type`);let s={type:o.toLowerCase(),parameters:new n};if(t===-1)return s;let c,l,u;for(r.lastIndex=t;l=r.exec(e);){if(l.index!==t)throw TypeError(`invalid parameter format`);t+=l[0].length,c=l[1].toLowerCase(),u=l[2],u[0]===`"`&&(u=u.slice(1,u.length-1),i.test(u)&&(u=u.replace(i,`$1`))),s.parameters[c]=u}if(t!==e.length)throw TypeError(`invalid parameter format`);return s}function c(e){if(typeof e!=`string`)return o;let t=e.indexOf(`;`),s=t===-1?e.trim():e.slice(0,t).trim();if(a.test(s)===!1)return o;let c={type:s.toLowerCase(),parameters:new n};if(t===-1)return c;let l,u,d;for(r.lastIndex=t;u=r.exec(e);){if(u.index!==t)return o;t+=u[0].length,l=u[1].toLowerCase(),d=u[2],d[0]===`"`&&(d=d.slice(1,d.length-1),i.test(d)&&(d=d.replace(i,`$1`))),c.parameters[l]=d}return t===e.length?c:o}t.exports.default={parse:s,safeParse:c},t.exports.parse=s,t.exports.safeParse=c,t.exports.defaultContentType=o}))(),jY=class extends Error{name;status;request;response;constructor(e,t,n){super(e),this.name=`HttpError`,this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),`response`in n&&(this.response=n.response);let r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(RegExp(`(?<! ) .*$`,``),` [REDACTED]`)})),r.url=r.url.replace(/\bclient_secret=\w+/g,`client_secret=[REDACTED]`).replace(/\baccess_token=\w+/g,`access_token=[REDACTED]`),this.request=r}},MY=`9.2.4`,NY={headers:{"user-agent":`octokit-request.js/${MY} ${XJ()}`}};function PY(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}async function FY(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw Error(`fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing`);let n=e.request?.log||console,r=e.request?.parseSuccessResponseBody!==!1,i=PY(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,a=Object.fromEntries(Object.entries(e.headers).map(([e,t])=>[e,String(t)])),o;try{o=await t(e.url,{method:e.method,body:i,redirect:e.request?.redirect,headers:a,signal:e.request?.signal,...e.body&&{duplex:`half`}})}catch(t){let n=`Unknown Error`;if(t instanceof Error){if(t.name===`AbortError`)throw t.status=500,t;n=t.message,t.name===`TypeError`&&`cause`in t&&(t.cause instanceof Error?n=t.cause.message:typeof t.cause==`string`&&(n=t.cause))}let r=new jY(n,500,{request:e});throw r.cause=t,r}let s=o.status,c=o.url,l={};for(let[e,t]of o.headers)l[e]=t;let u={url:c,status:s,headers:l,data:``};if(`deprecation`in l){let t=l.link&&l.link.match(/<([^<>]+)>; rel="deprecation"/),r=t&&t.pop();n.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${r?`. See ${r}`:``}`)}if(s===204||s===205)return u;if(e.method===`HEAD`){if(s<400)return u;throw new jY(o.statusText,s,{response:u,request:e})}if(s===304)throw u.data=await IY(o),new jY(`Not modified`,s,{response:u,request:e});if(s>=400)throw u.data=await IY(o),new jY(RY(u.data),s,{response:u,request:e});return u.data=r?await IY(o):o.body,u}async function IY(e){let t=e.headers.get(`content-type`);if(!t)return e.text().catch(()=>``);let n=(0,AY.safeParse)(t);if(LY(n)){let t=``;try{return t=await e.text(),JSON.parse(t)}catch{return t}}else if(n.type.startsWith(`text/`)||n.parameters.charset?.toLowerCase()===`utf-8`)return e.text().catch(()=>``);else return e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function LY(e){return e.type===`application/json`||e.type===`application/scim+json`}function RY(e){if(typeof e==`string`)return e;if(e instanceof ArrayBuffer)return`Unknown error`;if(`message`in e){let t=`documentation_url`in e?` - ${e.documentation_url}`:``;return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(e=>JSON.stringify(e)).join(`, `)}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function zY(e,t){let n=e.defaults(t);return Object.assign(function(e,t){let r=n.merge(e,t);if(!r.request||!r.request.hook)return FY(n.parse(r));let i=(e,t)=>FY(n.parse(n.merge(e,t)));return Object.assign(i,{endpoint:n,defaults:zY.bind(null,n)}),r.request.hook(i,r)},{endpoint:n,defaults:zY.bind(null,n)})}var BY=zY(kY,NY),VY=`0.0.0-development`;function HY(e){return`Request failed due to following response errors:
`+e.errors.map(e=>` - ${e.message}`).join(`
`)}var UY=class extends Error{constructor(e,t,n){super(HY(n)),this.request=e,this.headers=t,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`GraphqlResponseError`;errors;data},WY=[`method`,`baseUrl`,`url`,`headers`,`request`,`query`,`mediaType`,`operationName`],GY=[`query`,`method`,`url`],KY=/\/api\/v3\/?$/;function qY(e,t,n){if(n){if(typeof t==`string`&&`query`in n)return Promise.reject(Error(`[@octokit/graphql] "query" cannot be used as variable name`));for(let e in n)if(GY.includes(e))return Promise.reject(Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}let r=typeof t==`string`?Object.assign({query:t},n):t,i=Object.keys(r).reduce((e,t)=>WY.includes(t)?(e[t]=r[t],e):(e.variables||={},e.variables[t]=r[t],e),{}),a=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return KY.test(a)&&(i.url=a.replace(KY,`/api/graphql`)),e(i).then(e=>{if(e.data.errors){let t={};for(let n of Object.keys(e.headers))t[n]=e.headers[n];throw new UY(i,t,e.data)}return e.data.data})}function JY(e,t){let n=e.defaults(t);return Object.assign((e,t)=>qY(n,e,t),{defaults:JY.bind(null,n),endpoint:n.endpoint})}JY(BY,{headers:{"user-agent":`octokit-graphql.js/${VY} ${XJ()}`},method:`POST`,url:`/graphql`});function YY(e){return JY(e,{method:`POST`,url:`/graphql`})}var XY=`(?:[a-zA-Z0-9_-]+)`,ZY=`\\.`,QY=RegExp(`^${XY}${ZY}${XY}${ZY}${XY}$`),$Y=QY.test.bind(QY);async function eX(e){let t=$Y(e),n=e.startsWith(`v1.`)||e.startsWith(`ghs_`),r=e.startsWith(`ghu_`);return{type:`token`,token:e,tokenType:t?`app`:n?`installation`:r?`user-to-server`:`oauth`}}function tX(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function nX(e,t,n,r){let i=t.endpoint.merge(n,r);return i.headers.authorization=tX(e),t(i)}var rX=function(e){if(!e)throw Error(`[@octokit/auth-token] No token passed to createTokenAuth`);if(typeof e!=`string`)throw Error(`[@octokit/auth-token] Token passed to createTokenAuth is not a string`);return e=e.replace(/^(token|bearer) +/i,``),Object.assign(eX.bind(null,e),{hook:nX.bind(null,e)})},iX=`6.1.6`,aX=()=>{},oX=console.warn.bind(console),sX=console.error.bind(console);function cX(e={}){return typeof e.debug!=`function`&&(e.debug=aX),typeof e.info!=`function`&&(e.info=aX),typeof e.warn!=`function`&&(e.warn=oX),typeof e.error!=`function`&&(e.error=sX),e}var lX=`octokit-core.js/${iX} ${XJ()}`,uX=class{static VERSION=iX;static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let t=this.plugins;return class extends this{static plugins=t.concat(e.filter(e=>!t.includes(e)))}}constructor(e={}){let t=new aY.Collection,n={baseUrl:BY.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${lX}`:lX,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=BY.defaults(n),this.graphql=YY(this.request).defaults(n),this.log=cX(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=rX(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}request;graphql;log;hook;auth},dX=`0.0.0-development`;function fX(e){if(!e.data)return{...e,data:[]};if(!(`total_count`in e.data&&!(`url`in e.data)))return e;let t=e.data.incomplete_results,n=e.data.repository_selection,r=e.data.total_count;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count;let i=Object.keys(e.data)[0];return e.data=e.data[i],t!==void 0&&(e.data.incomplete_results=t),n!==void 0&&(e.data.repository_selection=n),e.data.total_count=r,e}function pX(e,t,n){let r=typeof t==`function`?t.endpoint(n):e.request.endpoint(t,n),i=typeof t==`function`?t:e.request,a=r.method,o=r.headers,s=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!s)return{done:!0};try{let e=fX(await i({method:a,url:s,headers:o}));return s=((e.headers.link||``).match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:e}}catch(e){if(e.status!==409)throw e;return s=``,{value:{status:200,headers:{},data:[]}}}}})}}function mX(e,t,n,r){return typeof n==`function`&&(r=n,n=void 0),hX(e,[],pX(e,t,n)[Symbol.asyncIterator](),r)}function hX(e,t,n,r){return n.next().then(i=>{if(i.done)return t;let a=!1;function o(){a=!0}return t=t.concat(r?r(i.value,o):i.value.data),a?t:hX(e,t,n,r)})}var gX=Object.assign(mX,{iterator:pX});function _X(e){return{paginate:Object.assign(mX.bind(null,e),{iterator:pX.bind(null,e)})}}_X.VERSION=dX;var vX=(e,t)=>`The cursor at "${e.join(`,`)}" did not change its value "${t}" after a page transition. Please make sure your that your query is set up correctly.`,yX=class extends Error{constructor(e,t){super(vX(e.pathInQuery,t)),this.pageInfo=e,this.cursorValue=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`MissingCursorChangeError`},bX=class extends Error{constructor(e){super(`No pageInfo property found in response. Please make sure to specify the pageInfo in your query. Response-Data: ${JSON.stringify(e,null,2)}`),this.response=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`MissingPageInfo`},xX=e=>Object.prototype.toString.call(e)===`[object Object]`;function SX(e){let t=CX(e,`pageInfo`);if(t.length===0)throw new bX(e);return t}var CX=(e,t,n=[])=>{for(let r of Object.keys(e)){let i=[...n,r],a=e[r];if(xX(a)){if(a.hasOwnProperty(t))return i;let e=CX(a,t,i);if(e.length>0)return e}}return[]},wX=(e,t)=>t.reduce((e,t)=>e[t],e),TX=(e,t,n)=>{let r=t[t.length-1],i=wX(e,[...t].slice(0,-1));typeof n==`function`?i[r]=n(i[r]):i[r]=n},EX=e=>{let t=SX(e);return{pathInQuery:t,pageInfo:wX(e,[...t,`pageInfo`])}},DX=e=>e.hasOwnProperty(`hasNextPage`),OX=e=>DX(e)?e.endCursor:e.startCursor,kX=e=>DX(e)?e.hasNextPage:e.hasPreviousPage,AX=e=>(t,n={})=>{let r=!0,i={...n};return{[Symbol.asyncIterator]:()=>({async next(){if(!r)return{done:!0,value:{}};let n=await e.graphql(t,i),a=EX(n),o=OX(a.pageInfo);if(r=kX(a.pageInfo),r&&o===i.cursor)throw new yX(a,o);return i={...i,cursor:o},{done:!1,value:n}}})}},jX=(e,t)=>{if(Object.keys(e).length===0)return Object.assign(e,t);let n=SX(e),r=[...n,`nodes`],i=wX(t,r);i&&TX(e,r,e=>[...e,...i]);let a=[...n,`edges`],o=wX(t,a);o&&TX(e,a,e=>[...e,...o]);let s=[...n,`pageInfo`];return TX(e,s,wX(t,s)),e},MX=e=>{let t=AX(e);return async(e,n={})=>{let r={};for await(let i of t(e,n))r=jX(r,i);return r}};function NX(e){return{graphql:Object.assign(e.graphql,{paginate:Object.assign(MX(e),{iterator:AX(e)})})}}var PX=`14.0.0`,FX={actions:{addCustomLabelsToSelfHostedRunnerForOrg:[`POST /orgs/{org}/actions/runners/{runner_id}/labels`],addCustomLabelsToSelfHostedRunnerForRepo:[`POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],addRepoAccessToSelfHostedRunnerGroupInOrg:[`PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],approveWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve`],cancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel`],createEnvironmentVariable:[`POST /repos/{owner}/{repo}/environments/{environment_name}/variables`],createHostedRunnerForOrg:[`POST /orgs/{org}/actions/hosted-runners`],createOrUpdateEnvironmentSecret:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}`],createOrgVariable:[`POST /orgs/{org}/actions/variables`],createRegistrationTokenForOrg:[`POST /orgs/{org}/actions/runners/registration-token`],createRegistrationTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/registration-token`],createRemoveTokenForOrg:[`POST /orgs/{org}/actions/runners/remove-token`],createRemoveTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/remove-token`],createRepoVariable:[`POST /repos/{owner}/{repo}/actions/variables`],createWorkflowDispatch:[`POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches`],deleteActionsCacheById:[`DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}`],deleteActionsCacheByKey:[`DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}`],deleteArtifact:[`DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],deleteEnvironmentSecret:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],deleteEnvironmentVariable:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],deleteHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],deleteOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}`],deleteOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}`],deleteRepoVariable:[`DELETE /repos/{owner}/{repo}/actions/variables/{name}`],deleteSelfHostedRunnerFromOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}`],deleteSelfHostedRunnerFromRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}`],deleteWorkflowRun:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}`],deleteWorkflowRunLogs:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],disableSelectedRepositoryGithubActionsOrganization:[`DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}`],disableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable`],downloadArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}`],downloadJobLogsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs`],downloadWorkflowRunAttemptLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs`],downloadWorkflowRunLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],enableSelectedRepositoryGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories/{repository_id}`],enableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable`],forceCancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel`],generateRunnerJitconfigForOrg:[`POST /orgs/{org}/actions/runners/generate-jitconfig`],generateRunnerJitconfigForRepo:[`POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig`],getActionsCacheList:[`GET /repos/{owner}/{repo}/actions/caches`],getActionsCacheUsage:[`GET /repos/{owner}/{repo}/actions/cache/usage`],getActionsCacheUsageByRepoForOrg:[`GET /orgs/{org}/actions/cache/usage-by-repository`],getActionsCacheUsageForOrg:[`GET /orgs/{org}/actions/cache/usage`],getAllowedActionsOrganization:[`GET /orgs/{org}/actions/permissions/selected-actions`],getAllowedActionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/selected-actions`],getArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],getCustomOidcSubClaimForRepo:[`GET /repos/{owner}/{repo}/actions/oidc/customization/sub`],getEnvironmentPublicKey:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key`],getEnvironmentSecret:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],getEnvironmentVariable:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],getGithubActionsDefaultWorkflowPermissionsOrganization:[`GET /orgs/{org}/actions/permissions/workflow`],getGithubActionsDefaultWorkflowPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/workflow`],getGithubActionsPermissionsOrganization:[`GET /orgs/{org}/actions/permissions`],getGithubActionsPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions`],getHostedRunnerForOrg:[`GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],getHostedRunnersGithubOwnedImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/github-owned`],getHostedRunnersLimitsForOrg:[`GET /orgs/{org}/actions/hosted-runners/limits`],getHostedRunnersMachineSpecsForOrg:[`GET /orgs/{org}/actions/hosted-runners/machine-sizes`],getHostedRunnersPartnerImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/partner`],getHostedRunnersPlatformsForOrg:[`GET /orgs/{org}/actions/hosted-runners/platforms`],getJobForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}`],getOrgPublicKey:[`GET /orgs/{org}/actions/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}`],getOrgVariable:[`GET /orgs/{org}/actions/variables/{name}`],getPendingDeploymentsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],getRepoPermissions:[`GET /repos/{owner}/{repo}/actions/permissions`,{},{renamed:[`actions`,`getGithubActionsPermissionsRepository`]}],getRepoPublicKey:[`GET /repos/{owner}/{repo}/actions/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/actions/secrets/{secret_name}`],getRepoVariable:[`GET /repos/{owner}/{repo}/actions/variables/{name}`],getReviewsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals`],getSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}`],getSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}`],getWorkflow:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}`],getWorkflowAccessToRepository:[`GET /repos/{owner}/{repo}/actions/permissions/access`],getWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}`],getWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}`],getWorkflowRunUsage:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing`],getWorkflowUsage:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing`],listArtifactsForRepo:[`GET /repos/{owner}/{repo}/actions/artifacts`],listEnvironmentSecrets:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets`],listEnvironmentVariables:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables`],listGithubHostedRunnersInGroupForOrg:[`GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners`],listHostedRunnersForOrg:[`GET /orgs/{org}/actions/hosted-runners`],listJobsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs`],listJobsForWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs`],listLabelsForSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}/labels`],listLabelsForSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],listOrgSecrets:[`GET /orgs/{org}/actions/secrets`],listOrgVariables:[`GET /orgs/{org}/actions/variables`],listRepoOrganizationSecrets:[`GET /repos/{owner}/{repo}/actions/organization-secrets`],listRepoOrganizationVariables:[`GET /repos/{owner}/{repo}/actions/organization-variables`],listRepoSecrets:[`GET /repos/{owner}/{repo}/actions/secrets`],listRepoVariables:[`GET /repos/{owner}/{repo}/actions/variables`],listRepoWorkflows:[`GET /repos/{owner}/{repo}/actions/workflows`],listRunnerApplicationsForOrg:[`GET /orgs/{org}/actions/runners/downloads`],listRunnerApplicationsForRepo:[`GET /repos/{owner}/{repo}/actions/runners/downloads`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}/repositories`],listSelectedReposForOrgVariable:[`GET /orgs/{org}/actions/variables/{name}/repositories`],listSelectedRepositoriesEnabledGithubActionsOrganization:[`GET /orgs/{org}/actions/permissions/repositories`],listSelfHostedRunnersForOrg:[`GET /orgs/{org}/actions/runners`],listSelfHostedRunnersForRepo:[`GET /repos/{owner}/{repo}/actions/runners`],listWorkflowRunArtifacts:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts`],listWorkflowRuns:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs`],listWorkflowRunsForRepo:[`GET /repos/{owner}/{repo}/actions/runs`],reRunJobForWorkflowRun:[`POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun`],reRunWorkflow:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun`],reRunWorkflowFailedJobs:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs`],removeAllCustomLabelsFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels`],removeAllCustomLabelsFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],removeCustomLabelFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}`],removeCustomLabelFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],reviewCustomGatesForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule`],reviewPendingDeploymentsForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],setAllowedActionsOrganization:[`PUT /orgs/{org}/actions/permissions/selected-actions`],setAllowedActionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/selected-actions`],setCustomLabelsForSelfHostedRunnerForOrg:[`PUT /orgs/{org}/actions/runners/{runner_id}/labels`],setCustomLabelsForSelfHostedRunnerForRepo:[`PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],setCustomOidcSubClaimForRepo:[`PUT /repos/{owner}/{repo}/actions/oidc/customization/sub`],setGithubActionsDefaultWorkflowPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions/workflow`],setGithubActionsDefaultWorkflowPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/workflow`],setGithubActionsPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions`],setGithubActionsPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories`],setSelectedReposForOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories`],setSelectedRepositoriesEnabledGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories`],setWorkflowAccessToRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/access`],updateEnvironmentVariable:[`PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],updateHostedRunnerForOrg:[`PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],updateOrgVariable:[`PATCH /orgs/{org}/actions/variables/{name}`],updateRepoVariable:[`PATCH /repos/{owner}/{repo}/actions/variables/{name}`]},activity:{checkRepoIsStarredByAuthenticatedUser:[`GET /user/starred/{owner}/{repo}`],deleteRepoSubscription:[`DELETE /repos/{owner}/{repo}/subscription`],deleteThreadSubscription:[`DELETE /notifications/threads/{thread_id}/subscription`],getFeeds:[`GET /feeds`],getRepoSubscription:[`GET /repos/{owner}/{repo}/subscription`],getThread:[`GET /notifications/threads/{thread_id}`],getThreadSubscriptionForAuthenticatedUser:[`GET /notifications/threads/{thread_id}/subscription`],listEventsForAuthenticatedUser:[`GET /users/{username}/events`],listNotificationsForAuthenticatedUser:[`GET /notifications`],listOrgEventsForAuthenticatedUser:[`GET /users/{username}/events/orgs/{org}`],listPublicEvents:[`GET /events`],listPublicEventsForRepoNetwork:[`GET /networks/{owner}/{repo}/events`],listPublicEventsForUser:[`GET /users/{username}/events/public`],listPublicOrgEvents:[`GET /orgs/{org}/events`],listReceivedEventsForUser:[`GET /users/{username}/received_events`],listReceivedPublicEventsForUser:[`GET /users/{username}/received_events/public`],listRepoEvents:[`GET /repos/{owner}/{repo}/events`],listRepoNotificationsForAuthenticatedUser:[`GET /repos/{owner}/{repo}/notifications`],listReposStarredByAuthenticatedUser:[`GET /user/starred`],listReposStarredByUser:[`GET /users/{username}/starred`],listReposWatchedByUser:[`GET /users/{username}/subscriptions`],listStargazersForRepo:[`GET /repos/{owner}/{repo}/stargazers`],listWatchedReposForAuthenticatedUser:[`GET /user/subscriptions`],listWatchersForRepo:[`GET /repos/{owner}/{repo}/subscribers`],markNotificationsAsRead:[`PUT /notifications`],markRepoNotificationsAsRead:[`PUT /repos/{owner}/{repo}/notifications`],markThreadAsDone:[`DELETE /notifications/threads/{thread_id}`],markThreadAsRead:[`PATCH /notifications/threads/{thread_id}`],setRepoSubscription:[`PUT /repos/{owner}/{repo}/subscription`],setThreadSubscription:[`PUT /notifications/threads/{thread_id}/subscription`],starRepoForAuthenticatedUser:[`PUT /user/starred/{owner}/{repo}`],unstarRepoForAuthenticatedUser:[`DELETE /user/starred/{owner}/{repo}`]},apps:{addRepoToInstallation:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`addRepoToInstallationForAuthenticatedUser`]}],addRepoToInstallationForAuthenticatedUser:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`],checkToken:[`POST /applications/{client_id}/token`],createFromManifest:[`POST /app-manifests/{code}/conversions`],createInstallationAccessToken:[`POST /app/installations/{installation_id}/access_tokens`],deleteAuthorization:[`DELETE /applications/{client_id}/grant`],deleteInstallation:[`DELETE /app/installations/{installation_id}`],deleteToken:[`DELETE /applications/{client_id}/token`],getAuthenticated:[`GET /app`],getBySlug:[`GET /apps/{app_slug}`],getInstallation:[`GET /app/installations/{installation_id}`],getOrgInstallation:[`GET /orgs/{org}/installation`],getRepoInstallation:[`GET /repos/{owner}/{repo}/installation`],getSubscriptionPlanForAccount:[`GET /marketplace_listing/accounts/{account_id}`],getSubscriptionPlanForAccountStubbed:[`GET /marketplace_listing/stubbed/accounts/{account_id}`],getUserInstallation:[`GET /users/{username}/installation`],getWebhookConfigForApp:[`GET /app/hook/config`],getWebhookDelivery:[`GET /app/hook/deliveries/{delivery_id}`],listAccountsForPlan:[`GET /marketplace_listing/plans/{plan_id}/accounts`],listAccountsForPlanStubbed:[`GET /marketplace_listing/stubbed/plans/{plan_id}/accounts`],listInstallationReposForAuthenticatedUser:[`GET /user/installations/{installation_id}/repositories`],listInstallationRequestsForAuthenticatedApp:[`GET /app/installation-requests`],listInstallations:[`GET /app/installations`],listInstallationsForAuthenticatedUser:[`GET /user/installations`],listPlans:[`GET /marketplace_listing/plans`],listPlansStubbed:[`GET /marketplace_listing/stubbed/plans`],listReposAccessibleToInstallation:[`GET /installation/repositories`],listSubscriptionsForAuthenticatedUser:[`GET /user/marketplace_purchases`],listSubscriptionsForAuthenticatedUserStubbed:[`GET /user/marketplace_purchases/stubbed`],listWebhookDeliveries:[`GET /app/hook/deliveries`],redeliverWebhookDelivery:[`POST /app/hook/deliveries/{delivery_id}/attempts`],removeRepoFromInstallation:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`removeRepoFromInstallationForAuthenticatedUser`]}],removeRepoFromInstallationForAuthenticatedUser:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`],resetToken:[`PATCH /applications/{client_id}/token`],revokeInstallationAccessToken:[`DELETE /installation/token`],scopeToken:[`POST /applications/{client_id}/token/scoped`],suspendInstallation:[`PUT /app/installations/{installation_id}/suspended`],unsuspendInstallation:[`DELETE /app/installations/{installation_id}/suspended`],updateWebhookConfigForApp:[`PATCH /app/hook/config`]},billing:{getGithubActionsBillingOrg:[`GET /orgs/{org}/settings/billing/actions`],getGithubActionsBillingUser:[`GET /users/{username}/settings/billing/actions`],getGithubBillingUsageReportOrg:[`GET /organizations/{org}/settings/billing/usage`],getGithubPackagesBillingOrg:[`GET /orgs/{org}/settings/billing/packages`],getGithubPackagesBillingUser:[`GET /users/{username}/settings/billing/packages`],getSharedStorageBillingOrg:[`GET /orgs/{org}/settings/billing/shared-storage`],getSharedStorageBillingUser:[`GET /users/{username}/settings/billing/shared-storage`]},campaigns:{createCampaign:[`POST /orgs/{org}/campaigns`],deleteCampaign:[`DELETE /orgs/{org}/campaigns/{campaign_number}`],getCampaignSummary:[`GET /orgs/{org}/campaigns/{campaign_number}`],listOrgCampaigns:[`GET /orgs/{org}/campaigns`],updateCampaign:[`PATCH /orgs/{org}/campaigns/{campaign_number}`]},checks:{create:[`POST /repos/{owner}/{repo}/check-runs`],createSuite:[`POST /repos/{owner}/{repo}/check-suites`],get:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}`],getSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}`],listAnnotations:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations`],listForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-runs`],listForSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs`],listSuitesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-suites`],rerequestRun:[`POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest`],rerequestSuite:[`POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest`],setSuitesPreferences:[`PATCH /repos/{owner}/{repo}/check-suites/preferences`],update:[`PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}`]},codeScanning:{commitAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits`],createAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],createVariantAnalysis:[`POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses`],deleteAnalysis:[`DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}`],deleteCodeqlDatabase:[`DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getAlert:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`,{},{renamedParameters:{alert_id:`alert_number`}}],getAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}`],getAutofix:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],getCodeqlDatabase:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getDefaultSetup:[`GET /repos/{owner}/{repo}/code-scanning/default-setup`],getSarif:[`GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}`],getVariantAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}`],getVariantAnalysisRepoTask:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}`],listAlertInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`],listAlertsForOrg:[`GET /orgs/{org}/code-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/code-scanning/alerts`],listAlertsInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`,{},{renamed:[`codeScanning`,`listAlertInstances`]}],listCodeqlDatabases:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases`],listRecentAnalyses:[`GET /repos/{owner}/{repo}/code-scanning/analyses`],updateAlert:[`PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`],updateDefaultSetup:[`PATCH /repos/{owner}/{repo}/code-scanning/default-setup`],uploadSarif:[`POST /repos/{owner}/{repo}/code-scanning/sarifs`]},codeSecurity:{attachConfiguration:[`POST /orgs/{org}/code-security/configurations/{configuration_id}/attach`],attachEnterpriseConfiguration:[`POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach`],createConfiguration:[`POST /orgs/{org}/code-security/configurations`],createConfigurationForEnterprise:[`POST /enterprises/{enterprise}/code-security/configurations`],deleteConfiguration:[`DELETE /orgs/{org}/code-security/configurations/{configuration_id}`],deleteConfigurationForEnterprise:[`DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],detachConfiguration:[`DELETE /orgs/{org}/code-security/configurations/detach`],getConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}`],getConfigurationForRepository:[`GET /repos/{owner}/{repo}/code-security-configuration`],getConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations`],getConfigurationsForOrg:[`GET /orgs/{org}/code-security/configurations`],getDefaultConfigurations:[`GET /orgs/{org}/code-security/configurations/defaults`],getDefaultConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/defaults`],getRepositoriesForConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories`],getRepositoriesForEnterpriseConfiguration:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories`],getSingleConfigurationForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],setConfigurationAsDefault:[`PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults`],setConfigurationAsDefaultForEnterprise:[`PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults`],updateConfiguration:[`PATCH /orgs/{org}/code-security/configurations/{configuration_id}`],updateEnterpriseConfiguration:[`PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}`]},codesOfConduct:{getAllCodesOfConduct:[`GET /codes_of_conduct`],getConductCode:[`GET /codes_of_conduct/{key}`]},codespaces:{addRepositoryForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],checkPermissionsForDevcontainer:[`GET /repos/{owner}/{repo}/codespaces/permissions_check`],codespaceMachinesForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/machines`],createForAuthenticatedUser:[`POST /user/codespaces`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],createOrUpdateSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}`],createWithPrForAuthenticatedUser:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces`],createWithRepoForAuthenticatedUser:[`POST /repos/{owner}/{repo}/codespaces`],deleteForAuthenticatedUser:[`DELETE /user/codespaces/{codespace_name}`],deleteFromOrganization:[`DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],deleteSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}`],exportForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/exports`],getCodespacesForUserInOrg:[`GET /orgs/{org}/members/{username}/codespaces`],getExportDetailsForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/exports/{export_id}`],getForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}`],getOrgPublicKey:[`GET /orgs/{org}/codespaces/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}`],getPublicKeyForAuthenticatedUser:[`GET /user/codespaces/secrets/public-key`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/codespaces/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],getSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}`],listDevcontainersInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/devcontainers`],listForAuthenticatedUser:[`GET /user/codespaces`],listInOrganization:[`GET /orgs/{org}/codespaces`,{},{renamedParameters:{org_id:`org`}}],listInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces`],listOrgSecrets:[`GET /orgs/{org}/codespaces/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/codespaces/secrets`],listRepositoriesForSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}/repositories`],listSecretsForAuthenticatedUser:[`GET /user/codespaces/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],preFlightWithRepoForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/new`],publishForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/publish`],removeRepositoryForSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],repoMachinesForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/machines`],setRepositoriesForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],startForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/start`],stopForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/stop`],stopInOrganization:[`POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop`],updateForAuthenticatedUser:[`PATCH /user/codespaces/{codespace_name}`]},copilot:{addCopilotSeatsForTeams:[`POST /orgs/{org}/copilot/billing/selected_teams`],addCopilotSeatsForUsers:[`POST /orgs/{org}/copilot/billing/selected_users`],cancelCopilotSeatAssignmentForTeams:[`DELETE /orgs/{org}/copilot/billing/selected_teams`],cancelCopilotSeatAssignmentForUsers:[`DELETE /orgs/{org}/copilot/billing/selected_users`],copilotMetricsForOrganization:[`GET /orgs/{org}/copilot/metrics`],copilotMetricsForTeam:[`GET /orgs/{org}/team/{team_slug}/copilot/metrics`],getCopilotOrganizationDetails:[`GET /orgs/{org}/copilot/billing`],getCopilotSeatDetailsForUser:[`GET /orgs/{org}/members/{username}/copilot`],listCopilotSeats:[`GET /orgs/{org}/copilot/billing/seats`]},dependabot:{addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],getAlert:[`GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],getOrgPublicKey:[`GET /orgs/{org}/dependabot/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/dependabot/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/dependabot/alerts`],listAlertsForOrg:[`GET /orgs/{org}/dependabot/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/dependabot/alerts`],listOrgSecrets:[`GET /orgs/{org}/dependabot/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/dependabot/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],updateAlert:[`PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`]},dependencyGraph:{createRepositorySnapshot:[`POST /repos/{owner}/{repo}/dependency-graph/snapshots`],diffRange:[`GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}`],exportSbom:[`GET /repos/{owner}/{repo}/dependency-graph/sbom`]},emojis:{get:[`GET /emojis`]},gists:{checkIsStarred:[`GET /gists/{gist_id}/star`],create:[`POST /gists`],createComment:[`POST /gists/{gist_id}/comments`],delete:[`DELETE /gists/{gist_id}`],deleteComment:[`DELETE /gists/{gist_id}/comments/{comment_id}`],fork:[`POST /gists/{gist_id}/forks`],get:[`GET /gists/{gist_id}`],getComment:[`GET /gists/{gist_id}/comments/{comment_id}`],getRevision:[`GET /gists/{gist_id}/{sha}`],list:[`GET /gists`],listComments:[`GET /gists/{gist_id}/comments`],listCommits:[`GET /gists/{gist_id}/commits`],listForUser:[`GET /users/{username}/gists`],listForks:[`GET /gists/{gist_id}/forks`],listPublic:[`GET /gists/public`],listStarred:[`GET /gists/starred`],star:[`PUT /gists/{gist_id}/star`],unstar:[`DELETE /gists/{gist_id}/star`],update:[`PATCH /gists/{gist_id}`],updateComment:[`PATCH /gists/{gist_id}/comments/{comment_id}`]},git:{createBlob:[`POST /repos/{owner}/{repo}/git/blobs`],createCommit:[`POST /repos/{owner}/{repo}/git/commits`],createRef:[`POST /repos/{owner}/{repo}/git/refs`],createTag:[`POST /repos/{owner}/{repo}/git/tags`],createTree:[`POST /repos/{owner}/{repo}/git/trees`],deleteRef:[`DELETE /repos/{owner}/{repo}/git/refs/{ref}`],getBlob:[`GET /repos/{owner}/{repo}/git/blobs/{file_sha}`],getCommit:[`GET /repos/{owner}/{repo}/git/commits/{commit_sha}`],getRef:[`GET /repos/{owner}/{repo}/git/ref/{ref}`],getTag:[`GET /repos/{owner}/{repo}/git/tags/{tag_sha}`],getTree:[`GET /repos/{owner}/{repo}/git/trees/{tree_sha}`],listMatchingRefs:[`GET /repos/{owner}/{repo}/git/matching-refs/{ref}`],updateRef:[`PATCH /repos/{owner}/{repo}/git/refs/{ref}`]},gitignore:{getAllTemplates:[`GET /gitignore/templates`],getTemplate:[`GET /gitignore/templates/{name}`]},hostedCompute:{createNetworkConfigurationForOrg:[`POST /orgs/{org}/settings/network-configurations`],deleteNetworkConfigurationFromOrg:[`DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkConfigurationForOrg:[`GET /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkSettingsForOrg:[`GET /orgs/{org}/settings/network-settings/{network_settings_id}`],listNetworkConfigurationsForOrg:[`GET /orgs/{org}/settings/network-configurations`],updateNetworkConfigurationForOrg:[`PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}`]},interactions:{getRestrictionsForAuthenticatedUser:[`GET /user/interaction-limits`],getRestrictionsForOrg:[`GET /orgs/{org}/interaction-limits`],getRestrictionsForRepo:[`GET /repos/{owner}/{repo}/interaction-limits`],getRestrictionsForYourPublicRepos:[`GET /user/interaction-limits`,{},{renamed:[`interactions`,`getRestrictionsForAuthenticatedUser`]}],removeRestrictionsForAuthenticatedUser:[`DELETE /user/interaction-limits`],removeRestrictionsForOrg:[`DELETE /orgs/{org}/interaction-limits`],removeRestrictionsForRepo:[`DELETE /repos/{owner}/{repo}/interaction-limits`],removeRestrictionsForYourPublicRepos:[`DELETE /user/interaction-limits`,{},{renamed:[`interactions`,`removeRestrictionsForAuthenticatedUser`]}],setRestrictionsForAuthenticatedUser:[`PUT /user/interaction-limits`],setRestrictionsForOrg:[`PUT /orgs/{org}/interaction-limits`],setRestrictionsForRepo:[`PUT /repos/{owner}/{repo}/interaction-limits`],setRestrictionsForYourPublicRepos:[`PUT /user/interaction-limits`,{},{renamed:[`interactions`,`setRestrictionsForAuthenticatedUser`]}]},issues:{addAssignees:[`POST /repos/{owner}/{repo}/issues/{issue_number}/assignees`],addLabels:[`POST /repos/{owner}/{repo}/issues/{issue_number}/labels`],addSubIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],checkUserCanBeAssigned:[`GET /repos/{owner}/{repo}/assignees/{assignee}`],checkUserCanBeAssignedToIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}`],create:[`POST /repos/{owner}/{repo}/issues`],createComment:[`POST /repos/{owner}/{repo}/issues/{issue_number}/comments`],createLabel:[`POST /repos/{owner}/{repo}/labels`],createMilestone:[`POST /repos/{owner}/{repo}/milestones`],deleteComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}`],deleteLabel:[`DELETE /repos/{owner}/{repo}/labels/{name}`],deleteMilestone:[`DELETE /repos/{owner}/{repo}/milestones/{milestone_number}`],get:[`GET /repos/{owner}/{repo}/issues/{issue_number}`],getComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}`],getEvent:[`GET /repos/{owner}/{repo}/issues/events/{event_id}`],getLabel:[`GET /repos/{owner}/{repo}/labels/{name}`],getMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}`],list:[`GET /issues`],listAssignees:[`GET /repos/{owner}/{repo}/assignees`],listComments:[`GET /repos/{owner}/{repo}/issues/{issue_number}/comments`],listCommentsForRepo:[`GET /repos/{owner}/{repo}/issues/comments`],listEvents:[`GET /repos/{owner}/{repo}/issues/{issue_number}/events`],listEventsForRepo:[`GET /repos/{owner}/{repo}/issues/events`],listEventsForTimeline:[`GET /repos/{owner}/{repo}/issues/{issue_number}/timeline`],listForAuthenticatedUser:[`GET /user/issues`],listForOrg:[`GET /orgs/{org}/issues`],listForRepo:[`GET /repos/{owner}/{repo}/issues`],listLabelsForMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels`],listLabelsForRepo:[`GET /repos/{owner}/{repo}/labels`],listLabelsOnIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/labels`],listMilestones:[`GET /repos/{owner}/{repo}/milestones`],listSubIssues:[`GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],lock:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/lock`],removeAllLabels:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels`],removeAssignees:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees`],removeLabel:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}`],removeSubIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue`],reprioritizeSubIssue:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`],setLabels:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/labels`],unlock:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock`],update:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}`],updateComment:[`PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}`],updateLabel:[`PATCH /repos/{owner}/{repo}/labels/{name}`],updateMilestone:[`PATCH /repos/{owner}/{repo}/milestones/{milestone_number}`]},licenses:{get:[`GET /licenses/{license}`],getAllCommonlyUsed:[`GET /licenses`],getForRepo:[`GET /repos/{owner}/{repo}/license`]},markdown:{render:[`POST /markdown`],renderRaw:[`POST /markdown/raw`,{headers:{"content-type":`text/plain; charset=utf-8`}}]},meta:{get:[`GET /meta`],getAllVersions:[`GET /versions`],getOctocat:[`GET /octocat`],getZen:[`GET /zen`],root:[`GET /`]},migrations:{deleteArchiveForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/archive`],deleteArchiveForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/archive`],downloadArchiveForOrg:[`GET /orgs/{org}/migrations/{migration_id}/archive`],getArchiveForAuthenticatedUser:[`GET /user/migrations/{migration_id}/archive`],getStatusForAuthenticatedUser:[`GET /user/migrations/{migration_id}`],getStatusForOrg:[`GET /orgs/{org}/migrations/{migration_id}`],listForAuthenticatedUser:[`GET /user/migrations`],listForOrg:[`GET /orgs/{org}/migrations`],listReposForAuthenticatedUser:[`GET /user/migrations/{migration_id}/repositories`],listReposForOrg:[`GET /orgs/{org}/migrations/{migration_id}/repositories`],listReposForUser:[`GET /user/migrations/{migration_id}/repositories`,{},{renamed:[`migrations`,`listReposForAuthenticatedUser`]}],startForAuthenticatedUser:[`POST /user/migrations`],startForOrg:[`POST /orgs/{org}/migrations`],unlockRepoForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock`],unlockRepoForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock`]},oidc:{getOidcCustomSubTemplateForOrg:[`GET /orgs/{org}/actions/oidc/customization/sub`],updateOidcCustomSubTemplateForOrg:[`PUT /orgs/{org}/actions/oidc/customization/sub`]},orgs:{addSecurityManagerTeam:[`PUT /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team`}],assignTeamToOrgRole:[`PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],assignUserToOrgRole:[`PUT /orgs/{org}/organization-roles/users/{username}/{role_id}`],blockUser:[`PUT /orgs/{org}/blocks/{username}`],cancelInvitation:[`DELETE /orgs/{org}/invitations/{invitation_id}`],checkBlockedUser:[`GET /orgs/{org}/blocks/{username}`],checkMembershipForUser:[`GET /orgs/{org}/members/{username}`],checkPublicMembershipForUser:[`GET /orgs/{org}/public_members/{username}`],convertMemberToOutsideCollaborator:[`PUT /orgs/{org}/outside_collaborators/{username}`],createInvitation:[`POST /orgs/{org}/invitations`],createIssueType:[`POST /orgs/{org}/issue-types`],createOrUpdateCustomProperties:[`PATCH /orgs/{org}/properties/schema`],createOrUpdateCustomPropertiesValuesForRepos:[`PATCH /orgs/{org}/properties/values`],createOrUpdateCustomProperty:[`PUT /orgs/{org}/properties/schema/{custom_property_name}`],createWebhook:[`POST /orgs/{org}/hooks`],delete:[`DELETE /orgs/{org}`],deleteIssueType:[`DELETE /orgs/{org}/issue-types/{issue_type_id}`],deleteWebhook:[`DELETE /orgs/{org}/hooks/{hook_id}`],enableOrDisableSecurityProductOnAllOrgRepos:[`POST /orgs/{org}/{security_product}/{enablement}`,{},{deprecated:`octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization`}],get:[`GET /orgs/{org}`],getAllCustomProperties:[`GET /orgs/{org}/properties/schema`],getCustomProperty:[`GET /orgs/{org}/properties/schema/{custom_property_name}`],getMembershipForAuthenticatedUser:[`GET /user/memberships/orgs/{org}`],getMembershipForUser:[`GET /orgs/{org}/memberships/{username}`],getOrgRole:[`GET /orgs/{org}/organization-roles/{role_id}`],getOrgRulesetHistory:[`GET /orgs/{org}/rulesets/{ruleset_id}/history`],getOrgRulesetVersion:[`GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}`],getWebhook:[`GET /orgs/{org}/hooks/{hook_id}`],getWebhookConfigForOrg:[`GET /orgs/{org}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}`],list:[`GET /organizations`],listAppInstallations:[`GET /orgs/{org}/installations`],listAttestations:[`GET /orgs/{org}/attestations/{subject_digest}`],listBlockedUsers:[`GET /orgs/{org}/blocks`],listCustomPropertiesValuesForRepos:[`GET /orgs/{org}/properties/values`],listFailedInvitations:[`GET /orgs/{org}/failed_invitations`],listForAuthenticatedUser:[`GET /user/orgs`],listForUser:[`GET /users/{username}/orgs`],listInvitationTeams:[`GET /orgs/{org}/invitations/{invitation_id}/teams`],listIssueTypes:[`GET /orgs/{org}/issue-types`],listMembers:[`GET /orgs/{org}/members`],listMembershipsForAuthenticatedUser:[`GET /user/memberships/orgs`],listOrgRoleTeams:[`GET /orgs/{org}/organization-roles/{role_id}/teams`],listOrgRoleUsers:[`GET /orgs/{org}/organization-roles/{role_id}/users`],listOrgRoles:[`GET /orgs/{org}/organization-roles`],listOrganizationFineGrainedPermissions:[`GET /orgs/{org}/organization-fine-grained-permissions`],listOutsideCollaborators:[`GET /orgs/{org}/outside_collaborators`],listPatGrantRepositories:[`GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories`],listPatGrantRequestRepositories:[`GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories`],listPatGrantRequests:[`GET /orgs/{org}/personal-access-token-requests`],listPatGrants:[`GET /orgs/{org}/personal-access-tokens`],listPendingInvitations:[`GET /orgs/{org}/invitations`],listPublicMembers:[`GET /orgs/{org}/public_members`],listSecurityManagerTeams:[`GET /orgs/{org}/security-managers`,{},{deprecated:`octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams`}],listWebhookDeliveries:[`GET /orgs/{org}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /orgs/{org}/hooks`],pingWebhook:[`POST /orgs/{org}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeCustomProperty:[`DELETE /orgs/{org}/properties/schema/{custom_property_name}`],removeMember:[`DELETE /orgs/{org}/members/{username}`],removeMembershipForUser:[`DELETE /orgs/{org}/memberships/{username}`],removeOutsideCollaborator:[`DELETE /orgs/{org}/outside_collaborators/{username}`],removePublicMembershipForAuthenticatedUser:[`DELETE /orgs/{org}/public_members/{username}`],removeSecurityManagerTeam:[`DELETE /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team`}],reviewPatGrantRequest:[`POST /orgs/{org}/personal-access-token-requests/{pat_request_id}`],reviewPatGrantRequestsInBulk:[`POST /orgs/{org}/personal-access-token-requests`],revokeAllOrgRolesTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}`],revokeAllOrgRolesUser:[`DELETE /orgs/{org}/organization-roles/users/{username}`],revokeOrgRoleTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],revokeOrgRoleUser:[`DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}`],setMembershipForUser:[`PUT /orgs/{org}/memberships/{username}`],setPublicMembershipForAuthenticatedUser:[`PUT /orgs/{org}/public_members/{username}`],unblockUser:[`DELETE /orgs/{org}/blocks/{username}`],update:[`PATCH /orgs/{org}`],updateIssueType:[`PUT /orgs/{org}/issue-types/{issue_type_id}`],updateMembershipForAuthenticatedUser:[`PATCH /user/memberships/orgs/{org}`],updatePatAccess:[`POST /orgs/{org}/personal-access-tokens/{pat_id}`],updatePatAccesses:[`POST /orgs/{org}/personal-access-tokens`],updateWebhook:[`PATCH /orgs/{org}/hooks/{hook_id}`],updateWebhookConfigForOrg:[`PATCH /orgs/{org}/hooks/{hook_id}/config`]},packages:{deletePackageForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}`],deletePackageForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}`],deletePackageForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}`],deletePackageVersionForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getAllPackageVersionsForAPackageOwnedByAnOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByOrg`]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByAuthenticatedUser`]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions`],getPackageForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}`],getPackageForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}`],getPackageForUser:[`GET /users/{username}/packages/{package_type}/{package_name}`],getPackageVersionForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],listDockerMigrationConflictingPackagesForAuthenticatedUser:[`GET /user/docker/conflicts`],listDockerMigrationConflictingPackagesForOrganization:[`GET /orgs/{org}/docker/conflicts`],listDockerMigrationConflictingPackagesForUser:[`GET /users/{username}/docker/conflicts`],listPackagesForAuthenticatedUser:[`GET /user/packages`],listPackagesForOrganization:[`GET /orgs/{org}/packages`],listPackagesForUser:[`GET /users/{username}/packages`],restorePackageForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageVersionForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`]},privateRegistries:{createOrgPrivateRegistry:[`POST /orgs/{org}/private-registries`],deleteOrgPrivateRegistry:[`DELETE /orgs/{org}/private-registries/{secret_name}`],getOrgPrivateRegistry:[`GET /orgs/{org}/private-registries/{secret_name}`],getOrgPublicKey:[`GET /orgs/{org}/private-registries/public-key`],listOrgPrivateRegistries:[`GET /orgs/{org}/private-registries`],updateOrgPrivateRegistry:[`PATCH /orgs/{org}/private-registries/{secret_name}`]},pulls:{checkIfMerged:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/merge`],create:[`POST /repos/{owner}/{repo}/pulls`],createReplyForReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`],createReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],createReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments`],deletePendingReview:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],deleteReviewComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}`],dismissReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals`],get:[`GET /repos/{owner}/{repo}/pulls/{pull_number}`],getReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],getReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}`],list:[`GET /repos/{owner}/{repo}/pulls`],listCommentsForReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments`],listCommits:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/commits`],listFiles:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/files`],listRequestedReviewers:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],listReviewComments:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/comments`],listReviewCommentsForRepo:[`GET /repos/{owner}/{repo}/pulls/comments`],listReviews:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],merge:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge`],removeRequestedReviewers:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],requestReviewers:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],submitReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events`],update:[`PATCH /repos/{owner}/{repo}/pulls/{pull_number}`],updateBranch:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch`],updateReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],updateReviewComment:[`PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}`]},rateLimit:{get:[`GET /rate_limit`]},reactions:{createForCommitComment:[`POST /repos/{owner}/{repo}/comments/{comment_id}/reactions`],createForIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/reactions`],createForIssueComment:[`POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],createForPullRequestReviewComment:[`POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],createForRelease:[`POST /repos/{owner}/{repo}/releases/{release_id}/reactions`],createForTeamDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],createForTeamDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`],deleteForCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}`],deleteForIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}`],deleteForIssueComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}`],deleteForPullRequestComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}`],deleteForRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}`],deleteForTeamDiscussion:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}`],deleteForTeamDiscussionComment:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}`],listForCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}/reactions`],listForIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/reactions`],listForIssueComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],listForPullRequestReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],listForRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}/reactions`],listForTeamDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],listForTeamDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`]},repos:{acceptInvitation:[`PATCH /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`acceptInvitationForAuthenticatedUser`]}],acceptInvitationForAuthenticatedUser:[`PATCH /user/repository_invitations/{invitation_id}`],addAppAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],addCollaborator:[`PUT /repos/{owner}/{repo}/collaborators/{username}`],addStatusCheckContexts:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],addTeamAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],addUserAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],cancelPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel`],checkAutomatedSecurityFixes:[`GET /repos/{owner}/{repo}/automated-security-fixes`],checkCollaborator:[`GET /repos/{owner}/{repo}/collaborators/{username}`],checkPrivateVulnerabilityReporting:[`GET /repos/{owner}/{repo}/private-vulnerability-reporting`],checkVulnerabilityAlerts:[`GET /repos/{owner}/{repo}/vulnerability-alerts`],codeownersErrors:[`GET /repos/{owner}/{repo}/codeowners/errors`],compareCommits:[`GET /repos/{owner}/{repo}/compare/{base}...{head}`],compareCommitsWithBasehead:[`GET /repos/{owner}/{repo}/compare/{basehead}`],createAttestation:[`POST /repos/{owner}/{repo}/attestations`],createAutolink:[`POST /repos/{owner}/{repo}/autolinks`],createCommitComment:[`POST /repos/{owner}/{repo}/commits/{commit_sha}/comments`],createCommitSignatureProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],createCommitStatus:[`POST /repos/{owner}/{repo}/statuses/{sha}`],createDeployKey:[`POST /repos/{owner}/{repo}/keys`],createDeployment:[`POST /repos/{owner}/{repo}/deployments`],createDeploymentBranchPolicy:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],createDeploymentProtectionRule:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],createDeploymentStatus:[`POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],createDispatchEvent:[`POST /repos/{owner}/{repo}/dispatches`],createForAuthenticatedUser:[`POST /user/repos`],createFork:[`POST /repos/{owner}/{repo}/forks`],createInOrg:[`POST /orgs/{org}/repos`],createOrUpdateCustomPropertiesValues:[`PATCH /repos/{owner}/{repo}/properties/values`],createOrUpdateEnvironment:[`PUT /repos/{owner}/{repo}/environments/{environment_name}`],createOrUpdateFileContents:[`PUT /repos/{owner}/{repo}/contents/{path}`],createOrgRuleset:[`POST /orgs/{org}/rulesets`],createPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments`],createPagesSite:[`POST /repos/{owner}/{repo}/pages`],createRelease:[`POST /repos/{owner}/{repo}/releases`],createRepoRuleset:[`POST /repos/{owner}/{repo}/rulesets`],createUsingTemplate:[`POST /repos/{template_owner}/{template_repo}/generate`],createWebhook:[`POST /repos/{owner}/{repo}/hooks`],declineInvitation:[`DELETE /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`declineInvitationForAuthenticatedUser`]}],declineInvitationForAuthenticatedUser:[`DELETE /user/repository_invitations/{invitation_id}`],delete:[`DELETE /repos/{owner}/{repo}`],deleteAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],deleteAdminBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],deleteAnEnvironment:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}`],deleteAutolink:[`DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}`],deleteBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection`],deleteCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}`],deleteCommitSignatureProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],deleteDeployKey:[`DELETE /repos/{owner}/{repo}/keys/{key_id}`],deleteDeployment:[`DELETE /repos/{owner}/{repo}/deployments/{deployment_id}`],deleteDeploymentBranchPolicy:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],deleteFile:[`DELETE /repos/{owner}/{repo}/contents/{path}`],deleteInvitation:[`DELETE /repos/{owner}/{repo}/invitations/{invitation_id}`],deleteOrgRuleset:[`DELETE /orgs/{org}/rulesets/{ruleset_id}`],deletePagesSite:[`DELETE /repos/{owner}/{repo}/pages`],deletePullRequestReviewProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],deleteRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}`],deleteReleaseAsset:[`DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}`],deleteRepoRuleset:[`DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}`],deleteWebhook:[`DELETE /repos/{owner}/{repo}/hooks/{hook_id}`],disableAutomatedSecurityFixes:[`DELETE /repos/{owner}/{repo}/automated-security-fixes`],disableDeploymentProtectionRule:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],disablePrivateVulnerabilityReporting:[`DELETE /repos/{owner}/{repo}/private-vulnerability-reporting`],disableVulnerabilityAlerts:[`DELETE /repos/{owner}/{repo}/vulnerability-alerts`],downloadArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`,{},{renamed:[`repos`,`downloadZipballArchive`]}],downloadTarballArchive:[`GET /repos/{owner}/{repo}/tarball/{ref}`],downloadZipballArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`],enableAutomatedSecurityFixes:[`PUT /repos/{owner}/{repo}/automated-security-fixes`],enablePrivateVulnerabilityReporting:[`PUT /repos/{owner}/{repo}/private-vulnerability-reporting`],enableVulnerabilityAlerts:[`PUT /repos/{owner}/{repo}/vulnerability-alerts`],generateReleaseNotes:[`POST /repos/{owner}/{repo}/releases/generate-notes`],get:[`GET /repos/{owner}/{repo}`],getAccessRestrictions:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],getAdminBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],getAllDeploymentProtectionRules:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],getAllEnvironments:[`GET /repos/{owner}/{repo}/environments`],getAllStatusCheckContexts:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`],getAllTopics:[`GET /repos/{owner}/{repo}/topics`],getAppsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`],getAutolink:[`GET /repos/{owner}/{repo}/autolinks/{autolink_id}`],getBranch:[`GET /repos/{owner}/{repo}/branches/{branch}`],getBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection`],getBranchRules:[`GET /repos/{owner}/{repo}/rules/branches/{branch}`],getClones:[`GET /repos/{owner}/{repo}/traffic/clones`],getCodeFrequencyStats:[`GET /repos/{owner}/{repo}/stats/code_frequency`],getCollaboratorPermissionLevel:[`GET /repos/{owner}/{repo}/collaborators/{username}/permission`],getCombinedStatusForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/status`],getCommit:[`GET /repos/{owner}/{repo}/commits/{ref}`],getCommitActivityStats:[`GET /repos/{owner}/{repo}/stats/commit_activity`],getCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}`],getCommitSignatureProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],getCommunityProfileMetrics:[`GET /repos/{owner}/{repo}/community/profile`],getContent:[`GET /repos/{owner}/{repo}/contents/{path}`],getContributorsStats:[`GET /repos/{owner}/{repo}/stats/contributors`],getCustomDeploymentProtectionRule:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],getCustomPropertiesValues:[`GET /repos/{owner}/{repo}/properties/values`],getDeployKey:[`GET /repos/{owner}/{repo}/keys/{key_id}`],getDeployment:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}`],getDeploymentBranchPolicy:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],getDeploymentStatus:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}`],getEnvironment:[`GET /repos/{owner}/{repo}/environments/{environment_name}`],getLatestPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/latest`],getLatestRelease:[`GET /repos/{owner}/{repo}/releases/latest`],getOrgRuleSuite:[`GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}`],getOrgRuleSuites:[`GET /orgs/{org}/rulesets/rule-suites`],getOrgRuleset:[`GET /orgs/{org}/rulesets/{ruleset_id}`],getOrgRulesets:[`GET /orgs/{org}/rulesets`],getPages:[`GET /repos/{owner}/{repo}/pages`],getPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/{build_id}`],getPagesDeployment:[`GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}`],getPagesHealthCheck:[`GET /repos/{owner}/{repo}/pages/health`],getParticipationStats:[`GET /repos/{owner}/{repo}/stats/participation`],getPullRequestReviewProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],getPunchCardStats:[`GET /repos/{owner}/{repo}/stats/punch_card`],getReadme:[`GET /repos/{owner}/{repo}/readme`],getReadmeInDirectory:[`GET /repos/{owner}/{repo}/readme/{dir}`],getRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}`],getReleaseAsset:[`GET /repos/{owner}/{repo}/releases/assets/{asset_id}`],getReleaseByTag:[`GET /repos/{owner}/{repo}/releases/tags/{tag}`],getRepoRuleSuite:[`GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}`],getRepoRuleSuites:[`GET /repos/{owner}/{repo}/rulesets/rule-suites`],getRepoRuleset:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}`],getRepoRulesetHistory:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history`],getRepoRulesetVersion:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}`],getRepoRulesets:[`GET /repos/{owner}/{repo}/rulesets`],getStatusChecksProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],getTeamsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`],getTopPaths:[`GET /repos/{owner}/{repo}/traffic/popular/paths`],getTopReferrers:[`GET /repos/{owner}/{repo}/traffic/popular/referrers`],getUsersWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`],getViews:[`GET /repos/{owner}/{repo}/traffic/views`],getWebhook:[`GET /repos/{owner}/{repo}/hooks/{hook_id}`],getWebhookConfigForRepo:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}`],listActivities:[`GET /repos/{owner}/{repo}/activity`],listAttestations:[`GET /repos/{owner}/{repo}/attestations/{subject_digest}`],listAutolinks:[`GET /repos/{owner}/{repo}/autolinks`],listBranches:[`GET /repos/{owner}/{repo}/branches`],listBranchesForHeadCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head`],listCollaborators:[`GET /repos/{owner}/{repo}/collaborators`],listCommentsForCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/comments`],listCommitCommentsForRepo:[`GET /repos/{owner}/{repo}/comments`],listCommitStatusesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/statuses`],listCommits:[`GET /repos/{owner}/{repo}/commits`],listContributors:[`GET /repos/{owner}/{repo}/contributors`],listCustomDeploymentRuleIntegrations:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps`],listDeployKeys:[`GET /repos/{owner}/{repo}/keys`],listDeploymentBranchPolicies:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],listDeploymentStatuses:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],listDeployments:[`GET /repos/{owner}/{repo}/deployments`],listForAuthenticatedUser:[`GET /user/repos`],listForOrg:[`GET /orgs/{org}/repos`],listForUser:[`GET /users/{username}/repos`],listForks:[`GET /repos/{owner}/{repo}/forks`],listInvitations:[`GET /repos/{owner}/{repo}/invitations`],listInvitationsForAuthenticatedUser:[`GET /user/repository_invitations`],listLanguages:[`GET /repos/{owner}/{repo}/languages`],listPagesBuilds:[`GET /repos/{owner}/{repo}/pages/builds`],listPublic:[`GET /repositories`],listPullRequestsAssociatedWithCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls`],listReleaseAssets:[`GET /repos/{owner}/{repo}/releases/{release_id}/assets`],listReleases:[`GET /repos/{owner}/{repo}/releases`],listTags:[`GET /repos/{owner}/{repo}/tags`],listTeams:[`GET /repos/{owner}/{repo}/teams`],listWebhookDeliveries:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /repos/{owner}/{repo}/hooks`],merge:[`POST /repos/{owner}/{repo}/merges`],mergeUpstream:[`POST /repos/{owner}/{repo}/merge-upstream`],pingWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeAppAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],removeCollaborator:[`DELETE /repos/{owner}/{repo}/collaborators/{username}`],removeStatusCheckContexts:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],removeStatusCheckProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],removeTeamAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],removeUserAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],renameBranch:[`POST /repos/{owner}/{repo}/branches/{branch}/rename`],replaceAllTopics:[`PUT /repos/{owner}/{repo}/topics`],requestPagesBuild:[`POST /repos/{owner}/{repo}/pages/builds`],setAdminBranchProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],setAppAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],setStatusCheckContexts:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],setTeamAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],setUserAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],testPushWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/tests`],transfer:[`POST /repos/{owner}/{repo}/transfer`],update:[`PATCH /repos/{owner}/{repo}`],updateBranchProtection:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection`],updateCommitComment:[`PATCH /repos/{owner}/{repo}/comments/{comment_id}`],updateDeploymentBranchPolicy:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],updateInformationAboutPagesSite:[`PUT /repos/{owner}/{repo}/pages`],updateInvitation:[`PATCH /repos/{owner}/{repo}/invitations/{invitation_id}`],updateOrgRuleset:[`PUT /orgs/{org}/rulesets/{ruleset_id}`],updatePullRequestReviewProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],updateRelease:[`PATCH /repos/{owner}/{repo}/releases/{release_id}`],updateReleaseAsset:[`PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}`],updateRepoRuleset:[`PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}`],updateStatusCheckPotection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`,{},{renamed:[`repos`,`updateStatusCheckProtection`]}],updateStatusCheckProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],updateWebhook:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}`],updateWebhookConfigForRepo:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config`],uploadReleaseAsset:[`POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}`,{baseUrl:`https://uploads.github.com`}]},search:{code:[`GET /search/code`],commits:[`GET /search/commits`],issuesAndPullRequests:[`GET /search/issues`,{},{deprecated:`octokit.rest.search.issuesAndPullRequests() is deprecated, see https://docs.github.com/rest/search/search#search-issues-and-pull-requests`}],labels:[`GET /search/labels`],repos:[`GET /search/repositories`],topics:[`GET /search/topics`],users:[`GET /search/users`]},secretScanning:{createPushProtectionBypass:[`POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses`],getAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],getScanHistory:[`GET /repos/{owner}/{repo}/secret-scanning/scan-history`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/secret-scanning/alerts`],listAlertsForOrg:[`GET /orgs/{org}/secret-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/secret-scanning/alerts`],listLocationsForAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations`],updateAlert:[`PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`]},securityAdvisories:{createFork:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks`],createPrivateVulnerabilityReport:[`POST /repos/{owner}/{repo}/security-advisories/reports`],createRepositoryAdvisory:[`POST /repos/{owner}/{repo}/security-advisories`],createRepositoryAdvisoryCveRequest:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve`],getGlobalAdvisory:[`GET /advisories/{ghsa_id}`],getRepositoryAdvisory:[`GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}`],listGlobalAdvisories:[`GET /advisories`],listOrgRepositoryAdvisories:[`GET /orgs/{org}/security-advisories`],listRepositoryAdvisories:[`GET /repos/{owner}/{repo}/security-advisories`],updateRepositoryAdvisory:[`PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}`]},teams:{addOrUpdateMembershipForUserInOrg:[`PUT /orgs/{org}/teams/{team_slug}/memberships/{username}`],addOrUpdateRepoPermissionsInOrg:[`PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],checkPermissionsForRepoInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],create:[`POST /orgs/{org}/teams`],createDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],createDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions`],deleteDiscussionCommentInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],deleteDiscussionInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],deleteInOrg:[`DELETE /orgs/{org}/teams/{team_slug}`],getByName:[`GET /orgs/{org}/teams/{team_slug}`],getDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],getDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],getMembershipForUserInOrg:[`GET /orgs/{org}/teams/{team_slug}/memberships/{username}`],list:[`GET /orgs/{org}/teams`],listChildInOrg:[`GET /orgs/{org}/teams/{team_slug}/teams`],listDiscussionCommentsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],listDiscussionsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions`],listForAuthenticatedUser:[`GET /user/teams`],listMembersInOrg:[`GET /orgs/{org}/teams/{team_slug}/members`],listPendingInvitationsInOrg:[`GET /orgs/{org}/teams/{team_slug}/invitations`],listReposInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos`],removeMembershipForUserInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}`],removeRepoInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],updateDiscussionCommentInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],updateDiscussionInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],updateInOrg:[`PATCH /orgs/{org}/teams/{team_slug}`]},users:{addEmailForAuthenticated:[`POST /user/emails`,{},{renamed:[`users`,`addEmailForAuthenticatedUser`]}],addEmailForAuthenticatedUser:[`POST /user/emails`],addSocialAccountForAuthenticatedUser:[`POST /user/social_accounts`],block:[`PUT /user/blocks/{username}`],checkBlocked:[`GET /user/blocks/{username}`],checkFollowingForUser:[`GET /users/{username}/following/{target_user}`],checkPersonIsFollowedByAuthenticated:[`GET /user/following/{username}`],createGpgKeyForAuthenticated:[`POST /user/gpg_keys`,{},{renamed:[`users`,`createGpgKeyForAuthenticatedUser`]}],createGpgKeyForAuthenticatedUser:[`POST /user/gpg_keys`],createPublicSshKeyForAuthenticated:[`POST /user/keys`,{},{renamed:[`users`,`createPublicSshKeyForAuthenticatedUser`]}],createPublicSshKeyForAuthenticatedUser:[`POST /user/keys`],createSshSigningKeyForAuthenticatedUser:[`POST /user/ssh_signing_keys`],deleteEmailForAuthenticated:[`DELETE /user/emails`,{},{renamed:[`users`,`deleteEmailForAuthenticatedUser`]}],deleteEmailForAuthenticatedUser:[`DELETE /user/emails`],deleteGpgKeyForAuthenticated:[`DELETE /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`deleteGpgKeyForAuthenticatedUser`]}],deleteGpgKeyForAuthenticatedUser:[`DELETE /user/gpg_keys/{gpg_key_id}`],deletePublicSshKeyForAuthenticated:[`DELETE /user/keys/{key_id}`,{},{renamed:[`users`,`deletePublicSshKeyForAuthenticatedUser`]}],deletePublicSshKeyForAuthenticatedUser:[`DELETE /user/keys/{key_id}`],deleteSocialAccountForAuthenticatedUser:[`DELETE /user/social_accounts`],deleteSshSigningKeyForAuthenticatedUser:[`DELETE /user/ssh_signing_keys/{ssh_signing_key_id}`],follow:[`PUT /user/following/{username}`],getAuthenticated:[`GET /user`],getById:[`GET /user/{account_id}`],getByUsername:[`GET /users/{username}`],getContextForUser:[`GET /users/{username}/hovercard`],getGpgKeyForAuthenticated:[`GET /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`getGpgKeyForAuthenticatedUser`]}],getGpgKeyForAuthenticatedUser:[`GET /user/gpg_keys/{gpg_key_id}`],getPublicSshKeyForAuthenticated:[`GET /user/keys/{key_id}`,{},{renamed:[`users`,`getPublicSshKeyForAuthenticatedUser`]}],getPublicSshKeyForAuthenticatedUser:[`GET /user/keys/{key_id}`],getSshSigningKeyForAuthenticatedUser:[`GET /user/ssh_signing_keys/{ssh_signing_key_id}`],list:[`GET /users`],listAttestations:[`GET /users/{username}/attestations/{subject_digest}`],listBlockedByAuthenticated:[`GET /user/blocks`,{},{renamed:[`users`,`listBlockedByAuthenticatedUser`]}],listBlockedByAuthenticatedUser:[`GET /user/blocks`],listEmailsForAuthenticated:[`GET /user/emails`,{},{renamed:[`users`,`listEmailsForAuthenticatedUser`]}],listEmailsForAuthenticatedUser:[`GET /user/emails`],listFollowedByAuthenticated:[`GET /user/following`,{},{renamed:[`users`,`listFollowedByAuthenticatedUser`]}],listFollowedByAuthenticatedUser:[`GET /user/following`],listFollowersForAuthenticatedUser:[`GET /user/followers`],listFollowersForUser:[`GET /users/{username}/followers`],listFollowingForUser:[`GET /users/{username}/following`],listGpgKeysForAuthenticated:[`GET /user/gpg_keys`,{},{renamed:[`users`,`listGpgKeysForAuthenticatedUser`]}],listGpgKeysForAuthenticatedUser:[`GET /user/gpg_keys`],listGpgKeysForUser:[`GET /users/{username}/gpg_keys`],listPublicEmailsForAuthenticated:[`GET /user/public_emails`,{},{renamed:[`users`,`listPublicEmailsForAuthenticatedUser`]}],listPublicEmailsForAuthenticatedUser:[`GET /user/public_emails`],listPublicKeysForUser:[`GET /users/{username}/keys`],listPublicSshKeysForAuthenticated:[`GET /user/keys`,{},{renamed:[`users`,`listPublicSshKeysForAuthenticatedUser`]}],listPublicSshKeysForAuthenticatedUser:[`GET /user/keys`],listSocialAccountsForAuthenticatedUser:[`GET /user/social_accounts`],listSocialAccountsForUser:[`GET /users/{username}/social_accounts`],listSshSigningKeysForAuthenticatedUser:[`GET /user/ssh_signing_keys`],listSshSigningKeysForUser:[`GET /users/{username}/ssh_signing_keys`],setPrimaryEmailVisibilityForAuthenticated:[`PATCH /user/email/visibility`,{},{renamed:[`users`,`setPrimaryEmailVisibilityForAuthenticatedUser`]}],setPrimaryEmailVisibilityForAuthenticatedUser:[`PATCH /user/email/visibility`],unblock:[`DELETE /user/blocks/{username}`],unfollow:[`DELETE /user/following/{username}`],updateAuthenticated:[`PATCH /user`]}},IX=new Map;for(let[e,t]of Object.entries(FX))for(let[n,r]of Object.entries(t)){let[t,i,a]=r,[o,s]=t.split(/ /),c=Object.assign({method:o,url:s},i);IX.has(e)||IX.set(e,new Map),IX.get(e).set(n,{scope:e,methodName:n,endpointDefaults:c,decorations:a})}var LX={has({scope:e},t){return IX.get(e).has(t)},getOwnPropertyDescriptor(e,t){return{value:this.get(e,t),configurable:!0,writable:!0,enumerable:!0}},defineProperty(e,t,n){return Object.defineProperty(e.cache,t,n),!0},deleteProperty(e,t){return delete e.cache[t],!0},ownKeys({scope:e}){return[...IX.get(e).keys()]},set(e,t,n){return e.cache[t]=n},get({octokit:e,scope:t,cache:n},r){if(n[r])return n[r];let i=IX.get(t).get(r);if(!i)return;let{endpointDefaults:a,decorations:o}=i;return o?n[r]=zX(e,t,r,a,o):n[r]=e.request.defaults(a),n[r]}};function RX(e){let t={};for(let n of IX.keys())t[n]=new Proxy({octokit:e,scope:n,cache:{}},LX);return t}function zX(e,t,n,r,i){let a=e.request.defaults(r);function o(...r){let o=a.endpoint.merge(...r);if(i.mapToData)return o=Object.assign({},o,{data:o[i.mapToData],[i.mapToData]:void 0}),a(o);if(i.renamed){let[r,a]=i.renamed;e.log.warn(`octokit.${t}.${n}() has been renamed to octokit.${r}.${a}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){let o=a.endpoint.merge(...r);for(let[r,a]of Object.entries(i.renamedParameters))r in o&&(e.log.warn(`"${r}" parameter is deprecated for "octokit.${t}.${n}()". Use "${a}" instead`),a in o||(o[a]=o[r]),delete o[r]);return a(o)}return a(...r)}return Object.assign(o,a)}function BX(e){return{rest:RX(e)}}BX.VERSION=PX;function VX(e){let t=RX(e);return{...t,rest:t}}VX.VERSION=PX;var HX=n(((e,t)=>{(function(n,r){typeof e==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):n.Bottleneck=r()})(e,(function(){var e=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{};function t(e){return e&&e.default||e}var n={load:function(e,t,n={}){var r,i;for(r in t)i=t[r],n[r]=e[r]??i;return n},overwrite:function(e,t,n={}){var r,i;for(r in e)i=e[r],t[r]!==void 0&&(n[r]=i);return n}},r=class{constructor(e,t){this.incr=e,this.decr=t,this._first=null,this._last=null,this.length=0}push(e){var t;this.length++,typeof this.incr==`function`&&this.incr(),t={value:e,prev:this._last,next:null},this._last==null?this._first=this._last=t:(this._last.next=t,this._last=t)}shift(){var e;if(this._first!=null)return this.length--,typeof this.decr==`function`&&this.decr(),e=this._first.value,(this._first=this._first.next)==null?this._last=null:this._first.prev=null,e}first(){if(this._first!=null)return this._first.value}getArray(){for(var e=this._first,t,n=[];e!=null;)n.push((t=e,e=e.next,t.value));return n}forEachShift(e){for(var t=this.shift();t!=null;)e(t),t=this.shift()}debug(){for(var e=this._first,t,n=[];e!=null;)n.push((t=e,e=e.next,{value:t.value,prev:t.prev?.value,next:t.next?.value}));return n}},i=class{constructor(e){if(this.instance=e,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw Error(`An Emitter already exists for this object`);this.instance.on=(e,t)=>this._addListener(e,`many`,t),this.instance.once=(e,t)=>this._addListener(e,`once`,t),this.instance.removeAllListeners=(e=null)=>e==null?this._events={}:delete this._events[e]}_addListener(e,t,n){var r;return(r=this._events)[e]??(r[e]=[]),this._events[e].push({cb:n,status:t}),this.instance}listenerCount(e){return this._events[e]==null?0:this._events[e].length}async trigger(e,...t){var n,r;try{return e!==`debug`&&this.trigger(`debug`,`Event triggered: ${e}`,t),this._events[e]==null?void 0:(this._events[e]=this._events[e].filter(function(e){return e.status!==`none`}),r=this._events[e].map(async e=>{var n,r;if(e.status!==`none`){e.status===`once`&&(e.status=`none`);try{return r=typeof e.cb==`function`?e.cb(...t):void 0,typeof r?.then==`function`?await r:r}catch(e){return n=e,this.trigger(`error`,n),null}}}),(await Promise.all(r)).find(function(e){return e!=null}))}catch(e){return n=e,this.trigger(`error`,n),null}}},a=r,o=i,s=class{constructor(e){this.Events=new o(this),this._length=0,this._lists=(function(){var t,n,r=[];for(t=1,n=e;1<=n?t<=n:t>=n;1<=n?++t:--t)r.push(new a((()=>this.incr()),(()=>this.decr())));return r}).call(this)}incr(){if(this._length++===0)return this.Events.trigger(`leftzero`)}decr(){if(--this._length===0)return this.Events.trigger(`zero`)}push(e){return this._lists[e.options.priority].push(e)}queued(e){return e==null?this._length:this._lists[e].length}shiftAll(e){return this._lists.forEach(function(t){return t.forEachShift(e)})}getFirst(e=this._lists){var t,n,r;for(t=0,n=e.length;t<n;t++)if(r=e[t],r.length>0)return r;return[]}shiftLastFrom(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}},c=class extends Error{},l,u,d,f=10,p;u=5,p=n,l=c,d=class{constructor(e,t,n,r,i,a,o,s){this.task=e,this.args=t,this.rejectOnDrop=i,this.Events=a,this._states=o,this.Promise=s,this.options=p.load(n,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((e,t)=>{this._resolve=e,this._reject=t}),this.retryCount=0}_sanitizePriority(e){var t=~~e===e?e:u;return t<0?0:t>f-1?f-1:t}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:e,message:t=`This job has been dropped by Bottleneck`}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(e??new l(t)),this.Events.trigger(`dropped`,{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(e){var t=this._states.jobStatus(this.options.id);if(!(t===e||e===`DONE`&&t===null))throw new l(`Invalid job status ${t}, expected ${e}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger(`received`,{args:this.args,options:this.options})}doQueue(e,t){return this._assertStatus(`RECEIVED`),this._states.next(this.options.id),this.Events.trigger(`queued`,{args:this.args,options:this.options,reachedHWM:e,blocked:t})}doRun(){return this.retryCount===0?(this._assertStatus(`QUEUED`),this._states.next(this.options.id)):this._assertStatus(`EXECUTING`),this.Events.trigger(`scheduled`,{args:this.args,options:this.options})}async doExecute(e,t,n,r){var i,a,o;this.retryCount===0?(this._assertStatus(`RUNNING`),this._states.next(this.options.id)):this._assertStatus(`EXECUTING`),a={args:this.args,options:this.options,retryCount:this.retryCount},this.Events.trigger(`executing`,a);try{if(o=await(e==null?this.task(...this.args):e.schedule(this.options,this.task,...this.args)),t())return this.doDone(a),await r(this.options,a),this._assertStatus(`DONE`),this._resolve(o)}catch(e){return i=e,this._onFailure(i,a,t,n,r)}}doExpire(e,t,n){var r,i;return this._states.jobStatus(this.options.id===`RUNNING`)&&this._states.next(this.options.id),this._assertStatus(`EXECUTING`),i={args:this.args,options:this.options,retryCount:this.retryCount},r=new l(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(r,i,e,t,n)}async _onFailure(e,t,n,r,i){var a,o;if(n())return a=await this.Events.trigger(`failed`,e,t),a==null?(this.doDone(t),await i(this.options,t),this._assertStatus(`DONE`),this._reject(e)):(o=~~a,this.Events.trigger(`retry`,`Retrying ${this.options.id} after ${o} ms`,t),this.retryCount++,r(o))}doDone(e){return this._assertStatus(`EXECUTING`),this._states.next(this.options.id),this.Events.trigger(`done`,e)}};var m=d,h,g,_=n;h=c,g=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.clientId=this.instance._randomIndex(),_.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var e;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(e=this.heartbeat=setInterval(()=>{var e,t,n,r=Date.now(),i;if(this.storeOptions.reservoirRefreshInterval!=null&&r>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=r,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&r>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval&&({reservoirIncreaseAmount:e,reservoirIncreaseMaximum:n,reservoir:i}=this.storeOptions,this._lastReservoirIncrease=r,t=n==null?e:Math.min(e,n-i),t>0))return this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity())},this.heartbeatInterval)).unref==`function`?e.unref():void 0:clearInterval(this.heartbeat)}async __publish__(e){return await this.yieldLoop(),this.instance.Events.trigger(`message`,e.toString())}async __disconnect__(e){return await this.yieldLoop(),clearInterval(this.heartbeat),this.Promise.resolve()}yieldLoop(e=0){return new this.Promise(function(t,n){return setTimeout(t,e)})}computePenalty(){return this.storeOptions.penalty??(15*this.storeOptions.minTime||5e3)}async __updateSettings__(e){return await this.yieldLoop(),_.overwrite(e,e,this.storeOptions),this._startHeartbeat(),this.instance._drainAll(this.computeCapacity()),!0}async __running__(){return await this.yieldLoop(),this._running}async __queued__(){return await this.yieldLoop(),this.instance.queued()}async __done__(){return await this.yieldLoop(),this._done}async __groupCheck__(e){return await this.yieldLoop(),this._nextRequest+this.timeout<e}computeCapacity(){var e,t;return{maxConcurrent:e,reservoir:t}=this.storeOptions,e!=null&&t!=null?Math.min(e-this._running,t):e==null?t??null:e-this._running}conditionsCheck(e){var t=this.computeCapacity();return t==null||e<=t}async __incrementReservoir__(e){var t;return await this.yieldLoop(),t=this.storeOptions.reservoir+=e,this.instance._drainAll(this.computeCapacity()),t}async __currentReservoir__(){return await this.yieldLoop(),this.storeOptions.reservoir}isBlocked(e){return this._unblockTime>=e}check(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}async __check__(e){var t;return await this.yieldLoop(),t=Date.now(),this.check(e,t)}async __register__(e,t,n){var r,i;return await this.yieldLoop(),r=Date.now(),this.conditionsCheck(t)?(this._running+=t,this.storeOptions.reservoir!=null&&(this.storeOptions.reservoir-=t),i=Math.max(this._nextRequest-r,0),this._nextRequest=r+i+this.storeOptions.minTime,{success:!0,wait:i,reservoir:this.storeOptions.reservoir}):{success:!1}}strategyIsBlock(){return this.storeOptions.strategy===3}async __submit__(e,t){var n,r,i;if(await this.yieldLoop(),this.storeOptions.maxConcurrent!=null&&t>this.storeOptions.maxConcurrent)throw new h(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${this.storeOptions.maxConcurrent}`);return r=Date.now(),i=this.storeOptions.highWater!=null&&e===this.storeOptions.highWater&&!this.check(t,r),n=this.strategyIsBlock()&&(i||this.isBlocked(r)),n&&(this._unblockTime=r+this.computePenalty(),this._nextRequest=this._unblockTime+this.storeOptions.minTime,this.instance._dropAllQueued()),{reachedHWM:i,blocked:n,strategy:this.storeOptions.strategy}}async __free__(e,t){return await this.yieldLoop(),this._running-=t,this._done+=t,this.instance._drainAll(this.computeCapacity()),{running:this._running}}};var v=g,y=c,b=class{constructor(e){this.status=e,this._jobs={},this.counts=this.status.map(function(){return 0})}next(e){var t=this._jobs[e],n=t+1;if(t!=null&&n<this.status.length)return this.counts[t]--,this.counts[n]++,this._jobs[e]++;if(t!=null)return this.counts[t]--,delete this._jobs[e]}start(e){var t=0;return this._jobs[e]=t,this.counts[t]++}remove(e){var t=this._jobs[e];return t!=null&&(this.counts[t]--,delete this._jobs[e]),t!=null}jobStatus(e){return this.status[this._jobs[e]]??null}statusJobs(e){var t,n,r,i,a;if(e!=null){if(n=this.status.indexOf(e),n<0)throw new y(`status must be one of ${this.status.join(`, `)}`);for(t in r=this._jobs,i=[],r)a=r[t],a===n&&i.push(t);return i}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce(((e,t,n)=>(e[this.status[n]]=t,e)),{})}},x=r,S=class{constructor(e,t){this.schedule=this.schedule.bind(this),this.name=e,this.Promise=t,this._running=0,this._queue=new x}isEmpty(){return this._queue.length===0}async _tryToRun(){var e,t,n,r,i,a,o;if(this._running<1&&this._queue.length>0)return this._running++,{task:o,args:e,resolve:i,reject:r}=this._queue.shift(),t=await(async function(){try{return a=await o(...e),function(){return i(a)}}catch(e){return n=e,function(){return r(n)}}})(),this._running--,this._tryToRun(),t()}schedule(e,...t){var n,r,i=r=null;return n=new this.Promise(function(e,t){return i=e,r=t}),this._queue.push({task:e,args:t,resolve:i,reject:r}),this._tryToRun(),n}},C=`2.19.5`,w={version:C},T=Object.freeze({version:C,default:w}),E=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),D=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),O=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),k,A,j,M,N,P=n;k=i,M=E,j=D,N=O,A=(function(){class e{constructor(e={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=e,P.load(this.limiterOptions,this.defaults,this),this.Events=new k(this),this.instances={},this.Bottleneck=R,this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection??(this.limiterOptions.datastore===`redis`?this.connection=new M(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore===`ioredis`&&(this.connection=new j(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(e=``){return this.instances[e]??(()=>{var t=this.instances[e]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${e}`,timeout:this.timeout,connection:this.connection}));return this.Events.trigger(`created`,t,e),t})()}async deleteKey(e=``){var t,n=this.instances[e];return this.connection&&(t=await this.connection.__runCommand__([`del`,...N.allKeys(`${this.id}-${e}`)])),n!=null&&(delete this.instances[e],await n.disconnect()),n!=null||t>0}limiters(){var e,t=this.instances,n=[],r;for(e in t)r=t[e],n.push({key:e,limiter:r});return n}keys(){return Object.keys(this.instances)}async clusterKeys(){var e,t,n,r,i,a,o,s,c;if(this.connection==null)return this.Promise.resolve(this.keys());for(a=[],e=null,c=`b_${this.id}-`.length,t=9;e!==0;)for([s,n]=await this.connection.__runCommand__([`scan`,e??0,`match`,`b_${this.id}-*_settings`,`count`,1e4]),e=~~s,r=0,o=n.length;r<o;r++)i=n[r],a.push(i.slice(c,-t));return a}_startAutoCleanup(){var e;return clearInterval(this.interval),typeof(e=this.interval=setInterval(async()=>{var e,t,n,r,i=Date.now(),a;for(t in n=this.instances,r=[],n){a=n[t];try{await a._store.__groupCheck__(i)?r.push(this.deleteKey(t)):r.push(void 0)}catch(t){e=t,r.push(a.Events.trigger(`error`,e))}}return r},this.timeout/2)).unref==`function`?e.unref():void 0}updateSettings(e={}){if(P.overwrite(e,this.defaults,this),P.overwrite(e,e,this.limiterOptions),e.timeout!=null)return this._startAutoCleanup()}disconnect(e=!0){if(!this.sharedConnection)return this.connection?.disconnect(e)}}return e.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:`group-key`},e}).call(e);var F=A,ee,I,L=n;I=i,ee=(function(){class e{constructor(e={}){this.options=e,L.load(this.options,this.defaults,this),this.Events=new I(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((e,t)=>this._resolve=e)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger(`batch`,this._arr),this._arr=[],this._resetPromise()}add(e){var t;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),t}}return e.prototype.defaults={maxTime:null,maxSize:null,Promise},e}).call(e);var te=ee,ne=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),re=t(T),ie,ae,oe,se,ce,le,ue,de,fe,pe,me,he=[].splice;le=10,ae=5,me=n,ue=s,se=m,ce=v,de=ne,oe=i,fe=b,pe=S,ie=(function(){class e{constructor(t={},...n){var r,i;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(t,n),me.load(t,this.instanceDefaults,this),this._queues=new ue(le),this._scheduled={},this._states=new fe([`RECEIVED`,`QUEUED`,`RUNNING`,`EXECUTING`].concat(this.trackDoneStatus?[`DONE`]:[])),this._limiter=null,this.Events=new oe(this),this._submitLock=new pe(`submit`,this.Promise),this._registerLock=new pe(`register`,this.Promise),i=me.load(t,this.storeDefaults,{}),this._store=(function(){if(this.datastore===`redis`||this.datastore===`ioredis`||this.connection!=null)return r=me.load(t,this.redisStoreDefaults,{}),new de(this,i,r);if(this.datastore===`local`)return r=me.load(t,this.localStoreDefaults,{}),new ce(this,i,r);throw new e.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on(`leftzero`,()=>{var e;return(e=this._store.heartbeat)==null?void 0:typeof e.ref==`function`?e.ref():void 0}),this._queues.on(`zero`,()=>{var e;return(e=this._store.heartbeat)==null?void 0:typeof e.unref==`function`?e.unref():void 0})}_validateOptions(t,n){if(!(typeof t==`object`&&t&&n.length===0))throw new e.prototype.BottleneckError(`Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.`)}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(e){return this._store.__publish__(e)}disconnect(e=!0){return this._store.__disconnect__(e)}chain(e){return this._limiter=e,this}queued(e){return this._queues.queued(e)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(e){return this._states.jobStatus(e)}jobs(e){return this._states.statusJobs(e)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(e=1){return this._store.__check__(e)}_clearGlobalState(e){return this._scheduled[e]==null?!1:(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}async _free(e,t,n,r){var i,a;try{if({running:a}=await this._store.__free__(e,n.weight),this.Events.trigger(`debug`,`Freed ${n.id}`,r),a===0&&this.empty())return this.Events.trigger(`idle`)}catch(e){return i=e,this.Events.trigger(`error`,i)}}_run(e,t,n){var r,i,a;return t.doRun(),r=this._clearGlobalState.bind(this,e),a=this._run.bind(this,e,t),i=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout(()=>t.doExecute(this._limiter,r,a,i),n),expiration:t.options.expiration==null?void 0:setTimeout(function(){return t.doExpire(r,a,i)},n+t.options.expiration),job:t}}_drainOne(e){return this._registerLock.schedule(()=>{var t,n,r,i,a;return this.queued()===0||(a=this._queues.getFirst(),{options:i,args:t}=r=a.first(),e!=null&&i.weight>e)?this.Promise.resolve(null):(this.Events.trigger(`debug`,`Draining ${i.id}`,{args:t,options:i}),n=this._randomIndex(),this._store.__register__(n,i.weight,i.expiration).then(({success:e,wait:o,reservoir:s})=>{var c;return this.Events.trigger(`debug`,`Drained ${i.id}`,{success:e,args:t,options:i}),e?(a.shift(),c=this.empty(),c&&this.Events.trigger(`empty`),s===0&&this.Events.trigger(`depleted`,c),this._run(n,r,o),this.Promise.resolve(i.weight)):this.Promise.resolve(null)}))})}_drainAll(e,t=0){return this._drainOne(e).then(n=>{var r;return n==null?this.Promise.resolve(t):(r=e==null?e:e-n,this._drainAll(r,t+n))}).catch(e=>this.Events.trigger(`error`,e))}_dropAllQueued(e){return this._queues.shiftAll(function(t){return t.doDrop({message:e})})}stop(t={}){var n,r;return t=me.load(t,this.stopDefaults),r=e=>{var t=()=>{var t=this._states.counts;return t[0]+t[1]+t[2]+t[3]===e};return new this.Promise((e,n)=>t()?e():this.on(`done`,()=>{if(t())return this.removeAllListeners(`done`),e()}))},n=t.dropWaitingJobs?(this._run=function(e,n){return n.doDrop({message:t.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var e,n=this._scheduled,i;for(e in n)i=n[e],this.jobStatus(i.job.options.id)===`RUNNING`&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:t.dropErrorMessage}));return this._dropAllQueued(t.dropErrorMessage),r(0)}))):this.schedule({priority:le-1,weight:0},()=>r(1)),this._receive=function(n){return n._reject(new e.prototype.BottleneckError(t.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new e.prototype.BottleneckError(`stop() has already been called`)),n}async _addToQueue(t){var n,r,i,a,o,s,c;({args:n,options:a}=t);try{({reachedHWM:o,blocked:r,strategy:c}=await this._store.__submit__(this.queued(),a.weight))}catch(e){return i=e,this.Events.trigger(`debug`,`Could not queue ${a.id}`,{args:n,options:a,error:i}),t.doDrop({error:i}),!1}return r?(t.doDrop(),!0):o&&(s=c===e.prototype.strategy.LEAK?this._queues.shiftLastFrom(a.priority):c===e.prototype.strategy.OVERFLOW_PRIORITY?this._queues.shiftLastFrom(a.priority+1):c===e.prototype.strategy.OVERFLOW?t:void 0,s?.doDrop(),s==null||c===e.prototype.strategy.OVERFLOW)?(s??t.doDrop(),o):(t.doQueue(o,r),this._queues.push(t),await this._drainAll(),o)}_receive(t){return this._states.jobStatus(t.options.id)==null?(t.doReceive(),this._submitLock.schedule(this._addToQueue,t)):(t._reject(new e.prototype.BottleneckError(`A job with the same id already exists (id=${t.options.id})`)),!1)}submit(...e){var t,n,r,i,a,o,s;return typeof e[0]==`function`?(a=e,[n,...e]=a,[t]=he.call(e,-1),i=me.load({},this.jobDefaults)):(o=e,[i,n,...e]=o,[t]=he.call(e,-1),i=me.load(i,this.jobDefaults)),s=(...e)=>new this.Promise(function(t,r){return n(...e,function(...e){return(e[0]==null?t:r)(e)})}),r=new se(s,e,i,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),r.promise.then(function(e){return typeof t==`function`?t(...e):void 0}).catch(function(e){return Array.isArray(e)?typeof t==`function`?t(...e):void 0:typeof t==`function`?t(e):void 0}),this._receive(r)}schedule(...e){var t,n,r;return typeof e[0]==`function`?([r,...e]=e,n={}):[n,r,...e]=e,t=new se(r,e,n,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(t),t.promise}wrap(e){var t=this.schedule.bind(this),n=function(...n){return t(e.bind(this),...n)};return n.withOptions=function(n,...r){return t(n,e,...r)},n}async updateSettings(e={}){return await this._store.__updateSettings__(me.overwrite(e,this.storeDefaults)),me.overwrite(e,this.instanceDefaults,this),this}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(e=0){return this._store.__incrementReservoir__(e)}}return e.default=e,e.Events=oe,e.version=e.prototype.version=re.version,e.strategy=e.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},e.BottleneckError=e.prototype.BottleneckError=c,e.Group=e.prototype.Group=F,e.RedisConnection=e.prototype.RedisConnection=E,e.IORedisConnection=e.prototype.IORedisConnection=D,e.Batcher=e.prototype.Batcher=te,e.prototype.jobDefaults={priority:ae,weight:1,expiration:null,id:`<no-id>`},e.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:e.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},e.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},e.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},e.prototype.instanceDefaults={datastore:`local`,connection:null,id:`<no-id>`,rejectOnDrop:!0,trackDoneStatus:!1,Promise},e.prototype.stopDefaults={enqueueErrorMessage:`This limiter has been stopped and cannot accept new jobs.`,dropWaitingJobs:!0,dropErrorMessage:`This limiter has been stopped.`},e}).call(e);var R=ie;return R}))})),UX=t(HX(),1),WX=`0.0.0-development`;async function GX(e,t,n,r){if(!n.request||!n.request.request)throw n;if(n.status>=400&&!e.doNotRetry.includes(n.status)){let i=r.request.retries==null?e.retries:r.request.retries,a=((r.request.retryCount||0)+1)**2;throw t.retry.retryRequest(n,i,a)}throw n}async function KX(e,t,n,r){let i=new UX.default;return i.on(`failed`,function(t,n){let i=~~t.request.request.retries,a=~~t.request.request.retryAfter;if(r.request.retryCount=n.retryCount+1,i>n.retryCount)return a*e.retryAfterBaseValue}),i.schedule(qX.bind(null,e,t,n),r)}async function qX(e,t,n,r){let i=await n(n,r);return i.data&&i.data.errors&&i.data.errors.length>0&&/Something went wrong while executing your query/.test(i.data.errors[0].message)?GX(e,t,new jY(i.data.errors[0].message,500,{request:r,response:i}),r):i}function JX(e,t){let n=Object.assign({enabled:!0,retryAfterBaseValue:1e3,doNotRetry:[400,401,403,404,410,422,451],retries:3},t.retry);return n.enabled&&(e.hook.error(`request`,GX.bind(null,n,e)),e.hook.wrap(`request`,KX.bind(null,n,e))),{retry:{retryRequest:(e,t,n)=>(e.request.request=Object.assign({},e.request.request,{retries:t,retryAfter:n}),e)}}}JX.VERSION=WX;var YX=t(HX(),1),XX=`0.0.0-development`,ZX=()=>Promise.resolve();function QX(e,t,n){return e.retryLimiter.schedule($X,e,t,n)}async function $X(e,t,n){let{pathname:r}=new URL(n.url,`http://github.test`),i=eZ(n.method,r),a=!i&&n.method!==`GET`&&n.method!==`HEAD`,o=n.method===`GET`&&r.startsWith(`/search/`),s=r.startsWith(`/graphql`),c=~~t.retryCount>0?{priority:0,weight:0}:{};e.clustering&&(c.expiration=1e3*60),(a||s)&&await e.write.key(e.id).schedule(c,ZX),a&&e.triggersNotification(r)&&await e.notifications.key(e.id).schedule(c,ZX),o&&await e.search.key(e.id).schedule(c,ZX);let l=(i?e.auth:e.global).key(e.id).schedule(c,t,n);if(s){let e=await l;if(e.data.errors!=null&&e.data.errors.some(e=>e.type===`RATE_LIMITED`))throw Object.assign(Error(`GraphQL Rate Limit Exceeded`),{response:e,data:e.data})}return l}function eZ(e,t){return e===`PATCH`&&/^\/applications\/[^/]+\/token\/scoped$/.test(t)||e===`POST`&&(/^\/applications\/[^/]+\/token$/.test(t)||/^\/app\/installations\/[^/]+\/access_tokens$/.test(t)||t===`/login/oauth/access_token`)}var tZ=[`/orgs/{org}/invitations`,`/orgs/{org}/invitations/{invitation_id}`,`/orgs/{org}/teams/{team_slug}/discussions`,`/orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`,`/repos/{owner}/{repo}/collaborators/{username}`,`/repos/{owner}/{repo}/commits/{commit_sha}/comments`,`/repos/{owner}/{repo}/issues`,`/repos/{owner}/{repo}/issues/{issue_number}/comments`,`/repos/{owner}/{repo}/issues/{issue_number}/sub_issue`,`/repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`,`/repos/{owner}/{repo}/pulls`,`/repos/{owner}/{repo}/pulls/{pull_number}/comments`,`/repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`,`/repos/{owner}/{repo}/pulls/{pull_number}/merge`,`/repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`,`/repos/{owner}/{repo}/pulls/{pull_number}/reviews`,`/repos/{owner}/{repo}/releases`,`/teams/{team_id}/discussions`,`/teams/{team_id}/discussions/{discussion_number}/comments`];function nZ(e){let t=`^(?:${e.map(e=>e.split(`/`).map(e=>e.startsWith(`{`)?`(?:.+?)`:e).join(`/`)).map(e=>`(?:${e})`).join(`|`)})[^/]*$`;return new RegExp(t,`i`)}var rZ=nZ(tZ),iZ=rZ.test.bind(rZ),aZ={},oZ=function(e,t){aZ.global=new e.Group({id:`octokit-global`,maxConcurrent:10,...t}),aZ.auth=new e.Group({id:`octokit-auth`,maxConcurrent:1,...t}),aZ.search=new e.Group({id:`octokit-search`,maxConcurrent:1,minTime:2e3,...t}),aZ.write=new e.Group({id:`octokit-write`,maxConcurrent:1,minTime:1e3,...t}),aZ.notifications=new e.Group({id:`octokit-notifications`,maxConcurrent:1,minTime:3e3,...t})};function sZ(e,t){let{enabled:n=!0,Bottleneck:r=YX.default,id:i=`no-id`,timeout:a=1e3*60*2,connection:o}=t.throttle||{};if(!n)return{};let s={timeout:a};o!==void 0&&(s.connection=o),aZ.global??oZ(r,s);let c=Object.assign({clustering:o!=null,triggersNotification:iZ,fallbackSecondaryRateRetryAfter:60,retryAfterBaseValue:1e3,retryLimiter:new r,id:i,...aZ},t.throttle);if(typeof c.onSecondaryRateLimit!=`function`||typeof c.onRateLimit!=`function`)throw Error(`octokit/plugin-throttling error:
        You must pass the onSecondaryRateLimit and onRateLimit error handlers.
        See https://octokit.github.io/rest.js/#throttling

        const octokit = new Octokit({
          throttle: {
            onSecondaryRateLimit: (retryAfter, options) => {/* ... */},
            onRateLimit: (retryAfter, options) => {/* ... */}
          }
        })
    `);let l={},u=new r.Events(l);return l.on(`secondary-limit`,c.onSecondaryRateLimit),l.on(`rate-limit`,c.onRateLimit),l.on(`error`,t=>e.log.warn(`Error in throttling-plugin limit handler`,t)),c.retryLimiter.on(`failed`,async function(t,n){let[r,i,a]=n.args,{pathname:o}=new URL(a.url,`http://github.test`);if(!(o.startsWith(`/graphql`)&&t.status!==401||t.status===403||t.status===429))return;let s=~~i.retryCount;i.retryCount=s,a.request.retryCount=s;let{wantRetry:c,retryAfter:l=0}=await async function(){if(/\bsecondary rate\b/i.test(t.message)){let n=Number(t.response.headers[`retry-after`])||r.fallbackSecondaryRateRetryAfter;return{wantRetry:await u.trigger(`secondary-limit`,n,a,e,s),retryAfter:n}}if(t.response.headers!=null&&t.response.headers[`x-ratelimit-remaining`]===`0`||(t.response.data?.errors??[]).some(e=>e.type===`RATE_LIMITED`)){let n=new Date(~~t.response.headers[`x-ratelimit-reset`]*1e3).getTime(),r=Math.max(Math.ceil((n-Date.now())/1e3)+1,0);return{wantRetry:await u.trigger(`rate-limit`,r,a,e,s),retryAfter:r}}return{}}();if(c)return i.retryCount++,l*r.retryAfterBaseValue}),e.hook.wrap(`request`,QX.bind(null,c)),{}}sZ.VERSION=XX,sZ.triggersNotification=iZ;function cZ(e){let t=e.clientType||`oauth-app`,n=e.baseUrl||`https://github.com`,r={clientType:t,allowSignup:e.allowSignup!==!1,clientId:e.clientId,login:e.login||null,redirectUrl:e.redirectUrl||null,state:e.state||Math.random().toString(36).substr(2),url:``};if(t===`oauth-app`){let t=`scopes`in e?e.scopes:[];r.scopes=typeof t==`string`?t.split(/[,\s]+/).filter(Boolean):t}return r.url=lZ(`${n}/login/oauth/authorize`,r),r}function lZ(e,t){let n={allowSignup:`allow_signup`,clientId:`client_id`,login:`login`,redirectUrl:`redirect_uri`,scopes:`scope`,state:`state`},r=e;return Object.keys(n).filter(e=>t[e]!==null).filter(e=>e===`scopes`?t.clientType===`github-app`?!1:!Array.isArray(t[e])||t[e].length>0:!0).map(e=>[n[e],`${t[e]}`]).forEach(([e,t],n)=>{r+=n===0?`?`:`&`,r+=`${e}=${encodeURIComponent(t)}`}),r}function uZ(e){let t=e.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(t.baseUrl)?`https://github.com`:t.baseUrl.replace(`/api/v3`,``)}async function dZ(e,t,n){let r={baseUrl:uZ(e),headers:{accept:`application/json`},...n},i=await e(t,r);if(`error`in i.data){let n=new jY(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:e.endpoint.merge(t,r)});throw n.response=i,n}return i}function fZ({request:e=BY,...t}){let n=uZ(e);return cZ({...t,baseUrl:n})}async function pZ(e){let t=await dZ(e.request||BY,`POST /login/oauth/access_token`,{client_id:e.clientId,client_secret:e.clientSecret,code:e.code,redirect_uri:e.redirectUrl}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(e.clientType===`github-app`){if(`refresh_token`in t.data){let e=new Date(t.headers.date).getTime();n.refreshToken=t.data.refresh_token,n.expiresAt=mZ(e,t.data.expires_in),n.refreshTokenExpiresAt=mZ(e,t.data.refresh_token_expires_in)}delete n.scopes}return{...t,authentication:n}}function mZ(e,t){return new Date(e+t*1e3).toISOString()}async function hZ(e){let t=e.request||BY,n={client_id:e.clientId};return`scopes`in e&&Array.isArray(e.scopes)&&(n.scope=e.scopes.join(` `)),dZ(t,`POST /login/device/code`,n)}async function gZ(e){let t=await dZ(e.request||BY,`POST /login/oauth/access_token`,{client_id:e.clientId,device_code:e.code,grant_type:`urn:ietf:params:oauth:grant-type:device_code`}),n={clientType:e.clientType,clientId:e.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(`clientSecret`in e&&(n.clientSecret=e.clientSecret),e.clientType===`github-app`){if(`refresh_token`in t.data){let e=new Date(t.headers.date).getTime();n.refreshToken=t.data.refresh_token,n.expiresAt=_Z(e,t.data.expires_in),n.refreshTokenExpiresAt=_Z(e,t.data.refresh_token_expires_in)}delete n.scopes}return{...t,authentication:n}}function _Z(e,t){return new Date(e+t*1e3).toISOString()}async function vZ(e){let t=await(e.request||BY)(`POST /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.token,scopes:t.data.scopes};return t.data.expires_at&&(n.expiresAt=t.data.expires_at),e.clientType===`github-app`&&delete n.scopes,{...t,authentication:n}}async function yZ(e){let t=await dZ(e.request||BY,`POST /login/oauth/access_token`,{client_id:e.clientId,client_secret:e.clientSecret,grant_type:`refresh_token`,refresh_token:e.refreshToken}),n=new Date(t.headers.date).getTime(),r={clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:bZ(n,t.data.expires_in),refreshTokenExpiresAt:bZ(n,t.data.refresh_token_expires_in)};return{...t,authentication:r}}function bZ(e,t){return new Date(e+t*1e3).toISOString()}async function xZ(e){let{request:t,clientType:n,clientId:r,clientSecret:i,token:a,...o}=e,s=await(e.request||BY)(`POST /applications/{client_id}/token/scoped`,{headers:{authorization:`basic ${btoa(`${r}:${i}`)}`},client_id:r,access_token:a,...o}),c=Object.assign({clientType:n,clientId:r,clientSecret:i,token:s.data.token},s.data.expires_at?{expiresAt:s.data.expires_at}:{});return{...s,authentication:c}}async function SZ(e){let t=await(e.request||BY)(`PATCH /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.token,scopes:t.data.scopes};return t.data.expires_at&&(n.expiresAt=t.data.expires_at),e.clientType===`github-app`&&delete n.scopes,{...t,authentication:n}}async function CZ(e){return(e.request||BY)(`DELETE /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token})}async function wZ(e){return(e.request||BY)(`DELETE /applications/{client_id}/grant`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token})}async function TZ(e,t){let n=EZ(e,t.auth);if(n)return n;let{data:r}=await hZ({clientType:e.clientType,clientId:e.clientId,request:t.request||e.request,scopes:t.auth.scopes||e.scopes});await e.onVerification(r);let i=await OZ(t.request||e.request,e.clientId,e.clientType,r);return e.authentication=i,i}function EZ(e,t){if(t.refresh===!0||!e.authentication)return!1;if(e.clientType===`github-app`)return e.authentication;let n=e.authentication;return(`scopes`in t&&t.scopes||e.scopes).join(` `)===n.scopes.join(` `)?n:!1}async function DZ(e){await new Promise(t=>setTimeout(t,e*1e3))}async function OZ(e,t,n,r){try{let i={clientId:t,request:e,code:r.device_code},{authentication:a}=n===`oauth-app`?await gZ({...i,clientType:`oauth-app`}):await gZ({...i,clientType:`github-app`});return{type:`token`,tokenType:`oauth`,...a}}catch(i){if(!i.response)throw i;let a=i.response.data.error;if(a===`authorization_pending`)return await DZ(r.interval),OZ(e,t,n,r);if(a===`slow_down`)return await DZ(r.interval+7),OZ(e,t,n,r);throw i}}async function kZ(e,t){return TZ(e,{auth:t})}async function AZ(e,t,n,r){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);let{token:a}=await TZ(e,{request:t,auth:{type:`oauth`}});return i.headers.authorization=`token ${a}`,t(i)}var jZ=`0.0.0-development`;function MZ(e){let t=e.request||BY.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${jZ} ${XJ()}`}}),{request:n=t,...r}=e,i=e.clientType===`github-app`?{...r,clientType:`github-app`,request:n}:{...r,clientType:`oauth-app`,request:n,scopes:e.scopes||[]};if(!e.clientId)throw Error(`[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)`);if(!e.onVerification)throw Error(`[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)`);return Object.assign(kZ.bind(null,i),{hook:AZ.bind(null,i)})}var NZ=`0.0.0-development`;async function PZ(e){if(`code`in e.strategyOptions){let{authentication:t}=await pZ({clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request});return{type:`token`,tokenType:`oauth`,...t}}if(`onVerification`in e.strategyOptions){let t=await MZ({clientType:e.clientType,clientId:e.clientId,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request})({type:`oauth`});return{clientSecret:e.clientSecret,...t}}if(`token`in e.strategyOptions)return{type:`token`,tokenType:`oauth`,clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions};throw Error(`[@octokit/auth-oauth-user] Invalid strategy options`)}async function FZ(e,t={}){if(e.authentication||=(e.clientType,await PZ(e)),e.authentication.invalid)throw Error(`[@octokit/auth-oauth-user] Token is invalid`);let n=e.authentication;if(`expiresAt`in n&&(t.type===`refresh`||new Date(n.expiresAt)<new Date)){let{authentication:t}=await yZ({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:n.refreshToken,request:e.request});e.authentication={tokenType:`oauth`,type:`token`,...t}}if(t.type===`refresh`){if(e.clientType===`oauth-app`)throw Error(`[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens`);if(!n.hasOwnProperty(`expiresAt`))throw Error(`[@octokit/auth-oauth-user] Refresh token missing`);await e.onTokenCreated?.(e.authentication,{type:t.type})}if(t.type===`check`||t.type===`reset`){let n=t.type===`check`?vZ:SZ;try{let{authentication:r}=await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request});return e.authentication={tokenType:`oauth`,type:`token`,...r},t.type===`reset`&&await e.onTokenCreated?.(e.authentication,{type:t.type}),e.authentication}catch(t){throw t.status===404&&(t.message=`[@octokit/auth-oauth-user] Token is invalid`,e.authentication.invalid=!0),t}}if(t.type===`delete`||t.type===`deleteAuthorization`){let n=t.type===`delete`?CZ:wZ;try{await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request})}catch(e){if(e.status!==404)throw e}return e.authentication.invalid=!0,e.authentication}return e.authentication}var IZ=/\/applications\/[^/]+\/(token|grant)s?/;function LZ(e){return e&&IZ.test(e)}async function RZ(e,t,n,r={}){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);if(LZ(i.url)){let n=btoa(`${e.clientId}:${e.clientSecret}`);return i.headers.authorization=`basic ${n}`,t(i)}let{token:a}=(e.clientType,await FZ({...e,request:t}));return i.headers.authorization=`token `+a,t(i)}function zZ({clientId:e,clientSecret:t,clientType:n=`oauth-app`,request:r=BY.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${NZ} ${XJ()}`}}),onTokenCreated:i,...a}){let o=Object.assign({clientType:n,clientId:e,clientSecret:t,onTokenCreated:i,strategyOptions:a,request:r});return Object.assign(FZ.bind(null,o),{hook:RZ.bind(null,o)})}zZ.VERSION=NZ;async function BZ(e,t){if(t.type===`oauth-app`)return{type:`oauth-app`,clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`}};if(`factory`in t){let{type:n,...r}={...t,...e};return t.factory(r)}let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.request,...t};return(e.clientType,await zZ({...n,clientType:e.clientType}))()}async function VZ(e,t,n,r){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);if(e.clientType===`github-app`&&!LZ(i.url))throw Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let a=btoa(`${e.clientId}:${e.clientSecret}`);i.headers.authorization=`basic ${a}`;try{return await t(i)}catch(e){throw e.status===401&&(e.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),e}}var HZ=`0.0.0-development`;function UZ(e){let t=Object.assign({request:BY.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${HZ} ${XJ()}`}}),clientType:`oauth-app`},e);return Object.assign(BZ.bind(null,t),{hook:VZ.bind(null,t)})}function WZ(e){return e.includes(`-----BEGIN RSA PRIVATE KEY-----`)}function GZ(e){return e.includes(`-----BEGIN OPENSSH PRIVATE KEY-----`)}function KZ(e){let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return t}function qZ(e){let t=e.trim().split(`
`).slice(1,-1).join(``);return KZ(atob(t))}function JZ(e,t){return`${ZZ(e)}.${ZZ(t)}`}function YZ(e){for(var t=``,n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return XZ(btoa(t))}function XZ(e){return e.replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`)}function ZZ(e){return XZ(btoa(JSON.stringify(e)))}var{subtle:QZ}=globalThis.crypto;function $Z(e){return e}async function eQ({privateKey:e,payload:t}){let n=$Z(e);if(WZ(n))throw Error(`[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats`);if(GZ(n))throw Error(`[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats`);let r={name:`RSASSA-PKCS1-v1_5`,hash:{name:`SHA-256`}},i={alg:`RS256`,typ:`JWT`},a=qZ(n),o=await QZ.importKey(`pkcs8`,a,r,!1,[`sign`]),s=JZ(i,t),c=KZ(s);return`${s}.${YZ(await QZ.sign(r.name,o,c))}`}async function tQ({id:e,privateKey:t,now:n=Math.floor(Date.now()/1e3)}){let r=t.replace(/\\n/g,`
`),i=n-30,a=i+600;return{appId:e,expiration:a,token:await eQ({privateKey:r,payload:{iat:i,exp:a,iss:e}})}}var nQ=class{constructor(e=1e3,t=0){if(isNaN(e)||e<0)throw Error(`Invalid max value`);if(isNaN(t)||t<0)throw Error(`Invalid ttl value`);this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=t}bumpLru(e){if(this.last===e)return;let t=this.last,n=e.next,r=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=t,t.next=e,r!==null&&(r.next=n),n!==null&&(n.prev=r),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;t<e.length;t++)this.delete(e[t])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(t),t.value}}getMany(e){let t=[];for(var n=0;n<e.length;n++)t.push(this.get(e[n]));return t}keys(){return Object.keys(this.items)}set(e,t){if(Object.prototype.hasOwnProperty.call(this.items,e)){let n=this.items[e];n.value=t,n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==n&&this.bumpLru(n);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};async function rQ({appId:e,privateKey:t,timeDifference:n}){try{let r={id:e,privateKey:t};n&&Object.assign(r,{now:Math.floor(Date.now()/1e3)+n});let i=await tQ(r);return{type:`app`,token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(e){throw t===`-----BEGIN RSA PRIVATE KEY-----`?Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):e}}function iQ(){return new nQ(15e3,1e3*60*59)}async function aQ(e,t){let n=sQ(t),r=await e.get(n);if(!r)return;let[i,a,o,s,c,l]=r.split(`|`);return{token:i,createdAt:a,expiresAt:o,permissions:t.permissions||c.split(/,/).reduce((e,t)=>(/!$/.test(t)?e[t.slice(0,-1)]=`write`:e[t]=`read`,e),{}),repositoryIds:t.repositoryIds,repositoryNames:t.repositoryNames,singleFileName:l,repositorySelection:s}}async function oQ(e,t,n){let r=sQ(t),i=t.permissions?``:Object.keys(n.permissions).map(e=>`${e}${n.permissions[e]===`write`?`!`:``}`).join(`,`),a=[n.token,n.createdAt,n.expiresAt,n.repositorySelection,i,n.singleFileName].join(`|`);await e.set(r,a)}function sQ({installationId:e,permissions:t={},repositoryIds:n=[],repositoryNames:r=[]}){let i=Object.keys(t).sort().map(e=>t[e]===`read`?e:`${e}!`).join(`,`);return[e,n.sort().join(`,`),r.join(`,`),i].filter(Boolean).join(`|`)}function cQ({installationId:e,token:t,createdAt:n,expiresAt:r,repositorySelection:i,permissions:a,repositoryIds:o,repositoryNames:s,singleFileName:c}){return Object.assign({type:`token`,tokenType:`installation`,token:t,installationId:e,permissions:a,createdAt:n,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,s?{repositoryNames:s}:null,c?{singleFileName:c}:null)}async function lQ(e,t,n){let r=Number(t.installationId||e.installationId);if(!r)throw Error(`[@octokit/auth-app] installationId option is required for installation authentication.`);if(t.factory){let{type:n,factory:r,oauthApp:i,...a}={...e,...t};return r(a)}let i=n||e.request;return dQ(e,{...t,installationId:r},i)}var uQ=new Map;function dQ(e,t,n){let r=sQ(t);if(uQ.has(r))return uQ.get(r);let i=fQ(e,t,n).finally(()=>uQ.delete(r));return uQ.set(r,i),i}async function fQ(e,t,n){if(!t.refresh){let n=await aQ(e.cache,t);if(n){let{token:e,createdAt:r,expiresAt:i,permissions:a,repositoryIds:o,repositoryNames:s,singleFileName:c,repositorySelection:l}=n;return cQ({installationId:t.installationId,token:e,createdAt:r,expiresAt:i,permissions:a,repositorySelection:l,repositoryIds:o,repositoryNames:s,singleFileName:c})}}let r=await rQ(e),i={installation_id:t.installationId,mediaType:{previews:[`machine-man`]},headers:{authorization:`bearer ${r.token}`}};t.repositoryIds&&Object.assign(i,{repository_ids:t.repositoryIds}),t.repositoryNames&&Object.assign(i,{repositories:t.repositoryNames}),t.permissions&&Object.assign(i,{permissions:t.permissions});let{data:{token:a,expires_at:o,repositories:s,permissions:c,repository_selection:l,single_file:u}}=await n(`POST /app/installations/{installation_id}/access_tokens`,i),d=c||{},f=l||`all`,p=s?s.map(e=>e.id):void 0,m=s?s.map(e=>e.name):void 0,h=new Date().toISOString(),g={token:a,createdAt:h,expiresAt:o,repositorySelection:f,permissions:d,repositoryIds:p,repositoryNames:m};u&&Object.assign(i,{singleFileName:u}),await oQ(e.cache,t,g);let _={installationId:t.installationId,token:a,createdAt:h,expiresAt:o,repositorySelection:f,permissions:d,repositoryIds:p,repositoryNames:m};return u&&Object.assign(_,{singleFileName:u}),cQ(_)}async function pQ(e,t){switch(t.type){case`app`:return rQ(e);case`oauth-app`:return e.oauthApp({type:`oauth-app`});case`installation`:return lQ(e,{...t,type:`installation`});case`oauth-user`:return e.oauthApp(t);default:throw Error(`Invalid auth type: ${t.type}`)}}var mQ=[`/app`,`/app/hook/config`,`/app/hook/deliveries`,`/app/hook/deliveries/{delivery_id}`,`/app/hook/deliveries/{delivery_id}/attempts`,`/app/installations`,`/app/installations/{installation_id}`,`/app/installations/{installation_id}/access_tokens`,`/app/installations/{installation_id}/suspended`,`/app/installation-requests`,`/marketplace_listing/accounts/{account_id}`,`/marketplace_listing/plan`,`/marketplace_listing/plans`,`/marketplace_listing/plans/{plan_id}/accounts`,`/marketplace_listing/stubbed/accounts/{account_id}`,`/marketplace_listing/stubbed/plan`,`/marketplace_listing/stubbed/plans`,`/marketplace_listing/stubbed/plans/{plan_id}/accounts`,`/orgs/{org}/installation`,`/repos/{owner}/{repo}/installation`,`/users/{username}/installation`];function hQ(e){let t=`^(?:${e.map(e=>e.split(`/`).map(e=>e.startsWith(`{`)?`(?:.+?)`:e).join(`/`)).map(e=>`(?:${e})`).join(`|`)})$`;return new RegExp(t,`i`)}var gQ=hQ(mQ);function _Q(e){return!!e&&gQ.test(e.split(`?`)[0])}var vQ=5*1e3;function yQ(e){return!(e.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||e.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}async function bQ(e,t,n,r){let i=t.endpoint.merge(n,r),a=i.url;if(/\/login\/oauth\/access_token$/.test(a))return t(i);if(_Q(a.replace(t.endpoint.DEFAULTS.baseUrl,``))){let{token:n}=await rQ(e);i.headers.authorization=`bearer ${n}`;let r;try{r=await t(i)}catch(n){if(yQ(n)||n.response.headers.date===void 0)throw n;let r=Math.floor((Date.parse(n.response.headers.date)-Date.parse(new Date().toString()))/1e3);e.log.warn(n.message),e.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${r} seconds. Retrying request with the difference accounted for.`);let{token:a}=await rQ({...e,timeDifference:r});return i.headers.authorization=`bearer ${a}`,t(i)}return r}if(LZ(a)){let n=await e.oauthApp({type:`oauth-app`});return i.headers.authorization=n.headers.authorization,t(i)}let{token:o,createdAt:s}=await lQ(e,{},t.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,xQ(e,t,i,s)}async function xQ(e,t,n,r,i=0){let a=new Date-+new Date(r);try{return await t(n)}catch(o){if(o.status!==401)throw o;if(a>=vQ)throw i>0&&(o.message=`After ${i} retries within ${a/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let s=i*1e3;return e.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${s/1e3}s)`),await new Promise(e=>setTimeout(e,s)),xQ(e,t,n,r,i)}}var SQ=`7.2.2`;function CQ(e){if(!e.appId)throw Error(`[@octokit/auth-app] appId option is required`);if(!e.privateKey)throw Error(`[@octokit/auth-app] privateKey option is required`);if(`installationId`in e&&!e.installationId)throw Error(`[@octokit/auth-app] installationId is set to a falsy value`);let t=e.log||{};typeof t.warn!=`function`&&(t.warn=console.warn.bind(console));let n=e.request||BY.defaults({headers:{"user-agent":`octokit-auth-app.js/${SQ} ${XJ()}`}}),r=Object.assign({request:n,cache:iQ()},e,e.installationId?{installationId:Number(e.installationId)}:{},{log:t,oauthApp:UZ({clientType:`github-app`,clientId:e.clientId||``,clientSecret:e.clientSecret||``,request:n})});return Object.assign(pQ.bind(null,r),{hook:bQ.bind(null,r)})}async function wQ(e){return{type:`unauthenticated`,reason:e}}function TQ(e){return e.status!==403||!e.response?!1:e.response.headers[`x-ratelimit-remaining`]===`0`}var EQ=/\babuse\b/i;function DQ(e){return e.status===403?EQ.test(e.message):!1}async function OQ(e,t,n,r){let i=t.endpoint.merge(n,r);return t(i).catch(t=>{throw t.status===404?(t.message=`Not found. May be due to lack of authentication. Reason: ${e}`,t):TQ(t)?(t.message=`API rate limit exceeded. This maybe caused by the lack of authentication. Reason: ${e}`,t):DQ(t)?(t.message=`You have triggered an abuse detection mechanism. This maybe caused by the lack of authentication. Reason: ${e}`,t):t.status===401?(t.message=`Unauthorized. "${i.method} ${i.url}" failed most likely due to lack of authentication. Reason: ${e}`,t):(t.status>=400&&t.status<500&&(t.message=t.message.replace(/\.?$/,`. May be caused by lack of authentication (${e}).`)),t)})}var kQ=function(e){if(!e||!e.reason)throw Error(`[@octokit/auth-unauthenticated] No reason passed to createUnauthenticatedAuth`);return Object.assign(wQ.bind(null,e.reason),{hook:OQ.bind(null,e.reason)})},AQ=`7.1.6`;function jQ(e,t,n){if(Array.isArray(t)){for(let r of t)jQ(e,r,n);return}e.eventHandlers[t]||(e.eventHandlers[t]=[]),e.eventHandlers[t].push(n)}var MQ=uX.defaults({userAgent:`octokit-oauth-app.js/${AQ} ${XJ()}`});async function NQ(e,t){let{name:n,action:r}=t;if(e.eventHandlers[`${n}.${r}`])for(let i of e.eventHandlers[`${n}.${r}`])await i(t);if(e.eventHandlers[n])for(let r of e.eventHandlers[n])await r(t)}async function PQ(e,t){return e.octokit.auth({type:`oauth-user`,...t,async factory(t){let n=new e.Octokit({authStrategy:zZ,auth:t}),r=await n.auth({type:`get`});return await NQ(e,{name:`token`,action:`created`,token:r.token,scopes:r.scopes,authentication:r,octokit:n}),n}})}function FQ(e,t){let n={clientId:e.clientId,request:e.octokit.request,...t,allowSignup:e.allowSignup??t.allowSignup,redirectUrl:t.redirectUrl??e.redirectUrl,scopes:t.scopes??e.defaultScopes};return fZ({clientType:e.clientType,...n})}async function IQ(e,t){let n=await e.octokit.auth({type:`oauth-user`,...t});return await NQ(e,{name:`token`,action:`created`,token:n.token,scopes:n.scopes,authentication:n,octokit:new e.Octokit({authStrategy:zZ,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.token,scopes:n.scopes,refreshToken:n.refreshToken,expiresAt:n.expiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt}})}),{authentication:n}}async function LQ(e,t){let n=await vZ({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t});return Object.assign(n.authentication,{type:`token`,tokenType:`oauth`}),n}async function RQ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t};if(e.clientType===`oauth-app`){let t=await SZ({clientType:`oauth-app`,...n}),r=Object.assign(t.authentication,{type:`token`,tokenType:`oauth`});return await NQ(e,{name:`token`,action:`reset`,token:t.authentication.token,scopes:t.authentication.scopes||void 0,authentication:r,octokit:new e.Octokit({authStrategy:zZ,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.authentication.token,scopes:t.authentication.scopes}})}),{...t,authentication:r}}let r=await SZ({clientType:`github-app`,...n}),i=Object.assign(r.authentication,{type:`token`,tokenType:`oauth`});return await NQ(e,{name:`token`,action:`reset`,token:r.authentication.token,authentication:i,octokit:new e.Octokit({authStrategy:zZ,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:r.authentication.token}})}),{...r,authentication:i}}async function zQ(e,t){if(e.clientType===`oauth-app`)throw Error(`[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps`);let n=await yZ({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,refreshToken:t.refreshToken}),r=Object.assign(n.authentication,{type:`token`,tokenType:`oauth`});return await NQ(e,{name:`token`,action:`refreshed`,token:n.authentication.token,authentication:r,octokit:new e.Octokit({authStrategy:zZ,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:r}}async function BQ(e,t){if(e.clientType===`oauth-app`)throw Error(`[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps`);let n=await xZ({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t}),r=Object.assign(n.authentication,{type:`token`,tokenType:`oauth`});return await NQ(e,{name:`token`,action:`scoped`,token:n.authentication.token,authentication:r,octokit:new e.Octokit({authStrategy:zZ,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:r}}async function VQ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},r=e.clientType===`oauth-app`?await CZ({clientType:`oauth-app`,...n}):await CZ({clientType:`github-app`,...n});return await NQ(e,{name:`token`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:kQ,auth:{reason:`Handling "token.deleted" event. The access for the token has been revoked.`}})}),r}async function HQ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},r=e.clientType===`oauth-app`?await wZ({clientType:`oauth-app`,...n}):await wZ({clientType:`github-app`,...n});return await NQ(e,{name:`token`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:kQ,auth:{reason:`Handling "token.deleted" event. The access for the token has been revoked.`}})}),await NQ(e,{name:`authorization`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:kQ,auth:{reason:`Handling "authorization.deleted" event. The access for the app has been revoked.`}})}),r}var UQ=class{static VERSION=AQ;static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}constructor(e){let t=e.Octokit||MQ;this.type=e.clientType||`oauth-app`;let n=new t({authStrategy:UZ,auth:{clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret}}),r={clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret,defaultScopes:e.defaultScopes||[],allowSignup:e.allowSignup,baseUrl:e.baseUrl,redirectUrl:e.redirectUrl,log:e.log,Octokit:t,octokit:n,eventHandlers:{}};this.on=jQ.bind(null,r),this.octokit=n,this.getUserOctokit=PQ.bind(null,r),this.getWebFlowAuthorizationUrl=FQ.bind(null,r),this.createToken=IQ.bind(null,r),this.checkToken=LQ.bind(null,r),this.resetToken=RQ.bind(null,r),this.refreshToken=zQ.bind(null,r),this.scopeToken=BQ.bind(null,r),this.deleteToken=VQ.bind(null,r),this.deleteAuthorization=HQ.bind(null,r)}type;on;octokit;getUserOctokit;getWebFlowAuthorizationUrl;createToken;checkToken;resetToken;refreshToken;scopeToken;deleteToken;deleteAuthorization},WQ=new TextEncoder;function GQ(e){let t=e.match(/[\dA-F]{2}/gi).map(function(e){return parseInt(e,16)});return new Uint8Array(t)}function KQ(e){return Array.prototype.map.call(new Uint8Array(e),e=>e.toString(16).padStart(2,`0`)).join(``)}async function qQ(e){return crypto.subtle.importKey(`raw`,WQ.encode(e),{name:`HMAC`,hash:{name:`SHA-256`}},!1,[`sign`,`verify`])}async function JQ(e,t){if(!e||!t)throw TypeError(`[@octokit/webhooks-methods] secret & payload required for sign()`);if(typeof t!=`string`)throw TypeError(`[@octokit/webhooks-methods] payload must be a string`);return`sha256=${KQ(await crypto.subtle.sign(`HMAC`,await qQ(e),WQ.encode(t)))}`}async function YQ(e,t,n){if(!e||!t||!n)throw TypeError(`[@octokit/webhooks-methods] secret, eventPayload & signature required`);if(typeof t!=`string`)throw TypeError(`[@octokit/webhooks-methods] eventPayload must be a string`);return await crypto.subtle.verify(`HMAC`,await qQ(e),GQ(n.replace(`sha256=`,``)),WQ.encode(t))}async function XQ(e,t,n,r){if(await YQ(e,t,n))return!0;if(r!==void 0)for(let e of r){let r=await YQ(e,t,n);if(r)return r}return!1}var ZQ=(e={})=>(typeof e.debug!=`function`&&(e.debug=()=>{}),typeof e.info!=`function`&&(e.info=()=>{}),typeof e.warn!=`function`&&(e.warn=console.warn.bind(console)),typeof e.error!=`function`&&(e.error=console.error.bind(console)),e),QQ=`branch_protection_configuration,branch_protection_configuration.disabled,branch_protection_configuration.enabled,branch_protection_rule,branch_protection_rule.created,branch_protection_rule.deleted,branch_protection_rule.edited,check_run,check_run.completed,check_run.created,check_run.requested_action,check_run.rerequested,check_suite,check_suite.completed,check_suite.requested,check_suite.rerequested,code_scanning_alert,code_scanning_alert.appeared_in_branch,code_scanning_alert.closed_by_user,code_scanning_alert.created,code_scanning_alert.fixed,code_scanning_alert.reopened,code_scanning_alert.reopened_by_user,commit_comment,commit_comment.created,create,custom_property,custom_property.created,custom_property.deleted,custom_property.promote_to_enterprise,custom_property.updated,custom_property_values,custom_property_values.updated,delete,dependabot_alert,dependabot_alert.auto_dismissed,dependabot_alert.auto_reopened,dependabot_alert.created,dependabot_alert.dismissed,dependabot_alert.fixed,dependabot_alert.reintroduced,dependabot_alert.reopened,deploy_key,deploy_key.created,deploy_key.deleted,deployment,deployment.created,deployment_protection_rule,deployment_protection_rule.requested,deployment_review,deployment_review.approved,deployment_review.rejected,deployment_review.requested,deployment_status,deployment_status.created,discussion,discussion.answered,discussion.category_changed,discussion.closed,discussion.created,discussion.deleted,discussion.edited,discussion.labeled,discussion.locked,discussion.pinned,discussion.reopened,discussion.transferred,discussion.unanswered,discussion.unlabeled,discussion.unlocked,discussion.unpinned,discussion_comment,discussion_comment.created,discussion_comment.deleted,discussion_comment.edited,fork,github_app_authorization,github_app_authorization.revoked,gollum,installation,installation.created,installation.deleted,installation.new_permissions_accepted,installation.suspend,installation.unsuspend,installation_repositories,installation_repositories.added,installation_repositories.removed,installation_target,installation_target.renamed,issue_comment,issue_comment.created,issue_comment.deleted,issue_comment.edited,issues,issues.assigned,issues.closed,issues.deleted,issues.demilestoned,issues.edited,issues.labeled,issues.locked,issues.milestoned,issues.opened,issues.pinned,issues.reopened,issues.transferred,issues.typed,issues.unassigned,issues.unlabeled,issues.unlocked,issues.unpinned,issues.untyped,label,label.created,label.deleted,label.edited,marketplace_purchase,marketplace_purchase.cancelled,marketplace_purchase.changed,marketplace_purchase.pending_change,marketplace_purchase.pending_change_cancelled,marketplace_purchase.purchased,member,member.added,member.edited,member.removed,membership,membership.added,membership.removed,merge_group,merge_group.checks_requested,merge_group.destroyed,meta,meta.deleted,milestone,milestone.closed,milestone.created,milestone.deleted,milestone.edited,milestone.opened,org_block,org_block.blocked,org_block.unblocked,organization,organization.deleted,organization.member_added,organization.member_invited,organization.member_removed,organization.renamed,package,package.published,package.updated,page_build,personal_access_token_request,personal_access_token_request.approved,personal_access_token_request.cancelled,personal_access_token_request.created,personal_access_token_request.denied,ping,project,project.closed,project.created,project.deleted,project.edited,project.reopened,project_card,project_card.converted,project_card.created,project_card.deleted,project_card.edited,project_card.moved,project_column,project_column.created,project_column.deleted,project_column.edited,project_column.moved,projects_v2,projects_v2.closed,projects_v2.created,projects_v2.deleted,projects_v2.edited,projects_v2.reopened,projects_v2_item,projects_v2_item.archived,projects_v2_item.converted,projects_v2_item.created,projects_v2_item.deleted,projects_v2_item.edited,projects_v2_item.reordered,projects_v2_item.restored,projects_v2_status_update,projects_v2_status_update.created,projects_v2_status_update.deleted,projects_v2_status_update.edited,public,pull_request,pull_request.assigned,pull_request.auto_merge_disabled,pull_request.auto_merge_enabled,pull_request.closed,pull_request.converted_to_draft,pull_request.demilestoned,pull_request.dequeued,pull_request.edited,pull_request.enqueued,pull_request.labeled,pull_request.locked,pull_request.milestoned,pull_request.opened,pull_request.ready_for_review,pull_request.reopened,pull_request.review_request_removed,pull_request.review_requested,pull_request.synchronize,pull_request.unassigned,pull_request.unlabeled,pull_request.unlocked,pull_request_review,pull_request_review.dismissed,pull_request_review.edited,pull_request_review.submitted,pull_request_review_comment,pull_request_review_comment.created,pull_request_review_comment.deleted,pull_request_review_comment.edited,pull_request_review_thread,pull_request_review_thread.resolved,pull_request_review_thread.unresolved,push,registry_package,registry_package.published,registry_package.updated,release,release.created,release.deleted,release.edited,release.prereleased,release.published,release.released,release.unpublished,repository,repository.archived,repository.created,repository.deleted,repository.edited,repository.privatized,repository.publicized,repository.renamed,repository.transferred,repository.unarchived,repository_advisory,repository_advisory.published,repository_advisory.reported,repository_dispatch,repository_dispatch.sample.collected,repository_import,repository_ruleset,repository_ruleset.created,repository_ruleset.deleted,repository_ruleset.edited,repository_vulnerability_alert,repository_vulnerability_alert.create,repository_vulnerability_alert.dismiss,repository_vulnerability_alert.reopen,repository_vulnerability_alert.resolve,secret_scanning_alert,secret_scanning_alert.created,secret_scanning_alert.publicly_leaked,secret_scanning_alert.reopened,secret_scanning_alert.resolved,secret_scanning_alert.validated,secret_scanning_alert_location,secret_scanning_alert_location.created,secret_scanning_scan,secret_scanning_scan.completed,security_advisory,security_advisory.published,security_advisory.updated,security_advisory.withdrawn,security_and_analysis,sponsorship,sponsorship.cancelled,sponsorship.created,sponsorship.edited,sponsorship.pending_cancellation,sponsorship.pending_tier_change,sponsorship.tier_changed,star,star.created,star.deleted,status,sub_issues,sub_issues.parent_issue_added,sub_issues.parent_issue_removed,sub_issues.sub_issue_added,sub_issues.sub_issue_removed,team,team.added_to_repository,team.created,team.deleted,team.edited,team.removed_from_repository,team_add,watch,watch.started,workflow_dispatch,workflow_job,workflow_job.completed,workflow_job.in_progress,workflow_job.queued,workflow_job.waiting,workflow_run,workflow_run.completed,workflow_run.in_progress,workflow_run.requested`.split(`,`);function $Q(e,t,n){e.hooks[t]||(e.hooks[t]=[]),e.hooks[t].push(n)}function e$(e,t,n){if(Array.isArray(t)){t.forEach(t=>e$(e,t,n));return}if([`*`,`error`].includes(t)){let e=t===`*`?`any`:t,n=`Using the "${t}" event with the regular Webhooks.on() function is not supported. Please use the Webhooks.on${e.charAt(0).toUpperCase()+e.slice(1)}() method instead`;throw Error(n)}QQ.includes(t)||e.log.warn(`"${t}" is not a known webhook name (https://developer.github.com/v3/activity/events/types/)`),$Q(e,t,n)}function t$(e,t){$Q(e,`*`,t)}function n$(e,t){$Q(e,`error`,t)}function r$(e,t){let n;try{n=e(t)}catch(e){console.log(`FATAL: Error occurred in "error" event handler`),console.log(e)}n&&n.catch&&n.catch(e=>{console.log(`FATAL: Error occurred in "error" event handler`),console.log(e)})}function i$(e,t,n){let r=[e.hooks[n],e.hooks[`*`]];return t&&r.unshift(e.hooks[`${n}.${t}`]),[].concat(...r.filter(Boolean))}function a$(e,t){let n=e.hooks.error||[];if(t instanceof Error){let e=Object.assign(AggregateError([t],t.message),{event:t});return n.forEach(t=>r$(t,e)),Promise.reject(e)}if(!t||!t.name){let e=Error(`Event name not passed`);throw AggregateError([e],e.message)}if(!t.payload){let e=Error(`Event name not passed`);throw AggregateError([e],e.message)}let r=i$(e,`action`in t.payload?t.payload.action:null,t.name);if(r.length===0)return Promise.resolve();let i=[],a=r.map(n=>{let r=Promise.resolve(t);return e.transform&&(r=r.then(e.transform)),r.then(e=>n(e)).catch(e=>i.push(Object.assign(e,{event:t})))});return Promise.all(a).then(()=>{if(i.length===0)return;let e=AggregateError(i,i.map(e=>e.message).join(`
`));throw Object.assign(e,{event:t}),n.forEach(t=>r$(t,e)),e})}function o$(e,t,n){if(Array.isArray(t)){t.forEach(t=>o$(e,t,n));return}if(e.hooks[t]){for(let r=e.hooks[t].length-1;r>=0;r--)if(e.hooks[t][r]===n){e.hooks[t].splice(r,1);return}}}function s$(e){let t={hooks:{},log:ZQ(e&&e.log)};return e&&e.transform&&(t.transform=e.transform),{on:e$.bind(null,t),onAny:t$.bind(null,t),onError:n$.bind(null,t),removeListener:o$.bind(null,t),receive:a$.bind(null,t)}}async function c$(e,t){if(!await XQ(e.secret,t.payload,t.signature,e.additionalSecrets).catch(()=>!1)){let n=Error(`[@octokit/webhooks] signature does not match event payload and secret`);return e.eventHandler.receive(Object.assign(n,{event:t,status:400}))}let n;try{n=JSON.parse(t.payload)}catch(e){throw e.message=`Invalid JSON`,e.status=400,AggregateError([e],e.message)}return e.eventHandler.receive({id:t.id,name:t.name,payload:n})}var l$=new TextDecoder(`utf-8`,{fatal:!1});l$.decode.bind(l$);var u$=class{sign;verify;on;onAny;onError;removeListener;receive;verifyAndReceive;constructor(e){if(!e||!e.secret)throw Error(`[@octokit/webhooks] options.secret required`);let t={eventHandler:s$(e),secret:e.secret,additionalSecrets:e.additionalSecrets,hooks:{},log:ZQ(e.log)};this.sign=JQ.bind(null,e.secret),this.verify=YQ.bind(null,e.secret),this.on=t.eventHandler.on,this.onAny=t.eventHandler.onAny,this.onError=t.eventHandler.onError,this.removeListener=t.eventHandler.removeListener,this.receive=t.eventHandler.receive,this.verifyAndReceive=c$.bind(null,t)}},d$=`15.1.6`;function f$(e,t){return new u$({secret:t.secret,transform:async t=>{if(!(`installation`in t.payload)||typeof t.payload.installation!=`object`){let n=new e.constructor({authStrategy:kQ,auth:{reason:`"installation" key missing in webhook event payload`}});return{...t,octokit:n}}let n=t.payload.installation.id,r=await e.auth({type:`installation`,installationId:n,factory(e){return new e.octokit.constructor({...e.octokitOptions,authStrategy:CQ,auth:{...e,installationId:n}})}});return r.hook.before(`request`,e=>{e.headers[`x-github-delivery`]=t.id}),{...t,octokit:r}}})}async function p$(e,t){return e.octokit.auth({type:`installation`,installationId:t,factory(e){let n={...e.octokitOptions,authStrategy:CQ,auth:{...e,installationId:t}};return new e.octokit.constructor(n)}})}function m$(e){return Object.assign(h$.bind(null,e),{iterator:g$.bind(null,e)})}async function h$(e,t){let n=g$(e)[Symbol.asyncIterator](),r=await n.next();for(;!r.done;)await t(r.value),r=await n.next()}function g$(e){return{async*[Symbol.asyncIterator](){let t=gX.iterator(e.octokit,`GET /app/installations`);for await(let{data:n}of t)for(let t of n)yield{octokit:await p$(e,t.id),installation:t}}}}function _$(e){return Object.assign(v$.bind(null,e),{iterator:b$.bind(null,e)})}async function v$(e,t,n){let r=b$(e,n?t:void 0)[Symbol.asyncIterator](),i=await r.next();for(;!i.done;)n?await n(i.value):await t(i.value),i=await r.next()}function y$(e,t){return{async*[Symbol.asyncIterator](){yield{octokit:await e.getInstallationOctokit(t)}}}}function b$(e,t){return{async*[Symbol.asyncIterator](){let n=t?y$(e,t.installationId):e.eachInstallation.iterator();for await(let{octokit:e}of n){let t=gX.iterator(e,`GET /installation/repositories`);for await(let{data:n}of t)for(let t of n)yield{octokit:e,repository:t}}}}}function x$(e){let t;return async function(n={}){t||=S$(e);let r=await t,i=new URL(r);return n.target_id!==void 0&&(i.pathname+=`/permissions`,i.searchParams.append(`target_id`,n.target_id.toFixed())),n.state!==void 0&&i.searchParams.append(`state`,n.state),i.href}}async function S$(e){let{data:t}=await e.octokit.request(`GET /app`);if(!t)throw Error(`[@octokit/app] unable to fetch metadata for app`);return`${t.html_url}/installations/new`}var C$=class{static VERSION=d$;static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}octokit;webhooks;oauth;getInstallationOctokit;eachInstallation;eachRepository;getInstallationUrl;log;constructor(e){let t=e.Octokit||uX,n={authStrategy:CQ,auth:Object.assign({appId:e.appId,privateKey:e.privateKey},e.oauth?{clientId:e.oauth.clientId,clientSecret:e.oauth.clientSecret}:{})};`log`in e&&e.log!==void 0&&(n.log=e.log),this.octokit=new t(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),e.webhooks?this.webhooks=f$(this.octokit,e.webhooks):Object.defineProperty(this,`webhooks`,{get(){throw Error(`[@octokit/app] webhooks option not set`)}}),e.oauth?this.oauth=new UQ({...e.oauth,clientType:`github-app`,Octokit:t}):Object.defineProperty(this,`oauth`,{get(){throw Error(`[@octokit/app] oauth.clientId / oauth.clientSecret options are not set`)}}),this.getInstallationOctokit=p$.bind(null,this),this.eachInstallation=m$(this),this.eachRepository=_$(this),this.getInstallationUrl=x$(this)}},w$=uX.plugin(BX,_X,NX,JX,sZ).defaults({userAgent:`octokit.js/0.0.0-development`,throttle:{onRateLimit:T$,onSecondaryRateLimit:E$}});function T$(e,t,n){if(n.log.warn(`Request quota exhausted for request ${t.method} ${t.url}`),t.request.retryCount===0)return n.log.info(`Retrying after ${e} seconds!`),!0}function E$(e,t,n){if(n.log.warn(`SecondaryRateLimit detected for request ${t.method} ${t.url}`),t.request.retryCount===0)return n.log.info(`Retrying after ${e} seconds!`),!0}C$.defaults({Octokit:w$});var D$=UQ.defaults({Octokit:w$});const O$=({redirectUri:e,clientId:t})=>`https://github.com/login/oauth/authorize?client_id=${t}&redirect_uri=${e}&apiresponse_type=code&scope=user%20repo&state=${encodeURIComponent(JSON.stringify({platform:`github`}))}`;var k$=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const A$=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://proxy.agentverse.cc/?${`https://github.com/login/oauth/access_token?code=${e}&client_id=${t}&redirect_uri=${encodeURIComponent(r)}&client_secret=${n}`}`,a=await iv.post(i);return Object.fromEntries(new URLSearchParams(a.data).entries())},j$=async({refreshToken:e})=>{let t=`https://github.com/oauth/token?grant_type=refresh_token&refresh_token=${e}`;return(await iv.post(t)).data};var M$=(()=>({getUserInfo:()=>`https://api.github.com/user`,createBranch:(e,t)=>`https://api.github.com/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`https://api.github.com/repos/${e}/${t}/branches`,createRepo:()=>`https://api.github.com/user/repos`,getRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}`,deleteRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}`,clearRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}/clear`,getRepoList:()=>`https://api.github.com/user/repos`,createFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,updateFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,deleteFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,getPathContents:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`}))();const N$=({getAccessToken:e})=>{let t=async(t,n,r=`POST`,i=!1)=>{if(i)return iv.request({method:r,url:t,data:n,headers:{Authorization:`Bearer ${e()}`}});let a=new FormData;return Object.keys(n).forEach(e=>{a.append(e,n[e])}),iv.request({method:r,url:t,data:a,headers:{Authorization:`Bearer ${e()}`}})},n={getInfo:async()=>iv.get(M$.getUserInfo(),{headers:{Authorization:`Bearer ${e()}`}})},r={get:async({owner:e,repo:t})=>iv.get(M$.getRepo(e,t),{params:k$({})}),add:async({repo:e})=>{let n={name:e,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t(M$.createRepo(),n)},getList:async({page:t=1,per_page:n=20})=>iv.get(M$.getRepoList(),{params:k$({page:t,per_page:n}),headers:{Authorization:`Bearer ${e()}`}}),delete:async({owner:e,repo:t})=>iv.delete(M$.deleteRepo(e,t),{params:{owner:e,repo:t}}),clear:async({owner:e,repo:t})=>iv.put(M$.clearRepo(e,t),{params:{owner:e,repo:t}})},i={get:async({owner:e,repo:t,branch:n})=>iv.get(M$.getBranch(e,t,n),{params:k$({owner:e,repo:t,branch:n})}),getList:async({owner:e,repo:t})=>iv.get(M$.getBranchList(e,t),{params:k$({owner:e,repo:t})}),add:async({owner:e,repo:n,branch:r,refs:i=`master`})=>{let a={owner:e,repo:n,branch_name:r,refs:i};return t(M$.createBranch(e,n),a)}},a=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),o=async({owner:t,repo:n,path:r})=>iv.get(M$.getPathContents(t,n,r),{params:k$({owner:t,repo:n,path:r}),headers:{Authorization:`Bearer ${e()}`}});return{File:{add:async({owner:t,repo:n,path:r,content:i,message:o,branch:s=`master`})=>{let c=new w$({auth:e()});r=r.startsWith(`/`)?r.slice(1):r,a(i)||(i=rv.encode(i)),o||=`create `+r;let l={owner:t,path:r,content:i,message:o,branch:s,repo:n};return c.rest.repos.createOrUpdateFileContents(l)},update:async({owner:e,repo:n,path:r,content:i,message:s,branch:c=`master`,sha:l=null})=>(a(i)||(i=rv.encode(i)),l||=(await o({owner:e,repo:n,path:r})).data.sha,s||=`update `+r,t(M$.updateFile(e,n,r),{owner:e,repo:n,path:r,content:i,message:s,branch:c,sha:l},`PUT`,!0)),delete:async({owner:t,repo:n,path:r,sha:i,message:a})=>(i||=(await o({owner:t,repo:n,path:r})).data.sha,a||=`delete `+r,iv.delete(M$.deleteFile(t,n,r),{params:{owner:t,repo:n,path:r,sha:i,message:a},headers:{Authorization:`Bearer ${e()}`}})),get:async({owner:e,repo:t,path:n})=>{let r=await o({owner:e,repo:t,path:n});return r.data.rawContent=r.data.content,r.data.uint8array=rv.toUint8Array(r.data.rawContent),r.data.content=rv.decode(r.data.rawContent),r},getInfo:o},Repo:r,User:n,Branch:i}};var P$=Vg({initilize(e){let t=GJ({platform:`github`,clientId:YJ.clientId,clientSecret:YJ.clientSecret,redirectUri:YJ.redirectUri,createToken:async e=>{let{clientId:t,clientSecret:n}=e;return new D$({clientId:t,clientSecret:n}),localStorage.getItem(`authRepo`),localStorage.getItem(`authOwner`),A$({...e})},fetchUserInfo:async({accessToken:e})=>{let t=await N$({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name,response:t}}}),n=KJ({id:`github`,platform:`github`,callbackTaskName:t.name,refreshAccessToken:j$,getLoginUrl:()=>O$({clientId:YJ.clientId,redirectUri:YJ.redirectUri})});e.taskService.registerTaskType(t),hv.registerAuthProvider(n)}}),F$={GitaryApp:{clientId:`098834700de44fb495289d22ef1acfeb`,clientSecret:`4c595f02948f4773a9105e34c0214fee`,redirectUri:`https://gitary.app/?platform=gitcode`},Localhost5173:{clientId:`098834700de44fb495289d22ef1acfeb`,clientSecret:`4c595f02948f4773a9105e34c0214fee`,redirectUri:`http://localhost:5173/?platform=gitcode`}},I$=F$[Ed()]||F$.GitaryApp,L$=`https://api.gitcode.com/api/v5`,R$=`https://gitcode.com/oauth`;const z$=({redirectUri:e,clientId:t})=>{let n=`${R$}/authorize`,r=encodeURIComponent(JSON.stringify({platform:`gitcode`}));return`${n}?client_id=${t}&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=all_user%20all_repository%20read_projects&state=${r}`};var B$=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const V$=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://proxy.agentverse.cc/?${`${R$}/token?grant_type=authorization_code&code=${encodeURIComponent(e)}&client_id=${encodeURIComponent(t)}&client_secret=${encodeURIComponent(n)}`}`;return(await iv.post(i)).data},H$=async({refreshToken:e})=>{let t=`https://proxy.agentverse.cc/?${`${R$}/token?grant_type=refresh_token&refresh_token=${encodeURIComponent(e)}`}`;return(await iv.post(t)).data};var U$=(()=>({getUserInfo:()=>`${L$}/user`,createBranch:(e,t)=>`${L$}/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`${L$}/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`${L$}/repos/${e}/${t}/branches`,createRepo:()=>`${L$}/user/repos`,getRepo:(e,t)=>`${L$}/repos/${e}/${t}`,deleteRepo:(e,t)=>`${L$}/repos/${e}/${t}`,getRepoList:()=>`${L$}/user/repos`,createFile:(e,t,n)=>`${L$}/repos/${e}/${t}/contents/${n}`,updateFile:(e,t,n)=>`${L$}/repos/${e}/${t}/contents/${n}`,deleteFile:(e,t,n)=>`${L$}/repos/${e}/${t}/contents/${n}`,getPathContents:(e,t,n)=>`${L$}/repos/${e}/${t}/contents/${n}`}))();const W$=({getAccessToken:e})=>{let t=async(e,t,n=`POST`)=>{let r=new FormData;return Object.keys(t).forEach(e=>{r.append(e,t[e])}),iv.request({method:n,url:e,data:r})},n={getInfo:async()=>iv.get(U$.getUserInfo(),{params:B$({access_token:e()})})},r={get:async({owner:t,repo:n})=>iv.get(U$.getRepo(t,n),{params:B$({access_token:e()})}),add:async({repo:n})=>{let r={access_token:e(),name:n,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t(U$.createRepo(),r)},getList:async({page:t=1,per_page:n=20})=>iv.get(U$.getRepoList(),{params:B$({access_token:e(),page:t,per_page:n})}),delete:async({owner:t,repo:n})=>iv.delete(U$.deleteRepo(t,n),{params:{access_token:e(),owner:t,repo:n}})},i=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),a=async({owner:t,repo:n,path:r})=>iv.get(U$.getPathContents(t,n,r),{params:B$({access_token:e(),owner:t,repo:n,path:r})});return{User:n,Repo:r,Branch:{getList:async({owner:t,repo:n})=>iv.get(U$.getBranchList(t,n),{params:B$({access_token:e(),owner:t,repo:n})})},File:{add:async({owner:n,repo:r,path:a,content:o,message:s,branch:c=`master`})=>{i(o)||(o=rv.encode(o)),s||=`create `+a;let l={access_token:e(),owner:n,path:a,content:o,message:s,branch:c};return t(U$.createFile(n,r,a),l)},update:async({owner:n,repo:r,path:o,content:s,message:c,branch:l=`master`,sha:u=null})=>(i(s)||(s=rv.encode(s)),u||=(await a({owner:n,repo:r,path:o})).data.sha,c||=`update `+o,t(U$.updateFile(n,r,o),{access_token:e(),owner:n,repo:r,path:o,content:s,message:c,branch:l,sha:u},`PUT`)),delete:async({owner:n,repo:r,path:i,sha:o,message:s})=>{o||=(await a({owner:n,repo:r,path:i})).data.sha,s||=`delete `+i;let c={access_token:e(),owner:n,repo:r,path:i,sha:o,message:s};return t(U$.deleteFile(n,r,i),c,`DELETE`)},get:async({owner:e,repo:t,path:n})=>{let r=await a({owner:e,repo:t,path:n});return r.data.rawContent=r.data.content,r.data.uint8array=rv.toUint8Array(r.data.rawContent),r.data.content=rv.decode(r.data.rawContent),r},getInfo:a}}};var G$=Vg({initilize(e){let t=GJ({platform:`gitcode`,clientId:I$.clientId,clientSecret:I$.clientSecret,redirectUri:I$.redirectUri,createToken:V$,fetchUserInfo:async({accessToken:e})=>{let t=await W$({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name||t.data?.login}}}),n=KJ({id:`gitcode`,platform:`gitcode`,callbackTaskName:t.name,refreshAccessToken:H$,getLoginUrl:()=>z$({clientId:I$.clientId,redirectUri:I$.redirectUri})});e.taskService.registerTaskType(t),hv.registerAuthProvider(n)}}),K$=Vg({initilize(){window.authService=hv,J.eventBus.on(Ad.RequestRedirectAuthPage,e=>{let t=yv.getSpace(e);t&&hv.authenticate({platform:t.platform,username:t.owner,repo:t.repo})}),J.pluginService.use(qJ),J.pluginService.use(P$),J.pluginService.use(G$)}}),q$=1,J$=.9,Y$=.8,X$=.17,Z$=.1,Q$=.999,$$=.9999,e1=.99,t1=/[\\\/_+.#"@\[\(\{&]/,n1=/[\\\/_+.#"@\[\(\{&]/g,r1=/[\s-]/,i1=/[\s-]/g;function a1(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?q$:e1;var s=`${i},${a}`;if(o[s]!==void 0)return o[s];for(var c=r.charAt(a),l=n.indexOf(c,i),u=0,d,f,p,m;l>=0;)d=a1(e,t,n,r,l+1,a+1,o),d>u&&(l===i?d*=q$:t1.test(e.charAt(l-1))?(d*=Y$,p=e.slice(i,l-1).match(n1),p&&i>0&&(d*=Q$**+p.length)):r1.test(e.charAt(l-1))?(d*=J$,m=e.slice(i,l-1).match(i1),m&&i>0&&(d*=Q$**+m.length)):(d*=X$,i>0&&(d*=Q$**+(l-i))),e.charAt(l)!==t.charAt(a)&&(d*=$$)),(d<Z$&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=a1(e,t,n,r,l+1,a+2,o),f*Z$>d&&(d=f*Z$)),d>u&&(u=d),l=n.indexOf(c,l+1);return o[s]=u,u}function o1(e){return e.toLowerCase().replace(i1,` `)}function s1(e,t,n){return e=n&&n.length>0?`${e+` `+n.join(` `)}`:e,a1(e,t,o1(e),o1(t),0,0,{})}var c1=`[cmdk-group=""]`,l1=`[cmdk-group-items=""]`,u1=`[cmdk-group-heading=""]`,d1=`[cmdk-item=""]`,f1=`${d1}:not([aria-disabled="true"])`,p1=`cmdk-item-select`,m1=`data-value`,h1=(e,t,n)=>s1(e,t,n),g1=H.createContext(void 0),_1=()=>H.useContext(g1),v1=H.createContext(void 0),y1=()=>H.useContext(v1),b1=H.createContext(void 0),x1=H.forwardRef((e,t)=>{let n=F1(()=>({search:``,value:e.value??e.defaultValue??``,selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}})),r=F1(()=>new Set),i=F1(()=>new Map),a=F1(()=>new Map),o=F1(()=>new Set),s=N1(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:m,disablePointerSelection:h=!1,vimBindings:g=!0,..._}=e,v=Xe(),y=Xe(),b=Xe(),x=H.useRef(null),S=R1();P1(()=>{if(u!==void 0){let e=u.trim();n.current.value=e,C.emit()}},[u]),P1(()=>{S(6,k)},[]);let C=H.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,o;if(!Object.is(n.current[e],t)){if(n.current[e]=t,e===`search`)O(),E(),S(1,D);else if(e===`value`){if(document.activeElement.hasAttribute(`cmdk-input`)||document.activeElement.hasAttribute(`cmdk-root`)){let e=document.getElementById(b);e?e.focus():(i=document.getElementById(v))==null||i.focus()}if(S(7,()=>{n.current.selectedItemId=A()?.id,C.emit()}),r||S(5,k),s.current?.value!==void 0){let e=t??``;(o=(a=s.current).onValueChange)==null||o.call(a,e);return}}C.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),w=H.useMemo(()=>({value:(e,t,r)=>{t!==a.current.get(e)?.value&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,T(t,r)),S(2,()=>{E(),C.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),S(3,()=>{O(),E(),n.current.value||D(),C.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=A();S(4,()=>{O(),t?.getAttribute(`id`)===e&&D(),C.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e[`aria-label`],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:v,inputId:b,labelId:y,listInnerRef:x}),[]);function T(e,t){let r=s.current?.filter??h1;return e?r(e,n.current.search,t):0}function E(){if(!n.current.search||s.current.shouldFilter===!1)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=x.current;j().sort((t,n)=>{let r=t.getAttribute(`id`),i=n.getAttribute(`id`);return(e.get(i)??0)-(e.get(r)??0)}).forEach(e=>{let t=e.closest(l1);t?t.appendChild(e.parentElement===t?e:e.closest(`${l1} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${l1} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=x.current?.querySelector(`${c1}[${m1}="${encodeURIComponent(e[0])}"]`);t?.parentElement.appendChild(t)})}function D(){let e=j().find(e=>e.getAttribute(`aria-disabled`)!==`true`)?.getAttribute(m1);C.setState(`value`,e||void 0)}function O(){if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let t of r.current){let r=T(a.current.get(t)?.value??``,a.current.get(t)?.keywords??[]);n.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of i.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=e}function k(){var e;let t=A();t&&(t.parentElement?.firstChild===t&&((e=t.closest(c1)?.querySelector(u1))==null||e.scrollIntoView({block:`nearest`})),t.scrollIntoView({block:`nearest`}))}function A(){return x.current?.querySelector(`${d1}[aria-selected="true"]`)}function j(){return Array.from(x.current?.querySelectorAll(f1)||[])}function M(e){let t=j()[e];t&&C.setState(`value`,t.getAttribute(m1))}function N(e){var t;let n=A(),r=j(),i=r.findIndex(e=>e===n),a=r[i+e];(t=s.current)!=null&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&C.setState(`value`,a.getAttribute(m1))}function P(e){let t=A()?.closest(c1),n;for(;t&&!n;)t=e>0?j1(t,c1):M1(t,c1),n=t?.querySelector(f1);n?C.setState(`value`,n.getAttribute(m1)):N(e)}let F=()=>M(j().length-1),ee=e=>{e.preventDefault(),e.metaKey?F():e.altKey?P(1):N(1)},I=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?P(-1):N(-1)};return H.createElement(V.div,{ref:t,tabIndex:-1,..._,"cmdk-root":``,onKeyDown:e=>{var t;(t=_.onKeyDown)==null||t.call(_,e);let n=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||n))switch(e.key){case`n`:case`j`:g&&e.ctrlKey&&ee(e);break;case`ArrowDown`:ee(e);break;case`p`:case`k`:g&&e.ctrlKey&&I(e);break;case`ArrowUp`:I(e);break;case`Home`:e.preventDefault(),M(0);break;case`End`:e.preventDefault(),F();break;case`Enter`:{e.preventDefault();let t=A();if(t){let e=new Event(p1);t.dispatchEvent(e)}}}}},H.createElement(`label`,{"cmdk-label":``,htmlFor:w.inputId,id:w.labelId,style:V1},c),B1(e,e=>H.createElement(v1.Provider,{value:C},H.createElement(g1.Provider,{value:w},e))))}),S1=H.forwardRef((e,t)=>{let n=Xe(),r=H.useRef(null),i=H.useContext(b1),a=_1(),o=N1(e),s=o.current?.forceMount??i?.forceMount;P1(()=>{if(!s)return a.item(n,i?.id)},[s]);let c=L1(n,r,[e.value,e.children,r],e.keywords),l=y1(),u=I1(e=>e.value&&e.value===c.current),d=I1(e=>s||a.filter()===!1?!0:e.search?e.filtered.items.get(n)>0:!0);H.useEffect(()=>{let t=r.current;if(!(!t||e.disabled))return t.addEventListener(p1,f),()=>t.removeEventListener(p1,f)},[d,e.onSelect,e.disabled]);function f(){var e,t;p(),(t=(e=o.current).onSelect)==null||t.call(e,c.current)}function p(){l.setState(`value`,c.current,!0)}if(!d)return null;let{disabled:m,value:h,onSelect:g,forceMount:_,keywords:v,...y}=e;return H.createElement(V.div,{ref:Ft(r,t),...y,id:n,"cmdk-item":``,role:`option`,"aria-disabled":!!m,"aria-selected":!!u,"data-disabled":!!m,"data-selected":!!u,onPointerMove:m||a.getDisablePointerSelection()?void 0:p,onClick:m?void 0:f},e.children)}),C1=H.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=Xe(),s=H.useRef(null),c=H.useRef(null),l=Xe(),u=_1(),d=I1(e=>i||u.filter()===!1?!0:e.search?e.filtered.groups.has(o):!0);P1(()=>u.group(o),[]),L1(o,s,[e.value,e.heading,c]);let f=H.useMemo(()=>({id:o,forceMount:i}),[i]);return H.createElement(V.div,{ref:Ft(s,t),...a,"cmdk-group":``,role:`presentation`,hidden:d?void 0:!0},n&&H.createElement(`div`,{ref:c,"cmdk-group-heading":``,"aria-hidden":!0,id:l},n),B1(e,e=>H.createElement(`div`,{"cmdk-group-items":``,role:`group`,"aria-labelledby":n?l:void 0},H.createElement(b1.Provider,{value:f},e))))}),w1=H.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=H.useRef(null),a=I1(e=>!e.search);return!n&&!a?null:H.createElement(V.div,{ref:Ft(i,t),...r,"cmdk-separator":``,role:`separator`})}),T1=H.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=y1(),o=I1(e=>e.search),s=I1(e=>e.selectedItemId),c=_1();return H.useEffect(()=>{e.value!=null&&a.setState(`search`,e.value)},[e.value]),H.createElement(V.input,{ref:t,...r,"cmdk-input":``,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,"aria-autocomplete":`list`,role:`combobox`,"aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":s,id:c.inputId,type:`text`,value:i?e.value:o,onChange:e=>{i||a.setState(`search`,e.target.value),n?.(e.target.value)}})}),E1=H.forwardRef((e,t)=>{let{children:n,label:r=`Suggestions`,...i}=e,a=H.useRef(null),o=H.useRef(null),s=I1(e=>e.selectedItemId),c=_1();return H.useEffect(()=>{if(o.current&&a.current){let e=o.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty(`--cmdk-list-height`,n.toFixed(1)+`px`)})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),H.createElement(V.div,{ref:Ft(a,t),...i,"cmdk-list":``,role:`listbox`,tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:c.listId},B1(e,e=>H.createElement(`div`,{ref:Ft(o,c.listInnerRef),"cmdk-list-sizer":``},e)))}),D1=H.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...s}=e;return H.createElement($h,{open:n,onOpenChange:r},H.createElement(tg,{container:o},H.createElement(ng,{"cmdk-overlay":``,className:i}),H.createElement(rg,{"aria-label":e.label,"cmdk-dialog":``,className:a},H.createElement(x1,{ref:t,...s}))))}),O1=H.forwardRef((e,t)=>I1(e=>e.filtered.count===0)?H.createElement(V.div,{ref:t,...e,"cmdk-empty":``,role:`presentation`}):null),k1=H.forwardRef((e,t)=>{let{progress:n,children:r,label:i=`Loading...`,...a}=e;return H.createElement(V.div,{ref:t,...a,"cmdk-loading":``,role:`progressbar`,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},B1(e,e=>H.createElement(`div`,{"aria-hidden":!0},e)))}),A1=Object.assign(x1,{List:E1,Item:S1,Input:T1,Group:C1,Separator:w1,Dialog:D1,Empty:O1,Loading:k1});function j1(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function M1(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function N1(e){let t=H.useRef(e);return P1(()=>{t.current=e}),t}var P1=typeof window>`u`?H.useEffect:H.useLayoutEffect;function F1(e){let t=H.useRef();return t.current===void 0&&(t.current=e()),t}function I1(e){let t=y1(),n=()=>e(t.snapshot());return H.useSyncExternalStore(t.subscribe,n,n)}function L1(e,t,n,r=[]){let i=H.useRef(),a=_1();return P1(()=>{var o;let s=(()=>{for(let e of n){if(typeof e==`string`)return e.trim();if(typeof e==`object`&&`current`in e)return e.current?e.current.textContent?.trim():i.current}})(),c=r.map(e=>e.trim());a.value(e,s,c),(o=t.current)==null||o.setAttribute(m1,s),i.current=s}),i}var R1=()=>{let[e,t]=H.useState(),n=F1(()=>new Map);return P1(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function z1(e){let t=e.type;return typeof t==`function`?t(e.props):`render`in t?t.render(e.props):e}function B1({asChild:e,children:t},n){return e&&H.isValidElement(t)?H.cloneElement(z1(t),{ref:t.ref},n(t.props.children)):n(t)}var V1={position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,borderWidth:`0`},H1=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(A1,{ref:n,className:q(`flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground`,e),...t}));H1.displayName=A1.displayName;var U1=H.forwardRef(({className:e,...t},n)=>(0,U.jsxs)(`div`,{className:`flex items-center border-b px-3`,"cmdk-input-wrapper":``,children:[(0,U.jsx)(kf,{className:`mr-2 h-4 w-4 shrink-0 opacity-50`}),(0,U.jsx)(A1.Input,{ref:n,className:q(`flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]}));U1.displayName=A1.Input.displayName;var W1=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(A1.List,{ref:n,className:q(`max-h-[300px] overflow-y-auto overflow-x-hidden`,e),...t}));W1.displayName=A1.List.displayName;var G1=H.forwardRef((e,t)=>(0,U.jsx)(A1.Empty,{ref:t,className:`py-6 text-center text-sm`,...e}));G1.displayName=A1.Empty.displayName;var K1=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(A1.Group,{ref:n,className:q(`overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground`,e),...t}));K1.displayName=A1.Group.displayName;var q1=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(A1.Separator,{ref:n,className:q(`-mx-1 h-px bg-border`,e),...t}));q1.displayName=A1.Separator.displayName;var J1=H.forwardRef(({className:e,...t},n)=>(0,U.jsx)(A1.Item,{ref:n,className:q(`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50`,e),...t}));J1.displayName=A1.Item.displayName;var Y1=({className:e,...t})=>(0,U.jsx)(`span`,{className:q(`ml-auto text-xs tracking-widest text-muted-foreground`,e),...t});Y1.displayName=`CommandShortcut`;var X1=e=>{let t=hv.getAnyAuthInfo(e)?.accessToken;if(!t)return is([]);if(e===`gitee`){let e=dv({getAccessToken:()=>t});return bs(Array.from({length:2},(t,n)=>rs(e.Repo.getList({page:n+1,per_page:100})).pipe(as(e=>e.data)))).pipe(as(e=>e.flat().slice(0,200)))}else if(e.toLowerCase()===`github`){let e=N$({getAccessToken:()=>t});return bs(Array.from({length:2},(t,n)=>rs(e.Repo.getList({page:n+1,per_page:100})).pipe(as(e=>e.data)))).pipe(as(e=>e.flat().slice(0,200)))}else if(e.toLowerCase()===`gitcode`){let e=W$({getAccessToken:()=>t});return bs(Array.from({length:2},(t,n)=>rs(e.Repo.getList({page:n+1,per_page:100})).pipe(as(e=>e.data)))).pipe(as(e=>e.flat().slice(0,200)))}return is([])};const Z1=({children:e})=>{let{t}=Nl();hv.useAuthRecords();let{authProviders:n}=hv.useAuthProviders(),r=!!hv.getAnyAuthInfo(`github`)?.accessToken,i=!!hv.getAnyAuthInfo(`gitee`)?.accessToken,a=!!hv.getAnyAuthInfo(`gitcode`)?.accessToken,o=n.find(e=>e.platform===`github`),s=n.find(e=>e.platform===`gitee`),c=n.find(e=>e.platform===`gitcode`),[l,u]=(0,H.useState)(!1),[d,f]=(0,H.useState)(!1),[p,m]=(0,H.useState)(!1),[h,g]=(0,H.useState)([]),[_,v]=(0,H.useState)(!1),[y,b]=(0,H.useState)([]),[x,S]=(0,H.useState)(!1),[C,w]=(0,H.useState)([]),[T,E]=(0,H.useState)(!1),[D,O]=(0,H.useState)(!1),[k,A]=(0,H.useState)(``),[j,M]=(0,H.useState)(!1);(0,H.useEffect)(()=>{if(r&&l&&h.length===0){v(!0);let e=X1(`github`).subscribe({next:e=>{v(!1),e&&e.length>0?g(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):g([])},error:e=>{console.error(`Failed to load GitHub repos:`,e),v(!1),g([])}});return()=>e.unsubscribe()}},[r,l,h.length]),(0,H.useEffect)(()=>{if(i&&d&&y.length===0){S(!0);let e=X1(`gitee`).subscribe({next:e=>{S(!1),e&&e.length>0?b(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):b([])},error:e=>{console.error(`Failed to load Gitee repos:`,e),S(!1),b([])}});return()=>e.unsubscribe()}},[i,d,y.length]),(0,H.useEffect)(()=>{if(a&&p&&C.length===0){E(!0);let e=X1(`gitcode`).subscribe({next:e=>{E(!1),e&&e.length>0?w(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):w([])},error:e=>{console.error(`Failed to load GitCode repos:`,e),E(!1),w([])}});return()=>e.unsubscribe()}},[a,p,C.length]);let N=async(e,n,r)=>{try{yv.addSpace({platform:e,owner:r,repo:n.toLowerCase()},{focus:!0,silent:!0}),J.notificationService.success(t(`space.workspaceAdded`))}catch{J.notificationService.error(t(`space.addFailed`))}},P=async()=>{o&&await o.authenticate({needConfirm:!1})},F=async()=>{s&&await s.authenticate({needConfirm:!1})},ee=e=>{e.preventDefault(),r?u(!l):P()},I=e=>{e.preventDefault(),i?f(!d):F()},L=async()=>{c&&await c.authenticate({needConfirm:!0})},te=e=>{e.preventDefault(),a?m(!p):L()},ne=async()=>{let e={platform:`idb`,owner:`root`,repo:`home`};try{let n=yv.getSpaceByInfo(e)||yv.addSpace(e,{focus:!0,silent:!0});yv.focusSpace(n.id);try{await oe(async()=>{let{openerService:e}=await import(`./opener.service-pWJZFLzj.js`);return{openerService:e}},__vite__mapDeps([19,1,2,3,4,5,8,9,7,10,11,12])).then(({openerService:e})=>e.open(n.id,{id:n.id+`/README.md`,name:`README.md`,path:`/README.md`,type:`file`}))}catch{J.notificationService.info(t(`space.localSpaceCreated`))}}catch{J.notificationService.error(t(`space.createLocalSpaceFailed`))}},re=e=>{e.preventDefault(),O(!D)},ie=async()=>{if(k.trim()){M(!0);try{let e=k.trim();!e.startsWith(`http://`)&&!e.startsWith(`https://`)&&(e=`https://${e}`);let n=yv.parseRepoUrl(e);if(!n.platform||!n.owner||!n.repo){J.notificationService.error(t(`space.invalidRepoUrl`)),M(!1);return}let r=yv.getSpaceByInfo({platform:n.platform,owner:n.owner,repo:n.repo});if(r){J.notificationService.info(t(`space.spaceExists`)),yv.focusSpace(r.id),M(!1),A(``),O(!1);return}yv.addSpace({platform:n.platform,owner:n.owner,repo:n.repo,readonly:!0},{focus:!0,silent:!0}),J.notificationService.success(t(`space.readOnlySpaceAdded`)),A(``),O(!1)}catch(e){console.error(`Failed to add read-only space:`,e),J.notificationService.error(t(`space.readOnlySpaceAddFailed`))}finally{M(!1)}}};return(0,U.jsxs)(tA,{children:[(0,U.jsx)(nA,{asChild:!0,children:e}),(0,U.jsxs)(aA,{align:`start`,side:`right`,className:`w-[280px] p-1`,sideOffset:6,children:[(0,U.jsx)(lA,{className:`px-2.5 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wider`,children:t(`space.addWorkspace`)}),(0,U.jsx)(uA,{className:`my-1`}),(0,U.jsxs)(`div`,{className:`space-y-1`,children:[(0,U.jsx)(oA,{onClick:ee,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(df,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`GitHub`}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(r?`space.selectRepository`:`space.needAuthorization`)})]}),r?_?(0,U.jsx)(_f,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):l?(0,U.jsx)(qd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsx)(Yd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,U.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,U.jsx)(Wd,{className:`h-3 w-3`})]})]})}),r&&l&&(0,U.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,U.jsxs)(H1,{className:`bg-transparent`,children:[(0,U.jsx)(U1,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,U.jsxs)(W1,{className:`max-h-[240px]`,children:[(0,U.jsx)(K1,{className:`p-0`,children:_?(0,U.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,U.jsx)(_f,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):h.length===0?(0,U.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):h.map(e=>(0,U.jsx)(J1,{onSelect:()=>N(`github`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!_&&h.length>0&&(0,U.jsx)(G1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,U.jsxs)(`div`,{className:`space-y-1`,children:[(0,U.jsx)(oA,{onClick:I,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(uf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`Gitee`}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(i?`space.selectRepository`:`space.needAuthorization`)})]}),i?x?(0,U.jsx)(_f,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):d?(0,U.jsx)(qd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsx)(Yd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,U.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,U.jsx)(Wd,{className:`h-3 w-3`})]})]})}),i&&d&&(0,U.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,U.jsxs)(H1,{className:`bg-transparent`,children:[(0,U.jsx)(U1,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,U.jsxs)(W1,{className:`max-h-[240px]`,children:[(0,U.jsx)(K1,{className:`p-0`,children:x?(0,U.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,U.jsx)(_f,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):y.length===0?(0,U.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):y.map(e=>(0,U.jsx)(J1,{onSelect:()=>N(`gitee`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!x&&y.length>0&&(0,U.jsx)(G1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,U.jsxs)(`div`,{className:`space-y-1`,children:[(0,U.jsx)(oA,{onClick:te,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(uf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`GitCode`}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(a?`space.selectRepository`:`space.needAuthorization`)})]}),a?T?(0,U.jsx)(_f,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):p?(0,U.jsx)(qd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsx)(Yd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,U.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,U.jsx)(Wd,{className:`h-3 w-3`})]})]})}),a&&p&&(0,U.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,U.jsxs)(H1,{className:`bg-transparent`,children:[(0,U.jsx)(U1,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,U.jsxs)(W1,{className:`max-h-[240px]`,children:[(0,U.jsx)(K1,{className:`p-0`,children:T?(0,U.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,U.jsx)(_f,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):C.length===0?(0,U.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):C.map(e=>(0,U.jsx)(J1,{onSelect:()=>N(`gitcode`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!T&&C.length>0&&(0,U.jsx)(G1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,U.jsx)(uA,{className:`my-1`}),(0,U.jsxs)(`div`,{className:`space-y-1`,children:[(0,U.jsx)(oA,{onClick:re,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(gf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:t(`space.addReadOnlySpace`)}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(`space.addReadOnlySpaceDesc`)})]}),D?(0,U.jsx)(qd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,U.jsx)(Yd,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`})]})}),D&&(0,U.jsxs)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2 space-y-2`,children:[(0,U.jsx)(gg,{value:k,onChange:e=>A(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),ie())},placeholder:t(`space.enterRepoUrl`),className:`h-8 text-sm`,disabled:j}),(0,U.jsx)(`button`,{onClick:ie,disabled:j||!k.trim(),className:`w-full h-8 text-xs bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:j?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_f,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):t(`space.addReadOnlySpace`)})]})]}),(0,U.jsx)(uA,{className:`my-1`}),(0,U.jsx)(oA,{onClick:ne,className:`px-2.5 py-2 cursor-pointer group`,children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(jf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:t(`space.localStart`)}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(`space.noLoginRequired`)})]})]})})]})]})},Q1=({activity:e,isExpanded:t})=>{let{icon:n=`AiOutlinePlusCircle`,name:r}=e,i=ep.useComponent(n)??(()=>null),a=(0,U.jsxs)(`button`,{className:q(`flex items-center transition-all duration-300 ease-in-out`,t?`px-3 py-1.5 w-full`:`p-1.5 aspect-square`,t?`rounded-sm`:`rounded-md`,`hover:bg-accent/80 hover:text-accent-foreground`,`data-[state=open]:pointer-events-none`,!t&&`justify-center`),onMouseDown:e=>e.preventDefault(),children:[(0,U.jsx)(i,{className:q(`flex-shrink-0 transition-all duration-300 ease-in-out`,t?`h-5 w-5`:`h-[22px] w-[22px]`,`hover:scale-105`)}),t&&(0,U.jsx)(`span`,{className:`ml-2.5 text-sm truncate text-muted-foreground animate-in fade-in-0 slide-in-from-left-2 duration-300`,children:r})]});return t?(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Z1,{children:(0,U.jsx)(`div`,{className:`flex justify-center w-full`,children:a})})}):(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsxs)(Id,{disableHoverableContent:!0,children:[(0,U.jsx)(Z1,{children:(0,U.jsx)(Ld,{asChild:!0,children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:a})})}),(0,U.jsx)(Rd,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:r})]})})},$1=Vg({initilize(e){let t=`addGiteeRepo`;e.componentService.register(`AiOutlinePlusCircle`,Le),e.componentService.register(`activity:${t}`,Q1),e.layoutService.activityBar.addActivity({id:t,icon:`AiOutlinePlusCircle`,name:K(`common.add`),order:100,unselectable:!0},!0),u_.getStore().waitUtilLoaded(()=>{u_.getStore().getData().length===0&&e.layoutService.activityBar.getActivityList().find(e=>e.id===t)&&e.eventBus.emit(Ad.ActivityBar.ActivityClicked(t))})}});var e0=Vg({initilize(e){let t=_v.LastFocusedSpaceId,n=[];e.eventBus.on(Ad.Space.SpacesChanged,r=>{let i=n.map(e=>e.id),a=r.map(e=>e.id);r.filter(e=>!i.includes(e.id));let o=n.filter(e=>!a.includes(e.id)),s=r.filter(e=>!n.includes(e));n=r,s.forEach(e=>{fv.add(e)}),o.forEach(e=>{fv.remove(e.id)});let c=e.layoutService.sidebar.getViewList(),l=e.layoutService.sidebar.getActiveViewId();if(!c.some(e=>e.id===l)){let n,r=vv.get(t);r&&c.some(e=>e.id===r)&&(n=r),n||=c[0]?.id,n&&e.layoutService.sidebar.setActiveViewId(n)}}),e.eventBus.on(Ad.ActivityBar.DragItem,({prevIndex:e,nextIndex:t})=>{u_.getStore().getActions().reduce(n=>{if(e===t)return n;let r=n.slice(0,Math.min(e,t)),i=n.slice(Math.max(e,t)+1),a=n.slice(Math.min(e,t)+1,Math.max(e,t)),o=n[e],s=n[t],c;return c=e<t?[...r,...a,s,o,...i]:[...r,o,s,...a,...i],c})})}});const t0=(e,t)=>{let[n,r]=(0,H.useState)(()=>{let n=J.registry.get(e);return n===void 0?t:n});return(0,H.useEffect)(()=>J.registry.subscribe(e,e=>{r(e)}),[]),[n,t=>J.registry.set(e,t)]};var n0=(0,H.createContext)({}),r0=({children:e,...t})=>{let n=(0,H.useContext)(n0);return(0,U.jsx)(n0.Provider,{value:{...n,...t},children:e})};const i0=()=>(0,H.useContext)(n0);var a0=r0,o0=({title:e,children:t,className:n=``,actions:r})=>{let i=i0();return(0,U.jsxs)(y,{className:[`side-card`,n].join(` `),w:`100%`,h:`100%`,overflow:`hidden`,flexShrink:0,gap:0,children:[(0,U.jsxs)(tA,{children:[(0,U.jsx)(D,{w:`100%`,h:`2.5rem`,align:`center`,flexShrink:0,className:`header`,px:4,py:2,bg:`gray.100`,_dark:{bg:`gray.800`,borderColor:`gray.700`},borderBottom:`1px solid`,borderColor:`gray.200`,children:(0,U.jsxs)(j,{align:`center`,w:`100%`,children:[(0,U.jsx)(S,{label:e,children:(0,U.jsx)(U.Fragment,{children:typeof e==`string`?(0,U.jsx)(f,{as:`b`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,overflow:`hidden`,fontSize:`lg`,color:`gray.800`,_dark:{color:`gray.200`},children:e}):e})}),(0,U.jsx)(nA,{asChild:!0,children:(0,U.jsx)(p,{"aria-label":`Options`,icon:(0,U.jsx)(He,{}),variant:`ghost`,size:`sm`,ml:`auto`,_hover:{bg:`gray.200`,_dark:{bg:`gray.600`}}})})]})}),(0,U.jsx)(aA,{align:`start`,sideOffset:4,className:`min-w-40`,children:r.map(e=>{let t={};return e.events&&e.id&&e.events.forEach(n=>t[`on${n}`]=t=>{J.eventBus.emit(`${e.id}::${n}`,{event:t,context:i}),e.id&&n.toLowerCase()===`click`&&J.eventBus.emit(Ad.Action.Clicked(e.id),{event:t,context:i})}),(0,U.jsxs)(oA,{...t,children:[e.icon,e.title]},e.title)})})]}),(0,U.jsx)(y,{m:`0 !important`,w:`100%`,flexGrow:1,overflow:`hidden`,gap:0,children:(0,U.jsx)(y,{w:`100%`,height:`100%`,overflowX:`hidden`,className:`flex-container-limited`,gap:0,children:t})})]})};function s0(e){let{t}=Nl(),{options:n=[],value:r,onChange:i,placeholder:a}=e,[o,s]=H.useState(!1),c=n.find(e=>e.value===r);return(0,U.jsxs)(dd,{open:o,onOpenChange:s,children:[(0,U.jsx)(fd,{asChild:!0,children:(0,U.jsxs)(hu,{variant:`ghost`,role:`combobox`,"aria-expanded":o,className:q(`flex w-full h-10 justify-start items-center flex-shrink overflow-hidden ml-1 px-1 py-1`,!o&&`bg-transparent`,`hover:bg-gray-200 dark:hover:bg-gray-600`,`focus:ring-0 focus:border-0`),children:[(0,U.jsxs)(`div`,{className:`flex items-center space-x-2 min-w-0 flex-grow`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 flex items-center justify-center w-7 h-7 bg-teal-200 dark:bg-teal-500 rounded-md`,children:(0,U.jsxs)(`span`,{className:`text-black dark:text-white font-semibold text-lg`,children:[c?.title?.charAt(0).toUpperCase(),` `]})}),(0,U.jsxs)(`span`,{className:q(`truncate flex-grow min-w-0`,r?`font-semibold text-base text-gray-800 dark:text-gray-200`:`text-gray-400 dark:text-gray-500`),children:[c?.label||a,` `]})]}),(0,U.jsx)(Ue,{className:`ml-2 h-4 w-4 shrink-0 opacity-50 text-gray-500 dark:text-gray-300`})]})}),(0,U.jsx)(pd,{className:`w-[300px] p-0 dark:bg-gray-800 dark:border-gray-700`,children:(0,U.jsxs)(H1,{defaultValue:r,filter:(e,t)=>{let r=n.find(t=>t.value===e);return r&&`${r.data?.platform} ${r.data?.repo} ${r.data?.owner}`.includes(t)?1:0},children:[(0,U.jsx)(U1,{placeholder:a,className:`h-9 dark:bg-gray-800 dark:text-gray-200`,onValueChange:e=>{}}),(0,U.jsx)(G1,{className:`dark:text-gray-400`,children:t(`tree.notFound`)}),(0,U.jsx)(K1,{children:(0,U.jsx)(W1,{children:n.map(e=>(0,U.jsxs)(J1,{value:e.value,className:`dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600`,onSelect:e=>{i?.(e===r?void 0:e),s(!1)},children:[e.label,(0,U.jsx)(Ke,{className:q(`ml-auto h-4 w-4`,r===e.value?`opacity-100 dark:text-gray-200`:`opacity-0`)})]},e.value))})})]})})]})}const c0=({space:e})=>{let{t}=Nl();return(0,U.jsxs)(`div`,{className:`flex items-center overflow-hidden w-full`,children:[(0,U.jsxs)(`div`,{className:`flex items-center overflow-hidden flex-shrink min-w-0 mr-1`,children:[(0,U.jsx)(`div`,{className:`text-s text-gray-500 truncate min-w-0`,children:e.owner}),(0,U.jsx)(`div`,{className:`text-s text-gray-500 flex-shrink-0 mx-0.5`,children:`/`}),(0,U.jsx)(`div`,{className:`text-s text-gray-500 truncate min-w-0 flex-shrink`,children:e.repo})]}),e.readonly&&(0,U.jsxs)(`div`,{className:`flex items-center text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 rounded-full px-1 mr-1 flex-shrink-0`,children:[(0,U.jsx)(vf,{className:`h-2.5 w-2.5 mr-0.5`}),(0,U.jsx)(`span`,{children:t(`space.readonly`)})]}),(0,U.jsx)(`div`,{className:`text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 rounded-full px-1 flex-shrink-0`,children:e.platform})]})},l0={NodeContentLoaded:`NodeContentLoaded`,TreeOpened:`TreeOpened`,CopyFilePath:yr(`copyFilePath`),DownloadFile:yr(`downloadFile`),NodeClick:yr(`node::click`),AddMarkdownAt:yr(`addMarkdownAt`),AddFileAt:yr(`addFileAt`),AddFolderAt:yr(`addFolderAt`),DeleteNode:yr(`deleteNode`),EditNode:yr(`editNode`),EditBlur:yr(`editBlur`),EditKeyEnter:yr(`editKeyEnter`),EditKeyDown:yr(`editKeyDown`),EditChange:yr(`editProgress`),EditWillFinish:yr(`editWillFinish`),RefreshNode:yr(`refreshNode`),KeydownEnter:yr(`keydownEnter`),DragStart:yr(`dragStart`),DragEnd:yr(`dragEnd`),DragEnter:yr(`dragEnter`),DragLeave:yr(`dragLeave`),DragOver:yr(`dragOver`),Drop:yr(`drop`),NodeMoved:yr(`nodeMoved`)},u0={TreeService:yr(`treeService`),EditInputNodeName:yr(`edit.inputNodeName`),RefershNode:yr(`refreshNode`)},d0={FilterNodes:yr(`filterNodes`)};let f0=function(e){return e.File=`file`,e.Dir=`dir`,e}({}),p0=function(e){return e.PlainText=`plainText`,e.Markdown=`markdown`,e}({});const m0=()=>({createPlugin:e=>(t={})=>{let{id:n,name:r,description:i,addOptions:a=()=>({}),...o}=e,s=a(),c=e=>(Object.assign(s,e),l),l={id:n,name:r,description:i,options:s,configure:c};c(t);let u={};for(let e in o)u[e]=o[e].bind(l);return Object.assign(l,u)}}),h0=()=>m0().createPlugin,g0=(...e)=>h0()(...e),_0=()=>({createPlugin:e=>m0().createPlugin(e)}),v0=e=>(...t)=>g0(e)(...t),y0={TreeService:yr(`treeService`)},b0={DraggedNodeInfo:yr(`draggedNodeInfo`)},x0=(0,H.createContext)(void 0),S0=()=>{let e=(0,H.useContext)(x0);if(!e)throw Error(`No tree context provided`);return e},C0=(0,H.createContext)(void 0),w0=()=>{let e=(0,H.useContext)(C0);if(!e)throw Error(`No tree context provided`);return e},T0=v0({activate({eventBus:e,viewSystem:t,serviceBus:n,dataStore:r}){let i=n.createProxy(y0.TreeService);e.on(l0.NodeClick,({node:{id:e}})=>i.toggleNode({id:e})),e.on(l0.EditKeyEnter,({node:{id:e}})=>i.toggleNode({id:e}))}});let E0=function(e){return e.FILE=`file`,e.DIR=`dir`,e}({});const D0=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t.endsWith(`/`)?t+=e[n]:t+=`/`+e[n];return t},O0=(e,t)=>{let n=e.split(`/`),r=t.split(`/`);return n.length<=r.length?!1:n.slice(0,r.length).every((e,t)=>e===r[t])},k0=(e,t,n)=>{let{registry:r}=S0(),[i,a]=(0,H.useState)(null),[o,s]=(0,H.useState)(null);return{dragPosition:i,canDrop:(0,H.useMemo)(()=>{if(o&&i===`inside`){let n=t.getNode(o.draggedId);if(e.type!==E0.DIR||n?.type===E0.DIR||O0(n?.path||``,e.path||``))return!1}return!0},[i,o,e,t]),handleDragStart:t=>{t.stopPropagation(),r.set(b0.DraggedNodeInfo,{nodeId:e.id}),n.emit(l0.DragStart,{node:e,event:t})},handleDragOver:t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect=`move`;let i=t.currentTarget.getBoundingClientRect(),o=r.get(b0.DraggedNodeInfo)?.nodeId;s({draggedId:o});let c=t.clientY-i.top;c<i.height*.25?a(`before`):c>i.height*.75?a(`after`):a(`inside`),n.emit(l0.DragOver,{node:e,event:t})},handleDragEnter:t=>{t.stopPropagation(),n.emit(l0.DragEnter,{node:e,event:t})},handleDragLeave:t=>{t.stopPropagation(),a(null),n.emit(l0.DragLeave,{node:e,event:t})},handleDrop:t=>{t.preventDefault(),t.stopPropagation(),i&&n.emit(l0.Drop,{node:e,event:t,position:i}),a(null)}}};var A0=t(Dt(),1);const j0=({node:e,level:t,context:n,parentNode:r})=>{let{dataStore:i,viewSystem:a,eventBus:o}=n,{renderer:s}=a,{id:c}=e,u=i.useNode(c);if(!u)return null;let{children:d}=u,{expanded:f,highlight:p,isDragOver:m}=a.viewStateStore.useRecord(c)||a.getDefaultViewState({id:c}),{dragPosition:h,canDrop:g,handleDragStart:_,handleDragOver:v,handleDragEnter:y,handleDragLeave:b,handleDrop:x}=k0(u,i,o);return(0,U.jsx)(x0.Provider,{value:n,children:(0,U.jsx)(j,{w:`100%`,direction:`column`,className:(0,A0.default)(`tree-node-wrapper relative`,{"cursor-no-drop":!g&&m}),draggable:!0,onDragStart:_,onDragOver:v,onDragEnter:y,onDragLeave:b,onDrop:x,children:(0,U.jsxs)(j,{direction:`row`,w:`100%`,align:`center`,overflow:`hidden`,className:(0,A0.default)({"tree-node":!0,"tree-node-highlight":p,"tree-root-node":t===0,"bg-gray-200 dark:bg-gray-700 bg-opacity-50 dark:bg-opacity-50":m&&g,"outline outline-2 outline-blue-500 dark:outline-blue-400":m&&h===`inside`&&g,"outline outline-2 outline-red-500 dark:outline-red-400":m&&h===`inside`&&!g,[`level-${t}`]:!0}),children:[t>1&&(0,U.jsx)(l,{className:`placeholder`,w:3,flexShrink:0,flexGrow:0}),(0,U.jsxs)(j,{className:`tree-node-content`,flexFlow:`column`,h:`100%`,flexGrow:1,align:`center`,overflow:`hidden`,children:[s.render({type:`tree-node-header`,props:{node:e,level:t,parentNode:r,dragPosition:h,isDragOver:m,canDrop:g}},0),s.render({type:`tree-node-list`,props:{nodes:d,expanded:f,parentNode:e,level:t}},1)]})]})},c)})};var M0=class{nodeMap=new Map;child2Parent={};parent2Children={};nodeSubjects=new Map;childrenSubjects=new Map;constructor(e){this.initSubTree(void 0,e)}initSubTree=(e,t,n)=>{let{overwrite:r}=n||{};if(!r&&this.nodeMap.has(t.id))throw Error(`Node ${t.id} already exists`);this.nodeMap.set(t.id,{id:t.id,data:t.data}),e&&(this.child2Parent[t.id]=e,this.parent2Children[e]=[...this.parent2Children[e]||[],t.id]),t.children&&t.children.forEach(e=>this.initSubTree(t.id,e))};getNode=e=>this.nodeMap.get(e);getParentNode=e=>{let t=this.child2Parent[e];return t?this.getNode(t):void 0};getChildrenIds=e=>this.parent2Children[e]||[];getSubTree=e=>{let t=this.getNode(e);if(!t)return;let n=this.getChildrenIds(e).map(e=>this.getSubTree(e));return{...t,children:n}};createObservableOfSubject=e=>{let{topic:t,getSubject:n,setSubject:r,removeSubject:i,emitCurrentValueOnSubscribe:a,getCurrentValue:o}=e;return ys(()=>{let e=n(t);return e||(e=a&&o?new bo(o()):new ft,r(t,e)),e.asObservable()}).pipe(As({bufferSize:1,refCount:!0}),Es(()=>{let e=n(t);e&&!e.observed&&i(t)}))};getNodeObservable(e,t){return this.createObservableOfSubject({topic:e,getSubject:e=>this.nodeSubjects.get(e),setSubject:(e,t)=>this.nodeSubjects.set(e,t),removeSubject:e=>this.nodeSubjects.delete(e),emitCurrentValueOnSubscribe:t?.emitCurrentValueOnSubscribe,getCurrentValue:()=>this.getNode(e)})}getChildrenIdsObservable(e,t){return this.createObservableOfSubject({topic:e,getSubject:e=>this.childrenSubjects.get(e),setSubject:(e,t)=>this.childrenSubjects.set(e,t),removeSubject:e=>this.childrenSubjects.delete(e),emitCurrentValueOnSubscribe:t?.emitCurrentValueOnSubscribe,getCurrentValue:()=>this.getChildrenIds(e)})}observeNode=(e,t,n)=>{this.nodeSubjects.has(e)||this.nodeSubjects.set(e,new ft);let r=this.nodeSubjects.get(e),i=r.subscribe(t);return n?.fireImmediately&&t(this.getNode(e)),()=>{i.unsubscribe(),r.observed||this.nodeSubjects.delete(e)}};observeChildrenIds=(e,t,n)=>{this.childrenSubjects.has(e)||this.childrenSubjects.set(e,new ft);let r=this.childrenSubjects.get(e),i=r.subscribe(t);return n?.fireImmediately&&t(this.getChildrenIds(e)),()=>{i.unsubscribe(),r.observed||this.childrenSubjects.delete(e)}};updateNode=e=>(this.nodeMap.set(e.id,e),this.nodeSubjects.get(e.id)?.next(e),!0);addNode=(e,...t)=>{this.getNode(e)&&(t.forEach(t=>{this.nodeMap.set(t.id,t),this.child2Parent[t.id]=e}),this.parent2Children[e]=[...this.parent2Children[e]||[],...t.map(e=>e.id)],t.forEach(e=>{this.nodeSubjects.get(e.id)?.next(e)}),this.childrenSubjects.get(e)?.next(this.getChildrenIds(e)))};sortChildren=(e,t)=>{let n=this.getChildrenIds(e).sort(t);this.parent2Children[e]=n,this.childrenSubjects.get(e)?.next(n)};sortSubTree=(e,t)=>{this.sortChildren(e,t),this.getChildrenIds(e).forEach(e=>this.sortSubTree(e,t))};removeNode=e=>{if(!this.getNode(e))return;let t=this.child2Parent[e];t&&(this.parent2Children[t]=this.parent2Children[t]?.filter(t=>t!==e)),this.nodeMap.delete(e),delete this.child2Parent[e],delete this.parent2Children[e],this.nodeSubjects.get(e)?.next(void 0),this.nodeSubjects.get(e)?.complete(),this.nodeSubjects.delete(e),this.childrenSubjects.get(e)?.next([]),this.childrenSubjects.get(e)?.complete(),this.childrenSubjects.delete(e)}},N0=class{tree;rootId;constructor(e){this.tree=new M0(e),this.rootId=e.id,this.sortSubTree(this.rootId)}getRootMenuTree=()=>{let e=this.getMenuTree(this.rootId);return{...e,children:e.children||[]}};getMenuTree=e=>this.tree.getSubTree(e);getMenuItem=e=>this.tree.getNode(e);addMenuItems=e=>{e.reduce((e,t)=>{let n=t.data.parentId,r=e.find(e=>e.parentId===n);return r?r.items.push(t):e.push({parentId:n,items:[t]}),e},[]).forEach(e=>{if(!e.parentId)throw Error(`Invalid menu item: parentId is required.`);this.tree.addNode(e.parentId,...e.items),this.sortChildren(e.parentId)})};sortChildren=e=>this.tree.sortChildren(e,(e,t)=>(this.tree.getNode(e).data.order??1/0)-(this.tree.getNode(t).data.order??1/0));sortSubTree=e=>{this.tree.sortSubTree(e,(e,t)=>(this.tree.getNode(e).data.order??1/0)-(this.tree.getNode(t).data.order??1/0))};addMenuTree=e=>{this.tree.initSubTree(e.data.parentId,e),e.data.parentId?this.sortSubTree(e.data.parentId):this.sortSubTree(e.id)};updateMenuItem=e=>{this.tree.updateNode(e),e.data.parentId&&this.sortChildren(e.data.parentId)};removeMenuItem=e=>this.tree.removeNode(e);getMenuItemObservable=(e,t)=>this.tree.getNodeObservable(e,t);getChildrenIdsObservable=(e,t)=>this.tree.getChildrenIdsObservable(e,t)},P0=class{add(e,t,n){if(typeof arguments[0]!=`string`)for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else (Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][n?`unshift`:`push`](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}},F0=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(e=>{if(typeof e!=`object`||!e.name||!e.init)throw Error(`Invalid JSEP plugin format`);this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)})}},I0=class e{static get version(){return`1.4.0`}static toString(){return`JavaScript Expression Parser (JSEP) v`+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,n,r){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=n,r?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,n){return e.literals[t]=n,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(e=>e.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(e){let t=Error(e+` at character `+this.index);throw t.index=this.index,t.description=e,t}runHook(t,n){if(e.hooks[t]){let r={context:this,node:n};return e.hooks.run(t,r),r.node}return n}searchHook(t){if(e.hooks[t]){let n={context:this};return e.hooks[t].find(function(e){return e.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook(`gobble-spaces`)}parse(){this.runHook(`before-all`);let t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook(`after-all`,n)}gobbleExpressions(t){let n=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===e.SEMCOL_CODE||r===e.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(r===t)break;this.throwError(`Unexpected "`+this.char+`"`)}return n}gobbleExpression(){let e=this.searchHook(`gobble-expression`)||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook(`after-expression`,e)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),n=t.length;for(;n>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,r,i,a,o,s,c,l;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(a={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},s=this.gobbleToken(),s||this.throwError(`Expected expression after `+n),i=[o,a,s];n=this.gobbleBinaryOp();){if(r=e.binaryPrecedence(n),r===0){this.index-=n.length;break}a={value:n,prec:r,right_a:e.right_associative.has(n)},l=n;let c=e=>a.right_a&&e.right_a?r>e.prec:r<=e.prec;for(;i.length>2&&c(i[i.length-2]);)s=i.pop(),n=i.pop().value,o=i.pop(),t={type:e.BINARY_EXP,operator:n,left:o,right:s},i.push(t);t=this.gobbleToken(),t||this.throwError(`Expected expression after `+l),i.push(a,t)}for(c=i.length-1,t=i[c];c>1;)t={type:e.BINARY_EXP,operator:i[c-1].value,left:i[c-2],right:t},c-=2;return t}gobbleToken(){let t,n,r,i;if(this.gobbleSpaces(),i=this.searchHook(`gobble-token`),i)return this.runHook(`after-token`,i);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)i=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),r=n.length;r>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=r;let t=this.gobbleToken();return t||this.throwError(`missing unaryOp argument`),this.runHook(`after-token`,{type:e.UNARY_EXP,operator:n,argument:t,prefix:!0})}n=n.substr(0,--r)}e.isIdentifierStart(t)?(i=this.gobbleIdentifier(),e.literals.hasOwnProperty(i.name)?i={type:e.LITERAL,value:e.literals[i.name],raw:i.name}:i.name===e.this_str&&(i={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook(`after-token`,i)):this.runHook(`after-token`,!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){let r;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError(`Unexpected "`+this.char+`"`),this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError(`Unclosed [`),this.index++):n===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(n===e.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t=``,n,r;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n===`e`||n===`E`){for(t+=this.expr.charAt(this.index++),n=this.char,(n===`+`||n===`-`)&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError(`Expected exponent (`+t+this.char+`)`)}return r=this.code,e.isIdentifierStart(r)?this.throwError(`Variable names cannot start with a number (`+t+this.char+`)`):(r===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError(`Unexpected period`),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t=``,n=this.index,r=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let e=this.expr.charAt(this.index++);if(e===r){i=!0;break}else if(e===`\\`)switch(e=this.expr.charAt(this.index++),e){case`n`:t+=`
`;break;case`r`:t+=`\r`;break;case`t`:t+=`	`;break;case`b`:t+=`\b`;break;case`f`:t+=`\f`;break;case`v`:t+=`\v`;break;default:t+=e}else t+=e}return i||this.throwError(`Unclosed quote after "`+t+`"`),{type:e.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError(`Unexpected `+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){let n=[],r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let a=this.code;if(a===t){r=!0,this.index++,t===e.CPAREN_CODE&&i&&i>=n.length&&this.throwError(`Unexpected token `+String.fromCharCode(t));break}else if(a===e.COMMA_CODE){if(this.index++,i++,i!==n.length){if(t===e.CPAREN_CODE)this.throwError(`Unexpected token ,`);else if(t===e.CBRACK_CODE)for(let e=n.length;e<i;e++)n.push(null)}}else if(n.length!==i&&i!==0)this.throwError(`Expected comma`);else{let t=this.gobbleExpression();(!t||t.type===e.COMPOUND)&&this.throwError(`Expected comma`),n.push(t)}}return r||this.throwError(`Expected `+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError(`Unclosed (`)}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},L0=new P0;Object.assign(I0,{hooks:L0,plugins:new F0(I0),COMPOUND:`Compound`,SEQUENCE_EXP:`SequenceExpression`,IDENTIFIER:`Identifier`,MEMBER_EXP:`MemberExpression`,LITERAL:`Literal`,THIS_EXP:`ThisExpression`,CALL_EXP:`CallExpression`,UNARY_EXP:`UnaryExpression`,BINARY_EXP:`BinaryExpression`,ARRAY_EXP:`ArrayExpression`,TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set([`**`]),additional_identifier_chars:new Set([`$`,`_`]),literals:{true:!0,false:!1,null:null},this_str:`this`}),I0.max_unop_len=I0.getMaxKeyLen(I0.unary_ops),I0.max_binop_len=I0.getMaxKeyLen(I0.binary_ops);var R0=e=>new I0(e).parse(),z0=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(I0).filter(e=>!z0.includes(e)&&R0[e]===void 0).forEach(e=>{R0[e]=I0[e]}),R0.Jsep=I0;var B0=`ConditionalExpression`;R0.plugins.register({name:`ternary`,init(e){e.hooks.add(`after-expression`,function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let n=t.node,r=this.gobbleExpression();if(r||this.throwError(`Expected expression`),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let i=this.gobbleExpression();if(i||this.throwError(`Expected expression`),t.node={type:B0,test:n,consequent:r,alternate:i},n.operator&&e.binary_ops[n.operator]<=.9){let r=n;for(;r.right.operator&&e.binary_ops[r.right.operator]<=.9;)r=r.right;t.node.test=r.right,r.right=t.node,t.node=n}}else this.throwError(`Expected :`)}})}});function V0(e){let t=R0(e),n=H0(t);return{eval:U0(t),dependencies:n}}function H0(e){let t=new Set;function n(e){switch(e.type){case`Identifier`:t.add(e.name);break;case`BinaryExpression`:n(e.left),n(e.right);break;case`UnaryExpression`:n(e.argument);break}}return n(e),Array.from(t)}function U0(e){return function(t){return W0(e,t)}}function W0(e,t){switch(e.type){case`Literal`:return e.value;case`CallExpression`:return G0(e,t);case`Identifier`:return t[e.name];case`BinaryExpression`:return K0(e.operator,W0(e.left,t),W0(e.right,t));case`UnaryExpression`:return K0(e.operator,W0(e.argument,t));default:throw Error(`Unsupported node type: ${e.type}`)}}function G0(e,t){let n=e.callee;if(n.type===`MemberExpression`){let r=n,i=W0(r.object,t),a=r.property.name,o=e.arguments.map(e=>W0(e,t));if(typeof i==`string`&&typeof o[0]==`string`){if(a===`endsWith`)return i.endsWith(o[0]);if(a===`startsWith`)return i.startsWith(o[0])}}return!1}function K0(e,t,n){switch(e){case`==`:return t==n;case`!=`:return t!=n;case`===`:return t===n;case`!==`:return t!==n;case`<`:return t<n;case`<=`:return t<=n;case`>`:return t>n;case`>=`:return t>=n;case`&&`:return t&&n;case`||`:return t||n;case`!`:return!t;default:throw Error(`Unsupported operator: ${e}`)}}var q0=class extends N0{};const J0=(e,t)=>{let{validationRules:n}=e.data,r={isValid:!0,message:``};if(!n)return r;for(let e of n){let{check:n,failMessage:i}=e;if(!V0(n).eval(t))return r.isValid=!1,r.message=i,r}return r};var Y0=(e,t)=>{if(!t)return null;if(typeof t==`string`)return e.render({type:t});let{name:n,color:r,className:i,style:a}=t,o=e.render({type:n});return!r&&!i&&!a?o:(0,U.jsx)(`span`,{className:i,style:r?{color:r,...a??{}}:a,children:o})};const X0=({node:e,level:t})=>{let{viewSystem:n}=S0();return c2({nodeMenuItems:n.getNodeMenuItems({node:e,level:t}),viewSystem:n,node:e,level:t})},Z0=({menuItem:e})=>{let{viewSystem:{renderer:t},eventBus:n}=S0(),{data:{event:r}}=e,i=w0(),{node:a,level:o}=i,{isValid:s,message:c}=J0(e,{...a,level:o});return console.log(`[MenuItemView]`,e.data,`node:`,a,`level:`,o,`result:`,{isValid:s,message:c}),(0,U.jsx)(oA,{disabled:!s,onClick:e=>{s&&r&&n.emit(r,{...i,event:e})},children:(0,U.jsxs)(`div`,{className:`flex flex-col gap-1 min-w-0`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 min-w-0`,children:[Y0(t,e.data.icon),(0,U.jsx)(`span`,{className:`truncate`,children:e.data.label})]}),!s&&c&&(0,U.jsx)(`span`,{className:`text-xs text-muted-foreground truncate`,children:c})]})})},Q0=({menuTree:e})=>{let{viewSystem:{renderer:t}}=S0();return e.children&&e.children.length>0?(0,U.jsxs)(tA,{children:[(0,U.jsx)(nA,{asChild:!0,children:(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,className:`focus:outline-none h-6 w-6`,children:Y0(t,e.data.icon)??e.data.label})}),(0,U.jsx)(aA,{className:`w-auto min-w-[180px] max-w-[320px]`,children:e.children?.map(e=>(0,U.jsx)(Z0,{menuItem:e},e.id))})]}):null},$0=({menuItems:e,node:t,level:n})=>{let r=(0,H.useMemo)(()=>({node:t,level:n}),[t,n]);return(0,U.jsx)(C0.Provider,{value:r,children:(0,U.jsx)(`div`,{className:`flex items-center gap-1 pr-1 hover-visible`,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:e.map(e=>(0,U.jsx)(Q0,{menuTree:e},e.id))})})},e2=({inputRef:e,value:t,name:n,parentNode:r,eventBus:i,node:a})=>(0,U.jsxs)(`div`,{className:`relative w-full`,children:[(0,U.jsx)(`input`,{ref:e,type:`text`,autoFocus:!0,value:t,onChange:i.connector(l0.EditChange,e=>({node:a,event:e,parentNode:r})),onBlur:i.connector(l0.EditBlur,e=>({node:a,event:e,parentNode:r})),onKeyDown:e=>{e.code.toLowerCase()===`enter`&&i.emit(l0.EditKeyEnter,{node:a,event:e,parentNode:r})},defaultValue:n,className:`w-full text-base pl-0 bg-transparent border-none focus:outline-none`,placeholder:`请输入名称`}),(0,U.jsx)(`div`,{className:`absolute left-0 bottom-0 w-full h-[2px] bg-gray-500`}),(0,U.jsx)(`div`,{className:`absolute left-0 bottom-0 w-full h-[2px] bg-blue-600 transform scale-x-0 transition-transform duration-300 ease-in-out focus-within:scale-x-100`})]}),t2=({viewState:e,viewSystem:t})=>e.expandable?e.expanded?t.render(`icon-expanded`):t.render(`icon-collapsed`):(0,U.jsx)(l,{className:`invisible`,children:t.render(`icon-collapsed`)}),n2=(e,t)=>{let{eventBus:n}=S0();return{handleNodeClick:t=>{n.emit(l0.NodeClick,{node:e,event:t})},handleKeyDown:t=>{t.code.toLowerCase()===`enter`&&n.emit(l0.KeydownEnter,{node:e,event:t})}}};var r2=t(Dt(),1);const i2=({node:e,level:t,parentNode:n,dragPosition:r,isDragOver:i,canDrop:a})=>{let{viewSystem:o,dataStore:s,eventBus:c}=S0(),u=s.useNode(e.id),{renderer:d}=o;if(!u)return null;let{name:p}=u,m=o.viewStateStore.useRecord(e.id)||o.getDefaultViewState({id:e.id}),h=(0,H.useRef)(null),{handleNodeClick:g,handleKeyDown:_}=n2(e,n);return(0,H.useEffect)(()=>{setTimeout(()=>{if(m.editMode&&h.current){h.current.focus();let e=p.lastIndexOf(`.`);e>0&&h.current.setSelectionRange(0,e)}})},[m.editMode,p]),(0,H.useEffect)(()=>m.validationMessage&&m.editMode&&h.current?J.popupService.open({target:h.current,content:m.validationMessage}):()=>{},[m.validationMessage,m.editMode]),(0,U.jsxs)(j,{className:`tree-node-content-top h-8 mt-0.5 mb-0.5 items-center overflow-hidden ${t===0?`ml-2`:``}`,width:`100%`,position:`relative`,children:[r===`before`&&(0,U.jsx)(l,{className:`h-0.5  bg-blue-500  absolute top-0 left-0 right-0`}),(0,U.jsxs)(j,{className:(0,r2.default)(`min-w-0 h-9 mr-2 max-h-full w-full items-center overflow-hidden hover-action tree-node-header`,{"can-drop":i&&a}),onClick:g,tabIndex:-1,onKeyDown:_,position:`relative`,border:i&&a&&r===`inside`?`1px solid blue`:`none`,bg:i&&a&&r===`inside`?`blue`:`transparent`,children:[(0,U.jsxs)(j,{className:`items-center overflow-hidden pr-2 hover-action`,minWidth:`0`,flex:`1`,children:[(0,U.jsx)(t2,{viewState:m,viewSystem:o}),(0,U.jsx)(l,{flexShrink:0,children:m.loading?o.render(`icon-loading`,{size:`1rem`}):o.render(`icon-node-type`,{node:e})}),(0,U.jsx)(l,{width:`0.5rem`,flexShrink:0}),(0,U.jsx)(l,{minWidth:`0`,flex:`1`,children:m.editMode?(0,U.jsx)(e2,{inputRef:h,value:m.editingName,name:p,parentNode:n,eventBus:c,node:e}):(0,U.jsx)(f,{fontSize:`1rem`,title:p,isTruncated:!0,children:p})})]}),(0,U.jsx)(j,{className:`action-box items-center justify-center h-full`,flexShrink:0,children:d.render({type:`tree-node-action-bar`,props:{node:e,level:t}})})]}),r===`after`&&(0,U.jsx)(l,{className:`h-0.5  bg-blue-500 absolute bottom-0 left-0 right-0`})]})},a2=(e,t)=>{let n=/(\d+)|(\D+)/g,r=e.name.match(n),i=t.name.match(n);if(!r||!i)return e.name.localeCompare(t.name);for(;r.length&&i.length;){let e=r.shift(),t=i.shift();if(e===void 0||t===void 0)break;if(!isNaN(parseInt(e))&&!isNaN(parseInt(t))){let n=parseInt(e)-parseInt(t);if(n!==0)return n}else if(e!==t)return e.localeCompare(t)}return r.length-i.length};var o2=t(Dt(),1);const s2=({expanded:e,nodes:t,parentNode:n,level:r})=>{let{hookRegistry:i,viewSystem:a}=S0(),o=e=>i.getHooks(d0.FilterNodes).reduce((e,t)=>t(e),e);return(0,U.jsx)(j,{direction:`column`,ml:`0.5rem`,className:(0,o2.default)({[`level-${r}`]:!0,"tree-node-children-list":!0,"tree-node-children-list-expanded":e,"tree-node-children-list-collapsed":!e,[w`
          height: ${t?.length?`auto`:`0`};
        `]:e,[w`
          flex-grow: 1;
          overflow-y: auto;
          max-height: 100%;
        `]:r===0}),w:`calc(100% - 0.5rem)`,children:t&&o([...t].sort(a2).sort((e,t)=>(e.type===`file`?1:0)-(t.type===`file`?1:0))).map(e=>a.renderNode({node:e,level:r+1,parentNode:n}))})},c2=({nodeMenuItems:e,viewSystem:t,node:n,level:r})=>{let i;return i=e.length===0?null:(0,U.jsx)($0,{menuItems:e,node:n,level:r}),i},l2=v0({activate({viewSystem:e,hookRegistry:t,dataStore:n,eventBus:r}){let{renderer:i}=e,a=x,o=E,s=()=>(0,U.jsx)(Ve,{className:w`
        animation: ${_`
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    `} 1s linear infinite;
      `}),c=Ee;e.renderer.register(`icon-expanded`,o),e.renderer.register(`icon-collapsed`,a),e.renderer.register(`icon-ellipsis`,c),e.renderer.register(`icon-expanded-default`,o),e.renderer.register(`icon-collapsed-default`,a),e.renderer.register(`icon-ellipsis-default`,c),e.renderer.register(`icon-node-type`,()=>null),e.renderer.register(`icon-loading`,s),e.setDefaultViewStateProvider((e,t)=>({id:e.id,expanded:!1,editMode:!1,expandable:!0,highlight:!1,...t})),i.register(`tree-node-action-bar`,X0),i.register(`tree-node-header`,i2),i.register(`tree-node-list`,s2),e.renderer.register(`tree-node`,j0)}}),u2=e=>{let{viewSystem:t,dataStore:n,options:{defaultExpanded:r=!1}}=e;return class{toggleNode=({id:e,event:i})=>{i&&(i.stopPropagation(),i.preventDefault());let a=n.getNode(e),o=t.viewStateStore.getRecord(e)||t.getDefaultViewState(a,{expanded:r});t.viewStateStore.getActions().upsert({...o,expanded:!o.expanded})};expandNode=({id:e,event:i})=>{i&&(i.stopPropagation(),i.preventDefault());let a=n.getNode(e),o=t.viewStateStore.getRecord(e)||t.getDefaultViewState(a,{expanded:r});t.viewStateStore.getActions().upsert({...o,expanded:!0})};async moveNode(e,t){throw Error(`not implemented`)}}};var d2=bj.markdown.color,f2=`var(--folder-icon-color, #facc15)`,p2=_0().createPlugin({addOptions(){return{addable:({node:e})=>e.type===f0.Dir}},activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r,options:{space:{id:i}}}){e.addNodeMenuItems([{id:`addFile`,key:`addFile`,name:K(`tree.newFile`),label:K(`tree.newFile`),event:l0.AddFileAt.name,when:`type === 'dir'`,icon:`FilePlus`,group:`add`},{id:`addNode`,key:`addNode`,name:K(`tree.newFolder`),label:K(`tree.newFolder`),event:l0.AddFolderAt.name,when:`type === 'dir'`,icon:{name:`FolderPlus`,color:f2},group:`add`},{id:`addMarkdownDocumnet`,key:`addMarkdownDocumnet`,label:K(`tree.newMarkdown`),event:l0.AddMarkdownAt.name,when:`type === 'dir'`,icon:{name:`SiMarkdown`,color:d2},group:`add`}]),t.on(l0.AddMarkdownAt,({node:e})=>{t.emit(l0.AddFileAt,{node:e,documentType:p0.Markdown})}),t.on(l0.AddFileAt,({node:e,documentType:a})=>{let o=e.id,s=n.getNode(o),c=u_.getStore().getRecord(i),l=Lt();r.invoke(u0.EditInputNodeName,{parentId:o,defaultName:a===p0.Markdown?`Untitled.md`:``,nodeType:f0.File,callback:async e=>{let r=D0(s.path,e),i={id:l,type:f0.File,path:r,name:e};n.getActions().add({node:{...i,loading:!0},parentId:o});try{console.log(`writeFile`,u_.getUri(c?.id,r)),await ap.writeFile(u_.getUri(c?.id,r),new TextEncoder().encode(`# `),{create:!0,overwrite:!0}),console.log(`writeFile success`),n.getActions().update({node:i}),console.log(`emit NodeClick`),t.emit(l0.NodeClick,{node:i})}catch{n.getActions().delete({id:l}),J.notificationService.error(`Failed to create file`)}}})}),t.on(l0.AddFolderAt,({node:e})=>{let t=e.id,a=n.getNode(t),o=u_.getStore().getRecord(i),s=Lt();r.invoke(u0.EditInputNodeName,{parentId:t,nodeType:f0.Dir,callback:async e=>{let r=D0(a.path,e);await ap.createDirectory(u_.getUri(o?.id,r)),n.getActions().add({node:{id:s,type:f0.Dir,path:r,name:e,children:[]},parentId:t})}})})}}),m2=_0().createPlugin({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r,options:{space:{platform:i,owner:a,repo:o}}}){let s=r.createProxy(u0.TreeService);t.on(l0.TreeOpened,()=>{let e=n.getData();if(!e||!e.children)return;let t=(()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`})()===`zh`?`Excalidraw-示例.excalidraw.json`:`Excalidraw-Example.excalidraw.json`,r=e.children.find(e=>e.name===t&&e.type===f0.File);r&&s.openNode(r.id)})}});const h2=_0().createPlugin,g2=h2({activate({hookRegistry:e}){e.addHook(d0.FilterNodes,e=>e.length>1?e.filter(e=>e.name.toLowerCase()!==`.keep`):e)}});var _2=g0({activate({serviceBus:e}){e.invoke(u0.RefershNode,`root`)}}),v2=g0({activate({dataStore:e}){let t=e=>{let n={...e};return n.id=n.id||`node-${Lt()}`,n.children&&n.children.length&&(n.children=n.children.map(t)),n.id===`root`&&(n.path=`/`,n.type=`dir`,n.name=K(`common.file`)),n};setTimeout(()=>{let n=e.getData();e.getActions().init(t(n))},0)}});const y2=e=>e.id===`root`?`dir`:e.type,b2=e=>`file`;var x2=t(Dt(),1),S2=g0({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){r.createProxy(u0.TreeService),e.setDefaultViewStateProvider(({id:e},t)=>{let r,i=n.getNode(e);return r=y2(i)===`dir`,{...t,id:i.id,expanded:!1,editMode:!1,expandable:r}}),e.renderer.register(`icon-node-type`,({node:t})=>{let n=e.viewStateStore.useRecord(t.id)||e.getDefaultViewState(t),{editMode:r,editingName:a}=n,o=r?a??t.name:t.name;if(y2(t)===`dir`)return(0,U.jsx)(i,{className:`icon dir`,as:n?.expanded?be:ye});if(b2(t)===`file`){let e=xj(o);return(0,U.jsx)(i,{className:(0,x2.default)(`icon file`,w`
                  & {
                    color: ${e.color} !important;
                  }
                `),as:e.icon,color:e.color,opacity:.7})}return(0,U.jsx)(f,{as:`h3`,children:` `})},!0)}}),C2=_0().createPlugin({activate({viewSystem:{renderer:e}}){e.register(`Link`,gf),e.register(`FolderPlus`,lf),e.register(`FilePlus`,sf),e.register(`Plus`,Tf),e.register(`Brain`,Gd),e.register(`Pencil`,wf),e.register(`Trash2`,Nf),e.register(`Copy`,tf),e.register(`FileText`,cf),e.register(`FileCode`,of),e.register(`RefreshCw`,Df),e.register(`PenTool`,Cf),e.register(`Network`,Sf),e.register(`SiMarkdown`,We)}}),w2=n(((e,t)=>{function n(e){if(typeof e!=`string`)throw TypeError(`Path must be a string. Received `+JSON.stringify(e))}function r(e,t){for(var n=``,r=0,i=-1,a=0,o,s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else if(o===47)break;else o=47;if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf(`/`);if(c!==n.length-1){c===-1?(n=``,r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}}else if(n.length===2||n.length===1){n=``,r=0,i=s,a=0;continue}}t&&(n.length>0?n+=`/..`:n=`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return n}function i(e,t){var n=t.dir||t.root,r=t.base||(t.name||``)+(t.ext||``);return n?n===t.root?n+r:n+e+r:r}var a={resolve:function(){for(var e=``,t=!1,i,a=arguments.length-1;a>=-1&&!t;a--){var o;a>=0?o=arguments[a]:(i===void 0&&(i=process.cwd()),o=i),n(o),o.length!==0&&(e=o+`/`+e,t=o.charCodeAt(0)===47)}return e=r(e,!t),t?e.length>0?`/`+e:`/`:e.length>0?e:`.`},normalize:function(e){if(n(e),e.length===0)return`.`;var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=r(e,!t),e.length===0&&!t&&(e=`.`),e.length>0&&i&&(e+=`/`),t?`/`+e:e},isAbsolute:function(e){return n(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return`.`;for(var e,t=0;t<arguments.length;++t){var r=arguments[t];n(r),r.length>0&&(e===void 0?e=r:e+=`/`+r)}return e===void 0?`.`:a.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t||(e=a.resolve(e),t=a.resolve(t),e===t))return``;for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,o=i-r,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var c=t.length-s,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(t.charCodeAt(s+d)===47)return t.slice(s+d+1);if(d===0)return t.slice(s+d)}else o>l&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var f=e.charCodeAt(r+d);if(f!==t.charCodeAt(s+d))break;f===47&&(u=d)}var p=``;for(d=r+u+1;d<=i;++d)(d===i||e.charCodeAt(d)===47)&&(p.length===0?p+=`..`:p+=`/..`);return p.length>0?p+t.slice(s+u):(s+=u,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),e.length===0)return`.`;for(var t=e.charCodeAt(0),r=t===47,i=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){i=o;break}}else a=!1;return i===-1?r?`/`:`.`:r&&i===1?`//`:e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!=`string`)throw TypeError(`"ext" argument must be a string`);n(e);var r=0,i=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return``;var s=t.length-1,c=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!a){r=o+1;break}}else c===-1&&(a=!1,c=o+1),s>=0&&(l===t.charCodeAt(s)?--s===-1&&(i=o):(s=-1,i=c))}return r===i?i=c:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else i===-1&&(a=!1,i=o+1);return i===-1?``:e.slice(r,i)}},extname:function(e){n(e);for(var t=-1,r=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(c===47){if(!a){r=s+1;break}continue}i===-1&&(a=!1,i=s+1),c===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===r+1?``:e.slice(t,i)},format:function(e){if(typeof e!=`object`||!e)throw TypeError(`The "pathObject" argument must be of type Object. Received type `+typeof e);return i(`/`,e)},parse:function(e){n(e);var t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,a;i?(t.root=`/`,a=1):a=0;for(var o=-1,s=0,c=-1,l=!0,u=e.length-1,d=0;u>=a;--u){if(r=e.charCodeAt(u),r===47){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),r===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||c===-1||d===0||d===1&&o===c-1&&o===s+1?c!==-1&&(s===0&&i?t.base=t.name=e.slice(1,c):t.base=t.name=e.slice(s,c)):(s===0&&i?(t.name=e.slice(1,o),t.base=e.slice(1,c)):(t.name=e.slice(s,o),t.base=e.slice(s,c)),t.ext=e.slice(o,c)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir=`/`),t},sep:`/`,delimiter:`:`,win32:null,posix:null};a.posix=a,t.exports=a})),T2=w2();const E2=e=>{let{dataStore:t,viewSystem:n,options:{space:r},eventBus:i}=e,{viewStateStore:a,getViewStateOrDefaultViewState:o}=n,s=u2(e);class c extends s{getSpace=()=>r;updateViewState=(e,t)=>{a.getActions().upsert({...o(e),...t})};getViewState=e=>o(e);deleteNode=async e=>{let{id:n,path:i}=e;this.updateViewState(n,{loading:!0});try{await J.fs.delete(u_.getUri(r.id,i)),t.getActions().delete({id:n})}catch{}finally{a.getRecord(n)&&this.updateViewState(n,{loading:!1})}let o=this.findParentNode(i);if(o&&o.children?.length===0){let e=this.findParentNode(o.path);e&&this.deepRefresh(e.id)}};getNodeIdFromPath=e=>e===`/`||e===``?`root`:e;findParentNode=e=>{let n=this.findPathNodes(e,t.getData());return n?.[n.length-1]};findPathNodes=(e,n)=>{let r=[];n||=t.getData();let i=e.split(`/`).filter(e=>e),a=n;r.push(a);let o=``,s=(e,t)=>[e,t].filter(e=>e).join(`/`),c=(e,t)=>([e,t]=[e,t].map(e=>e.endsWith(`/`)?e.slice(0,-1):e),[e,t]=[e,t].map(e=>e.startsWith(`/`)?e.slice(1):e),e===t);for(let t of i){let n=s(o,t);if(c(n,e))break;if(!a.children)return;for(let e of a.children)if(c(e.path,n)){r.push(e),a=e,o=n;break}}return r};shallowRefresh=async e=>{let n=t.getNode(e),i=t.getNode(n.id);this.updateViewState(e,{loading:!0});let a=u_.getUri(r.id,n.id===`root`?`/`:n.path),o=await J.fs.readDirectory(a);this.updateViewState(e,{loading:!1});let s=n.id===`root`?`/`:n.path;s=s.endsWith(`/`)?s:s+`/`;let c=o.map(([e,t])=>({id:`${s}${e}`,name:e,path:`${s}${e}`,type:t===bq.Directory?`dir`:(bq.File,`file`)}));t.getActions().update({node:{...n,children:c.map(e=>({...i.children?.find(t=>t.path==e.path),...e})).map(e=>({...e,id:e.path}))}})};readTreeReferToViewState=async(e,n)=>{let r=a.getData().find(e=>e.id===n.id);if(!r||!r.expanded)return n;let i=t.getNode(n.id),o=u_.getUri(e,n.id===`root`?`/`:n.path),s=n.id===`root`?`/`:n.path;s=s.endsWith(`/`)?s:s+`/`,a.getActions().update({...r,loading:!0});let c=await J.fs.readDirectory(o);this.updateViewState(n.id,{loading:!1});let l=c.map(([e,t])=>({id:`${s}${e}`,name:e,path:`${s}${e}`,type:t===bq.Directory?`dir`:(bq.File,`file`)}));return{...n,children:await Promise.all(l.map(e=>({...i?.children?.find(t=>t.path==e.path),...e})).map(e=>({...e,id:e.path})).map(t=>t.type===`dir`?this.readTreeReferToViewState(e,t):t))}};deepRefresh=async e=>{let n=t.getNode(e),a=await this.readTreeReferToViewState(r.id,n);t.getActions().update({node:a}),i.emit(l0.NodeContentLoaded,{node:a})};focusNode=e=>{let r=t.getNode(e);if(y2(r)===f0.File){n.viewStateStore.getActions().reduce(e=>{e=e.map(e=>({...e,highlight:!1}));let t=e.find(e=>e.id===r.id);return t?t.highlight=!0:e.push({...n.getDefaultViewState(r),highlight:!0}),e});let e=this.findPathNodes(r.id,t.getData());e&&n.viewStateStore.getActions().reduce(t=>{for(let r of e){let e=t.find(e=>e.id===r.id);e?e.expanded=!0:t.push({...n.getDefaultViewState(r),expanded:!0})}return t})}};openNode=e=>{let n=t.getNode(e);Kv.open(r.id,n)};getReadMeFileNode=()=>{let e=t.getData();if(!(!e||!e.children))return e.children.find(e=>e.type===f0.File&&e.name.toLowerCase()===`readme.md`)};validateForEditingName=({name:e,parentNode:t,node:n})=>{let r={hasError:!1,message:``};if(t){let i=t.children?.find(t=>t.name===e);i&&i.id!==n.id?(r.hasError=!0,r.message=K(`file.nameExists`)):r.hasError=!1}return r};moveNode=async(e,n)=>{if(n.type!==`dir`)throw Error(`Target node must be a directory`);let r=e.path,a=(0,T2.join)(n.path,e.name);if(r!==a){if(n.children?.find(t=>t.name===e.name))throw Error(`A node with the same name already exists in the target directory`);try{await ap.rename(u_.getUri(this.getSpace().id,r),u_.getUri(this.getSpace().id,a),{overwrite:!1}),t.getActions().delete({id:e.id}),t.getActions().add({node:{...e,id:a,path:a},parentId:n.id}),await this.deepRefresh((0,T2.dirname)(r)),await this.deepRefresh(n.id),i.emit(l0.NodeMoved,{node:{...e,id:a,path:a},oldPath:r,newPath:a,targetNode:n})}catch(e){throw console.error(`Error moving node:`,e),e}}};handleDrop=async(e,t,n)=>{if(e.id!==t.id)try{await this.moveNodeRelative(e,t,n)}catch(e){throw console.error(`Error during drag and drop:`,e),e}finally{this.updateViewState(t.id,{isDragOver:!1})}};moveNodeRelative=async(e,t,n)=>{let r=this.findParentNode(e.path),i=n===`inside`?t:this.findParentNode(t.path);if(!r||!i)throw Error(`Source or target parent node not found`);if(n===`inside`&&t.type!==`dir`){console.warn(`Reference node must be a directory`);return}let a=r.id===i.id,o=!a||n===`inside`;try{o&&(this.setLoadingState(e.id,!0),n===`inside`&&this.setLoadingState(t.id,!0)),a&&n!==`inside`?await this.reorderInSameDirectory(r,e,t,n):await this.moveToNewLocation(e,i,n===`inside`?t:void 0),this.emitNodeMovedEvent(e,a?e.path:this.getNewPath(e,i,n,t),a,n,i)}finally{o&&(this.setLoadingState(e.id,!1),n===`inside`&&this.setLoadingState(t.id,!1)),await this.refreshAffectedNodes(r,i,o)}};setLoadingState(e,t){this.updateViewState(e,{loading:t})}async reorderInSameDirectory(e,n,r,i){let a=[...e.children||[]],o=a.findIndex(e=>e.id===n.id),s=a.findIndex(e=>e.id===r.id);if(o!==-1&&s!==-1){let[n]=a.splice(o,1),r=i===`before`?s:s+1;a.splice(r,0,n),t.getActions().update({node:{...e,children:a}})}}async moveToNewLocation(e,n,r){let i=this.getNewPath(e,n,r?`inside`:`after`,r);await ap.rename(u_.getUri(this.getSpace().id,e.path),u_.getUri(this.getSpace().id,i),{overwrite:!1}),t.getActions().delete({id:e.id});let a={...e,path:i,id:i};t.getActions().add({node:a,parentId:n.id}),this.updateViewState(n.id,{expanded:!0})}async refreshAffectedNodes(e,t,n){n&&(await this.deepRefresh(e.id),e.id!==t.id&&await this.deepRefresh(t.id))}getNewPath(e,t,n,r){return D0(n===`inside`&&r?r.path:t.path,e.name)}emitNodeMovedEvent(e,t,n,r,a){i.emit(l0.NodeMoved,{node:n&&r!==`inside`?e:{...e,path:t,id:t},oldPath:e.path,newPath:t,targetNode:a})}updateNode=(e,n)=>{t.getActions().update({node:{id:e,...n}})}}return new c},D2=h2({activate(e){let{serviceBus:t}=e,n=E2(e);t.registerFromMap(u0.TreeService,n),window.treeService=n,window.tree=e}});var O2=_0().createPlugin({activate({serviceBus:e,dataStore:t,viewSystem:{viewStateStore:n,renderer:r,addNodeMenuItems:i},options:{space:a},eventBus:o}){let s=e.createProxy(u0.TreeService);n.reduxStore.subscribe(()=>{n.getData()}),e.expose(u0.RefershNode,s.deepRefresh),i([{id:`refreshNode`,key:`refreshNode`,event:l0.RefreshNode.name,name:K(`tree.refresh`),label:K(`tree.refresh`),when:`level === 0 || type === 'dir'`,icon:`RefreshCw`,group:`more`}]),o.on(l0.RefreshNode,({node:e})=>{s.deepRefresh(e.id)})}}),k2=_0().createPlugin({addOptions(){return{interval:null}},activate({options:{space:e}}){let t=async()=>{await yv.refreshAuth(e.id)};this.options.interval=setInterval(t,1e3*60*10),setTimeout(()=>{t()},3e3)},deactivate(){clearInterval(this.options.interval)}});const A2=e=>{let{eventBus:t,renderer:n}=e;n.register(`MoreHorizontal`,af),n.register(`Plus`,Tf);let r=new q0({id:`root`,data:{id:`root`,key:`root`,order:0,label:`root`,group:``},children:[]});window.menuService=r;let i=e=>{r.addMenuItems(e.map(e=>({id:e.id,data:{...e,parentId:e.group}})))};i([{id:`more`,key:`more`,label:`更多`,group:`root`,icon:`MoreHorizontal`,order:1},{id:`add`,key:`add`,label:`添加`,group:`root`,icon:`Plus`,order:0}]);let a=(e,{node:t,level:n})=>{if(!(e.data.when&&!V0(e.data.when).eval({...t,level:n})))return{...e,children:e.children?.map(e=>a(e,{node:t,level:n})).filter(e=>e!==void 0)}},o=({node:e,level:t})=>a(r.getRootMenuTree(),{node:e,level:t})?.children||[],s=e=>{if(!e)return null;if(typeof e==`string`)return n.render({type:e});let{name:t,color:r,className:i,style:a}=e,o=n.render({type:t});return!r&&!i&&!a?o:(0,U.jsx)(`span`,{className:i,style:r?{color:r,...a??{}}:a,children:o})};return{menuService:r,addNodeMenuItems:i,getNodeMenuItems:o,renderNodeMenuItem:(e,{node:n,level:r},i=!1)=>{console.log(`[renderNodeMenuItem]`,e.data);let{icon:a,name:o,title:c}=e.data,{isValid:l,message:u}=J0(e,{...n,level:r}),d=!l;return console.log(e.data.validationRules,`result:`,`isValid:`,l,`message:`,u),i?(0,U.jsx)(j,{title:e.data.label||e.data.name,onClick:r=>{!d&&e.data.event&&(t.emit(e.data.event,{node:n,event:r}),r.stopPropagation(),r.preventDefault())},style:{cursor:d?`not-allowed`:`pointer`,opacity:d?.5:1},children:s(a)??c??o},e.id):(0,U.jsxs)(j,{w:`100%`,align:`center`,justify:`space-between`,title:u,onClick:!d&&e.data.event?t.connector(e.data.event,e=>({node:n,event:e})):void 0,style:{cursor:d?`not-allowed`:`pointer`,opacity:d?.5:1},children:[e.data.label||e.data.name,s(a)]},e.id)}}},j2=jd,M2=ho(()=>{let e=new Map;return{addHook:(t,n)=>{let r=br(t),i=e.get(r)||[];i.push(n),e.set(r,i)},getHooks:t=>e.get(br(t))||[]}}),N2=()=>{let e=new Map,t=new Map,n=n=>{let r=new pt(1);e.set(n,r),r.subscribe(e=>t.set(n,e))},r=(t,i)=>{if(typeof t==`string`){e.has(t)||n(t);let r=e.get(t).subscribe(e=>{i?.(e)});return()=>{r.unsubscribe()}}else if(typeof t==`object`){let e=[];return Object.entries(t).forEach(([t,n])=>{let i=r(t,n);e.push(i)}),()=>{e.forEach(e=>e())}}else throw Error(`Invalid event type: ${t}`)},i=(t,r)=>{e.has(t)||n(t),e.get(t).next(r)},a=e=>t.get(e);return{on:r,emit:i,createScopedProxy:e=>({on:(t,n)=>{if(typeof t==`string`)return r(`${e}/${t}`,n);{let n={};return Object.entries(t).forEach(([t,r])=>{n[`${e}/${t}`]=r}),r(n)}},emit:(t,n)=>i(`${e}/${t}`,n),get:t=>a(`${e}/${t}`)}),get:a}};var P2=t(Dt(),1),F2=({renderer:e,viewStateStore:t,eventBus:n},r)=>{let{addNodeMenuItems:i,getNodeMenuItems:a,renderNodeMenuItem:o}=A2({eventBus:n,renderer:e}),s=({node:t,level:n=0,parentNode:i})=>e.render({type:`tree-node`,props:{node:t,level:n,context:r(),parentNode:i}},t.id),c=(t,n={})=>e.render({type:t,props:n}),l,u=e=>l=e,d=(e,t)=>l?l(e,t):{...t};return{renderer:e,renderNode:s,render:c,addNodeMenuItems:i,renderNodeMenuItem:o,getDefaultViewState:d,getViewStateOrDefaultViewState:e=>t.getRecord(e)||d({id:e}),setDefaultViewStateProvider:u,viewStateStore:t,getNodeMenuItems:a}};const I2=({plugins:e=[],dataStore:t,eventBus:n,viewSystem:r,viewStateStore:i,pipe:a,serviceBus:o,options:s={},hookRegistry:c,registry:u,onPluginsLoaded:d})=>{let f=(0,H.useMemo)(()=>tn(),[]),p=(0,H.useMemo)(()=>n||j2(),[n]),m=(0,H.useMemo)(()=>o||Mg(),[o]),h=(0,H.useMemo)(()=>a||N2(),[a]),g=(0,H.useCallback)(()=>({viewSystem:_,eventBus:p,dataStore:t,options:s,pipe:h,hookRegistry:v,registry:y,serviceBus:m}),[p,t,s,h,m]),_=(0,H.useMemo)(()=>r||F2({viewStateStore:i||y_({initialState:[]}),eventBus:p,renderer:f},g),[p,r,t,f]),v=(0,H.useMemo)(()=>c||M2.create(),[c]),y=(0,H.useMemo)(()=>u||m_({}),[u]);(0,H.useEffect)(()=>{let t=g();for(let t of e)t.activate?.(g());return d?.(t),()=>{for(let t of e)t.deactivate?.(g())}},[]);let{t:b}=Nl(),x=t.useData(),S=i?.useRecord(x.id)||{},{expanded:C}=S,T=(0,H.useMemo)(()=>g(),[g]);return(0,U.jsx)(x0.Provider,{value:T,children:(0,U.jsxs)(l,{className:(0,P2.default)(`tree overflow-y-hidden flex-container-limited flex-col`,w``),children:[(0,U.jsxs)(`div`,{className:(0,P2.default)(`w-full py-1 px-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 flex justify-between items-center`),children:[(0,U.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,U.jsx)(`span`,{className:`text-sm font-medium`,children:b(`tree.directory`)})}),(0,U.jsx)(`div`,{className:`h-full flex items-center hover-show`,children:f.render({type:`tree-node-action-bar`,props:{node:x,level:0}})})]}),(0,U.jsx)(`div`,{className:(0,P2.default)(`max-h-full h-full transition-all flex-grow flex-col overflow-y-auto scroll scroll-7`,{"h-0 max-h-0":!C}),children:f.render({type:`tree-node-list`,props:{nodes:x.children,level:0,parentNode:x,expanded:S.expanded}})})]})})},L2=({name:e=`treeData`,initialState:t,primaryKey:n=`id`,persistConfig:r})=>{let i=[],a=(e,r)=>({data:t,init:n=>{e({data:n||t})},update:t=>{if(!t)return;let r=e=>{if(e[n]===t[n])return Object.assign(e,t),!0;if(e.children){for(let t of e.children)if(r(t))return!0}return!1};e(e=>{let t=structuredClone(e.data);return r(t),{data:t}})},add:({node:t,parentId:r})=>{if(!t)return;if(!r){e({data:t});return}let i=e=>{if(e[n]===r)return e.children||=[],e.children.push(t),!0;if(e.children){for(let t of e.children)if(i(t))return!0}return!1};e(e=>{let t=structuredClone(e.data);return i(t),{data:t}})},delete:t=>{let r=(e,t)=>{if(!e.children)return!1;let i=e.children.findIndex(e=>e[n]===t);if(i!==-1)return e.children.splice(i,1),!0;for(let n of e.children)if(r(n,t))return!0;return!1};e(e=>{let n=structuredClone(e.data);return r(n,t),{data:n}})}}),o;if(r&&r.type===`LocalStorage`){let e=v_((e,t)=>a(e,t),{name:r.name,storage:g_(()=>window.localStorage)});o=Jt()(e)}else o=Jt()(a);function s(e,t){let[n,r]=(0,H.useState)(t(e.getState()));return(0,H.useEffect)(()=>{let i=e.subscribe(()=>{let i=t(e.getState());i!==n&&r(i)});return()=>i()},[e,t,n]),n}let c=()=>s(o,e=>e.data),l=(e,t)=>{if(e[n]===t)return e;if(e.children)for(let n of e.children){let e=l(n,t);if(e)return e}},u=e=>l(o.getState().data,e),d=e=>s(o,t=>l(t.data,e)),f=e=>s(o,t=>e(t.data)),p=[],m=e=>{for(let t of p)t(e)},h=e=>(p.push(e),()=>g(e)),g=e=>{p=p.filter(t=>t!==e)};return{reduxStore:{getState:()=>({[e]:{data:o.getState().data}}),subscribe:e=>o.subscribe(e)},useSelector:f,useData:c,useNode:d,onChange:e=>(i.push(e),()=>i.splice(i.indexOf(e),1)),getActions:()=>({init:t=>{let n=o.getState().data;o.getState().init(t);let r=o.getState().data,a=R2(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/init`,payload:{node:t}})},update:t=>{let n=o.getState().data;o.getState().update(t.node);let r=o.getState().data,a=R2(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/update`,payload:t})},add:t=>{let n=o.getState().data;o.getState().add(t);let r=o.getState().data,a=R2(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/add`,payload:t})},delete:t=>{let n=o.getState().data;o.getState().delete(t.id);let r=o.getState().data,a=R2(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/delete`,payload:t})}}),getNode:u,getData:()=>o.getState().data,id:Lt(),addObserver:h,removeObserver:g}};function R2(e,t){let n=[],r=(e,t,i)=>{if(!e&&!t)return;if(!e){n.push({id:t.id,type:`add`,path:i});return}if(!t){n.push({id:e.id,type:`delete`,path:i});return}let a=new Set([...Object.keys(e),...Object.keys(t)]);for(let r of a)r!==`children`&&e[r]!==t[r]&&n.push({id:e.id,type:`update`,path:[...i,r],value:t[r]});let o=new Set([...(e.children||[]).map(e=>e.id),...(t.children||[]).map(e=>e.id)]);for(let n of o){let a=e.children?.find(e=>e.id===n),o=t.children?.find(e=>e.id===n);r(a,o,[...i,`children`,String(n)])}};return r(e,t,[]),n}var z2=g0({activate(e){let{eventBus:t,serviceBus:n}=e,r=n.createProxy(u0.TreeService);t.on(l0.NodeClick,async({node:e})=>{if(r.focusNode(e.id),e.id===`root`||e.type===f0.Dir)return await n.invoke(u0.RefershNode,e.id);r.openNode(e.id)})}}),B2=g0({addOptions(){return{rootId:`root`}},activate({viewSystem:e}){e.viewStateStore.getActions().upsert(e.getDefaultViewState({id:this.options.rootId},{expanded:!0}))}}),V2=g0({addOptions(){return{deletable:({level:e})=>e>=1,deleteNode:()=>{}}},activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(u0.TreeService);e.addNodeMenuItems([{id:`deleteNode`,key:`deleteNode`,name:K(`tree.delete`),label:K(`tree.delete`),group:`more`,event:l0.DeleteNode.name,when:`level >= 1`,validationRules:[{check:`type !== 'dir'`,failMessage:K(`tree.deleteFolderHint`)}],icon:`Trash2`}]),t.on(l0.DeleteNode,async({node:e,event:t})=>{await J.modalService.confirm({title:K(`tree.confirmDeleteFile`)})&&await r.deleteNode(e)})}}),H2=_0().createPlugin({addOptions(){return{editable:({level:e,node:t})=>!1,renameNode:(()=>{})}},activate({viewSystem:e,serviceBus:t,eventBus:n,dataStore:r,pipe:i}){e.addNodeMenuItems([{id:`editNode`,key:`editNode`,group:`more`,event:l0.EditNode.name,name:K(`tree.rename`),label:K(`tree.rename`),icon:`Pencil`,when:`level >= 0`,validationRules:[{check:`type !== 'dir'`,failMessage:K(`tree.renameFolderNotSupported`)}]}]);let a=t.createProxy(u0.TreeService);t.expose(u0.EditInputNodeName,({parentId:e,callback:t,nodeType:o,defaultName:s})=>{setTimeout(()=>{let c=Lt(),l={id:c,type:o,name:s||``};r.getActions().add({node:l,parentId:e}),a.updateViewState(e,{expanded:!0}),a.updateViewState(c,{editMode:!0}),i.emit(`edit.forInput`,!0);let u;u=n.on(l0.EditWillFinish,({name:e,node:n,parentNode:i})=>{r.getActions().delete({id:c}),e.trim()&&!a.validateForEditingName({name:e.trim(),node:n,parentNode:i}).hasError&&t(e.trim()),u()})},300)}),n.on(l0.EditNode,({node:e,event:t})=>{a.updateViewState(e.id,{editMode:!0})}),n.on(l0.EditBlur,({node:e,event:t,parentNode:r})=>{n.emit(l0.EditKeyEnter,{node:e,event:t,parentNode:r})}),n.on(l0.EditKeyEnter,async({node:e,event:t,parentNode:o})=>{a.updateViewState(e.id,{editMode:!1});let s=t.currentTarget.value.trim();if(i.get(`edit.forInput`))i.emit(`edit.forInput`,!1),n.emit(l0.EditWillFinish,{name:t.currentTarget.value,node:e,parentNode:o});else if(s!==e.name&&s){let{hasError:t,message:n}=a.validateForEditingName({name:s,node:e,parentNode:o});if(t)J.notificationService.error(n);else{a.updateViewState(e.id,{loading:!0});try{await this.options.renameNode(e,s),r.getActions().update({node:{...e,name:s}})}catch{J.notificationService.error(`Failed to rename node`)}finally{a.updateViewState(e.id,{loading:!1})}}}}),n.on(l0.EditChange,({node:e,event:t,parentNode:n})=>{a.updateViewState(e.id,{editingName:t.currentTarget.value});let{message:r}=a.validateForEditingName({name:t.currentTarget.value,parentNode:n,node:e});a.updateViewState(e.id,{validationMessage:r})})}});const U2=h2({activate:({serviceBus:e,dataStore:t})=>{let n=e.createProxy(u0.TreeService);J.eventBus.on(Ad.ReadMeFileInitialized,async({spaceId:e})=>{if(e===n.getSpace().id){await n.shallowRefresh(`root`);let e=t.getData();if(!e||!e.children)return;let r=(()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`})()===`zh`?`Excalidraw-示例.excalidraw.json`:`Excalidraw-Example.excalidraw.json`,i=e.children.find(e=>e.type===f0.File&&e.name===r);i&&setTimeout(()=>{n.openNode(i.id),n.focusNode(i.id)},1e3)}})}});var W2=g0({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){let i=r.createProxy(u0.TreeService);t.on(l0.DragStart,({node:e,event:t})=>{t.dataTransfer.setData(`text/plain`,e.id),t.dataTransfer.effectAllowed=`move`}),t.on(l0.DragEnd,({node:e,event:t})=>{}),t.on(l0.DragEnter,({node:e,event:t})=>{e.type===`dir`&&i.updateViewState(e.id,{isDragOver:!0})}),t.on(l0.DragOver,({node:e,event:t})=>{e.type===`dir`&&(i.getViewState(e.id).isDragOver||i.updateViewState(e.id,{isDragOver:!0}))}),t.on(l0.DragLeave,({node:e,event:t})=>{i.updateViewState(e.id,{isDragOver:!1})}),t.on(l0.Drop,async({node:e,event:t,position:r})=>{i.updateViewState(e.id,{isDragOver:!1});let a=t.dataTransfer.getData(`text`),o=n.getNode(a);o&&await i.handleDrop(o,e,r)})}}),G2=h2({activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(u0.TreeService).getSpace();e.addNodeMenuItems([{id:`copyFilePath`,key:`copyFilePath`,label:K(`tree.copyUri`),icon:`Copy`,event:l0.CopyFilePath.name,group:`more`}]),e.renderer.register(`Copy`,tf),t.on(l0.CopyFilePath,({node:e})=>{let t=u_.getUri(r.id,e.id===`root`?``:e.id);navigator.clipboard.writeText(t.toString()),J.notificationService.success(K(`tree.uriCopied`))})}}),K2=h2({addOptions(){return{unsubscribes:[]}},activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(u0.TreeService).getSpace(),i=this.options.unsubscribes||(this.options.unsubscribes=[]),a=new Set,o=n=>{if(!n.showInTreeMenu||a.has(n.id))return;a.add(n.id);let o=`openWith:${n.id}`,s=K(`tree.openWith`,{name:n.label||n.id})||`Open with ${n.label||n.id}`,c=`type === 'file'`;if(Array.isArray(n.match)&&n.match.length>0&&typeof n.match[0]==`string`){let e=n.match.map(e=>{let t=e.replace(/"/g,`\\"`);return`(name && name.endsWith("${t}")) || (path && path.endsWith("${t}"))`});e.length>0&&(c=`type === "file" && (${e.join(` || `)})`)}e.addNodeMenuItems([{id:o,key:o,label:s,icon:n.icon,group:`more`,when:c,event:o}]);let l=t.on(o,({node:e})=>{Kv.openWith(r.id,e,n.id)});i.push(l)};Kv.getOpeners().forEach(o);let s=Kv.subscribe(e=>{o(e)});i.push(s)},deactivate(){let e=this.options.unsubscribes||[];for(let t of e)t();this.options.unsubscribes=[]}}),q2=h2({activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(u0.TreeService).getSpace();e.renderer.register(`Download`,nf),e.addNodeMenuItems([{id:`downloadFile`,key:`downloadFile`,name:K(`tree.download`),label:K(`tree.download`),icon:`Download`,group:`more`,when:`type === 'file'`,event:l0.DownloadFile.name}]),t.on(l0.DownloadFile,async({node:e})=>{try{let t=u_.getUri(r.id,e.id===`root`?``:e.id);J.notificationService.info(K(`tree.downloadStarted`));let n=(await J.fs.readFile(t)).buffer,i=new Blob([n]),a=URL.createObjectURL(i),o=document.createElement(`a`);o.href=a,o.download=e.name||`download`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}catch(e){console.error(`Failed to download file`,e),J.notificationService.error(K(`tree.downloadFailed`))}})}}),J2=h2({addOptions(){return{unsubscribes:[]}},activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){let i=r.createProxy(u0.TreeService).getSpace(),a=this.options.unsubscribes||(this.options.unsubscribes=[]),o=new Map,s=s=>{if(!(!s.templates||s.templates.length===0))for(let c of s.templates){let l=`addFileWithTemplate:${s.id}:${c.id}`;if(o.has(l))continue;o.set(l,{openerId:s.id,template:c}),e.addNodeMenuItems([{id:l,key:l,label:c.label,icon:c.icon,group:`add`,when:`type === 'dir'`,event:l}]);let u=t.on(l,async({node:e})=>{let a=o.get(l);if(!a)return;let{template:s}=a,c=e.id,u=n.getNode(c),d=i,f=Lt();r.invoke(u0.EditInputNodeName,{parentId:c,defaultName:s.defaultFileName,nodeType:f0.File,callback:async e=>{let r=D0(u.path,e),i={id:f,type:f0.File,path:r,name:e};n.getActions().add({node:{...i,loading:!0},parentId:c});try{let e=``;typeof s.initialContent==`function`?e=await s.initialContent():s.initialContent!=null&&(e=s.initialContent);let a;a=e instanceof Uint8Array?e:new TextEncoder().encode(typeof e==`string`?e:``),await ap.writeFile(u_.getUri(d.id,r),a,{create:!0,overwrite:!0}),n.getActions().update({node:i}),t.emit(l0.NodeClick,{node:i})}catch{n.getActions().delete({id:f}),J.notificationService.error(`Failed to create file from template`)}}})});a.push(u)}};Kv.getOpeners().forEach(s);let c=Kv.subscribe(e=>{s(e)});a.push(c)},deactivate(){let e=this.options.unsubscribes||[];for(let t of e)t();this.options.unsubscribes=[]}}),Y2=w2(),X2=({space:e})=>{let{t}=Nl(),n=(0,H.useMemo)(()=>L2({initialState:{name:t(`common.file`),content:t(`common.content`),id:`root`,type:`dir`,path:`/`},persistConfig:{name:`folderTree:${e.id}`,type:`LocalStorage`}}),[e.id]),r=(0,H.useMemo)(()=>Mg(),[]),a=(0,H.useMemo)(()=>y_({initialState:[],persistConfig:{name:`folderTreeViewState:${e.id}`,type:`LocalStorage`}}),[e.id]),o=r.createProxy(u0.TreeService),{hasReadPermission:s}=yv.usePermissions(e.id),[c,f]=(0,H.useState)(!1);(0,H.useEffect)(()=>{let t=fv.registerTrigger(e.id,()=>{o.deepRefresh(`root`),o.expandNode({id:`root`})});return()=>t()},[]),(0,H.useEffect)(()=>{s&&c&&(o.deepRefresh(`root`),o.expandNode({id:`root`}))},[s,c]);let[p]=t0(`space.actions`,[]),m=yv.useSpaces();return yv.useAutoRefreshAuth(e.id),(0,U.jsxs)(a0,{space:e,children:[!s&&(0,U.jsxs)(u,{display:`p`,status:`warning`,size:`sm`,fontSize:`sm`,flexGrow:0,flexShrink:0,p:`10px`,w:`100%`,children:[t(`space.unauthorized`,{platform:e.platform}),(0,U.jsxs)(d,{color:`blue.300`,onClick:()=>{J.eventBus.emit(Ad.RequestRedirectAuthPage,e.id)},children:[t(`space.clickToAuthorize`),(0,U.jsx)(i,{as:ke})]})]}),(0,U.jsxs)(o0,{title:(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(s0,{options:m.map(e=>({value:e.id,label:(0,U.jsx)(c0,{space:e}),title:`${e.owner}/${e.repo}`,data:e})),value:yv.getFocusedSpace()?.id,onChange:e=>{e&&yv.focusSpace(e)},placeholder:t(`common.search`)})}),className:`fs-tree-container`,actions:p,children:[(0,U.jsx)(l,{h:`0.5rem`,flexShrink:0,flexGrow:0}),(0,U.jsx)(l,{w:`100%`,className:`channel-tree flex-container-limited flex-col`,children:(0,U.jsx)(I2,{serviceBus:r,options:{space:e,defaultExpanded:!1},dataStore:n,viewStateStore:a,onPluginsLoaded:()=>f(!0),plugins:[C2(),D2(),l2(),T0(),O2(),_2(),z2(),H2({editable:({level:e,node:t})=>e!==0&&t.type===`file`,renameNode:async(t,r)=>{let i=D0((0,Y2.dirname)(t.path),r);await ap.rename(u_.getUri(e.id,t.path),u_.getUri(e.id,i),{overwrite:!1}),n.getActions().delete({id:t.id});let a=(0,Y2.dirname)(t.path),o=dq.isRootPath(a)?`root`:a;n.getActions().add({node:{...t,id:i,path:i,name:r},parentId:o})}}),p2({addable:({node:e})=>e.id===`root`||e.type===`dir`}),J2(),G2(),q2(),V2({deletable:({node:e})=>e.type===`file`}),K2(),B2({rootId:``}),S2(),W2(),v2(),k2(),m2(),g2(),U2()]})}),(0,U.jsx)(l,{h:`1rem`,flexShrink:0,flexGrow:0})]})]})};const Z2=Vg({addComponents(){return{folderTree:e=>(0,U.jsx)(X2,{...e})}},initilize(e){e.registry.set(`space.actions`,[...e.registry.get(`space.actions`)||[],{id:`space.delete`,title:K(`space.deleteSpace`),icon:(0,U.jsx)(_e,{}),events:[`Click`]},{id:`space.info`,title:K(`space.viewInfo`),icon:(0,U.jsx)(Se,{}),events:[`Click`]}]),e.eventBus.on(Ad.Action.Clicked(`space.delete`),({context:e})=>{u_.getStore().getActions().delete(e.space.id)}),e.eventBus.on(Ad.Action.Clicked(`space.info`),({context:t})=>{let{repo:n,id:r,owner:a,platform:o}=t.space,s=`https://${o}.com/${a}/${n}`;e.modalService.createModal({title:`About ${t.space.repo}`,footer:!1,content:(0,U.jsxs)(l,{mb:`1em`,children:[(0,U.jsxs)(l,{children:[(0,U.jsx)(D,{children:(0,U.jsx)(f,{as:`b`,children:`Owner`})}),(0,U.jsx)(f,{children:(0,U.jsx)(m,{children:a})})]}),(0,U.jsxs)(l,{children:[(0,U.jsx)(D,{children:(0,U.jsx)(f,{as:`b`,children:`Repository`})}),(0,U.jsx)(f,{children:(0,U.jsxs)(m,{children:[s,(0,U.jsx)(d,{as:`a`,href:s,target:`_blank`,children:(0,U.jsx)(i,{as:De})})]})})]})]})}).open()})}});var Q2=class{_onDidChangeFile=new ip;onDidChangeFile=this._onDidChangeFile.event;constructor(e,t){this.provider=e,this.spaceId=t,e.onDidChangeFile(e=>{Array.isArray(e)&&this.handleFileChange(e)})}watch(e,t){return e.authority===this.spaceId&&this.provider.watch?.(e,t)||new rp(()=>{})}stat(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.stat(e)}readDirectory(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.readDirectory(e)}createDirectory(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.createDirectory(e)}readFile(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.readFile(e)}writeFile(e,t,n){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.writeFile(e,t,n)}delete(e,t){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.delete(e,t)}rename(e,t,n){if(e.authority!==this.spaceId||t.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority} or ${t.authority}`);return this.provider.rename(e,t,n)}copy(e,t,n){if(e.authority!==this.spaceId||t.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority} or ${t.authority}`);return this.provider.copy?.(e,t,n)}handleFileChange(e){this._onDidChangeFile.fire(e.filter(e=>e.uri.authority===this.spaceId))}dispose(){this._onDidChangeFile.dispose(),`dispose`in this.provider&&this.provider.dispose()}};const $2=Vg({initilize(e){yv.subscribeSpaces(t=>{t.forEach(t=>{let n=gv.getPlatform(t.platform);if(!n)return;let r=new Q2(n.getProvider({accessToken:hv.getAnyAuthInfo(t.platform,t.owner)?.accessToken,owner:t.owner,repo:t.repo}),t.id);e.fs.registerProvider({id:`space-${t.id}`,scheme:`space`,provider:r,authority:t.id,options:{overwrite:!0}})})})}});var e4=e=>{let t=new URLSearchParams(e);return Object.fromEntries(t.entries())},t4=(e,t)=>{let n=new URL(e);return t.forEach(e=>{n.searchParams.delete(e)}),n.toString()},n4=Vg({initilize(e){let t=e4(window.location.search).openRepo;if(t){let e=yv.parseRepoUrl(t);if(e.platform&&e.owner&&e.repo){let t=yv.addSpace(e),n=t4(window.location.href,[`openRepo`]);window.history.replaceState(null,``,n),setTimeout(()=>{yv.focusSpace(t.id)},400)}}let n=`shareRepoUrl`,r={id:n,icon:(0,U.jsx)(Oe,{}),title:K(`share.title`),events:[`Click`]};e.eventBus.on(Ad.Action.Clicked(n),({context:{space:{platform:t,owner:n,repo:r}}})=>{let i=`${window.location.href}?openRepo=https://${t}.com/${n}/${r}`;navigator.clipboard.writeText(i),e.notificationService.success(K(`share.linkCopied`))}),e.registry.set(`space.actions`,[...e.registry.get(`space.actions`)||[],r])}}),r4=y_({name:`settings`,initialState:[]});const i4=new class{addSettingEntry(e){r4.getActions().add(e)}};var a4=async()=>{if(window.indexedDB)try{let e=await indexedDB.databases();await Promise.all(e.filter(e=>!!e.name).map(e=>new Promise((t,n)=>{let r=indexedDB.deleteDatabase(e.name);r.onsuccess=()=>t(),r.onerror=()=>n(r.error),r.onblocked=()=>{console.warn(`删除数据库 ${e.name} 被阻塞，等待连接关闭...`)}})))}catch(e){console.error(`清空 IndexedDB 失败:`,e)}},o4=Vg({initilize(e){i4.addSettingEntry({id:`localCache`,name:`本地缓存`,icon:ge,widget:()=>{let{t}=Nl();return(0,U.jsx)(A,{onClick:async()=>{await e.modalService.confirm({title:t(`settings.clearCacheTitle`),description:t(`settings.clearCacheDescription`)})&&(localStorage.clear(),await a4())},children:t(`common.clear`)})}})}}),s4=Vg({initilize(e){i4.addSettingEntry({id:`themer`,name:`主题`,description:`黑夜/白天`,menuItems:[`Dark`,`Light`],icon:e=>{let{colorMode:t,toggleColorMode:n}=v();return(0,H.useEffect)(()=>{let e=t===`light`?`#f8f8f8`:`#2e2e2e`,n=document.querySelector(`meta[name="theme-color"]`);n&&n.setAttribute(`content`,e);let r=document.documentElement;t===`dark`?r.classList.add(`dark`):r.classList.remove(`dark`)},[t]),(0,U.jsx)(U.Fragment,{children:t===`light`?(0,U.jsx)(Ae,{...e,onClick:()=>n()}):(0,U.jsx)(je,{...e,onClick:()=>n()})})},widget:()=>{let{t:e}=Nl(),{colorMode:t,toggleColorMode:n}=v();return(0,H.useEffect)(()=>{let e=t===`light`?`#f8f8f8`:`#2e2e2e`,n=document.querySelector(`meta[name="theme-color"]`);n&&n.setAttribute(`content`,e);let r=document.documentElement;t===`dark`?r.classList.add(`dark`):r.classList.remove(`dark`)},[t]),(0,U.jsx)(A,{onClick:n,children:e(t===`light`?`settings.switchToDarkMode`:`settings.switchToLightMode`)})}})}});const c4=()=>{let{t:e}=Nl();return(0,U.jsx)(`div`,{className:`h-full overflow-y-auto`,children:(0,U.jsx)(`div`,{className:`p-6`,children:(0,U.jsxs)(`div`,{className:`space-y-8`,children:[(0,U.jsxs)(`div`,{className:`space-y-4 text-center`,children:[(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(Dd,{showLogo:!0,showName:!0,size:`lg`})}),(0,U.jsx)(`h1`,{className:`text-4xl font-bold tracking-tight`,children:e(`introduction.welcome`)}),(0,U.jsx)(`p`,{className:`text-xl text-muted-foreground`,children:e(`introduction.subtitle`)})]}),(0,U.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-8`,children:[(0,U.jsx)(l4,{icon:`🔄`,title:e(`introduction.gitIntegration`),description:e(`introduction.gitIntegrationDesc`)}),(0,U.jsx)(l4,{icon:`✍️`,title:e(`introduction.markdownEditor`),description:e(`introduction.markdownEditorDesc`)}),(0,U.jsx)(l4,{icon:`🤖`,title:e(`introduction.aiDrawing`),description:e(`introduction.aiDrawingDesc`)}),(0,U.jsx)(l4,{icon:`💬`,title:e(`introduction.aiAssistant`),description:e(`introduction.aiAssistantDesc`)}),(0,U.jsx)(l4,{icon:`📱`,title:e(`introduction.convenientAccess`),description:e(`introduction.convenientAccessDesc`)}),(0,U.jsx)(l4,{icon:`🔐`,title:e(`introduction.secure`),description:e(`introduction.secureDesc`)})]}),(0,U.jsx)(`div`,{className:`text-center`,children:(0,U.jsx)(hu,{size:`lg`,className:`px-8`,onClick:()=>J.eventBus.emit(Ad.ActivityBar.ActivityClicked(`addGiteeRepo`)),children:e(`introduction.getStarted`)})})]})})})};var l4=({icon:e,title:t,description:n})=>(0,U.jsx)(qv,{className:`h-full`,children:(0,U.jsxs)(Zv,{className:`p-6 flex flex-col h-full`,children:[(0,U.jsxs)(`div`,{className:`flex items-center space-x-3 mb-3`,children:[(0,U.jsx)(`span`,{className:`text-3xl`,children:e}),(0,U.jsx)(`h2`,{className:`text-2xl font-semibold`,children:t})]}),(0,U.jsx)(`p`,{className:`text-muted-foreground text-lg`,children:n})]})}),u4=Vg({initilize(e){e.componentService.register(`AiOutlineQuestionCircle`,Be),e.shortcutService.addShortcut({id:`introduction`,name:K(`introduction.title`),order:1e4,icon:`AiOutlineQuestionCircle`}),e.eventBus.on(Ad.Shortcut.ShortcutClicked(`introduction`),()=>{e.modalService.open({content:(0,U.jsx)(c4,{}),footer:!1,width:`720px`,height:`80vh`,modalBodyClassName:`p-0 h-full overflow-hidden`})})}}),d4=[{code:`zh`,label:`中文`},{code:`en`,label:`English`}];function f4(){let{i18n:e}=Nl(),t=d4.find(t=>t.code===e.language)||d4[0],n=t=>{e.changeLanguage(t)};return(0,U.jsxs)(tA,{children:[(0,U.jsx)(nA,{asChild:!0,children:(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,className:`h-7 w-7 shrink-0 text-muted-foreground hover:text-foreground`,title:t.label,children:(0,U.jsx)(hf,{className:`h-4 w-4`})})}),(0,U.jsx)(aA,{align:`end`,className:`min-w-[120px]`,children:d4.map(t=>(0,U.jsx)(oA,{onClick:()=>n(t.code),className:q(`cursor-pointer`,e.language===t.code&&`bg-accent`),children:t.label},t.code))})]})}var p4=async()=>{if(window.indexedDB)try{let e=await indexedDB.databases();await Promise.all(e.filter(e=>!!e.name).map(e=>new Promise((t,n)=>{let r=indexedDB.deleteDatabase(e.name);r.onsuccess=()=>t(),r.onerror=()=>n(r.error),r.onblocked=()=>{console.warn(`Delete DB blocked: ${e.name}`)}})))}catch(e){console.error(`Failed to clear IndexedDB:`,e)}};function m4(){let{colorMode:e,toggleColorMode:t}=v(),{t:n}=Nl(),r=e=>{let t=document.documentElement;e===`dark`?t.classList.add(`dark`):t.classList.remove(`dark`)},i=n(e===`light`?`settings.switchToDarkMode`:`settings.switchToLightMode`);return(0,U.jsxs)(`div`,{className:`py-1`,children:[(0,U.jsx)(lA,{className:`px-2.5 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wider`,children:n(`settings.quickSettings`)}),(0,U.jsx)(uA,{className:`my-1`}),(0,U.jsx)(oA,{className:q(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:e===`light`?(0,U.jsx)(Mf,{className:`h-3.5 w-3.5`}):(0,U.jsx)(xf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.theme`)}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:i})]}),(0,U.jsx)(hu,{variant:`ghost`,size:`icon`,title:i,"aria-label":i,className:`h-7 w-7 shrink-0 text-muted-foreground hover:text-foreground`,onClick:n=>{n.preventDefault(),n.stopPropagation();let i=e===`light`?`dark`:`light`;t(),r(i)},children:e===`light`?(0,U.jsx)(xf,{className:`h-4 w-4`}):(0,U.jsx)(Mf,{className:`h-4 w-4`})})]})}),(0,U.jsx)(oA,{className:q(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(hf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.language`)}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:n(`settings.switchLanguage`)})]}),(0,U.jsx)(f4,{})]})}),(0,U.jsx)(oA,{className:q(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,U.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,U.jsx)(Nf,{className:`h-3.5 w-3.5`})}),(0,U.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,U.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.localCache`)}),(0,U.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:n(`settings.clearLocalCache`)})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0 cursor-pointer`,onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),await J.modalService.confirm({title:n(`settings.clearCacheTitle`),description:n(`settings.clearCacheDescription`)}))try{localStorage.clear(),await p4(),J.notificationService.success(n(`settings.cacheCleared`))}catch(e){console.error(e),J.notificationService.error(n(`settings.clearCacheFailed`))}},children:[(0,U.jsx)(`span`,{children:n(`common.clear`)}),(0,U.jsx)(Wd,{className:`h-3 w-3`})]})]})})]})}var h4=({children:e})=>(0,U.jsxs)(tA,{children:[(0,U.jsx)(nA,{asChild:!0,children:e}),(0,U.jsx)(aA,{align:`end`,side:`right`,sideOffset:10,className:`min-w-56`,children:(0,U.jsx)(m4,{})})]});function g4({shortcut:e,isExpanded:t}){let{colorMode:n}=v(),{t:r}=Nl();(0,H.useEffect)(()=>{let e=document.documentElement;n===`dark`?e.classList.add(`dark`):e.classList.remove(`dark`)},[n]);let{icon:i=`AiOutlineSetting`,name:a}=e,o=a||r(`common.settings`),s=ep.useComponent(i)??(()=>null),c=(0,U.jsx)(If,{activity:{id:e.id,name:o,icon:i},isExpanded:t,icon:(0,U.jsx)(s,{className:`w-full h-full`}),className:`data-[state=open]:pointer-events-none`,disableTooltip:!t,asChild:!0});return t?(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(h4,{children:(0,U.jsx)(`div`,{className:`flex justify-center w-full`,children:c})})}):(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsxs)(Id,{disableHoverableContent:!0,children:[(0,U.jsx)(h4,{children:(0,U.jsx)(Ld,{asChild:!0,children:(0,U.jsx)(`div`,{className:`flex justify-center`,children:c})})}),(0,U.jsx)(Rd,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:o})]})})}var _4=Vg({initilize(e){e.componentService.register(`AiOutlineSetting`,He),e.shortcutService.addShortcut({id:`settings`,name:K(`common.settings`),order:1e4,icon:`AiOutlineSetting`,hasPopover:!0}),e.componentService.register(`shortcut:settings`,g4)}}),v4=Vg({initilize(e){e.pluginService.use([_4,u4])}}),y4=class{onDidChangeFileEmitter=new ip;onDidChangeFile=this.onDidChangeFileEmitter.event;constructor(e,t,n){this.gitClient=e,this.owner=t,this.repo=n}async stat(e){let t=e.path,n=await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:t});return{type:n.data.type===`file`?bq.File:bq.Directory,ctime:0,mtime:0,size:n.data.size||0}}async readDirectory(e){let t=e.path.endsWith(`/`)?e.path:e.path+`/`,n=(await this.gitClient.File.getInfo({owner:this.owner,repo:this.repo,path:t})).data;if(!Array.isArray(n)){if(n&&typeof n==`object`&&`name`in n&&`type`in n){let e=n;return[[e.name,e.type===`file`?bq.File:bq.Directory]]}return[]}return n.map(e=>[e.name,e.type===`file`?bq.File:bq.Directory])}async readFile(e){let t=e.path,n=await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:t});if(n.data.type===`file`&&n.data.content)return new TextEncoder().encode(n.data.content);throw Error(`File not found`)}async createDirectory(e){let t=e.path;await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:t+`/.keep`,content:`placeholder`})}async exists(e){let t=e.path;try{let e=(await this.gitClient.File.getInfo({owner:this.owner,repo:this.repo,path:t})).data;if(Array.isArray(e)&&e.length===0)return!1}catch(e){if(e&&e.status===404)return!1}return!0}async writeFile(e,t){let n=e.path,r=new TextDecoder().decode(t);if(!await this.exists(e)){await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:n,content:r});return}await this.gitClient.File.update({owner:this.owner,repo:this.repo,path:n,content:r})}async delete(e,t){let n=e.path;await this.gitClient.File.delete({owner:this.owner,repo:this.repo,path:n})}async rename(e,t,n){let r=e.path,i=t.path,a=(await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:r})).data.content;await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:i,content:a}),await this.gitClient.File.delete({owner:this.owner,repo:this.repo,path:r})}},Q;(function(e){e[e.EPERM=1]=`EPERM`,e[e.ENOENT=2]=`ENOENT`,e[e.EINTR=4]=`EINTR`,e[e.EIO=5]=`EIO`,e[e.ENXIO=6]=`ENXIO`,e[e.EBADF=9]=`EBADF`,e[e.EAGAIN=11]=`EAGAIN`,e[e.ENOMEM=12]=`ENOMEM`,e[e.EACCES=13]=`EACCES`,e[e.EFAULT=14]=`EFAULT`,e[e.ENOTBLK=15]=`ENOTBLK`,e[e.EBUSY=16]=`EBUSY`,e[e.EEXIST=17]=`EEXIST`,e[e.EXDEV=18]=`EXDEV`,e[e.ENODEV=19]=`ENODEV`,e[e.ENOTDIR=20]=`ENOTDIR`,e[e.EISDIR=21]=`EISDIR`,e[e.EINVAL=22]=`EINVAL`,e[e.ENFILE=23]=`ENFILE`,e[e.EMFILE=24]=`EMFILE`,e[e.ETXTBSY=26]=`ETXTBSY`,e[e.EFBIG=27]=`EFBIG`,e[e.ENOSPC=28]=`ENOSPC`,e[e.ESPIPE=29]=`ESPIPE`,e[e.EROFS=30]=`EROFS`,e[e.EMLINK=31]=`EMLINK`,e[e.EPIPE=32]=`EPIPE`,e[e.EDOM=33]=`EDOM`,e[e.ERANGE=34]=`ERANGE`,e[e.EDEADLK=35]=`EDEADLK`,e[e.ENAMETOOLONG=36]=`ENAMETOOLONG`,e[e.ENOLCK=37]=`ENOLCK`,e[e.ENOSYS=38]=`ENOSYS`,e[e.ENOTEMPTY=39]=`ENOTEMPTY`,e[e.ELOOP=40]=`ELOOP`,e[e.ENOMSG=42]=`ENOMSG`,e[e.EBADE=52]=`EBADE`,e[e.EBADR=53]=`EBADR`,e[e.EXFULL=54]=`EXFULL`,e[e.ENOANO=55]=`ENOANO`,e[e.EBADRQC=56]=`EBADRQC`,e[e.ENOSTR=60]=`ENOSTR`,e[e.ENODATA=61]=`ENODATA`,e[e.ETIME=62]=`ETIME`,e[e.ENOSR=63]=`ENOSR`,e[e.ENONET=64]=`ENONET`,e[e.EREMOTE=66]=`EREMOTE`,e[e.ENOLINK=67]=`ENOLINK`,e[e.ECOMM=70]=`ECOMM`,e[e.EPROTO=71]=`EPROTO`,e[e.EBADMSG=74]=`EBADMSG`,e[e.EOVERFLOW=75]=`EOVERFLOW`,e[e.EBADFD=77]=`EBADFD`,e[e.ESTRPIPE=86]=`ESTRPIPE`,e[e.ENOTSOCK=88]=`ENOTSOCK`,e[e.EDESTADDRREQ=89]=`EDESTADDRREQ`,e[e.EMSGSIZE=90]=`EMSGSIZE`,e[e.EPROTOTYPE=91]=`EPROTOTYPE`,e[e.ENOPROTOOPT=92]=`ENOPROTOOPT`,e[e.EPROTONOSUPPORT=93]=`EPROTONOSUPPORT`,e[e.ESOCKTNOSUPPORT=94]=`ESOCKTNOSUPPORT`,e[e.ENOTSUP=95]=`ENOTSUP`,e[e.ENETDOWN=100]=`ENETDOWN`,e[e.ENETUNREACH=101]=`ENETUNREACH`,e[e.ENETRESET=102]=`ENETRESET`,e[e.ETIMEDOUT=110]=`ETIMEDOUT`,e[e.ECONNREFUSED=111]=`ECONNREFUSED`,e[e.EHOSTDOWN=112]=`EHOSTDOWN`,e[e.EHOSTUNREACH=113]=`EHOSTUNREACH`,e[e.EALREADY=114]=`EALREADY`,e[e.EINPROGRESS=115]=`EINPROGRESS`,e[e.ESTALE=116]=`ESTALE`,e[e.EREMOTEIO=121]=`EREMOTEIO`,e[e.EDQUOT=122]=`EDQUOT`})(Q||={});const b4={[Q.EPERM]:`Operation not permitted`,[Q.ENOENT]:`No such file or directory`,[Q.EINTR]:`Interrupted system call`,[Q.EIO]:`Input/output error`,[Q.ENXIO]:`No such device or address`,[Q.EBADF]:`Bad file descriptor`,[Q.EAGAIN]:`Resource temporarily unavailable`,[Q.ENOMEM]:`Cannot allocate memory`,[Q.EACCES]:`Permission denied`,[Q.EFAULT]:`Bad address`,[Q.ENOTBLK]:`Block device required`,[Q.EBUSY]:`Resource busy or locked`,[Q.EEXIST]:`File exists`,[Q.EXDEV]:`Invalid cross-device link`,[Q.ENODEV]:`No such device`,[Q.ENOTDIR]:`File is not a directory`,[Q.EISDIR]:`File is a directory`,[Q.EINVAL]:`Invalid argument`,[Q.ENFILE]:`Too many open files in system`,[Q.EMFILE]:`Too many open files`,[Q.ETXTBSY]:`Text file busy`,[Q.EFBIG]:`File is too big`,[Q.ENOSPC]:`No space left on disk`,[Q.ESPIPE]:`Illegal seek`,[Q.EROFS]:`Cannot modify a read-only file system`,[Q.EMLINK]:`Too many links`,[Q.EPIPE]:`Broken pipe`,[Q.EDOM]:`Numerical argument out of domain`,[Q.ERANGE]:`Numerical result out of range`,[Q.EDEADLK]:`Resource deadlock would occur`,[Q.ENAMETOOLONG]:`File name too long`,[Q.ENOLCK]:`No locks available`,[Q.ENOSYS]:`Function not implemented`,[Q.ENOTEMPTY]:`Directory is not empty`,[Q.ELOOP]:`Too many levels of symbolic links`,[Q.ENOMSG]:`No message of desired type`,[Q.EBADE]:`Invalid exchange`,[Q.EBADR]:`Invalid request descriptor`,[Q.EXFULL]:`Exchange full`,[Q.ENOANO]:`No anode`,[Q.EBADRQC]:`Invalid request code`,[Q.ENOSTR]:`Device not a stream`,[Q.ENODATA]:`No data available`,[Q.ETIME]:`Timer expired`,[Q.ENOSR]:`Out of streams resources`,[Q.ENONET]:`Machine is not on the network`,[Q.EREMOTE]:`Object is remote`,[Q.ENOLINK]:`Link has been severed`,[Q.ECOMM]:`Communication error on send`,[Q.EPROTO]:`Protocol error`,[Q.EBADMSG]:`Bad message`,[Q.EOVERFLOW]:`Value too large for defined data type`,[Q.EBADFD]:`File descriptor in bad state`,[Q.ESTRPIPE]:`Streams pipe error`,[Q.ENOTSOCK]:`Socket operation on non-socket`,[Q.EDESTADDRREQ]:`Destination address required`,[Q.EMSGSIZE]:`Message too long`,[Q.EPROTOTYPE]:`Protocol wrong type for socket`,[Q.ENOPROTOOPT]:`Protocol not available`,[Q.EPROTONOSUPPORT]:`Protocol not supported`,[Q.ESOCKTNOSUPPORT]:`Socket type not supported`,[Q.ENOTSUP]:`Operation is not supported`,[Q.ENETDOWN]:`Network is down`,[Q.ENETUNREACH]:`Network is unreachable`,[Q.ENETRESET]:`Network dropped connection on reset`,[Q.ETIMEDOUT]:`Connection timed out`,[Q.ECONNREFUSED]:`Connection refused`,[Q.EHOSTDOWN]:`Host is down`,[Q.EHOSTUNREACH]:`No route to host`,[Q.EALREADY]:`Operation already in progress`,[Q.EINPROGRESS]:`Operation now in progress`,[Q.ESTALE]:`Stale file handle`,[Q.EREMOTEIO]:`Remote I/O error`,[Q.EDQUOT]:`Disk quota exceeded`};var $=class e extends Error{static fromJSON(t){let n=new e(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new e(Q[t],b4[Q[t]],n,r)}constructor(e,t=b4[e],n,r=``){super(t),this.errno=e,this.path=n,this.syscall=r,this.code=Q[e],this.message=`${this.code}: ${t}${this.path?`, '${this.path}'`:``}`}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}};function x4(e,t){let n=``,r=0,i=-1,a=0,o=`\0`;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o==`/`)break;else o=`/`;if(o==`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n.at(-1)!==`.`||n.at(-2)!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length!==0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}function S4(...e){let t=``;for(let n of[...e.reverse(),`/`])if(n.length&&(t=`${n}/${t}`,n.startsWith(`/`)))break;let n=t.startsWith(`/`);return t=x4(t,!n),n?`/${t}`:t.length?t:`/`}function C4(e){if(!e.length)return`.`;let t=e.startsWith(`/`),n=e.endsWith(`/`);return e=x4(e,!t),e.length?(n&&(e+=`/`),t?`/${e}`:e):t?`/`:n?`./`:`.`}function w4(...e){if(!e.length)return`.`;let t=e.join(`/`);return t?.length?C4(t):`.`}function T4(e){if(e.length===0)return`.`;let t=e[0]===`/`,n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e[t]===`/`){if(!r){n=t;break}}else r=!1;return n===-1?t?`/`:`.`:t&&n===1?`//`:e.slice(0,n)}function E4(e,t){let n=0,r=-1,i=!0;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let a=t.length-1,o=-1;for(let s=e.length-1;s>=0;--s)if(e[s]===`/`){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(e[s]===t[a]?--a===-1&&(r=s):(a=-1,r=o));return n===r?r=o:r===-1&&(r=e.length),e.slice(n,r)}for(let t=e.length-1;t>=0;--t)if(e[t]===`/`){if(!i){n=t+1;break}}else r===-1&&(i=!1,r=t+1);return r===-1?``:e.slice(n,r)}function D4(e){let t=e.startsWith(`/`),n={root:t?`/`:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return n;let r=t?1:0,i=-1,a=0,o=-1,s=!0,c=e.length-1,l=0;for(;c>=r;--c){if(e[c]===`/`){if(!s){a=c+1;break}continue}o===-1&&(s=!1,o=c+1),e[c]===`.`?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(o!==-1){let r=a===0&&t?1:a;i===-1||l===0||l===1&&i===o-1&&i===a+1?n.base=n.name=e.slice(r,o):(n.name=e.slice(r,i),n.base=e.slice(r,o),n.ext=e.slice(i,o))}return a>0?n.dir=e.slice(0,a-1):t&&(n.dir=`/`),n}function O4(e,t,n,r,i){return Math.min(e+1,t+1,n+1,r===i?t:t+1)}function k4(e,t){if(e===t)return 0;e.length>t.length&&([e,t]=[t,e]);let n=e.length,r=t.length;for(;n>0&&e.charCodeAt(n-1)===t.charCodeAt(r-1);)n--,r--;let i=0;for(;i<n&&e.charCodeAt(i)===t.charCodeAt(i);)i++;if(n-=i,r-=i,n===0||r===1)return r;let a=Array(n<<1);for(let t=0;t<n;)a[n+t]=e.charCodeAt(i+t),a[t]=++t;let o,s,c,l,u;for(o=0;o+3<r;){let e=t.charCodeAt(i+(s=o)),r=t.charCodeAt(i+(c=o+1)),d=t.charCodeAt(i+(l=o+2)),f=t.charCodeAt(i+(u=o+3)),p=o+=4;for(let t=0;t<n;){let i=a[n+t],o=a[t];s=O4(o,s,c,e,i),c=O4(s,c,l,r,i),l=O4(c,l,u,d,i),p=O4(l,u,p,f,i),a[t++]=p,u=l,l=c,c=s,s=o}}let d=0;for(;o<r;){let e=t.charCodeAt(i+(s=o));d=++o;for(let t=0;t<n;t++){let r=a[t];a[t]=d=r<s||d<s?r>d?d+1:r+1:e===a[n+t]?s:s+1,s=r}}return d}typeof globalThis.setImmediate==`function`&&globalThis.setImmediate;function A4(e){if(typeof e!=`string`)throw new $(Q.EINVAL,`Can not encode a non-string`);return new Uint8Array(Array.from(e).map(e=>e.charCodeAt(0)))}function j4(e){if(!(e instanceof Uint8Array))throw new $(Q.EINVAL,`Can not decode a non-Uint8Array`);return Array.from(e).map(e=>String.fromCharCode(e)).join(``)}function M4(e){return JSON.parse(j4(e),(e,t)=>e==``?t:BigInt(t))}function N4(e){return A4(JSON.stringify(e,(e,t)=>e==``?t:t.toString()))}function P4(e,t){if(typeof e==`number`)return e;if(typeof e==`string`){let t=parseInt(e,8);if(!isNaN(t))return t}if(typeof t==`number`)return t;throw new $(Q.EINVAL,`Invalid mode: `+e?.toString())}function F4(e){if(e instanceof Date)return e;if(typeof e==`number`)return new Date(e*1e3);if(typeof e==`string`)return new Date(e);throw new $(Q.EINVAL,`Invalid time.`)}function I4(e){if(e=e.toString(),e.includes(`\0`))throw new $(Q.EINVAL,`Path can not contain null character`);if(e.length==0)throw new $(Q.EINVAL,`Path can not be empty`);return S4(e.replaceAll(/[/\\]+/g,`/`))}function L4(e,t=`utf8`,n,r=0){return typeof e!=`object`||!e?{encoding:typeof e==`string`?e:t??null,flag:n,mode:r}:{encoding:typeof e?.encoding==`string`?e.encoding:t??null,flag:typeof e?.flag==`string`?e.flag:n,mode:P4(`mode`in e?e?.mode:null,r)}}function R4(e){return typeof e==`object`&&!!e&&`isAvailable`in e&&typeof e.isAvailable==`function`&&`create`in e&&typeof e.create==`function`}async function z4(e,t){if(typeof t!=`object`||!t)throw new $(Q.EINVAL,`Invalid options`);for(let[n,r]of Object.entries(e.options)){let i=t?.[n];if(i==null){if(!r.required)continue;let i=Object.keys(t).filter(t=>!(t in e.options)).map(e=>({str:e,distance:k4(n,e)})).filter(e=>e.distance<5).sort((e,t)=>e.distance-t.distance);throw new $(Q.EINVAL,`${e.name}: Required option '${n}' not provided.${i.length>0?` You provided '${i[0].str}', did you mean '${n}'.`:``}`)}if(!(Array.isArray(r.type)?r.type.indexOf(typeof i)!=-1:typeof i==r.type))throw new $(Q.EINVAL,`${e.name}: Value provided for option ${n} is not the proper type. Expected ${Array.isArray(r.type)?`one of {${r.type.join(`, `)}}`:r.type}, but received ${typeof i}`);r.validator&&await r.validator(i)}}function B4(e){return typeof e==`object`&&!!e&&`backend`in e&&R4(e.backend)}const V4={uid:0,gid:0,suid:0,sgid:0,euid:0,egid:0};var H4=n((e=>{e.byteLength=c,e.toByteArray=u,e.fromByteArray=p;for(var t=[],n=[],r=typeof Uint8Array<`u`?Uint8Array:Array,i=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,a=0,o=i.length;a<o;++a)t[a]=i[a],n[i.charCodeAt(a)]=a;n[45]=62,n[95]=63;function s(e){var t=e.length;if(t%4>0)throw Error(`Invalid string. Length must be a multiple of 4`);var n=e.indexOf(`=`);n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=s(e),n=t[0],r=t[1];return(n+r)*3/4-r}function l(e,t,n){return(t+n)*3/4-n}function u(e){var t,i=s(e),a=i[0],o=i[1],c=new r(l(e,a,o)),u=0,d=o>0?a-4:a,f;for(f=0;f<d;f+=4)t=n[e.charCodeAt(f)]<<18|n[e.charCodeAt(f+1)]<<12|n[e.charCodeAt(f+2)]<<6|n[e.charCodeAt(f+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=t&255;return o===2&&(t=n[e.charCodeAt(f)]<<2|n[e.charCodeAt(f+1)]>>4,c[u++]=t&255),o===1&&(t=n[e.charCodeAt(f)]<<10|n[e.charCodeAt(f+1)]<<4|n[e.charCodeAt(f+2)]>>2,c[u++]=t>>8&255,c[u++]=t&255),c}function d(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function f(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(d(r));return i.join(``)}function p(e){for(var n,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(f(e,s,s+o>c?c:s+o));return i===1?(n=e[r-1],a.push(t[n>>2]+t[n<<4&63]+`==`)):i===2&&(n=(e[r-2]<<8)+e[r-1],a.push(t[n>>10]+t[n>>4&63]+t[n<<2&63]+`=`)),a.join(``)}})),U4=n((e=>{e.read=function(e,t,n,r,i){var a,o,s=i*8-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=a*256+e[t+d],d+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(a===0)a=1-l;else if(a===c)return o?NaN:(p?-1:1)*(1/0);else o+=2**r,a-=l;return(p?-1:1)*o*2**(a-r)},e.write=function(e,t,n,r,i,a){var o,s,c,l=a*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?2**-24-2**-77:0,p=r?0:a-1,m=r?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=2**-o)<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*2**(1-d),t*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*2**i,o+=d):(s=t*2**(d-1)*2**i,o=0));i>=8;e[n+p]=s&255,p+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+p]=o&255,p+=m,o/=256,l-=8);e[n+p-m]|=h*128}})),W4=n((e=>{var t=H4(),n=U4(),r=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`nodejs.util.inspect.custom`):null;e.Buffer=s,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<`u`&&typeof console.error==`function`&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,`parent`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,`offset`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(e){if(e>i)throw RangeError(`The value "`+e+`" is invalid for option "size"`);let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if(typeof e==`number`){if(typeof t==`string`)throw TypeError(`The "string" argument must be of type string. Received type number`);return d(e)}return c(e,t,n)}s.poolSize=8192;function c(e,t,n){if(typeof e==`string`)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(e==null)throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e);if(ye(e,ArrayBuffer)||e&&ye(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<`u`&&(ye(e,SharedArrayBuffer)||e&&ye(e.buffer,SharedArrayBuffer)))return h(e,t,n);if(typeof e==`number`)throw TypeError(`The "value" argument must not be of type number. Received type number`);let r=e.valueOf&&e.valueOf();if(r!=null&&r!==e)return s.from(r,t,n);let i=g(e);if(i)return i;if(typeof Symbol<`u`&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==`function`)return s.from(e[Symbol.toPrimitive](`string`),t,n);throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e)}s.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(e){if(typeof e!=`number`)throw TypeError(`"size" argument must be of type number`);if(e<0)throw RangeError(`The value "`+e+`" is invalid for option "size"`)}function u(e,t,n){return l(e),e<=0||t===void 0?o(e):typeof n==`string`?o(e).fill(t,n):o(e).fill(t)}s.alloc=function(e,t,n){return u(e,t,n)};function d(e){return l(e),o(e<0?0:_(e)|0)}s.allocUnsafe=function(e){return d(e)},s.allocUnsafeSlow=function(e){return d(e)};function f(e,t){if((typeof t!=`string`||t===``)&&(t=`utf8`),!s.isEncoding(t))throw TypeError(`Unknown encoding: `+t);let n=y(e,t)|0,r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function p(e){let t=e.length<0?0:_(e.length)|0,n=o(t);for(let r=0;r<t;r+=1)n[r]=e[r]&255;return n}function m(e){if(ye(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}function h(e,t,n){if(t<0||e.byteLength<t)throw RangeError(`"offset" is outside of buffer bounds`);if(e.byteLength<t+(n||0))throw RangeError(`"length" is outside of buffer bounds`);let r;return r=t===void 0&&n===void 0?new Uint8Array(e):n===void 0?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function g(e){if(s.isBuffer(e)){let t=_(e.length)|0,n=o(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!=`number`||be(e.length)?o(0):p(e);if(e.type===`Buffer`&&Array.isArray(e.data))return p(e.data)}function _(e){if(e>=i)throw RangeError(`Attempt to allocate Buffer larger than maximum size: 0x`+i.toString(16)+` bytes`);return e|0}function v(e){return+e!=e&&(e=0),s.alloc(+e)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(ye(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),ye(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError(`The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array`);if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`latin1`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError(`"list" argument must be an Array of Buffers`);if(e.length===0)return s.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(ye(t,Uint8Array))i+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(s.isBuffer(t))t.copy(r,i);else throw TypeError(`"list" argument must be an Array of Buffers`);i+=t.length}return r};function y(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ye(e,ArrayBuffer))return e.byteLength;if(typeof e!=`string`)throw TypeError(`The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type `+typeof e);let n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let i=!1;for(;;)switch(t){case`ascii`:case`latin1`:case`binary`:return n;case`utf8`:case`utf-8`:return he(e).length;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return n*2;case`hex`:return n>>>1;case`base64`:return _e(e).length;default:if(i)return r?-1:he(e).length;t=(``+t).toLowerCase(),i=!0}}s.byteLength=y;function b(e,t,n){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return``;for(e||=`utf8`;;)switch(e){case`hex`:return F(this,t,n);case`utf8`:case`utf-8`:return A(this,t,n);case`ascii`:return N(this,t,n);case`latin1`:case`binary`:return P(this,t,n);case`base64`:return k(this,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return ee(this,t,n);default:if(r)throw TypeError(`Unknown encoding: `+e);e=(e+``).toLowerCase(),r=!0}}s.prototype._isBuffer=!0;function x(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError(`Buffer size must be a multiple of 16-bits`);for(let t=0;t<e;t+=2)x(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError(`Buffer size must be a multiple of 32-bits`);for(let t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError(`Buffer size must be a multiple of 64-bits`);for(let t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return e===0?``:arguments.length===0?A(this,0,e):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError(`Argument must be a Buffer`);return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let t=``,n=e.INSPECT_MAX_BYTES;return t=this.toString(`hex`,0,n).replace(/(.{2})/g,`$1 `).trim(),this.length>n&&(t+=` ... `),`<Buffer `+t+`>`},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(ye(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError(`The "target" argument must be one of type Buffer or Uint8Array. Received type `+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError(`out of range index`);if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let a=i-r,o=n-t,c=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<c;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:o<a?1:0};function S(e,t,n,r,i){if(e.length===0)return-1;if(typeof n==`string`?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,be(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof t==`string`&&(t=s.from(t,r)),s.isBuffer(t))return t.length===0?-1:C(e,t,n,r,i);if(typeof t==`number`)return t&=255,typeof Uint8Array.prototype.indexOf==`function`?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,i);throw TypeError(`val must be string, number or Buffer`)}function C(e,t,n,r,i){let a=1,o=e.length,s=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r===`ucs2`||r===`ucs-2`||r===`utf16le`||r===`utf-16le`)){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,n/=2}function c(e,t){return a===1?e[t]:e.readUInt16BE(t*a)}let l;if(i){let r=-1;for(l=n;l<o;l++)if(c(e,l)===c(t,r===-1?0:l-r)){if(r===-1&&(r=l),l-r+1===s)return r*a}else r!==-1&&(l-=l-r),r=-1}else for(n+s>o&&(n=o-s),l=n;l>=0;l--){let n=!0;for(let r=0;r<s;r++)if(c(e,l+r)!==c(t,r)){n=!1;break}if(n)return l}return-1}s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)};function w(e,t,n,r){n=Number(n)||0;let i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;let a=t.length;r>a/2&&(r=a/2);let o;for(o=0;o<r;++o){let r=parseInt(t.substr(o*2,2),16);if(be(r))return o;e[n+o]=r}return o}function T(e,t,n,r){return ve(he(t,e.length-n),e,n,r)}function E(e,t,n,r){return ve(R(t),e,n,r)}function D(e,t,n,r){return ve(_e(t),e,n,r)}function O(e,t,n,r){return ve(ge(t,e.length-n),e,n,r)}s.prototype.write=function(e,t,n,r){if(t===void 0)r=`utf8`,n=this.length,t=0;else if(n===void 0&&typeof t==`string`)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,r===void 0&&(r=`utf8`)):(r=n,n=void 0);else throw Error(`Buffer.write(string, encoding, offset[, length]) is no longer supported`);let i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError(`Attempt to write outside buffer bounds`);r||=`utf8`;let a=!1;for(;;)switch(r){case`hex`:return w(this,e,t,n);case`utf8`:case`utf-8`:return T(this,e,t,n);case`ascii`:case`latin1`:case`binary`:return E(this,e,t,n);case`base64`:return D(this,e,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return O(this,e,t,n);default:if(a)throw TypeError(`Unknown encoding: `+r);r=(``+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:`Buffer`,data:Array.prototype.slice.call(this._arr||this,0)}};function k(e,n,r){return n===0&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function A(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],(n&192)==128&&(c=(t&31)<<6|n&63,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],(n&192)==128&&(r&192)==128&&(c=(t&15)<<12|(n&63)<<6|r&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],(n&192)==128&&(r&192)==128&&(s&192)==128&&(c=(t&15)<<18|(n&63)<<12|(r&63)<<6|s&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),i+=o}return M(r)}var j=4096;function M(e){let t=e.length;if(t<=j)return String.fromCharCode.apply(String,e);let n=``,r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=j));return n}function N(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]&127);return r}function P(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function F(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i=``;for(let r=t;r<n;++r)i+=z[e[r]];return i}function ee(e,t,n){let r=e.slice(t,n),i=``;for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+r[e+1]*256);return i}s.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r};function I(e,t,n){if(e%1!=0||e<0)throw RangeError(`offset is not uint`);if(e+t>n)throw RangeError(`Trying to access beyond buffer length`)}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=xe(function(e){e>>>=0,de(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&fe(e,this.length-8);let r=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),s.prototype.readBigUInt64BE=xe(function(e){e>>>=0,de(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&fe(e,this.length-8);let r=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=2**(8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=2**(8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=xe(function(e){e>>>=0,de(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&fe(e,this.length-8);let r=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=xe(function(e){e>>>=0,de(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&fe(e,this.length-8);let r=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),n.read(this,e,!1,52,8)};function L(e,t,n,r,i,a){if(!s.isBuffer(e))throw TypeError(`"buffer" argument must be a Buffer instance`);if(t>i||t<a)throw RangeError(`"value" argument is out of bounds`);if(n+r>e.length)throw RangeError(`Index out of range`)}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;L(this,e,t,n,r,0)}let i=1,a=0;for(this[t]=e&255;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;L(this,e,t,n,r,0)}let i=n-1,a=1;for(this[t+i]=e&255;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function te(e,t,n,r,i){ue(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function ne(e,t,n,r,i){ue(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}s.prototype.writeBigUInt64LE=xe(function(e,t=0){return te(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeBigUInt64BE=xe(function(e,t=0){return ne(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);L(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=e&255;++i<n&&(a*=256);)e<0&&o===0&&this[t+i-1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);L(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=e&255;--i>=0&&(a*=256);)e<0&&o===0&&this[t+i+1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=xe(function(e,t=0){return te(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))}),s.prototype.writeBigInt64BE=xe(function(e,t=0){return ne(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))});function re(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError(`Index out of range`)}function ie(e,t,r,i,a){return t=+t,r>>>=0,a||re(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}s.prototype.writeFloatLE=function(e,t,n){return ie(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return ie(this,e,t,!1,n)};function ae(e,t,r,i,a){return t=+t,r>>>=0,a||re(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}s.prototype.writeDoubleLE=function(e,t,n){return ae(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return ae(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError(`argument should be a Buffer`);if(n||=0,!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||=0,r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw RangeError(`targetStart out of bounds`);if(n<0||n>=this.length)throw RangeError(`Index out of range`);if(r<0)throw RangeError(`sourceEnd out of bounds`);r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&typeof Uint8Array.prototype.copyWithin==`function`?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},s.prototype.fill=function(e,t,n,r){if(typeof e==`string`){if(typeof t==`string`?(r=t,t=0,n=this.length):typeof n==`string`&&(r=n,n=this.length),r!==void 0&&typeof r!=`string`)throw TypeError(`encoding must be a string`);if(typeof r==`string`&&!s.isEncoding(r))throw TypeError(`Unknown encoding: `+r);if(e.length===1){let t=e.charCodeAt(0);(r===`utf8`&&t<128||r===`latin1`)&&(e=t)}}else typeof e==`number`?e&=255:typeof e==`boolean`&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError(`Out of range index`);if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||=0;let i;if(typeof e==`number`)for(i=t;i<n;++i)this[i]=e;else{let a=s.isBuffer(e)?e:s.from(e,r),o=a.length;if(o===0)throw TypeError(`The value "`+e+`" is invalid for argument "value"`);for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};var oe={};function se(e,t,n){oe[e]=class extends n{constructor(){super(),Object.defineProperty(this,`message`,{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,`code`,{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}se(`ERR_BUFFER_OUT_OF_BOUNDS`,function(e){return e?`${e} is outside of buffer bounds`:`Attempt to access memory outside buffer bounds`},RangeError),se(`ERR_INVALID_ARG_TYPE`,function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),se(`ERR_OUT_OF_RANGE`,function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=ce(String(n)):typeof n==`bigint`&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=ce(i)),i+=`n`),r+=` It must be ${t}. Received ${i}`,r},RangeError);function ce(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function le(e,t,n){de(t,`offset`),(e[t]===void 0||e[t+n]===void 0)&&fe(t,e.length-(n+1))}function ue(e,t,n,r,i,a){if(e>n||e<t){let r=typeof t==`bigint`?`n`:``,i;throw i=a>3?t===0||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${(a+1)*8}${r}`:`>= -(2${r} ** ${(a+1)*8-1}${r}) and < 2 ** ${(a+1)*8-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new oe.ERR_OUT_OF_RANGE(`value`,i,e)}le(r,i,a)}function de(e,t){if(typeof e!=`number`)throw new oe.ERR_INVALID_ARG_TYPE(t,`number`,e)}function fe(e,t,n){throw Math.floor(e)===e?t<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE(n||`offset`,`>= ${n?1:0} and <= ${t}`,e):(de(e,n),new oe.ERR_OUT_OF_RANGE(n||`offset`,`an integer`,e))}var pe=/[^+/0-9A-Za-z-_]/g;function me(e){if(e=e.split(`=`)[0],e=e.trim().replace(pe,``),e.length<2)return``;for(;e.length%4!=0;)e+=`=`;return e}function he(e,t){t||=1/0;let n,r=e.length,i=null,a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error(`Invalid code point`)}return a}function R(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function ge(e,t){let n,r,i,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function _e(e){return t.toByteArray(me(e))}function ve(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ye(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function be(e){return e!==e}var z=(function(){let e=`0123456789abcdef`,t=Array(256);for(let n=0;n<16;++n){let r=n*16;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t})();function xe(e){return typeof BigInt>`u`?Se:e}function Se(){throw Error(`BigInt not supported`)}})),G4=W4(),K4=e({COPYFILE_EXCL:()=>1,COPYFILE_FICLONE:()=>2,COPYFILE_FICLONE_FORCE:()=>4,F_OK:()=>0,O_APPEND:()=>q4,O_CREAT:()=>64,O_DIRECT:()=>e3,O_DIRECTORY:()=>J4,O_DSYNC:()=>Q4,O_EXCL:()=>128,O_NOATIME:()=>Y4,O_NOCTTY:()=>256,O_NOFOLLOW:()=>X4,O_NONBLOCK:()=>t3,O_RDONLY:()=>0,O_RDWR:()=>2,O_SYMLINK:()=>$4,O_SYNC:()=>Z4,O_TRUNC:()=>512,O_WRONLY:()=>1,R_OK:()=>4,S_IFBLK:()=>o3,S_IFCHR:()=>c3,S_IFDIR:()=>s3,S_IFIFO:()=>l3,S_IFLNK:()=>i3,S_IFMT:()=>n3,S_IFREG:()=>a3,S_IFSOCK:()=>r3,S_IRGRP:()=>32,S_IROTH:()=>4,S_IRUSR:()=>256,S_IRWXG:()=>56,S_IRWXO:()=>7,S_IRWXU:()=>448,S_ISGID:()=>d3,S_ISUID:()=>u3,S_ISVTX:()=>512,S_IWGRP:()=>16,S_IWOTH:()=>2,S_IWUSR:()=>128,S_IXGRP:()=>8,S_IXOTH:()=>1,S_IXUSR:()=>64,UV_FS_O_FILEMAP:()=>0,W_OK:()=>2,X_OK:()=>1});const q4=1024,J4=65536,Y4=262144,X4=131072,Z4=1052672,Q4=4096,$4=32768,e3=16384,t3=2048,n3=61440,r3=49152,i3=40960,a3=32768,o3=24576,s3=16384,c3=8192,l3=4096,u3=2048,d3=1024;var f3=t(n(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1);f3.default,Symbol.toStringTag,Symbol.iterator;function p3(e){return e.at(0).toUpperCase()+e.slice(1)}const m3=[`int8`,`uint8`,`int16`,`uint16`,`int32`,`uint32`,`int64`,`uint64`,`float32`,`float64`],h3=[...m3,...m3.map(e=>p3(e)),`char`],g3=/^(u?int|float)(8|16|32|64)$/i;function _3(e){return e==`char`?`uint8`:e.toLowerCase()}function v3(e){return g3.test(e.toString())}function y3(e){return e==`char`||g3.test(e.toString().toLowerCase())}function b3(e){if(!y3(e))throw TypeError(`Not a valid primitive type: `+e)}const x3=Symbol(`struct_init`),S3=Symbol(`struct`);function C3(e){return typeof e==`object`&&!!e&&S3 in e}Symbol.metadata??=Symbol.for(`Symbol.metadata`);function w3(e){Symbol?.metadata&&(Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)}))}function T3(e){let t=Symbol.metadata||Object.getOwnPropertySymbols(e).find(e=>e.description==`Symbol.metadata`);if(w3(e),!t)throw ReferenceError(`Could not get a reference to Symbol.metadata`);return t}function E3(e){return typeof e==`function`&&T3(e)in e&&C3(e[T3(e)])}function D3(e){return typeof e==`object`&&!!e&&E3(e.constructor)}function O3(e){if(!D3(e))throw TypeError((typeof e==`function`?e.name:typeof e==`object`&&e?e.constructor.name:e)+` is not a struct instance`)}function k3(e){return D3(e)||E3(e)}function A3(e){if(!k3(e))throw TypeError((typeof e==`function`?e.name:typeof e==`object`&&e?e.constructor.name:e)+` is not a struct`)}function j3(e){if(typeof e==`string`)return b3(e),_3(e).match(g3)[2]/8;A3(e);let t=E3(e)?e:e.constructor;return t[T3(t)][S3].size}function M3(e,t){return Math.ceil(e/t)*t}function N3(e={}){return function(t,n){n.metadata??={},n.metadata[x3]||=[];let r=0,i=new Map;for(let t of n.metadata[x3]){let{name:n,type:a,length:o}=t;if(!y3(a)&&!E3(a))throw TypeError(`Not a valid type: `+a);i.set(n,{offset:r,type:y3(a)?_3(a):a,length:o}),r+=j3(a)*(o||1),r=M3(r,e.align||1)}return n.metadata[S3]={options:e,members:i,size:r},t}}function P3(e,t){return function(n,r){let i=r.name;if(typeof i==`symbol`&&(console.warn(`Symbol used for struct member name will be coerced to string: `+i.toString()),i=i.toString()),!i)throw ReferenceError(`Invalid name for struct member`);return r.metadata??={},r.metadata[x3]||=[],r.metadata[x3].push({name:i,type:e,length:t}),n}}function F3(e){O3(e);let{options:t,members:n}=e.constructor[T3(e.constructor)][S3],r=new Uint8Array(j3(e)),i=new DataView(r.buffer);for(let[a,{type:o,length:s,offset:c}]of n)for(let n=0;n<(s||1);n++){let l=c+j3(o)*n,u=s>0?e[a][n]:e[a];if(typeof u==`string`&&(u=u.charCodeAt(0)),!v3(o)){r.set(u?F3(u):new Uint8Array(j3(o)),l);continue}let d=`set`+p3(o);if(d==`setInt64`){i.setBigInt64(l,BigInt(u),!t.bigEndian);continue}if(d==`setUint64`){i.setBigUint64(l,BigInt(u),!t.bigEndian);continue}i[d](l,Number(u),!t.bigEndian)}return r}function I3(e,t){O3(e);let{options:n,members:r}=e.constructor[T3(e.constructor)][S3],i=t instanceof Uint8Array?t:new Uint8Array(`buffer`in t?t.buffer:t),a=new DataView(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength));for(let[t,{type:o,offset:s,length:c}]of r)for(let r=0;r<(c||1);r++){let l=c>0?e[t]:e,u=c>0?r:t,d=s+j3(o)*r;if(typeof e[t]==`string`){e[t]=e[t].slice(0,r)+String.fromCharCode(a.getUint8(d))+e[t].slice(r+1);continue}if(!v3(o)){if(l[u]===null||l[u]===void 0)continue;I3(l[u],new Uint8Array(i.slice(d,d+j3(o))));continue}c>0&&(l||=[]);let f=`get`+p3(o);if(f==`getInt64`){l[u]=a.getBigInt64(d,!n.bigEndian);continue}if(f==`getUint64`){l[u]=a.getBigUint64(d,!n.bigEndian);continue}l[u]=a[f](d,!n.bigEndian)}}function L3(e){function t(t,n){return typeof t==`number`?P3(e,t):P3(e)(t,n)}return t}const R3=Object.fromEntries(h3.map(e=>[e,L3(e)]));var z3=function(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0},B3=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},V3=function(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})};const H3=2**32-1,U3=0n;function W3(){return Math.round(Math.random()*2**32).toString(16)}function G3(){return BigInt(`0x`+W3()+W3())}var K3=(()=>{var e,t,n,r,i,a,o,s,c,l;let u=[N3()],d,f=[],p,m,h=[],g=[],_,v=[],y=[],b,x=[],S=[],C,w=[],T=[],E,D=[],O=[],k,A=[],j=[],M,N=[],P=[],F,ee=[],I=[],L,te=[],ne=[],re,ie=[],ae=[];var oe=p=class{get data(){return F3(this)}constructor(e){if(this.ino=B3(this,h,void 0),this.size=(B3(this,g),B3(this,v,void 0)),this.mode=(B3(this,y),B3(this,x,void 0)),this.nlink=(B3(this,S),B3(this,w,void 0)),this.uid=(B3(this,T),B3(this,D,void 0)),this.gid=(B3(this,O),B3(this,A,void 0)),this.atimeMs=(B3(this,j),B3(this,N,void 0)),this.birthtimeMs=(B3(this,P),B3(this,ee,void 0)),this.mtimeMs=(B3(this,I),B3(this,te,void 0)),this.ctimeMs=(B3(this,ne),B3(this,ie,void 0)),B3(this,ae),e){if(e.byteLength<j3(oe))throw RangeError(`Can not create an inode from a buffer less than ${j3(oe)} bytes`);I3(this,e);return}this.ino=G3(),this.nlink=1,this.size=4096;let t=Date.now();this.atimeMs=t,this.mtimeMs=t,this.ctimeMs=t,this.birthtimeMs=t}toStats(){return new J3(this)}update(e){let t=!1;return this.size!==e.size&&(this.size=e.size,t=!0),this.mode!==e.mode&&(this.mode=e.mode,t=!0),this.nlink!==e.nlink&&(this.nlink=e.nlink,t=!0),this.uid!==e.uid&&(this.uid=e.uid,t=!0),this.uid!==e.uid&&(this.uid=e.uid,t=!0),this.atimeMs!==e.atimeMs&&(this.atimeMs=e.atimeMs,t=!0),this.mtimeMs!==e.mtimeMs&&(this.mtimeMs=e.mtimeMs,t=!0),this.ctimeMs!==e.ctimeMs&&(this.ctimeMs=e.ctimeMs,t=!0),t}};return V3(p,`Inode`),(()=>{let se=typeof Symbol==`function`&&Symbol.metadata?Object.create(null):void 0;m=[(e=R3).uint64.bind(e)],_=[(t=R3).uint32.bind(t)],b=[(n=R3).uint16.bind(n)],C=[(r=R3).uint32.bind(r)],E=[(i=R3).uint32.bind(i)],k=[(a=R3).uint32.bind(a)],M=[(o=R3).float64.bind(o)],F=[(s=R3).float64.bind(s)],L=[(c=R3).float64.bind(c)],re=[(l=R3).float64.bind(l)],z3(null,null,m,{kind:`field`,name:`ino`,static:!1,private:!1,access:{has:e=>`ino`in e,get:e=>e.ino,set:(e,t)=>{e.ino=t}},metadata:se},h,g),z3(null,null,_,{kind:`field`,name:`size`,static:!1,private:!1,access:{has:e=>`size`in e,get:e=>e.size,set:(e,t)=>{e.size=t}},metadata:se},v,y),z3(null,null,b,{kind:`field`,name:`mode`,static:!1,private:!1,access:{has:e=>`mode`in e,get:e=>e.mode,set:(e,t)=>{e.mode=t}},metadata:se},x,S),z3(null,null,C,{kind:`field`,name:`nlink`,static:!1,private:!1,access:{has:e=>`nlink`in e,get:e=>e.nlink,set:(e,t)=>{e.nlink=t}},metadata:se},w,T),z3(null,null,E,{kind:`field`,name:`uid`,static:!1,private:!1,access:{has:e=>`uid`in e,get:e=>e.uid,set:(e,t)=>{e.uid=t}},metadata:se},D,O),z3(null,null,k,{kind:`field`,name:`gid`,static:!1,private:!1,access:{has:e=>`gid`in e,get:e=>e.gid,set:(e,t)=>{e.gid=t}},metadata:se},A,j),z3(null,null,M,{kind:`field`,name:`atimeMs`,static:!1,private:!1,access:{has:e=>`atimeMs`in e,get:e=>e.atimeMs,set:(e,t)=>{e.atimeMs=t}},metadata:se},N,P),z3(null,null,F,{kind:`field`,name:`birthtimeMs`,static:!1,private:!1,access:{has:e=>`birthtimeMs`in e,get:e=>e.birthtimeMs,set:(e,t)=>{e.birthtimeMs=t}},metadata:se},ee,I),z3(null,null,L,{kind:`field`,name:`mtimeMs`,static:!1,private:!1,access:{has:e=>`mtimeMs`in e,get:e=>e.mtimeMs,set:(e,t)=>{e.mtimeMs=t}},metadata:se},te,ne),z3(null,null,re,{kind:`field`,name:`ctimeMs`,static:!1,private:!1,access:{has:e=>`ctimeMs`in e,get:e=>e.ctimeMs,set:(e,t)=>{e.ctimeMs=t}},metadata:se},ie,ae),z3(null,d={value:p},u,{kind:`class`,name:p.name,metadata:se},null,f),oe=p=d.value,se&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:se}),B3(p,f)})(),oe=p})(),q3=class{_convert(e){return this._isBigint?BigInt(e):Number(e)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}get atime(){return new Date(Number(this.atimeMs))}set atime(e){this.atimeMs=this._convert(e.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(e){this.mtimeMs=this._convert(e.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(e){this.ctimeMs=this._convert(e.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(e){this.birthtimeMs=this._convert(e.getTime())}constructor({atimeMs:e,mtimeMs:t,ctimeMs:n,birthtimeMs:r,uid:i,gid:a,size:o,mode:s,ino:c}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);let l=Date.now();this.atimeMs=this._convert(e??l),this.mtimeMs=this._convert(t??l),this.ctimeMs=this._convert(n??l),this.birthtimeMs=this._convert(r??l),this.uid=this._convert(i??0),this.gid=this._convert(a??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(s??0),this.mode&61440||(this.mode|=this._convert(a3))}isFile(){return(this.mode&n3)===a3}isDirectory(){return(this.mode&n3)===s3}isSymbolicLink(){return(this.mode&n3)===i3}isSocket(){return(this.mode&n3)===r3}isBlockDevice(){return(this.mode&n3)===o3}isCharacterDevice(){return(this.mode&n3)===c3}isFIFO(){return(this.mode&n3)===l3}hasAccess(e){if(V4.euid===0||V4.egid===0)return!0;let t=(V4.uid==this.uid?448:0)|(V4.gid==this.gid?56:0)|7;return(e&this.mode&t)==e}cred(e=Number(this.uid),t=Number(this.gid)){return{uid:e,gid:t,suid:Number(this.uid),sgid:Number(this.gid),euid:e,egid:t}}chmod(e){this.mode=this._convert(this.mode&n3|e)}chown(e,t){e=Number(e),t=Number(t),!isNaN(e)&&0<=e&&e<2**32&&(this.uid=this._convert(e)),!isNaN(t)&&0<=t&&t<2**32&&(this.gid=this._convert(t))}get atimeNs(){return BigInt(this.atimeMs)*1000n}get mtimeNs(){return BigInt(this.mtimeMs)*1000n}get ctimeNs(){return BigInt(this.ctimeMs)*1000n}get birthtimeNs(){return BigInt(this.birthtimeMs)*1000n}},J3=class extends q3{constructor(){super(...arguments),this._isBigint=!1}},Y3=class extends q3{constructor(){super(...arguments),this._isBigint=!0}};function X3(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}var Z3=class{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=H3,this.ffree=H3}},Q3=class{constructor(){this.type=525687744115n,this.bsize=4096n,this.blocks=0n,this.bfree=0n,this.bavail=0n,this.files=BigInt(H3),this.ffree=BigInt(H3)}};Promise.withResolvers??(Promise.withResolvers=function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}),Symbol.dispose??(Symbol.dispose=Symbol(`Symbol.dispose`)),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol(`Symbol.asyncDispose`));var $3=[`r`,`r+`,`rs`,`rs+`,`w`,`wx`,`w+`,`wx+`,`a`,`ax`,`a+`,`ax+`];function e6(e){if(typeof e==`number`)return t6(e);if(!$3.includes(e))throw Error(`Invalid flag string: `+e);return e}function t6(e){switch(e){case 0:return`r`;case 0|Z4:return`rs`;case 2:return`r+`;case 2|Z4:return`rs+`;case 577:return`w`;case 705:return`wx`;case 578:return`w+`;case 706:return`wx+`;case 1089:return`a`;case 1217:return`ax`;case 1090:return`a+`;case 1218:return`ax+`;default:throw Error(`Invalid flag number: `+e)}}function n6(e){let t=0;return t<<=1,t+=+r6(e),t<<=1,t+=+i6(e),t<<=1,t}function r6(e){return e.indexOf(`r`)!==-1||e.indexOf(`+`)!==-1}function i6(e){return e.indexOf(`w`)!==-1||e.indexOf(`a`)!==-1||e.indexOf(`+`)!==-1}function a6(e){return e.indexOf(`w`)!==-1}function o6(e){return e.indexOf(`a`)!==-1}function s6(e){return e.indexOf(`x`)!==-1}var c6=class{constructor(e,t){this.fs=e,this.path=t}[Symbol.asyncDispose](){return this.close()}[Symbol.dispose](){return this.closeSync()}datasync(){return this.sync()}datasyncSync(){return this.syncSync()}},l6=class extends c6{constructor(e,t,n,r,i=new Uint8Array(new ArrayBuffer(0,e.metadata().noResizableBuffers?{}:{maxByteLength:H3}))){if(super(e,t),this.fs=e,this.flag=n,this.stats=r,this._buffer=i,this._position=0,this.dirty=!1,this.closed=!1,this.stats.size!=i.byteLength){if(r6(this.flag))throw Error(`Size mismatch: buffer length ${i.byteLength}, stats size ${this.stats.size}`);this.dirty=!0}}get buffer(){return this._buffer}get position(){return o6(this.flag)?this.stats.size:this._position}set position(e){this._position=e}async sync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.sync`);this.dirty&&=(await this.fs.sync(this.path,this._buffer,this.stats),!1)}syncSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.sync`);this.dirty&&=(this.fs.syncSync(this.path,this._buffer,this.stats),!1)}async close(){if(this.closed)throw $.With(`EBADF`,this.path,`File.close`);await this.sync(),this.dispose()}closeSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.close`);this.syncSync(),this.dispose()}dispose(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.dispose`);if(this.dirty&&!e)throw $.With(`EBUSY`,this.path,`File.dispose`);delete this._buffer,delete this.stats,this.closed=!0}stat(){if(this.closed)throw $.With(`EBADF`,this.path,`File.stat`);return Promise.resolve(new J3(this.stats))}statSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.stat`);return new J3(this.stats)}_truncate(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.truncate`);if(this.dirty=!0,!i6(this.flag))throw new $(Q.EPERM,`File not opened with a writeable mode.`);if(this.stats.mtimeMs=Date.now(),e>this._buffer.length){let t=new Uint8Array(e-this._buffer.length);this.writeSync(t,0,t.length,this._buffer.length);return}this.stats.size=e,this._buffer=this._buffer.slice(0,e)}async truncate(e){this._truncate(e),await this.sync()}truncateSync(e){this._truncate(e),this.syncSync()}_write(e,t=0,n=this.stats.size,r=this.position){if(this.closed)throw $.With(`EBADF`,this.path,`File.write`);if(this.dirty=!0,!i6(this.flag))throw new $(Q.EPERM,`File not opened with a writeable mode.`);let i=r+n;if(i>this.stats.size&&(this.stats.size=i,i>this._buffer.byteLength))if(this._buffer.buffer.resizable&&this._buffer.buffer.maxByteLength<=i)this._buffer.buffer.resize(i);else{let e=new Uint8Array(new ArrayBuffer(i,this.fs.metadata().noResizableBuffers?{}:{maxByteLength:H3}));e.set(this._buffer),this._buffer=e}let a=e.slice(t,t+n);return this._buffer.set(a,r),this.stats.mtimeMs=Date.now(),this.position=r+a.byteLength,a.byteLength}async write(e,t,n,r){let i=this._write(e,t,n,r);return await this.sync(),i}writeSync(e,t=0,n=this.stats.size,r=this.position){let i=this._write(e,t,n,r);return this.syncSync(),i}_read(e,t=0,n=this.stats.size,r){if(this.closed)throw $.With(`EBADF`,this.path,`File.read`);if(!r6(this.flag))throw new $(Q.EPERM,`File not opened with a readable mode.`);this.dirty=!0,r??=this.position;let i=r+n;i>this.stats.size&&(i=r+Math.max(this.stats.size-r,0)),this.stats.atimeMs=Date.now(),this._position=i;let a=i-r;return a==0||new Uint8Array(e.buffer,t,n).set(this._buffer.slice(r,i)),a}async read(e,t,n,r){let i=this._read(e,t,n,r);return await this.sync(),{bytesRead:i,buffer:e}}readSync(e,t,n,r){let i=this._read(e,t,n,r);return this.statSync(),i}async chmod(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.chmod`);this.dirty=!0,this.stats.chmod(e),await this.sync()}chmodSync(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.chmod`);this.dirty=!0,this.stats.chmod(e),this.syncSync()}async chown(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.chown`);this.dirty=!0,this.stats.chown(e,t),await this.sync()}chownSync(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.chown`);this.dirty=!0,this.stats.chown(e,t),this.syncSync()}async utimes(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.utimes`);this.dirty=!0,this.stats.atime=e,this.stats.mtime=t,await this.sync()}utimesSync(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.utimes`);this.dirty=!0,this.stats.atime=e,this.stats.mtime=t,this.syncSync()}async _setType(e){if(this.closed)throw $.With(`EBADF`,this.path,`File._setType`);this.dirty=!0,this.stats.mode=this.stats.mode&~n3|e,await this.sync()}_setTypeSync(e){if(this.closed)throw $.With(`EBADF`,this.path,`File._setType`);this.dirty=!0,this.stats.mode=this.stats.mode&~n3|e,this.syncSync()}async[Symbol.asyncDispose](){await this.close()}[Symbol.dispose](){this.closeSync()}},u6=class{metadata(){return{name:this.constructor.name.toLowerCase(),readonly:!1,totalSpace:0,freeSpace:0,noResizableBuffers:!1,noAsyncCache:this._disableSync??!1,type:525687744115}}constructor(...e){}async ready(){}async exists(e){try{return await this.stat(e),!0}catch(e){return e.code!=`ENOENT`}}existsSync(e){try{return this.statSync(e),!0}catch(e){return e.code!=`ENOENT`}}},d6=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},f6=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),p6=5,m6=class extends u6{async ready(){this._initialized||=(await this.checkRoot(),!0)}constructor(e){super(),this.store=e,this._initialized=!1}metadata(){return{...super.metadata(),name:this.store.name}}async empty(){await this.store.clear(),await this.checkRoot()}emptySync(){this.store.clearSync(),this.checkRootSync()}async rename(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!0),i=T4(e),a=E4(e),o=T4(t),s=E4(t),c=await this.findINode(r,i),l=await this.getDirListing(r,c,i);if(!l[a])throw $.With(`ENOENT`,e,`rename`);let u=l[a];if(delete l[a],(o+`/`).indexOf(e+`/`)===0)throw new $(Q.EBUSY,i);let d,f;if(o===i?(d=c,f=l):(d=await this.findINode(r,o),f=await this.getDirListing(r,d,o)),f[s]){let e=await this.getINode(r,f[s],t);if(!e.toStats().isFile())throw $.With(`EPERM`,t,`rename`);await r.remove(e.ino),await r.remove(f[s])}f[s]=u,await r.set(c.ino,N4(l)),await r.set(d.ino,N4(f)),await r.commit()}catch(e){n.error=e,n.hasError=!0}finally{let e=f6(n);e&&await e}}renameSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!1),i=T4(e),a=E4(e),o=T4(t),s=E4(t),c=this.findINodeSync(r,i),l=this.getDirListingSync(r,c,i);if(!l[a])throw $.With(`ENOENT`,e,`rename`);let u=l[a];if(delete l[a],(o+`/`).indexOf(e+`/`)==0)throw new $(Q.EBUSY,i);let d,f;if(o===i?(d=c,f=l):(d=this.findINodeSync(r,o),f=this.getDirListingSync(r,d,o)),f[s]){let e=this.getINodeSync(r,f[s],t);if(!e.toStats().isFile())throw $.With(`EPERM`,t,`rename`);r.removeSync(e.ino),r.removeSync(f[s])}f[s]=u,r.setSync(c.ino,N4(l)),r.setSync(d.ino,N4(f)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{f6(n)}}async stat(e){let t={stack:[],error:void 0,hasError:!1};try{let n=d6(t,this.store.transaction(),!0),r=await this.findINode(n,e);if(!r)throw $.With(`ENOENT`,e,`stat`);return r.toStats()}catch(e){t.error=e,t.hasError=!0}finally{let e=f6(t);e&&await e}}statSync(e){let t={stack:[],error:void 0,hasError:!1};try{let n=d6(t,this.store.transaction(),!1);return this.findINodeSync(n,e).toStats()}catch(e){t.error=e,t.hasError=!0}finally{f6(t)}}async createFile(e,t,n){let r=await this.commitNew(e,a3,n,new Uint8Array);return new l6(this,e,t,r.toStats(),new Uint8Array)}createFileSync(e,t,n){return this.commitNewSync(e,a3,n),this.openFileSync(e,t)}async openFile(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!0),i=await this.findINode(r,e),a=await r.get(i.ino);if(!a)throw $.With(`ENOENT`,e,`openFile`);return new l6(this,e,t,i.toStats(),a)}catch(e){n.error=e,n.hasError=!0}finally{let e=f6(n);e&&await e}}openFileSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!1),i=this.findINodeSync(r,e),a=r.getSync(i.ino);if(!a)throw $.With(`ENOENT`,e,`openFile`);return new l6(this,e,t,i.toStats(),a)}catch(e){n.error=e,n.hasError=!0}finally{f6(n)}}async unlink(e){return this.remove(e,!1)}unlinkSync(e){this.removeSync(e,!1)}async rmdir(e){if((await this.readdir(e)).length)throw $.With(`ENOTEMPTY`,e,`rmdir`);await this.remove(e,!0)}rmdirSync(e){if(this.readdirSync(e).length)throw $.With(`ENOTEMPTY`,e,`rmdir`);this.removeSync(e,!0)}async mkdir(e,t){await this.commitNew(e,s3,t,A4(`{}`))}mkdirSync(e,t){this.commitNewSync(e,s3,t,A4(`{}`))}async readdir(e){let t={stack:[],error:void 0,hasError:!1};try{let n=d6(t,this.store.transaction(),!0),r=await this.findINode(n,e);return Object.keys(await this.getDirListing(n,r,e))}catch(e){t.error=e,t.hasError=!0}finally{let e=f6(t);e&&await e}}readdirSync(e){let t={stack:[],error:void 0,hasError:!1};try{let n=d6(t,this.store.transaction(),!1),r=this.findINodeSync(n,e);return Object.keys(this.getDirListingSync(n,r,e))}catch(e){t.error=e,t.hasError=!0}finally{f6(t)}}async sync(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=d6(r,this.store.transaction(),!0),a=await this._findINode(i,T4(e),E4(e)),o=await this.getINode(i,a,e),s=o.update(n);await i.set(o.ino,t),s&&await i.set(a,o.data),await i.commit()}catch(e){r.error=e,r.hasError=!0}finally{let e=f6(r);e&&await e}}syncSync(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=d6(r,this.store.transaction(),!1),a=this._findINodeSync(i,T4(e),E4(e)),o=this.getINodeSync(i,a,e),s=o.update(n);i.setSync(o.ino,t),s&&i.setSync(a,o.data),i.commitSync()}catch(e){r.error=e,r.hasError=!0}finally{f6(r)}}async link(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!0),i=T4(t),a=await this.findINode(r,i),o=await this.getDirListing(r,a,i),s=await this._findINode(r,T4(e),E4(e)),c=await this.getINode(r,s,e);c.nlink++,o[E4(t)]=s,r.setSync(s,c.data),r.setSync(a.ino,N4(o)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{let e=f6(n);e&&await e}}linkSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!1),i=T4(t),a=this.findINodeSync(r,i),o=this.getDirListingSync(r,a,i),s=this._findINodeSync(r,T4(e),E4(e)),c=this.getINodeSync(r,s,e);c.nlink++,o[E4(t)]=s,r.setSync(s,c.data),r.setSync(a.ino,N4(o)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{f6(n)}}async checkRoot(){let e={stack:[],error:void 0,hasError:!1};try{let t=d6(e,this.store.transaction(),!0);if(await t.get(0n))return;let n=new K3;n.mode=511|s3,await t.set(n.ino,A4(`{}`)),await t.set(U3,n.data),await t.commit()}catch(t){e.error=t,e.hasError=!0}finally{let t=f6(e);t&&await t}}checkRootSync(){let e={stack:[],error:void 0,hasError:!1};try{let t=d6(e,this.store.transaction(),!1);if(t.getSync(0n))return;let n=new K3;n.mode=511|s3,t.setSync(n.ino,A4(`{}`)),t.setSync(U3,n.data),t.commitSync()}catch(t){e.error=t,e.hasError=!0}finally{f6(e)}}async _findINode(e,t,n,r=new Set){let i=w4(t,n);if(r.has(i))throw new $(Q.EIO,`Infinite loop detected while finding inode`,i);if(r.add(i),t==`/`&&n===``)return U3;let a=t==`/`?await this.getINode(e,U3,t):await this.findINode(e,t,r),o=await this.getDirListing(e,a,t);if(!(n in o))throw $.With(`ENOENT`,S4(t,n),`_findINode`);return o[n]}_findINodeSync(e,t,n,r=new Set){let i=w4(t,n);if(r.has(i))throw new $(Q.EIO,`Infinite loop detected while finding inode`,i);if(r.add(i),t==`/`&&n===``)return U3;let a=t==`/`?this.getINodeSync(e,U3,t):this.findINodeSync(e,t,r),o=this.getDirListingSync(e,a,t);if(!(n in o))throw $.With(`ENOENT`,S4(t,n),`_findINode`);return o[n]}async findINode(e,t,n=new Set){let r=await this._findINode(e,T4(t),E4(t),n);return this.getINode(e,r,t)}findINodeSync(e,t,n=new Set){let r=this._findINodeSync(e,T4(t),E4(t),n);return this.getINodeSync(e,r,t)}async getINode(e,t,n){let r=await e.get(t);if(!r)throw $.With(`ENOENT`,n,`getINode`);return new K3(r.buffer)}getINodeSync(e,t,n){let r=e.getSync(t);if(!r)throw $.With(`ENOENT`,n,`getINode`);return new K3(r.buffer)}async getDirListing(e,t,n){if(!t.toStats().isDirectory())throw $.With(`ENOTDIR`,n,`getDirListing`);let r=await e.get(t.ino);if(!r)throw $.With(`ENOENT`,n,`getDirListing`);return M4(r)}getDirListingSync(e,t,n){if(!t.toStats().isDirectory())throw $.With(`ENOTDIR`,n,`getDirListing`);let r=e.getSync(t.ino);if(!r)throw $.With(`ENOENT`,n,`getDirListing`);return M4(r)}async addNew(e,t,n){for(let n=0;n<p6;n++){let n=G3();if(!await e.get(n))return await e.set(n,t),n}throw new $(Q.ENOSPC,`No inode IDs available`,n,`addNewNode`)}addNewSync(e,t,n){for(let n=0;n<p6;n++){let n=G3();if(!e.getSync(n))return e.setSync(n,t),n}throw new $(Q.ENOSPC,`No inode IDs available`,n,`addNewNode`)}async commitNew(e,t,n,r){let i={stack:[],error:void 0,hasError:!1};try{let a=d6(i,this.store.transaction(),!0),o=T4(e),s=await this.findINode(a,o),c=E4(e),l=await this.getDirListing(a,s,o);if(e===`/`)throw $.With(`EEXIST`,e,`commitNew`);if(l[c])throw await a.abort(),$.With(`EEXIST`,e,`commitNew`);let u=new K3;return u.ino=await this.addNew(a,r,e),u.mode=n|t,u.uid=V4.uid,u.gid=V4.gid,u.size=r.length,l[c]=await this.addNew(a,u.data,e),await a.set(s.ino,N4(l)),await a.commit(),u}catch(e){i.error=e,i.hasError=!0}finally{let e=f6(i);e&&await e}}commitNewSync(e,t,n,r=new Uint8Array){let i={stack:[],error:void 0,hasError:!1};try{let a=d6(i,this.store.transaction(),!1),o=T4(e),s=this.findINodeSync(a,o),c=E4(e),l=this.getDirListingSync(a,s,o);if(e===`/`||l[c])throw $.With(`EEXIST`,e,`commitNew`);let u=new K3;return u.ino=this.addNewSync(a,r,e),u.size=r.length,u.mode=n|t,u.uid=V4.uid,u.gid=V4.gid,l[c]=this.addNewSync(a,u.data,e),a.setSync(s.ino,N4(l)),a.commitSync(),u}catch(e){i.error=e,i.hasError=!0}finally{f6(i)}}async remove(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!0),i=T4(e),a=await this.findINode(r,i),o=await this.getDirListing(r,a,i),s=E4(e);if(!o[s])throw $.With(`ENOENT`,e,`remove`);let c=o[s],l=await this.getINode(r,c,e);if(delete o[s],!t&&l.toStats().isDirectory())throw $.With(`EISDIR`,e,`remove`);if(t&&!l.toStats().isDirectory())throw $.With(`ENOTDIR`,e,`remove`);await r.set(a.ino,N4(o)),--l.nlink<1&&(await r.remove(l.ino),await r.remove(c)),await r.commit()}catch(e){n.error=e,n.hasError=!0}finally{let e=f6(n);e&&await e}}removeSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=d6(n,this.store.transaction(),!1),i=T4(e),a=this.findINodeSync(r,i),o=this.getDirListingSync(r,a,i),s=E4(e),c=o[s];if(!c)throw $.With(`ENOENT`,e,`remove`);let l=this.getINodeSync(r,c,e);if(delete o[s],!t&&l.toStats().isDirectory())throw $.With(`EISDIR`,e,`remove`);if(t&&!l.toStats().isDirectory())throw $.With(`ENOTDIR`,e,`remove`);r.setSync(a.ino,N4(o)),--l.nlink<1&&(r.removeSync(l.ino),r.removeSync(c)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{f6(n)}}},h6=class{constructor(e){this.store=e,this.done=!1}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}},g6=class extends h6{async get(e){return this.getSync(e)}async set(e,t){return this.setSync(e,t)}async remove(e){return this.removeSync(e)}async commit(){return this.commitSync()}async abort(){return this.abortSync()}},_6=class extends h6{getSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.getSync`)}setSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.setSync`)}removeSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.removeSync`)}commitSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.commitSync`)}abortSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.abortSync`)}},v6=class extends g6{constructor(){super(...arguments),this.originalData=new Map,this.modifiedKeys=new Set}getSync(e){let t=this.store.get(e);return this.stashOldValue(e,t),t}setSync(e,t){return this.markModified(e),this.store.set(e,t)}removeSync(e){this.markModified(e),this.store.delete(e)}commitSync(){this.done=!0}abortSync(){if(this.done){for(let e of this.modifiedKeys){let t=this.originalData.get(e);t?this.store.set(e,t):this.store.delete(e)}this.done=!0}}stashOldValue(e,t){this.originalData.has(e)||this.originalData.set(e,t)}markModified(e){this.modifiedKeys.add(e),this.originalData.has(e)||this.originalData.set(e,this.store.get(e))}},y6=class extends Map{constructor(e=`tmp`){super(),this.name=e}async sync(){}clearSync(){this.clear()}transaction(){return new v6(this)}};const b6={name:`InMemory`,isAvailable(){return!0},options:{name:{type:`string`,required:!1,description:`The name of the store`}},create({name:e}){let t=new m6(new y6(e));return t.checkRootSync(),t}},x6=new Map;var S6=100;function C6(e){let t=S6++;return x6.set(t,e),t}function w6(e){if(!x6.has(e))throw new $(Q.EBADF);return x6.get(e)}const T6=new Map;E6(`/`,b6.create({name:`root`}));function E6(e,t){if(e[0]!==`/`&&(e=`/`+e),e=S4(e),T6.has(e))throw new $(Q.EINVAL,`Mount point `+e+` is already in use.`);T6.set(e,t)}function D6(e){if(e[0]!==`/`&&(e=`/${e}`),e=S4(e),!T6.has(e))throw new $(Q.EINVAL,`Mount point `+e+` is already unmounted.`);T6.delete(e)}function O6(e){e=I4(e);let t=[...T6].sort((e,t)=>e[0].length>t[0].length?-1:1);for(let[n,r]of t)if(n.length<=e.length&&e.startsWith(n))return e=e.slice(n.length>1?n.length:0),e===``&&(e=`/`),{fs:r,path:e,mountPoint:n};throw new $(Q.EIO,`ZenFS not initialized with a file system`)}function k6(e,t){for(let[n,r]of Object.entries(t))e=e?.replaceAll(n,r);return e}function A6(e,t){return typeof e.stack==`string`&&(e.stack=k6(e.stack,t)),e.message=k6(e.message,t),e}function j6(e){`/`in e&&D6(`/`);for(let[t,n]of Object.entries(e))E6(t,n)}function M6(e,t){let n=e.metadata(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(n.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||H3),files:(t?BigInt:Number)(n.totalNodes||H3),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}var N6=class extends f3.default{off(e,t,n,r){return super.off(e,t,n,r)}removeListener(e,t,n,r){return super.removeListener(e,t,n,r)}constructor(e){super(),this.path=e}setMaxListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.setMaxListeners`)}getMaxListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.getMaxListeners`)}prependListener(){throw $.With(`ENOSYS`,this.path,`Watcher.prependListener`)}prependOnceListener(){throw $.With(`ENOSYS`,this.path,`Watcher.prependOnceListener`)}rawListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.rawListeners`)}ref(){return this}unref(){return this}},P6=class extends N6{constructor(e,t){super(e),this.options=t,L6(e.toString(),this)}close(){super.emit(`close`),R6(this.path.toString(),this)}[Symbol.dispose](){this.close()}},F6=class extends N6{constructor(e,t){super(e),this.options=t,this.start()}onInterval(){try{let e=W6(this.path);X3(this.previous,e)||(this.emit(`change`,e,this.previous),this.previous=e)}catch(e){this.emit(`error`,e)}}start(){let e=this.options.interval||5e3;try{this.previous=W6(this.path)}catch(e){this.emit(`error`,e);return}this.intervalId=setInterval(this.onInterval.bind(this),e),!this.options.persistent&&typeof this.intervalId==`object`&&this.intervalId.unref()}stop(){this.intervalId&&=(clearInterval(this.intervalId),void 0),this.removeAllListeners()}},I6=new Map;function L6(e,t){let n=I4(e);I6.has(n)||I6.set(n,new Set),I6.get(n).add(t)}function R6(e,t){let n=I4(e);I6.has(n)&&(I6.get(n).delete(t),I6.get(n).size===0&&I6.delete(n))}function z6(e,t){let n=I4(t);if(I6.has(n))for(let r of I6.get(n))r.emit(`change`,e,E4(t));let r=T4(n);for(;r!==n&&r!==`/`;){if(I6.has(r))for(let n of I6.get(r))n.emit(`change`,e,E4(t));n=r,r=T4(r)}}var B6=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},V6=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r});function H6(e,t){e=I4(e),t=I4(t);let n=O6(e),r=O6(t);if(!W6(T4(e)).hasAccess(2))throw $.With(`EACCES`,e,`rename`);try{if(n===r){n.fs.renameSync(n.path,r.path),z6(`rename`,e.toString());return}$6(t,Q6(e)),q6(e),z6(`rename`,e.toString())}catch(i){throw A6(i,{[n.path]:e,[r.path]:t})}}function U6(e){e=I4(e);try{let{fs:t,path:n}=O6(C8(e));return t.existsSync(n)}catch(e){if(e.errno==Q.ENOENT)return!1;throw e}}function W6(e,t){e=I4(e);let{fs:n,path:r}=O6(U6(e)?C8(e):e);try{let i=n.statSync(r);if(!i.hasAccess(4))throw $.With(`EACCES`,e,`stat`);return t?.bigint?new Y3(i):i}catch(t){throw A6(t,{[r]:e})}}function G6(e,t){e=I4(e);let{fs:n,path:r}=O6(e);try{let e=n.statSync(r);return t?.bigint?new Y3(e):e}catch(t){throw A6(t,{[r]:e})}}function K6(e,t=0){let n={stack:[],error:void 0,hasError:!1};try{let r=B6(n,J6(e,`r+`),!1);if(t||=0,t<0)throw new $(Q.EINVAL);r.truncateSync(t)}catch(e){n.error=e,n.hasError=!0}finally{V6(n)}}function q6(e){e=I4(e);let{fs:t,path:n}=O6(e);try{if(!t.statSync(n).hasAccess(2))throw $.With(`EACCES`,n,`unlink`);t.unlinkSync(n),z6(`rename`,e.toString())}catch(t){throw A6(t,{[n]:e})}}function J6(e,t,n,r=!0){e=I4(e);let i=P4(n,420),a=e6(t);e=r&&U6(e)?C8(e):e;let{fs:o,path:s}=O6(e);if(!o.existsSync(s)){if(!i6(a)&&!o6(a)||a==`r+`)throw $.With(`ENOENT`,e,`_open`);let t=o.statSync(T4(s));if(!t.hasAccess(2))throw $.With(`EACCES`,T4(e),`_open`);if(!t.isDirectory())throw $.With(`ENOTDIR`,T4(e),`_open`);return o.createFileSync(s,a,i)}let c=o.statSync(s);if(!c.hasAccess(i)||!c.hasAccess(n6(a)))throw $.With(`EACCES`,e,`_open`);if(s6(a))throw $.With(`EEXIST`,e,`_open`);let l=o.openFileSync(s,a);return a6(a)&&(l.truncateSync(0),l.syncSync()),l}function Y6(e,t,n=0){return C6(J6(e,t,n,!0))}function X6(e,t,n){return C6(J6(e,t,n,!1))}function Z6(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=B6(r,J6(e,t,420,n),!1),a=i.statSync(),o=new Uint8Array(a.size);return i.readSync(o,0,a.size,0),o}catch(e){r.error=e,r.hasError=!0}finally{V6(r)}}function Q6(e,t={}){let n=L4(t,null,`r`,420);if(!r6(e6(n.flag)))throw new $(Q.EINVAL,`Flag passed to readFile must allow for reading.`);let r=G4.Buffer.from(Z6(typeof e==`number`?w6(e).path:e.toString(),n.flag,!0));return n.encoding?r.toString(n.encoding):r}function $6(e,t,n={}){let r={stack:[],error:void 0,hasError:!1};try{let i=L4(n,`utf8`,`w+`,420),a=e6(i.flag);if(!i6(a))throw new $(Q.EINVAL,`Flag passed to writeFile must allow for writing.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let o=typeof t==`string`?G4.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new $(Q.EINVAL,`Data not specified`);B6(r,J6(typeof e==`number`?w6(e).path:e.toString(),a,i.mode,!0),!1).writeSync(o,0,o.byteLength,0),z6(`change`,e.toString())}catch(e){r.error=e,r.hasError=!0}finally{V6(r)}}function e8(e,t,n={}){let r={stack:[],error:void 0,hasError:!1};try{let i=L4(n,`utf8`,`a`,420),a=e6(i.flag);if(!o6(a))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let o=typeof t==`string`?G4.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);B6(r,J6(typeof e==`number`?w6(e).path:e.toString(),a,i.mode,!0),!1).writeSync(o,0,o.byteLength)}catch(e){r.error=e,r.hasError=!0}finally{V6(r)}}function t8(e,t){let n=w6(e).statSync();return t?.bigint?new Y3(n):n}function n8(e){w6(e).closeSync(),x6.delete(e)}function r8(e,t=0){if(t||=0,t<0)throw new $(Q.EINVAL);w6(e).truncateSync(t)}function i8(e){w6(e).syncSync()}function a8(e){w6(e).datasyncSync()}function o8(e,t,n,r,i){let a,o,s,c;if(typeof t==`string`){c=typeof n==`number`?n:null;let e=typeof r==`string`?r:`utf8`;o=0,a=G4.Buffer.from(t,e),s=a.byteLength}else a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,c=typeof i==`number`?i:null;let l=w6(e);c??=l.position;let u=l.writeSync(a,o,s,c);return z6(`change`,l.path),u}function s8(e,t,n,r,i){let a=w6(e),o=typeof n==`object`?n.offset:n;return typeof n==`object`&&(r=n.length,i=n.position),i=Number(i),isNaN(i)&&(i=a.position),a.readSync(t,o,r,i)}function c8(e,t,n){w6(e).chownSync(t,n)}function l8(e,t){let n=P4(t,-1);if(n<0)throw new $(Q.EINVAL,`Invalid mode.`);w6(e).chmodSync(n)}function u8(e,t,n){w6(e).utimesSync(F4(t),F4(n))}function d8(e){e=I4(e);let{fs:t,path:n}=O6(U6(e)?C8(e):e);try{if(!t.statSync(n).hasAccess(2))throw $.With(`EACCES`,n,`rmdir`);t.rmdirSync(n),z6(`rename`,e.toString())}catch(t){throw A6(t,{[n]:e})}}function f8(e,t){t=typeof t==`object`?t:{mode:t};let n=P4(t?.mode,511);e=I4(e),e=U6(e)?C8(e):e;let{fs:r,path:i}=O6(e),a={[i]:e};try{if(!t?.recursive){if(!r.statSync(T4(i)).hasAccess(2))throw $.With(`EACCES`,T4(i),`mkdir`);return r.mkdirSync(i,n)}let o=[];for(let t=i,n=e;!r.existsSync(t);t=T4(t),n=T4(n))o.unshift(t),a[t]=n;for(let e of o){if(!r.statSync(T4(e)).hasAccess(2))throw $.With(`EACCES`,T4(e),`mkdir`);r.mkdirSync(e,n),z6(`rename`,e)}return o[0]}catch(e){throw A6(e,a)}}function p8(e,t){e=I4(e);let{fs:n,path:r}=O6(U6(e)?C8(e):e),i;if(!W6(e).hasAccess(4))throw $.With(`EACCES`,e,`readdir`);try{i=n.readdirSync(r)}catch(t){throw A6(t,{[r]:e})}for(let t of T6.keys()){if(!t.startsWith(e))continue;let n=t.slice(e.length);n.includes(`/`)||n.length==0||i.push(n)}return i.map(n=>typeof t==`object`&&t?.withFileTypes?new N8(n,W6(w4(e.toString(),n))):t==`buffer`||typeof t==`object`&&t?.encoding==`buffer`?G4.Buffer.from(n):n)}function m8(e,t){if(e=I4(e),!W6(T4(e)).hasAccess(4))throw $.With(`EACCES`,T4(e),`link`);if(t=I4(t),!W6(T4(t)).hasAccess(2))throw $.With(`EACCES`,T4(t),`link`);let{fs:n,path:r}=O6(e),i=O6(t);if(n!=i.fs)throw $.With(`EXDEV`,t,`link`);try{if(!n.statSync(r).hasAccess(2))throw $.With(`EACCES`,r,`link`);return n.linkSync(r,t)}catch(n){throw A6(n,{[r]:e,[i.path]:t})}}function h8(e,t,n=`file`){if(![`file`,`dir`,`junction`].includes(n))throw new $(Q.EINVAL,`Invalid type: `+n);if(U6(t))throw $.With(`EEXIST`,t.toString(),`symlink`);$6(t,e.toString()),J6(t,`r+`,420,!1)._setTypeSync(i3)}function g8(e,t){let n=G4.Buffer.from(Z6(e.toString(),`r`,!1)),r=typeof t==`object`?t?.encoding:t;return r==`buffer`?n:n.toString(r)}function _8(e,t,n){let r=Y6(e,`r+`);c8(r,t,n),n8(r)}function v8(e,t,n){let r=X6(e,`r+`);c8(r,t,n),n8(r)}function y8(e,t){let n=Y6(e,`r+`);l8(n,t),n8(n)}function b8(e,t){let n=X6(e,`r+`);l8(n,t),n8(n)}function x8(e,t,n){let r=Y6(e,`r+`);u8(r,t,n),n8(r)}function S8(e,t,n){let r=X6(e,`r+`);u8(r,t,n),n8(r)}function C8(e,t){e=I4(e);let{base:n,dir:r}=D4(e),i=w4(r==`/`?`/`:C8(r),n),{fs:a,path:o,mountPoint:s}=O6(i);try{return a.statSync(o).isSymbolicLink()?C8(s+g8(i,t).toString()):i}catch(e){throw A6(e,{[o]:i})}}function w8(e,t=384){if(!W6(e).hasAccess(t))throw new $(Q.EACCES)}function T8(e,t){switch(e=I4(e),W6(e).mode&n3){case s3:if(t?.recursive)for(let n of p8(e))T8(w4(e,n),t);d8(e);return;case a3:case i3:q6(e);return;case o3:case c3:case l3:case r3:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}}function E8(e,t){let n=typeof t==`object`?t?.encoding:t||`utf8`,r=`/tmp/${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return f8(r),n==`buffer`?G4.Buffer.from(r):r}function D8(e,t,n){if(e=I4(e),t=I4(t),n&&n&1&&U6(t))throw new $(Q.EEXIST,`Destination file already exists.`,t,`copyFile`);$6(t,Q6(e)),z6(`rename`,t.toString())}function O8(e,t,n){let r=w6(e),i=0;for(let e of t)i+=r.readSync(e,0,e.byteLength,n+i);return i}function k8(e,t,n){let r=w6(e),i=0;for(let e of t)i+=r.writeSync(new Uint8Array(e.buffer),0,e.byteLength,n+i);return i}function A8(e,t){return e=I4(e),new P8(e)}function j8(e,t,n){e=I4(e),t=I4(t);let r=G6(e);if(n?.errorOnExist&&U6(t))throw new $(Q.EEXIST,`Destination file or directory already exists.`,t,`cp`);switch(r.mode&n3){case s3:if(!n?.recursive)throw new $(Q.EISDIR,e+` is a directory (not copied)`,e,`cp`);f8(t,{recursive:!0});for(let r of p8(e,{withFileTypes:!0}))n.filter&&!n.filter(w4(e,r.name),w4(t,r.name))||j8(w4(e,r.name),w4(t,r.name),n);break;case a3:case i3:D8(e,t);break;case o3:case c3:case l3:case r3:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}n?.preserveTimestamps&&x8(t,r.atime,r.mtime)}function M8(e,t){e=I4(e);let{fs:n}=O6(e);return M6(n,t?.bigint)}var N8=class{get name(){return E4(this.path)}constructor(e,t){this.path=e,this.stats=t}get parentPath(){return this.path}isFile(){return this.stats.isFile()}isDirectory(){return this.stats.isDirectory()}isBlockDevice(){return this.stats.isBlockDevice()}isCharacterDevice(){return this.stats.isCharacterDevice()}isSymbolicLink(){return this.stats.isSymbolicLink()}isFIFO(){return this.stats.isFIFO()}isSocket(){return this.stats.isSocket()}},P8=class{checkClosed(){if(this.closed)throw new $(Q.EBADF,`Can not use closed Dir`)}constructor(e){this.path=e,this.closed=!1}close(e){if(this.closed=!0,!e)return Promise.resolve();e()}closeSync(){this.closed=!0}async _read(){return this.checkClosed(),this._entries??=await j5(this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}read(e){if(!e)return this._read();this._read().then(t=>e(void 0,t))}readSync(){return this.checkClosed(),this._entries??=p8(this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}async next(){let e=await this._read();return e?{done:!1,value:e}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}},F8=n(((e,t)=>{t.exports={AggregateError:class extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t=``;for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name=`AggregateError`,this.errors=e}},ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:2**53-1,NumberMIN_SAFE_INTEGER:-(2**53-1),NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol(`Symbol.dispose`),SymbolAsyncDispose:Symbol.asyncDispose||Symbol(`Symbol.asyncDispose`),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array}})),I8=n(((e,t)=>{t.exports={format(e,...t){return e.replace(/%([sdifj])/g,function(...[e,n]){let r=t.shift();return n===`f`?r.toFixed(6):n===`j`?JSON.stringify(r):n===`s`&&typeof r==`object`?`${r.constructor===Object?``:r.constructor.name} {}`.trim():r.toString()})},inspect(e){switch(typeof e){case`string`:if(e.includes(`'`))if(e.includes(`"`)){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case`number`:return isNaN(e)?`NaN`:Object.is(e,-0)?String(e):e;case`bigint`:return`${String(e)}n`;case`boolean`:case`undefined`:return String(e);case`object`:return`{}`}}}})),L8=n(((e,t)=>{var{format:n,inspect:r}=I8(),{AggregateError:i}=F8(),a=globalThis.AggregateError||i,o=Symbol(`kIsNodeError`),s=[`string`,`function`,`number`,`object`,`Function`,`Object`,`boolean`,`bigint`,`symbol`],c=/^([A-Z][a-z0-9]*)+$/,l=`__node_internal_`,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function f(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function p(e,t,r){if(typeof t==`function`)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),r.length===0?t:n(t,...r)}function m(e,t,n){n||=Error;class r extends n{constructor(...n){super(p(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[o]=!0,u[e]=r}function h(e){let t=l+e.name;return Object.defineProperty(e,`name`,{value:t}),e}function g(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let n=new a([t,e],t.message);return n.code=t.code,n}return e||t}var _=class extends Error{constructor(e=`The operation was aborted`,t=void 0){if(t!==void 0&&typeof t!=`object`)throw new u.ERR_INVALID_ARG_TYPE(`options`,`Object`,t);super(e,t),this.code=`ABORT_ERR`,this.name=`AbortError`}};m(`ERR_ASSERTION`,`%s`,Error),m(`ERR_INVALID_ARG_TYPE`,(e,t,n)=>{d(typeof e==`string`,`'name' must be a string`),Array.isArray(t)||(t=[t]);let i=`The `;e.endsWith(` argument`)?i+=`${e} `:i+=`"${e}" ${e.includes(`.`)?`property`:`argument`} `,i+=`must be `;let a=[],o=[],l=[];for(let e of t)d(typeof e==`string`,`All expected entries have to be of type string`),s.includes(e)?a.push(e.toLowerCase()):c.test(e)?o.push(e):(d(e!==`object`,`The value "object" should be written as "Object"`),l.push(e));if(o.length>0){let e=a.indexOf(`object`);e!==-1&&(a.splice(a,e,1),o.push(`Object`))}if(a.length>0){switch(a.length){case 1:i+=`of type ${a[0]}`;break;case 2:i+=`one of type ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();i+=`one of type ${a.join(`, `)}, or ${e}`}}(o.length>0||l.length>0)&&(i+=` or `)}if(o.length>0){switch(o.length){case 1:i+=`an instance of ${o[0]}`;break;case 2:i+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();i+=`an instance of ${o.join(`, `)}, or ${e}`}}l.length>0&&(i+=` or `)}switch(l.length){case 0:break;case 1:l[0].toLowerCase()!==l[0]&&(i+=`an `),i+=`${l[0]}`;break;case 2:i+=`one of ${l[0]} or ${l[1]}`;break;default:{let e=l.pop();i+=`one of ${l.join(`, `)}, or ${e}`}}if(n==null)i+=`. Received ${n}`;else if(typeof n==`function`&&n.name)i+=`. Received function ${n.name}`;else if(typeof n==`object`){var u;if((u=n.constructor)!=null&&u.name)i+=`. Received an instance of ${n.constructor.name}`;else{let e=r(n,{depth:-1});i+=`. Received ${e}`}}else{let e=r(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),i+=`. Received type ${typeof n} (${e})`}return i},TypeError),m(`ERR_INVALID_ARG_VALUE`,(e,t,n=`is invalid`)=>{let i=r(t);return i.length>128&&(i=i.slice(0,128)+`...`),`The ${e.includes(`.`)?`property`:`argument`} '${e}' ${n}. Received ${i}`},TypeError),m(`ERR_INVALID_RETURN_VALUE`,(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${n!=null&&(r=n.constructor)!=null&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`}.`},TypeError),m(`ERR_MISSING_ARGS`,(...e)=>{d(e.length>0,`At least one arg needs to be specified`);let t,n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(` or `),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let n=e.pop();t+=`The ${e.join(`, `)}, and ${n} arguments`}break}return`${t} must be specified`},TypeError),m(`ERR_OUT_OF_RANGE`,(e,t,n)=>{d(t,`Missing "range" argument`);let i;if(Number.isInteger(n)&&Math.abs(n)>2**32)i=f(String(n));else if(typeof n==`bigint`){i=String(n);let e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(i=f(i)),i+=`n`}else i=r(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${i}`},RangeError),m(`ERR_MULTIPLE_CALLBACK`,`Callback called multiple times`,Error),m(`ERR_METHOD_NOT_IMPLEMENTED`,`The %s method is not implemented`,Error),m(`ERR_STREAM_ALREADY_FINISHED`,`Cannot call %s after a stream was finished`,Error),m(`ERR_STREAM_CANNOT_PIPE`,`Cannot pipe, not readable`,Error),m(`ERR_STREAM_DESTROYED`,`Cannot call %s after a stream was destroyed`,Error),m(`ERR_STREAM_NULL_VALUES`,`May not write null values to stream`,TypeError),m(`ERR_STREAM_PREMATURE_CLOSE`,`Premature close`,Error),m(`ERR_STREAM_PUSH_AFTER_EOF`,`stream.push() after EOF`,Error),m(`ERR_STREAM_UNSHIFT_AFTER_END_EVENT`,`stream.unshift() after end event`,Error),m(`ERR_STREAM_WRITE_AFTER_END`,`write after end`,Error),m(`ERR_UNKNOWN_ENCODING`,`Unknown encoding: %s`,TypeError),t.exports={AbortError:_,aggregateTwoErrors:h(g),hideStackFrames:h,codes:u}})),R8=n(((e,t)=>{var{AbortController:n,AbortSignal:r}=typeof self<`u`?self:typeof window<`u`?window:void 0;t.exports=n,t.exports.AbortSignal=r,t.exports.default=n})),z8=n(((e,t)=>{var n=typeof Reflect==`object`?Reflect:null,r=n&&typeof n.apply==`function`?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=n&&typeof n.ownKeys==`function`?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};function a(e){console&&console.warn&&console.warn(e)}var o=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}t.exports=s,t.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(e){if(typeof e!=`function`)throw TypeError(`The "listener" argument must be of type Function. Received type `+typeof e)}Object.defineProperty(s,`defaultMaxListeners`,{enumerable:!0,get:function(){return c},set:function(e){if(typeof e!=`number`||e<0||o(e))throw RangeError(`The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received `+e+`.`);c=e}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if(typeof e!=`number`||e<0||o(e))throw RangeError(`The value of "n" is out of range. It must be a non-negative number. Received `+e+`.`);return this._maxListeners=e,this};function u(e){return e._maxListeners===void 0?s.defaultMaxListeners:e._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e===`error`,a=this._events;if(a!==void 0)i&&=a.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=Error(`Unhandled error.`+(o?` (`+o.message+`)`:``));throw s.context=o,s}var c=a[e];if(c===void 0)return!1;if(typeof c==`function`)r(c,this,t);else for(var l=c.length,u=g(c,l),n=0;n<l;++n)r(u[n],this,t);return!0};function d(e,t,n,r){var i,o,s;if(l(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit(`newListener`,t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s==`function`?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=u(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=Error(`Possible EventEmitter memory leak detected. `+s.length+` `+String(t)+` listeners added. Use emitter.setMaxListeners() to increase limit`);c.name=`MaxListenersExceededWarning`,c.emitter=e,c.type=t,c.count=s.length,a(c)}return e}s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}s.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(l(t),r=this._events,r===void 0||(n=r[e],n===void 0))return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(`removeListener`,e,n.listener||t));else if(typeof n!=`function`){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():_(n,i),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit(`removeListener`,e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n=this._events,r;if(n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),a;for(r=0;r<i.length;++r)a=i[r],a!==`removeListener`&&this.removeAllListeners(a);return this.removeAllListeners(`removeListener`),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t==`function`)this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function m(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i==`function`?n?[i.listener||i]:[i]:n?v(i):g(i,i.length)}s.prototype.listeners=function(e){return m(this,e,!0)},s.prototype.rawListeners=function(e){return m(this,e,!1)},s.listenerCount=function(e,t){return typeof e.listenerCount==`function`?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h;function h(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n==`function`)return 1;if(n!==void 0)return n.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function g(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function _(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function y(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){typeof e.removeListener==`function`&&e.removeListener(`error`,i),n([].slice.call(arguments))}x(e,t,a,{once:!0}),t!==`error`&&b(e,i,{once:!0})})}function b(e,t,n){typeof e.on==`function`&&x(e,`error`,t,n)}function x(e,t,n,r){if(typeof e.on==`function`)r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener==`function`)e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw TypeError(`The "emitter" argument must be of type EventEmitter. Received type `+typeof e)}})),B8=n(((e,t)=>{var n=W4(),{format:r,inspect:i}=I8(),{codes:{ERR_INVALID_ARG_TYPE:a}}=L8(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:c}=F8(),l=globalThis.AbortSignal||R8().AbortSignal,u=globalThis.AbortController||R8().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||n.Blob,p=f===void 0?function(e){return!1}:function(e){return e instanceof f},m=(e,t)=>{if(e!==void 0&&(typeof e!=`object`||!e||!(`aborted`in e)))throw new a(t,`AbortSignal`,e)},h=(e,t)=>{if(typeof e!=`function`)throw new a(t,`Function`,e)};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify(e){return new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))})},debuglog(){return function(){}},format:r,inspect:i,types:{isAsyncFunction(e){return e instanceof d},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:p,deprecate(e,t){return e},addAbortListener:z8().addAbortListener||function(e,t){if(e===void 0)throw new a(`signal`,`AbortSignal`,e);m(e,`signal`),h(t,`listener`);let n;return e.aborted?queueMicrotask(()=>t()):(e.addEventListener(`abort`,t,{__proto__:null,once:!0,[o]:!0}),n=()=>{e.removeEventListener(`abort`,t)}),{__proto__:null,[c](){var e;(e=n)==null||e()}}},AbortSignalAny:l.any||function(e){if(e.length===1)return e[0];let t=new u,n=()=>t.abort();return e.forEach(e=>{m(e,`signals`),e.addEventListener(`abort`,n,{once:!0})}),t.signal.addEventListener(`abort`,()=>{e.forEach(e=>e.removeEventListener(`abort`,n))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for(`nodejs.util.promisify.custom`)})),V8=n(((e,t)=>{var{ArrayIsArray:n,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:o,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:l,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:h}=F8(),{hideStackFrames:g,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:x}}=L8(),{normalizeEncoding:S}=B8(),{isAsyncFunction:C,isArrayBufferView:w}=B8().types,T={};function E(e){return e===(e|0)}function D(e){return e===e>>>0}var O=/^[0-7]+$/,k=`must be a 32-bit unsigned integer or an octal string`;function A(e,t,n){if(e===void 0&&(e=n),typeof e==`string`){if(f(O,e)===null)throw new y(t,e,k);e=u(e,8)}return N(e,t),e}var j=g((e,t,n=l,r=c)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);if(e<n||e>r)throw new b(t,`>= ${n} && <= ${r}`,e)}),M=g((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);if(e<n||e>r)throw new b(t,`>= ${n} && <= ${r}`,e)}),N=g((e,t,n=!1)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);let r=n?1:0,i=4294967295;if(e<r||e>i)throw new b(t,`>= ${r} && <= ${i}`,e)});function P(e,t){if(typeof e!=`string`)throw new v(t,`string`,e)}function F(e,t,n=void 0,r){if(typeof e!=`number`)throw new v(t,`number`,e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&s(e))throw new b(t,`${n==null?``:`>= ${n}`}${n!=null&&r!=null?` && `:``}${r==null?``:`<= ${r}`}`,e)}var ee=g((e,t,n)=>{if(!r(n,e))throw new y(t,e,`must be one of: `+i(a(n,e=>typeof e==`string`?`'${e}'`:p(e)),`, `))});function I(e,t){if(typeof e!=`boolean`)throw new v(t,`boolean`,e)}function L(e,t,n){return e==null||!d(e,t)?n:e[t]}var te=g((e,t,r=null)=>{let i=L(r,`allowArray`,!1),a=L(r,`allowFunction`,!1);if(!L(r,`nullable`,!1)&&e===null||!i&&n(e)||typeof e!=`object`&&(!a||typeof e!=`function`))throw new v(t,`Object`,e)}),ne=g((e,t)=>{if(e!=null&&typeof e!=`object`&&typeof e!=`function`)throw new v(t,`a dictionary`,e)}),re=g((e,t,r=0)=>{if(!n(e))throw new v(t,`Array`,e);if(e.length<r)throw new y(t,e,`must be longer than ${r}`)});function ie(e,t){re(e,t);for(let n=0;n<e.length;n++)P(e[n],`${t}[${n}]`)}function ae(e,t){re(e,t);for(let n=0;n<e.length;n++)I(e[n],`${t}[${n}]`)}function oe(e,t){re(e,t);for(let n=0;n<e.length;n++){let r=e[n],i=`${t}[${n}]`;if(r==null)throw new v(i,`AbortSignal`,r);de(r,i)}}function se(e,t=`signal`){if(P(e,t),T[e]===void 0)throw T[m(e)]===void 0?new x(e):new x(e+` (signals must use all capital letters)`)}var ce=g((e,t=`buffer`)=>{if(!w(e))throw new v(t,[`Buffer`,`TypedArray`,`DataView`],e)});function le(e,t){let n=S(t),r=e.length;if(n===`hex`&&r%2!=0)throw new y(`encoding`,t,`is invalid for data of length ${r}`)}function ue(e,t=`Port`,n=!0){if(typeof e!=`number`&&typeof e!=`string`||typeof e==`string`&&h(e).length===0||+e!=e>>>0||e>65535||e===0&&!n)throw new _(t,e,n);return e|0}var de=g((e,t)=>{if(e!==void 0&&(typeof e!=`object`||!e||!(`aborted`in e)))throw new v(t,`AbortSignal`,e)}),fe=g((e,t)=>{if(typeof e!=`function`)throw new v(t,`Function`,e)}),pe=g((e,t)=>{if(typeof e!=`function`||C(e))throw new v(t,`Function`,e)}),me=g((e,t)=>{if(e!==void 0)throw new v(t,`undefined`,e)});function he(e,t,n){if(!r(n,e))throw new v(t,`('${i(n,`|`)}')`,e)}var R=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ge(e,t){if(e===void 0||!f(R,e))throw new y(t,e,`must be an array or string of format "</styles.css>; rel=preload; as=style"`)}function _e(e){if(typeof e==`string`)return ge(e,`hints`),e;if(n(e)){let t=e.length,n=``;if(t===0)return n;for(let r=0;r<t;r++){let i=e[r];ge(i,`hints`),n+=i,r!==t-1&&(n+=`, `)}return n}throw new y(`hints`,e,`must be an array or string of format "</styles.css>; rel=preload; as=style"`)}t.exports={isInt32:E,isUint32:D,parseFileMode:A,validateArray:re,validateStringArray:ie,validateBooleanArray:ae,validateAbortSignalArray:oe,validateBoolean:I,validateBuffer:ce,validateDictionary:ne,validateEncoding:le,validateFunction:fe,validateInt32:M,validateInteger:j,validateNumber:F,validateObject:te,validateOneOf:ee,validatePlainFunction:pe,validatePort:ue,validateSignalName:se,validateString:P,validateUint32:N,validateUndefined:me,validateUnion:he,validateAbortSignal:de,validateLinkHeaderValue:_e}})),H8=n(((e,t)=>{var n=t.exports={},r,i;function a(){throw Error(`setTimeout has not been defined`)}function o(){throw Error(`clearTimeout has not been defined`)}(function(){try{r=typeof setTimeout==`function`?setTimeout:a}catch{r=a}try{i=typeof clearTimeout==`function`?clearTimeout:o}catch{i=o}})();function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch{try{return r.call(null,e,0)}catch{return r.call(this,e,0)}}}function c(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch{try{return i.call(null,e)}catch{return i.call(this,e)}}}var l=[],u=!1,d,f=-1;function p(){!u||!d||(u=!1,d.length?l=d.concat(l):f=-1,l.length&&m())}function m(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(d=l,l=[];++f<t;)d&&d[f].run();f=-1,t=l.length}d=null,u=!1,c(e)}}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),l.length===1&&!u&&s(m)};function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)},n.title=`browser`,n.browser=!0,n.env={},n.argv=[],n.version=``,n.versions={};function g(){}n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw Error(`process.binding is not supported`)},n.cwd=function(){return`/`},n.chdir=function(e){throw Error(`process.chdir is not supported`)},n.umask=function(){return 0}})),U8=n(((e,t)=>{var{SymbolAsyncIterator:n,SymbolIterator:r,SymbolFor:i}=F8(),a=i(`nodejs.stream.destroyed`),o=i(`nodejs.stream.errored`),s=i(`nodejs.stream.readable`),c=i(`nodejs.stream.writable`),l=i(`nodejs.stream.disturbed`),u=i(`nodejs.webstream.isClosedPromise`),d=i(`nodejs.webstream.controllerErrorFunction`);function f(e,t=!1){return!!(e&&typeof e.pipe==`function`&&typeof e.on==`function`&&(!t||typeof e.pause==`function`&&typeof e.resume==`function`)&&(!e._writableState||e._readableState?.readable!==!1)&&(!e._writableState||e._readableState))}function p(e){return!!(e&&typeof e.write==`function`&&typeof e.on==`function`&&(!e._readableState||e._writableState?.writable!==!1))}function m(e){return!!(e&&typeof e.pipe==`function`&&e._readableState&&typeof e.on==`function`&&typeof e.write==`function`)}function h(e){return e&&(e._readableState||e._writableState||typeof e.write==`function`&&typeof e.on==`function`||typeof e.pipe==`function`&&typeof e.on==`function`)}function g(e){return!!(e&&!h(e)&&typeof e.pipeThrough==`function`&&typeof e.getReader==`function`&&typeof e.cancel==`function`)}function _(e){return!!(e&&!h(e)&&typeof e.getWriter==`function`&&typeof e.abort==`function`)}function v(e){return!!(e&&!h(e)&&typeof e.readable==`object`&&typeof e.writable==`object`)}function y(e){return g(e)||_(e)||v(e)}function b(e,t){return e==null?!1:t===!0?typeof e[n]==`function`:t===!1?typeof e[r]==`function`:typeof e[n]==`function`||typeof e[r]==`function`}function x(e){if(!h(e))return null;let t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[a]||r!=null&&r.destroyed)}function S(e){if(!p(e))return null;if(e.writableEnded===!0)return!0;let t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended==`boolean`?t.ended:null}function C(e,t){if(!p(e))return null;if(e.writableFinished===!0)return!0;let n=e._writableState;return n!=null&&n.errored?!1:typeof n?.finished==`boolean`?!!(n.finished||t===!1&&n.ended===!0&&n.length===0):null}function w(e){if(!f(e))return null;if(e.readableEnded===!0)return!0;let t=e._readableState;return!t||t.errored?!1:typeof t?.ended==`boolean`?t.ended:null}function T(e,t){if(!f(e))return null;let n=e._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted==`boolean`?!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0):null}function E(e){return e&&e[s]!=null?e[s]:typeof e?.readable==`boolean`?x(e)?!1:f(e)&&e.readable&&!T(e):null}function D(e){return e&&e[c]!=null?e[c]:typeof e?.writable==`boolean`?x(e)?!1:p(e)&&e.writable&&!S(e):null}function O(e,t){return h(e)?x(e)?!0:!(t?.readable!==!1&&E(e)||t?.writable!==!1&&D(e)):null}function k(e){return h(e)?e.writableErrored?e.writableErrored:e._writableState?.errored??null:null}function A(e){return h(e)?e.readableErrored?e.readableErrored:e._readableState?.errored??null:null}function j(e){if(!h(e))return null;if(typeof e.closed==`boolean`)return e.closed;let t=e._writableState,n=e._readableState;return typeof t?.closed==`boolean`||typeof n?.closed==`boolean`?t?.closed||n?.closed:typeof e._closed==`boolean`&&M(e)?e._closed:null}function M(e){return typeof e._closed==`boolean`&&typeof e._defaultKeepAlive==`boolean`&&typeof e._removedConnection==`boolean`&&typeof e._removedContLen==`boolean`}function N(e){return typeof e._sent100==`boolean`&&M(e)}function P(e){return typeof e._consuming==`boolean`&&typeof e._dumped==`boolean`&&e.req?.upgradeOrConnect===void 0}function F(e){if(!h(e))return null;let t=e._writableState,n=e._readableState,r=t||n;return!r&&N(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function ee(e){return!!(e&&(e[l]??(e.readableDidRead||e.readableAborted)))}function I(e){return!!(e&&(e[o]??e.readableErrored??e.writableErrored??e._readableState?.errorEmitted??e._writableState?.errorEmitted??e._readableState?.errored??e._writableState?.errored))}t.exports={isDestroyed:x,kIsDestroyed:a,isDisturbed:ee,kIsDisturbed:l,isErrored:I,kIsErrored:o,isReadable:E,kIsReadable:s,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:c,isClosed:j,isDuplexNodeStream:m,isFinished:O,isIterable:b,isReadableNodeStream:f,isReadableStream:g,isReadableEnded:w,isReadableFinished:T,isReadableErrored:A,isNodeStream:h,isWebStream:y,isWritable:D,isWritableNodeStream:p,isWritableStream:_,isWritableEnded:S,isWritableFinished:C,isWritableErrored:k,isServerRequest:P,isServerResponse:N,willEmitClose:F,isTransformStream:v}})),W8=n(((e,t)=>{var n=H8(),{AbortError:r,codes:i}=L8(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:o}=i,{kEmptyObject:s,once:c}=B8(),{validateAbortSignal:l,validateFunction:u,validateObject:d,validateBoolean:f}=V8(),{Promise:p,PromisePrototypeThen:m,SymbolDispose:h}=F8(),{isClosed:g,isReadable:_,isReadableNodeStream:v,isReadableStream:y,isReadableFinished:b,isReadableErrored:x,isWritable:S,isWritableNodeStream:C,isWritableStream:w,isWritableFinished:T,isWritableErrored:E,isNodeStream:D,willEmitClose:O,kIsClosedPromise:k}=U8(),A;function j(e){return e.setHeader&&typeof e.abort==`function`}var M=()=>{};function N(e,t,i){if(arguments.length===2?(i=t,t=s):t==null?t=s:d(t,`options`),u(i,`callback`),l(t.signal,`options.signal`),i=c(i),y(e)||w(e))return P(e,t,i);if(!D(e))throw new a(`stream`,[`ReadableStream`,`WritableStream`,`Stream`],e);let f=t.readable??v(e),p=t.writable??C(e),m=e._writableState,k=e._readableState,N=()=>{e.writable||I()},F=O(e)&&v(e)===f&&C(e)===p,ee=T(e,!1),I=()=>{ee=!0,e.destroyed&&(F=!1),!(F&&(!e.readable||f))&&(!f||L)&&i.call(e)},L=b(e,!1),te=()=>{L=!0,e.destroyed&&(F=!1),!(F&&(!e.writable||p))&&(!p||ee)&&i.call(e)},ne=t=>{i.call(e,t)},re=g(e),ie=()=>{re=!0;let t=E(e)||x(e);if(t&&typeof t!=`boolean`)return i.call(e,t);if(f&&!L&&v(e,!0)&&!b(e,!1)||p&&!ee&&!T(e,!1))return i.call(e,new o);i.call(e)},ae=()=>{re=!0;let t=E(e)||x(e);if(t&&typeof t!=`boolean`)return i.call(e,t);i.call(e)},oe=()=>{e.req.on(`finish`,I)};j(e)?(e.on(`complete`,I),F||e.on(`abort`,ie),e.req?oe():e.on(`request`,oe)):p&&!m&&(e.on(`end`,N),e.on(`close`,N)),!F&&typeof e.aborted==`boolean`&&e.on(`aborted`,ie),e.on(`end`,te),e.on(`finish`,I),t.error!==!1&&e.on(`error`,ne),e.on(`close`,ie),re?n.nextTick(ie):m!=null&&m.errorEmitted||k!=null&&k.errorEmitted?F||n.nextTick(ae):(!f&&(!F||_(e))&&(ee||S(e)===!1)||!p&&(!F||S(e))&&(L||_(e)===!1)||k&&e.req&&e.aborted)&&n.nextTick(ae);let se=()=>{i=M,e.removeListener(`aborted`,ie),e.removeListener(`complete`,I),e.removeListener(`abort`,ie),e.removeListener(`request`,oe),e.req&&e.req.removeListener(`finish`,I),e.removeListener(`end`,N),e.removeListener(`close`,N),e.removeListener(`finish`,I),e.removeListener(`end`,te),e.removeListener(`error`,ne),e.removeListener(`close`,ie)};if(t.signal&&!re){let a=()=>{let n=i;se(),n.call(e,new r(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(a);else{A||=B8().addAbortListener;let n=A(t.signal,a),r=i;i=c((...t)=>{n[h](),r.apply(e,t)})}}return se}function P(e,t,i){let a=!1,o=M;if(t.signal)if(o=()=>{a=!0,i.call(e,new r(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(o);else{A||=B8().addAbortListener;let n=A(t.signal,o),r=i;i=c((...t)=>{n[h](),r.apply(e,t)})}let s=(...t)=>{a||n.nextTick(()=>i.apply(e,t))};return m(e[k].promise,s,s),M}function F(e,t){var n;let r=!1;return t===null&&(t=s),(n=t)!=null&&n.cleanup&&(f(t.cleanup,`cleanup`),r=t.cleanup),new p((n,i)=>{let a=N(e,t,e=>{r&&a(),e?i(e):n()})})}t.exports=N,t.exports.finished=F})),G8=n(((e,t)=>{var n=H8(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=L8(),{Symbol:o}=F8(),{kIsDestroyed:s,isDestroyed:c,isFinished:l,isServerRequest:u}=U8(),d=o(`kDestroy`),f=o(`kConstruct`);function p(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t){let n=this._readableState,i=this._writableState,a=i||n;return i!=null&&i.destroyed||n!=null&&n.destroyed?(typeof t==`function`&&t(),this):(p(e,i,n),i&&(i.destroyed=!0),n&&(n.destroyed=!0),a.constructed?h(this,e,t):this.once(d,function(n){h(this,r(n,e),t)}),this)}function h(e,t,r){let i=!1;function a(t){if(i)return;i=!0;let a=e._readableState,o=e._writableState;p(t,o,a),o&&(o.closed=!0),a&&(a.closed=!0),typeof r==`function`&&r(t),t?n.nextTick(g,e,t):n.nextTick(_,e)}try{e._destroy(t||null,a)}catch(e){a(e)}}function g(e,t){v(e,t),_(e)}function _(e){let t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit(`close`)}function v(e,t){let n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit(`error`,t))}function y(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function b(e,t,r){let i=e._readableState,a=e._writableState;if(a!=null&&a.destroyed||i!=null&&i.destroyed)return this;i!=null&&i.autoDestroy||a!=null&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(v,e,t):v(e,t))}function x(e,t){if(typeof e._construct!=`function`)return;let r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),!(e.listenerCount(f)>1)&&n.nextTick(S,e)}function S(e){let t=!1;function r(r){if(t){b(e,r??new i);return}t=!0;let a=e._readableState,o=e._writableState,s=o||a;a&&(a.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(d,r):r?b(e,r,!0):n.nextTick(C,e)}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function C(e){e.emit(f)}function w(e){return e?.setHeader&&typeof e.abort==`function`}function T(e){e.emit(`close`)}function E(e,t){e.emit(`error`,t),n.nextTick(T,e)}function D(e,t){!e||c(e)||(!t&&!l(e)&&(t=new a),u(e)?(e.socket=null,e.destroy(t)):w(e)?e.abort():w(e.req)?e.req.abort():typeof e.destroy==`function`?e.destroy(t):typeof e.close==`function`?e.close():t?n.nextTick(E,e,t):n.nextTick(T,e),e.destroyed||(e[s]=!0))}t.exports={construct:x,destroyer:D,destroy:m,undestroy:y,errorOrDestroy:b}})),K8=n(((e,t)=>{var{ArrayIsArray:n,ObjectSetPrototypeOf:r}=F8(),{EventEmitter:i}=z8();function a(e){i.call(this,e)}r(a.prototype,i.prototype),r(a,i),a.prototype.pipe=function(e,t){let n=this;function r(t){e.writable&&e.write(t)===!1&&n.pause&&n.pause()}n.on(`data`,r);function a(){n.readable&&n.resume&&n.resume()}e.on(`drain`,a),!e._isStdio&&(!t||t.end!==!1)&&(n.on(`end`,c),n.on(`close`,l));let s=!1;function c(){s||(s=!0,e.end())}function l(){s||(s=!0,typeof e.destroy==`function`&&e.destroy())}function u(e){d(),i.listenerCount(this,`error`)===0&&this.emit(`error`,e)}o(n,`error`,u),o(e,`error`,u);function d(){n.removeListener(`data`,r),e.removeListener(`drain`,a),n.removeListener(`end`,c),n.removeListener(`close`,l),n.removeListener(`error`,u),e.removeListener(`error`,u),n.removeListener(`end`,d),n.removeListener(`close`,d),e.removeListener(`close`,d)}return n.on(`end`,d),n.on(`close`,d),e.on(`close`,d),e.emit(`pipe`,n),e};function o(e,t,r){if(typeof e.prependListener==`function`)return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}t.exports={Stream:a,prependListener:o}})),q8=n(((e,t)=>{var{SymbolDispose:n}=F8(),{AbortError:r,codes:i}=L8(),{isNodeStream:a,isWebStream:o,kControllerErrorFunction:s}=U8(),c=W8(),{ERR_INVALID_ARG_TYPE:l}=i,u,d=(e,t)=>{if(typeof e!=`object`||!(`aborted`in e))throw new l(t,`AbortSignal`,e)};t.exports.addAbortSignal=function(e,n){if(d(e,`signal`),!a(n)&&!o(n))throw new l(`stream`,[`ReadableStream`,`WritableStream`,`Stream`],n);return t.exports.addAbortSignalNoValidate(e,n)},t.exports.addAbortSignalNoValidate=function(e,t){if(typeof e!=`object`||!(`aborted`in e))return t;let i=a(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?i():(u||=B8().addAbortListener,c(t,u(e,i)[n])),t}})),J8=n(((e,t)=>{var{StringPrototypeSlice:n,SymbolIterator:r,TypedArrayPrototypeSet:i,Uint8Array:a}=F8(),{Buffer:o}=W4(),{inspect:s}=B8();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return``;let t=this.head,n=``+t.data;for(;(t=t.next)!==null;)n+=e+t.data;return n}concat(e){if(this.length===0)return o.alloc(0);let t=o.allocUnsafe(e>>>0),n=this.head,r=0;for(;n;)i(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){let n=this.head.data;if(e<n.length){let t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[r](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t=``,r=this.head,i=0;do{let a=r.data;if(e>a.length)t+=a,e-=a.length;else{e===a.length?(t+=a,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(a,0,e),this.head=r,r.data=n(a,e));break}++i}while((r=r.next)!==null);return this.length-=i,t}_getBuffer(e){let t=o.allocUnsafe(e),n=e,r=this.head,s=0;do{let o=r.data;if(e>o.length)i(t,o,n-e),e-=o.length;else{e===o.length?(i(t,o,n-e),++s,r.next?this.head=r.next:this.head=this.tail=null):(i(t,new a(o.buffer,o.byteOffset,e),n-e),this.head=r,r.data=o.slice(e));break}++s}while((r=r.next)!==null);return this.length-=s,t}[Symbol.for(`nodejs.util.inspect.custom`)](e,t){return s(this,{...t,depth:0,customInspect:!1})}}})),Y8=n(((e,t)=>{var{MathFloor:n,NumberIsInteger:r}=F8(),{validateInteger:i}=V8(),{ERR_INVALID_ARG_VALUE:a}=L8().codes,o=16*1024,s=16;function c(e,t,n){return e.highWaterMark==null?t?e[n]:null:e.highWaterMark}function l(e){return e?s:o}function u(e,t){i(t,`value`,0),e?s=t:o=t}function d(e,t,i,o){let s=c(t,o,i);if(s!=null){if(!r(s)||s<0)throw new a(o?`options.${i}`:`options.highWaterMark`,s);return n(s)}return l(e.objectMode)}t.exports={getHighWaterMark:d,getDefaultHighWaterMark:l,setDefaultHighWaterMark:u}})),X8=n(((e,t)=>{var n=W4(),r=n.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=a);function a(e,t,n){return r(e,t,n)}a.prototype=Object.create(r.prototype),i(r,a),a.from=function(e,t,n){if(typeof e==`number`)throw TypeError(`Argument must not be a number`);return r(e,t,n)},a.alloc=function(e,t,n){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);var i=r(e);return t===void 0?i.fill(0):typeof n==`string`?i.fill(t,n):i.fill(t),i},a.allocUnsafe=function(e){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);return r(e)},a.allocUnsafeSlow=function(e){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);return n.SlowBuffer(e)}})),Z8=n((e=>{var t=X8().Buffer,n=t.isEncoding||function(e){switch(e=``+e,e&&e.toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:case`raw`:return!0;default:return!1}};function r(e){if(!e)return`utf8`;for(var t;;)switch(e){case`utf8`:case`utf-8`:return`utf8`;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return`utf16le`;case`latin1`:case`binary`:return`latin1`;case`base64`:case`ascii`:case`hex`:return e;default:if(t)return;e=(``+e).toLowerCase(),t=!0}}function i(e){var i=r(e);if(typeof i!=`string`&&(t.isEncoding===n||!n(e)))throw Error(`Unknown encoding: `+e);return i||e}e.StringDecoder=a;function a(e){this.encoding=i(e);var n;switch(this.encoding){case`utf16le`:this.text=f,this.end=p,n=4;break;case`utf8`:this.fillLast=l,n=4;break;case`base64`:this.text=m,this.end=h,n=3;break;default:this.write=g,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}a.prototype.write=function(e){if(e.length===0)return``;var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return``;n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||``},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function c(e,t,n){if((t[0]&192)!=128)return e.lastNeed=0,`�`;if(e.lastNeed>1&&t.length>1){if((t[1]&192)!=128)return e.lastNeed=1,`�`;if(e.lastNeed>2&&t.length>2&&(t[2]&192)!=128)return e.lastNeed=2,`�`}}function l(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function u(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString(`utf8`,t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(`utf8`,t,r)}function d(e){var t=e&&e.length?this.write(e):``;return this.lastNeed?t+`�`:t}function f(e,t){if((e.length-t)%2==0){var n=e.toString(`utf16le`,t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(`utf16le`,t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):``;if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(`utf16le`,0,n)}return t}function m(e,t){var n=(e.length-t)%3;return n===0?e.toString(`base64`,t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(`base64`,t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):``;return this.lastNeed?t+this.lastChar.toString(`base64`,0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function _(e){return e&&e.length?this.write(e):``}})),Q8=n(((e,t)=>{var n=H8(),{PromisePrototypeThen:r,SymbolAsyncIterator:i,SymbolIterator:a}=F8(),{Buffer:o}=W4(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:c}=L8().codes;function l(e,t,l){let u;if(typeof t==`string`||t instanceof o)return new e({objectMode:!0,...l,read(){this.push(t),this.push(null)}});let d;if(t&&t[i])d=!0,u=t[i]();else if(t&&t[a])d=!1,u=t[a]();else throw new s(`iterable`,[`Iterable`],t);let f=new e({objectMode:!0,highWaterMark:1,...l}),p=!1;f._read=function(){p||(p=!0,h())},f._destroy=function(e,t){r(m(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))};async function m(e){let t=e!=null,n=typeof u.throw==`function`;if(t&&n){let{value:t,done:n}=await u.throw(e);if(await t,n)return}if(typeof u.return==`function`){let{value:e}=await u.return();await e}}async function h(){for(;;){try{let{value:e,done:t}=d?await u.next():u.next();if(t)f.push(null);else{let t=e&&typeof e.then==`function`?await e:e;if(t===null)throw p=!1,new c;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}return f}t.exports=l})),$8=n(((e,t)=>{var n=H8(),{ArrayPrototypeIndexOf:r,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:o,ObjectDefineProperties:s,ObjectKeys:c,ObjectSetPrototypeOf:l,Promise:u,SafeSet:d,SymbolAsyncDispose:f,SymbolAsyncIterator:p,Symbol:m}=F8();t.exports=z,z.ReadableState=be;var{EventEmitter:h}=z8(),{Stream:g,prependListener:_}=K8(),{Buffer:v}=W4(),{addAbortSignal:y}=q8(),b=W8(),x=B8().debuglog(`stream`,e=>{x=e}),S=J8(),C=G8(),{getHighWaterMark:w,getDefaultHighWaterMark:T}=Y8(),{aggregateTwoErrors:E,codes:{ERR_INVALID_ARG_TYPE:D,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:k,ERR_STREAM_PUSH_AFTER_EOF:A,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:j},AbortError:M}=L8(),{validateObject:N}=V8(),P=m(`kPaused`),{StringDecoder:F}=Z8(),ee=Q8();l(z.prototype,g.prototype),l(z,g);var I=()=>{},{errorOrDestroy:L}=C,te=1,ne=2,re=4,ie=8,ae=16,oe=32,se=64,ce=128,le=256,ue=512,de=1024,fe=2048,pe=4096,me=8192,he=16384,R=32768,ge=65536,_e=1<<17,ve=1<<18;function ye(e){return{enumerable:!1,get(){return(this.state&e)!==0},set(t){t?this.state|=e:this.state&=~e}}}s(be.prototype,{objectMode:ye(te),ended:ye(ne),endEmitted:ye(re),reading:ye(ie),constructed:ye(ae),sync:ye(oe),needReadable:ye(se),emittedReadable:ye(ce),readableListening:ye(le),resumeScheduled:ye(ue),errorEmitted:ye(de),emitClose:ye(fe),autoDestroy:ye(pe),destroyed:ye(me),closed:ye(he),closeEmitted:ye(R),multiAwaitDrain:ye(ge),readingMore:ye(_e),dataEmitted:ye(ve)});function be(e,t,n){typeof n!=`boolean`&&(n=t instanceof n5()),this.state=6192,e&&e.objectMode&&(this.state|=te),n&&e&&e.readableObjectMode&&(this.state|=te),this.highWaterMark=e?w(this,e,`readableHighWaterMark`,n):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[P]=null,e&&e.emitClose===!1&&(this.state&=~fe),e&&e.autoDestroy===!1&&(this.state&=~pe),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||`utf8`,this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new F(e.encoding),this.encoding=e.encoding)}function z(e){if(!(this instanceof z))return new z(e);let t=this instanceof n5();this._readableState=new be(e,this,t),e&&(typeof e.read==`function`&&(this._read=e.read),typeof e.destroy==`function`&&(this._destroy=e.destroy),typeof e.construct==`function`&&(this._construct=e.construct),e.signal&&!t&&y(e.signal,this)),g.call(this,e),C.construct(this,()=>{this._readableState.needReadable&&ke(this,this._readableState)})}z.prototype.destroy=C.destroy,z.prototype._undestroy=C.undestroy,z.prototype._destroy=function(e,t){t(e)},z.prototype[h.captureRejectionSymbol]=function(e){this.destroy(e)},z.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new M,this.destroy(e)),new u((t,n)=>b(this,r=>r&&r!==e?n(r):t(null)))},z.prototype.push=function(e,t){return xe(this,e,t,!1)},z.prototype.unshift=function(e,t){return xe(this,e,t,!0)};function xe(e,t,n,r){x(`readableAddChunk`,t);let i=e._readableState,a;if((i.state&te)===0&&(typeof t==`string`?(n||=i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=v.from(t,n).toString(i.encoding):(t=v.from(t,n),n=``))):t instanceof v?n=``:g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),n=``):t!=null&&(a=new D(`chunk`,[`string`,`Buffer`,`Uint8Array`],t))),a)L(e,a);else if(t===null)i.state&=~ie,Ee(e,i);else if((i.state&te)!==0||t&&t.length>0)if(r)if((i.state&re)!==0)L(e,new j);else if(i.destroyed||i.errored)return!1;else Se(e,i,t,!0);else if(i.ended)L(e,new A);else if(i.destroyed||i.errored)return!1;else i.state&=~ie,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||t.length!==0?Se(e,i,t,!1):ke(e,i)):Se(e,i,t,!1);else r||(i.state&=~ie,ke(e,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Se(e,t,n,r){t.flowing&&t.length===0&&!t.sync&&e.listenerCount(`data`)>0?((t.state&ge)===0?t.awaitDrainWriters=null:t.awaitDrainWriters.clear(),t.dataEmitted=!0,e.emit(`data`,n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),(t.state&se)!==0&&De(e)),ke(e,t)}z.prototype.isPaused=function(){let e=this._readableState;return e[P]===!0||e.flowing===!1},z.prototype.setEncoding=function(e){let t=new F(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r=``;for(let e of n)r+=t.write(e);return n.clear(),r!==``&&n.push(r),this._readableState.length=r.length,this};var Ce=1073741824;function we(e){if(e>Ce)throw new k(`size`,`<= 1GiB`,e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function Te(e,t){return e<=0||t.length===0&&t.ended?0:(t.state&te)===0?a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0:1}z.prototype.read=function(e){x(`read`,e),e===void 0?e=NaN:i(e)||(e=o(e,10));let t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=we(e)),e!==0&&(t.state&=~ce),e===0&&t.needReadable&&((t.highWaterMark===0?t.length>0:t.length>=t.highWaterMark)||t.ended))return x(`read: emitReadable`,t.length,t.ended),t.length===0&&t.ended?Be(this):De(this),null;if(e=Te(e,t),e===0&&t.ended)return t.length===0&&Be(this),null;let r=(t.state&se)!==0;if(x(`need readable`,r),(t.length===0||t.length-e<t.highWaterMark)&&(r=!0,x(`length less than watermark`,r)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)r=!1,x(`reading, ended or constructing`,r);else if(r){x(`do read`),t.state|=ie|oe,t.length===0&&(t.state|=se);try{this._read(t.highWaterMark)}catch(e){L(this,e)}t.state&=~oe,t.reading||(e=Te(n,t))}let a;return a=e>0?ze(e,t):null,a===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Be(this)),a!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit(`data`,a)),a};function Ee(e,t){if(x(`onEofChunk`),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?De(e):(t.needReadable=!1,t.emittedReadable=!0,Oe(e))}}function De(e){let t=e._readableState;x(`emitReadable`,t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x(`emitReadable`,t.flowing),t.emittedReadable=!0,n.nextTick(Oe,e))}function Oe(e){let t=e._readableState;x(`emitReadable_`,t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit(`readable`),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Ie(e)}function ke(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(Ae,e,t))}function Ae(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let n=t.length;if(x(`maybeReadMore read 0`),e.read(0),n===t.length)break}t.readingMore=!1}z.prototype._read=function(e){throw new O(`_read()`)},z.prototype.pipe=function(e,t){let r=this,i=this._readableState;i.pipes.length===1&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new d(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),x(`pipe count=%d opts=%j`,i.pipes.length,t);let a=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr?s:v;i.endEmitted?n.nextTick(a):r.once(`end`,a),e.on(`unpipe`,o);function o(e,t){x(`onunpipe`),e===r&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,u())}function s(){x(`onend`),e.end()}let c,l=!1;function u(){x(`cleanup`),e.removeListener(`close`,h),e.removeListener(`finish`,g),c&&e.removeListener(`drain`,c),e.removeListener(`error`,m),e.removeListener(`unpipe`,o),r.removeListener(`end`,s),r.removeListener(`end`,v),r.removeListener(`data`,p),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}function f(){l||(i.pipes.length===1&&i.pipes[0]===e?(x(`false write response, pause`,0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(x(`false write response, pause`,i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),c||(c=je(r,e),e.on(`drain`,c))}r.on(`data`,p);function p(t){x(`ondata`);let n=e.write(t);x(`dest.write`,n),n===!1&&f()}function m(t){if(x(`onerror`,t),v(),e.removeListener(`error`,m),e.listenerCount(`error`)===0){let n=e._writableState||e._readableState;n&&!n.errorEmitted?L(e,t):e.emit(`error`,t)}}_(e,`error`,m);function h(){e.removeListener(`finish`,g),v()}e.once(`close`,h);function g(){x(`onfinish`),e.removeListener(`close`,h),v()}e.once(`finish`,g);function v(){x(`unpipe`),r.unpipe(e)}return e.emit(`pipe`,r),e.writableNeedDrain===!0?f():i.flowing||(x(`pipe resume`),r.resume()),e};function je(e,t){return function(){let n=e._readableState;n.awaitDrainWriters===t?(x(`pipeOnDrain`,1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(x(`pipeOnDrain`,n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&e.listenerCount(`data`)&&e.resume()}}z.prototype.unpipe=function(e){let t=this._readableState,n={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit(`unpipe`,this,{hasUnpiped:!1});return this}let i=r(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipes.length===0&&this.pause(),e.emit(`unpipe`,this,n),this)},z.prototype.on=function(e,t){let r=g.prototype.on.call(this,e,t),i=this._readableState;return e===`data`?(i.readableListening=this.listenerCount(`readable`)>0,i.flowing!==!1&&this.resume()):e===`readable`&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,x(`on readable`,i.length,i.reading),i.length?De(this):i.reading||n.nextTick(Ne,this)),r},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(e,t){let r=g.prototype.removeListener.call(this,e,t);return e===`readable`&&n.nextTick(Me,this),r},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(e){let t=g.prototype.removeAllListeners.apply(this,arguments);return(e===`readable`||e===void 0)&&n.nextTick(Me,this),t};function Me(e){let t=e._readableState;t.readableListening=e.listenerCount(`readable`)>0,t.resumeScheduled&&t[P]===!1?t.flowing=!0:e.listenerCount(`data`)>0?e.resume():t.readableListening||(t.flowing=null)}function Ne(e){x(`readable nexttick read 0`),e.read(0)}z.prototype.resume=function(){let e=this._readableState;return e.flowing||(x(`resume`),e.flowing=!e.readableListening,Pe(this,e)),e[P]=!1,this};function Pe(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(Fe,e,t))}function Fe(e,t){x(`resume`,t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit(`resume`),Ie(e),t.flowing&&!t.reading&&e.read(0)}z.prototype.pause=function(){return x(`call pause flowing=%j`,this._readableState.flowing),this._readableState.flowing!==!1&&(x(`pause`),this._readableState.flowing=!1,this.emit(`pause`)),this._readableState[P]=!0,this};function Ie(e){let t=e._readableState;for(x(`flow`,t.flowing);t.flowing&&e.read()!==null;);}z.prototype.wrap=function(e){let t=!1;e.on(`data`,n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on(`end`,()=>{this.push(null)}),e.on(`error`,e=>{L(this,e)}),e.on(`close`,()=>{this.destroy()}),e.on(`destroy`,()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let n=c(e);for(let t=1;t<n.length;t++){let r=n[t];this[r]===void 0&&typeof e[r]==`function`&&(this[r]=e[r].bind(e))}return this},z.prototype[p]=function(){return Le(this)},z.prototype.iterator=function(e){return e!==void 0&&N(e,`options`),Le(this,e)};function Le(e,t){typeof e.read!=`function`&&(e=z.wrap(e,{objectMode:!0}));let n=Re(e,t);return n.stream=e,n}async function*Re(e,t){let n=I;function r(t){this===e?(n(),n=I):n=t}e.on(`readable`,r);let i,a=b(e,{writable:!1},e=>{i=e?E(i,e):null,n(),n=I});try{for(;;){let t=e.destroyed?null:e.read();if(t!==null)yield t;else if(i)throw i;else if(i===null)return;else await new u(r)}}catch(e){throw i=E(i,e),i}finally{(i||t?.destroyOnReturn!==!1)&&(i===void 0||e._readableState.autoDestroy)?C.destroyer(e,null):(e.off(`readable`,r),a())}}s(z.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&e.readable!==!1&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[P]!==!1},set(e){this[P]=!!e}}}),z._fromList=ze;function ze(e,t){if(t.length===0)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(``):t.buffer.length===1?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function Be(e){let t=e._readableState;x(`endReadable`,t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(Ve,t,e))}function Ve(e,t){if(x(`endReadableNT`,e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){if(e.endEmitted=!0,t.emit(`end`),t.writable&&t.allowHalfOpen===!1)n.nextTick(He,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||e.writable===!1))&&t.destroy()}}}function He(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}z.from=function(e,t){return ee(z,e,t)};var Ue;function We(){return Ue===void 0&&(Ue={}),Ue}z.fromWeb=function(e,t){return We().newStreamReadableFromReadableStream(e,t)},z.toWeb=function(e,t){return We().newReadableStreamFromStreamReadable(e,t)},z.wrap=function(e,t){return new z({objectMode:e.readableObjectMode??e.objectMode??!0,...t,destroy(t,n){C.destroyer(e,t),n(t)}}).wrap(e)}})),e5=n(((e,t)=>{var n=H8(),{ArrayPrototypeSlice:r,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:o,ObjectDefineProperties:s,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:l,Symbol:u,SymbolHasInstance:d}=F8();t.exports=N,N.WritableState=j;var{EventEmitter:f}=z8(),p=K8().Stream,{Buffer:m}=W4(),h=G8(),{addAbortSignal:g}=q8(),{getHighWaterMark:_,getDefaultHighWaterMark:v}=Y8(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:w,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:E,ERR_UNKNOWN_ENCODING:D}=L8().codes,{errorOrDestroy:O}=h;c(N.prototype,p.prototype),c(N,p);function k(){}var A=u(`kOnFinished`);function j(e,t,n){typeof n!=`boolean`&&(n=t instanceof n5()),this.objectMode=!!(e&&e.objectMode),n&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?_(this,e,`writableHighWaterMark`,n):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(e&&e.decodeStrings===!1),this.defaultEncoding=e&&e.defaultEncoding||`utf8`,this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=L.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,M(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||e.emitClose!==!1,this.autoDestroy=!e||e.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[A]=[]}function M(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}j.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},o(j.prototype,`bufferedRequestCount`,{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function N(e){let t=this instanceof n5();if(!t&&!a(N,this))return new N(e);this._writableState=new j(e,this,t),e&&(typeof e.write==`function`&&(this._write=e.write),typeof e.writev==`function`&&(this._writev=e.writev),typeof e.destroy==`function`&&(this._destroy=e.destroy),typeof e.final==`function`&&(this._final=e.final),typeof e.construct==`function`&&(this._construct=e.construct),e.signal&&g(e.signal,this)),p.call(this,e),h.construct(this,()=>{let e=this._writableState;e.writing||ie(this,e),ce(this,e)})}o(N,d,{__proto__:null,value:function(e){return a(this,e)?!0:this===N?e&&e._writableState instanceof j:!1}}),N.prototype.pipe=function(){O(this,new S)};function P(e,t,r,i){let a=e._writableState;if(typeof r==`function`)i=r,r=a.defaultEncoding;else{if(!r)r=a.defaultEncoding;else if(r!==`buffer`&&!m.isEncoding(r))throw new D(r);typeof i!=`function`&&(i=k)}if(t===null)throw new T;if(!a.objectMode)if(typeof t==`string`)a.decodeStrings!==!1&&(t=m.from(t,r),r=`buffer`);else if(t instanceof m)r=`buffer`;else if(p._isUint8Array(t))t=p._uint8ArrayToBuffer(t),r=`buffer`;else throw new y(`chunk`,[`string`,`Buffer`,`Uint8Array`],t);let o;return a.ending?o=new E:a.destroyed&&(o=new C(`write`)),o?(n.nextTick(i,o),O(e,o,!0),o):(a.pendingcb++,F(e,a,t,r,i))}N.prototype.write=function(e,t,n){return P(this,e,t,n)===!0},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||ie(this,e))},N.prototype.setDefaultEncoding=function(e){if(typeof e==`string`&&(e=l(e)),!m.isEncoding(e))throw new D(e);return this._writableState.defaultEncoding=e,this};function F(e,t,n,r,i){let a=t.objectMode?1:n.length;t.length+=a;let o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&r!==`buffer`&&(t.allBuffers=!1),t.allNoop&&i!==k&&(t.allNoop=!1)):(t.writelen=a,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),o&&!t.errored&&!t.destroyed}function ee(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new C(`write`)):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function I(e,t,n,r){--t.pendingcb,r(n),re(t),O(e,n)}function L(e,t){let r=e._writableState,i=r.sync,a=r.writecb;if(typeof a!=`function`){O(e,new x);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||=t,e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(I,e,r,t,a):I(e,r,t,a)):(r.buffered.length>r.bufferedIndex&&ie(e,r),i?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===a?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:a,stream:e,state:r},n.nextTick(te,r.afterWriteTickInfo)):ne(e,r,1,a))}function te({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,ne(e,t,n,r)}function ne(e,t,n,r){for(!t.ending&&!e.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit(`drain`));n-- >0;)t.pendingcb--,r();t.destroyed&&re(t),ce(e,t)}function re(e){if(e.writing)return;for(let t=e.bufferedIndex;t<e.buffered.length;++t){let{chunk:n,callback:r}=e.buffered[t],i=e.objectMode?1:n.length;e.length-=i,r(e.errored??new C(`write`))}let t=e[A].splice(0);for(let n=0;n<t.length;n++)t[n](e.errored??new C(`end`));M(e)}function ie(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:n,bufferedIndex:i,objectMode:a}=t,o=n.length-i;if(!o)return;let s=i;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let i=t.allNoop?k:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},a=t.allNoop&&s===0?n:r(n,s);a.allBuffers=t.allBuffers,ee(e,t,!0,t.length,a,``,i),M(t)}else{do{let{chunk:r,encoding:i,callback:o}=n[s];n[s++]=null,ee(e,t,!1,a?1:r.length,r,i,o)}while(s<n.length&&!t.writing);s===n.length?M(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}N.prototype._write=function(e,t,n){if(this._writev)this._writev([{chunk:e,encoding:t}],n);else throw new b(`_write()`)},N.prototype._writev=null,N.prototype.end=function(e,t,r){let a=this._writableState;typeof e==`function`?(r=e,e=null,t=null):typeof t==`function`&&(r=t,t=null);let o;if(e!=null){let n=P(this,e,t);n instanceof i&&(o=n)}return a.corked&&(a.corked=1,this.uncork()),o||(!a.errored&&!a.ending?(a.ending=!0,ce(this,a,!0),a.ended=!0):a.finished?o=new w(`end`):a.destroyed&&(o=new C(`end`))),typeof r==`function`&&(o||a.finished?n.nextTick(r,o):a[A].push(r)),this};function ae(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function oe(e,t){let r=!1;function i(i){if(r){O(e,i??x());return}if(r=!0,t.pendingcb--,i){let n=t[A].splice(0);for(let e=0;e<n.length;e++)n[e](i);O(e,i,t.sync)}else ae(t)&&(t.prefinished=!0,e.emit(`prefinish`),t.pendingcb++,n.nextTick(le,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}function se(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final==`function`&&!t.destroyed?(t.finalCalled=!0,oe(e,t)):(t.prefinished=!0,e.emit(`prefinish`)))}function ce(e,t,r){ae(t)&&(se(e,t),t.pendingcb===0&&(r?(t.pendingcb++,n.nextTick((e,t)=>{ae(t)?le(e,t):t.pendingcb--},e,t)):ae(t)&&(t.pendingcb++,le(e,t))))}function le(e,t){t.pendingcb--,t.finished=!0;let n=t[A].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit(`finish`),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||t.readable===!1))&&e.destroy()}}s(N.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&e.writable!==!1&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return e?!e.destroyed&&!e.ending&&e.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ue=h.destroy;N.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[A].length)&&n.nextTick(re,r),ue.call(this,e,t),this},N.prototype._undestroy=h.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)};var de;function fe(){return de===void 0&&(de={}),de}N.fromWeb=function(e,t){return fe().newStreamWritableFromWritableStream(e,t)},N.toWeb=function(e){return fe().newWritableStreamFromStreamWritable(e)}})),t5=n(((e,t)=>{var n=H8(),r=W4(),{isReadable:i,isWritable:a,isIterable:o,isNodeStream:s,isReadableNodeStream:c,isWritableNodeStream:l,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:f}=U8(),p=W8(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:g}}=L8(),{destroyer:_}=G8(),v=n5(),y=$8(),b=e5(),{createDeferredPromise:x}=B8(),S=Q8(),C=globalThis.Blob||r.Blob,w=C===void 0?function(e){return!1}:function(e){return e instanceof C},T=globalThis.AbortController||R8().AbortController,{FunctionPrototypeCall:E}=F8(),D=class extends v{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function e(t,r){if(u(t))return t;if(c(t))return k({readable:t});if(l(t))return k({writable:t});if(s(t))return k({writable:!1,readable:!1});if(d(t))return k({readable:y.fromWeb(t)});if(f(t))return k({writable:b.fromWeb(t)});if(typeof t==`function`){let{value:e,write:i,final:a,destroy:s}=O(t);if(o(e))return S(D,e,{objectMode:!0,write:i,final:a,destroy:s});let c=e?.then;if(typeof c==`function`){let t,r=E(c,e,e=>{if(e!=null)throw new g(`nully`,`body`,e)},e=>{_(t,e)});return t=new D({objectMode:!0,readable:!1,write:i,final(e){a(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:s})}throw new g(`Iterable, AsyncIterable or AsyncFunction`,r,e)}if(w(t))return e(t.arrayBuffer());if(o(t))return S(D,t,{objectMode:!0,writable:!1});if(d(t?.readable)&&f(t?.writable))return D.fromWeb(t);if(typeof t?.writable==`object`||typeof t?.readable==`object`)return k({readable:t!=null&&t.readable?c(t?.readable)?t?.readable:e(t.readable):void 0,writable:t!=null&&t.writable?l(t?.writable)?t?.writable:e(t.writable):void 0});let i=t?.then;if(typeof i==`function`){let e;return E(i,t,t=>{t!=null&&e.push(t),e.push(null)},t=>{_(e,t)}),e=new D({objectMode:!0,writable:!1,read(){}})}throw new h(r,[`Blob`,`ReadableStream`,`WritableStream`,`Stream`,`Iterable`,`AsyncIterable`,`Function`,`{ readable, writable } pair`,`Promise`],t)};function O(e){let{promise:t,resolve:r}=x(),i=new T,a=i.signal;return{value:e((async function*(){for(;;){let e=t;t=null;let{chunk:i,done:o,cb:s}=await e;if(n.nextTick(s),o)return;if(a.aborted)throw new m(void 0,{cause:a.reason});({promise:t,resolve:r}=x()),yield i}})(),{signal:a}),write(e,t,n){let i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}function k(e){let t=e.readable&&typeof e.readable.read!=`function`?y.wrap(e.readable):e.readable,n=e.writable,r=!!i(t),o=!!a(n),s,c,l,u,d;function f(e){let t=u;u=null,t?t(e):e&&d.destroy(e)}return d=new D({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:o}),o&&(p(n,e=>{o=!1,e&&_(t,e),f(e)}),d._write=function(e,t,r){n.write(e,t)?r():s=r},d._final=function(e){n.end(),c=e},n.on(`drain`,function(){if(s){let e=s;s=null,e()}}),n.on(`finish`,function(){if(c){let e=c;c=null,e()}})),r&&(p(t,e=>{r=!1,e&&_(t,e),f(e)}),t.on(`readable`,function(){if(l){let e=l;l=null,e()}}),t.on(`end`,function(){d.push(null)}),d._read=function(){for(;;){let e=t.read();if(e===null){l=d._read;return}if(!d.push(e))return}}),d._destroy=function(e,r){!e&&u!==null&&(e=new m),l=null,s=null,c=null,u===null?r(e):(u=r,_(n,e),_(t,e))},d}})),n5=n(((e,t)=>{var{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:i,ObjectSetPrototypeOf:a}=F8();t.exports=c;var o=$8(),s=e5();a(c.prototype,o.prototype),a(c,o);{let e=i(s.prototype);for(let t=0;t<e.length;t++){let n=e[t];c.prototype[n]||(c.prototype[n]=s.prototype[n])}}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),e?(this.allowHalfOpen=e.allowHalfOpen!==!1,e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(c.prototype,{writable:{__proto__:null,...r(s.prototype,`writable`)},writableHighWaterMark:{__proto__:null,...r(s.prototype,`writableHighWaterMark`)},writableObjectMode:{__proto__:null,...r(s.prototype,`writableObjectMode`)},writableBuffer:{__proto__:null,...r(s.prototype,`writableBuffer`)},writableLength:{__proto__:null,...r(s.prototype,`writableLength`)},writableFinished:{__proto__:null,...r(s.prototype,`writableFinished`)},writableCorked:{__proto__:null,...r(s.prototype,`writableCorked`)},writableEnded:{__proto__:null,...r(s.prototype,`writableEnded`)},writableNeedDrain:{__proto__:null,...r(s.prototype,`writableNeedDrain`)},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}});var l;function u(){return l===void 0&&(l={}),l}c.fromWeb=function(e,t){return u().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return u().newReadableWritablePairFromDuplex(e)};var d;c.from=function(e){return d||=t5(),d(e,`body`)}})),r5=n(((e,t)=>{var{ObjectSetPrototypeOf:n,Symbol:r}=F8();t.exports=c;var{ERR_METHOD_NOT_IMPLEMENTED:i}=L8().codes,a=n5(),{getHighWaterMark:o}=Y8();n(c.prototype,a.prototype),n(c,a);var s=r(`kCallback`);function c(e){if(!(this instanceof c))return new c(e);let t=e?o(this,e,`readableHighWaterMark`,!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[s]=null,e&&(typeof e.transform==`function`&&(this._transform=e.transform),typeof e.flush==`function`&&(this._flush=e.flush)),this.on(`prefinish`,u)}function l(e){typeof this._flush==`function`&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function u(){this._final!==l&&l.call(this)}c.prototype._final=l,c.prototype._transform=function(e,t,n){throw new i(`_transform()`)},c.prototype._write=function(e,t,n){let r=this._readableState,i=this._writableState,a=r.length;this._transform(e,t,(e,t)=>{if(e){n(e);return}t!=null&&this.push(t),i.ended||a===r.length||r.length<r.highWaterMark?n():this[s]=n})},c.prototype._read=function(){if(this[s]){let e=this[s];this[s]=null,e()}}})),i5=n(((e,t)=>{var{ObjectSetPrototypeOf:n}=F8();t.exports=i;var r=r5();n(i.prototype,r.prototype),n(i,r);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}i.prototype._transform=function(e,t,n){n(null,e)}})),a5=n(((e,t)=>{var n=H8(),{ArrayIsArray:r,Promise:i,SymbolAsyncIterator:a,SymbolDispose:o}=F8(),s=W8(),{once:c}=B8(),l=G8(),u=n5(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:_}=L8(),{validateFunction:v,validateAbortSignal:y}=V8(),{isIterable:b,isReadable:x,isReadableNodeStream:S,isNodeStream:C,isTransformStream:w,isWebStream:T,isReadableStream:E,isReadableFinished:D}=U8(),O=globalThis.AbortController||R8().AbortController,k,A,j;function M(e,t,n){let r=!1;return e.on(`close`,()=>{r=!0}),{destroy:t=>{r||(r=!0,l.destroyer(e,t||new h(`pipe`)))},cleanup:s(e,{readable:t,writable:n},e=>{r=!e})}}function N(e){return v(e[e.length-1],`streams[stream.length - 1]`),e.pop()}function P(e){if(b(e))return e;if(S(e))return F(e);throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`],e)}async function*F(e){A||=$8(),yield*A.prototype[a].call(e)}async function ee(e,t,n,{end:r}){let a,o=null,c=e=>{if(e&&(a=e),o){let e=o;o=null,e()}},l=()=>new i((e,t)=>{a?t(a):o=()=>{a?t(a):e()}});t.on(`drain`,c);let u=s(t,{readable:!1},c);try{t.writableNeedDrain&&await l();for await(let n of e)t.write(n)||await l();r&&(t.end(),await l()),n()}catch(e){n(a===e?e:d(a,e))}finally{u(),t.off(`drain`,c)}}async function I(e,t,n,{end:r}){w(t)&&(t=t.writable);let i=t.getWriter();try{for await(let t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function L(...e){return te(e,c(N(e)))}function te(e,t,i){if(e.length===1&&r(e[0])&&(e=e[0]),e.length<2)throw new m(`streams`);let a=new O,s=a.signal,c=i?.signal,l=[];y(c,`options.signal`);function d(){F(new _)}j||=B8().addAbortListener;let h;c&&(h=j(c,d));let g,v,D=[],A=0;function N(e){F(e,--A===0)}function F(e,r){var i;if(e&&(!g||g.code===`ERR_STREAM_PREMATURE_CLOSE`)&&(g=e),!(!g&&!r)){for(;D.length;)D.shift()(g);(i=h)==null||i[o](),a.abort(),r&&(g||l.forEach(e=>e()),n.nextTick(t,g,v))}}let L;for(let t=0;t<e.length;t++){let r=e[t],a=t<e.length-1,o=t>0,c=a||i?.end!==!1,d=t===e.length-1;if(C(r)){if(c){let{destroy:e,cleanup:t}=M(r,a,o);D.push(e),x(r)&&d&&l.push(t)}function e(e){e&&e.name!==`AbortError`&&e.code!==`ERR_STREAM_PREMATURE_CLOSE`&&N(e)}r.on(`error`,e),x(r)&&d&&l.push(()=>{r.removeListener(`error`,e)})}if(t===0)if(typeof r==`function`){if(L=r({signal:s}),!b(L))throw new p(`Iterable, AsyncIterable or Stream`,`source`,L)}else L=b(r)||S(r)||w(r)?r:u.from(r);else if(typeof r==`function`)if(L=w(L)?P(L?.readable):P(L),L=r(L,{signal:s}),a){if(!b(L,!0))throw new p(`AsyncIterable`,`transform[${t-1}]`,L)}else{k||=i5();let e=new k({objectMode:!0}),t=L?.then;if(typeof t==`function`)A++,t.call(L,t=>{v=t,t!=null&&e.write(t),c&&e.end(),n.nextTick(N)},t=>{e.destroy(t),n.nextTick(N,t)});else if(b(L,!0))A++,ee(L,e,N,{end:c});else if(E(L)||w(L)){let t=L.readable||L;A++,ee(t,e,N,{end:c})}else throw new p(`AsyncIterable or Promise`,`destination`,L);L=e;let{destroy:r,cleanup:i}=M(L,!1,!0);D.push(r),d&&l.push(i)}else if(C(r)){if(S(L)){A+=2;let e=ne(L,r,N,{end:c});x(r)&&d&&l.push(e)}else if(w(L)||E(L)){let e=L.readable||L;A++,ee(e,r,N,{end:c})}else if(b(L))A++,ee(L,r,N,{end:c});else throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`,`ReadableStream`,`TransformStream`],L);L=r}else if(T(r)){if(S(L))A++,I(P(L),r,N,{end:c});else if(E(L)||b(L))A++,I(L,r,N,{end:c});else if(w(L))A++,I(L.readable,r,N,{end:c});else throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`,`ReadableStream`,`TransformStream`],L);L=r}else L=u.from(r)}return(s!=null&&s.aborted||c!=null&&c.aborted)&&n.nextTick(d),L}function ne(e,t,r,{end:i}){let a=!1;if(t.on(`close`,()=>{a||r(new g)}),e.pipe(t,{end:!1}),i){function r(){a=!0,t.end()}D(e)?n.nextTick(r):e.once(`end`,r)}else r();return s(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&t.code===`ERR_STREAM_PREMATURE_CLOSE`&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once(`end`,r).once(`error`,r):r(t)}),s(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:te,pipeline:L}})),o5=n(((e,t)=>{var{pipeline:n}=a5(),r=n5(),{destroyer:i}=G8(),{isNodeStream:a,isReadable:o,isWritable:s,isWebStream:c,isTransformStream:l,isWritableStream:u,isReadableStream:d}=U8(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=L8(),h=W8();t.exports=function(...e){if(e.length===0)throw new m(`streams`);if(e.length===1)return r.from(e[0]);let t=[...e];if(typeof e[0]==`function`&&(e[0]=r.from(e[0])),typeof e[e.length-1]==`function`){let t=e.length-1;e[t]=r.from(e[t])}for(let n=0;n<e.length;++n)if(!(!a(e[n])&&!c(e[n]))){if(n<e.length-1&&!(o(e[n])||d(e[n])||l(e[n])))throw new p(`streams[${n}]`,t[n],`must be readable`);if(n>0&&!(s(e[n])||u(e[n])||l(e[n])))throw new p(`streams[${n}]`,t[n],`must be writable`)}let g,_,v,y,b;function x(e){let t=y;y=null,t?t(e):e?b.destroy(e):!T&&!w&&b.destroy()}let S=e[0],C=n(e,x),w=!!(s(S)||u(S)||l(S)),T=!!(o(C)||d(C)||l(C));if(b=new r({writableObjectMode:!!(S!=null&&S.writableObjectMode),readableObjectMode:!!(C!=null&&C.readableObjectMode),writable:w,readable:T}),w){if(a(S))b._write=function(e,t,n){S.write(e,t)?n():g=n},b._final=function(e){S.end(),_=e},S.on(`drain`,function(){if(g){let e=g;g=null,e()}});else if(c(S)){let e=(l(S)?S.writable:S).getWriter();b._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},b._final=async function(t){try{await e.ready,e.close().catch(()=>{}),_=t}catch(e){t(e)}}}h(l(C)?C.readable:C,()=>{if(_){let e=_;_=null,e()}})}if(T){if(a(C))C.on(`readable`,function(){if(v){let e=v;v=null,e()}}),C.on(`end`,function(){b.push(null)}),b._read=function(){for(;;){let e=C.read();if(e===null){v=b._read;return}if(!b.push(e))return}};else if(c(C)){let e=(l(C)?C.readable:C).getReader();b._read=async function(){for(;;)try{let{value:t,done:n}=await e.read();if(!b.push(t))return;if(n){b.push(null);return}}catch{return}}}}return b._destroy=function(e,t){!e&&y!==null&&(e=new f),v=null,g=null,_=null,y===null?t(e):(y=t,a(C)&&i(C,e))},b}})),s5=n(((e,t)=>{var n=globalThis.AbortController||R8().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:o},AbortError:s}=L8(),{validateAbortSignal:c,validateInteger:l,validateObject:u}=V8(),d=F8().Symbol(`kWeak`),f=F8().Symbol(`kResistStopPropagation`),{finished:p}=W8(),m=o5(),{addAbortSignalNoValidate:h}=q8(),{isWritable:g,isNodeStream:_}=U8(),{deprecate:v}=B8(),{ArrayPrototypePush:y,Boolean:b,MathFloor:x,Number:S,NumberIsNaN:C,Promise:w,PromiseReject:T,PromiseResolve:E,PromisePrototypeThen:D,Symbol:O}=F8(),k=O(`kEmpty`),A=O(`kEof`);function j(e,t){if(t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),_(e)&&!g(e))throw new r(`stream`,e,`must be writable`);let n=m(this,e);return t!=null&&t.signal&&h(t.signal,n),n}function M(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`);let n=1;t?.concurrency!=null&&(n=x(t.concurrency));let r=n-1;return t?.highWaterMark!=null&&(r=x(t.highWaterMark)),l(n,`options.concurrency`,1),l(r,`options.highWaterMark`,0),r+=n,async function*(){let i=B8().AbortSignalAny([t?.signal].filter(b)),a=this,o=[],c={signal:i},l,u,d=!1,f=0;function p(){d=!0,m()}function m(){--f,h()}function h(){u&&!d&&f<n&&o.length<r&&(u(),u=null)}async function g(){try{for await(let t of a){if(d)return;if(i.aborted)throw new s;try{if(t=e(t,c),t===k)continue;t=E(t)}catch(e){t=T(e)}f+=1,D(t,m,p),o.push(t),l&&=(l(),null),!d&&(o.length>=r||f>=n)&&await new w(e=>{u=e})}o.push(A)}catch(e){let t=T(e);D(t,m,p),o.push(t)}finally{d=!0,l&&=(l(),null)}}g();try{for(;;){for(;o.length>0;){let e=await o[0];if(e===A)return;if(i.aborted)throw new s;e!==k&&(yield e),o.shift(),h()}await new w(e=>{l=e})}}finally{d=!0,u&&=(u(),null)}}.call(this)}function N(e=void 0){return e!=null&&u(e,`options`),e?.signal!=null&&c(e.signal,`options.signal`),async function*(){let t=0;for await(let r of this){var n;if(e!=null&&(n=e.signal)!=null&&n.aborted)throw new s({cause:e.signal.reason});yield[t++,r]}}.call(this)}async function P(e,t=void 0){for await(let n of L.call(this,e,t))return!0;return!1}async function F(e,t=void 0){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);return!await P.call(this,async(...t)=>!await e(...t),t)}async function ee(e,t){for await(let n of L.call(this,e,t))return n}async function I(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);async function n(t,n){return await e(t,n),k}for await(let e of M.call(this,n,t));}function L(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);async function n(t,n){return await e(t,n)?t:k}return M.call(this,n,t)}var te=class extends a{constructor(){super(`reduce`),this.message=`Reduce of an empty stream requires an initial value`}};async function ne(e,t,r){var a;if(typeof e!=`function`)throw new i(`reducer`,[`Function`,`AsyncFunction`],e);r!=null&&u(r,`options`),r?.signal!=null&&c(r.signal,`options.signal`);let o=arguments.length>1;if(r!=null&&(a=r.signal)!=null&&a.aborted){let e=new s(void 0,{cause:r.signal.reason});throw this.once(`error`,()=>{}),await p(this.destroy(e)),e}let l=new n,m=l.signal;if(r!=null&&r.signal){let e={once:!0,[d]:this,[f]:!0};r.signal.addEventListener(`abort`,()=>l.abort(),e)}let h=!1;try{for await(let n of this){var g;if(h=!0,r!=null&&(g=r.signal)!=null&&g.aborted)throw new s;o?t=await e(t,n,{signal:m}):(t=n,o=!0)}if(!h&&!o)throw new te}finally{l.abort()}return t}async function re(e){e!=null&&u(e,`options`),e?.signal!=null&&c(e.signal,`options.signal`);let t=[];for await(let r of this){var n;if(e!=null&&(n=e.signal)!=null&&n.aborted)throw new s(void 0,{cause:e.signal.reason});y(t,r)}return t}function ie(e,t){let n=M.call(this,e,t);return async function*(){for await(let e of n)yield*e}.call(this)}function ae(e){if(e=S(e),C(e))return 0;if(e<0)throw new o(`number`,`>= 0`,e);return e}function oe(e,t=void 0){return t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),e=ae(e),async function*(){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)throw new s;for await(let n of this){var r;if(t!=null&&(r=t.signal)!=null&&r.aborted)throw new s;e--<=0&&(yield n)}}.call(this)}function se(e,t=void 0){return t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),e=ae(e),async function*(){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)throw new s;for await(let n of this){var r;if(t!=null&&(r=t.signal)!=null&&r.aborted)throw new s;if(e-- >0&&(yield n),e<=0)return}}.call(this)}t.exports.streamReturningOperators={asIndexedPairs:v(N,`readable.asIndexedPairs will be removed in a future version.`),drop:oe,filter:L,flatMap:ie,map:M,take:se,compose:j},t.exports.promiseReturningOperators={every:F,forEach:I,reduce:ne,toArray:re,some:P,find:ee}})),c5=n(((e,t)=>{var{ArrayPrototypePop:n,Promise:r}=F8(),{isIterable:i,isNodeStream:a,isWebStream:o}=U8(),{pipelineImpl:s}=a5(),{finished:c}=W8();l5();function l(...e){return new r((t,r)=>{let c,l,u=e[e.length-1];if(u&&typeof u==`object`&&!a(u)&&!i(u)&&!o(u)){let t=n(e);c=t.signal,l=t.end}s(e,(e,n)=>{e?r(e):t(n)},{signal:c,end:l})})}t.exports={finished:c,pipeline:l}})),l5=n(((e,t)=>{var{Buffer:n}=W4(),{ObjectDefineProperty:r,ObjectKeys:i,ReflectApply:a}=F8(),{promisify:{custom:o}}=B8(),{streamReturningOperators:s,promiseReturningOperators:c}=s5(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=L8(),u=o5(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=Y8(),{pipeline:p}=a5(),{destroyer:m}=G8(),h=W8(),g=c5(),_=U8(),v=t.exports=K8().Stream;v.isDestroyed=_.isDestroyed,v.isDisturbed=_.isDisturbed,v.isErrored=_.isErrored,v.isReadable=_.isReadable,v.isWritable=_.isWritable,v.Readable=$8();for(let e of i(s)){let t=s[e];function n(...e){if(new.target)throw l();return v.Readable.from(a(t,this,e))}r(n,`name`,{__proto__:null,value:t.name}),r(n,`length`,{__proto__:null,value:t.length}),r(v.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let e of i(c)){let t=c[e];function n(...e){if(new.target)throw l();return a(t,this,e)}r(n,`name`,{__proto__:null,value:t.name}),r(n,`length`,{__proto__:null,value:t.length}),r(v.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}v.Writable=e5(),v.Duplex=n5(),v.Transform=r5(),v.PassThrough=i5(),v.pipeline=p;var{addAbortSignal:y}=q8();v.addAbortSignal=y,v.finished=h,v.destroy=m,v.compose=u,v.setDefaultHighWaterMark=d,v.getDefaultHighWaterMark=f,r(v,`promises`,{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),r(p,o,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),r(h,o,{__proto__:null,enumerable:!0,get(){return g.finished}}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}})),u5=n(((e,t)=>{var n=l5(),r=c5(),i=n.Readable.destroy;t.exports=n.Readable,t.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,t.exports._isUint8Array=n._isUint8Array,t.exports.isDisturbed=n.isDisturbed,t.exports.isErrored=n.isErrored,t.exports.isReadable=n.isReadable,t.exports.Readable=n.Readable,t.exports.Writable=n.Writable,t.exports.Duplex=n.Duplex,t.exports.Transform=n.Transform,t.exports.PassThrough=n.PassThrough,t.exports.addAbortSignal=n.addAbortSignal,t.exports.finished=n.finished,t.exports.destroy=n.destroy,t.exports.destroy=i,t.exports.pipeline=n.pipeline,t.exports.compose=n.compose,Object.defineProperty(n,`promises`,{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=n.Stream,t.exports.default=t.exports}))(),d5=class extends u5.Readable{close(e=()=>null){try{super.destroy(),super.emit(`close`),e()}catch(t){e(new $(Q.EIO,t.toString()))}}},f5=class extends u5.Writable{close(e=()=>null){try{super.destroy(),super.emit(`close`),e()}catch(t){e(new $(Q.EIO,t.toString()))}}},p5=e({FileHandle:()=>_5,access:()=>U5,appendFile:()=>O5,chmod:()=>L5,chown:()=>F5,constants:()=>K4,copyFile:()=>K5,cp:()=>J5,exists:()=>y5,lchmod:()=>R5,lchown:()=>I5,link:()=>M5,lstat:()=>x5,lutimes:()=>B5,mkdir:()=>A5,mkdtemp:()=>G5,open:()=>T5,opendir:()=>q5,readFile:()=>E5,readdir:()=>j5,readlink:()=>P5,realpath:()=>V5,rename:()=>v5,rm:()=>W5,rmdir:()=>k5,stat:()=>b5,statfs:()=>Y5,symlink:()=>N5,truncate:()=>S5,unlink:()=>C5,utimes:()=>z5,watch:()=>H5,writeFile:()=>D5}),m5=W4(),h5=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},g5=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),_5=class{constructor(e){let t=typeof e!=`number`;this.fd=t?C6(e):e,this.file=t?e:w6(e)}async chown(e,t){await this.file.chown(e,t),z6(`change`,this.file.path)}async chmod(e){let t=P4(e,-1);if(t<0)throw new $(Q.EINVAL,`Invalid mode.`);await this.file.chmod(t),z6(`change`,this.file.path)}datasync(){return this.file.datasync()}sync(){return this.file.sync()}async truncate(e){if(e||=0,e<0)throw new $(Q.EINVAL);await this.file.truncate(e),z6(`change`,this.file.path)}async utimes(e,t){await this.file.utimes(F4(e),F4(t)),z6(`change`,this.file.path)}async appendFile(e,t={}){let n=L4(t,`utf8`,`a`,420);if(!o6(e6(n.flag)))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof e!=`string`&&!n.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let r=typeof e==`string`?m5.Buffer.from(e,n.encoding):e;await this.file.write(r,0,r.length),z6(`change`,this.file.path)}read(e,t,n,r){return isNaN(+r)&&(r=this.file.position),this.file.read(e,t,n,r)}async readFile(e){let t=L4(e,null,`r`,292);if(!r6(e6(t.flag)))throw new $(Q.EINVAL,`Flag passed must allow for reading.`);let{size:n}=await this.stat(),{buffer:r}=await this.file.read(new Uint8Array(n),0,n,0),i=m5.Buffer.from(r);return t.encoding?i.toString(t.encoding):i}readableWebStream(e={}){let t=async e=>{try{let t=64*1024,n=0,r=0,i=NaN;for(;i>0;){let a=await this.read(new Uint8Array(t),0,t,r);if(!a.bytesRead){e.close();return}if(e.enqueue(a.buffer.slice(0,a.bytesRead)),r+=a.bytesRead,++n>=1e7)throw new $(Q.EFBIG,`Too many iterations on readable stream`,this.file.path,`FileHandle.readableWebStream`);i=a.bytesRead}}catch(t){e.error(t)}},n=globalThis;if(!(`ReadableStream`in n))throw new $(Q.ENOSYS,`ReadableStream is missing on globalThis`);return new n.ReadableStream({start:t,type:e.type})}readLines(e){throw $.With(`ENOSYS`,this.file.path,`FileHandle.readLines`)}[Symbol.asyncDispose](){return this.close()}async stat(e){let t=await this.file.stat();if(!t.hasAccess(4))throw $.With(`EACCES`,this.file.path,`stat`);return e?.bigint?new Y3(t):t}async write(e,t,n,r){let i,a,o;if(typeof e==`string`){r=typeof t==`number`?t:null;let s=typeof n==`string`?n:`utf8`;a=0,i=m5.Buffer.from(e,s),o=i.length}else i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=t,o=n,r=typeof r==`number`?r:null;r??=this.file.position;let s=await this.file.write(i,a,o,r);return z6(`change`,this.file.path),{buffer:i,bytesWritten:s}}async writeFile(e,t={}){let n=L4(t,`utf8`,`w`,420);if(!i6(e6(n.flag)))throw new $(Q.EINVAL,`Flag passed must allow for writing.`);if(typeof e!=`string`&&!n.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let r=typeof e==`string`?m5.Buffer.from(e,n.encoding):e;await this.file.write(r,0,r.length,0),z6(`change`,this.file.path)}async close(){await this.file.close(),x6.delete(this.fd)}async writev(e,t){let n=0;for(let r of e)n+=(await this.write(r,0,r.length,t+n)).bytesWritten;return{bytesWritten:n,buffers:e}}async readv(e,t){let n=0;for(let r of e)n+=(await this.read(r,0,r.byteLength,t+n)).bytesRead;return{bytesRead:n,buffers:e}}createReadStream(e){let t=new d5({highWaterMark:e?.highWaterMark||64*1024,encoding:e.encoding,read:async e=>{try{let n=await this.read(new Uint8Array(e),0,e,this.file.position);t.push(n.bytesRead?n.buffer.slice(0,n.bytesRead):null),this.file.position+=n.bytesRead}catch(e){t.destroy(e)}}});return t.path=this.file.path,t}createWriteStream(e){let t=new f5({highWaterMark:e?.highWaterMark,encoding:e?.encoding,write:async(e,t,n)=>{try{let{bytesWritten:r}=await this.write(e,null,t);n(r==e.length?null:Error(`Failed to write full chunk`))}catch(e){n(e)}}});return t.path=this.file.path,t}};async function v5(e,t){e=I4(e),t=I4(t);let n=O6(e),r=O6(t);if(!(await b5(T4(e))).hasAccess(2))throw $.With(`EACCES`,e,`rename`);try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),z6(`rename`,e.toString());return}await D5(t,await E5(e)),await C5(e),z6(`rename`,e.toString())}catch(i){throw A6(i,{[n.path]:e,[r.path]:t})}}async function y5(e){try{let{fs:t,path:n}=O6(await V5(e));return await t.exists(n)}catch(e){if(e instanceof $&&e.code==`ENOENT`)return!1;throw e}}async function b5(e,t){e=I4(e);let{fs:n,path:r}=O6(await y5(e)?await V5(e):e);try{let i=await n.stat(r);if(!i.hasAccess(4))throw $.With(`EACCES`,e,`stat`);return t?.bigint?new Y3(i):i}catch(t){throw A6(t,{[r]:e})}}async function x5(e,t){e=I4(e);let{fs:n,path:r}=O6(e);try{let e=await n.stat(r);return t?.bigint?new Y3(e):e}catch(t){throw A6(t,{[r]:e})}}async function S5(e,t=0){let n={stack:[],error:void 0,hasError:!1};try{await h5(n,await T5(e,`r+`),!0).truncate(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=g5(n);e&&await e}}async function C5(e){e=I4(e);let{fs:t,path:n}=O6(e);try{if(!(await t.stat(n)).hasAccess(2))throw $.With(`EACCES`,n,`unlink`);await t.unlink(n),z6(`rename`,e.toString())}catch(t){throw A6(t,{[n]:e})}}async function w5(e,t,n=420,r){e=I4(e);let i=P4(n,420),a=e6(t);e=r&&await y5(e)?await V5(e):e;let{fs:o,path:s}=O6(e),c=await o.stat(s).catch(()=>null);if(!c){if(!i6(a)&&!o6(a)||a==`r+`)throw $.With(`ENOENT`,e,`_open`);let t=await o.stat(T4(s));if(!t.hasAccess(2))throw $.With(`EACCES`,T4(e),`_open`);if(!t.isDirectory())throw $.With(`ENOTDIR`,T4(e),`_open`);return new _5(await o.createFile(s,a,i))}if(!c.hasAccess(n6(a)))throw $.With(`EACCES`,e,`_open`);if(s6(a))throw $.With(`EEXIST`,e,`_open`);let l=new _5(await o.openFile(s,a));return a6(a)&&(await l.truncate(0),await l.sync()),l}async function T5(e,t=`r`,n=420){return await w5(e,t,n,!0)}async function E5(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=L4(t,null,`r`,420);return await h5(n,typeof e==`object`&&`fd`in e?e:await T5(e,r.flag,r.mode),!0).readFile(r)}catch(e){n.error=e,n.hasError=!0}finally{let e=g5(n);e&&await e}}async function D5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=L4(n,`utf8`,`w+`,420),a=h5(r,e instanceof _5?e:await T5(e.toString(),i.flag,i.mode),!0),o=t;if(typeof o!=`string`&&!(o instanceof Uint8Array))throw new $(Q.EINVAL,`Iterables and streams not supported`,a.file.path,`writeFile`);await a.writeFile(o,i)}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function O5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=L4(n,`utf8`,`a`,420);if(!o6(e6(i.flag)))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let a=typeof t==`string`?m5.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await h5(r,typeof e==`object`&&`fd`in e?e:await T5(e,i.flag,i.mode),!0).appendFile(a,i)}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function k5(e){e=I4(e),e=await y5(e)?await V5(e):e;let{fs:t,path:n}=O6(e);try{if(!(await t.stat(n)).hasAccess(2))throw $.With(`EACCES`,n,`rmdir`);await t.rmdir(n),z6(`rename`,e.toString())}catch(t){throw A6(t,{[n]:e})}}async function A5(e,t){t=typeof t==`object`?t:{mode:t};let n=P4(t?.mode,511);e=I4(e),e=await y5(e)?await V5(e):e;let{fs:r,path:i}=O6(e),a={[i]:e};try{if(!t?.recursive){if(!(await r.stat(T4(i))).hasAccess(2))throw $.With(`EACCES`,T4(i),`mkdir`);await r.mkdir(i,n),z6(`rename`,e.toString());return}let o=[];for(let t=i,n=e;!await r.exists(t);t=T4(t),n=T4(n))o.unshift(t),a[t]=n;for(let e of o){if(!(await r.stat(T4(e))).hasAccess(2))throw $.With(`EACCES`,T4(e),`mkdir`);await r.mkdir(e,n),z6(`rename`,e)}return o[0]}catch(e){throw A6(e,a)}}async function j5(e,t){if(e=I4(e),!(await b5(e)).hasAccess(4))throw $.With(`EACCES`,e,`readdir`);e=await y5(e)?await V5(e):e;let{fs:n,path:r}=O6(e),i;try{i=await n.readdir(r)}catch(t){throw A6(t,{[r]:e})}for(let t of T6.keys())if(t.startsWith(e)){let n=t.slice(e.length);if(n.includes(`/`)||n.length==0)continue;i.push(n)}let a=[];for(let n of i)a.push(typeof t==`object`&&t?.withFileTypes?new N8(n,await b5(w4(e,n))):n);return a}async function M5(e,t){if(e=I4(e),!(await b5(T4(e))).hasAccess(4))throw $.With(`EACCES`,T4(e),`link`);if(t=I4(t),!(await b5(T4(t))).hasAccess(2))throw $.With(`EACCES`,T4(t),`link`);let{fs:n,path:r}=O6(e),i=O6(t);if(n!=i.fs)throw $.With(`EXDEV`,t,`link`);try{if(!(await n.stat(r)).hasAccess(2))throw $.With(`EACCES`,r,`link`);return await n.link(r,i.path)}catch(n){throw A6(n,{[i.path]:t,[r]:e})}}async function N5(e,t,n=`file`){if(![`file`,`dir`,`junction`].includes(n))throw new $(Q.EINVAL,`Invalid symlink type: `+n);if(await y5(t))throw $.With(`EEXIST`,t.toString(),`symlink`);await D5(t,e.toString()),await(await w5(t,`r+`,420,!1)).file._setType(i3)}async function P5(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=await h5(n,await w5(I4(e),`r`,420,!1),!0).readFile(),i=typeof t==`object`?t?.encoding:t;return i==`buffer`?r:r.toString(i)}catch(e){n.error=e,n.hasError=!0}finally{let e=g5(n);e&&await e}}async function F5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await h5(r,await T5(e,`r+`),!0).chown(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function I5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await h5(r,await w5(e,`r+`,420,!1),!0).chown(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function L5(e,t){let n={stack:[],error:void 0,hasError:!1};try{await h5(n,await T5(e,`r+`),!0).chmod(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=g5(n);e&&await e}}async function R5(e,t){let n={stack:[],error:void 0,hasError:!1};try{await h5(n,await w5(e,`r+`,420,!1),!0).chmod(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=g5(n);e&&await e}}async function z5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await h5(r,await T5(e,`r+`),!0).utimes(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function B5(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await h5(r,await w5(e,`r+`,420,!1),!0).utimes(new Date(t),new Date(n))}catch(e){r.error=e,r.hasError=!0}finally{let e=g5(r);e&&await e}}async function V5(e,t){e=I4(e);let{base:n,dir:r}=D4(e),i=w4(r==`/`?`/`:await V5(r),n),{fs:a,path:o,mountPoint:s}=O6(i);try{return(await a.stat(o)).isSymbolicLink()?V5(s+await P5(i)):i}catch(e){throw A6(e,{[o]:i})}}function H5(e,t={}){return{[Symbol.asyncIterator](){let n=new P6(e.toString(),typeof t==`string`?{encoding:t}:t);function r(e){return function(){let t=Promise.withResolvers();return n.on(`change`,(n,r)=>{t.resolve({value:{eventType:n,filename:r},done:e})}),t.promise}}return{next:r(!1),return:r(!0),throw:r(!0)}}}}async function U5(e,t=0){if(!(await b5(e)).hasAccess(t))throw new $(Q.EACCES)}async function W5(e,t){switch(e=I4(e),(await b5(e)).mode&n3){case s3:if(t?.recursive)for(let n of await j5(e))await W5(w4(e,n),t);await k5(e);return;case a3:case i3:await C5(e);return;case o3:case c3:case l3:case r3:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}}async function G5(e,t){let n=typeof t==`object`?t?.encoding:t||`utf8`,r=`/tmp/${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await A5(r),n==`buffer`?m5.Buffer.from(r):r}async function K5(e,t,n){if(e=I4(e),t=I4(t),n&&n&1&&await y5(t))throw new $(Q.EEXIST,`Destination file already exists.`,t,`copyFile`);await D5(t,await E5(e)),z6(`rename`,t.toString())}async function q5(e,t){return e=I4(e),new P8(e)}async function J5(e,t,n){e=I4(e),t=I4(t);let r=await x5(e);if(n?.errorOnExist&&await y5(t))throw new $(Q.EEXIST,`Destination file or directory already exists.`,t,`cp`);switch(r.mode&n3){case s3:if(!n?.recursive)throw new $(Q.EISDIR,e+` is a directory (not copied)`,e,`cp`);await A5(t,{recursive:!0});for(let r of await j5(e,{withFileTypes:!0}))n.filter&&!n.filter(w4(e,r.name),w4(t,r.name))||await J5(w4(e,r.name),w4(t,r.name),n);break;case a3:case i3:await K5(e,t);break;case o3:case c3:case l3:case r3:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}n?.preserveTimestamps&&await z5(t,r.atime,r.mtime)}async function Y5(e,t){e=I4(e);let{fs:n}=O6(e);return M6(n,t?.bigint)}var X5=W4(),Z5=()=>{};function Q5(e,t,n=Z5){v5(e,t).then(()=>n()).catch(n)}function $5(e,t=Z5){y5(e).then(t).catch(()=>t(!1))}function e7(e,t,n=Z5){n=typeof t==`function`?t:n,b5(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function t7(e,t,n=Z5){n=typeof t==`function`?t:n,x5(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function n7(e,t=0,n=Z5){n=typeof t==`function`?t:n,S5(e,typeof t==`number`?t:0).then(()=>n()).catch(n)}function r7(e,t=Z5){C5(e).then(()=>t()).catch(t)}function i7(e,t,n,r=Z5){let i=P4(n,420);r=typeof n==`function`?n:r,T5(e,t,i).then(e=>r(void 0,e.fd)).catch(r)}function a7(e,t,n=Z5){n=typeof t==`function`?t:n,E5(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function o7(e,t,n,r=Z5){r=typeof n==`function`?n:r,D5(e,t,typeof n==`function`?null:n).then(()=>r(void 0)).catch(r)}function s7(e,t,n,r=Z5){let i=typeof n==`function`?void 0:n;r=typeof n==`function`?n:r,O5(e,t,i).then(()=>r()).catch(r)}function c7(e,t,n=Z5){n=typeof t==`function`?t:n,w6(e).stat().then(e=>n(void 0,typeof t==`object`&&t?.bigint?new Y3(e):e)).catch(n)}function l7(e,t=Z5){new _5(e).close().then(()=>t()).catch(t)}function u7(e,t,n=Z5){let r=typeof t==`number`?t:0;n=typeof t==`function`?t:n;let i=w6(e);if(r<0)throw new $(Q.EINVAL);i.truncate(r).then(()=>n()).catch(n)}function d7(e,t=Z5){w6(e).sync().then(()=>t()).catch(t)}function f7(e,t=Z5){w6(e).datasync().then(()=>t()).catch(t)}function p7(e,t,n,r,i,a=Z5){let o,s,c,l,u,d=new _5(e);if(typeof t==`string`){switch(u=`utf8`,typeof n){case`function`:a=n;break;case`number`:l=n,u=typeof r==`string`?r:`utf8`,a=typeof i==`function`?i:a;break;default:a=typeof r==`function`?r:typeof i==`function`?i:a,a(new $(Q.EINVAL,`Invalid arguments.`));return}o=X5.Buffer.from(t),s=0,c=o.length;let e=a;d.write(o,s,c,l).then(({bytesWritten:t})=>e(void 0,t,o.toString(u))).catch(e)}else{o=X5.Buffer.from(t.buffer),s=n,c=r,l=typeof i==`number`?i:null;let e=typeof i==`function`?i:a;d.write(o,s,c,l).then(({bytesWritten:t})=>e(void 0,t,o)).catch(e)}}function m7(e,t,n,r,i,a=Z5){new _5(e).read(t,n,r,i).then(({bytesRead:e,buffer:t})=>a(void 0,e,t)).catch(a)}function h7(e,t,n,r=Z5){new _5(e).chown(t,n).then(()=>r()).catch(r)}function g7(e,t,n){new _5(e).chmod(t).then(()=>n()).catch(n)}function _7(e,t,n,r=Z5){new _5(e).utimes(t,n).then(()=>r()).catch(r)}function v7(e,t=Z5){k5(e).then(()=>t()).catch(t)}function y7(e,t,n=Z5){A5(e,t).then(()=>n()).catch(n)}function b7(e,t,n=Z5){n=typeof t==`function`?t:n,j5(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function x7(e,t,n=Z5){M5(e,t).then(()=>n()).catch(n)}function S7(e,t,n,r=Z5){let i=typeof n==`string`?n:`file`;r=typeof n==`function`?n:r,N5(e,t,i).then(()=>r()).catch(r)}function C7(e,t,n=Z5){n=typeof t==`function`?t:n,P5(e).then(e=>n(void 0,e)).catch(n)}function w7(e,t,n,r=Z5){F5(e,t,n).then(()=>r()).catch(r)}function T7(e,t,n,r=Z5){I5(e,t,n).then(()=>r()).catch(r)}function E7(e,t,n=Z5){L5(e,t).then(()=>n()).catch(n)}function D7(e,t,n=Z5){R5(e,t).then(()=>n()).catch(n)}function O7(e,t,n,r=Z5){z5(e,t,n).then(()=>r()).catch(r)}function k7(e,t,n,r=Z5){B5(e,t,n).then(()=>r()).catch(r)}function A7(e,t,n=Z5){n=typeof t==`function`?t:n,V5(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function j7(e,t,n=Z5){let r=typeof t==`number`?t:4;n=typeof t==`function`?t:n,U5(e,r).then(()=>n()).catch(n)}var M7=new Map;function N7(e,t,n){let r=I4(e.toString()),i=typeof t==`function`?{}:t;if(typeof t==`function`&&(n=t),!n)throw new $(Q.EINVAL,`No listener specified`,e.toString(),`watchFile`);if(M7.has(r)){let e=M7.get(r);e&&e.listeners.add(n);return}let a=new F6(r,i);a.on(`change`,(e,t)=>{let n=M7.get(r);if(n)for(let r of n.listeners)r(e,t)}),M7.set(r,{watcher:a,listeners:new Set})}function P7(e,t=Z5){let n=I4(e.toString()),r=M7.get(n);r&&(t&&t!==Z5?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),M7.delete(n)))}function F7(e,t,n){let r=new P6(I4(e),typeof t==`object`?t:{});return n=typeof t==`function`?t:n,r.on(`change`,n||Z5),r}function I7(e,t){let n=typeof t==`object`?t:{encoding:t},r,i=new d5({highWaterMark:n.highWaterMark||64*1024,encoding:n.encoding||`utf8`,async read(t){try{r||=await T5(e,`r`,n?.mode);let a=await r.read(new Uint8Array(t),0,t,r.file.position);i.push(a.bytesRead?a.buffer.slice(0,a.bytesRead):null),r.file.position+=a.bytesRead,a.bytesRead||await r.close()}catch(e){await r?.close(),i.destroy(e)}},destroy(e,t){r?.close().then(()=>t(e)).catch(Z5)}});return i.path=e.toString(),i}function L7(e,t){let n=typeof t==`object`?t:{encoding:t},r,i=new f5({highWaterMark:n?.highWaterMark,async write(t,i,a){try{r||=await T5(e,`w`,n?.mode||438),await r.write(t,0,i),a(void 0)}catch(e){await r?.close(),a(e)}},destroy(e,t){t(e),r?.close().then(()=>t(e)).catch(t)},final(e){r?.close().then(()=>e()).catch(e)}});return i.path=e.toString(),i}function R7(e,t,n=Z5){n=typeof t==`function`?t:n,W5(e,typeof t==`function`?void 0:t).then(()=>n(void 0)).catch(n)}function z7(e,t,n=Z5){n=typeof t==`function`?t:n,G5(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function B7(e,t,n,r=Z5){r=typeof n==`function`?n:r,K5(e,t,typeof n==`function`?void 0:n).then(()=>r(void 0)).catch(r)}function V7(e,t,n,r=Z5){r=typeof n==`function`?n:r,new _5(e).readv(t,typeof n==`function`?void 0:n).then(({buffers:e,bytesRead:t})=>r(void 0,t,e)).catch(r)}function H7(e,t,n,r=Z5){r=typeof n==`function`?n:r,new _5(e).writev(t,typeof n==`function`?void 0:n).then(({buffers:e,bytesWritten:t})=>r(void 0,t,e)).catch(r)}function U7(e,t,n=Z5){n=typeof t==`function`?t:n,q5(e,typeof t==`function`?void 0:t).then(e=>n(void 0,e)).catch(n)}function W7(e,t,n,r=Z5){r=typeof n==`function`?n:r,J5(e,t,typeof n==`function`?void 0:n).then(()=>r(void 0)).catch(r)}function G7(e,t,n=Z5){n=typeof t==`function`?t:n,Y5(e,typeof t==`function`?void 0:t).then(e=>n(void 0,e)).catch(n)}async function K7(e,t){let n=await T5(e.toString(),`r`),r=await n.readFile();return await n.close(),new Blob([r],t)}var q7=e({BigIntStatsFs:()=>Q3,Dir:()=>P8,Dirent:()=>N8,ReadStream:()=>d5,Stats:()=>J3,StatsFs:()=>Z3,WriteStream:()=>f5,access:()=>j7,accessSync:()=>w8,appendFile:()=>s7,appendFileSync:()=>e8,chmod:()=>E7,chmodSync:()=>y8,chown:()=>w7,chownSync:()=>_8,close:()=>l7,closeSync:()=>n8,constants:()=>K4,copyFile:()=>B7,copyFileSync:()=>D8,cp:()=>W7,cpSync:()=>j8,createReadStream:()=>I7,createWriteStream:()=>L7,exists:()=>$5,existsSync:()=>U6,fchmod:()=>g7,fchmodSync:()=>l8,fchown:()=>h7,fchownSync:()=>c8,fdatasync:()=>f7,fdatasyncSync:()=>a8,fstat:()=>c7,fstatSync:()=>t8,fsync:()=>d7,fsyncSync:()=>i8,ftruncate:()=>u7,ftruncateSync:()=>r8,futimes:()=>_7,futimesSync:()=>u8,lchmod:()=>D7,lchmodSync:()=>b8,lchown:()=>T7,lchownSync:()=>v8,link:()=>x7,linkSync:()=>m8,lopenSync:()=>X6,lstat:()=>t7,lstatSync:()=>G6,lutimes:()=>k7,lutimesSync:()=>S8,mkdir:()=>y7,mkdirSync:()=>f8,mkdtemp:()=>z7,mkdtempSync:()=>E8,mount:()=>E6,mountObject:()=>j6,mounts:()=>T6,open:()=>i7,openAsBlob:()=>K7,openSync:()=>Y6,opendir:()=>U7,opendirSync:()=>A8,promises:()=>p5,read:()=>m7,readFile:()=>a7,readFileSync:()=>Q6,readSync:()=>s8,readdir:()=>b7,readdirSync:()=>p8,readlink:()=>C7,readlinkSync:()=>g8,readv:()=>V7,readvSync:()=>O8,realpath:()=>A7,realpathSync:()=>C8,rename:()=>Q5,renameSync:()=>H6,rm:()=>R7,rmSync:()=>T8,rmdir:()=>v7,rmdirSync:()=>d8,stat:()=>e7,statSync:()=>W6,statfs:()=>G7,statfsSync:()=>M8,symlink:()=>S7,symlinkSync:()=>h8,truncate:()=>n7,truncateSync:()=>K6,umount:()=>D6,unlink:()=>r7,unlinkSync:()=>q6,unwatchFile:()=>P7,utimes:()=>O7,utimesSync:()=>x8,watch:()=>F7,watchFile:()=>N7,write:()=>p7,writeFile:()=>o7,writeFileSync:()=>$6,writeSync:()=>o8,writev:()=>H7,writevSync:()=>k8});function J7(e){return B4(e)||R4(e)||e instanceof u6}async function Y7(e,t=0){if(typeof e!=`object`||!e)throw new $(Q.EINVAL,`Invalid options on mount configuration`);if(!J7(e))throw new $(Q.EINVAL,`Invalid mount configuration`);if(e instanceof u6)return e;R4(e)&&(e={backend:e});for(let[n,r]of Object.entries(e))if(n!=`backend`&&J7(r)){if(t>10)throw new $(Q.EINVAL,`Invalid configuration, too deep and possibly infinite`);e[n]=await Y7(r,++t)}let{backend:n}=e;if(!await n.isAvailable())throw new $(Q.EPERM,`Backend not available: `+n.name);await z4(n,e);let r=await n.create(e);return r._disableSync=e.disableAsyncCache||!1,await r.ready(),r}async function X7(e){if(!B4(e))throw TypeError(`Invalid single mount point configuration`);let t=await Y7(e);D6(`/`),E6(`/`,t)}var Z7=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Q7=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r});function $7(e){class t extends e{constructor(){super(...arguments),this._queue=[],this._isInitialized=!1}get _queueRunning(){return!!this._queue.length}queueDone(){return new Promise(e=>{let t=()=>this._queueRunning?setTimeout(t):e();t()})}async ready(){if(await super.ready(),!(this._isInitialized||this._disableSync)){this.checkSync(),await this._sync.ready();try{await this.crossCopy(`/`),this._isInitialized=!0}catch(e){throw this._isInitialized=!1,e}}}checkSync(e,t){if(this._disableSync)throw new $(Q.ENOTSUP,`Sync caching has been disabled for this async file system`,e,t);if(!this._sync)throw new $(Q.ENOTSUP,`No sync cache is attached to this async file system`,e,t)}renameSync(e,t){this.checkSync(e,`rename`),this._sync.renameSync(e,t),this.queue(`rename`,e,t)}statSync(e){return this.checkSync(e,`stat`),this._sync.statSync(e)}createFileSync(e,t,n){return this.checkSync(e,`createFile`),this._sync.createFileSync(e,t,n),this.queue(`createFile`,e,t,n),this.openFileSync(e,t)}openFileSync(e,t){this.checkSync(e,`openFile`);let n=this._sync.openFileSync(e,t),r=n.statSync(),i=new Uint8Array(r.size);return n.readSync(i),new l6(this,e,t,r,i)}unlinkSync(e){this.checkSync(e,`unlinkSync`),this._sync.unlinkSync(e),this.queue(`unlink`,e)}rmdirSync(e){this.checkSync(e,`rmdir`),this._sync.rmdirSync(e),this.queue(`rmdir`,e)}mkdirSync(e,t){this.checkSync(e,`mkdir`),this._sync.mkdirSync(e,t),this.queue(`mkdir`,e,t)}readdirSync(e){return this.checkSync(e,`readdir`),this._sync.readdirSync(e)}linkSync(e,t){this.checkSync(e,`link`),this._sync.linkSync(e,t),this.queue(`link`,e,t)}syncSync(e,t,n){this.checkSync(e,`sync`),this._sync.syncSync(e,t,n),this.queue(`sync`,e,t,n)}existsSync(e){return this.checkSync(e,`exists`),this._sync.existsSync(e)}async crossCopy(e){this.checkSync(e,`crossCopy`);let t=await this.stat(e);if(!t.isDirectory()){let n={stack:[],error:void 0,hasError:!1};try{let r=Z7(n,await this.openFile(e,e6(`r`)),!0),i=Z7(n,this._sync.createFileSync(e,e6(`w`),t.mode),!1),a=new Uint8Array(t.size);await r.read(a),i.writeSync(a,0,t.size);return}catch(e){n.error=e,n.hasError=!0}finally{let e=Q7(n);e&&await e}}if(e!==`/`){let t=await this.stat(e);this._sync.mkdirSync(e,t.mode)}let n=await this.readdir(e);for(let t of n)await this.crossCopy(w4(e,t))}async _next(){if(!this._queueRunning)return;let[e,...t]=this._queue.shift();await this[e](...t),await this._next()}queue(...e){this._queue.push(e),this._next()}}return t}(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),Symbol.dispose;function e9(e){switch(e.name){case`IndexSizeError`:case`HierarchyRequestError`:case`InvalidCharacterError`:case`InvalidStateError`:case`SyntaxError`:case`NamespaceError`:case`TypeMismatchError`:case`ConstraintError`:case`VersionError`:case`URLMismatchError`:case`InvalidNodeTypeError`:return`EINVAL`;case`WrongDocumentError`:return`EXDEV`;case`NoModificationAllowedError`:case`InvalidModificationError`:case`InvalidAccessError`:case`SecurityError`:case`NotAllowedError`:return`EACCES`;case`NotFoundError`:return`ENOENT`;case`NotSupportedError`:return`ENOTSUP`;case`InUseAttributeError`:return`EBUSY`;case`NetworkError`:return`ENETDOWN`;case`AbortError`:return`EINTR`;case`QuotaExceededError`:return`ENOSPC`;case`TimeoutError`:return`ETIMEDOUT`;case`ReadOnlyError`:return`EROFS`;case`DataCloneError`:case`EncodingError`:case`NotReadableError`:case`DataError`:case`TransactionInactiveError`:case`OperationError`:case`UnknownError`:default:return`EIO`}}function t9(e,t,n){if(e instanceof $)return e;let r=new $(e instanceof DOMException?Q[e9(e)]:Q.EIO,e.message,t,n);return r.stack=e.stack,r.cause=e.cause,r}function n9(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=t=>{t.preventDefault(),n(t9(e.error))}})}var r9=class extends _6{constructor(e,t){super(t),this.tx=e,this.store=t,this._idb=e.objectStore(t.name)}get(e){return n9(this._idb.get(e.toString()))}async set(e,t){await n9(this._idb.put(t,e.toString()))}remove(e){return n9(this._idb.delete(e.toString()))}async commit(){if(this.done)return;let{promise:e,resolve:t,reject:n}=Promise.withResolvers();return this.done=!0,this.tx.oncomplete=()=>t(),this.tx.onerror=()=>n(t9(this.tx.error)),this.tx.commit(),e}async abort(){if(this.done)return;this.done=!0;let{promise:e,resolve:t,reject:n}=Promise.withResolvers();return this.tx.onabort=()=>t(),this.tx.onerror=()=>n(t9(this.tx.error)),this.tx.abort(),e}};async function i9(e,t=globalThis.indexedDB){let n=t.open(e);return n.onupgradeneeded=()=>{let t=n.result;t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e)},await n9(n)}var a9=class{constructor(e){this.db=e}sync(){throw Error(`Method not implemented.`)}get name(){return this.db.name}clear(){return n9(this.db.transaction(this.name,`readwrite`).objectStore(this.name).clear())}clearSync(){throw $.With(`ENOSYS`,void 0,`IndexedDBStore.clearSync`)}transaction(){return new r9(this.db.transaction(this.name,`readwrite`),this)}};const o9={name:`IndexedDB`,options:{storeName:{type:`string`,required:!1,description:`The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name.`},idbFactory:{type:`object`,required:!1,description:`The IDBFactory to use. Defaults to globalThis.indexedDB.`}},async isAvailable(e=globalThis.indexedDB){try{return e instanceof IDBFactory?(await n9(e.open(`__zenfs_test`)),e.deleteDatabase(`__zenfs_test`),!0):!1}catch{return e.deleteDatabase(`__zenfs_test`),!1}},async create(e){let t=new a9(await i9(e.storeName||`zenfs`,e.idbFactory)),n=new($7(m6))(t);return e?.disableAsyncCache||(n._sync=b6.create({name:`idb-cache`})),n}},s9=async()=>(await X7({backend:o9}),q7);var c9,l9=async()=>(c9||=(await s9()).promises,c9),u9=class{onDidChangeFileEmitter=new ip;onDidChangeFile=this.onDidChangeFileEmitter.event;async stat(e){let t=await(await l9()).stat(encodeURI(e.path));return{...t,type:t.isDirectory()?bq.Directory:bq.File,ctime:t.ctime.getTime(),mtime:t.mtime.getTime()}}async readDirectory(e){let t=await l9(),n=await t.readdir(encodeURI(e.path));return await Promise.all(n.map(decodeURI).map(async n=>[n,await t.stat(encodeURI(D0(e.path,n))).then(e=>e.isDirectory()?bq.Directory:bq.File)]))}async createDirectory(e){await(await l9()).mkdir(encodeURI(e.path))}async readFile(e){return(await l9()).readFile(encodeURI(e.path))}async writeFile(e,t){await(await l9()).writeFile(encodeURI(e.path),t)}async delete(e){await(await l9()).unlink(encodeURI(e.path))}async rename(e,t,n){let r=await l9();if(!n.overwrite)try{throw await r.stat(encodeURI(t.path)),Error(`EEXIST`)}catch{}await r.rename(encodeURI(e.path),encodeURI(t.path))}async copy(e,t,n){let r=await l9();if(!n.overwrite)try{throw await r.stat(encodeURI(t.path)),Error(`EEXIST`)}catch(e){if(e.message!==`ENOENT`)throw e}await r.copyFile(encodeURI(e.path),encodeURI(t.path))}};const d9=Vg({initilize(){gv.register({id:`gitee`,name:`Gitee`,hostname:`gitee.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new y4(dv({getAccessToken:()=>e}),t,n)}),gv.register({id:`github`,name:`GitHub`,hostname:`github.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new y4(N$({getAccessToken:()=>e}),t,n)}),gv.register({id:`gitcode`,name:`GitCode`,hostname:`gitcode.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new y4(W$({getAccessToken:()=>e}),t,n)}),gv.register({id:`idb`,name:`IndexDB`,getProvider:()=>new u9})}});new URLSearchParams(window.location.search).has(`testMode`)&&oe(()=>import(`https://esm.sh/vconsole@latest`),[]).then(e=>{new e.default}),J.pluginService.use([Xg,K$,d9,e0,Z2,$2,kJ,v4,s4,o4,n4,$1,jJ]),J.taskService.start(),J.layoutService.renderLayout(document.getElementById(`root`));export{xP as $,cn as $t,PU as A,Fd as At,TH as B,as as Bt,eG as C,Zd as Ct,HU as D,Ud as Dt,LW as E,Kd as Et,WH as F,K as Ft,QP as G,bo as Gt,eH as H,rs as Ht,FH as I,uu as It,UP as J,Vn as Jt,qP as K,vo as Kt,MH as L,Nl as Lt,kU as M,hu as Mt,TU as N,q as Nt,BU as O,Id as Ot,XH as P,pu as Pt,EP as Q,hn as Qt,AH as R,Es as Rt,nG as S,Qd as St,zW as T,qd as Tt,JV as U,Jo as Ut,bH as V,is as Vt,qV as W,Bo as Wt,BP as X,jn as Xt,GP as Y,Pn as Yt,rP as Z,kn as Zt,TG as _,gh as _t,Sq as a,PN as at,sG as b,tf as bt,dq as c,LA as ct,wK as d,BE as dt,sn as en,wP as et,xK as f,FE as ft,EG as g,u_ as gt,NG as h,Kv as ht,xq as i,FN as it,jU as j,Ld as jt,IU as k,Rd as kt,VK as l,IA as lt,LG as m,Gv as mt,SJ as n,nP as nt,Cq as o,Jj as ot,GG as p,Uw as pt,KP as q,_o as qt,pJ as r,zN as rt,bq as s,_j as st,CJ as t,rn as tn,tP as tt,DK as u,FA as ut,fG as v,vp as vt,QW as w,Yd as wt,aG as x,$d as xt,lG as y,_f as yt,DH as z,Ss as zt};