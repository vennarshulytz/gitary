import { s as __toESM } from "./rolldown-runtime-p26lAE5v.js";
import { N as require_jsx_runtime, P as require_react, w as require_react_dom } from "./chakra-ui-NHV_-bGL.js";
import { k as require_lodash } from "./react-utils-DE1lHEcz.js";
import { t as require_client } from "./vendor-BKa3f7Q_.js";
import "./common-utils-BCFfNPpf.js";
import "./react-markdown-14W_w1u6.js";
import "./monaco-De2c8opW.js";
import "./remark-gfm-BxiTB6j-.js";
import { $n as require_markdown_it_task_lists, An as ur, Ct as _e, Gn as yt, J as Pm, Ot as b5, Pn as vM, Qn as require_pinyin, Vn as x5, Wn as y5, Xn as zi, er as require_markdown_it_multimd_table, et as R, kt as bm, m as Dt, nn as k5, qt as gt, un as m, w as If, wi as require_classnames } from "./app-DQCpdmdF.js";
import { a as o, s as y } from "./chunk-TZMSLE5B-d1425621-3HsUQrmO.js";
require_jsx_runtime();
require_react();
require_client();
require_react_dom();
require_lodash();
require_markdown_it_multimd_table();
require_markdown_it_task_lists();
require_classnames();
require_pinyin();
var Ft = function() {
	var e = /* @__PURE__ */ m(function(bt, _, x, v) {
		for (x = x || {}, v = bt.length; v--; x[bt[v]] = _);
		return x;
	}, "o"), t = [1, 24], s = [1, 25], o$1 = [1, 26], l = [1, 27], i = [1, 28], n = [1, 63], r = [1, 64], a = [1, 65], u = [1, 66], d = [1, 67], p = [1, 68], y$1 = [1, 69], E = [1, 29], O = [1, 30], S = [1, 31], P = [1, 32], M = [1, 33], U = [1, 34], H = [1, 35], q = [1, 36], G = [1, 37], K = [1, 38], J = [1, 39], Z = [1, 40], $ = [1, 41], tt = [1, 42], et = [1, 43], it = [1, 44], at = [1, 45], rt = [1, 46], nt = [1, 47], st = [1, 48], lt = [1, 50], ot = [1, 51], ct = [1, 52], ht = [1, 53], ut = [1, 54], dt = [1, 55], pt = [1, 56], ft = [1, 57], yt$1 = [1, 58], gt$1 = [1, 59], mt = [1, 60], Ct = [14, 42], Qt = [
		14,
		34,
		36,
		37,
		38,
		39,
		40,
		41,
		42,
		44,
		45,
		46,
		47,
		48,
		49,
		50,
		51,
		52,
		53,
		54,
		55,
		56,
		57,
		58,
		59,
		60,
		61,
		62,
		63,
		64,
		65,
		66,
		67,
		68,
		69,
		70,
		71,
		72,
		73,
		74
	], Ot = [
		12,
		14,
		34,
		36,
		37,
		38,
		39,
		40,
		41,
		42,
		44,
		45,
		46,
		47,
		48,
		49,
		50,
		51,
		52,
		53,
		54,
		55,
		56,
		57,
		58,
		59,
		60,
		61,
		62,
		63,
		64,
		65,
		66,
		67,
		68,
		69,
		70,
		71,
		72,
		73,
		74
	], k = [1, 82], A = [1, 83], C = [1, 84], w = [1, 85], T = [
		12,
		14,
		42
	], le = [
		12,
		14,
		33,
		42
	], Mt = [
		12,
		14,
		33,
		42,
		76,
		77,
		79,
		80
	], vt = [12, 33], Ht = [
		34,
		36,
		37,
		38,
		39,
		40,
		41,
		44,
		45,
		46,
		47,
		48,
		49,
		50,
		51,
		52,
		53,
		54,
		55,
		56,
		57,
		58,
		59,
		60,
		61,
		62,
		63,
		64,
		65,
		66,
		67,
		68,
		69,
		70,
		71,
		72,
		73,
		74
	], qt = {
		trace: /* @__PURE__ */ m(function() {}, "trace"),
		yy: {},
		symbols_: {
			error: 2,
			start: 3,
			mermaidDoc: 4,
			direction: 5,
			direction_tb: 6,
			direction_bt: 7,
			direction_rl: 8,
			direction_lr: 9,
			graphConfig: 10,
			C4_CONTEXT: 11,
			NEWLINE: 12,
			statements: 13,
			EOF: 14,
			C4_CONTAINER: 15,
			C4_COMPONENT: 16,
			C4_DYNAMIC: 17,
			C4_DEPLOYMENT: 18,
			otherStatements: 19,
			diagramStatements: 20,
			otherStatement: 21,
			title: 22,
			accDescription: 23,
			acc_title: 24,
			acc_title_value: 25,
			acc_descr: 26,
			acc_descr_value: 27,
			acc_descr_multiline_value: 28,
			boundaryStatement: 29,
			boundaryStartStatement: 30,
			boundaryStopStatement: 31,
			boundaryStart: 32,
			LBRACE: 33,
			ENTERPRISE_BOUNDARY: 34,
			attributes: 35,
			SYSTEM_BOUNDARY: 36,
			BOUNDARY: 37,
			CONTAINER_BOUNDARY: 38,
			NODE: 39,
			NODE_L: 40,
			NODE_R: 41,
			RBRACE: 42,
			diagramStatement: 43,
			PERSON: 44,
			PERSON_EXT: 45,
			SYSTEM: 46,
			SYSTEM_DB: 47,
			SYSTEM_QUEUE: 48,
			SYSTEM_EXT: 49,
			SYSTEM_EXT_DB: 50,
			SYSTEM_EXT_QUEUE: 51,
			CONTAINER: 52,
			CONTAINER_DB: 53,
			CONTAINER_QUEUE: 54,
			CONTAINER_EXT: 55,
			CONTAINER_EXT_DB: 56,
			CONTAINER_EXT_QUEUE: 57,
			COMPONENT: 58,
			COMPONENT_DB: 59,
			COMPONENT_QUEUE: 60,
			COMPONENT_EXT: 61,
			COMPONENT_EXT_DB: 62,
			COMPONENT_EXT_QUEUE: 63,
			REL: 64,
			BIREL: 65,
			REL_U: 66,
			REL_D: 67,
			REL_L: 68,
			REL_R: 69,
			REL_B: 70,
			REL_INDEX: 71,
			UPDATE_EL_STYLE: 72,
			UPDATE_REL_STYLE: 73,
			UPDATE_LAYOUT_CONFIG: 74,
			attribute: 75,
			STR: 76,
			STR_KEY: 77,
			STR_VALUE: 78,
			ATTRIBUTE: 79,
			ATTRIBUTE_EMPTY: 80,
			$accept: 0,
			$end: 1
		},
		terminals_: {
			2: "error",
			6: "direction_tb",
			7: "direction_bt",
			8: "direction_rl",
			9: "direction_lr",
			11: "C4_CONTEXT",
			12: "NEWLINE",
			14: "EOF",
			15: "C4_CONTAINER",
			16: "C4_COMPONENT",
			17: "C4_DYNAMIC",
			18: "C4_DEPLOYMENT",
			22: "title",
			23: "accDescription",
			24: "acc_title",
			25: "acc_title_value",
			26: "acc_descr",
			27: "acc_descr_value",
			28: "acc_descr_multiline_value",
			33: "LBRACE",
			34: "ENTERPRISE_BOUNDARY",
			36: "SYSTEM_BOUNDARY",
			37: "BOUNDARY",
			38: "CONTAINER_BOUNDARY",
			39: "NODE",
			40: "NODE_L",
			41: "NODE_R",
			42: "RBRACE",
			44: "PERSON",
			45: "PERSON_EXT",
			46: "SYSTEM",
			47: "SYSTEM_DB",
			48: "SYSTEM_QUEUE",
			49: "SYSTEM_EXT",
			50: "SYSTEM_EXT_DB",
			51: "SYSTEM_EXT_QUEUE",
			52: "CONTAINER",
			53: "CONTAINER_DB",
			54: "CONTAINER_QUEUE",
			55: "CONTAINER_EXT",
			56: "CONTAINER_EXT_DB",
			57: "CONTAINER_EXT_QUEUE",
			58: "COMPONENT",
			59: "COMPONENT_DB",
			60: "COMPONENT_QUEUE",
			61: "COMPONENT_EXT",
			62: "COMPONENT_EXT_DB",
			63: "COMPONENT_EXT_QUEUE",
			64: "REL",
			65: "BIREL",
			66: "REL_U",
			67: "REL_D",
			68: "REL_L",
			69: "REL_R",
			70: "REL_B",
			71: "REL_INDEX",
			72: "UPDATE_EL_STYLE",
			73: "UPDATE_REL_STYLE",
			74: "UPDATE_LAYOUT_CONFIG",
			76: "STR",
			77: "STR_KEY",
			78: "STR_VALUE",
			79: "ATTRIBUTE",
			80: "ATTRIBUTE_EMPTY"
		},
		productions_: [
			0,
			[3, 1],
			[3, 1],
			[5, 1],
			[5, 1],
			[5, 1],
			[5, 1],
			[4, 1],
			[10, 4],
			[10, 4],
			[10, 4],
			[10, 4],
			[10, 4],
			[13, 1],
			[13, 1],
			[13, 2],
			[19, 1],
			[19, 2],
			[19, 3],
			[21, 1],
			[21, 1],
			[21, 2],
			[21, 2],
			[21, 1],
			[29, 3],
			[30, 3],
			[30, 3],
			[30, 4],
			[32, 2],
			[32, 2],
			[32, 2],
			[32, 2],
			[32, 2],
			[32, 2],
			[32, 2],
			[31, 1],
			[20, 1],
			[20, 2],
			[20, 3],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 1],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[43, 2],
			[35, 1],
			[35, 2],
			[75, 1],
			[75, 2],
			[75, 1],
			[75, 1]
		],
		performAction: /* @__PURE__ */ m(function(_, x, v, m$1, R$1, h, Rt) {
			var f = h.length - 1;
			switch (R$1) {
				case 3:
					m$1.setDirection("TB");
					break;
				case 4:
					m$1.setDirection("BT");
					break;
				case 5:
					m$1.setDirection("RL");
					break;
				case 6:
					m$1.setDirection("LR");
					break;
				case 8:
				case 9:
				case 10:
				case 11:
				case 12:
					m$1.setC4Type(h[f - 3]);
					break;
				case 19:
					m$1.setTitle(h[f].substring(6)), this.$ = h[f].substring(6);
					break;
				case 20:
					m$1.setAccDescription(h[f].substring(15)), this.$ = h[f].substring(15);
					break;
				case 21:
					this.$ = h[f].trim(), m$1.setTitle(this.$);
					break;
				case 22:
				case 23:
					this.$ = h[f].trim(), m$1.setAccDescription(this.$);
					break;
				case 28:
					h[f].splice(2, 0, "ENTERPRISE"), m$1.addPersonOrSystemBoundary(...h[f]), this.$ = h[f];
					break;
				case 29:
					h[f].splice(2, 0, "SYSTEM"), m$1.addPersonOrSystemBoundary(...h[f]), this.$ = h[f];
					break;
				case 30:
					m$1.addPersonOrSystemBoundary(...h[f]), this.$ = h[f];
					break;
				case 31:
					h[f].splice(2, 0, "CONTAINER"), m$1.addContainerBoundary(...h[f]), this.$ = h[f];
					break;
				case 32:
					m$1.addDeploymentNode("node", ...h[f]), this.$ = h[f];
					break;
				case 33:
					m$1.addDeploymentNode("nodeL", ...h[f]), this.$ = h[f];
					break;
				case 34:
					m$1.addDeploymentNode("nodeR", ...h[f]), this.$ = h[f];
					break;
				case 35:
					m$1.popBoundaryParseStack();
					break;
				case 39:
					m$1.addPersonOrSystem("person", ...h[f]), this.$ = h[f];
					break;
				case 40:
					m$1.addPersonOrSystem("external_person", ...h[f]), this.$ = h[f];
					break;
				case 41:
					m$1.addPersonOrSystem("system", ...h[f]), this.$ = h[f];
					break;
				case 42:
					m$1.addPersonOrSystem("system_db", ...h[f]), this.$ = h[f];
					break;
				case 43:
					m$1.addPersonOrSystem("system_queue", ...h[f]), this.$ = h[f];
					break;
				case 44:
					m$1.addPersonOrSystem("external_system", ...h[f]), this.$ = h[f];
					break;
				case 45:
					m$1.addPersonOrSystem("external_system_db", ...h[f]), this.$ = h[f];
					break;
				case 46:
					m$1.addPersonOrSystem("external_system_queue", ...h[f]), this.$ = h[f];
					break;
				case 47:
					m$1.addContainer("container", ...h[f]), this.$ = h[f];
					break;
				case 48:
					m$1.addContainer("container_db", ...h[f]), this.$ = h[f];
					break;
				case 49:
					m$1.addContainer("container_queue", ...h[f]), this.$ = h[f];
					break;
				case 50:
					m$1.addContainer("external_container", ...h[f]), this.$ = h[f];
					break;
				case 51:
					m$1.addContainer("external_container_db", ...h[f]), this.$ = h[f];
					break;
				case 52:
					m$1.addContainer("external_container_queue", ...h[f]), this.$ = h[f];
					break;
				case 53:
					m$1.addComponent("component", ...h[f]), this.$ = h[f];
					break;
				case 54:
					m$1.addComponent("component_db", ...h[f]), this.$ = h[f];
					break;
				case 55:
					m$1.addComponent("component_queue", ...h[f]), this.$ = h[f];
					break;
				case 56:
					m$1.addComponent("external_component", ...h[f]), this.$ = h[f];
					break;
				case 57:
					m$1.addComponent("external_component_db", ...h[f]), this.$ = h[f];
					break;
				case 58:
					m$1.addComponent("external_component_queue", ...h[f]), this.$ = h[f];
					break;
				case 60:
					m$1.addRel("rel", ...h[f]), this.$ = h[f];
					break;
				case 61:
					m$1.addRel("birel", ...h[f]), this.$ = h[f];
					break;
				case 62:
					m$1.addRel("rel_u", ...h[f]), this.$ = h[f];
					break;
				case 63:
					m$1.addRel("rel_d", ...h[f]), this.$ = h[f];
					break;
				case 64:
					m$1.addRel("rel_l", ...h[f]), this.$ = h[f];
					break;
				case 65:
					m$1.addRel("rel_r", ...h[f]), this.$ = h[f];
					break;
				case 66:
					m$1.addRel("rel_b", ...h[f]), this.$ = h[f];
					break;
				case 67:
					h[f].splice(0, 1), m$1.addRel("rel", ...h[f]), this.$ = h[f];
					break;
				case 68:
					m$1.updateElStyle("update_el_style", ...h[f]), this.$ = h[f];
					break;
				case 69:
					m$1.updateRelStyle("update_rel_style", ...h[f]), this.$ = h[f];
					break;
				case 70:
					m$1.updateLayoutConfig("update_layout_config", ...h[f]), this.$ = h[f];
					break;
				case 71:
					this.$ = [h[f]];
					break;
				case 72:
					h[f].unshift(h[f - 1]), this.$ = h[f];
					break;
				case 73:
				case 75:
					this.$ = h[f].trim();
					break;
				case 74:
					let Et = {};
					Et[h[f - 1].trim()] = h[f].trim(), this.$ = Et;
					break;
				case 76:
					this.$ = "";
					break;
			}
		}, "anonymous"),
		table: [
			{
				3: 1,
				4: 2,
				5: 3,
				6: [1, 5],
				7: [1, 6],
				8: [1, 7],
				9: [1, 8],
				10: 4,
				11: [1, 9],
				15: [1, 10],
				16: [1, 11],
				17: [1, 12],
				18: [1, 13]
			},
			{ 1: [3] },
			{ 1: [2, 1] },
			{ 1: [2, 2] },
			{ 1: [2, 7] },
			{ 1: [2, 3] },
			{ 1: [2, 4] },
			{ 1: [2, 5] },
			{ 1: [2, 6] },
			{ 12: [1, 14] },
			{ 12: [1, 15] },
			{ 12: [1, 16] },
			{ 12: [1, 17] },
			{ 12: [1, 18] },
			{
				13: 19,
				19: 20,
				20: 21,
				21: 22,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{
				13: 70,
				19: 20,
				20: 21,
				21: 22,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{
				13: 71,
				19: 20,
				20: 21,
				21: 22,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{
				13: 72,
				19: 20,
				20: 21,
				21: 22,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{
				13: 73,
				19: 20,
				20: 21,
				21: 22,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{ 14: [1, 74] },
			e(Ct, [2, 13], {
				43: 23,
				29: 49,
				30: 61,
				32: 62,
				20: 75,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			}),
			e(Ct, [2, 14]),
			e(Qt, [2, 16], { 12: [1, 76] }),
			e(Ct, [2, 36], { 12: [1, 77] }),
			e(Ot, [2, 19]),
			e(Ot, [2, 20]),
			{ 25: [1, 78] },
			{ 27: [1, 79] },
			e(Ot, [2, 23]),
			{
				35: 80,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 86,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 87,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 88,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 89,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 90,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 91,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 92,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 93,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 94,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 95,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 96,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 97,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 98,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 99,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 100,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 101,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 102,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 103,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 104,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			e(T, [2, 59]),
			{
				35: 105,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 106,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 107,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 108,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 109,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 110,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 111,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 112,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 113,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 114,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 115,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				20: 116,
				29: 49,
				30: 61,
				32: 62,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				43: 23,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			},
			{
				12: [1, 118],
				33: [1, 117]
			},
			{
				35: 119,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 120,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 121,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 122,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 123,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 124,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{
				35: 125,
				75: 81,
				76: k,
				77: A,
				79: C,
				80: w
			},
			{ 14: [1, 126] },
			{ 14: [1, 127] },
			{ 14: [1, 128] },
			{ 14: [1, 129] },
			{ 1: [2, 8] },
			e(Ct, [2, 15]),
			e(Qt, [2, 17], {
				21: 22,
				19: 130,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i
			}),
			e(Ct, [2, 37], {
				19: 20,
				20: 21,
				21: 22,
				43: 23,
				29: 49,
				30: 61,
				32: 62,
				13: 131,
				22: t,
				23: s,
				24: o$1,
				26: l,
				28: i,
				34: n,
				36: r,
				37: a,
				38: u,
				39: d,
				40: p,
				41: y$1,
				44: E,
				45: O,
				46: S,
				47: P,
				48: M,
				49: U,
				50: H,
				51: q,
				52: G,
				53: K,
				54: J,
				55: Z,
				56: $,
				57: tt,
				58: et,
				59: it,
				60: at,
				61: rt,
				62: nt,
				63: st,
				64: lt,
				65: ot,
				66: ct,
				67: ht,
				68: ut,
				69: dt,
				70: pt,
				71: ft,
				72: yt$1,
				73: gt$1,
				74: mt
			}),
			e(Ot, [2, 21]),
			e(Ot, [2, 22]),
			e(T, [2, 39]),
			e(le, [2, 71], {
				75: 81,
				35: 132,
				76: k,
				77: A,
				79: C,
				80: w
			}),
			e(Mt, [2, 73]),
			{ 78: [1, 133] },
			e(Mt, [2, 75]),
			e(Mt, [2, 76]),
			e(T, [2, 40]),
			e(T, [2, 41]),
			e(T, [2, 42]),
			e(T, [2, 43]),
			e(T, [2, 44]),
			e(T, [2, 45]),
			e(T, [2, 46]),
			e(T, [2, 47]),
			e(T, [2, 48]),
			e(T, [2, 49]),
			e(T, [2, 50]),
			e(T, [2, 51]),
			e(T, [2, 52]),
			e(T, [2, 53]),
			e(T, [2, 54]),
			e(T, [2, 55]),
			e(T, [2, 56]),
			e(T, [2, 57]),
			e(T, [2, 58]),
			e(T, [2, 60]),
			e(T, [2, 61]),
			e(T, [2, 62]),
			e(T, [2, 63]),
			e(T, [2, 64]),
			e(T, [2, 65]),
			e(T, [2, 66]),
			e(T, [2, 67]),
			e(T, [2, 68]),
			e(T, [2, 69]),
			e(T, [2, 70]),
			{
				31: 134,
				42: [1, 135]
			},
			{ 12: [1, 136] },
			{ 33: [1, 137] },
			e(vt, [2, 28]),
			e(vt, [2, 29]),
			e(vt, [2, 30]),
			e(vt, [2, 31]),
			e(vt, [2, 32]),
			e(vt, [2, 33]),
			e(vt, [2, 34]),
			{ 1: [2, 9] },
			{ 1: [2, 10] },
			{ 1: [2, 11] },
			{ 1: [2, 12] },
			e(Qt, [2, 18]),
			e(Ct, [2, 38]),
			e(le, [2, 72]),
			e(Mt, [2, 74]),
			e(T, [2, 24]),
			e(T, [2, 35]),
			e(Ht, [2, 25]),
			e(Ht, [2, 26], { 12: [1, 138] }),
			e(Ht, [2, 27])
		],
		defaultActions: {
			2: [2, 1],
			3: [2, 2],
			4: [2, 7],
			5: [2, 3],
			6: [2, 4],
			7: [2, 5],
			8: [2, 6],
			74: [2, 8],
			126: [2, 9],
			127: [2, 10],
			128: [2, 11],
			129: [2, 12]
		},
		parseError: /* @__PURE__ */ m(function(_, x) {
			if (x.recoverable) this.trace(_);
			else {
				var v = new Error(_);
				throw v.hash = x, v;
			}
		}, "parseError"),
		parse: /* @__PURE__ */ m(function(_) {
			var x = this, v = [0], m$1 = [], R$1 = [null], h = [], Rt = this.table, f = "", Et = 0, oe = 0, we = 2, ce = 1, Te = h.slice.call(arguments, 1), D = Object.create(this.lexer), kt = { yy: {} };
			for (var Gt in this.yy) Object.prototype.hasOwnProperty.call(this.yy, Gt) && (kt.yy[Gt] = this.yy[Gt]);
			D.setInput(_, kt.yy), kt.yy.lexer = D, kt.yy.parser = this, typeof D.yylloc > "u" && (D.yylloc = {});
			var Kt = D.yylloc;
			h.push(Kt);
			var Oe = D.options && D.options.ranges;
			typeof kt.yy.parseError == "function" ? this.parseError = kt.yy.parseError : this.parseError = Object.getPrototypeOf(this).parseError;
			function Re(L) {
				v.length = v.length - 2 * L, R$1.length = R$1.length - L, h.length = h.length - L;
			}
			m(Re, "popStack");
			function he() {
				var L;
				return L = m$1.pop() || D.lex() || ce, typeof L != "number" && (L instanceof Array && (m$1 = L, L = m$1.pop()), L = x.symbols_[L] || L), L;
			}
			m(he, "lex");
			for (var I, At, N, Jt, wt = {}, Nt, W, ue, Yt;;) {
				if (At = v[v.length - 1], this.defaultActions[At] ? N = this.defaultActions[At] : ((I === null || typeof I > "u") && (I = he()), N = Rt[At] && Rt[At][I]), typeof N > "u" || !N.length || !N[0]) {
					var Zt = "";
					Yt = [];
					for (Nt in Rt[At]) this.terminals_[Nt] && Nt > we && Yt.push("'" + this.terminals_[Nt] + "'");
					D.showPosition ? Zt = "Parse error on line " + (Et + 1) + `:
` + D.showPosition() + `
Expecting ` + Yt.join(", ") + ", got '" + (this.terminals_[I] || I) + "'" : Zt = "Parse error on line " + (Et + 1) + ": Unexpected " + (I == ce ? "end of input" : "'" + (this.terminals_[I] || I) + "'"), this.parseError(Zt, {
						text: D.match,
						token: this.terminals_[I] || I,
						line: D.yylineno,
						loc: Kt,
						expected: Yt
					});
				}
				if (N[0] instanceof Array && N.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + At + ", token: " + I);
				switch (N[0]) {
					case 1:
						v.push(I), R$1.push(D.yytext), h.push(D.yylloc), v.push(N[1]), I = null, oe = D.yyleng, f = D.yytext, Et = D.yylineno, Kt = D.yylloc;
						break;
					case 2:
						if (W = this.productions_[N[1]][1], wt.$ = R$1[R$1.length - W], wt._$ = {
							first_line: h[h.length - (W || 1)].first_line,
							last_line: h[h.length - 1].last_line,
							first_column: h[h.length - (W || 1)].first_column,
							last_column: h[h.length - 1].last_column
						}, Oe && (wt._$.range = [h[h.length - (W || 1)].range[0], h[h.length - 1].range[1]]), Jt = this.performAction.apply(wt, [
							f,
							oe,
							Et,
							kt.yy,
							N[1],
							R$1,
							h
						].concat(Te)), typeof Jt < "u") return Jt;
						W && (v = v.slice(0, -1 * W * 2), R$1 = R$1.slice(0, -1 * W), h = h.slice(0, -1 * W)), v.push(this.productions_[N[1]][0]), R$1.push(wt.$), h.push(wt._$), ue = Rt[v[v.length - 2]][v[v.length - 1]], v.push(ue);
						break;
					case 3: return !0;
				}
			}
			return !0;
		}, "parse")
	};
	qt.lexer = /* @__PURE__ */ function() {
		return {
			EOF: 1,
			parseError: /* @__PURE__ */ m(function(x, v) {
				if (this.yy.parser) this.yy.parser.parseError(x, v);
				else throw new Error(x);
			}, "parseError"),
			setInput: /* @__PURE__ */ m(function(_, x) {
				return this.yy = x || this.yy || {}, this._input = _, this._more = this._backtrack = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
					first_line: 1,
					first_column: 0,
					last_line: 1,
					last_column: 0
				}, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this;
			}, "setInput"),
			input: /* @__PURE__ */ m(function() {
				var _ = this._input[0];
				this.yytext += _, this.yyleng++, this.offset++, this.match += _, this.matched += _;
				return _.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), _;
			}, "input"),
			unput: /* @__PURE__ */ m(function(_) {
				var x = _.length, v = _.split(/(?:\r\n?|\n)/g);
				this._input = _ + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - x), this.offset -= x;
				var m$1 = this.match.split(/(?:\r\n?|\n)/g);
				this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), v.length - 1 && (this.yylineno -= v.length - 1);
				var R$1 = this.yylloc.range;
				return this.yylloc = {
					first_line: this.yylloc.first_line,
					last_line: this.yylineno + 1,
					first_column: this.yylloc.first_column,
					last_column: v ? (v.length === m$1.length ? this.yylloc.first_column : 0) + m$1[m$1.length - v.length].length - v[0].length : this.yylloc.first_column - x
				}, this.options.ranges && (this.yylloc.range = [R$1[0], R$1[0] + this.yyleng - x]), this.yyleng = this.yytext.length, this;
			}, "unput"),
			more: /* @__PURE__ */ m(function() {
				return this._more = !0, this;
			}, "more"),
			reject: /* @__PURE__ */ m(function() {
				if (this.options.backtrack_lexer) this._backtrack = !0;
				else return this.parseError("Lexical error on line " + (this.yylineno + 1) + `. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
` + this.showPosition(), {
					text: "",
					token: null,
					line: this.yylineno
				});
				return this;
			}, "reject"),
			less: /* @__PURE__ */ m(function(_) {
				this.unput(this.match.slice(_));
			}, "less"),
			pastInput: /* @__PURE__ */ m(function() {
				var _ = this.matched.substr(0, this.matched.length - this.match.length);
				return (_.length > 20 ? "..." : "") + _.substr(-20).replace(/\n/g, "");
			}, "pastInput"),
			upcomingInput: /* @__PURE__ */ m(function() {
				var _ = this.match;
				return _.length < 20 && (_ += this._input.substr(0, 20 - _.length)), (_.substr(0, 20) + (_.length > 20 ? "..." : "")).replace(/\n/g, "");
			}, "upcomingInput"),
			showPosition: /* @__PURE__ */ m(function() {
				var _ = this.pastInput(), x = new Array(_.length + 1).join("-");
				return _ + this.upcomingInput() + `
` + x + "^";
			}, "showPosition"),
			test_match: /* @__PURE__ */ m(function(_, x) {
				var v, m$1, R$1;
				if (this.options.backtrack_lexer && (R$1 = {
					yylineno: this.yylineno,
					yylloc: {
						first_line: this.yylloc.first_line,
						last_line: this.last_line,
						first_column: this.yylloc.first_column,
						last_column: this.yylloc.last_column
					},
					yytext: this.yytext,
					match: this.match,
					matches: this.matches,
					matched: this.matched,
					yyleng: this.yyleng,
					offset: this.offset,
					_more: this._more,
					_input: this._input,
					yy: this.yy,
					conditionStack: this.conditionStack.slice(0),
					done: this.done
				}, this.options.ranges && (R$1.yylloc.range = this.yylloc.range.slice(0))), m$1 = _[0].match(/(?:\r\n?|\n).*/g), m$1 && (this.yylineno += m$1.length), this.yylloc = {
					first_line: this.yylloc.last_line,
					last_line: this.yylineno + 1,
					first_column: this.yylloc.last_column,
					last_column: m$1 ? m$1[m$1.length - 1].length - m$1[m$1.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + _[0].length
				}, this.yytext += _[0], this.match += _[0], this.matches = _, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._backtrack = !1, this._input = this._input.slice(_[0].length), this.matched += _[0], v = this.performAction.call(this, this.yy, this, x, this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), v) return v;
				if (this._backtrack) {
					for (var h in R$1) this[h] = R$1[h];
					return !1;
				}
				return !1;
			}, "test_match"),
			next: /* @__PURE__ */ m(function() {
				if (this.done) return this.EOF;
				this._input || (this.done = !0);
				var _, x, v, m$1;
				this._more || (this.yytext = "", this.match = "");
				for (var R$1 = this._currentRules(), h = 0; h < R$1.length; h++) if (v = this._input.match(this.rules[R$1[h]]), v && (!x || v[0].length > x[0].length)) {
					if (x = v, m$1 = h, this.options.backtrack_lexer) {
						if (_ = this.test_match(v, R$1[h]), _ !== !1) return _;
						if (this._backtrack) {
							x = !1;
							continue;
						} else return !1;
					} else if (!this.options.flex) break;
				}
				return x ? (_ = this.test_match(x, R$1[m$1]), _ !== !1 ? _ : !1) : this._input === "" ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + `. Unrecognized text.
` + this.showPosition(), {
					text: "",
					token: null,
					line: this.yylineno
				});
			}, "next"),
			lex: /* @__PURE__ */ m(function() {
				return this.next() || this.lex();
			}, "lex"),
			begin: /* @__PURE__ */ m(function(x) {
				this.conditionStack.push(x);
			}, "begin"),
			popState: /* @__PURE__ */ m(function() {
				return this.conditionStack.length - 1 > 0 ? this.conditionStack.pop() : this.conditionStack[0];
			}, "popState"),
			_currentRules: /* @__PURE__ */ m(function() {
				return this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1] ? this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules : this.conditions.INITIAL.rules;
			}, "_currentRules"),
			topState: /* @__PURE__ */ m(function(x) {
				return x = this.conditionStack.length - 1 - Math.abs(x || 0), x >= 0 ? this.conditionStack[x] : "INITIAL";
			}, "topState"),
			pushState: /* @__PURE__ */ m(function(x) {
				this.begin(x);
			}, "pushState"),
			stateStackSize: /* @__PURE__ */ m(function() {
				return this.conditionStack.length;
			}, "stateStackSize"),
			options: {},
			performAction: /* @__PURE__ */ m(function(x, v, m$1, R$1) {
				switch (m$1) {
					case 0: return 6;
					case 1: return 7;
					case 2: return 8;
					case 3: return 9;
					case 4: return 22;
					case 5: return 23;
					case 6: return this.begin("acc_title"), 24;
					case 7: return this.popState(), "acc_title_value";
					case 8: return this.begin("acc_descr"), 26;
					case 9: return this.popState(), "acc_descr_value";
					case 10:
						this.begin("acc_descr_multiline");
						break;
					case 11:
						this.popState();
						break;
					case 12: return "acc_descr_multiline_value";
					case 13: break;
					case 14:
						c;
						break;
					case 15: return 12;
					case 16: break;
					case 17: return 11;
					case 18: return 15;
					case 19: return 16;
					case 20: return 17;
					case 21: return 18;
					case 22: return this.begin("person_ext"), 45;
					case 23: return this.begin("person"), 44;
					case 24: return this.begin("system_ext_queue"), 51;
					case 25: return this.begin("system_ext_db"), 50;
					case 26: return this.begin("system_ext"), 49;
					case 27: return this.begin("system_queue"), 48;
					case 28: return this.begin("system_db"), 47;
					case 29: return this.begin("system"), 46;
					case 30: return this.begin("boundary"), 37;
					case 31: return this.begin("enterprise_boundary"), 34;
					case 32: return this.begin("system_boundary"), 36;
					case 33: return this.begin("container_ext_queue"), 57;
					case 34: return this.begin("container_ext_db"), 56;
					case 35: return this.begin("container_ext"), 55;
					case 36: return this.begin("container_queue"), 54;
					case 37: return this.begin("container_db"), 53;
					case 38: return this.begin("container"), 52;
					case 39: return this.begin("container_boundary"), 38;
					case 40: return this.begin("component_ext_queue"), 63;
					case 41: return this.begin("component_ext_db"), 62;
					case 42: return this.begin("component_ext"), 61;
					case 43: return this.begin("component_queue"), 60;
					case 44: return this.begin("component_db"), 59;
					case 45: return this.begin("component"), 58;
					case 46: return this.begin("node"), 39;
					case 47: return this.begin("node"), 39;
					case 48: return this.begin("node_l"), 40;
					case 49: return this.begin("node_r"), 41;
					case 50: return this.begin("rel"), 64;
					case 51: return this.begin("birel"), 65;
					case 52: return this.begin("rel_u"), 66;
					case 53: return this.begin("rel_u"), 66;
					case 54: return this.begin("rel_d"), 67;
					case 55: return this.begin("rel_d"), 67;
					case 56: return this.begin("rel_l"), 68;
					case 57: return this.begin("rel_l"), 68;
					case 58: return this.begin("rel_r"), 69;
					case 59: return this.begin("rel_r"), 69;
					case 60: return this.begin("rel_b"), 70;
					case 61: return this.begin("rel_index"), 71;
					case 62: return this.begin("update_el_style"), 72;
					case 63: return this.begin("update_rel_style"), 73;
					case 64: return this.begin("update_layout_config"), 74;
					case 65: return "EOF_IN_STRUCT";
					case 66: return this.begin("attribute"), "ATTRIBUTE_EMPTY";
					case 67:
						this.begin("attribute");
						break;
					case 68:
						this.popState(), this.popState();
						break;
					case 69: return 80;
					case 70: break;
					case 71: return 80;
					case 72:
						this.begin("string");
						break;
					case 73:
						this.popState();
						break;
					case 74: return "STR";
					case 75:
						this.begin("string_kv");
						break;
					case 76: return this.begin("string_kv_key"), "STR_KEY";
					case 77:
						this.popState(), this.begin("string_kv_value");
						break;
					case 78: return "STR_VALUE";
					case 79:
						this.popState(), this.popState();
						break;
					case 80: return "STR";
					case 81: return "LBRACE";
					case 82: return "RBRACE";
					case 83: return "SPACE";
					case 84: return "EOL";
					case 85: return 14;
				}
			}, "anonymous"),
			rules: [
				/^(?:.*direction\s+TB[^\n]*)/,
				/^(?:.*direction\s+BT[^\n]*)/,
				/^(?:.*direction\s+RL[^\n]*)/,
				/^(?:.*direction\s+LR[^\n]*)/,
				/^(?:title\s[^#\n;]+)/,
				/^(?:accDescription\s[^#\n;]+)/,
				/^(?:accTitle\s*:\s*)/,
				/^(?:(?!\n||)*[^\n]*)/,
				/^(?:accDescr\s*:\s*)/,
				/^(?:(?!\n||)*[^\n]*)/,
				/^(?:accDescr\s*\{\s*)/,
				/^(?:[\}])/,
				/^(?:[^\}]*)/,
				/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,
				/^(?:%%[^\n]*(\r?\n)*)/,
				/^(?:\s*(\r?\n)+)/,
				/^(?:\s+)/,
				/^(?:C4Context\b)/,
				/^(?:C4Container\b)/,
				/^(?:C4Component\b)/,
				/^(?:C4Dynamic\b)/,
				/^(?:C4Deployment\b)/,
				/^(?:Person_Ext\b)/,
				/^(?:Person\b)/,
				/^(?:SystemQueue_Ext\b)/,
				/^(?:SystemDb_Ext\b)/,
				/^(?:System_Ext\b)/,
				/^(?:SystemQueue\b)/,
				/^(?:SystemDb\b)/,
				/^(?:System\b)/,
				/^(?:Boundary\b)/,
				/^(?:Enterprise_Boundary\b)/,
				/^(?:System_Boundary\b)/,
				/^(?:ContainerQueue_Ext\b)/,
				/^(?:ContainerDb_Ext\b)/,
				/^(?:Container_Ext\b)/,
				/^(?:ContainerQueue\b)/,
				/^(?:ContainerDb\b)/,
				/^(?:Container\b)/,
				/^(?:Container_Boundary\b)/,
				/^(?:ComponentQueue_Ext\b)/,
				/^(?:ComponentDb_Ext\b)/,
				/^(?:Component_Ext\b)/,
				/^(?:ComponentQueue\b)/,
				/^(?:ComponentDb\b)/,
				/^(?:Component\b)/,
				/^(?:Deployment_Node\b)/,
				/^(?:Node\b)/,
				/^(?:Node_L\b)/,
				/^(?:Node_R\b)/,
				/^(?:Rel\b)/,
				/^(?:BiRel\b)/,
				/^(?:Rel_Up\b)/,
				/^(?:Rel_U\b)/,
				/^(?:Rel_Down\b)/,
				/^(?:Rel_D\b)/,
				/^(?:Rel_Left\b)/,
				/^(?:Rel_L\b)/,
				/^(?:Rel_Right\b)/,
				/^(?:Rel_R\b)/,
				/^(?:Rel_Back\b)/,
				/^(?:RelIndex\b)/,
				/^(?:UpdateElementStyle\b)/,
				/^(?:UpdateRelStyle\b)/,
				/^(?:UpdateLayoutConfig\b)/,
				/^(?:$)/,
				/^(?:[(][ ]*[,])/,
				/^(?:[(])/,
				/^(?:[)])/,
				/^(?:,,)/,
				/^(?:,)/,
				/^(?:[ ]*["]["])/,
				/^(?:[ ]*["])/,
				/^(?:["])/,
				/^(?:[^"]*)/,
				/^(?:[ ]*[\$])/,
				/^(?:[^=]*)/,
				/^(?:[=][ ]*["])/,
				/^(?:[^"]+)/,
				/^(?:["])/,
				/^(?:[^,]+)/,
				/^(?:\{)/,
				/^(?:\})/,
				/^(?:[\s]+)/,
				/^(?:[\n\r]+)/,
				/^(?:$)/
			],
			conditions: {
				acc_descr_multiline: {
					rules: [11, 12],
					inclusive: !1
				},
				acc_descr: {
					rules: [9],
					inclusive: !1
				},
				acc_title: {
					rules: [7],
					inclusive: !1
				},
				string_kv_value: {
					rules: [78, 79],
					inclusive: !1
				},
				string_kv_key: {
					rules: [77],
					inclusive: !1
				},
				string_kv: {
					rules: [76],
					inclusive: !1
				},
				string: {
					rules: [73, 74],
					inclusive: !1
				},
				attribute: {
					rules: [
						68,
						69,
						70,
						71,
						72,
						75,
						80
					],
					inclusive: !1
				},
				update_layout_config: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				update_rel_style: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				update_el_style: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_b: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_r: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_l: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_d: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_u: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				rel_bi: {
					rules: [],
					inclusive: !1
				},
				rel: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				node_r: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				node_l: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				node: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				index: {
					rules: [],
					inclusive: !1
				},
				rel_index: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				component_ext_queue: {
					rules: [],
					inclusive: !1
				},
				component_ext_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				component_ext: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				component_queue: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				component_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				component: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_boundary: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_ext_queue: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_ext_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_ext: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_queue: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				container: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				birel: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_boundary: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				enterprise_boundary: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				boundary: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_ext_queue: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_ext_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_ext: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_queue: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system_db: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				system: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				person_ext: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				person: {
					rules: [
						65,
						66,
						67,
						68
					],
					inclusive: !1
				},
				INITIAL: {
					rules: [
						0,
						1,
						2,
						3,
						4,
						5,
						6,
						8,
						10,
						13,
						14,
						15,
						16,
						17,
						18,
						19,
						20,
						21,
						22,
						23,
						24,
						25,
						26,
						27,
						28,
						29,
						30,
						31,
						32,
						33,
						34,
						35,
						36,
						37,
						38,
						39,
						40,
						41,
						42,
						43,
						44,
						45,
						46,
						47,
						48,
						49,
						50,
						51,
						52,
						53,
						54,
						55,
						56,
						57,
						58,
						59,
						60,
						61,
						62,
						63,
						64,
						81,
						82,
						83,
						84,
						85
					],
					inclusive: !0
				}
			}
		};
	}();
	function Lt() {
		this.yy = {};
	}
	return m(Lt, "Parser"), Lt.prototype = qt, qt.Parser = Lt, new Lt();
}();
Ft.parser = Ft;
var Ue = Ft, V = [], _t = [""], B = "global", F = "", X = [{
	alias: "global",
	label: { text: "global" },
	type: { text: "global" },
	tags: null,
	link: null,
	parentBoundary: ""
}], Pt = [], ae = "", re = !1, Vt = 4, zt = 2, me, Fe = /* @__PURE__ */ m(function() {
	return me;
}, "getC4Type"), Ve = /* @__PURE__ */ m(function(e) {
	me = _e(e, yt());
}, "setC4Type"), ze = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n, r, a) {
	if (e == null || t === void 0 || t === null || s === void 0 || s === null || o$1 === void 0 || o$1 === null) return;
	let u = {};
	const d = Pt.find((p) => p.from === t && p.to === s);
	if (d ? u = d : Pt.push(u), u.type = e, u.from = t, u.to = s, u.label = { text: o$1 }, l == null) u.techn = { text: "" };
	else if (typeof l == "object") {
		let [p, y$1] = Object.entries(l)[0];
		u[p] = { text: y$1 };
	} else u.techn = { text: l };
	if (i == null) u.descr = { text: "" };
	else if (typeof i == "object") {
		let [p, y$1] = Object.entries(i)[0];
		u[p] = { text: y$1 };
	} else u.descr = { text: i };
	if (typeof n == "object") {
		let [p, y$1] = Object.entries(n)[0];
		u[p] = y$1;
	} else u.sprite = n;
	if (typeof r == "object") {
		let [p, y$1] = Object.entries(r)[0];
		u[p] = y$1;
	} else u.tags = r;
	if (typeof a == "object") {
		let [p, y$1] = Object.entries(a)[0];
		u[p] = y$1;
	} else u.link = a;
	u.wrap = xt();
}, "addRel"), Xe = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n) {
	if (t === null || s === null) return;
	let r = {};
	const a = V.find((u) => u.alias === t);
	if (a && t === a.alias ? r = a : (r.alias = t, V.push(r)), s == null ? r.label = { text: "" } : r.label = { text: s }, o$1 == null) r.descr = { text: "" };
	else if (typeof o$1 == "object") {
		let [u, d] = Object.entries(o$1)[0];
		r[u] = { text: d };
	} else r.descr = { text: o$1 };
	if (typeof l == "object") {
		let [u, d] = Object.entries(l)[0];
		r[u] = d;
	} else r.sprite = l;
	if (typeof i == "object") {
		let [u, d] = Object.entries(i)[0];
		r[u] = d;
	} else r.tags = i;
	if (typeof n == "object") {
		let [u, d] = Object.entries(n)[0];
		r[u] = d;
	} else r.link = n;
	r.typeC4Shape = { text: e }, r.parentBoundary = B, r.wrap = xt();
}, "addPersonOrSystem"), We = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n, r) {
	if (t === null || s === null) return;
	let a = {};
	const u = V.find((d) => d.alias === t);
	if (u && t === u.alias ? a = u : (a.alias = t, V.push(a)), s == null ? a.label = { text: "" } : a.label = { text: s }, o$1 == null) a.techn = { text: "" };
	else if (typeof o$1 == "object") {
		let [d, p] = Object.entries(o$1)[0];
		a[d] = { text: p };
	} else a.techn = { text: o$1 };
	if (l == null) a.descr = { text: "" };
	else if (typeof l == "object") {
		let [d, p] = Object.entries(l)[0];
		a[d] = { text: p };
	} else a.descr = { text: l };
	if (typeof i == "object") {
		let [d, p] = Object.entries(i)[0];
		a[d] = p;
	} else a.sprite = i;
	if (typeof n == "object") {
		let [d, p] = Object.entries(n)[0];
		a[d] = p;
	} else a.tags = n;
	if (typeof r == "object") {
		let [d, p] = Object.entries(r)[0];
		a[d] = p;
	} else a.link = r;
	a.wrap = xt(), a.typeC4Shape = { text: e }, a.parentBoundary = B;
}, "addContainer"), Qe = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n, r) {
	if (t === null || s === null) return;
	let a = {};
	const u = V.find((d) => d.alias === t);
	if (u && t === u.alias ? a = u : (a.alias = t, V.push(a)), s == null ? a.label = { text: "" } : a.label = { text: s }, o$1 == null) a.techn = { text: "" };
	else if (typeof o$1 == "object") {
		let [d, p] = Object.entries(o$1)[0];
		a[d] = { text: p };
	} else a.techn = { text: o$1 };
	if (l == null) a.descr = { text: "" };
	else if (typeof l == "object") {
		let [d, p] = Object.entries(l)[0];
		a[d] = { text: p };
	} else a.descr = { text: l };
	if (typeof i == "object") {
		let [d, p] = Object.entries(i)[0];
		a[d] = p;
	} else a.sprite = i;
	if (typeof n == "object") {
		let [d, p] = Object.entries(n)[0];
		a[d] = p;
	} else a.tags = n;
	if (typeof r == "object") {
		let [d, p] = Object.entries(r)[0];
		a[d] = p;
	} else a.link = r;
	a.wrap = xt(), a.typeC4Shape = { text: e }, a.parentBoundary = B;
}, "addComponent"), He = /* @__PURE__ */ m(function(e, t, s, o$1, l) {
	if (e === null || t === null) return;
	let i = {};
	const n = X.find((r) => r.alias === e);
	if (n && e === n.alias ? i = n : (i.alias = e, X.push(i)), t == null ? i.label = { text: "" } : i.label = { text: t }, s == null) i.type = { text: "system" };
	else if (typeof s == "object") {
		let [r, a] = Object.entries(s)[0];
		i[r] = { text: a };
	} else i.type = { text: s };
	if (typeof o$1 == "object") {
		let [r, a] = Object.entries(o$1)[0];
		i[r] = a;
	} else i.tags = o$1;
	if (typeof l == "object") {
		let [r, a] = Object.entries(l)[0];
		i[r] = a;
	} else i.link = l;
	i.parentBoundary = B, i.wrap = xt(), F = B, B = e, _t.push(F);
}, "addPersonOrSystemBoundary"), qe = /* @__PURE__ */ m(function(e, t, s, o$1, l) {
	if (e === null || t === null) return;
	let i = {};
	const n = X.find((r) => r.alias === e);
	if (n && e === n.alias ? i = n : (i.alias = e, X.push(i)), t == null ? i.label = { text: "" } : i.label = { text: t }, s == null) i.type = { text: "container" };
	else if (typeof s == "object") {
		let [r, a] = Object.entries(s)[0];
		i[r] = { text: a };
	} else i.type = { text: s };
	if (typeof o$1 == "object") {
		let [r, a] = Object.entries(o$1)[0];
		i[r] = a;
	} else i.tags = o$1;
	if (typeof l == "object") {
		let [r, a] = Object.entries(l)[0];
		i[r] = a;
	} else i.link = l;
	i.parentBoundary = B, i.wrap = xt(), F = B, B = e, _t.push(F);
}, "addContainerBoundary"), Ge = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n, r) {
	if (t === null || s === null) return;
	let a = {};
	const u = X.find((d) => d.alias === t);
	if (u && t === u.alias ? a = u : (a.alias = t, X.push(a)), s == null ? a.label = { text: "" } : a.label = { text: s }, o$1 == null) a.type = { text: "node" };
	else if (typeof o$1 == "object") {
		let [d, p] = Object.entries(o$1)[0];
		a[d] = { text: p };
	} else a.type = { text: o$1 };
	if (l == null) a.descr = { text: "" };
	else if (typeof l == "object") {
		let [d, p] = Object.entries(l)[0];
		a[d] = { text: p };
	} else a.descr = { text: l };
	if (typeof n == "object") {
		let [d, p] = Object.entries(n)[0];
		a[d] = p;
	} else a.tags = n;
	if (typeof r == "object") {
		let [d, p] = Object.entries(r)[0];
		a[d] = p;
	} else a.link = r;
	a.nodeType = e, a.parentBoundary = B, a.wrap = xt(), F = B, B = t, _t.push(F);
}, "addDeploymentNode"), Ke = /* @__PURE__ */ m(function() {
	B = F, _t.pop(), F = _t.pop(), _t.push(F);
}, "popBoundaryParseStack"), Je = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n, r, a, u, d) {
	let p = V.find((y$1) => y$1.alias === t);
	if (!(p === void 0 && (p = X.find((y$1) => y$1.alias === t), p === void 0))) {
		if (s != null) if (typeof s == "object") {
			let [y$1, E] = Object.entries(s)[0];
			p[y$1] = E;
		} else p.bgColor = s;
		if (o$1 != null) if (typeof o$1 == "object") {
			let [y$1, E] = Object.entries(o$1)[0];
			p[y$1] = E;
		} else p.fontColor = o$1;
		if (l != null) if (typeof l == "object") {
			let [y$1, E] = Object.entries(l)[0];
			p[y$1] = E;
		} else p.borderColor = l;
		if (i != null) if (typeof i == "object") {
			let [y$1, E] = Object.entries(i)[0];
			p[y$1] = E;
		} else p.shadowing = i;
		if (n != null) if (typeof n == "object") {
			let [y$1, E] = Object.entries(n)[0];
			p[y$1] = E;
		} else p.shape = n;
		if (r != null) if (typeof r == "object") {
			let [y$1, E] = Object.entries(r)[0];
			p[y$1] = E;
		} else p.sprite = r;
		if (a != null) if (typeof a == "object") {
			let [y$1, E] = Object.entries(a)[0];
			p[y$1] = E;
		} else p.techn = a;
		if (u != null) if (typeof u == "object") {
			let [y$1, E] = Object.entries(u)[0];
			p[y$1] = E;
		} else p.legendText = u;
		if (d != null) if (typeof d == "object") {
			let [y$1, E] = Object.entries(d)[0];
			p[y$1] = E;
		} else p.legendSprite = d;
	}
}, "updateElStyle"), Ze = /* @__PURE__ */ m(function(e, t, s, o$1, l, i, n) {
	const r = Pt.find((a) => a.from === t && a.to === s);
	if (r !== void 0) {
		if (o$1 != null) if (typeof o$1 == "object") {
			let [a, u] = Object.entries(o$1)[0];
			r[a] = u;
		} else r.textColor = o$1;
		if (l != null) if (typeof l == "object") {
			let [a, u] = Object.entries(l)[0];
			r[a] = u;
		} else r.lineColor = l;
		if (i != null) if (typeof i == "object") {
			let [a, u] = Object.entries(i)[0];
			r[a] = parseInt(u);
		} else r.offsetX = parseInt(i);
		if (n != null) if (typeof n == "object") {
			let [a, u] = Object.entries(n)[0];
			r[a] = parseInt(u);
		} else r.offsetY = parseInt(n);
	}
}, "updateRelStyle"), $e = /* @__PURE__ */ m(function(e, t, s) {
	let o$1 = Vt, l = zt;
	if (typeof t == "object") {
		const i = Object.values(t)[0];
		o$1 = parseInt(i);
	} else o$1 = parseInt(t);
	if (typeof s == "object") {
		const i = Object.values(s)[0];
		l = parseInt(i);
	} else l = parseInt(s);
	o$1 >= 1 && (Vt = o$1), l >= 1 && (zt = l);
}, "updateLayoutConfig"), t0 = /* @__PURE__ */ m(function() {
	return Vt;
}, "getC4ShapeInRow"), e0 = /* @__PURE__ */ m(function() {
	return zt;
}, "getC4BoundaryInRow"), i0 = /* @__PURE__ */ m(function() {
	return B;
}, "getCurrentBoundaryParse"), a0 = /* @__PURE__ */ m(function() {
	return F;
}, "getParentBoundaryParse"), be = /* @__PURE__ */ m(function(e) {
	return e == null ? V : V.filter((t) => t.parentBoundary === e);
}, "getC4ShapeArray"), r0 = /* @__PURE__ */ m(function(e) {
	return V.find((t) => t.alias === e);
}, "getC4Shape"), n0 = /* @__PURE__ */ m(function(e) {
	return Object.keys(be(e));
}, "getC4ShapeKeys"), _e$1 = /* @__PURE__ */ m(function(e) {
	return e == null ? X : X.filter((t) => t.parentBoundary === e);
}, "getBoundaries"), s0 = _e$1, l0 = /* @__PURE__ */ m(function() {
	return Pt;
}, "getRels"), o0 = /* @__PURE__ */ m(function() {
	return ae;
}, "getTitle"), c0 = /* @__PURE__ */ m(function(e) {
	re = e;
}, "setWrap"), xt = /* @__PURE__ */ m(function() {
	return re;
}, "autoWrap"), te = {
	addPersonOrSystem: Xe,
	addPersonOrSystemBoundary: He,
	addContainer: We,
	addContainerBoundary: qe,
	addComponent: Qe,
	addDeploymentNode: Ge,
	popBoundaryParseStack: Ke,
	addRel: ze,
	updateElStyle: Je,
	updateRelStyle: Ze,
	updateLayoutConfig: $e,
	autoWrap: xt,
	setWrap: c0,
	getC4ShapeArray: be,
	getC4Shape: r0,
	getC4ShapeKeys: n0,
	getBoundaries: _e$1,
	getBoundarys: s0,
	getCurrentBoundaryParse: i0,
	getParentBoundaryParse: a0,
	getRels: l0,
	getTitle: o0,
	getC4Type: Fe,
	getC4ShapeInRow: t0,
	getC4BoundaryInRow: e0,
	setAccTitle: b5,
	getAccTitle: x5,
	getAccDescription: k5,
	setAccDescription: y5,
	getConfig: /* @__PURE__ */ m(() => yt().c4, "getConfig"),
	clear: /* @__PURE__ */ m(function() {
		V = [], X = [{
			alias: "global",
			label: { text: "global" },
			type: { text: "global" },
			tags: null,
			link: null,
			parentBoundary: ""
		}], F = "", B = "global", _t = [""], Pt = [], _t = [""], ae = "", re = !1, Vt = 4, zt = 2;
	}, "clear"),
	LINETYPE: {
		SOLID: 0,
		DOTTED: 1,
		NOTE: 2,
		SOLID_CROSS: 3,
		DOTTED_CROSS: 4,
		SOLID_OPEN: 5,
		DOTTED_OPEN: 6,
		LOOP_START: 10,
		LOOP_END: 11,
		ALT_START: 12,
		ALT_ELSE: 13,
		ALT_END: 14,
		OPT_START: 15,
		OPT_END: 16,
		ACTIVE_START: 17,
		ACTIVE_END: 18,
		PAR_START: 19,
		PAR_AND: 20,
		PAR_END: 21,
		RECT_START: 22,
		RECT_END: 23,
		SOLID_POINT: 24,
		DOTTED_POINT: 25
	},
	ARROWTYPE: {
		FILLED: 0,
		OPEN: 1
	},
	PLACEMENT: {
		LEFTOF: 0,
		RIGHTOF: 1,
		OVER: 2
	},
	setTitle: /* @__PURE__ */ m(function(e) {
		ae = _e(e, yt());
	}, "setTitle"),
	setC4Type: Ve
}, ne = /* @__PURE__ */ m(function(e, t) {
	return o(e, t);
}, "drawRect"), xe = /* @__PURE__ */ m(function(e, t, s, o$1, l, i) {
	const n = e.append("image");
	n.attr("width", t), n.attr("height", s), n.attr("x", o$1), n.attr("y", l);
	let r = i.startsWith("data:image/png;base64") ? i : bm(i);
	n.attr("xlink:href", r);
}, "drawImage"), y0 = /* @__PURE__ */ m((e, t, s) => {
	const o$1 = e.append("g");
	let l = 0;
	for (let i of t) {
		let n = i.textColor ? i.textColor : "#444444", r = i.lineColor ? i.lineColor : "#444444", a = i.offsetX ? parseInt(i.offsetX) : 0, u = i.offsetY ? parseInt(i.offsetY) : 0, d = "";
		if (l === 0) {
			let y$1 = o$1.append("line");
			y$1.attr("x1", i.startPoint.x), y$1.attr("y1", i.startPoint.y), y$1.attr("x2", i.endPoint.x), y$1.attr("y2", i.endPoint.y), y$1.attr("stroke-width", "1"), y$1.attr("stroke", r), y$1.style("fill", "none"), i.type !== "rel_b" && y$1.attr("marker-end", "url(" + d + "#arrowhead)"), (i.type === "birel" || i.type === "rel_b") && y$1.attr("marker-start", "url(" + d + "#arrowend)"), l = -1;
		} else {
			let y$1 = o$1.append("path");
			y$1.attr("fill", "none").attr("stroke-width", "1").attr("stroke", r).attr("d", "Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx", i.startPoint.x).replaceAll("starty", i.startPoint.y).replaceAll("controlx", i.startPoint.x + (i.endPoint.x - i.startPoint.x) / 2 - (i.endPoint.x - i.startPoint.x) / 4).replaceAll("controly", i.startPoint.y + (i.endPoint.y - i.startPoint.y) / 2).replaceAll("stopx", i.endPoint.x).replaceAll("stopy", i.endPoint.y)), i.type !== "rel_b" && y$1.attr("marker-end", "url(" + d + "#arrowhead)"), (i.type === "birel" || i.type === "rel_b") && y$1.attr("marker-start", "url(" + d + "#arrowend)");
		}
		let p = s.messageFont();
		Q(s)(i.label.text, o$1, Math.min(i.startPoint.x, i.endPoint.x) + Math.abs(i.endPoint.x - i.startPoint.x) / 2 + a, Math.min(i.startPoint.y, i.endPoint.y) + Math.abs(i.endPoint.y - i.startPoint.y) / 2 + u, i.label.width, i.label.height, { fill: n }, p), i.techn && i.techn.text !== "" && (p = s.messageFont(), Q(s)("[" + i.techn.text + "]", o$1, Math.min(i.startPoint.x, i.endPoint.x) + Math.abs(i.endPoint.x - i.startPoint.x) / 2 + a, Math.min(i.startPoint.y, i.endPoint.y) + Math.abs(i.endPoint.y - i.startPoint.y) / 2 + s.messageFontSize + 5 + u, Math.max(i.label.width, i.techn.width), i.techn.height, {
			fill: n,
			"font-style": "italic"
		}, p));
	}
}, "drawRels"), g0 = /* @__PURE__ */ m(function(e, t, s) {
	const o$1 = e.append("g");
	let l = t.bgColor ? t.bgColor : "none", i = t.borderColor ? t.borderColor : "#444444", n = t.fontColor ? t.fontColor : "black", r = {
		"stroke-width": 1,
		"stroke-dasharray": "7.0,7.0"
	};
	t.nodeType && (r = { "stroke-width": 1 });
	ne(o$1, {
		x: t.x,
		y: t.y,
		fill: l,
		stroke: i,
		width: t.width,
		height: t.height,
		rx: 2.5,
		ry: 2.5,
		attrs: r
	});
	let u = s.boundaryFont();
	u.fontWeight = "bold", u.fontSize = u.fontSize + 2, u.fontColor = n, Q(s)(t.label.text, o$1, t.x, t.y + t.label.Y, t.width, t.height, { fill: "#444444" }, u), t.type && t.type.text !== "" && (u = s.boundaryFont(), u.fontColor = n, Q(s)(t.type.text, o$1, t.x, t.y + t.type.Y, t.width, t.height, { fill: "#444444" }, u)), t.descr && t.descr.text !== "" && (u = s.boundaryFont(), u.fontSize = u.fontSize - 2, u.fontColor = n, Q(s)(t.descr.text, o$1, t.x, t.y + t.descr.Y, t.width, t.height, { fill: "#444444" }, u));
}, "drawBoundary"), m0 = /* @__PURE__ */ m(function(e, t, s) {
	var p;
	let o$1 = t.bgColor ? t.bgColor : s[t.typeC4Shape.text + "_bg_color"], l = t.borderColor ? t.borderColor : s[t.typeC4Shape.text + "_border_color"], i = t.fontColor ? t.fontColor : "#FFFFFF", n = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";
	switch (t.typeC4Shape.text) {
		case "person":
			n = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";
			break;
		case "external_person":
			n = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";
			break;
	}
	const r = e.append("g");
	r.attr("class", "person-man");
	const a = y();
	switch (t.typeC4Shape.text) {
		case "person":
		case "external_person":
		case "system":
		case "external_system":
		case "container":
		case "external_container":
		case "component":
		case "external_component":
			a.x = t.x, a.y = t.y, a.fill = o$1, a.width = t.width, a.height = t.height, a.stroke = l, a.rx = 2.5, a.ry = 2.5, a.attrs = { "stroke-width": .5 }, ne(r, a);
			break;
		case "system_db":
		case "external_system_db":
		case "container_db":
		case "external_container_db":
		case "component_db":
		case "external_component_db":
			r.append("path").attr("fill", o$1).attr("stroke-width", "0.5").attr("stroke", l).attr("d", "Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx", t.x).replaceAll("starty", t.y).replaceAll("half", t.width / 2).replaceAll("height", t.height)), r.append("path").attr("fill", "none").attr("stroke-width", "0.5").attr("stroke", l).attr("d", "Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx", t.x).replaceAll("starty", t.y).replaceAll("half", t.width / 2));
			break;
		case "system_queue":
		case "external_system_queue":
		case "container_queue":
		case "external_container_queue":
		case "component_queue":
		case "external_component_queue":
			r.append("path").attr("fill", o$1).attr("stroke-width", "0.5").attr("stroke", l).attr("d", "Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx", t.x).replaceAll("starty", t.y).replaceAll("width", t.width).replaceAll("half", t.height / 2)), r.append("path").attr("fill", "none").attr("stroke-width", "0.5").attr("stroke", l).attr("d", "Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx", t.x + t.width).replaceAll("starty", t.y).replaceAll("half", t.height / 2));
			break;
	}
	let u = w0(s, t.typeC4Shape.text);
	switch (r.append("text").attr("fill", i).attr("font-family", u.fontFamily).attr("font-size", u.fontSize - 2).attr("font-style", "italic").attr("lengthAdjust", "spacing").attr("textLength", t.typeC4Shape.width).attr("x", t.x + t.width / 2 - t.typeC4Shape.width / 2).attr("y", t.y + t.typeC4Shape.Y).text("<<" + t.typeC4Shape.text + ">>"), t.typeC4Shape.text) {
		case "person":
		case "external_person":
			xe(r, 48, 48, t.x + t.width / 2 - 24, t.y + t.image.Y, n);
			break;
	}
	let d = s[t.typeC4Shape.text + "Font"]();
	return d.fontWeight = "bold", d.fontSize = d.fontSize + 2, d.fontColor = i, Q(s)(t.label.text, r, t.x, t.y + t.label.Y, t.width, t.height, { fill: i }, d), d = s[t.typeC4Shape.text + "Font"](), d.fontColor = i, t.techn && ((p = t.techn) == null ? void 0 : p.text) !== "" ? Q(s)(t.techn.text, r, t.x, t.y + t.techn.Y, t.width, t.height, {
		fill: i,
		"font-style": "italic"
	}, d) : t.type && t.type.text !== "" && Q(s)(t.type.text, r, t.x, t.y + t.type.Y, t.width, t.height, {
		fill: i,
		"font-style": "italic"
	}, d), t.descr && t.descr.text !== "" && (d = s.personFont(), d.fontColor = i, Q(s)(t.descr.text, r, t.x, t.y + t.descr.Y, t.width, t.height, { fill: i }, d)), t.height;
}, "drawC4Shape"), b0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("symbol").attr("id", "database").attr("fill-rule", "evenodd").attr("clip-rule", "evenodd").append("path").attr("transform", "scale(.5)").attr("d", "M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z");
}, "insertDatabaseIcon"), _0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("symbol").attr("id", "computer").attr("width", "24").attr("height", "24").append("path").attr("transform", "scale(.5)").attr("d", "M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z");
}, "insertComputerIcon"), x0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("symbol").attr("id", "clock").attr("width", "24").attr("height", "24").append("path").attr("transform", "scale(.5)").attr("d", "M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z");
}, "insertClockIcon"), v0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("marker").attr("id", "arrowhead").attr("refX", 9).attr("refY", 5).attr("markerUnits", "userSpaceOnUse").attr("markerWidth", 12).attr("markerHeight", 12).attr("orient", "auto").append("path").attr("d", "M 0 0 L 10 5 L 0 10 z");
}, "insertArrowHead"), E0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("marker").attr("id", "arrowend").attr("refX", 1).attr("refY", 5).attr("markerUnits", "userSpaceOnUse").attr("markerWidth", 12).attr("markerHeight", 12).attr("orient", "auto").append("path").attr("d", "M 10 0 L 0 5 L 10 10 z");
}, "insertArrowEnd"), k0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("marker").attr("id", "filled-head").attr("refX", 18).attr("refY", 7).attr("markerWidth", 20).attr("markerHeight", 28).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L14,7 L9,1 Z");
}, "insertArrowFilledHead"), A0 = /* @__PURE__ */ m(function(e) {
	e.append("defs").append("marker").attr("id", "sequencenumber").attr("refX", 15).attr("refY", 15).attr("markerWidth", 60).attr("markerHeight", 40).attr("orient", "auto").append("circle").attr("cx", 15).attr("cy", 15).attr("r", 6);
}, "insertDynamicNumber"), C0 = /* @__PURE__ */ m(function(e) {
	const s = e.append("defs").append("marker").attr("id", "crosshead").attr("markerWidth", 15).attr("markerHeight", 8).attr("orient", "auto").attr("refX", 16).attr("refY", 4);
	s.append("path").attr("fill", "black").attr("stroke", "#000000").style("stroke-dasharray", "0, 0").attr("stroke-width", "1px").attr("d", "M 9,2 V 6 L16,4 Z"), s.append("path").attr("fill", "none").attr("stroke", "#000000").style("stroke-dasharray", "0, 0").attr("stroke-width", "1px").attr("d", "M 0,1 L 6,7 M 6,1 L 0,7");
}, "insertArrowCrossHead"), w0 = /* @__PURE__ */ m((e, t) => ({
	fontFamily: e[t + "FontFamily"],
	fontSize: e[t + "FontSize"],
	fontWeight: e[t + "FontWeight"]
}), "getC4ShapeFont"), Q = /* @__PURE__ */ function() {
	function e(l, i, n, r, a, u, d) {
		o$1(i.append("text").attr("x", n + a / 2).attr("y", r + u / 2 + 5).style("text-anchor", "middle").text(l), d);
	}
	m(e, "byText");
	function t(l, i, n, r, a, u, d, p) {
		const { fontSize: y$1, fontFamily: E, fontWeight: O } = p, S = l.split(zi.lineBreakRegex);
		for (let P = 0; P < S.length; P++) {
			const M = P * y$1 - y$1 * (S.length - 1) / 2, U = i.append("text").attr("x", n + a / 2).attr("y", r).style("text-anchor", "middle").attr("dominant-baseline", "middle").style("font-size", y$1).style("font-weight", O).style("font-family", E);
			U.append("tspan").attr("dy", M).text(S[P]).attr("alignment-baseline", "mathematical"), o$1(U, d);
		}
	}
	m(t, "byTspan");
	function s(l, i, n, r, a, u, d, p) {
		const y$1 = i.append("switch"), O = y$1.append("foreignObject").attr("x", n).attr("y", r).attr("width", a).attr("height", u).append("xhtml:div").style("display", "table").style("height", "100%").style("width", "100%");
		O.append("div").style("display", "table-cell").style("text-align", "center").style("vertical-align", "middle").text(l), t(l, y$1, n, r, a, u, d, p), o$1(O, d);
	}
	m(s, "byFo");
	function o$1(l, i) {
		for (const n in i) i.hasOwnProperty(n) && l.attr(n, i[n]);
	}
	return m(o$1, "_setTextAttrs"), function(l) {
		return l.textPlacement === "fo" ? s : l.textPlacement === "old" ? e : t;
	};
}(), z = {
	drawRect: ne,
	drawBoundary: g0,
	drawC4Shape: m0,
	drawRels: y0,
	drawImage: xe,
	insertArrowHead: v0,
	insertArrowEnd: E0,
	insertArrowFilledHead: k0,
	insertDynamicNumber: A0,
	insertArrowCrossHead: C0,
	insertDatabaseIcon: b0,
	insertComputerIcon: _0,
	insertClockIcon: x0
}, Xt = 0, Wt = 0, ve = 4, ee = 2;
Ft.yy = te;
var b = {}, Bt, Ee = (Bt = class {
	constructor(t) {
		this.name = "", this.data = {}, this.data.startx = void 0, this.data.stopx = void 0, this.data.starty = void 0, this.data.stopy = void 0, this.data.widthLimit = void 0, this.nextData = {}, this.nextData.startx = void 0, this.nextData.stopx = void 0, this.nextData.starty = void 0, this.nextData.stopy = void 0, this.nextData.cnt = 0, ie(t.db.getConfig());
	}
	setData(t, s, o$1, l) {
		this.nextData.startx = this.data.startx = t, this.nextData.stopx = this.data.stopx = s, this.nextData.starty = this.data.starty = o$1, this.nextData.stopy = this.data.stopy = l;
	}
	updateVal(t, s, o$1, l) {
		t[s] === void 0 ? t[s] = o$1 : t[s] = l(o$1, t[s]);
	}
	insert(t) {
		this.nextData.cnt = this.nextData.cnt + 1;
		let s = this.nextData.startx === this.nextData.stopx ? this.nextData.stopx + t.margin : this.nextData.stopx + t.margin * 2, o$1 = s + t.width, l = this.nextData.starty + t.margin * 2, i = l + t.height;
		(s >= this.data.widthLimit || o$1 >= this.data.widthLimit || this.nextData.cnt > ve) && (s = this.nextData.startx + t.margin + b.nextLinePaddingX, l = this.nextData.stopy + t.margin * 2, this.nextData.stopx = o$1 = s + t.width, this.nextData.starty = this.nextData.stopy, this.nextData.stopy = i = l + t.height, this.nextData.cnt = 1), t.x = s, t.y = l, this.updateVal(this.data, "startx", s, Math.min), this.updateVal(this.data, "starty", l, Math.min), this.updateVal(this.data, "stopx", o$1, Math.max), this.updateVal(this.data, "stopy", i, Math.max), this.updateVal(this.nextData, "startx", s, Math.min), this.updateVal(this.nextData, "starty", l, Math.min), this.updateVal(this.nextData, "stopx", o$1, Math.max), this.updateVal(this.nextData, "stopy", i, Math.max);
	}
	init(t) {
		this.name = "", this.data = {
			startx: void 0,
			stopx: void 0,
			starty: void 0,
			stopy: void 0,
			widthLimit: void 0
		}, this.nextData = {
			startx: void 0,
			stopx: void 0,
			starty: void 0,
			stopy: void 0,
			cnt: 0
		}, ie(t.db.getConfig());
	}
	bumpLastMargin(t) {
		this.data.stopx += t, this.data.stopy += t;
	}
}, m(Bt, "Bounds"), Bt), ie = /* @__PURE__ */ m(function(e) {
	Dt(b, e), e.fontFamily && (b.personFontFamily = b.systemFontFamily = b.messageFontFamily = e.fontFamily), e.fontSize && (b.personFontSize = b.systemFontSize = b.messageFontSize = e.fontSize), e.fontWeight && (b.personFontWeight = b.systemFontWeight = b.messageFontWeight = e.fontWeight);
}, "setConf"), St = /* @__PURE__ */ m((e, t) => ({
	fontFamily: e[t + "FontFamily"],
	fontSize: e[t + "FontSize"],
	fontWeight: e[t + "FontWeight"]
}), "c4ShapeFont"), Ut = /* @__PURE__ */ m((e) => ({
	fontFamily: e.boundaryFontFamily,
	fontSize: e.boundaryFontSize,
	fontWeight: e.boundaryFontWeight
}), "boundaryFont"), T0 = /* @__PURE__ */ m((e) => ({
	fontFamily: e.messageFontFamily,
	fontSize: e.messageFontSize,
	fontWeight: e.messageFontWeight
}), "messageFont");
function j(e, t, s, o$1, l) {
	if (!t[e].width) if (s) t[e].text = vM(t[e].text, l, o$1), t[e].textLines = t[e].text.split(zi.lineBreakRegex).length, t[e].width = l, t[e].height = Pm(t[e].text, o$1);
	else {
		let i = t[e].text.split(zi.lineBreakRegex);
		t[e].textLines = i.length;
		let n = 0;
		t[e].height = 0, t[e].width = 0;
		for (const r of i) t[e].width = Math.max(ur(r, o$1), t[e].width), n = Pm(r, o$1), t[e].height = t[e].height + n;
	}
}
m(j, "calcC4ShapeTextWH");
var ke = /* @__PURE__ */ m(function(e, t, s) {
	t.x = s.data.startx, t.y = s.data.starty, t.width = s.data.stopx - s.data.startx, t.height = s.data.stopy - s.data.starty, t.label.y = b.c4ShapeMargin - 35;
	let o$1 = t.wrap && b.wrap, l = Ut(b);
	l.fontSize = l.fontSize + 2, l.fontWeight = "bold";
	j("label", t, o$1, l, ur(t.label.text, l)), z.drawBoundary(e, t, b);
}, "drawBoundary"), Ae = /* @__PURE__ */ m(function(e, t, s, o$1) {
	let l = 0;
	for (const i of o$1) {
		l = 0;
		const n = s[i];
		let r = St(b, n.typeC4Shape.text);
		switch (r.fontSize = r.fontSize - 2, n.typeC4Shape.width = ur("" + n.typeC4Shape.text + "", r), n.typeC4Shape.height = r.fontSize + 2, n.typeC4Shape.Y = b.c4ShapePadding, l = n.typeC4Shape.Y + n.typeC4Shape.height - 4, n.image = {
			width: 0,
			height: 0,
			Y: 0
		}, n.typeC4Shape.text) {
			case "person":
			case "external_person":
				n.image.width = 48, n.image.height = 48, n.image.Y = l, l = n.image.Y + n.image.height;
				break;
		}
		n.sprite && (n.image.width = 48, n.image.height = 48, n.image.Y = l, l = n.image.Y + n.image.height);
		let a = n.wrap && b.wrap, u = b.width - b.c4ShapePadding * 2, d = St(b, n.typeC4Shape.text);
		if (d.fontSize = d.fontSize + 2, d.fontWeight = "bold", j("label", n, a, d, u), n.label.Y = l + 8, l = n.label.Y + n.label.height, n.type && n.type.text !== "") {
			n.type.text = "[" + n.type.text + "]";
			j("type", n, a, St(b, n.typeC4Shape.text), u), n.type.Y = l + 5, l = n.type.Y + n.type.height;
		} else if (n.techn && n.techn.text !== "") {
			n.techn.text = "[" + n.techn.text + "]";
			j("techn", n, a, St(b, n.techn.text), u), n.techn.Y = l + 5, l = n.techn.Y + n.techn.height;
		}
		let p = l, y$1 = n.label.width;
		if (n.descr && n.descr.text !== "") j("descr", n, a, St(b, n.typeC4Shape.text), u), n.descr.Y = l + 20, l = n.descr.Y + n.descr.height, y$1 = Math.max(n.label.width, n.descr.width), p = l - n.descr.textLines * 5;
		y$1 = y$1 + b.c4ShapePadding, n.width = Math.max(n.width || b.width, y$1, b.width), n.height = Math.max(n.height || b.height, p, b.height), n.margin = n.margin || b.c4ShapeMargin, e.insert(n), z.drawC4Shape(t, n, b);
	}
	e.bumpLastMargin(b.c4ShapeMargin);
}, "drawC4ShapeArray"), It, Y = (It = class {
	constructor(t, s) {
		this.x = t, this.y = s;
	}
}, m(It, "Point"), It), fe = /* @__PURE__ */ m(function(e, t) {
	let s = e.x, o$1 = e.y, l = t.x, i = t.y, n = s + e.width / 2, r = o$1 + e.height / 2, a = Math.abs(s - l), u = Math.abs(o$1 - i), d = u / a, p = e.height / e.width, y$1 = null;
	return o$1 == i && s < l ? y$1 = new Y(s + e.width, r) : o$1 == i && s > l ? y$1 = new Y(s, r) : s == l && o$1 < i ? y$1 = new Y(n, o$1 + e.height) : s == l && o$1 > i && (y$1 = new Y(n, o$1)), s > l && o$1 < i ? p >= d ? y$1 = new Y(s, r + d * e.width / 2) : y$1 = new Y(n - a / u * e.height / 2, o$1 + e.height) : s < l && o$1 < i ? p >= d ? y$1 = new Y(s + e.width, r + d * e.width / 2) : y$1 = new Y(n + a / u * e.height / 2, o$1 + e.height) : s < l && o$1 > i ? p >= d ? y$1 = new Y(s + e.width, r - d * e.width / 2) : y$1 = new Y(n + e.height / 2 * a / u, o$1) : s > l && o$1 > i && (p >= d ? y$1 = new Y(s, r - e.width / 2 * d) : y$1 = new Y(n - e.height / 2 * a / u, o$1)), y$1;
}, "getIntersectPoint"), O0 = /* @__PURE__ */ m(function(e, t) {
	let s = {
		x: 0,
		y: 0
	};
	s.x = t.x + t.width / 2, s.y = t.y + t.height / 2;
	let o$1 = fe(e, s);
	s.x = e.x + e.width / 2, s.y = e.y + e.height / 2;
	return {
		startPoint: o$1,
		endPoint: fe(t, s)
	};
}, "getIntersectPoints"), R0 = /* @__PURE__ */ m(function(e, t, s, o$1) {
	let l = 0;
	for (let i of t) {
		l = l + 1;
		let n = i.wrap && b.wrap, r = T0(b);
		o$1.db.getC4Type() === "C4Dynamic" && (i.label.text = l + ": " + i.label.text);
		let u = ur(i.label.text, r);
		j("label", i, n, r, u), i.techn && i.techn.text !== "" && (u = ur(i.techn.text, r), j("techn", i, n, r, u)), i.descr && i.descr.text !== "" && (u = ur(i.descr.text, r), j("descr", i, n, r, u));
		let y$1 = O0(s(i.from), s(i.to));
		i.startPoint = y$1.startPoint, i.endPoint = y$1.endPoint;
	}
	z.drawRels(e, t, b);
}, "drawRels");
function se(e, t, s, o$1, l) {
	let i = new Ee(l);
	i.data.widthLimit = s.data.widthLimit / Math.min(ee, o$1.length);
	for (let [n, r] of o$1.entries()) {
		let a = 0;
		r.image = {
			width: 0,
			height: 0,
			Y: 0
		}, r.sprite && (r.image.width = 48, r.image.height = 48, r.image.Y = a, a = r.image.Y + r.image.height);
		let u = r.wrap && b.wrap, d = Ut(b);
		if (d.fontSize = d.fontSize + 2, d.fontWeight = "bold", j("label", r, u, d, i.data.widthLimit), r.label.Y = a + 8, a = r.label.Y + r.label.height, r.type && r.type.text !== "") {
			r.type.text = "[" + r.type.text + "]";
			j("type", r, u, Ut(b), i.data.widthLimit), r.type.Y = a + 5, a = r.type.Y + r.type.height;
		}
		if (r.descr && r.descr.text !== "") {
			let O = Ut(b);
			O.fontSize = O.fontSize - 2, j("descr", r, u, O, i.data.widthLimit), r.descr.Y = a + 20, a = r.descr.Y + r.descr.height;
		}
		if (n == 0 || n % ee === 0) {
			let O = s.data.startx + b.diagramMarginX, S = s.data.stopy + b.diagramMarginY + a;
			i.setData(O, O, S, S);
		} else {
			let O = i.data.stopx !== i.data.startx ? i.data.stopx + b.diagramMarginX : i.data.startx, S = i.data.starty;
			i.setData(O, O, S, S);
		}
		i.name = r.alias;
		let p = l.db.getC4ShapeArray(r.alias), y$1 = l.db.getC4ShapeKeys(r.alias);
		y$1.length > 0 && Ae(i, e, p, y$1), t = r.alias;
		let E = l.db.getBoundaries(t);
		E.length > 0 && se(e, t, i, E, l), r.alias !== "global" && ke(e, r, i), s.data.stopy = Math.max(i.data.stopy + b.c4ShapeMargin, s.data.stopy), s.data.stopx = Math.max(i.data.stopx + b.c4ShapeMargin, s.data.stopx), Xt = Math.max(Xt, s.data.stopx), Wt = Math.max(Wt, s.data.stopy);
	}
}
m(se, "drawInsideBoundary");
var ye = {
	drawPersonOrSystemArray: Ae,
	drawBoundary: ke,
	setConf: ie,
	draw: /* @__PURE__ */ m(function(e, t, s, o$1) {
		b = yt().c4;
		const l = yt().securityLevel;
		let i;
		l === "sandbox" && (i = gt("#i" + t));
		const n = l === "sandbox" ? gt(i.nodes()[0].contentDocument.body) : gt("body");
		let r = o$1.db;
		o$1.db.setWrap(b.wrap), ve = r.getC4ShapeInRow(), ee = r.getC4BoundaryInRow(), R.debug(`C:${JSON.stringify(b, null, 2)}`);
		const a = l === "sandbox" ? n.select(`[id="${t}"]`) : gt(`[id="${t}"]`);
		z.insertComputerIcon(a), z.insertDatabaseIcon(a), z.insertClockIcon(a);
		let u = new Ee(o$1);
		u.setData(b.diagramMarginX, b.diagramMarginX, b.diagramMarginY, b.diagramMarginY), u.data.widthLimit = screen.availWidth, Xt = b.diagramMarginX, Wt = b.diagramMarginY;
		const d = o$1.db.getTitle();
		se(a, "", u, o$1.db.getBoundaries(""), o$1), z.insertArrowHead(a), z.insertArrowEnd(a), z.insertArrowCrossHead(a), z.insertArrowFilledHead(a), R0(a, o$1.db.getRels(), o$1.db.getC4Shape, o$1), u.data.stopx = Xt, u.data.stopy = Wt;
		const y$1 = u.data;
		let O = y$1.stopy - y$1.starty + 2 * b.diagramMarginY;
		const P = y$1.stopx - y$1.startx + 2 * b.diagramMarginX;
		d && a.append("text").text(d).attr("x", (y$1.stopx - y$1.startx) / 2 - 4 * b.diagramMarginX).attr("y", y$1.starty + b.diagramMarginY), If(a, O, P, b.useMaxWidth);
		const M = d ? 60 : 0;
		a.attr("viewBox", y$1.startx - b.diagramMarginX + " -" + (b.diagramMarginY + M) + " " + P + " " + (O + M)), R.debug("models:", y$1);
	}, "draw")
}, ii = {
	parser: Ue,
	db: te,
	renderer: ye,
	styles: /* @__PURE__ */ m((e) => `.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`, "getStyles"),
	init: /* @__PURE__ */ m(({ c4: e, wrap: t }) => {
		ye.setConf(e), te.setWrap(t);
	}, "init")
};
export { ii as diagram };
