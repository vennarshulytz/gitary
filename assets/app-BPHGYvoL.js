const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/excalidraw-ai-canvas-C9W67411.js","assets/excalidraw-BVZg9Rtv.js","assets/chakra-ui-DL3iEWi3.js","assets/rolldown-runtime-B6ubh40S.js","assets/common-utils-BE1DbrSU.js","assets/excalidraw-Ct_LBRaH.css","assets/react-syntax-highlighter-BONmQ9iw.js","assets/react-markdown-Dc1ste6M.js","assets/zenmark-editor-BQfWPfQs.js","assets/react-utils-Diw1tX7h.js","assets/remark-gfm-CWYf_crh.js","assets/vendor-B06hKXvc.js","assets/zenmark-editor-Cexu_rP5.css","assets/excalidraw-runtime-PDLhesOW.js","assets/custom-monaco-editor-Bszab1L4.js","assets/monaco-C-8YwHo3.js","assets/monaco-KC1S3ze4.css","assets/es-DtRtD8je.js","assets/global-chat-panel-BSkI3HkW.js","assets/opener.service-CPIZIdyP.js"])))=>i.map(i=>d[i]);
import{r as e,s as t,t as n}from"./rolldown-runtime-B6ubh40S.js";import{C as r,D as i,E as a,N as o,O as s,P as c,S as l,T as u,_ as d,a as f,b as p,c as m,d as h,f as g,i as _,k as v,l as y,m as b,n as x,o as S,p as C,r as w,s as T,t as E,u as D,v as O,w as k,x as A,y as j}from"./chakra-ui-DL3iEWi3.js";import{a as M,i as N,r as P}from"./react-syntax-highlighter-BONmQ9iw.js";import{BO as ee,CO as te,GO as F,HO as I,IO as ne,KO as re,LO as ie,RO as ae,SO as oe,TO as se,UO as ce,VO as le,WO as ue,wO as de,zO as fe}from"./excalidraw-BVZg9Rtv.js";import{A as pe,B as me,C as he,D as ge,E as L,G as _e,J as ve,K as ye,M as be,N as xe,O as R,P as Se,Q as Ce,S as we,T as Te,W as Ee,_ as De,b as Oe,dt as ke,et as Ae,g as je,h as Me,it as Ne,j as Pe,k as Fe,lt as Ie,nt as Le,ot as Re,q as ze,rt as Be,st as Ve,tt as He,ut as Ue,v as We,w as Ge,x as Ke,y as qe,z as Je}from"./react-utils-Diw1tX7h.js";import{At as Ye,Bt as Xe,Ct as Ze,Dt as Qe,Et as $e,Ft as et,Gt as tt,Ht as nt,Jt as rt,Kt as it,Lt as at,Mt as ot,Nt as z,Ot as st,Pt as ct,Qt as lt,Rt as ut,St as dt,Tt as ft,Ut as pt,Vt as mt,Wt as ht,Xt as gt,Yt as _t,Zt as vt,_t as yt,bt,ct as xt,dt as St,ft as Ct,gt as wt,ht as Tt,jt as Et,kt as B,lt as Dt,mt as Ot,pt as kt,qt as At,ut as jt,vt as Mt,wt as Nt,xt as Pt,yt as Ft,zt as It}from"./zenmark-editor-BQfWPfQs.js";import{t as Lt}from"./vendor-B06hKXvc.js";import{r as Rt}from"./common-utils-BE1DbrSU.js";import{Tn as zt,wn as Bt}from"./monaco-C-8YwHo3.js";import{t as Vt}from"./react-markdown-Dc1ste6M.js";import{t as Ht}from"./remark-gfm-CWYf_crh.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var V=t(c()),Ut=(0,V.createContext)(null),Wt={didCatch:!1,error:null},Gt=class extends V.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Wt}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(e!==null){var t,n,r=[...arguments];(t=(n=this.props).onReset)==null||t.call(n,{args:r,reason:`imperative-api`}),this.setState(Wt)}}componentDidCatch(e,t){var n,r;(n=(r=this.props).onError)==null||n.call(r,e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:r}=this.props;if(n&&t.error!==null&&Kt(e.resetKeys,r)){var i,a;(i=(a=this.props).onReset)==null||i.call(a,{next:r,prev:e.resetKeys,reason:`keys`}),this.setState(Wt)}}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:a}=this.state,o=e;if(i){let e={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof t==`function`)o=t(e);else if(n)o=(0,V.createElement)(n,e);else if(r!==void 0)o=r;else throw a}return(0,V.createElement)(Ut.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}};function Kt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}var qt=t(k(),1),H=t(o(),1),Jt=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},Yt=(e=>e?Jt(e):Jt),Xt=e=>e;function Zt(e,t=Xt){let n=V.useSyncExternalStore(e.subscribe,V.useCallback(()=>t(e.getState()),[e,t]),V.useCallback(()=>t(e.getInitialState()),[e,t]));return V.useDebugValue(n),n}var Qt=e=>{let t=Yt(e),n=e=>Zt(t,e);return Object.assign(n,t),n},$t=(e=>e?Qt(e):Qt);function en(e,t){function n(e){let t=new URLSearchParams(e),n={};for(let[e,r]of t)n[e]=r;return n}let r=RegExp(`^`+t.replace(/:\w+/g,`([\\w-]+)`)+`$`),i=e.match(r);if(i){let r={},a=t.match(/:(\w+)/g)?t.match(/:(\w+)/g).map(e=>e.slice(1)):[];for(let e=1;e<i.length;e++)r[a[e-1]]=i[e];return Object.assign(r,n(location.search)),{match:e,params:r}}else return!1}function tn({error:e,resetErrorBoundary:t}){return(0,H.jsxs)(`div`,{role:`alert`,children:[(0,H.jsx)(`p`,{children:`Something went wrong:`}),(0,H.jsx)(`pre`,{children:e.message}),(0,H.jsx)(`button`,{onClick:t,children:`Try again`})]})}const nn=(e=`componentRegistry`)=>{let t=$t((e,t)=>({registry:{},register:(t,n,r=!1)=>e(e=>e.registry[t]&&!r?e:{registry:{...e.registry,[t]:n}})})),n=(e,t)=>{let n=e[t];if(n)return n;for(let n in e)if(en(t,n))return e[n]},r=e=>t(t=>n(t.registry,e)),i=tn,a=e=>{i=e},o=({type:e})=>(0,H.jsxs)(l,{children:[(0,H.jsxs)(u,{children:[`Unknown component type: `,e]}),(0,H.jsx)(A,{onClick:()=>{q.eventBus.emit(`/welcome`)},children:`返回首页`})]}),s=(e,n,r=!1)=>{t.getState().register(e,n,r)},c=({layout:e})=>{let{type:a,children:s,props:l}=e,u=r(a);if(!u){let e=t.getState().registry;return(0,H.jsx)(n(e,`NotFoundComponent`)||o,{type:a})}return(0,H.jsx)(Gt,{FallbackComponent:i,children:(0,H.jsx)(u,{...l,children:s&&s.map((e,t)=>(0,H.jsx)(c,{layout:e},t))})})};return{register:(e,t,n=!1)=>{s(e,t,n)},render:(e,t=0)=>(0,H.jsx)(c,{layout:e},t),getComponents:()=>t.getState().registry,setFallbackComponent:a,useComponent:r}};function rn(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var an=rn,on=typeof global==`object`&&global&&global.Object===Object&&global,sn=typeof self==`object`&&self&&self.Object===Object&&self,cn=on||sn||Function(`return this`)(),ln=function(){return cn.Date.now()},un=/\s/;function dn(e){for(var t=e.length;t--&&un.test(e.charAt(t)););return t}var fn=dn,pn=/^\s+/;function mn(e){return e&&e.slice(0,fn(e)+1).replace(pn,``)}var hn=mn,gn=cn.Symbol,_n=Object.prototype,vn=_n.hasOwnProperty,yn=_n.toString,bn=gn?gn.toStringTag:void 0;function xn(e){var t=vn.call(e,bn),n=e[bn];try{e[bn]=void 0;var r=!0}catch{}var i=yn.call(e);return r&&(t?e[bn]=n:delete e[bn]),i}var Sn=xn,Cn=Object.prototype.toString;function wn(e){return Cn.call(e)}var Tn=wn,En=`[object Null]`,Dn=`[object Undefined]`,On=gn?gn.toStringTag:void 0;function kn(e){return e==null?e===void 0?Dn:En:On&&On in Object(e)?Sn(e):Tn(e)}var An=kn;function jn(e){return typeof e==`object`&&!!e}var Mn=jn,Nn=`[object Symbol]`;function Pn(e){return typeof e==`symbol`||Mn(e)&&An(e)==Nn}var Fn=Pn,In=NaN,Ln=/^[-+]0x[0-9a-f]+$/i,Rn=/^0b[01]+$/i,zn=/^0o[0-7]+$/i,Bn=parseInt;function Vn(e){if(typeof e==`number`)return e;if(Fn(e))return In;if(an(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=an(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=hn(e);var n=Rn.test(e);return n||zn.test(e)?Bn(e.slice(2),n?2:8):Ln.test(e)?In:+e}var Hn=Vn,Un=`Expected a function`,Wn=Math.max,Gn=Math.min;function Kn(e,t,n){var r,i,a,o,s,c,l=0,u=!1,d=!1,f=!0;if(typeof e!=`function`)throw TypeError(Un);t=Hn(t)||0,an(n)&&(u=!!n.leading,d=`maxWait`in n,a=d?Wn(Hn(n.maxWait)||0,t):a,f=`trailing`in n?!!n.trailing:f);function p(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n),o}function m(e){return l=e,s=setTimeout(_,t),u?p(e):o}function h(e){var n=e-c,r=e-l,i=t-n;return d?Gn(i,a-r):i}function g(e){var n=e-c,r=e-l;return c===void 0||n>=t||n<0||d&&r>=a}function _(){var e=ln();if(g(e))return v(e);s=setTimeout(_,h(e))}function v(e){return s=void 0,f&&r?p(e):(r=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function b(){return s===void 0?o:v(ln())}function x(){var e=ln(),n=g(e);if(r=arguments,i=this,c=e,n){if(s===void 0)return m(c);if(d)return clearTimeout(s),s=setTimeout(_,t),p(c)}return s===void 0&&(s=setTimeout(_,t)),o}return x.cancel=y,x.flush=b,x}var qn=Kn,Jn=`Expected a function`;function Yn(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw TypeError(Jn);return an(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),qn(e,t,{leading:r,maxWait:t,trailing:i})}var Xn=Yn,Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zn.apply(this,arguments)};function Qn(e){return!e||!e.ownerDocument||!e.ownerDocument.defaultView?window:e.ownerDocument.defaultView}function $n(e){return!e||!e.ownerDocument?document:e.ownerDocument}var er=function(e){return Array.prototype.reduce.call(e,function(e,t){var n=t.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,function(e,t){return t.toUpperCase()});switch(t.value){case`true`:e[r]=!0;break;case`false`:e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e},{})};function tr(e,t){var n;e&&(n=e.classList).add.apply(n,t.split(` `))}function nr(e,t){e&&t.split(` `).forEach(function(t){e.classList.remove(t)})}function rr(e){return`.${e.split(` `).join(`.`)}`}var ir=!!(typeof window<`u`&&window.document&&window.document.createElement),ar=Object.freeze({__proto__:null,addClasses:tr,canUseDOM:ir,classNamesToQuery:rr,getElementDocument:$n,getElementWindow:Qn,getOptions:er,removeClasses:nr}),or=null,sr=null;ir&&window.addEventListener(`resize`,function(){sr!==window.devicePixelRatio&&(sr=window.devicePixelRatio,or=null)});function cr(){if(or===null){if(typeof document>`u`)return or=0,or;var e=document.body,t=document.createElement(`div`);t.classList.add(`simplebar-hide-scrollbar`),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),or=n}return or}var lr=Qn,ur=$n,dr=er,fr=tr,pr=nr,mr=rr,hr=function(){function e(t,n){n===void 0&&(n={});var r=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=lr(r.el);r.scrollXTicking||=(e.requestAnimationFrame(r.scrollX),!0),r.scrollYTicking||=(e.requestAnimationFrame(r.scrollY),!0),r.isScrolling||(r.isScrolling=!0,fr(r.el,r.classNames.scrolling)),r.showScrollbar(`x`),r.showScrollbar(`y`),r.onStopScrolling()},this.scrollX=function(){r.axis.x.isOverflowing&&r.positionScrollbar(`x`),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&r.positionScrollbar(`y`),r.scrollYTicking=!1},this._onStopScrolling=function(){pr(r.el,r.classNames.scrolling),r.options.autoHide&&(r.hideScrollbar(`x`),r.hideScrollbar(`y`)),r.isScrolling=!1},this.onMouseEnter=function(){r.isMouseEntering||=(fr(r.el,r.classNames.mouseEntered),r.showScrollbar(`x`),r.showScrollbar(`y`),!0),r.onMouseEntered()},this._onMouseEntered=function(){pr(r.el,r.classNames.mouseEntered),r.options.autoHide&&(r.hideScrollbar(`x`),r.hideScrollbar(`y`)),r.isMouseEntering=!1},this._onMouseMove=function(e){r.mouseX=e.clientX,r.mouseY=e.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis(`x`),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis(`y`)},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis(`x`),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis(`y`),r.mouseX=-1,r.mouseY=-1},this._onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.onPointerEvent=function(e){if(!(!r.axis.x.track.el||!r.axis.y.track.el||!r.axis.x.scrollbar.el||!r.axis.y.scrollbar.el)){var t,n;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(t=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(n=r.isWithinBounds(r.axis.y.track.rect)),(t||n)&&(e.stopPropagation(),e.type===`pointerdown`&&e.pointerType!==`touch`&&(t&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(e,`x`):r.onTrackClick(e,`x`)),n&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(e,`y`):r.onTrackClick(e,`y`))))}},this.drag=function(t){if(!(!r.draggedAxis||!r.contentWrapperEl)){var n,i=r.axis[r.draggedAxis].track,a=i.rect?.[r.axis[r.draggedAxis].sizeAttr]??0,o=r.axis[r.draggedAxis].scrollbar,s=r.contentWrapperEl?.[r.axis[r.draggedAxis].scrollSizeAttr]??0,c=parseInt(r.elStyles?.[r.axis[r.draggedAxis].sizeAttr]??`0px`,10);t.preventDefault(),t.stopPropagation(),n=r.draggedAxis===`y`?t.pageY:t.pageX;var l=n-(i.rect?.[r.axis[r.draggedAxis].offsetAttr]??0)-r.axis[r.draggedAxis].dragOffset;l=r.draggedAxis===`x`&&r.isRtl?(i.rect?.[r.axis[r.draggedAxis].sizeAttr]??0)-o.size-l:l;var u=l/(a-o.size)*(s-c);r.draggedAxis===`x`&&r.isRtl&&(u=e.getRtlHelpers()?.isScrollingToNegative?-u:u),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=u}},this.onEndDrag=function(e){r.isDragging=!1;var t=ur(r.el),n=lr(r.el);e.preventDefault(),e.stopPropagation(),pr(r.el,r.classNames.dragging),r.onStopScrolling(),t.removeEventListener(`mousemove`,r.drag,!0),t.removeEventListener(`mouseup`,r.onEndDrag,!0),r.removePreventClickId=n.setTimeout(function(){t.removeEventListener(`click`,r.preventClick,!0),t.removeEventListener(`dblclick`,r.preventClick,!0),r.removePreventClickId=null})},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=Zn(Zn({},e.defaultOptions),n),this.classNames=Zn(Zn({},e.defaultOptions.classNames),n.classNames),this.axis={x:{scrollOffsetAttr:`scrollLeft`,sizeAttr:`width`,scrollSizeAttr:`scrollWidth`,offsetSizeAttr:`offsetWidth`,offsetAttr:`left`,overflowAttr:`overflowX`,dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:`scrollTop`,sizeAttr:`height`,scrollSizeAttr:`scrollHeight`,offsetSizeAttr:`offsetHeight`,offsetAttr:`top`,overflowAttr:`overflowY`,dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!=`object`||!this.el.nodeName)throw Error(`Argument passed to SimpleBar must be an HTML element instead of ${this.el}`);this.onMouseMove=Xn(this._onMouseMove,64),this.onWindowResize=qn(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=qn(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=qn(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement(`div`);t.innerHTML=`<div class="simplebar-dummy-scrollbar-size"><div></div></div>`;var n=t.firstElementChild,r=n?.firstElementChild;if(!r)return null;document.body.appendChild(n),n.scrollLeft=0;var i=e.getOffset(n),a=e.getOffset(r);n.scrollLeft=-999;var o=e.getOffset(r);return document.body.removeChild(n),e.rtlHelpers={isScrollOriginAtZero:i.left!==a.left,isScrollingToNegative:a.left!==o.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,`::-webkit-scrollbar`).display===`none`||`scrollbarWidth`in document.documentElement.style||`-ms-overflow-style`in document.documentElement.style?0:cr()}catch{return cr()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),n=ur(e),r=lr(e);return{top:t.top+(r.pageYOffset||n.documentElement.scrollTop),left:t.left+(r.pageXOffset||n.documentElement.scrollLeft)}},e.prototype.init=function(){ir&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){this.wrapperEl=this.el.querySelector(mr(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(mr(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(mr(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(mr(this.classNames.offset)),this.maskEl=this.el.querySelector(mr(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,mr(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(mr(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(mr(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,`${mr(this.classNames.track)}${mr(this.classNames.horizontal)}`),this.axis.y.track.el=this.findChild(this.el,`${mr(this.classNames.track)}${mr(this.classNames.vertical)}`),this.axis.x.scrollbar.el=this.axis.x.track.el?.querySelector(mr(this.classNames.scrollbar))||null,this.axis.y.scrollbar.el=this.axis.y.track.el?.querySelector(mr(this.classNames.scrollbar))||null,this.options.autoHide||(fr(this.axis.x.scrollbar.el,this.classNames.visible),fr(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e=this,t,n=lr(this.el);if(this.el.addEventListener(`mouseenter`,this.onMouseEnter),this.el.addEventListener(`pointerdown`,this.onPointerEvent,!0),this.el.addEventListener(`mousemove`,this.onMouseMove),this.el.addEventListener(`mouseleave`,this.onMouseLeave),(t=this.contentWrapperEl)==null||t.addEventListener(`scroll`,this.onScroll),n.addEventListener(`resize`,this.onWindowResize),this.contentEl){if(window.ResizeObserver){var r=!1;this.resizeObserver=new(n.ResizeObserver||ResizeObserver)(function(){r&&n.requestAnimationFrame(function(){e.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),n.requestAnimationFrame(function(){r=!0})}this.mutationObserver=new n.MutationObserver(function(){n.requestAnimationFrame(function(){e.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){this.elStyles=lr(this.el).getComputedStyle(this.el),this.isRtl=this.elStyles.direction===`rtl`;var e=this.contentEl.offsetWidth,t=this.heightAutoObserverEl.offsetHeight<=1,n=this.heightAutoObserverEl.offsetWidth<=1||e>0,r=this.contentWrapperEl.offsetWidth,i=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding=`${this.elStyles.paddingTop} ${this.elStyles.paddingRight} ${this.elStyles.paddingBottom} ${this.elStyles.paddingLeft}`,this.wrapperEl.style.margin=`-${this.elStyles.paddingTop} -${this.elStyles.paddingRight} -${this.elStyles.paddingBottom} -${this.elStyles.paddingLeft}`;var o=this.contentEl.scrollHeight,s=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=t?`auto`:`100%`,this.placeholderEl.style.width=n?`${e||s}px`:`auto`,this.placeholderEl.style.height=`${o}px`;var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=e!==0&&s>e,this.axis.y.isOverflowing=o>c,this.axis.x.isOverflowing=i===`hidden`?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=a===`hidden`?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible===`x`||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible===`y`||this.options.forceVisible===!0,this.hideNativeScrollbar();var l=this.axis.x.isOverflowing?this.scrollbarWidth:0,u=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&s>r-u,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&o>c-l,this.axis.x.scrollbar.size=this.getScrollbarSize(`x`),this.axis.y.scrollbar.size=this.getScrollbarSize(`y`),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width=`${this.axis.x.scrollbar.size}px`),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height=`${this.axis.y.scrollbar.size}px`),this.positionScrollbar(`x`),this.positionScrollbar(`y`),this.toggleTrackVisibility(`x`),this.toggleTrackVisibility(`y`)}},e.prototype.getScrollbarSize=function(e){if(e===void 0&&(e=`y`),!this.axis[e].isOverflowing||!this.contentEl)return 0;var t=this.contentEl[this.axis[e].scrollSizeAttr],n=this.axis[e].track.el?.[this.axis[e].offsetSizeAttr]??0,r=n/t,i=Math.max(~~(r*n),this.options.scrollbarMinSize);return this.options.scrollbarMaxSize&&(i=Math.min(i,this.options.scrollbarMaxSize)),i},e.prototype.positionScrollbar=function(t){t===void 0&&(t=`y`);var n=this.axis[t].scrollbar;if(!(!this.axis[t].isOverflowing||!this.contentWrapperEl||!n.el||!this.elStyles)){var r=this.contentWrapperEl[this.axis[t].scrollSizeAttr],i=this.axis[t].track.el?.[this.axis[t].offsetSizeAttr]||0,a=parseInt(this.elStyles[this.axis[t].sizeAttr],10),o=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];o=t===`x`&&this.isRtl&&e.getRtlHelpers()?.isScrollOriginAtZero?-o:o,t===`x`&&this.isRtl&&(o=e.getRtlHelpers()?.isScrollingToNegative?o:-o);var s=o/(r-a),c=~~((i-n.size)*s);c=t===`x`&&this.isRtl?-c+(i-n.size):c,n.el.style.transform=t===`x`?`translate3d(${c}px, 0, 0)`:`translate3d(0, ${c}px, 0)`}},e.prototype.toggleTrackVisibility=function(e){e===void 0&&(e=`y`);var t=this.axis[e].track.el,n=this.axis[e].scrollbar.el;!t||!n||!this.contentWrapperEl||(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility=`visible`,this.contentWrapperEl.style[this.axis[e].overflowAttr]=`scroll`,this.el.classList.add(`${this.classNames.scrollable}-${e}`)):(t.style.visibility=`hidden`,this.contentWrapperEl.style[this.axis[e].overflowAttr]=`hidden`,this.el.classList.remove(`${this.classNames.scrollable}-${e}`)),this.axis[e].isOverflowing?n.style.display=`block`:n.style.display=`none`)},e.prototype.showScrollbar=function(e){e===void 0&&(e=`y`),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(fr(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){e===void 0&&(e=`y`),!this.isDragging&&this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(pr(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?`left`:`right`]=this.axis.y.isOverflowing||this.axis.y.forceVisible?`-${this.scrollbarWidth}px`:`0px`,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?`-${this.scrollbarWidth}px`:`0px`)},e.prototype.onMouseMoveForAxis=function(e){e===void 0&&(e=`y`);var t=this.axis[e];!t.track.el||!t.scrollbar.el||(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),fr(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?fr(t.scrollbar.el,this.classNames.hover):pr(t.scrollbar.el,this.classNames.hover)):(pr(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){e===void 0&&(e=`y`),pr(this.axis[e].track.el,this.classNames.hover),pr(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){t===void 0&&(t=`y`),this.isDragging=!0;var n=ur(this.el),r=lr(this.el),i=this.axis[t].scrollbar,a=t===`y`?e.pageY:e.pageX;this.axis[t].dragOffset=a-(i.rect?.[this.axis[t].offsetAttr]||0),this.draggedAxis=t,fr(this.el,this.classNames.dragging),n.addEventListener(`mousemove`,this.drag,!0),n.addEventListener(`mouseup`,this.onEndDrag,!0),this.removePreventClickId===null?(n.addEventListener(`click`,this.preventClick,!0),n.addEventListener(`dblclick`,this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var n=this;t===void 0&&(t=`y`);var r=this.axis[t];if(!(!this.options.clickOnTrack||!r.scrollbar.el||!this.contentWrapperEl)){e.preventDefault();var i=lr(this.el);this.axis[t].scrollbar.rect=r.scrollbar.el.getBoundingClientRect();var a=this.axis[t].scrollbar.rect?.[this.axis[t].offsetAttr]??0,o=parseInt(this.elStyles?.[this.axis[t].sizeAttr]??`0px`,10),s=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],c=(t===`y`?this.mouseY-a:this.mouseX-a)<0?-1:1,l=c===-1?s-o:s+o,u=40,d=function(){n.contentWrapperEl&&(c===-1?s>l&&(s-=u,n.contentWrapperEl[n.axis[t].scrollOffsetAttr]=s,i.requestAnimationFrame(d)):s<l&&(s+=u,n.contentWrapperEl[n.axis[t].scrollOffsetAttr]=s,i.requestAnimationFrame(d)))};d()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=lr(this.el);this.el.removeEventListener(`mouseenter`,this.onMouseEnter),this.el.removeEventListener(`pointerdown`,this.onPointerEvent,!0),this.el.removeEventListener(`mousemove`,this.onMouseMove),this.el.removeEventListener(`mouseleave`,this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener(`scroll`,this.onScroll),e.removeEventListener(`resize`,this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(e){return n.call(e,t)})[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:`scrollable content`,tabIndex:0,classNames:{contentEl:`simplebar-content`,contentWrapper:`simplebar-content-wrapper`,offset:`simplebar-offset`,mask:`simplebar-mask`,wrapper:`simplebar-wrapper`,placeholder:`simplebar-placeholder`,scrollbar:`simplebar-scrollbar`,track:`simplebar-track`,heightAutoObserverWrapperEl:`simplebar-height-auto-observer-wrapper`,heightAutoObserverEl:`simplebar-height-auto-observer`,visible:`simplebar-visible`,horizontal:`simplebar-horizontal`,vertical:`simplebar-vertical`,hover:`simplebar-hover`,dragging:`simplebar-dragging`,scrolling:`simplebar-scrolling`,scrollable:`simplebar-scrollable`,mouseEntered:`simplebar-mouse-entered`},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=dr,e.helpers=ar,e}(),gr=function(){return gr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gr.apply(this,arguments)};function _r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var vr=V.forwardRef(function(e,t){var n=e.children,r=e.scrollableNodeProps,i=r===void 0?{}:r,a=_r(e,[`children`,`scrollableNodeProps`]),o=V.useRef(),s=V.useRef(),c=V.useRef(),l={},u={};Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(hr.defaultOptions,e)?l[e]=a[e]:u[e]=a[e]});var d=gr(gr({},hr.defaultOptions.classNames),l.classNames),f=gr(gr({},i),{className:`${d.contentWrapper}${i.className?` ${i.className}`:``}`,tabIndex:l.tabIndex||hr.defaultOptions.tabIndex,role:`region`,"aria-label":l.ariaLabel||hr.defaultOptions.ariaLabel});return V.useEffect(function(){var e;return s.current=f.ref?f.ref.current:s.current,o.current&&(e=new hr(o.current,gr(gr(gr({},l),s.current&&{scrollableNode:s.current}),c.current&&{contentNode:c.current})),typeof t==`function`?t(e):t&&(t.current=e)),function(){e?.unMount(),e=null,typeof t==`function`&&t(null)}},[]),V.createElement(`div`,gr({"data-simplebar":`init`,ref:o},u),V.createElement(`div`,{className:d.wrapper},V.createElement(`div`,{className:d.heightAutoObserverWrapperEl},V.createElement(`div`,{className:d.heightAutoObserverEl})),V.createElement(`div`,{className:d.mask},V.createElement(`div`,{className:d.offset},typeof n==`function`?n({scrollableNodeRef:s,scrollableNodeProps:gr(gr({},f),{ref:s}),contentNodeRef:c,contentNodeProps:{className:d.contentEl,ref:c}}):V.createElement(`div`,gr({},f),V.createElement(`div`,{className:d.contentEl},n)))),V.createElement(`div`,{className:d.placeholder})),V.createElement(`div`,{className:`${d.track} ${d.horizontal}`},V.createElement(`div`,{className:d.scrollbar})),V.createElement(`div`,{className:`${d.track} ${d.vertical}`},V.createElement(`div`,{className:d.scrollbar})))});vr.displayName=`SimpleBar`;const yr=(()=>({isMobile:()=>{let e=!1;return(function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)})(navigator.userAgent||navigator.vendor||window.opera),e}}))(),br=e=>({name:e}),xr=e=>typeof e==`string`?e:e.name;let Sr=function(e){return e.ToggleHome=`client:toggleHome`,e.ToChatPage=`client:toChatPage`,e}({});const Cr=(()=>{let e=new Map,t=new Proxy({},{get(e,t){return e[t]===void 0&&(e[t]=[]),e[t]}}),n=(n,r)=>{e.set(n,r),[...t[n]].forEach(e=>{e();let r=t[n].indexOf(e);t[n].splice(r,1)})},r=(e,t,r)=>{if(typeof t==`string`)n(`${e}.${t}`,r);else for(let r in t)n(`${e}.${r}`,t[r])},i=(e,t)=>{if(typeof e==`string`)n(e,t);else for(let t in e)n(t,e[t])},a=t=>e.has(t),o=(t,...n)=>new Promise((r,i)=>{let a=e.get(t);if(!a)i(Error(`No command named '`+t));else try{r(a(...n))}catch(e){i(e)}}),s=(e,n)=>{a(e)?n():t[e].push(n)};return{registerCommand:i,executeCommand:o,hasCommand:a,onCommandReady:s,executeCommandOnReady:(e,...t)=>new Promise((n,r)=>{s(e,()=>{o(e,...t).then(n).catch(r)})}),registerCommandWithScope:r}})(),wr=(0,V.createContext)({dragDropManager:void 0});function Tr(e){return`Minified Redux error #`+e+`; visit https://redux.js.org/Errors?code=`+e+` for the full message or use the non-minified dev environment for full errors. `}var Er=(function(){return typeof Symbol==`function`&&Symbol.observable||`@@observable`})(),Dr=function(){return Math.random().toString(36).substring(7).split(``).join(`.`)},Or={INIT:`@@redux/INIT`+Dr(),REPLACE:`@@redux/REPLACE`+Dr(),PROBE_UNKNOWN_ACTION:function(){return`@@redux/PROBE_UNKNOWN_ACTION`+Dr()}};function kr(e){if(typeof e!=`object`||!e)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ar(e,t,n){var r;if(typeof t==`function`&&typeof n==`function`||typeof n==`function`&&typeof arguments[3]==`function`)throw Error(Tr(0));if(typeof t==`function`&&n===void 0&&(n=t,t=void 0),n!==void 0){if(typeof n!=`function`)throw Error(Tr(1));return n(Ar)(e,t)}if(typeof e!=`function`)throw Error(Tr(2));var i=e,a=t,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw Error(Tr(3));return a}function d(e){if(typeof e!=`function`)throw Error(Tr(4));if(c)throw Error(Tr(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw Error(Tr(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!kr(e))throw Error(Tr(7));if(e.type===void 0)throw Error(Tr(8));if(c)throw Error(Tr(9));try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,n=0;n<t.length;n++){var r=t[n];r()}return e}function p(e){if(typeof e!=`function`)throw Error(Tr(10));i=e,f({type:Or.REPLACE})}function m(){var e,t=d;return e={subscribe:function(e){if(typeof e!=`object`||!e)throw Error(Tr(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}},e[Er]=function(){return this},e}return f({type:Or.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:p},r[Er]=m,r}function jr(e,t,...n){if(Mr()&&t===void 0)throw Error(`invariant requires an error message argument`);if(!e){let e;if(t===void 0)e=Error(`Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.`);else{let r=0;e=Error(t.replace(/%s/g,function(){return n[r++]})),e.name=`Invariant Violation`}throw e.framesToPop=1,e}}function Mr(){return typeof process<`u`&&!0}function Nr(e,t,n){return t.split(`.`).reduce((e,t)=>e&&e[t]?e[t]:n||null,e)}function U(e,t){return e.filter(e=>e!==t)}function Pr(e){return typeof e==`object`}function Fr(e,t){let n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);let i=[];return n.forEach((e,t)=>{e===1&&i.push(t)}),i}function Ir(e,t){return e.filter(e=>t.indexOf(e)>-1)}const Lr=`dnd-core/INIT_COORDS`,Rr=`dnd-core/BEGIN_DRAG`,zr=`dnd-core/PUBLISH_DRAG_SOURCE`,Br=`dnd-core/HOVER`,Vr=`dnd-core/DROP`,Hr=`dnd-core/END_DRAG`;function Ur(e,t){return{type:Lr,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var Wr={type:Lr,payload:{clientOffset:null,sourceClientOffset:null}};function Gr(e){return function(t=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,o=e.getMonitor(),s=e.getRegistry();e.dispatch(Ur(i)),Kr(t,o,s);let c=Yr(t,o);if(c==null){e.dispatch(Wr);return}let l=null;if(i){if(!a)throw Error(`getSourceClientOffset must be defined`);qr(a),l=a(c)}e.dispatch(Ur(i,l));let u=s.getSource(c).beginDrag(o,c);if(u!=null)return Jr(u),s.pinSource(c),{type:Rr,payload:{itemType:s.getSourceType(c),item:u,sourceId:c,clientOffset:i||null,sourceClientOffset:l||null,isSourcePublic:!!r}}}}function Kr(e,t,n){jr(!t.isDragging(),`Cannot call beginDrag while dragging.`),e.forEach(function(e){jr(n.getSource(e),`Expected sourceIds to be registered.`)})}function qr(e){jr(typeof e==`function`,`When clientOffset is provided, getSourceClientOffset must be a function.`)}function Jr(e){jr(Pr(e),`Item must be an object.`)}function Yr(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Xr(e,t,n[t])})}return e}function Qr(e){return function(t={}){let n=e.getMonitor(),r=e.getRegistry();$r(n),ni(n).forEach((i,a)=>{let o={type:Vr,payload:{dropResult:Zr({},t,ei(i,a,r,n))}};e.dispatch(o)})}}function $r(e){jr(e.isDragging(),`Cannot call drop while not dragging.`),jr(!e.didDrop(),`Cannot call drop twice during one drag operation.`)}function ei(e,t,n,r){let i=n.getTarget(e),a=i?i.drop(r,e):void 0;return ti(a),a===void 0&&(a=t===0?{}:r.getDropResult()),a}function ti(e){jr(e===void 0||Pr(e),`Drop result must either be an object or undefined.`)}function ni(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function ri(e){return function(){let t=e.getMonitor(),n=e.getRegistry();ii(t);let r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:Hr}}}function ii(e){jr(e.isDragging(),`Cannot call endDrag while not dragging.`)}function ai(e,t){return t===null?e===null:Array.isArray(e)?e.some(e=>e===t):e===t}function oi(e){return function(t,{clientOffset:n}={}){si(t);let r=t.slice(0),i=e.getMonitor(),a=e.getRegistry();return li(r,a,i.getItemType()),ci(r,i,a),ui(r,i,a),{type:Br,payload:{targetIds:r,clientOffset:n||null}}}}function si(e){jr(Array.isArray(e),`Expected targetIds to be an array.`)}function ci(e,t,n){jr(t.isDragging(),`Cannot call hover while not dragging.`),jr(!t.didDrop(),`Cannot call hover after drop.`);for(let t=0;t<e.length;t++){let r=e[t];jr(e.lastIndexOf(r)===t,`Expected targetIds to be unique in the passed array.`),jr(n.getTarget(r),`Expected targetIds to be registered.`)}}function li(e,t,n){for(let r=e.length-1;r>=0;r--){let i=e[r];ai(t.getTargetType(i),n)||e.splice(r,1)}}function ui(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}function di(e){return function(){if(e.getMonitor().isDragging())return{type:zr}}}function fi(e){return{beginDrag:Gr(e),publishDragSource:di(e),hover:oi(e),drop:Qr(e),endDrag:ri(e)}}var pi=class{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:t}=this.store;function n(n){return(...r)=>{let i=n.apply(e,r);i!==void 0&&t(i)}}let r=fi(this);return Object.keys(r).reduce((e,t)=>{let i=r[t];return e[t]=n(i),e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}};function mi(e,t){return{x:e.x+t.x,y:e.y+t.y}}function hi(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gi(e){let{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return!t||!n||!r?null:hi(mi(t,r),n)}function _i(e){let{clientOffset:t,initialClientOffset:n}=e;return!t||!n?null:hi(t,n)}const vi=[],yi=[];vi.__IS_NONE__=!0,yi.__IS_ALL__=!0;function bi(e,t){return e===vi?!1:e===yi||t===void 0?!0:Ir(t,e).length>0}var xi=class{subscribeToStateChange(e,t={}){let{handlerIds:n}=t;jr(typeof e==`function`,`listener must be a function.`),jr(n===void 0||Array.isArray(n),`handlerIds, when specified, must be an array of strings.`);let r=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),i=t.stateId;try{i===r||i===r+1&&!bi(t.dirtyHandlerIds,n)||e()}finally{r=i}})}subscribeToOffsetChange(e){jr(typeof e==`function`,`listener must be a function.`);let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return jr(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);return jr(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop()?!1:ai(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);return jr(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic()||this.registry.getSourceType(e)!==this.getItemType()?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:n}=t;if(!this.isDragging())return!1;let r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ai(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let o=a.indexOf(e);return n?o===a.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return gi(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return _i(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}},Si=typeof global<`u`?global:self,Ci=Si.MutationObserver||Si.WebKitMutationObserver;function wi(e){return function(){let t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}function Ti(e){let t=1,n=new Ci(e),r=document.createTextNode(``);return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}const Ei=typeof Ci==`function`?Ti:wi;var Di=class{enqueueTask(e){let{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Ei(this.flush),this.requestErrorThrow=wi(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},Oi=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}},ki=class{create(e){let t=this.freeTasks,n=t.length?t.pop():new Oi(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}},Ai=new Di,ji=new ki(Ai.registerPendingError);function Mi(e){Ai.enqueueTask(ji.create(e))}const Ni=`dnd-core/ADD_SOURCE`,Pi=`dnd-core/ADD_TARGET`,Fi=`dnd-core/REMOVE_SOURCE`,Ii=`dnd-core/REMOVE_TARGET`;function Li(e){return{type:Ni,payload:{sourceId:e}}}function Ri(e){return{type:Pi,payload:{targetId:e}}}function zi(e){return{type:Fi,payload:{sourceId:e}}}function Bi(e){return{type:Ii,payload:{targetId:e}}}function Vi(e){jr(typeof e.canDrag==`function`,`Expected canDrag to be a function.`),jr(typeof e.beginDrag==`function`,`Expected beginDrag to be a function.`),jr(typeof e.endDrag==`function`,`Expected endDrag to be a function.`)}function Hi(e){jr(typeof e.canDrop==`function`,`Expected canDrop to be a function.`),jr(typeof e.hover==`function`,`Expected hover to be a function.`),jr(typeof e.drop==`function`,`Expected beginDrag to be a function.`)}function Ui(e,t){if(t&&Array.isArray(e)){e.forEach(e=>Ui(e,!1));return}jr(typeof e==`string`||typeof e==`symbol`,t?`Type can only be a string, a symbol, or an array of either.`:`Type can only be a string or a symbol.`)}var Wi;(function(e){e.SOURCE=`SOURCE`,e.TARGET=`TARGET`})(Wi||={});var Gi=0;function Ki(){return Gi++}function qi(e){let t=Ki().toString();switch(e){case Wi.SOURCE:return`S${t}`;case Wi.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}function Ji(e){switch(e[0]){case`S`:return Wi.SOURCE;case`T`:return Wi.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function Yi(e,t){let n=e.entries(),r=!1;do{let{done:e,value:[,i]}=n.next();if(i===t)return!0;r=!!e}while(!r);return!1}var Xi=class{addSource(e,t){Ui(e),Vi(t);let n=this.addHandler(Wi.SOURCE,e,t);return this.store.dispatch(Li(n)),n}addTarget(e,t){Ui(e,!0),Hi(t);let n=this.addHandler(Wi.TARGET,e,t);return this.store.dispatch(Ri(n)),n}containsHandler(e){return Yi(this.dragSources,e)||Yi(this.dropTargets,e)}getSource(e,t=!1){return jr(this.isSourceId(e),`Expected a valid source ID.`),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return jr(this.isTargetId(e),`Expected a valid target ID.`),this.dropTargets.get(e)}getSourceType(e){return jr(this.isSourceId(e),`Expected a valid source ID.`),this.types.get(e)}getTargetType(e){return jr(this.isTargetId(e),`Expected a valid target ID.`),this.types.get(e)}isSourceId(e){return Ji(e)===Wi.SOURCE}isTargetId(e){return Ji(e)===Wi.TARGET}removeSource(e){jr(this.getSource(e),`Expected an existing source.`),this.store.dispatch(zi(e)),Mi(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){jr(this.getTarget(e),`Expected an existing target.`),this.store.dispatch(Bi(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);jr(t,`Expected an existing source.`),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){jr(this.pinnedSource,`No source is pinned at the time.`),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){let r=qi(e);return this.types.set(r,t),e===Wi.SOURCE?this.dragSources.set(r,n):e===Wi.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}};const Zi=(e,t)=>e===t;function Qi(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function $i(e,t,n=Zi){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function ea(e=vi,t){switch(t.type){case Br:break;case Ni:case Pi:case Ii:case Fi:return vi;case Rr:case zr:case Hr:case Vr:default:return yi}let{targetIds:n=[],prevTargetIds:r=[]}=t.payload,i=Fr(n,r);if(!(i.length>0||!$i(n,r)))return vi;let a=r[r.length-1],o=n[n.length-1];return a!==o&&(a&&i.push(a),o&&i.push(o)),i}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ta(e,t,n[t])})}return e}var ra={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ia(e=ra,t){let{payload:n}=t;switch(t.type){case Lr:case Rr:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Br:return Qi(e.clientOffset,n.clientOffset)?e:na({},e,{clientOffset:n.clientOffset});case Hr:case Vr:return ra;default:return e}}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){aa(e,t,n[t])})}return e}var sa={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function ca(e=sa,t){let{payload:n}=t;switch(t.type){case Rr:return oa({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case zr:return oa({},e,{isSourcePublic:!0});case Br:return oa({},e,{targetIds:n.targetIds});case Ii:return e.targetIds.indexOf(n.targetId)===-1?e:oa({},e,{targetIds:U(e.targetIds,n.targetId)});case Vr:return oa({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Hr:return oa({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function la(e=0,t){switch(t.type){case Ni:case Pi:return e+1;case Fi:case Ii:return e-1;default:return e}}function ua(e=0){return e+1}function da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){da(e,t,n[t])})}return e}function pa(e={},t){return{dirtyHandlerIds:ea(e.dirtyHandlerIds,{type:t.type,payload:fa({},t.payload,{prevTargetIds:Nr(e,`dragOperation.targetIds`,[])})}),dragOffset:ia(e.dragOffset,t),refCount:la(e.refCount,t),dragOperation:ca(e.dragOperation,t),stateId:ua(e.stateId)}}function ma(e,t=void 0,n={},r=!1){let i=ha(r),a=new pi(i,new xi(i,new Xi(i))),o=e(a,t,n);return a.receiveBackend(o),a}function ha(e){let t=typeof window<`u`&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ar(pa,e&&t&&t({name:`dnd-core`,instanceId:`dnd-core`}))}function ga(e,t){if(e==null)return{};var n=_a(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _a(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var va=0,ya=Symbol.for(`__REACT_DND_CONTEXT_INSTANCE__`),ba=(0,V.memo)(function(e){var{children:t}=e;let[n,r]=xa(ga(e,[`children`]));return(0,V.useEffect)(()=>{if(r){let e=Ca();return++va,()=>{--va===0&&(e[ya]=null)}}},[]),(0,H.jsx)(wr.Provider,{value:n,children:t})});function xa(e){return`manager`in e?[{dragDropManager:e.manager},!1]:[Sa(e.backend,e.context,e.options,e.debugMode),!e.context]}function Sa(e,t=Ca(),n,r){let i=t;return i[ya]||(i[ya]={dragDropManager:ma(e,t,n,r)}),i[ya]}function Ca(){return typeof global<`u`?global:window}var wa=n(((e,t)=>{t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t==`object`&&typeof n==`object`){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}}));const Ta=typeof window<`u`?V.useLayoutEffect:V.useEffect;var Ea=t(wa(),1);function Da(e,t,n){let[r,i]=(0,V.useState)(()=>t(e)),a=(0,V.useCallback)(()=>{let a=t(e);(0,Ea.default)(r,a)||(i(a),n&&n())},[r,e,n]);return Ta(a),[r,a]}function Oa(e,t,n){let[r,i]=Da(e,t,n);return Ta(function(){let t=e.getHandlerId();if(t!=null)return e.subscribeToStateChange(i,{handlerIds:[t]})},[e,i]),r}function ka(e,t,n){return Oa(t,e||(()=>({})),()=>n.reconnect())}function Aa(e,t){let n=[...t||[]];return t==null&&typeof e!=`function`&&n.push(e),(0,V.useMemo)(()=>typeof e==`function`?e():e,n)}function ja(e){return(0,V.useMemo)(()=>e.hooks.dragSource(),[e])}function Ma(e){return(0,V.useMemo)(()=>e.hooks.dragPreview(),[e])}var Na=!1,Pa=!1,Fa=class{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){jr(!Na,`You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return Na=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Na=!1}}isDragging(){if(!this.sourceId)return!1;jr(!Pa,`You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return Pa=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Pa=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}},Ia=!1,La=class{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;jr(!Ia,`You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor`);try{return Ia=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ia=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}};function Ra(e,t,n){let r=n.getRegistry(),i=r.addTarget(e,t);return[i,()=>r.removeTarget(i)]}function za(e,t,n){let r=n.getRegistry(),i=r.addSource(e,t);return[i,()=>r.removeSource(i)]}function Ba(e,t,n,r){let i=n?n.call(r,e,t):void 0;if(i!==void 0)return!!i;if(e===t)return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;let a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<a.length;o++){let c=a[o];if(!s(c))return!1;let l=e[c],u=t[c];if(i=n?n.call(r,l,u,c):void 0,i===!1||i===void 0&&l!==u)return!1}return!0}function Va(e){return typeof e==`object`&&!!e&&Object.prototype.hasOwnProperty.call(e,`current`)}function Ha(e){if(typeof e.type==`string`)return;let t=e.type.displayName||e.type.name||`the component`;throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function Ua(e){return(t=null,n=null)=>{if(!(0,V.isValidElement)(t)){let r=t;return e(r,n),r}let r=t;return Ha(r),Ka(r,n?t=>e(t,n):e)}}function Wa(e){let t={};return Object.keys(e).forEach(n=>{let r=e[n];if(n.endsWith(`Ref`))t[n]=e[n];else{let e=Ua(r);t[n]=()=>e}}),t}function Ga(e,t){typeof e==`function`?e(t):e.current=t}function Ka(e,t){let n=e.ref;return jr(typeof n!=`string`,`Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs`),n?(0,V.cloneElement)(e,{ref:e=>{Ga(n,e),Ga(t,e)}}):(0,V.cloneElement)(e,{ref:t})}var qa=class{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){let t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Ba(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Ba(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&=(this.dragSourceUnsubscribe(),void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Wa({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,Va(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,Va(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}},Ja=class{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Ba(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&=(this.unsubscribeDropTarget(),void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Wa({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,Va(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}};function Ya(){let{dragDropManager:e}=(0,V.useContext)(wr);return jr(e!=null,`Expected drag drop context`),e}function Xa(e,t){let n=Ya(),r=(0,V.useMemo)(()=>new qa(n.getBackend()),[n]);return Ta(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),Ta(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function Za(){let e=Ya();return(0,V.useMemo)(()=>new Fa(e),[e])}var Qa=class{beginDrag(){let e=this.spec,t=this.monitor,n=null;return n=typeof e.item==`object`?e.item:typeof e.item==`function`?e.item(t):{},n??null}canDrag(){let e=this.spec,t=this.monitor;return typeof e.canDrag==`boolean`?e.canDrag:typeof e.canDrag==`function`?e.canDrag(t):!0}isDragging(e,t){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}};function $a(e,t,n){let r=(0,V.useMemo)(()=>new Qa(e,t,n),[t,n]);return(0,V.useEffect)(()=>{r.spec=e},[e]),r}function eo(e){return(0,V.useMemo)(()=>{let t=e.type;return jr(t!=null,`spec.type must be defined`),t},[e])}function to(e,t,n){let r=Ya(),i=$a(e,t,n),a=eo(e);Ta(function(){if(a!=null){let[e,o]=za(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o}},[r,t,n,i,a])}function no(e,t){let n=Aa(e,t);jr(!n.begin,`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);let r=Za(),i=Xa(n.options,n.previewOptions);return to(n,r,i),[ka(n.collect,r,i),ja(i),Ma(i)]}function ro(e){return(0,V.useMemo)(()=>e.hooks.dropTarget(),[e])}function io(e){let t=Ya(),n=(0,V.useMemo)(()=>new Ja(t.getBackend()),[t]);return Ta(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function ao(){let e=Ya();return(0,V.useMemo)(()=>new La(e),[e])}function oo(e){let{accept:t}=e;return(0,V.useMemo)(()=>(jr(e.accept!=null,`accept must be defined`),Array.isArray(t)?t:[t]),[t])}var so=class{canDrop(){let e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}};function co(e,t){let n=(0,V.useMemo)(()=>new so(e,t),[t]);return(0,V.useEffect)(()=>{n.spec=e},[e]),n}function lo(e,t,n){let r=Ya(),i=co(e,t),a=oo(e);Ta(function(){let[e,o]=Ra(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o},[r,t,i,n,a.map(e=>e.toString()).join(`|`)])}function uo(e,t){let n=Aa(e,t),r=ao(),i=io(n.options);return lo(n,r,i),[ka(n.collect,r,i),ro(i)]}var fo={Activity:`activity`},po={};const mo=(e,t,n)=>{if(t===n)return e;let r=e.slice(0,Math.min(t,n)),i=e.slice(Math.max(t,n)+1),a=e.slice(Math.min(t,n)+1,Math.max(t,n)),o=e[t],s=e[n];return t<n?[...r,...a,s,o,...i]:[...r,o,s,...a,...i]},ho=({id:e,index:t,moveItem:n,children:r,style:i,className:a})=>{let o=(0,V.useRef)(null),[{handlerId:s},c]=uo({accept:fo.Activity,collect(e){return{handlerId:e.getHandlerId()}},hover(e,r){if(!o.current)return;let i=e.index,a=t;if(i===a)return;let s=o.current?.getBoundingClientRect(),c=(s.bottom-s.top)/2,l=r.getClientOffset().y-s.top;i<a&&l<c||i>a&&l>c||(n(i,a),e.index=a)}}),[{isDragging:l},u]=no({type:fo.Activity,item:()=>({id:e,index:t}),collect:e=>({isDragging:e.isDragging()})});return u(c(o)),(0,H.jsx)(`div`,{className:`draggable ${a||``} ${l?`is-dragging`:``}`,ref:o,style:{...po,...i},"data-handler-id":s,children:r})},go=(e,{extraContext:t,isHook:n}={})=>{let r=V.createContext(void 0);return{useInstace:n?e:(...t)=>(0,V.useMemo)(()=>e(...t),[]),Provider:({children:e,value:n})=>(0,H.jsx)(r.Provider,{value:n,children:t?(0,H.jsx)(t.Provider,{value:n,children:e}):e}),useExistingInstance:()=>(0,V.useContext)(r),create:n?void 0:e}};function _o(e){return lt(e?.lift)}function vo(e){return function(t){if(_o(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError(`Unable to lift unknown Observable type`)}}function yo(e,t,n,r,i){return new bo(e,t,n,r,i)}var bo=function(e){I(t,e);function t(t,n,r,i,a,o){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)==null||t.call(this))}},t}(rt),xo=function(e){I(t,e);function t(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(t.prototype,`value`,{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(pt),So=function(e){I(t,e);function t(t,n){return e.call(this)||this}return t.prototype.schedule=function(e,t){return t===void 0&&(t=0),this},t}(gt),Co={setInterval:function(e,t){var n=[...arguments].slice(2),r=Co.delegate;return r?.setInterval?r.setInterval.apply(r,F([e,t],ue(n))):setInterval.apply(void 0,F([e,t],ue(n)))},clearInterval:function(e){return(Co.delegate?.clearInterval||clearInterval)(e)},delegate:void 0},wo=function(e){I(t,e);function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return t.prototype.schedule=function(e,t){if(t===void 0&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id??this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return n===void 0&&(n=0),Co.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return t;t!=null&&Co.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error(`executing a cancelled action`);this.pending=!1;var n=this._execute(e,t);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r;try{this.work(e)}catch(e){n=!0,r=e||Error(`Scheduled action threw falsy error`)}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,r=t.scheduler,i=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,vt(i,this),n!=null&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(So),To=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=nt.now,e}(),Eo=new(function(e){I(t,e);function t(t,n){n===void 0&&(n=To.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return t.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(To))(wo);function Do(e){return e&&lt(e.schedule)}function Oo(e){return e[e.length-1]}function ko(e){return lt(Oo(e))?e.pop():void 0}function Ao(e){return Do(Oo(e))?e.pop():void 0}var jo=(function(e){return e&&typeof e.length==`number`&&typeof e!=`function`});function Mo(e){return lt(e?.then)}function No(e){return lt(e[it])}function Po(e){return Symbol.asyncIterator&&lt(e?.[Symbol.asyncIterator])}function Fo(e){return TypeError(`You provided `+(typeof e==`object`&&e?`an invalid object`:`'`+e+`'`)+` where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Io(){return typeof Symbol!=`function`||!Symbol.iterator?`@@iterator`:Symbol.iterator}var Lo=Io();function Ro(e){return lt(e?.[Lo])}function zo(e){return ae(this,arguments,function(){var t,n,r,i;return ce(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,ee(t.read())];case 3:return n=a.sent(),r=n.value,i=n.done,i?[4,ee(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,ee(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Bo(e){return lt(e?.getReader)}function Vo(e){if(e instanceof ht)return e;if(e!=null){if(No(e))return Ho(e);if(jo(e))return Uo(e);if(Mo(e))return Wo(e);if(Po(e))return Ko(e);if(Ro(e))return Go(e);if(Bo(e))return qo(e)}throw Fo(e)}function Ho(e){return new ht(function(t){var n=e[it]();if(lt(n.subscribe))return n.subscribe(t);throw TypeError(`Provided object does not correctly implement Symbol.observable`)})}function Uo(e){return new ht(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Wo(e){return new ht(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,_t)})}function Go(e){return new ht(function(t){var n,r;try{for(var i=re(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.next(o),t.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Ko(e){return new ht(function(t){Jo(e,t).catch(function(e){return t.error(e)})})}function qo(e){return Ko(zo(e))}function Jo(e,t){var n,r,i,a;return le(this,void 0,void 0,function(){var o,s;return ce(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=fe(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Yo(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Xo(e,t){return t===void 0&&(t=0),vo(function(n,r){n.subscribe(yo(r,function(n){return Yo(r,e,function(){return r.next(n)},t)},function(){return Yo(r,e,function(){return r.complete()},t)},function(n){return Yo(r,e,function(){return r.error(n)},t)}))})}function Zo(e,t){return t===void 0&&(t=0),vo(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Qo(e,t){return Vo(e).pipe(Zo(t),Xo(t))}function $o(e,t){return Vo(e).pipe(Zo(t),Xo(t))}function W(e,t){return new ht(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function es(e,t){return new ht(function(n){var r;return Yo(n,t,function(){r=e[Lo](),Yo(n,t,function(){var e,t,i;try{e=r.next(),t=e.value,i=e.done}catch(e){n.error(e);return}i?n.complete():n.next(t)},0,!0)}),function(){return lt(r?.return)&&r.return()}})}function ts(e,t){if(!e)throw Error(`Iterable cannot be null`);return new ht(function(n){Yo(n,t,function(){var r=e[Symbol.asyncIterator]();Yo(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function ns(e,t){return ts(zo(e),t)}function rs(e,t){if(e!=null){if(No(e))return Qo(e,t);if(jo(e))return W(e,t);if(Mo(e))return $o(e,t);if(Po(e))return ts(e,t);if(Ro(e))return es(e,t);if(Bo(e))return ns(e,t)}throw Fo(e)}function is(e,t){return t?rs(e,t):Vo(e)}function as(){var e=[...arguments];return is(e,Ao(e))}function os(e,t){return vo(function(n,r){var i=0;n.subscribe(yo(r,function(n){r.next(e.call(t,n,i++))}))})}var ss=Array.isArray;function cs(e,t){return ss(t)?e.apply(void 0,F([],ue(t))):e(t)}function ls(e){return os(function(t){return cs(e,t)})}var us=Array.isArray,ds=Object.getPrototypeOf,fs=Object.prototype,ps=Object.keys;function ms(e){if(e.length===1){var t=e[0];if(us(t))return{args:t,keys:null};if(hs(t)){var n=ps(t);return{args:n.map(function(e){return t[e]}),keys:n}}}return{args:e,keys:null}}function hs(e){return e&&typeof e==`object`&&ds(e)===fs}function gs(e,t){return e.reduce(function(e,n,r){return e[n]=t[r],e},{})}function _s(){var e=[...arguments],t=Ao(e),n=ko(e),r=ms(e),i=r.args,a=r.keys;if(i.length===0)return is([],t);var o=new ht(vs(i,t,a?function(e){return gs(a,e)}:tt));return n?o.pipe(ls(n)):o}function vs(e,t,n){return n===void 0&&(n=tt),function(r){ys(t,function(){for(var i=e.length,a=Array(i),o=i,s=i,c=function(i){ys(t,function(){var c=is(e[i],t),l=!1;c.subscribe(yo(r,function(e){a[i]=e,l||(l=!0,s--),s||r.next(n(a.slice()))},function(){--o||r.complete()}))},r)},l=0;l<i;l++)c(l)},r)}}function ys(e,t,n){e?Yo(n,e,t):t()}function bs(e){return new ht(function(t){Vo(e()).subscribe(t)})}function xs(){var e=[...arguments],t=ko(e),n=ms(e),r=n.args,i=n.keys,a=new ht(function(e){var t=r.length;if(!t){e.complete();return}for(var n=Array(t),a=t,o=t,s=function(t){var s=!1;Vo(r[t]).subscribe(yo(e,function(e){s||(s=!0,o--),n[t]=e},function(){return a--},void 0,function(){(!a||!s)&&(o||e.next(i?gs(i,n):n),e.complete())}))},c=0;c<t;c++)s(c)});return t?a.pipe(ls(t)):a}function Ss(e,t){return vo(function(n,r){var i=0;n.subscribe(yo(r,function(n){return e.call(t,n,i++)&&r.next(n)}))})}function Cs(e){return vo(function(t,n){var r=null,i=!1,a;r=t.subscribe(yo(n,void 0,void 0,function(o){a=Vo(e(o,Cs(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function ws(e,t){return t===void 0&&(t=Eo),vo(function(n,r){var i=null,a=null,o=null,s=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,r.next(e)}};function c(){var n=o+e,a=t.now();if(a<n){i=this.schedule(void 0,n-a),r.add(i);return}s()}n.subscribe(yo(r,function(n){a=n,o=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){s(),r.complete()},void 0,function(){a=i=null}))})}function Ts(e,t){return t===void 0&&(t=tt),e??=Es,vo(function(n,r){var i,a=!0;n.subscribe(yo(r,function(n){var o=t(n);(a||!e(i,o))&&(a=!1,i=o,r.next(n))}))})}function Es(e,t){return e===t}function Ds(e){return vo(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function Os(){return vo(function(e,t){var n,r=!1;e.subscribe(yo(t,function(e){var i=n;n=e,r&&t.next([i,e]),r=!0}))})}function ks(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new pt}:t,r=e.resetOnError,i=r===void 0?!0:r,a=e.resetOnComplete,o=a===void 0?!0:a,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(e){var t,r,a,s=0,l=!1,u=!1,d=function(){r?.unsubscribe(),r=void 0},f=function(){d(),t=a=void 0,l=u=!1},p=function(){var e=t;f(),e?.unsubscribe()};return vo(function(e,m){s++,!u&&!l&&d();var h=a??=n();m.add(function(){s--,s===0&&!u&&!l&&(r=As(p,c))}),h.subscribe(m),!t&&s>0&&(t=new At({next:function(e){return h.next(e)},error:function(e){u=!0,d(),r=As(f,i,e),h.error(e)},complete:function(){l=!0,d(),r=As(f,o),h.complete()}}),Vo(e).subscribe(t))})(e)}}function As(e,t){var n=[...arguments].slice(2);if(t===!0){e();return}if(t!==!1){var r=new At({next:function(){r.unsubscribe(),e()}});return Vo(t.apply(void 0,F([],ue(n)))).subscribe(r)}}function js(e,t,n){var r,i,a,o,s=!1;return e&&typeof e==`object`?(r=e.bufferSize,o=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,a=e.refCount,s=a===void 0?!1:a,n=e.scheduler):o=e??1/0,ks({connector:function(){return new mt(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Ms(e){return Ss(function(t,n){return e<=n})}function Ns(e,t){return vo(function(n,r){var i=null,a=0,o=!1,s=function(){return o&&!i&&r.complete()};n.subscribe(yo(r,function(n){i?.unsubscribe();var o=0,c=a++;Vo(e(n,c)).subscribe(i=yo(r,function(e){return r.next(t?t(n,e,c,o++):e)},function(){i=null,s()}))},function(){o=!0,s()}))})}function Ps(e,t,n){var r=lt(e)||t||n?{next:e,error:t,complete:n}:e;return r?vo(function(e,t){var n;(n=r.subscribe)==null||n.call(r);var i=!0;e.subscribe(yo(t,function(e){var n;(n=r.next)==null||n.call(r,e),t.next(e)},function(){var e;i=!1,(e=r.complete)==null||e.call(r),t.complete()},function(e){var n;i=!1,(n=r.error)==null||n.call(r,e),t.error(e)},function(){var e,t;i&&((e=r.unsubscribe)==null||e.call(r)),(t=r.finalize)==null||t.call(r)}))}):tt}const Fs=(e,t)=>({...e,...t?.(e)}),Is=e=>{let t=e.$$meta.key;return{...e,[`use${t}`]:()=>{let[n,r]=(0,V.useState)(e[`get${t}`]());return(0,V.useEffect)(()=>{let n=e[`${t}$`].pipe(Ts()).subscribe(e=>{r(e)});return()=>n.unsubscribe()},[]),n}}},Ls=(e,t)=>({[`get${e}`]:()=>t.getValue(),[`set${e}`]:e=>t.next(e),[`subscribe${e}`]:e=>{let n=t.subscribe(e);return()=>n.unsubscribe()},[`${e}$`]:t.asObservable(),$$meta:{key:e}}),Rs=(e,t,n)=>{let r=new xo(n);return t.subscribe(r),Ls(e,r)},zs=(e,t)=>Ls(e,new xo(t)),Bs=(e,t)=>Is(zs(e,t)),Vs=(e,t,n)=>Fs(Bs(e,t),n);var Hs=e=>e.$$meta.key,Us=e=>e[`get${e.$$meta.key}`],Ws=e=>e[`set${e.$$meta.key}`],Gs=e=>e[`subscribe${e.$$meta.key}`],Ks=e=>e[`${e.$$meta.key}$`],qs=e=>e[`use${e.$$meta.key}`],Js=class{static getKey=Hs;static getGetter=Us;static getSetter=Ws;static getSubscriber=Gs;static getObservable=Ks;static getUser=qs};Fs(Is(zs(`Example`,`Hello`)),e=>({doSomething:()=>{e.setExample(`Hello World`)}}));var Ys=(()=>{let e=!1,t=[];return{isFrozen:()=>e,freeze:()=>{e=!0},unfreeze:()=>{for(;t.length>0;)t.shift()();e=!1},submit:n=>{e?t.push(n):n()}}})(),Xs=class extends xo{next(e){Ys.submit(()=>super.next(e))}},Zs=(e,t)=>{if(t){let n=t.split(`::`),r=e.data;for(let e=0;e<n.length;e+=1){if(!r[n[e]])return r[n[e]];r=r[n[e]]}return r}else return e.data},Qs=e=>typeof e==`object`&&e?Array.isArray(e)?[...e]:{...e}:e,$s=(e,t,n,r)=>{let i=Zs(e,n);if(r===i)return;let a=(e,t,n)=>{t!==n&&e.$.next(t),Object.entries(e.children).forEach(([e,r])=>{a(r,t?.[e],n?.[e])})};if(Ys.freeze(),!n)e.data=r,a(t,r,i);else{let o=n.split(`::`),s=e.data,c=t,l=[[c,s,void 0]];for(let e=0;e<o.length-1;e+=1)s[o[e]]===void 0&&(s[o[e]]={}),s=s[o[e]],c=c?.children[o[e]],l.push([c,s,o[e]]);let u=c?.children[o[o.length-1]];l.push([u,r,o[o.length-1]]);let d=[],f=[],p,m;for(let e=l.length-1;e>=0;--e){let[t,n,r]=l[e];if(e===l.length-1)f.unshift([t,n]),p=r,m=n;else{let e=Qs(n);e[p]=m,f.unshift([t,e]),p=r,m=e}}e.data=m;for(let e=0;e<f.length;e+=1){let[t,n]=f[e];if(t)d.push(()=>t.$.next(n));else break}d.reverse().forEach(e=>e()),u&&Object.entries(u.children).forEach(([e,t])=>{a(t,r?.[e],i?.[e])})}Ys.unfreeze()},ec=(e,t,n)=>{if(n){let r=n.split(`::`),i=e.data,a=t;for(let e=0;e<r.length;e+=1)e<r.length-1&&i[r[e]]===void 0&&(i[r[e]]={}),a.children[r[e]]===void 0&&(a.children[r[e]]={$:new Xs(i[r[e]]),children:{}}),i=i[r[e]],a=a.children[r[e]];return a}else return t},tc=(e,t,n)=>{let{$:r}=ec(e,t,n),[i,a]=(0,V.useState)(()=>r.getValue());return(0,V.useEffect)(()=>{let e=r.subscribe(e=>{a(e)});return()=>e.unsubscribe()},[r]),(0,V.useEffect)(()=>{console.log(`$ changed`)},[r]),(0,V.useEffect)(()=>{console.log(`dataTree changed:`,e)},[e]),(0,V.useEffect)(()=>{console.log(`controlTree changed:`,t)},[t]),(0,V.useEffect)(()=>{console.log(`path changed:`,n)},[n]),i},nc=(e,t,n)=>{let r=t||{$:new Xs(e.data),children:{}},i=e=>n?`${n}::${e}`:e;return new Proxy({$$isBean:!0},{ownKeys(e){return Reflect.ownKeys(e).concat([`use`,`get`,`set`,`$`,`namespaces`])},get(t,a){if(a in t)return t[a];if(typeof a==`string`){if([`$`,`get`,`set`,`use`].includes(a)){let t=ec(e,r,n);if(a===`$`)return t.$;if(a===`get`)return t.get||=()=>Zs(e,n),t.get;if(a===`set`)return t.set||=t=>$s(e,r,n,typeof t==`function`?t(Zs(e,n)):t),t.set;if(a===`use`)return t.use||=()=>tc(e,r,n),t.use}else if(a===`namespaces`)return new Proxy({},{get(t,n){return nc(e,r,i(n))}})}else return t[a]}})};const rc=(e,t,n)=>nc({data:e},t,n),ic={memory:(()=>{let e=new Map;return{set:(t,n)=>{e.set(t,n)},get:t=>e.get(t),remove:t=>e.delete(t)}})(),localStorage:{set:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},get:e=>{let t=localStorage.getItem(e);if(t!==`undefined`)return t&&JSON.parse(t)},remove:e=>localStorage.removeItem(e),useLocalStorage:(e,t)=>R(e,t)}},ac=(e,t=`memory`)=>{let n=ic[t],r=(t,r)=>{let i=(t,r)=>{t=e?e+`:`+t:t,n.set(t,r)};if(typeof t==`string`)i(t,r);else{let e=t;Object.keys(e).forEach(t=>{i(t,e[t])})}},i=(t,r)=>(t=e?e+`:`+t:t,n.useLocalStorage(t,r)),a=t=>(t=e?e+`:`+t:t,n.remove(t)),o=(t,r)=>(t=e?e+`:`+t:t,n.get(t)??r);return{set:r,get:o,remove:a,space:(t,n=`memory`)=>ac(e?e+`:`+t:t,n),useCachedState:(e,t,n={})=>{let[i,a]=(0,V.useState)(n.out?n.out(o(e,t)):o(e,t));return(0,V.useEffect)(()=>{n.in?r(e,n.in(i)):r(e,i)},[i]),[i,a]},useLocalStorage:i}},oc=e=>ic[e],sc=go(({scope:e,storage:t})=>{let n=oc(t),r=(e,t)=>e+`.`+t;return{createCachedState:(t,i)=>{let a=r(e,t);return Vs(``,n.get(a)===void 0?i:n.get(a),e=>{Js.getObservable(e).subscribe(e=>{n.set(a,e)}),n.subscribe?.(a,t=>{Js.getSetter(e)(t)})})},get:(t,i)=>n.get(r(e,t))??i,set:(t,i)=>n.set(r(e,t),i),remove:t=>n.remove(r(e,t))}}),cc=(e,t)=>{let n=Js.getKey(e),r=t.get(n,Js.getGetter(e)());return console.log(`[Cache] get`,n,r),r!==Js.getGetter(e)()&&(console.log(`[Cache] set`,n,r),Js.getSetter(e)(r)),Js.getObservable(e).pipe(Ts()).subscribe(e=>{t.set(n,e)}),e};var lc=sc.create({scope:`pageBox`,storage:`localStorage`});go(()=>{rc({tarBarWidth:1e4})});const uc=go(()=>{let{getTabBarWidth:e,setTabBarWidth:t,TabBarWidth$:n}=Bs(`TabBarWidth`,1e4),{useTabBarCapacity:r}=Is(Rs(`TabBarCapacity`,n.pipe(os(e=>Math.floor((e-100)/(100*1.5)))),100)),i=new ResizeObserver(e=>{let n=e[0];setTimeout(()=>{t(n.contentRect.width)},100)}),a=e=>e?(i.observe(e),()=>{i.unobserve(e)}):()=>{},{getPageList:o,setPageList:s,usePageList:c,subscribePageList:l,PageList$:u}=Vs(`PageList`,(()=>{let e=lc.get(`pageList`,[]);return e.filter(e=>e.active).concat(e.filter(e=>!e.active).slice(0,4))})(),e=>{cc(e,lc)}),{getCurrentPage:d,useCurrentPage:f,CurrentPage$:p}=Is(Rs(`CurrentPage`,u.pipe(os(e=>e.find(e=>e.active))),void 0)),{getVisible:m,setVisible:h,useVisible:g}=Vs(`Visible`,!0,e=>{cc(e,lc)}),{get:_,set:v,use:y}=lc.createCachedState(`TabBarVisible`,!0),b=()=>h(!0);return{addPage:(e,t=!0)=>{let n=!1,r=o().slice();for(let t of r)t.id===e.id&&(n=!0);n||r.push(e),t?(s(r.map(t=>t.id===e.id?{...e,active:!0}:{...t,active:!1})),b()):s(r.slice())},addPages:e=>{let t=o().slice();for(let n of e){let e=!1;for(let r of t)r.id===n.id&&(e=!0);e||t.push(n)}s(t.slice())},removePage:e=>{let t=o().slice();for(let n of t.slice())if(n.id===e){let e=t.indexOf(n);t.splice(e,1),n.active&&t.length>0&&(t[e%t.length].active=!0),s(t.slice());break}},showPage:e=>{let t=o().slice();for(let n of t)n.id===e?n.active=!0:n.active=!1;s(t.slice()),b(),Cr.executeCommandOnReady(Sr.ToChatPage)},updatePage:e=>{let{id:t}=e;s(o().slice().map(n=>n.id===t?{...n,...e}:n))},getCurrentPage:d,useCurrentPage:f,currentPage$:p,hideTabBar:()=>{v(!1)},showTabBar:()=>{v(!0)},getTabBarWidth:e,useTabBarCapacity:r,observeTabBar:a,getTabBarVisible:_,useTabBarVisible:y,getVisible:m,setVisible:h,useVisible:g,show:b,hide:()=>h(!1),toggle:()=>h(!m()),getPageList:o,setPageList:s,usePageList:c,subscribePageList:l,minTabWidth:100,maxTabWidth:1e4,...Vs(`PageActions`,[],e=>{let t=new xo({}),n=n=>{e.setPageActions([...e.getPageActions(),n]);let r=((n.when instanceof Function?n.when():n.when)||as(!0)).subscribe(e=>{t.next({...t.getValue(),[n.id]:e})});return()=>{e.setPageActions(e.getPageActions().filter(e=>e.id!==n.id)),t.next({...t.getValue(),[n.id]:!1}),r.unsubscribe()}},{getActivePageActions:r,useActivePageActions:i,ActivePageActions$:a}=Is(Rs(`ActivePageActions`,_s([e.PageActions$,t]).pipe(os(([e,t])=>e.filter(e=>t[e.id]===!0))),[]));return{registerPageAction:n,getActivePageActions:r,useActivePageActions:i,activePageActions$:a}})}}),dc=({action:e})=>{let{getCurrentPage:t}=uc.useExistingInstance(),{icon:n,onClick:r}=e,i=Yu.useComponent(n||``);return(0,H.jsx)(`div`,{onClick:()=>{let e=t();e&&r({page:e})},className:w`
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        &:hover {
          background: rgba(0, 0, 0, 0.1);
        }
      `,children:i?(0,H.jsx)(i,{}):e.title},e.id)},fc=()=>{let{useActivePageActions:e}=uc.useExistingInstance(),t=e();return(0,H.jsx)(`div`,{className:w`
        display: flex;
        align-items: center;
        gap: 2px;
        padding: 4px;
      `,children:t.map(e=>(0,H.jsx)(dc,{action:e},e.id))})};var pc=e=>typeof e==`boolean`?`${e}`:e===0?`0`:e;const mc=et,hc=(e,t)=>n=>{if(t?.variants==null)return mc(e,n?.class,n?.className);let{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(e=>{let t=n?.[e],a=i?.[e];if(t===null)return null;let o=pc(t)||pc(a);return r[e][o]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return r===void 0||(e[n]=r),e},{});return mc(e,a,t?.compoundVariants?.reduce((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...i,...o}[t]):{...i,...o}[t]===n})?[...e,n,r]:e},[]),n?.class,n?.className)};function G(...e){return ct(et(e))}var gc=hc(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-destructive-foreground hover:bg-destructive/90`,outline:`border border-input bg-background hover:bg-accent hover:text-accent-foreground`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-10 px-4 py-2`,sm:`h-9 rounded-md px-3`,lg:`h-11 rounded-md px-8`,icon:`h-10 w-10`}},defaultVariants:{variant:`default`,size:`default`}}),_c=V.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>(0,H.jsx)(r?at:`button`,{className:G(gc({variant:t,size:n,className:e})),ref:a,...i}));_c.displayName=`Button`;var vc=0;function yc(){V.useEffect(()=>{let e=document.querySelectorAll(`[data-radix-focus-guard]`);return document.body.insertAdjacentElement(`afterbegin`,e[0]??bc()),document.body.insertAdjacentElement(`beforeend`,e[1]??bc()),vc++,()=>{vc===1&&document.querySelectorAll(`[data-radix-focus-guard]`).forEach(e=>e.remove()),vc--}},[])}function bc(){let e=document.createElement(`span`);return e.setAttribute(`data-radix-focus-guard`,``),e.tabIndex=0,e.style.outline=`none`,e.style.opacity=`0`,e.style.position=`fixed`,e.style.pointerEvents=`none`,e}var xc=`focusScope.autoFocusOnMount`,Sc=`focusScope.autoFocusOnUnmount`,Cc={bubbles:!1,cancelable:!0},wc=`FocusScope`,Tc=V.forwardRef((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[s,c]=V.useState(null),l=st(i),u=st(a),d=V.useRef(null),f=Xe(t,e=>c(e)),p=V.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;V.useEffect(()=>{if(r){let e=function(e){if(p.paused||!s)return;let t=e.target;s.contains(t)?d.current=t:Mc(d.current,{select:!0})},t=function(e){if(p.paused||!s)return;let t=e.relatedTarget;t!==null&&(s.contains(t)||Mc(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&Mc(s)};document.addEventListener(`focusin`,e),document.addEventListener(`focusout`,t);let r=new MutationObserver(n);return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener(`focusin`,e),document.removeEventListener(`focusout`,t),r.disconnect()}}},[r,s,p.paused]),V.useEffect(()=>{if(s){Nc.add(p);let e=document.activeElement;if(!s.contains(e)){let t=new CustomEvent(xc,Cc);s.addEventListener(xc,l),s.dispatchEvent(t),t.defaultPrevented||(Ec(Ic(Oc(s)),{select:!0}),document.activeElement===e&&Mc(s))}return()=>{s.removeEventListener(xc,l),setTimeout(()=>{let t=new CustomEvent(Sc,Cc);s.addEventListener(Sc,u),s.dispatchEvent(t),t.defaultPrevented||Mc(e??document.body,{select:!0}),s.removeEventListener(Sc,u),Nc.remove(p)},0)}}},[s,l,u,p]);let m=V.useCallback(e=>{if(!n&&!r||p.paused)return;let t=e.key===`Tab`&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[r,a]=Dc(t);r&&a?!e.shiftKey&&i===a?(e.preventDefault(),n&&Mc(r,{select:!0})):e.shiftKey&&i===r&&(e.preventDefault(),n&&Mc(a,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return(0,H.jsx)(B.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});Tc.displayName=wc;function Ec(e,{select:t=!1}={}){let n=document.activeElement;for(let r of e)if(Mc(r,{select:t}),document.activeElement!==n)return}function Dc(e){let t=Oc(e);return[kc(t,e),kc(t.reverse(),e)]}function Oc(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t=e.tagName===`INPUT`&&e.type===`hidden`;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kc(e,t){for(let n of e)if(!Ac(n,{upTo:t}))return n}function Ac(e,{upTo:t}){if(getComputedStyle(e).visibility===`hidden`)return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display===`none`)return!0;e=e.parentElement}return!1}function jc(e){return e instanceof HTMLInputElement&&`select`in e}function Mc(e,{select:t=!1}={}){if(e&&e.focus){let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&jc(e)&&t&&e.select()}}var Nc=Pc();function Pc(){let e=[];return{add(t){let n=e[0];t!==n&&n?.pause(),e=Fc(e,t),e.unshift(t)},remove(t){e=Fc(e,t),e[0]?.resume()}}}function Fc(e,t){let n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Ic(e){return e.filter(e=>e.tagName!==`A`)}var Lc=`Popover`,[Rc,zc]=ot(Lc,[dt]),Bc=dt(),[Vc,Hc]=Rc(Lc),Uc=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,s=Bc(t),c=V.useRef(null),[l,u]=V.useState(!1),[d,f]=Tt({prop:r,defaultProp:i??!1,onChange:a,caller:Lc});return(0,H.jsx)(Pt,{...s,children:(0,H.jsx)(Vc,{scope:t,contentId:Ze(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:V.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:l,onCustomAnchorAdd:V.useCallback(()=>u(!0),[]),onCustomAnchorRemove:V.useCallback(()=>u(!1),[]),modal:o,children:n})})};Uc.displayName=Lc;var Wc=`PopoverAnchor`,Gc=V.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Hc(Wc,n),a=Bc(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return V.useEffect(()=>(o(),()=>s()),[o,s]),(0,H.jsx)(Mt,{...a,...r,ref:t})});Gc.displayName=Wc;var Kc=`PopoverTrigger`,qc=V.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Hc(Kc,n),a=Bc(n),o=Xe(t,i.triggerRef),s=(0,H.jsx)(B.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":cl(i.open),...r,ref:o,onClick:z(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:(0,H.jsx)(Mt,{asChild:!0,...a,children:s})});qc.displayName=Kc;var Jc=`PopoverPortal`,[Yc,Xc]=Rc(Jc,{forceMount:void 0}),Zc=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=Hc(Jc,t);return(0,H.jsx)(Yc,{scope:t,forceMount:n,children:(0,H.jsx)(wt,{present:n||a.open,children:(0,H.jsx)(yt,{asChild:!0,container:i,children:r})})})};Zc.displayName=Jc;var Qc=`PopoverContent`,$c=V.forwardRef((e,t)=>{let n=Xc(Qc,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=Hc(Qc,e.__scopePopover);return(0,H.jsx)(wt,{present:r||a.open,children:a.modal?(0,H.jsx)(tl,{...i,ref:t}):(0,H.jsx)(nl,{...i,ref:t})})});$c.displayName=Qc;var el=ut(`PopoverContent.RemoveScroll`),tl=V.forwardRef((e,t)=>{let n=Hc(Qc,e.__scopePopover),r=V.useRef(null),i=Xe(t,r),a=V.useRef(!1);return V.useEffect(()=>{let e=r.current;if(e)return ie(e)},[]),(0,H.jsx)(ne,{as:el,allowPinchZoom:!0,children:(0,H.jsx)(rl,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(e.onCloseAutoFocus,e=>{e.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:z(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0;a.current=t.button===2||n},{checkForDefaultPrevented:!1}),onFocusOutside:z(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),nl=V.forwardRef((e,t)=>{let n=Hc(Qc,e.__scopePopover),r=V.useRef(!1),i=V.useRef(!1);return(0,H.jsx)(rl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),rl=V.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Hc(Qc,n),p=Bc(n);return yc(),(0,H.jsx)(Tc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,H.jsx)($e,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:(0,H.jsx)(bt,{"data-state":cl(f.open),role:`dialog`,id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-popover-content-available-width":`var(--radix-popper-available-width)`,"--radix-popover-content-available-height":`var(--radix-popper-available-height)`,"--radix-popover-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-popover-trigger-height":`var(--radix-popper-anchor-height)`}})})})}),il=`PopoverClose`,al=V.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Hc(il,n);return(0,H.jsx)(B.button,{type:`button`,...r,ref:t,onClick:z(e.onClick,()=>i.onOpenChange(!1))})});al.displayName=il;var ol=`PopoverArrow`,sl=V.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Bc(n);return(0,H.jsx)(Ft,{...i,...r,ref:t})});sl.displayName=ol;function cl(e){return e?`open`:`closed`}var ll=Uc,ul=qc,dl=Zc,fl=$c,pl=ll,ml=ul,hl=V.forwardRef(({className:e,align:t=`center`,sideOffset:n=4,...r},i)=>(0,H.jsx)(dl,{children:(0,H.jsx)(fl,{ref:i,align:t,sideOffset:n,className:G(`z-40 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...r})}));hl.displayName=fl.displayName;const gl=({title:e,isActive:t,onClick:n,onClose:r,stretch:o,width:s,minWidth:c,maxWidth:u,status:d,actions:f=[]})=>{let p=[`tab`,`hover-action`];t&&p.push(`active`);let m=(0,V.useMemo)(()=>e.split(`::`).splice(-1)[0].split(`/`).splice(-1)[0],[e]),[h,g]=(0,V.useState)(!1);return(0,H.jsxs)(D,{h:`100%`,m:`0 !important`,className:p.join(` `),pl:`12px`,pr:`12px`,align:`center`,justify:`flex-start`,overflow:`hidden`,onClick:n,w:s===void 0?o?`100%`:void 0:s,minW:c,maxW:u,flexGrow:1,flexShrink:0,children:[(0,H.jsxs)(l,{textOverflow:`ellipsis`,overflow:`hidden`,whiteSpace:`nowrap`,title:e,className:`tab-title`,flexGrow:1,textDecoration:d===`deleted`?`line-through`:void 0,display:`flex`,alignItems:`center`,gap:`4px`,children:[d===`loading`&&(0,H.jsx)(a,{size:`xs`,flexShrink:0,speed:`0.8s`,thickness:`2px`,color:`currentColor`,title:`加载中`}),d===`unsaved`&&(0,H.jsx)(l,{w:`8px`,h:`8px`,borderRadius:`50%`,bg:`currentColor`,flexShrink:0,title:`未保存`}),m]}),(o||s||c)&&(0,H.jsx)(l,{flexGrow:1}),(0,H.jsxs)(pl,{open:h,onOpenChange:g,children:[(0,H.jsx)(ml,{asChild:!0,children:(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`p-0 h-auto min-w-0 hover:bg-transparent hover-visible`,onClick:e=>e.stopPropagation(),children:(0,H.jsx)(i,{as:Ne})})}),(0,H.jsx)(hl,{className:`w-48 p-1`,align:`start`,side:`right`,children:(0,H.jsx)(`div`,{className:`grid gap-1`,children:f.map((e,t)=>(0,H.jsxs)(_c,{variant:`ghost`,className:G(`w-full justify-start gap-2 px-2 py-1.5 h-auto font-normal`,e.className),onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick(),g(!1)},children:[e.icon&&(0,H.jsx)(i,{as:e.icon,className:`h-4 w-4`}),(0,H.jsx)(`span`,{children:e.label})]},t))})})]}),(0,H.jsx)(i,{flexShrink:0,className:`hover-visible`,as:ye,onClick:e=>{e.stopPropagation(),e.preventDefault(),r?.(e)}})]})},_l=(0,V.forwardRef)((e,t)=>(0,H.jsx)(_c,{variant:`ghost`,className:G(`p-0 h-auto min-w-0 rounded-none hover:bg-transparent`,e.className),...e,ref:t})),vl=()=>{let e=uc.create();return window.pageBoxController=e,{proxy:e,instance:(0,H.jsx)(()=>{let t=e,{maxTabWidth:n,minTabWidth:r,usePageList:a,getPageList:o,setPageList:c,useTabBarCapacity:u,useTabBarVisible:d,useVisible:f}=t,p=a(),m=u(),_=d(),v=f(),x=(0,V.useRef)(null);(0,V.useEffect)(()=>x.current?t.observeTabBar(x.current):()=>{},[]);let S=e=>[{label:`关闭右侧标签页`,icon:me,onClick:()=>{let n=p.findIndex(t=>t.id===e);p.slice(n+1).forEach(e=>t.removePage(e.id))}},{label:`关闭左侧标签页`,icon:Je,onClick:()=>{let n=p.findIndex(t=>t.id===e);p.slice(0,n).forEach(e=>t.removePage(e.id))}},{label:`关闭其它标签页`,icon:ye,onClick:()=>{p.forEach(n=>{n.id!==e&&t.removePage(n.id)})}},{label:`关闭所有标签页`,icon:ze,onClick:()=>{p.forEach(e=>{t.removePage(e.id)})}}],w=(0,V.useMemo)(()=>p.map(({id:e,title:i,active:a,status:s},l)=>yr.isMobile()?(0,H.jsx)(gl,{minWidth:r,maxWidth:n,title:i,status:s,isActive:a,onClick:()=>{t.showPage(e)},onClose:()=>{t.removePage(e)},actions:S(e)},e):(0,H.jsx)(ho,{style:{height:`100%`},id:e,index:l,moveItem:(e,t)=>{c(mo(o(),e,t))},children:(0,H.jsx)(gl,{minWidth:r,maxWidth:n,title:i,status:s,isActive:a,onClick:()=>{t.showPage(e)},onClose:()=>{t.removePage(e)},actions:S(e)},e)},e)),[p,r,n,t]),T=(0,V.useMemo)(()=>(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(j,{align:`center`,h:`100%`,flexShrink:0,flexGrow:0,className:`tab-bar-right-extra`,children:[(0,H.jsx)(fc,{}),p.length>m&&(0,H.jsxs)(b,{children:[(0,H.jsx)(C,{as:s((e,t)=>(0,H.jsx)(_l,{...e,ref:t,children:(0,H.jsx)(i,{fontSize:`lg`,as:Le})}))}),(0,H.jsx)(h,{maxW:`400px`,className:`right-list`,zIndex:100,children:p.slice(0).map(({title:e,id:n,active:i,status:a})=>(0,H.jsx)(g,{children:(0,H.jsx)(gl,{minWidth:r,title:e,isActive:i,onClick:()=>t.showPage(n),onClose:()=>t.removePage(n),status:a,stretch:!0,actions:S(n)})},n))})]})]})})}),[p,m]),E=(0,V.useMemo)(()=>p.map(e=>{let{id:t,active:n,viewData:r}=e,i;return r&&(i=Yu.render(r)),(0,H.jsx)(l,{m:`0 !important`,h:`100%`,w:`100%`,id:t,overflow:`auto`,display:n?`block`:`none`,children:i},t)}),[p]);return(0,H.jsx)(uc.Provider,{value:e,children:(0,H.jsxs)(y,{w:`100%`,h:`100%`,align:`stretch`,className:`page-box`,overflow:`hidden`,display:v?`flex`:`none`,gap:0,children:[(0,H.jsx)(H.Fragment,{children:_&&(0,H.jsxs)(D,{ref:x,h:`40px`,minH:`40px`,className:`tab-bar`,w:`100%`,gap:0,zIndex:999999,children:[(0,H.jsx)(_l,{className:`tab-bar-left-extra`,onClick:()=>{Cr.executeCommand(Sr.ToggleHome)},children:(0,H.jsx)(i,{fontSize:`lg`,as:Be})}),(0,H.jsx)(D,{className:`tab-bar-content scroll scroll-9`,flexGrow:1,h:`100%`,overflowY:`hidden`,overflowX:`auto`,gap:0,children:yr.isMobile()?w:(0,H.jsx)(vr,{autoHide:!0,style:{width:`100%`,display:`flex`,height:`100%`,flexFlow:`row`},children:w})}),T]},`tab-bar`)}),(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(l,{flexBasis:`100%`,m:`0 !important`,className:`content-area`,h:`100%`,overflow:`hidden`,children:E},`body`)})]})})},{})}};var yl=t(Ot(),1);const bl=(e,t,n=`id`)=>{let r=(e,t,r=!1)=>{if(e.find(e=>e[n]===t[n])){if(r)return i(e,t)}else return e.push(t),e.slice();return e},i=(e,t)=>{let r=t[n],i=e.find(e=>e[n]===r);return i&&Object.assign(i,t),e.slice()},a=(e,t)=>e.filter(e=>e[n]!==t);return{add:(n,i=!1)=>e(r(t(),n,i)),update:n=>e(i(t(),n)),delete:n=>e(a(t(),n))}};var xl=sc.create({scope:`sidebar`,storage:`localStorage`});const Sl=go(()=>{let e=Vs(`ActiveViewId`,void 0,e=>(cc(e,xl),{})),{setActiveViewId:t,getActiveViewId:n,useActiveViewId:r,subscribeActiveViewId:i}=e,a=Vs(`ViewList`,[],e=>{cc(e,xl);let{setViewList:i,getViewList:a,ViewList$:o}=e,{add:s,update:c,delete:l}=bl(i,a,`id`);return{addView:s,updateView:c,removeView:l,toggleView:e=>{n()===e?t(void 0):t(e)},showView:e=>{t(e)},hideView:e=>{n()===e&&t(void 0)},useView:e=>{let[t,n]=(0,V.useState)(a().find(t=>t.id===e));return(0,V.useEffect)(()=>{let t=o.pipe(os(t=>t.find(t=>t.id===e)),Ts()).subscribe(n);return()=>t.unsubscribe()},[e]),t},useActiveViewId:r}}),o=Vs(`Visible`,!0,e=>{cc(e,xl);let{getVisible:t,setVisible:n,Visible$:r}=e;return r.subscribe(e=>{console.log(`[Sidebar] visible`,e)}),{show:()=>n(!0),hide:()=>n(!1),toggle:()=>n(!t())}}),s=Vs(`Fullwidth`,!0,e=>(cc(e,xl),{})),c=()=>a.getViewList().find(e=>e.id===n()),l=()=>{let t=e.useActiveViewId()||``;return a.useView(t)},u=t=>{e.setActiveViewId(t)};return{...e,...a,...o,...s,getCurrentView:c,useCurrentView:l,setView:u,cache:xl}}),Cl=()=>{let e=Sl.create();return{proxy:e,instance:(0,H.jsx)(()=>{let{useVisible:t,hide:n,show:r,toggle:i,getFullwidth:a,setFullwidth:o,useFullwidth:s,getViewList:c,useActiveViewId:u,useViewList:d}=e;window.sidebarController=e;let f=t(),p=s(),m=d(),h=u();return(0,V.useEffect)(()=>{},[p]),(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(l,{maxH:`100%`,overflow:`hidden`,flexGrow:1,className:(0,yl.default)(`sidebar sidebarV2 `+(f?``:`width-collapsed`),w`
                & {
                  .view.active {
                    /* display: block; */
                    visibility: visible;
                  }
                  .view.nonActive {
                    /* display: none; */
                    position: absolute;
                    left: -99999999px;
                    top: -99999999px;
                    visibility: hidden;
                  }
                }
              `),children:m.map(e=>{let{id:t,viewData:n}=e;return(0,H.jsx)(l,{w:`100%`,h:`100%`,m:`0 !important`,className:(0,yl.default)(`view`,{active:h===t,nonActive:h!==t}),children:f&&Yu.render(n)},t)})})})},{})}},wl={useStateControl:(e,t)=>{let[n,r]=(0,V.useState)(t);return(0,V.useEffect)(()=>{e.register({setState:r,getState:()=>n})},[n,r]),[n,r]},useVisibilityControl:(e,t)=>{let[n,r]=(0,V.useState)(t);return(0,V.useEffect)(()=>{e.register({show:()=>{r(!0)},hide:()=>r(!1),toggle:()=>r(!n)})},[n,r]),{visible:n,setVisible:r}},useBooleanControl:(e,t=!1)=>{let[n,r]=(0,V.useState)(t),i=()=>r(e=>!e),a=()=>r(!0),o=()=>r(!1);return(0,V.useEffect)(()=>{e.register({toggle:i,setTrue:a,setFalse:o})},[e,i,a,o]),{value:n,setValue:r,toggle:i,setTrue:a,setFalse:o}},useBeanControl:(e,t,n)=>{let[r,i]=(0,V.useState)(n),a={};return t=t[0].toUpperCase()+t.slice(1),a[`get`+t]=()=>r,a[`set`+t]=e=>i(e),(0,V.useEffect)(()=>{e.register(a)},[e,a]),{value:r,setValue:i,...a}}},Tl=e=>{let t={},n=new Map,r=e=>{let r=n.get(e);if(r)for(;r.length;){let n=r.shift(),i=t[e];i&&i(...n)}},i=(n,a)=>{if(typeof n==`object`&&n)for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&i(e,n[e]);else t[n]=a,r(n),e&&e(n,a)},a=new Proxy(t,{get(e,t,r){if(typeof t==`string`)return(...i)=>{if(!(t in e))n.get(t)||n.set(t,[]),n.get(t).push(i);else return Reflect.get(e,t,r)(...i)}}});return t.register=i,a};function El(e,t){let n=Tl((e,n)=>{t&&t(e,n)});return{proxy:n,instance:(0,H.jsx)(e,{proxy:n})}}function Dl(){return typeof window>`u`?`localhost`:window.location.hostname}function Ol(){let e=Dl();return e===`localhost`||e===`127.0.0.1`?`Localhost5173`:e===`gitary.app`||e===`www.gitary.app`?`GitaryApp`:e===`write.dimstack.com`||e===`www.write.dimstack.com`?`WriteDimstackCom`:`GitaryApp`}const kl=({showLogo:e=!0,showName:t=!0,size:n=`md`})=>{let r={sm:{logo:`16px`,fontSize:`xs`},md:{logo:`24px`,fontSize:`sm`},lg:{logo:`32px`,fontSize:`md`}}[n];return(0,H.jsxs)(j,{align:`center`,gap:2,onClick:()=>{let e=Dl();e!==`gitary.app`&&e!==`www.gitary.app`&&window.open(`https://gitary.app`,`_blank`)},cursor:`pointer`,_hover:{opacity:.8},transition:`opacity 0.2s`,children:[e&&(0,H.jsx)(O,{src:`/logo.svg`,alt:`Gitary`,width:r.logo,height:r.logo,flexShrink:0}),t&&(0,H.jsx)(f,{fontSize:r.fontSize,fontWeight:`semibold`,color:`gray.700`,_dark:{color:`gray.300`},letterSpacing:`tight`,children:`Gitary`})]})},Al=()=>El(({proxy:e})=>wl.useVisibilityControl(e,!0).visible&&(0,H.jsx)(l,{w:`100%`,flexShrink:0,minH:30,h:30,className:`status-bar`,borderTop:`1px solid`,borderColor:`gray.200`,bg:`gray.50`,_dark:{borderColor:`gray.700`,bg:`gray.900`},children:(0,H.jsxs)(j,{h:`100%`,align:`center`,justify:`space-between`,px:4,fontSize:`xs`,color:`gray.600`,_dark:{color:`gray.400`},children:[(0,H.jsx)(D,{spacing:2,children:(0,H.jsx)(kl,{showLogo:!0,showName:!0,size:`sm`})}),(0,H.jsx)(f,{fontSize:`xs`,children:`Manage your knowledge the Git way`})]})},`statusBar`),(e,t)=>{Cr.registerCommandWithScope(`statusBar`,e,t)}),jl=()=>El(({proxy:e})=>wl.useVisibilityControl(e,!0).visible&&(0,H.jsx)(l,{w:`100%`,flexShrink:0,className:`menu-bar`,h:35,minH:35,px:4,borderBottom:`1px solid`,borderColor:`gray.200`,bg:`gray.50`,_dark:{borderColor:`gray.700`,bg:`gray.900`},children:(0,H.jsx)(j,{h:`100%`,align:`center`,children:(0,H.jsx)(kl,{showLogo:!0,showName:!0,size:`sm`})})}),(e,t)=>{Cr.registerCommandWithScope(`titleBar`,e,t)}),Ml={RequestRedirectAuthPage:br(`requestRedirectAuthPage`),Space:{SpacesChanged:br(`spaces:changed`)},ActivityBar:{DragItem:br(`activityBar:DragItem`),ActivityClicked:e=>br(`activity:${e}:clicked`)},Shortcut:{ShortcutClicked:e=>br(`shortcut:${e}:clicked`)},FileSaved:br(`FileSaved`),FileDirty:br(`FileDirty`),FileClean:br(`FileClean`),FileLoading:br(`FileLoading`),FileLoaded:br(`FileLoaded`),ReadMeFileInitialized:br(`ReadMeFileInitialized`),Action:{Clicked:e=>br(`action:${e}:clicked`)}};function Nl(){let e={},t=new pt;function n(t,n){let r=xr(t);return e[r]||(e[r]=[]),e[r].push(n),function(){if(!e[r])return;let t=e[r].indexOf(n);t>-1&&e[r].splice(t,1)}}function r(n,r){let i=xr(n);e[i]&&e[i].forEach(e=>{e(r)}),t.next({key:n,payload:r})}return{on:n,emit:r,connector:(e,t,n=!1)=>i=>{n&&(i.stopPropagation(),i.preventDefault()),r(e,typeof t==`function`?t(i):t)},event$:t}}const Pl=Nl();var Fl=sc.create({scope:`activityBar`,storage:`localStorage`});const Il=go(()=>{let{getActiveId:e,setActiveId:t,useActiveId:n,ActiveId$:r}=Vs(`ActiveId`,``,e=>{cc(e,Fl)}),{hide:i,show:a,toggle:o,useVisible:s,getVisible:c}=Vs(`Visible`,!0,e=>(cc(e,Fl),{hide:()=>{e.setVisible(!1)},show:()=>{e.setVisible(!0)},toggle:()=>{e.setVisible(!e.getVisible())}})),{getActivityList:l,useActivityList:u,setActivityList:d,addActivity:f,showActivity:p,setHighlightActivity:m,removeActivity:h,ActivityList$:g}=Vs(`ActivityList`,[],n=>{let r=(e,t=!1)=>{let r=n.getActivityList();if((e=>r.find(t=>t.id===e))(e.id))if(t){d(r.map(t=>t.id===e.id?{...t,...e}:t));return}else return;e.isActive&&r.forEach(e=>{e.isActive=!1}),r.push(e),d(r.slice())},i=e=>{t(e)},a=e=>{let r=n.getActivityList().find(t=>t.id===e);r&&(r.unselectable||t(e),Pl.emit(Ml.ActivityBar.ActivityClicked(e)))};return{addActivity:r,showActivity:a,setHighlightActivity:i,removeActivity:t=>{let r=n.getActivityList(),i=e(),o=r.find(e=>e.id===t),s=t===i,c=r.length===1;d(r.filter(e=>e.id!==t)),o&&s&&!c&&a(r.filter(e=>e.id!==t)[0].id)}}}),{getExpanded:_,setExpanded:v,useExpanded:y,toggleExpanded:b}=Vs(`Expanded`,!1,e=>(cc(e,Fl),{toggleExpanded:()=>{e.setExpanded(!e.getExpanded())}}));_s([r,g]).subscribe(([e,n])=>{if(e){let r=n.find(t=>t.id===e);r?r.unselectable&&t(``):t(``)}});let x={};return x.h=`100%`,x.minW=`48px`,x.p=`0.5rem 0`,{direction:`column`,isMobile:!1,options:x,textFontSize:`0.8rem`,iconFontSize:`1.5rem`,getVisible:c,useVisible:s,show:a,hide:i,toggle:o,getActiveId:e,useActiveId:n,getActivityList:()=>l().sort((e,t)=>(e.order||0)-(t.order||0)),useActivityList:()=>u().sort((e,t)=>(e.order||0)-(t.order||0)),setActivityList:d,addActivity:f,showActivity:p,setHighlightActivity:m,removeActivity:h,getExpanded:_,setExpanded:v,useExpanded:y,toggleExpanded:b}});var Ll=Dt,Rl=jt,zl=St,Bl=V.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,H.jsx)(xt,{ref:r,sideOffset:t,className:G(`z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...n}));Bl.displayName=xt.displayName;var Vl=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Hl=(...e)=>e.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(` `),Ul={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},Wl=(0,V.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,V.createElement)(`svg`,{ref:c,...Ul,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Hl(`lucide`,i),...s},[...o.map(([e,t])=>(0,V.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Gl=(e,t)=>{let n=(0,V.forwardRef)(({className:n,...r},i)=>(0,V.createElement)(Wl,{ref:i,iconNode:t,className:Hl(`lucide-${Vl(e)}`,n),...r}));return n.displayName=`${e}`,n},Kl=Gl(`ArrowRight`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),ql=Gl(`Check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),Jl=Gl(`ChevronDown`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),Yl=Gl(`ChevronLeft`,[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]]),Xl=Gl(`ChevronRight`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),Zl=Gl(`ChevronUp`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),Ql=Gl(`CircleAlert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),$l=Gl(`CircleCheck`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),eu=Gl(`CircleDot`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}]]),tu=Gl(`Circle`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),nu=Gl(`Copy`,[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]]),ru=Gl(`Download`,[[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`polyline`,{points:`7 10 12 15 17 10`,key:`2ggqvy`}],[`line`,{x1:`12`,x2:`12`,y1:`15`,y2:`3`,key:`1vk2je`}]]),iu=Gl(`EllipsisVertical`,[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`12`,cy:`5`,r:`1`,key:`gxeob9`}],[`circle`,{cx:`12`,cy:`19`,r:`1`,key:`lyex9k`}]]),au=Gl(`Ellipsis`,[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`19`,cy:`12`,r:`1`,key:`1wjl8i`}],[`circle`,{cx:`5`,cy:`12`,r:`1`,key:`1pcz8c`}]]),ou=Gl(`FileCode`,[[`path`,{d:`M10 12.5 8 15l2 2.5`,key:`1tg20x`}],[`path`,{d:`m14 12.5 2 2.5-2 2.5`,key:`yinavb`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z`,key:`1mlx9k`}]]),su=Gl(`FilePlus`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M9 15h6`,key:`cctwl0`}],[`path`,{d:`M12 18v-6`,key:`17g6i2`}]]),cu=Gl(`FileText`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),lu=Gl(`FolderPlus`,[[`path`,{d:`M12 10v6`,key:`1bos4e`}],[`path`,{d:`M9 13h6`,key:`1uhe8q`}],[`path`,{d:`M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z`,key:`1kt360`}]]),uu=Gl(`GitBranch`,[[`line`,{x1:`6`,x2:`6`,y1:`3`,y2:`15`,key:`17qcm7`}],[`circle`,{cx:`18`,cy:`6`,r:`3`,key:`1h7g24`}],[`circle`,{cx:`6`,cy:`18`,r:`3`,key:`fqmcym`}],[`path`,{d:`M18 9a9 9 0 0 1-9 9`,key:`n2h4wq`}]]),du=Gl(`Github`,[[`path`,{d:`M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4`,key:`tonef`}],[`path`,{d:`M9 18c-4.51 2-5-2-7-2`,key:`9comsn`}]]),fu=Gl(`Heart`,[[`path`,{d:`M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z`,key:`c3ymky`}]]),pu=Gl(`History`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}],[`path`,{d:`M12 7v5l4 2`,key:`1fdv2h`}]]),mu=Gl(`Languages`,[[`path`,{d:`m5 8 6 6`,key:`1wu5hv`}],[`path`,{d:`m4 14 6-6 2-3`,key:`1k1g8d`}],[`path`,{d:`M2 5h12`,key:`or177f`}],[`path`,{d:`M7 2h1`,key:`1t2jsx`}],[`path`,{d:`m22 22-5-10-5 10`,key:`don7ne`}],[`path`,{d:`M14 18h6`,key:`1m8k6r`}]]),hu=Gl(`Link`,[[`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`,key:`1cjeqo`}],[`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`,key:`19qd67`}]]),K=Gl(`LoaderCircle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),gu=Gl(`Lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),_u=Gl(`MessageCircle`,[[`path`,{d:`M7.9 20A9 9 0 1 0 4 16.1L2 22Z`,key:`vv11sd`}]]),vu=Gl(`Moon`,[[`path`,{d:`M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z`,key:`a7tn18`}]]),yu=Gl(`Network`,[[`rect`,{x:`16`,y:`16`,width:`6`,height:`6`,rx:`1`,key:`4q2zg0`}],[`rect`,{x:`2`,y:`16`,width:`6`,height:`6`,rx:`1`,key:`8cvhb9`}],[`rect`,{x:`9`,y:`2`,width:`6`,height:`6`,rx:`1`,key:`1egb70`}],[`path`,{d:`M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3`,key:`1jsf9p`}],[`path`,{d:`M12 12V8`,key:`2874zd`}]]),bu=Gl(`PenTool`,[[`path`,{d:`M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z`,key:`nt11vn`}],[`path`,{d:`m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18`,key:`15qc1e`}],[`path`,{d:`m2.3 2.3 7.286 7.286`,key:`1wuzzi`}],[`circle`,{cx:`11`,cy:`11`,r:`2`,key:`xmgehs`}]]),xu=Gl(`Pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),Su=Gl(`Pencil`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]]),Cu=Gl(`Plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),wu=Gl(`RefreshCw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),Tu=Gl(`Search`,[[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}],[`path`,{d:`m21 21-4.3-4.3`,key:`1qie3q`}]]),Eu=Gl(`Share2`,[[`circle`,{cx:`18`,cy:`5`,r:`3`,key:`gq8acd`}],[`circle`,{cx:`6`,cy:`12`,r:`3`,key:`w7nqdw`}],[`circle`,{cx:`18`,cy:`19`,r:`3`,key:`1xt0gg`}],[`line`,{x1:`8.59`,x2:`15.42`,y1:`13.51`,y2:`17.49`,key:`47mynk`}],[`line`,{x1:`15.41`,x2:`8.59`,y1:`6.51`,y2:`10.49`,key:`1n3mei`}]]),Du=Gl(`Sparkles`,[[`path`,{d:`M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z`,key:`4pj2yx`}],[`path`,{d:`M20 3v4`,key:`1olli1`}],[`path`,{d:`M22 5h-4`,key:`1gvqau`}],[`path`,{d:`M4 17v2`,key:`vumght`}],[`path`,{d:`M5 18H3`,key:`zchphs`}]]),Ou=Gl(`Sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),ku=Gl(`Trash2`,[[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6`,key:`4alrt4`}],[`path`,{d:`M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2`,key:`v07s0e`}],[`line`,{x1:`10`,x2:`10`,y1:`11`,y2:`17`,key:`1uufr5`}],[`line`,{x1:`14`,x2:`14`,y1:`11`,y2:`17`,key:`xtxkd`}]]),Au=Gl(`X`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);function ju({activity:e,isExpanded:t,isActive:n=!1,onClick:r,icon:i,children:a,tooltipContent:o,className:s,iconClassName:c,textClassName:l,disableTooltip:u=!1,asChild:d=!1}){let f=(0,H.jsxs)(`button`,{className:G(`flex items-center transition-all duration-300 ease-in-out`,t?`px-3 py-1.5 w-full`:`p-1.5 aspect-square`,t?`rounded-sm`:`rounded-md`,`hover:bg-accent/80 hover:text-accent-foreground`,n&&G(`bg-accent/60 text-accent-foreground`,!t&&`shadow-sm ring-2 ring-accent/20`),!t&&`justify-center`,s),onMouseDown:e=>e.preventDefault(),onClick:r,children:[i&&(0,H.jsx)(`div`,{className:G(`flex-shrink-0 transition-all duration-300 ease-in-out`,t?`h-5 w-5`:`h-[22px] w-[22px]`,`hover:scale-105`,c),children:i}),a,t&&e.name&&(0,H.jsx)(`span`,{className:G(`ml-2.5 text-sm truncate text-muted-foreground animate-in fade-in-0 slide-in-from-left-2 duration-300`,l),children:e.name})]}),p=d?f:(0,H.jsx)(`div`,{className:`flex justify-center`,children:f}),m=o??e.name;return t||u?p:(0,H.jsx)(Ll,{delayDuration:100,children:(0,H.jsxs)(Rl,{disableHoverableContent:!0,children:[(0,H.jsx)(zl,{asChild:!0,children:p}),(0,H.jsx)(Bl,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:m})]})})}function Mu({activities:e,shortcuts:t,isExpanded:n,activeId:r,onToggleExpand:i,onActivityClick:a,onMoveActivity:o}){return(0,H.jsx)(Ll,{delayDuration:100,children:(0,H.jsxs)(`div`,{className:G(`h-full bg-background flex flex-col transition-all duration-300 ease-in-out`,`border-r border-border/40`,n?`w-[140px]`:`w-[52px]`),children:[(0,H.jsx)(`div`,{className:`flex-1 overflow-y-auto py-1`,children:e.map((e,t)=>(0,H.jsx)(Pu,{activity:e,isActive:e.id===r,isExpanded:n,index:t,onMove:o,onClick:()=>a(e.id)},e.id))}),(0,H.jsx)(`div`,{className:`py-1 border-t border-border/40`,children:t.map(e=>(0,H.jsx)(Fu,{shortcut:e,isExpanded:n},e.id))}),(0,H.jsx)(`div`,{className:`py-1 border-t border-border/40`,children:(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,className:G(`my-1 mx-auto hover:bg-accent/50 hover:text-accent-foreground`,`w-8 h-8 rounded-sm`),onClick:i,children:n?(0,H.jsx)(Yl,{className:`h-3.5 w-3.5`}):(0,H.jsx)(Xl,{className:`h-3.5 w-3.5`})})})})]})})}function Nu({icon:e,name:t,isExpanded:n,isActive:r=!1,onClick:i}){let a=Yu.useComponent(e||`AiOutlineQuestionCircle`)??(()=>null);return(0,H.jsx)(ju,{activity:{id:``,name:t,icon:e},isExpanded:n,isActive:r,onClick:i,icon:(0,H.jsx)(a,{className:`w-full h-full`})})}function Pu({activity:e,isActive:t,isExpanded:n,index:r,onMove:i,onClick:a}){let o=Yu.useComponent(`activity:${e.id}`);return o?(0,H.jsx)(ho,{id:e.id,index:r,moveItem:i,children:(0,H.jsx)(o,{activity:e,isExpanded:n})},e.id):(0,H.jsx)(ho,{id:e.id,index:r,moveItem:i,children:(0,H.jsx)(Nu,{icon:e.icon,name:e.name,isExpanded:n,isActive:t,onClick:a})},e.id)}function Fu({shortcut:e,isExpanded:t}){let n=Yu.useComponent(`shortcut:${e.id}`);return n?(0,H.jsx)(n,{shortcut:e,isExpanded:t}):(0,H.jsx)(Nu,{icon:e.icon,name:e.name,isExpanded:t,onClick:()=>{Pl.emit(Ml.Shortcut.ShortcutClicked(e.id))}})}const Iu=()=>{let e=Il.create();return{instance:(0,H.jsx)(()=>{let{useVisible:t,useActivityList:n,setActivityList:r,useActiveId:i,showActivity:a,useExpanded:o,toggleExpanded:s}=e,c=t(),l=n(),u=i(),d=o(),f=jm.useShortcutList();return c?(0,H.jsx)(Mu,{activities:l,shortcuts:f,isExpanded:d,activeId:u,onToggleExpand:s,onActivityClick:a,onMoveActivity:(e,t)=>{r(mo(l,e,t))}}):null},{}),proxy:e}};var Lu=t(Ot(),1),Ru=w`
  &.split-pane {
    display: flex;
    width: 100%;
    height: 100%;
    .resizer {
      height: 100%;
      z-index: 1;
      position: relative;
    }
    .resizer-anchor {
      position: absolute;
      width: 0;
      height: 100%;
    }
    .pane {
      display: flex;
      /* transition: all 0.1s ease; */
    }
    .left {
      // overflow-x: auto;
      overflow: hidden;
      flex-shrink: 0;
    }
    .left-inner-wrapper {
      display: flex;
      width: 100%;
      // overflow-x: auto;
    }
    .right-un {
      flex: 1;
    }
    .right {
      flex: 1;
      overflow: hidden;
    }

    &.resizable {
      .resizer-wrapper {
        .resizer-anchor {
          display: flex;
          align-items: center;
          .resizer {
            background-color: var(--splitter-color);
            cursor: ew-resize;
            width: 6px;
            flex-shrink: 0;
            flex-grow: 0;
            left: -3px;
          }
          &:hover {
            .toggle-left {
              visibility: visible;
            }
          }
          .toggle-left {
            width: 2px;
            display: flex;
            align-items: center;
            visibility: hidden;
            height: 100%;
            transition: all 0.3s ease;
            .toggle {
              margin-left: -10px;
              cursor: pointer;
            }
          }
        }
      }
    }
  }
`,zu={Horizontal:({children:e,resizable:t=!0,initialLeftWidth:n=300,initialRightWidth:r,minLeftWidth:i=250,maxLeftWidth:a=800,toggleLeftComponent:o,enableToggleLeft:s,leftHidden:c})=>{let[l,u]=e,d=(0,V.useRef)(null),f=(0,V.useRef)(null),p=(0,V.useRef)(null),m=(0,V.useRef)(null),[h,g]=(0,V.useState)(!1);(0,V.useEffect)(()=>{c!==void 0&&g(c)},[c]);let _=(0,V.useRef)({startX:0,startY:0,leftWidth:n||0}),[v,y]=(0,V.useState)(n),[b,x]=(0,V.useState)(r),[S,C]=(0,V.useState)(!1),[,w]=(0,V.useState)(!1),T=(0,V.useCallback)(e=>{if(d.current&&p.current&&m.current&&f.current){let t=e.clientX-_.current.startX,n=f.current.parentElement.getBoundingClientRect().width,r=_.current.leftWidth+t;r=Math.max(i===void 0?0:i,Math.min(a===void 0?n:a,r));let o=r*100/n,s=100-r;y(`${o}%`),x(`${s}%`),C(!0),document.body.style.cursor=`col-resize`,p.current.style.userSelect=`none`,p.current.style.pointerEvents=`none`,m.current.style.userSelect=`none`,m.current.style.pointerEvents=`none`}},[d,f,p,m,i,a]),E=(0,V.useCallback)(()=>{d.current&&p.current&&m.current&&f.current&&(d.current.style.removeProperty(`cursor`),document.body.style.removeProperty(`cursor`),p.current.style.removeProperty(`user-select`),p.current.style.removeProperty(`pointer-events`),m.current.style.removeProperty(`user-select`),m.current.style.removeProperty(`pointer-events`),document.removeEventListener(`mousemove`,T),document.removeEventListener(`mouseup`,E),w(!1))},[T]),D=(0,V.useCallback)(e=>{w(!0),_.current.startX=e.clientX,_.current.startY=e.clientY,_.current.leftWidth=p.current.getBoundingClientRect().width,document.addEventListener(`mousemove`,T),document.addEventListener(`mouseup`,E)},[T,E]);return(0,H.jsxs)(`div`,{className:(0,Lu.default)({resizable:t,"split-pane":!0,[Ru]:!0}),children:[(0,H.jsx)(`div`,{className:(0,Lu.default)(`left pane scroll scroll-7`),ref:p,style:{...t&&!h?{width:v}:{width:0}},children:(0,H.jsxs)(`div`,{className:`left-inner-wrapper scroll scroll-8`,children:[` `,l]})}),(0,H.jsx)(`div`,{className:`resizer-wrapper`,ref:f,children:(0,H.jsxs)(`div`,{className:`resizer-anchor`,children:[(0,H.jsx)(`div`,{className:`resizer`,ref:d,onMouseDown:t?D:void 0}),s&&(0,H.jsx)(`div`,{className:`toggle-left`,children:(0,H.jsx)(`div`,{className:`toggle`,onClick:()=>{g(e=>!e)},children:o||h?`➡️`:`⬅️`})})]})}),(0,H.jsx)(`div`,{className:`${S?`right`:`right-un`} pane`,style:{...t?{width:b}:{}},ref:m,children:u})]})}},Bu=sc.create({scope:`sideResizer`,storage:`localStorage`});const Vu=go(()=>{let{setLeftHidden:e,useLeftHidden:t,getLeftHidden:n}=Vs(`LeftHidden`,!1,e=>{cc(e,Bu)});return{setLeftHidden:e,useLeftHidden:t,getLeftHidden:n}}).create(),Hu=({children:e})=>{let{useLeftHidden:t,setLeftHidden:n,getLeftHidden:r}=Vu,i=t();return(0,H.jsx)(zu.Horizontal,{leftHidden:i,children:e})},Uu={toggleLeft:()=>Vu.setLeftHidden(!Vu.getLeftHidden())},Wu=Iu(),Gu=Al(),Ku=jl(),qu=vl(),Ju=Cl(),Yu=nn();Yu.register(`NotFoundComponent`,({type:e})=>{let[t,n]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{let e=setTimeout(()=>{n(!0)},1e3);return()=>{clearTimeout(e)}}),(0,H.jsx)(H.Fragment,{children:t&&(0,H.jsxs)(`div`,{children:[e,`组件未找到`]})})}),Yu.register(`row`,({children:e,...t})=>(0,H.jsx)(l,{display:`flex`,overflow:`hidden`,className:`row`,flexDirection:`row`,w:`100%`,...t,children:e})),Yu.register(`column`,({children:e,...t})=>(0,H.jsx)(l,{display:`flex`,overflow:`hidden`,className:`colomn`,flexDirection:`column`,h:`100%`,...t,children:e}));let Xu=function(e){return e.SideResizer=`sideResizer`,e}({});Yu.register(`activityBar`,()=>Wu.instance),Yu.register(`sidebar`,()=>Ju.instance),Yu.register(`statusBar`,()=>Gu.instance),Yu.register(`titleBar`,()=>Ku.instance),Yu.register(`pageBox`,()=>qu.instance),Yu.register(Xu.SideResizer,Hu);const Zu=ac(`xbook-cache-service`);var Qu=class e{disposables;constructor(e){this.disposables=[],this.disposables.push({dispose:e})}static from(...t){let n=new e(()=>{for(let e of t)e.dispose()});return n.disposables.push(...t),n}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}},$u=class{listeners=[];event=(e,t,n)=>{let r=new Qu(()=>{let t=this.listeners.indexOf(e);t!==-1&&this.listeners.splice(t,1)}),i=t?e.bind(t):e;return this.listeners.push(i),n&&n.push(r),r};fire(e){for(let t of this.listeners)try{t.call(void 0,e)}catch(e){console.error(e)}}dispose(){this.listeners=[]}};const ed=new class{providers=[];onDidChangeFileEmitter=new $u;get onDidChangeFile(){return this.onDidChangeFileEmitter.event}registerProvider(e){let{id:t,scheme:n,provider:r,authority:i,options:a}=e,o=new Qu(()=>{this.unregisterProvider(t)}),s={id:t,scheme:n,authority:i,provider:r,disposable:o};try{r.onDidChangeFile&&(s.onChangeUnsub=r.onDidChangeFile(e=>{Array.isArray(e)&&e.length&&this.onDidChangeFileEmitter.fire(e)}))}catch(e){console.warn(`[fs] failed to bridge onDidChangeFile for provider '${t}':`,e)}if(this.providers.some(e=>e.id===t))if(a.overwrite)this.unregisterProvider(t),this.providers.push(s);else throw Error(`Provider '${t}' already registered.`);else this.providers.push(s);return o}unregisterProvider(e){let t=this.providers.findIndex(t=>t.id===e);if(t!==-1){let e=this.providers.splice(t,1)[0];try{e.onChangeUnsub?.dispose()}catch{}try{e.disposable.dispose()}catch{}}}getProvider(e){return this.providers.find(t=>!(t.scheme&&t.scheme!==e.scheme||t.authority&&t.authority!==e.authority))?.provider}watch(e,t){let n=this.getProvider(e);if(n){if(!n.watch)throw Error(`Provider for scheme '${e.scheme}' does not support watching.`);return n.watch(e,t)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async stat(e){let t=this.getProvider(e);if(t){let n=await t.stat(e);return Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async readDirectory(e){let t=this.getProvider(e);if(t){let n=await t.readDirectory(e);return Array.isArray(n)?n:Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async createDirectory(e){let t=this.getProvider(e);if(t)await t.createDirectory(e);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async readFile(e){let t=this.getProvider(e);if(t){let n=await t.readFile(e);return n instanceof Uint8Array?n:Promise.resolve(n)}throw Error(`No provider registered for scheme '${e.scheme}'`)}async writeFile(e,t,n){let r=this.getProvider(e);if(r)await r.writeFile(e,t,n);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async delete(e,t){let n=this.getProvider(e);if(n)await n.delete(e,t);else throw Error(`No provider registered for scheme '${e.scheme}'`)}async rename(e,t,n){let r=this.getProvider(e);if(r)await r.rename(e,t,n);else throw Error(`No provider registered for scheme '${e.scheme}'`)}};var td=t(Lt(),1),nd=1,rd=1e6,id=0;function ad(){return id=(id+1)%(2**53-1),id.toString()}var od=new Map,sd=e=>{if(od.has(e))return;let t=setTimeout(()=>{od.delete(e),dd({type:`REMOVE_TOAST`,toastId:e})},rd);od.set(e,t)};const cd=(e,t)=>{switch(t.type){case`ADD_TOAST`:return{...e,toasts:[t.toast,...e.toasts].slice(0,nd)};case`UPDATE_TOAST`:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case`DISMISS_TOAST`:{let{toastId:n}=t;return n?sd(n):e.toasts.forEach(e=>{sd(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||n===void 0?{...e,open:!1}:e)}}case`REMOVE_TOAST`:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};var ld=[],ud={toasts:[]};function dd(e){ud=cd(ud,e),ld.forEach(e=>{e(ud)})}function fd({...e}){let t=ad(),n=e=>dd({type:`UPDATE_TOAST`,toast:{...e,id:t}}),r=()=>dd({type:`DISMISS_TOAST`,toastId:t});return dd({type:`ADD_TOAST`,toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:n}}function pd(){let[e,t]=V.useState(ud);return V.useEffect(()=>(ld.push(t),()=>{let e=ld.indexOf(t);e>-1&&ld.splice(e,1)}),[e]),{...e,toast:fd,dismiss:e=>dd({type:`DISMISS_TOAST`,toastId:e})}}function md(e){let t=e+`CollectionProvider`,[n,r]=ot(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{let{scope:t,children:n}=e,r=V.useRef(null),a=V.useRef(new Map).current;return(0,H.jsx)(i,{scope:t,itemMap:a,collectionRef:r,children:n})};o.displayName=t;let s=e+`CollectionSlot`,c=ut(s),l=V.forwardRef((e,t)=>{let{scope:n,children:r}=e;return(0,H.jsx)(c,{ref:Xe(t,a(s,n).collectionRef),children:r})});l.displayName=s;let u=e+`CollectionItemSlot`,d=`data-radix-collection-item`,f=ut(u),p=V.forwardRef((e,t)=>{let{scope:n,children:r,...i}=e,o=V.useRef(null),s=Xe(t,o),c=a(u,n);return V.useEffect(()=>(c.itemMap.set(o,{ref:o,...i}),()=>void c.itemMap.delete(o))),(0,H.jsx)(f,{[d]:``,ref:s,children:r})});p.displayName=u;function m(t){let n=a(e+`CollectionConsumer`,t);return V.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])}return[{Provider:o,Slot:l,ItemSlot:p},m,r]}var hd=`ToastProvider`,[gd,_d,vd]=md(`Toast`),[yd,bd]=ot(`Toast`,[vd]),[xd,Sd]=yd(hd),Cd=e=>{let{__scopeToast:t,label:n=`Notification`,duration:r=5e3,swipeDirection:i=`right`,swipeThreshold:a=50,children:o}=e,[s,c]=V.useState(null),[l,u]=V.useState(0),d=V.useRef(!1),f=V.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${hd}\`. Expected non-empty \`string\`.`),(0,H.jsx)(gd.Provider,{scope:t,children:(0,H.jsx)(xd,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:l,viewport:s,onViewportChange:c,onToastAdd:V.useCallback(()=>u(e=>e+1),[]),onToastRemove:V.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};Cd.displayName=hd;var wd=`ToastViewport`,Td=[`F8`],Ed=`toast.viewportPause`,Dd=`toast.viewportResume`,Od=V.forwardRef((e,t)=>{let{__scopeToast:n,hotkey:r=Td,label:i=`Notifications ({hotkey})`,...a}=e,o=Sd(wd,n),s=_d(n),c=V.useRef(null),l=V.useRef(null),u=V.useRef(null),d=V.useRef(null),f=Xe(t,d,o.onViewportChange),p=r.join(`+`).replace(/Key/g,``).replace(/Digit/g,``),m=o.toastCount>0;V.useEffect(()=>{let e=e=>{r.length!==0&&r.every(t=>e[t]||e.code===t)&&d.current?.focus()};return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[r]),V.useEffect(()=>{let e=c.current,t=d.current;if(m&&e&&t){let n=()=>{if(!o.isClosePausedRef.current){let e=new CustomEvent(Ed);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){let e=new CustomEvent(Dd);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},i=t=>{e.contains(t.relatedTarget)||r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener(`focusin`,n),e.addEventListener(`focusout`,i),e.addEventListener(`pointermove`,n),e.addEventListener(`pointerleave`,a),window.addEventListener(`blur`,n),window.addEventListener(`focus`,r),()=>{e.removeEventListener(`focusin`,n),e.removeEventListener(`focusout`,i),e.removeEventListener(`pointermove`,n),e.removeEventListener(`pointerleave`,a),window.removeEventListener(`blur`,n),window.removeEventListener(`focus`,r)}}},[m,o.isClosePausedRef]);let h=V.useCallback(({tabbingDirection:e})=>{let t=s().map(t=>{let n=t.ref.current,r=[n,...tf(n)];return e===`forwards`?r:r.reverse()});return(e===`forwards`?t.reverse():t).flat()},[s]);return V.useEffect(()=>{let e=d.current;if(e){let t=t=>{let n=t.altKey||t.ctrlKey||t.metaKey;if(t.key===`Tab`&&!n){let n=document.activeElement,r=t.shiftKey;if(t.target===e&&r){l.current?.focus();return}let i=h({tabbingDirection:r?`backwards`:`forwards`}),a=i.findIndex(e=>e===n);nf(i.slice(a+1))?t.preventDefault():r?l.current?.focus():u.current?.focus()}};return e.addEventListener(`keydown`,t),()=>e.removeEventListener(`keydown`,t)}},[s,h]),(0,H.jsxs)(ft,{ref:c,role:`region`,"aria-label":i.replace(`{hotkey}`,p),tabIndex:-1,style:{pointerEvents:m?void 0:`none`},children:[m&&(0,H.jsx)(Ad,{ref:l,onFocusFromOutsideViewport:()=>{nf(h({tabbingDirection:`forwards`}))}}),(0,H.jsx)(gd.Slot,{scope:n,children:(0,H.jsx)(B.ol,{tabIndex:-1,...a,ref:f})}),m&&(0,H.jsx)(Ad,{ref:u,onFocusFromOutsideViewport:()=>{nf(h({tabbingDirection:`backwards`}))}})]})});Od.displayName=wd;var kd=`ToastFocusProxy`,Ad=V.forwardRef((e,t)=>{let{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=Sd(kd,n);return(0,H.jsx)(kt,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:`fixed`},onFocus:e=>{let t=e.relatedTarget;a.viewport?.contains(t)||r()}})});Ad.displayName=kd;var jd=`Toast`,Md=`toast.swipeStart`,Nd=`toast.swipeMove`,Pd=`toast.swipeCancel`,Fd=`toast.swipeEnd`,Id=V.forwardRef((e,t)=>{let{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[s,c]=Tt({prop:r,defaultProp:i??!0,onChange:a,caller:jd});return(0,H.jsx)(wt,{present:n||s,children:(0,H.jsx)(zd,{open:s,...o,ref:t,onClose:()=>c(!1),onPause:st(e.onPause),onResume:st(e.onResume),onSwipeStart:z(e.onSwipeStart,e=>{e.currentTarget.setAttribute(`data-swipe`,`start`)}),onSwipeMove:z(e.onSwipeMove,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute(`data-swipe`,`move`),e.currentTarget.style.setProperty(`--radix-toast-swipe-move-x`,`${t}px`),e.currentTarget.style.setProperty(`--radix-toast-swipe-move-y`,`${n}px`)}),onSwipeCancel:z(e.onSwipeCancel,e=>{e.currentTarget.setAttribute(`data-swipe`,`cancel`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-y`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-end-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-end-y`)}),onSwipeEnd:z(e.onSwipeEnd,e=>{let{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute(`data-swipe`,`end`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-x`),e.currentTarget.style.removeProperty(`--radix-toast-swipe-move-y`),e.currentTarget.style.setProperty(`--radix-toast-swipe-end-x`,`${t}px`),e.currentTarget.style.setProperty(`--radix-toast-swipe-end-y`,`${n}px`),c(!1)})})})});Id.displayName=jd;var[Ld,Rd]=yd(jd,{onClose(){}}),zd=V.forwardRef((e,t)=>{let{__scopeToast:n,type:r=`foreground`,duration:i,open:a,onClose:o,onEscapeKeyDown:s,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=e,h=Sd(jd,n),[g,_]=V.useState(null),v=Xe(t,e=>_(e)),y=V.useRef(null),b=V.useRef(null),x=i||h.duration,S=V.useRef(0),C=V.useRef(x),w=V.useRef(0),{onToastAdd:T,onToastRemove:E}=h,D=st(()=>{g?.contains(document.activeElement)&&h.viewport?.focus(),o()}),O=V.useCallback(e=>{!e||e===1/0||(window.clearTimeout(w.current),S.current=new Date().getTime(),w.current=window.setTimeout(D,e))},[D]);V.useEffect(()=>{let e=h.viewport;if(e){let t=()=>{O(C.current),l?.()},n=()=>{let e=new Date().getTime()-S.current;C.current-=e,window.clearTimeout(w.current),c?.()};return e.addEventListener(Ed,n),e.addEventListener(Dd,t),()=>{e.removeEventListener(Ed,n),e.removeEventListener(Dd,t)}}},[h.viewport,x,c,l,O]),V.useEffect(()=>{a&&!h.isClosePausedRef.current&&O(x)},[a,x,h.isClosePausedRef,O]),V.useEffect(()=>(T(),()=>E()),[T,E]);let k=V.useMemo(()=>g?Xd(g):null,[g]);return h.viewport?(0,H.jsxs)(H.Fragment,{children:[k&&(0,H.jsx)(Bd,{__scopeToast:n,role:`status`,"aria-live":r===`foreground`?`assertive`:`polite`,"aria-atomic":!0,children:k}),(0,H.jsx)(Ld,{scope:n,onClose:D,children:qt.createPortal((0,H.jsx)(gd.ItemSlot,{scope:n,children:(0,H.jsx)(Qe,{asChild:!0,onEscapeKeyDown:z(s,()=>{h.isFocusedToastEscapeKeyDownRef.current||D(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,H.jsx)(B.li,{role:`status`,"aria-live":`off`,"aria-atomic":!0,tabIndex:0,"data-state":a?`open`:`closed`,"data-swipe-direction":h.swipeDirection,...m,ref:v,style:{userSelect:`none`,touchAction:`none`,...e.style},onKeyDown:z(e.onKeyDown,e=>{e.key===`Escape`&&(s?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:z(e.onPointerDown,e=>{e.button===0&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:z(e.onPointerMove,e=>{if(!y.current)return;let t=e.clientX-y.current.x,n=e.clientY-y.current.y,r=!!b.current,i=[`left`,`right`].includes(h.swipeDirection),a=[`left`,`up`].includes(h.swipeDirection)?Math.min:Math.max,o=i?a(0,t):0,s=i?0:a(0,n),c=e.pointerType===`touch`?10:2,l={x:o,y:s},f={originalEvent:e,delta:l};r?(b.current=l,Zd(Nd,d,f,{discrete:!1})):Qd(l,h.swipeDirection,c)?(b.current=l,Zd(Md,u,f,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>c||Math.abs(n)>c)&&(y.current=null)}),onPointerUp:z(e.onPointerUp,e=>{let t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){let n=e.currentTarget,r={originalEvent:e,delta:t};Qd(t,h.swipeDirection,h.swipeThreshold)?Zd(Fd,p,r,{discrete:!0}):Zd(Pd,f,r,{discrete:!0}),n.addEventListener(`click`,e=>e.preventDefault(),{once:!0})}})})})}),h.viewport)})]}):null}),Bd=e=>{let{__scopeToast:t,children:n,...r}=e,i=Sd(jd,t),[a,o]=V.useState(!1),[s,c]=V.useState(!1);return $d(()=>o(!0)),V.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),s?null:(0,H.jsx)(yt,{asChild:!0,children:(0,H.jsx)(kt,{...r,children:a&&(0,H.jsxs)(H.Fragment,{children:[i.label,` `,n]})})})},Vd=`ToastTitle`,Hd=V.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,H.jsx)(B.div,{...r,ref:t})});Hd.displayName=Vd;var Ud=`ToastDescription`,Wd=V.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e;return(0,H.jsx)(B.div,{...r,ref:t})});Wd.displayName=Ud;var Gd=`ToastAction`,Kd=V.forwardRef((e,t)=>{let{altText:n,...r}=e;return n.trim()?(0,H.jsx)(Yd,{altText:n,asChild:!0,children:(0,H.jsx)(Jd,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Gd}\`. Expected non-empty \`string\`.`),null)});Kd.displayName=Gd;var qd=`ToastClose`,Jd=V.forwardRef((e,t)=>{let{__scopeToast:n,...r}=e,i=Rd(qd,n);return(0,H.jsx)(Yd,{asChild:!0,children:(0,H.jsx)(B.button,{type:`button`,...r,ref:t,onClick:z(e.onClick,i.onClose)})})});Jd.displayName=qd;var Yd=V.forwardRef((e,t)=>{let{__scopeToast:n,altText:r,...i}=e;return(0,H.jsx)(B.div,{"data-radix-toast-announce-exclude":``,"data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function Xd(e){let t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),ef(e)){let n=e.ariaHidden||e.hidden||e.style.display===`none`,r=e.dataset.radixToastAnnounceExclude===``;if(!n)if(r){let n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Xd(e))}}),t}function Zd(e,t,n,{discrete:r}){let i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Ye(i,a):i.dispatchEvent(a)}var Qd=(e,t,n=0)=>{let r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t===`left`||t===`right`?a&&r>n:!a&&i>n};function $d(e=()=>{}){let t=st(e);Nt(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}function ef(e){return e.nodeType===e.ELEMENT_NODE}function tf(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t=e.tagName===`INPUT`&&e.type===`hidden`;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nf(e){let t=document.activeElement;return e.some(e=>e===t?!0:(e.focus(),document.activeElement!==t))}var rf=Cd,af=Od,of=Id,sf=Hd,cf=Wd,lf=Kd,uf=Jd,df=rf,ff=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(af,{ref:n,className:G(`fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]`,e),...t}));ff.displayName=af.displayName;var pf=hc(`group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full`,{variants:{variant:{default:`border bg-background text-foreground`,destructive:`destructive group border-destructive bg-destructive text-destructive-foreground`}},defaultVariants:{variant:`default`}}),mf=V.forwardRef(({className:e,variant:t,...n},r)=>(0,H.jsx)(of,{ref:r,className:G(pf({variant:t}),e),...n}));mf.displayName=of.displayName;var hf=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(lf,{ref:n,className:G(`inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive`,e),...t}));hf.displayName=lf.displayName;var gf=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(uf,{ref:n,className:G(`absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600`,e),"toast-close":``,...t,children:(0,H.jsx)(Au,{className:`h-4 w-4`})}));gf.displayName=uf.displayName;var _f=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(sf,{ref:n,className:G(`text-sm font-semibold`,e),...t}));_f.displayName=sf.displayName;var vf=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(cf,{ref:n,className:G(`text-sm opacity-90`,e),...t}));vf.displayName=cf.displayName;function yf(){let{toasts:e}=pd();return(0,H.jsxs)(df,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return(0,H.jsxs)(mf,{...i,children:[(0,H.jsxs)(`div`,{className:`grid gap-1`,children:[t&&(0,H.jsx)(_f,{children:t}),n&&(0,H.jsx)(vf,{children:n})]}),r,(0,H.jsx)(gf,{})]},e)}),(0,H.jsx)(ff,{})]})}function bf(e){let t=null;return()=>(t??=e(),t)}function xf(e,t){return e.filter(e=>e!==t)}function Sf(e,t){let n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);let i=[];return n.forEach(e=>i.push(e)),i}var Cf=class{enter(e){let t=this.entered.length;return this.entered=Sf(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),t===0&&this.entered.length>0}leave(e){let t=this.entered.length;return this.entered=xf(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}},wf=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}},Tf=e({FILE:()=>Ef,HTML:()=>kf,TEXT:()=>Of,URL:()=>Df});const Ef=`__NATIVE_FILE__`,Df=`__NATIVE_URL__`,Of=`__NATIVE_TEXT__`,kf=`__NATIVE_HTML__`;function Af(e,t,n){return t.reduce((t,n)=>t||e.getData(n),``)??n}const jf={[Ef]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:[`Files`]},[kf]:{exposeProperties:{html:(e,t)=>Af(e,t,``),dataTransfer:e=>e},matchesTypes:[`Html`,`text/html`]},[Df]:{exposeProperties:{urls:(e,t)=>Af(e,t,``).split(`
`),dataTransfer:e=>e},matchesTypes:[`Url`,`text/uri-list`]},[Of]:{exposeProperties:{text:(e,t)=>Af(e,t,``),dataTransfer:e=>e},matchesTypes:[`Text`,`text/plain`]}};function Mf(e,t){let n=jf[e];if(!n)throw Error(`native type ${e} has no configuration`);let r=new wf(n);return r.loadDataTransfer(t),r}function Nf(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(jf).filter(e=>{let n=jf[e];return n?.matchesTypes?n.matchesTypes.some(e=>t.indexOf(e)>-1):!1})[0]||null}const Pf=bf(()=>/firefox/i.test(navigator.userAgent)),Ff=bf(()=>!!window.safari);var If=class{interpolate(e){let{xs:t,ys:n,c1s:r,c2s:i,c3s:a}=this,o=t.length-1;if(e===t[o])return n[o];let s=0,c=a.length-1,l;for(;s<=c;){l=Math.floor(.5*(s+c));let r=t[l];if(r<e)s=l+1;else if(r>e)c=l-1;else return n[l]}o=Math.max(0,c);let u=e-t[o],d=u*u;return n[o]+r[o]*u+i[o]*d+a[o]*u*d}constructor(e,t){let{length:n}=e,r=[];for(let e=0;e<n;e++)r.push(e);r.sort((t,n)=>e[t]<e[n]?-1:1);let i=[],a=[],o=[],s,c;for(let r=0;r<n-1;r++)s=e[r+1]-e[r],c=t[r+1]-t[r],a.push(s),i.push(c),o.push(c/s);let l=[o[0]];for(let e=0;e<a.length-1;e++){let t=o[e],n=o[e+1];if(t*n<=0)l.push(0);else{s=a[e];let r=a[e+1],i=s+r;l.push(3*i/((i+r)/t+(i+s)/n))}}l.push(o[o.length-1]);let u=[],d=[],f;for(let e=0;e<l.length-1;e++){f=o[e];let t=l[e],n=1/a[e],r=t+l[e+1]-f-f;u.push((f-t-r)*n),d.push(r*n*n)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=u,this.c3s=d}},Lf=1;function Rf(e){let t=e.nodeType===Lf?e:e.parentElement;if(!t)return null;let{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function zf(e){return{x:e.clientX,y:e.clientY}}function Bf(e){return e.nodeName===`IMG`&&(Pf()||!document.documentElement?.contains(e))}function Vf(e,t,n,r){let i=e?t.width:n,a=e?t.height:r;return Ff()&&e&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function Hf(e,t,n,r,i){let a=Bf(t),o=Rf(a?e:t),s={x:n.x-o.x,y:n.y-o.y},{offsetWidth:c,offsetHeight:l}=e,{anchorX:u,anchorY:d}=r,{dragPreviewWidth:f,dragPreviewHeight:p}=Vf(a,t,c,l),m=()=>{let e=new If([0,.5,1],[s.y,s.y/l*p,s.y+p-l]).interpolate(d);return Ff()&&a&&(e+=(window.devicePixelRatio-1)*p),e},h=()=>new If([0,.5,1],[s.x,s.x/c*f,s.x+f-c]).interpolate(u),{offsetX:g,offsetY:_}=i,v=g===0||g,y=_===0||_;return{x:v?g:h(),y:y?_:m()}}var Uf=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<`u`)return window}get document(){if(this.globalContext?.document)return this.globalContext.document;if(this.window)return this.window.document}get rootElement(){return this.optionsArgs?.rootElement||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function Wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Wf(e,t,n[t])})}return e}var Kf=class{profile(){return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:this.dragStartSourceIds?.length||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw Error(`Cannot have two HTML5 backends at the same time.`);e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)==null||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);let r=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute(`draggable`,`true`),t.addEventListener(`dragstart`,r),t.addEventListener(`selectstart`,i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener(`dragstart`,r),t.removeEventListener(`selectstart`,i),t.setAttribute(`draggable`,`false`)}}connectDropTarget(e,t){let n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener(`dragenter`,n),t.addEventListener(`dragover`,r),t.addEventListener(`drop`,i),()=>{t.removeEventListener(`dragenter`,n),t.removeEventListener(`dragover`,r),t.removeEventListener(`drop`,i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener(`dragstart`,this.handleTopDragStart),e.addEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.addEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.addEventListener(`dragenter`,this.handleTopDragEnter),e.addEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.addEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.addEventListener(`dragover`,this.handleTopDragOver),e.addEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.addEventListener(`drop`,this.handleTopDrop),e.addEventListener(`drop`,this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener(`dragstart`,this.handleTopDragStart),e.removeEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.removeEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.removeEventListener(`dragenter`,this.handleTopDragEnter),e.removeEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.removeEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.removeEventListener(`dragover`,this.handleTopDragOver),e.removeEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.removeEventListener(`drop`,this.handleTopDrop),e.removeEventListener(`drop`,this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Gf({dropEffect:this.altKeyPressed?`copy`:`move`},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?`copy`:this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId();return Gf({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(Tf).some(t=>Tf[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Mf(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>this.rootElement?.addEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)==null||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||=[],this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&Rf(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;e==null||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{this.hoverRafId===null&&typeof requestAnimationFrame<`u`&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<`u`&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let n=zf(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});let{dataTransfer:r}=e,i=Nf(r);if(this.monitor.isDragging()){if(r&&typeof r.setDragImage==`function`){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){let{anchorX:e,anchorY:a,offsetX:o,offsetY:s}=this.getCurrentSourcePreviewNodeOptions(),c=Hf(t,i,n,{anchorX:e,anchorY:a},{offsetX:o,offsetY:s});r.setDragImage(i,c.x,c.y)}}try{r?.setData(`application/json`,{})}catch{}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute(`draggable`)))return;else e.preventDefault()},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:n}=e,r=Nf(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:zf(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`);return}this.altKeyPressed=e.altKey,this.lastClientOffset=zf(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var t;e.preventDefault(),(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}else Nf(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:zf(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;typeof t.dragDrop==`function`&&(t.tagName===`INPUT`||t.tagName===`SELECT`||t.tagName===`TEXTAREA`||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Uf(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Cf(this.isNodeInDocument)}};const qf=function(e,t,n){return new Kf(e,t,n)};var Jf;(function(e){e.mouse=`mouse`,e.touch=`touch`,e.keyboard=`keyboard`})(Jf||={});var Yf=class{get delay(){return this.args.delay??0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){return this.args.ignoreContextMenu??!1}get enableHoverOutsideTarget(){return this.args.enableHoverOutsideTarget??!1}get enableKeyboardEvents(){return this.args.enableKeyboardEvents??!1}get enableMouseEvents(){return this.args.enableMouseEvents??!1}get enableTouchEvents(){return this.args.enableTouchEvents??!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){return this.args?.delayTouchStart??this.args?.delay??0}get delayMouseStart(){return this.args?.delayMouseStart??this.args?.delay??0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<`u`)return window}get document(){if(this.context?.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){return this.args?.rootElement||this.document}constructor(e,t){this.args=e,this.context=t}};function Xf(e,t,n,r){return Math.sqrt(Math.abs(n-e)**2+Math.abs(r-t)**2)}function Zf(e,t,n,r,i){if(!i)return!1;let a=Math.atan2(r-t,n-e)*180/Math.PI+180;for(let e=0;e<i.length;++e){let t=i[e];if(t&&(t.start==null||a>=t.start)&&(t.end==null||a<=t.end))return!0}return!1}var Qf={Left:1,Right:2,Center:4},$f={Left:0,Center:1,Right:2};function ep(e){return e.button===void 0||e.button===$f.Left}function tp(e){return e.buttons===void 0||(e.buttons&Qf.Left)===0}function np(e){return!!e.targetTouches}var rp=1;function ip(e){let t=e.nodeType===rp?e:e.parentElement;if(!t)return;let{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function ap(e,t){if(e.targetTouches.length===1)return op(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return op(e.touches[0])}function op(e,t){return np(e)?ap(e,t):{x:e.clientX,y:e.clientY}}const sp=(()=>{let e=!1;try{addEventListener(`test`,()=>{},Object.defineProperty({},`passive`,{get(){return e=!0,!0}}))}catch{}return e})();var cp={[Jf.mouse]:{start:`mousedown`,move:`mousemove`,end:`mouseup`,contextmenu:`contextmenu`},[Jf.touch]:{start:`touchstart`,move:`touchmove`,end:`touchend`},[Jf.keyboard]:{keydown:`keydown`}},lp=class e{profile(){return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(jr(!e.isSetUp,`Cannot have two Touch backends at the same time.`),e.isSetUp=!0,this.addEventListener(t,`start`,this.getTopMoveStartHandler()),this.addEventListener(t,`start`,this.handleTopMoveStartCapture,!0),this.addEventListener(t,`move`,this.handleTopMove),this.addEventListener(t,`move`,this.handleTopMoveCapture,!0),this.addEventListener(t,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,`keydown`,this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,`start`,this.handleTopMoveStartCapture,!0),this.removeEventListener(t,`start`,this.handleTopMoveStart),this.removeEventListener(t,`move`,this.handleTopMoveCapture,!0),this.removeEventListener(t,`move`,this.handleTopMove),this.removeEventListener(t,`end`,this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,`contextmenu`,this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,`keydown`,this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n,r=!1){let i=sp?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){let a=cp[r][t];a&&e.addEventListener(a,n,i)})}removeEventListener(e,t,n,r=!1){let i=sp?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){let a=cp[r][t];a&&e.removeEventListener(a,n,i)})}connectDragSource(e,t){let n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,`start`,n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,`start`,n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let r=r=>{if(!this.document||!n||!this.monitor.isDragging())return;let i;switch(r.type){case cp.mouse.move:i={x:r.clientX,y:r.clientY};break;case cp.touch.move:i={x:r.touches[0]?.clientX||0,y:r.touches[0]?.clientY||0};break}let a=i==null?void 0:this.document.elementFromPoint(i.x,i.y),o=a&&t.contains(a);if(a===t||o)return this.handleMove(r,e)};return this.addEventListener(this.document.body,`move`,r),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,`move`,r))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display=`none`,this.draggedSourceNode.removeAttribute(`data-reactid`),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&ip(t)},this.handleTopMoveStartCapture=e=>{ep(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!ep(e))return;let t=op(e);t&&(np(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!ep(e))return;let t=e.type===cp.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:t,dragOverTargetIds:n}=this,r=this.options.enableHoverOutsideTarget,i=op(e,this.lastTargetTouchFallback);if(!i)return;if(this._isScrolling||!this.monitor.isDragging()&&Zf(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,i.x,i.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty(`x`)&&t&&Xf(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,i.x,i.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let a=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(a),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();let o=(n||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),s=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(i.x,i.y,o):this.document.elementsFromPoint(i.x,i.y),c=[];for(let e in s){if(!s.hasOwnProperty(e))continue;let t=s[e];for(t!=null&&c.push(t);t;)t=t.parentElement,t&&c.indexOf(t)===-1&&c.push(t)}let l=c.filter(e=>o.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,n)=>n.indexOf(e)===t);if(r)for(let e in this.targetNodes){let t=this.targetNodes.get(e);if(a&&t&&t.contains(a)&&l.indexOf(e)===-1){l.unshift(e);break}}l.reverse(),this.actions.hover(l,{clientOffset:i})},this._getDropTargetId=e=>{let t=this.targetNodes.keys(),n=t.next();for(;n.done===!1;){let r=n.value;if(e===this.targetNodes.get(r))return r;n=t.next()}},this.handleTopMoveEndCapture=e=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,tp(e)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=e=>{e.key===`Escape`&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Yf(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Jf.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Jf.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Jf.keyboard)}};const up=function(e,t={},n={}){return new lp(e,t,n)};var dp=(()=>El(({proxy:e})=>{let[t,n]=(0,V.useState)({type:`row`,props:{text:`Hi`}});(0,V.useEffect)(()=>{e.register({setLayout:n})},[e,n]);let{useReactEntries:r}=Fm,i=r(),a=i.filter(e=>e.WrapperComponent);return(0,H.jsxs)(ba,{backend:yr.isMobile()?up:qf,children:[i.filter(e=>e.reactNode).map(e=>(0,H.jsx)(V.Fragment,{children:e.reactNode},e.id)),(0,H.jsx)(yf,{}),(0,H.jsx)(j,{className:`workbench ${yr.isMobile()?`mobile`:`pc`}`,w:`100%`,h:`100%`,overflow:`hidden`,children:(e=>{let n=Yu.render(t);return a.reduceRight((e,t,n)=>{let r=t.WrapperComponent;return(0,H.jsx)(r,{children:e})},n)})(0)})]})}))();const fp=(()=>({renderLayout:e=>{td.createRoot(e).render((0,H.jsx)(r,{children:dp.instance}))},sidebar:Ju.proxy,pageBox:qu.proxy,titleBar:Ku.proxy,statusBar:Gu.proxy,activityBar:Wu.proxy,workbench:dp.proxy}))();function pp(e={}){let{level:t=`INFO`,format:n=(e,t)=>`[${e}] ${t}`}=e;function r(e,r){[`DEBUG`,`INFO`,`WARNING`,`ERROR`].indexOf(e)>=[`DEBUG`,`INFO`,`WARNING`,`ERROR`].indexOf(t)&&n(e,r)}return{debug:e=>r(`DEBUG`,e),info:e=>r(`INFO`,e),warning:e=>r(`WARNING`,e),error:e=>r(`ERROR`,e)}}const mp=(()=>{let e=pp();return{debug:e.debug,info:e.info,warning:e.warning,error:e.error,createLogger:pp}})();var hp=`Dialog`,[gp,_p]=ot(hp),[vp,yp]=gp(hp),bp=e=>{let{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,s=V.useRef(null),c=V.useRef(null),[l,u]=Tt({prop:r,defaultProp:i??!1,onChange:a,caller:hp});return(0,H.jsx)(vp,{scope:t,triggerRef:s,contentRef:c,contentId:Ze(),titleId:Ze(),descriptionId:Ze(),open:l,onOpenChange:u,onOpenToggle:V.useCallback(()=>u(e=>!e),[u]),modal:o,children:n})};bp.displayName=hp;var xp=`DialogTrigger`,Sp=V.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=yp(xp,n),a=Xe(t,i.triggerRef);return(0,H.jsx)(B.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Hp(i.open),...r,ref:a,onClick:z(e.onClick,i.onOpenToggle)})});Sp.displayName=xp;var Cp=`DialogPortal`,[wp,Tp]=gp(Cp,{forceMount:void 0}),Ep=e=>{let{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=yp(Cp,t);return(0,H.jsx)(wp,{scope:t,forceMount:n,children:V.Children.map(r,e=>(0,H.jsx)(wt,{present:n||a.open,children:(0,H.jsx)(yt,{asChild:!0,container:i,children:e})}))})};Ep.displayName=Cp;var Dp=`DialogOverlay`,Op=V.forwardRef((e,t)=>{let n=Tp(Dp,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=yp(Dp,e.__scopeDialog);return a.modal?(0,H.jsx)(wt,{present:r||a.open,children:(0,H.jsx)(Ap,{...i,ref:t})}):null});Op.displayName=Dp;var kp=ut(`DialogOverlay.RemoveScroll`),Ap=V.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=yp(Dp,n);return(0,H.jsx)(ne,{as:kp,allowPinchZoom:!0,shards:[i.contentRef],children:(0,H.jsx)(B.div,{"data-state":Hp(i.open),...r,ref:t,style:{pointerEvents:`auto`,...r.style}})})}),jp=`DialogContent`,Mp=V.forwardRef((e,t)=>{let n=Tp(jp,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=yp(jp,e.__scopeDialog);return(0,H.jsx)(wt,{present:r||a.open,children:a.modal?(0,H.jsx)(Np,{...i,ref:t}):(0,H.jsx)(Pp,{...i,ref:t})})});Mp.displayName=jp;var Np=V.forwardRef((e,t)=>{let n=yp(jp,e.__scopeDialog),r=V.useRef(null),i=Xe(t,n.contentRef,r);return V.useEffect(()=>{let e=r.current;if(e)return ie(e)},[]),(0,H.jsx)(Fp,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:z(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0;(t.button===2||n)&&e.preventDefault()}),onFocusOutside:z(e.onFocusOutside,e=>e.preventDefault())})}),Pp=V.forwardRef((e,t)=>{let n=yp(jp,e.__scopeDialog),r=V.useRef(!1),i=V.useRef(!1);return(0,H.jsx)(Fp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),Fp=V.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,s=yp(jp,n),c=V.useRef(null),l=Xe(t,c);return yc(),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Tc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,H.jsx)($e,{role:`dialog`,id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Hp(s.open),...o,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Kp,{titleId:s.titleId}),(0,H.jsx)(Jp,{contentRef:c,descriptionId:s.descriptionId})]})]})}),Ip=`DialogTitle`,Lp=V.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=yp(Ip,n);return(0,H.jsx)(B.h2,{id:i.titleId,...r,ref:t})});Lp.displayName=Ip;var Rp=`DialogDescription`,zp=V.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=yp(Rp,n);return(0,H.jsx)(B.p,{id:i.descriptionId,...r,ref:t})});zp.displayName=Rp;var Bp=`DialogClose`,Vp=V.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,i=yp(Bp,n);return(0,H.jsx)(B.button,{type:`button`,...r,ref:t,onClick:z(e.onClick,()=>i.onOpenChange(!1))})});Vp.displayName=Bp;function Hp(e){return e?`open`:`closed`}var Up=`DialogTitleWarning`,[Wp,Gp]=Et(Up,{contentName:jp,titleName:Ip,docsSlug:`dialog`}),Kp=({titleId:e})=>{let t=Gp(Up),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return V.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},qp=`DialogDescriptionWarning`,Jp=({contentRef:e,descriptionId:t})=>{let n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Gp(qp).contentName}}.`;return V.useEffect(()=>{let r=e.current?.getAttribute(`aria-describedby`);t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Yp=bp,Xp=Sp,Zp=Ep,Qp=Op,$p=Mp,em=Lp,tm=zp,nm=Vp,rm=Yp,im=Xp,am=Zp,om=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(Qp,{ref:n,className:G(`fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t}));om.displayName=Qp.displayName;var sm=V.forwardRef(({className:e,children:t,...n},r)=>(0,H.jsxs)(am,{children:[(0,H.jsx)(om,{}),(0,H.jsxs)($p,{ref:r,className:G(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg`,e),...n,children:[t,(0,H.jsxs)(nm,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,H.jsx)(Au,{className:`h-4 w-4`}),(0,H.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));sm.displayName=$p.displayName;var cm=({className:e,...t})=>(0,H.jsx)(`div`,{className:G(`flex flex-col space-y-1.5 text-center sm:text-left`,e),...t});cm.displayName=`DialogHeader`;var lm=({className:e,...t})=>(0,H.jsx)(`div`,{className:G(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});lm.displayName=`DialogFooter`;var um=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(em,{ref:n,className:G(`text-lg font-semibold leading-none tracking-tight`,e),...t}));um.displayName=em.displayName;var dm=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(tm,{ref:n,className:G(`text-sm text-muted-foreground`,e),...t}));dm.displayName=tm.displayName;var fm=V.forwardRef(({className:e,type:t,...n},r)=>(0,H.jsx)(`input`,{type:t,className:G(`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:r,...n}));fm.displayName=`Input`;var pm=t(Lt(),1).createRoot((()=>{let e=document.createElement(`div`);return e.id=`modal-container`,document.body.appendChild(e),e})());const mm=V.createContext(void 0),hm=(()=>{let e=({content:e,title:t,onOk:n,onCancel:r,okText:i=`Confirm`,cancelText:a=`Cancel`,footer:o=!0,width:s,height:c,closeIcon:l,modalContentClassName:u,modalBodyClassName:d})=>{let f=El(({proxy:f})=>(0,H.jsx)(({content:e})=>{let[p,m]=(0,V.useState)(!1);(0,V.useEffect)(()=>f.register({open:()=>m(!0),close:()=>m(!1)}),[]);let h=e=>{m(e),e||r?.()},g=V.forwardRef(({className:e,children:t,showCloseButton:n=!0,...r},i)=>(0,H.jsxs)(Zp,{children:[(0,H.jsx)(Qp,{className:`fixed inset-0 z-50 bg-black/80 transition-opacity duration-300 data-[state=open]:opacity-100 data-[state=closed]:opacity-0`}),(0,H.jsx)(`style`,{children:`
                @keyframes dialog-fade-in {
                  from {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.96);
                  }
                  to {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                  }
                }
                @keyframes dialog-fade-out {
                  from {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                  }
                  to {
                    opacity: 0;
                    transform: translate(-50%, -50%) scale(0.96);
                  }
                }
                [data-radix-dialog-content][data-state="open"] {
                  animation: dialog-fade-in 300ms ease-out;
                }
                [data-radix-dialog-content][data-state="closed"] {
                  animation: dialog-fade-out 200ms ease-in;
                }
              `}),(0,H.jsxs)($p,{ref:i,className:G(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background shadow-lg sm:rounded-lg`,e),...r,children:[t,n&&(0,H.jsxs)(nm,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,H.jsx)(Au,{className:`h-4 w-4`}),(0,H.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));return g.displayName=`DialogContent`,(0,H.jsx)(mm.Provider,{value:f,children:(0,H.jsx)(rm,{open:p,onOpenChange:h,children:(0,H.jsxs)(g,{className:G(`sm:max-w-lg p-0`,u),style:{width:s||void 0,height:c||void 0,maxWidth:s||void 0},showCloseButton:l!==!1,children:[t&&(0,H.jsx)(cm,{className:`px-6 pt-6 pb-4`,children:(0,H.jsx)(um,{children:t})}),l&&typeof l!=`boolean`&&l,(0,H.jsx)(`div`,{className:G(`px-6`,d),children:e}),o&&(0,H.jsxs)(lm,{className:`px-6 pb-6 pt-4`,children:[(0,H.jsx)(_c,{variant:`ghost`,onClick:()=>{m(!1),r?.()},children:a}),(0,H.jsx)(_c,{onClick:()=>{n?.()},children:i})]})]})})})},{content:e}));return pm.render(f.instance),f.proxy};return{createModal:e,prompt:(t,n)=>{let r=El(({proxy:e})=>{let[t,r]=(0,V.useState)();return(0,V.useEffect)(()=>{e.register({getInput:()=>t})},[t,e]),(0,H.jsxs)(`div`,{className:`space-y-4`,children:[n&&(0,H.jsx)(dm,{children:n}),(0,H.jsx)(fm,{onChange:e=>r(e.target.value),autoFocus:!0})]})});return new Promise(n=>{let i=e({title:t,content:r.instance,onOk:()=>{n(r.proxy.getInput()),i.close()},onCancel:()=>{n(void 0)}});i.open()})},confirm:t=>{let{title:n,description:r}=t;return new Promise(t=>{let i=e({title:n,content:r?(0,H.jsx)(dm,{children:r}):null,onOk:()=>{t(!0),i.close()},onCancel:()=>{t(!1),i.close()}});i.open()})},open:(...t)=>{let n=e(...t);return n.open(),n}}})();var gm=t(Lt(),1);const _m=(()=>{let e=Tl(),t=()=>{let t=T();return(0,V.useEffect)(()=>{let n=e=>n=>{t(typeof n==`string`?{description:n,status:e,duration:3e3,isClosable:!0,position:`bottom-right`}:{duration:3e3,isClosable:!0,position:`bottom-right`,...n,status:e})},r=n(`success`),i=n(`error`),a=n(`info`),o=n(`warning`),s=n(`loading`);e.register({success:r,error:i,warning:o,loading:s,info:a})},[t]),(0,H.jsx)(H.Fragment,{})};if(!document.getElementById(`message-container`)){let e=document.createElement(`div`);e.id=`message-container`,document.body&&(document.body.appendChild(e),gm.createRoot(e).render((0,H.jsx)(r,{children:(0,H.jsx)(t,{})})))}return e})(),vm=(()=>{let e=[];return{use:t=>{Array.isArray(t)||(t=[t]),t.forEach(t=>{e.push(t),t.activate(q)})}}})();var ym=t(Lt(),1),bm=({content:e,isOpen:t,onClose:n,targetRect:r})=>!t||!r?null:(0,H.jsx)(`div`,{style:{position:`absolute`,top:r.bottom+window.scrollY,left:r.left+window.scrollX,background:`white`,padding:`10px`,border:`1px solid #ccc`,borderRadius:`4px`,boxShadow:`0 2px 10px rgba(0, 0, 0, 0.1)`},onClick:n,children:e}),xm=null,Sm=(e,t)=>{xm&&xm.destroy();let n=e.getBoundingClientRect(),r=document.createElement(`div`);document.body.appendChild(r);let i=ym.createRoot(r),a=()=>{i.unmount(),document.body.removeChild(r)};return xm={destroy:a},i.render((0,H.jsx)(bm,{content:t,isOpen:!0,onClose:()=>{a(),xm=null},targetRect:n})),()=>{a(),xm=null}};const Cm={open:({target:e,content:t})=>Sm(e,t)};var wm={create:()=>{let e={},t=[],n=t=>t in e,r=t=>e[t],i=(t,n)=>{e[t]=n},a=(e,n)=>{let r=t.filter(t=>t.key===e);for(let e of r)e.callback(n)};return{has:n,get:r,set:(e,t)=>{i(e,t),a(e,t)},waitAvailable:(e,i)=>{if(n(e))i(r(e));else{let n={key:e,callback:e=>{i(e);let r=t.indexOf(n);r>=0&&t.splice(r,1)}};t.push(n)}},subscribe:(e,n)=>{let r={key:e,callback:n};return t.push(r),()=>{let e=t.indexOf(r);e>=0&&t.splice(e,1)}}}}};const Tm=(()=>wm.create())(),Em=()=>{let e={},t=t=>Object.hasOwnProperty.call(e,t),n=(e,n)=>{for(let r in e=xr(e),n)if(t(`${e}.${r}`))return!1;for(let t in n)r(`${e}.${t}`,n[t])},r=(t,n)=>{if(typeof t!=`string`){let e=[];for(let n of Object.keys(t)){let i=r(n,t[n]);i&&e.push(i)}return()=>e.forEach(e=>e())}else return e[t]=n,()=>delete e[t]},i=(n,...r)=>{if(!t(n))throw Error(`Service not found: ${n.toString()}`);return e[n](...r)};return{expose:r,exposeAt:n,invoke:i,createProxy:e=>new Proxy({},{get:(t,n)=>{let r=xr(`${xr(e)}.${n}`);return(...e)=>i(r,...e)}}),$map:e}};var Dm=(e,t)=>`${e}.${t}`;const Om=()=>{let e={},t=(t,n)=>{let r=xr(t);return e[r]=n,()=>delete e[r]},n=(t,...n)=>{let r=xr(t);if(!e[r])throw Error(`Service not found: ${r}`);return e[r](...n)};return{register:t,expose:t,registerFromMap:(e,n)=>{for(let r in n)n[r]&&t(Dm(xr(e),r),n[r])},invoke:n,createProxy:e=>new Proxy({},{get:(t,r)=>{let i=xr(Dm(xr(e),r));return(...e)=>n(i,...e)}})}},km=Em,Am=km();sc.create({scope:`shortcut`,storage:`localStorage`});const jm=go(()=>{let{addShortcut:e,useShortcutList:t}=Vs(`ShortcutList`,[],e=>{let{add:t}=bl(e.setShortcutList,e.getShortcutList);return{addShortcut:t}});return{addShortcut:e,useShortcutList:()=>t().sort((e,t)=>(e.order||1/0)-(t.order||1/0))}}).create();let Mm=function(e){return e.Pending=`Pending`,e.Deffered=`Deffered`,e.InProgress=`InProgress`,e.Completed=`Completed`,e.Error=`Error`,e}({});var Nm=class{constructor(e,t,n=Mm.Pending){this.taskType=e,this.taskData=t,this.status=n}async execute(){this.status=Mm.InProgress;try{let e=this.taskType.execute(this.taskData);e instanceof Promise&&await e,this.status=Mm.Completed}catch(e){this.status=Mm.Error,console.error(`Task execution error:`,e)}}};const Pm=new class{constructor(e,t=new Map,n=[],r=[]){this.id=e,this.taskTypes=t,this.taskQueue=n,this.historyTasks=r}registerTaskType(e){this.taskTypes.set(e.name,e)}addTask(e,t,n={deffered:!1}){if(!this.taskTypes.has(e))throw Error(`Task type "${e}" is not registered.`);let r=new Nm(this.taskTypes.get(e),t,n.deffered?Mm.Deffered:Mm.Pending);this.taskQueue.push(r),this.saveTasks(),setTimeout(()=>{this.executeTasks()})}executeTasks(){this.taskQueue.filter(e=>e.status!==Mm.Deffered).forEach(e=>{e.status==Mm.Pending&&e.execute().then(()=>{this.archiveTask(e)})})}archiveTask(e){let t=this.taskQueue.indexOf(e);t!==-1&&(this.taskQueue.splice(t,1),this.historyTasks.push(e)),this.saveTasks()}continueInterruptedTasks(){this.taskQueue.forEach(e=>{e.status===Mm.InProgress&&e.execute().then(()=>{this.archiveTask(e)})})}saveTasks(){let e=this.serializeTasks();localStorage.setItem(this.id,JSON.stringify(e))}loadTasks(){let e=localStorage.getItem(this.id),t=null;try{t=e?JSON.parse(e):null}catch(e){console.error(`Error parsing stored tasks:`,e)}t&&this.deserializeTasks(t)}serializeTasks(){return{id:this.id,taskQueue:this.taskQueue.map(e=>({taskType:e.taskType.name,taskData:e.taskData,status:e.status})),historyTasks:this.historyTasks.map(e=>({taskType:e.taskType.name,taskData:e.taskData,status:e.status}))}}deserializeTasks(e){if(e.id!==this.id)throw Error(`Invalid serialized data for this task manager`);this.taskQueue=e.taskQueue.reduce((e,t)=>{let n=t.taskType;if(!this.taskTypes.has(n))return console.warn(`Task type "${n}" is not registered. Skipping this task.`),e;let r=new Nm(this.taskTypes.get(n),t.taskData);return r.status=t.status,r.status===Mm.Deffered&&(r.status=Mm.Pending),e.push(r),e},[]),this.historyTasks=e.historyTasks.reduce((e,t)=>{let n=t.taskType;if(!this.taskTypes.has(n))return console.warn(`Task type "${n}" is not registered. Skipping this task.`),e;let r=new Nm(this.taskTypes.get(n),t.taskData);return r.status=t.status,e.push(r),e},[])}start(){window.addEventListener(`DOMContentLoaded`,()=>{this.loadTasks(),this.continueInterruptedTasks(),this.executeTasks()})}}(`xbook::taskManager`),Fm=new class{ReactEntries=Vs(`ReactEntries`,[],e=>{let{getReactEntries:t,setReactEntries:n}=e,{add:r,delete:i,update:a}=bl(n,t,`id`);return{addReactEntry:r,deleteReactEntry:i,updateReactEntry:a}});addReactEntry=e=>this.ReactEntries.addReactEntry(e);useReactEntries=()=>this.ReactEntries.useReactEntries()};var q={logService:mp,taskService:Pm,serviceBus:Am,commandService:Cr,eventBus:Pl,registry:Tm,pluginService:vm,cacheService:Zu,layoutService:fp,fs:ed,notificationService:_m,modalService:hm,componentService:Yu,shortcutService:jm,popupService:Cm,workbenchService:Fm},Im=e=>({doAddEvents:t=>{Object.entries(t).forEach(([t,n])=>{e.eventBus.on(t,n)})},doAddCommands:t=>{Array.isArray(t)?e.commandService.registerCommandWithScope(t[0],t[1]):t&&e.commandService.registerCommand(t)},doAddServices:t=>{Array.isArray(t)?e.serviceBus.exposeAt(t[0],t[1]):t&&e.serviceBus.expose(t)},doAddComponents:t=>{Object.entries(t).forEach(([t,n])=>{e.componentService.register(t,n)})},doAddActivities:t=>{Array.isArray(t)?t.forEach(t=>{e.layoutService.activityBar.addActivity(t)}):e.layoutService.activityBar.addActivity(t)},doAddPages:t=>{let n=(t,{id:n,title:r})=>{e.eventBus.on(`${t}::${n}`,()=>{e.layoutService.pageBox.addPage({id:n,title:r,viewData:{type:n}}),e.layoutService.pageBox.showPage(n)})},r=({id:t,title:n})=>{e.eventBus.on(t,()=>{e.layoutService.pageBox.addPage({id:t,title:n,viewData:{type:t}}),e.layoutService.pageBox.showPage(t)})};if(Array.isArray(t))for(let[e,{title:r}]of Object.entries(t[1]))n(t[0],{id:e,title:r});else if(t)for(let[e,{title:n}]of Object.entries(t))r({id:e,title:n})}});const Lm=({initilize:e,initialize:t,addCommands:n,addEvents:r,addServices:i,addComponents:a,addPages:o,addActivities:s})=>({activate:()=>{let c=Im(q);if(r){let e=r(q);c.doAddEvents(e)}if(n){let e=n(q);c.doAddCommands(e)}if(i){let e=i(q);c.doAddServices(e)}if(a){let e=a(q);c.doAddComponents(e)}if(s){let e=s(q);c.doAddActivities(e)}if(o){let e=o(q);c.doAddPages(e)}(t||e)?.(q)}});function Rm({shortcut:e,isExpanded:t}){return(0,H.jsx)(ju,{activity:{id:e.id,name:e.name,icon:e.icon},isExpanded:t,icon:(0,H.jsx)(du,{className:`w-full h-full`}),onClick:()=>{window.open(`https://github.com/Peiiii/gitary`,`_blank`,`noopener,noreferrer`)}})}var zm={type:`column`,props:{h:`100%`,w:`100%`,className:`layout`},children:[{type:`row`,props:{h:`100%`,flexGrow:1,className:`middle-row`},children:[{type:`row`,props:{h:`100%`,flexShrink:0,className:``},children:[{type:`activityBar`},{type:`sidebar`},{type:`pageBox`}]}]}]},Bm={type:`column`,props:{h:`100%`,w:`100%`},children:[{type:`row`,props:{h:`100%`,flexGrow:1,className:`middle-row`},children:[{type:`row`,props:{flexShrink:0,h:`100%`},children:[{type:`activityBar`},{type:`row`,children:[{type:Xu.SideResizer,props:{},children:[{type:`sidebar`},{type:`pageBox`}]}]}]}]}]},Vm={Initialized:`initialized:20241201`},Hm=Lm({initilize(e){window.xbook=e;let t=e.cacheService.space(`base`,`localStorage`);e.componentService.register(`Github`,du),e.shortcutService.addShortcut({id:`github`,name:`GitHub`,order:9999,icon:`Github`}),e.componentService.register(`shortcut:github`,Rm),yr.isMobile()?(e.layoutService.pageBox.showTabBar(),e.layoutService.workbench.setLayout(zm),t.get(Vm.Initialized,!1)||(e.layoutService.sidebar.show(),e.layoutService.activityBar.show(),e.layoutService.pageBox.hide(),console.log(`initialize mobile layout:`,`sidebar:`,e.layoutService.sidebar.getVisible(),`activityBar:`,e.layoutService.activityBar.getVisible(),`pageBox:`,e.layoutService.pageBox.getVisible()),t.set(Vm.Initialized,!0)),e.commandService.registerCommand(Sr.ToggleHome,()=>{e.layoutService.sidebar.getVisible()?(e.layoutService.sidebar.hide(),e.layoutService.activityBar.hide(),e.layoutService.pageBox.show()):(e.layoutService.sidebar.show(),e.layoutService.activityBar.show(),e.layoutService.pageBox.hide())}),e.commandService.registerCommand(Sr.ToChatPage,()=>{e.layoutService.pageBox.show(),e.layoutService.sidebar.hide(),e.layoutService.activityBar.hide(),e.layoutService.sidebar.setFullwidth(!1)})):(e.layoutService.pageBox.showTabBar(),e.layoutService.workbench.setLayout(Bm),e.layoutService.sidebar.show(),e.layoutService.sidebar.setFullwidth(!1),e.commandService.registerCommand(Sr.ToggleHome,()=>{e.layoutService.activityBar.toggle(),Uu.toggleLeft()}),e.commandService.registerCommand(Sr.ToChatPage,()=>{}))}});const Um=Lm({initilize(e){e.workbenchService.addReactEntry({id:`toast-provider`,reactNode:(0,H.jsx)(yf,{})})}}),Wm=Lm({initilize(e){e.workbenchService.addReactEntry({id:`tooltip-provider`,WrapperComponent:Ll})}});var Gm=Lm({initilize(e){e.pluginService.use([Um,Wm])}});const Km=Lm({initilize(e){e.pluginService.use([Gm,Hm])}});var qm=class{parse(e){if(!this.isValid(e))throw Error(`Invalid URI format for scheme: ${this.scheme}`);return this.parseUri(e)}isValid(e){return e.startsWith(`${this.scheme}:`)}getConfig(){return{}}getDefaultComponents(){return{scheme:this.scheme,authority:``,path:``,query:``,fragment:``}}parseUri(e){return{...this.getDefaultComponents()}}},Jm=class extends qm{scheme=`file`;getConfig(){return{requiresAuthority:!1,supportsQuery:!1,supportsFragment:!1}}parseUri(e){let t=e.slice(this.scheme.length+1);if(t.startsWith(`///`))return{scheme:this.scheme,authority:``,path:t.slice(2),query:``,fragment:``};if(t.startsWith(`//`)){let[e,...n]=t.slice(2).split(`/`);return{scheme:this.scheme,authority:e,path:`/`+n.join(`/`),query:``,fragment:``}}throw Error(`Invalid file URI format`)}},Ym=class extends qm{scheme=`http`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!0}}parseUri(e){let t=new URL(e);return{scheme:this.scheme,authority:t.username?`${t.username}${t.password?`:`+t.password:``}@${t.host}`:t.host,path:t.pathname||`/`,query:t.search.slice(1),fragment:t.hash.slice(1)}}},Xm=class extends Ym{scheme=`https`},Zm=class extends qm{scheme=`command`;getConfig(){return{requiresAuthority:!1,supportsQuery:!0,supportsFragment:!1}}parseUri(e){let[t,n]=e.slice(this.scheme.length+1).split(`?`);return{scheme:this.scheme,authority:``,path:t,query:n||``,fragment:``}}},Qm=class extends qm{scheme=`db`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!1}}parseUri(e){let t=new URL(e),n=t.username?`${t.username}${t.password?`:`+t.password:``}@${t.host}`:t.host;return{scheme:this.scheme,authority:n,path:t.pathname,query:t.search.slice(1),fragment:``}}},$m=class extends qm{scheme=`git`;getConfig(){return{requiresAuthority:!0,supportsQuery:!1,supportsFragment:!0}}parseUri(e){let[t,n]=e.slice(this.scheme.length+3).split(`#`),[r,...i]=t.split(`/`);return{scheme:this.scheme,authority:r,path:`/`+i.join(`/`),fragment:n||``,query:``}}},eh=class extends qm{scheme=`memfs`;getConfig(){return{requiresAuthority:!1,supportsQuery:!1,supportsFragment:!1}}parseUri(e){let t=e.slice(this.scheme.length+1);return{scheme:this.scheme,authority:``,path:t.startsWith(`///`)?t.slice(2):t,query:``,fragment:``}}},th=class extends qm{scheme=`space`;getConfig(){return{requiresAuthority:!0,supportsQuery:!0,supportsFragment:!0}}parseUri(e){if(e.startsWith(`space:///`))throw Error(`Space URI requires spaceId`);let t=new URL(e),[n,r=``]=decodeURIComponent(t.pathname).split(`#`);return{scheme:this.scheme,authority:t.host,path:n,query:t.search.slice(1),fragment:r||t.hash.slice(1)}}},nh=class e{static instance;parsers=new Map;constructor(){this.register(new Jm),this.register(new Ym),this.register(new Xm),this.register(new Zm),this.register(new Qm),this.register(new $m),this.register(new eh),this.register(new th)}static getInstance(){return e.instance||=new e,e.instance}register(e){this.parsers.set(e.scheme,e)}parse(e){let t=this.extractScheme(e),n=this.parsers.get(t);if(!n)throw Error(`No parser registered for scheme: ${t}`);return n.parse(e)}extractScheme(e){let t=e.match(/^([a-zA-Z][a-zA-Z0-9+.-]*?):/);if(!t)throw Error(`Invalid URI: ${e}`);return t[1]}},rh=class e{scheme;authority;path;query;fragment;constructor(e){this.scheme=e.scheme||``,this.authority=e.authority||``,this.path=e.path||``,this.query=e.query||``,this.fragment=e.fragment||``}get fsPath(){if(!this.scheme)throw Error(`Cannot derive fsPath for non-file scheme`);return this.path.replace(/\//g,`\\`)}with(t){return t?new e({scheme:t.scheme||this.scheme,authority:t.authority||this.authority,path:t.path||this.path,query:t.query||this.query,fragment:t.fragment||this.fragment}):this}toString(e){let t=`${this.scheme}:`;return this.authority&&(t+=`//${this.authority}`),t+=this.path,this.query&&!e?t+=`?${this._encodeQuery(this.query)}`:this.query&&(t+=`?${this.query}`),this.fragment&&!e?t+=`#${this._encodeFragment(this.fragment)}`:this.fragment&&(t+=`#${this.fragment}`),t}toJSON(){return{scheme:this.scheme,authority:this.authority,path:this.path,query:this.query,fragment:this.fragment}}_encodeQuery(e){return encodeURIComponent(e).replace(/%20/g,`+`)}_encodeFragment(e){return encodeURIComponent(e).replace(/%20/g,`+`)}static parse(t,n=!1){try{return new e(nh.getInstance().parse(t))}catch(t){if(n)throw t;return new e({})}}static file(e){return ih.file(e)}static joinPath(e,...t){return ih.joinPath(e,...t)}},ih={parse(e){let[t,n]=e.split(`:`,2),r=`http:${n}`,i=new URL(r),a=i.host,o=i.pathname,s=i.search.slice(1),c=i.hash.slice(1);return new rh({scheme:t,authority:a,path:o.replace(/^\/+/,``),query:s,fragment:c})},file(e){return new rh({scheme:`file`,path:e})},joinPath(e,...t){let n=e.path;for(let e of t)e.startsWith(`/`)?n=e:n.endsWith(`/`)||e.startsWith(`?`)||e.startsWith(`#`)?n+=e:n+=`/`+e;return e.with({path:n})}},ah=class{static generateHash(...e){let t=e.join(``),n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return(n>>>0).toString()}};const oh=(()=>{let e=e=>ah.generateHash(e),t=()=>q.registry.get(`spaceStore`),n=(t,n,r)=>e(`${t}:${n}:${r}`),r=(e,t,n)=>new rh({scheme:`space`,authority:e,path:t,fragment:n?.fragment||``,query:n?.query||``}),i=e=>rh.parse(e),a=e=>rh.parse(e).authority,o=e=>rh.parse(e).path;return{getStore:t,generateSpaceId:n,getUri:r,generateHash:e,parseUri:i,getSpaceIdFromUri:a,getInSpacePathFromUri:o,getFileName:e=>o(e).split(`/`).pop()}})();var sh=e=>typeof e==`string`,ch=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},lh=e=>e==null?``:``+e,uh=(e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})},dh=/###/g,fh=e=>e&&e.indexOf(`###`)>-1?e.replace(dh,`.`):e,ph=e=>!e||sh(e),mh=(e,t,n)=>{let r=sh(t)?t.split(`.`):t,i=0;for(;i<r.length-1;){if(ph(e))return{};let t=fh(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return ph(e)?{}:{obj:e,k:fh(r[i])}},hh=(e,t,n)=>{let{obj:r,k:i}=mh(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=mh(e,o,Object);for(;s.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=mh(e,o,Object),s?.obj&&s.obj[`${s.k}.${a}`]!==void 0&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=n},gh=(e,t,n,r)=>{let{obj:i,k:a}=mh(e,t,Object);i[a]=i[a]||[],i[a].push(n)},_h=(e,t)=>{let{obj:n,k:r}=mh(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},vh=(e,t,n)=>{let r=_h(e,n);return r===void 0?_h(t,n):r},yh=(e,t,n)=>{for(let r in t)r!==`__proto__`&&r!==`constructor`&&(r in e?sh(e[r])||e[r]instanceof String||sh(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):yh(e[r],t[r],n):e[r]=t[r]);return e},bh=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,`\\$&`),xh={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`,"/":`&#x2F;`},Sh=e=>sh(e)?e.replace(/[&<>"'\/]/g,e=>xh[e]):e,Ch=class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let t=this.regExpMap.get(e);if(t!==void 0)return t;let n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}},wh=[` `,`,`,`?`,`!`,`;`],Th=new Ch(20),Eh=(e,t,n)=>{t||=``,n||=``;let r=wh.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(r.length===0)return!0;let i=Th.getRegExp(`(${r.map(e=>e===`?`?`\\?`:e).join(`|`)})`),a=!i.test(e);if(!a){let t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(a=!0)}return a},Dh=(e,t,n=`.`)=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;let r=t.split(n),i=e;for(let e=0;e<r.length;){if(!i||typeof i!=`object`)return;let t,a=``;for(let o=e;o<r.length;++o)if(o!==e&&(a+=n),a+=r[o],t=i[a],t!==void 0){if([`string`,`number`,`boolean`].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}i=t}return i},Oh=e=>e?.replace(`_`,`-`),kh={type:`logger`,log(e){this.output(`log`,e)},warn(e){this.output(`warn`,e)},error(e){this.output(`error`,e)},output(e,t){console?.[e]?.apply?.(console,t)}},Ah=new class e{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||`i18next:`,this.logger=e||kh,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,`log`,``,!0)}warn(...e){return this.forward(e,`warn`,``,!0)}error(...e){return this.forward(e,`error`,``)}deprecate(...e){return this.forward(e,`warn`,`WARNING DEPRECATED: `,!0)}forward(e,t,n,r){return r&&!this.debug?null:(sh(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t||=this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}},jh=class{constructor(){this.observers={}}on(e,t){return e.split(` `).forEach(e=>{this.observers[e]||(this.observers[e]=new Map);let n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers[`*`]&&Array.from(this.observers[`*`].entries()).forEach(([n,r])=>{for(let i=0;i<r;i++)n.apply(n,[e,...t])})}},Mh=class extends jh{constructor(e,t={ns:[`translation`],defaultNS:`translation`}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator=`.`),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){let i=r.keySeparator===void 0?this.options.keySeparator:r.keySeparator,a=r.ignoreJSONStructure===void 0?this.options.ignoreJSONStructure:r.ignoreJSONStructure,o;e.indexOf(`.`)>-1?o=e.split(`.`):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):sh(n)&&i?o.push(...n.split(i)):o.push(n)));let s=_h(this.data,o);return!s&&!t&&!n&&e.indexOf(`.`)>-1&&(e=o[0],t=o[1],n=o.slice(2).join(`.`)),s||!a||!sh(n)?s:Dh(this.data?.[e]?.[t],n,i)}addResource(e,t,n,r,i={silent:!1}){let a=i.keySeparator===void 0?this.options.keySeparator:i.keySeparator,o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(`.`)>-1&&(o=e.split(`.`),r=t,t=o[1]),this.addNamespaces(t),hh(this.data,o,r),i.silent||this.emit(`added`,e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(let r in n)(sh(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit(`added`,e,t,n)}addResourceBundle(e,t,n,r,i,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(`.`)>-1&&(o=e.split(`.`),r=n,n=t,t=o[1]),this.addNamespaces(t);let s=_h(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?yh(s,n,i):s={...s,...n},hh(this.data,o,s),a.silent||this.emit(`added`,e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit(`removed`,e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||=this.options.defaultNS,this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}},Nh={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{t=this.processors[e]?.process(t,n,r,i)??t}),t}},Ph=Symbol(`i18next/PATH_KEY`);function Fh(){let e=[],t=Object.create(null),n;return t.get=(r,i)=>(n?.revoke?.(),i===Ph?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Ih(e,t){let{[Ph]:n}=e(Fh());return n.join(t?.keySeparator??`.`)}var Lh={},Rh=e=>!sh(e)&&typeof e!=`boolean`&&typeof e!=`number`,zh=class e extends jh{constructor(e,t={}){super(),uh([`resourceStore`,`languageUtils`,`pluralResolver`,`interpolator`,`backendConnector`,`i18nFormat`,`utils`],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator=`.`),this.logger=Ah.create(`translator`)}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){let n={...t};if(e==null)return!1;let r=this.resolve(e,n);if(r?.res===void 0)return!1;let i=Rh(r.res);return!(n.returnObjects===!1&&i)}extractFromKey(e,t){let n=t.nsSeparator===void 0?this.options.nsSeparator:t.nsSeparator;n===void 0&&(n=`:`);let r=t.keySeparator===void 0?this.options.keySeparator:t.keySeparator,i=t.ns||this.options.defaultNS||[],a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Eh(e,n,r);if(a&&!o){let t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:sh(i)?[i]:i};let a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return{key:e,namespaces:sh(i)?[i]:i}}translate(t,n,r){let i=typeof n==`object`?{...n}:n;if(typeof i!=`object`&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i==`object`&&(i={...i}),i||={},t==null)return``;typeof t==`function`&&(t=Ih(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);let a=i.returnDetails===void 0?this.options.returnDetails:i.returnDetails,o=i.keySeparator===void 0?this.options.keySeparator:i.keySeparator,{key:s,namespaces:c}=this.extractFromKey(t[t.length-1],i),l=c[c.length-1],u=i.nsSeparator===void 0?this.options.nsSeparator:i.nsSeparator;u===void 0&&(u=`:`);let d=i.lng||this.language,f=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()===`cimode`)return f?a?{res:`${l}${u}${s}`,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${u}${s}`:a?{res:s,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:s;let p=this.resolve(t,i),m=p?.res,h=p?.usedKey||s,g=p?.exactUsedKey||s,_=[`[object Number]`,`[object Function]`,`[object RegExp]`],v=i.joinArrays===void 0?this.options.joinArrays:i.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,b=i.count!==void 0&&!sh(i.count),x=e.hasDefaultValue(i),S=b?this.pluralResolver.getSuffix(d,i.count,i):``,C=i.ordinal&&b?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):``,w=b&&!i.ordinal&&i.count===0,T=w&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${S}`]||i[`defaultValue${C}`]||i.defaultValue,E=m;y&&!m&&x&&(E=T);let D=Rh(E),O=Object.prototype.toString.apply(E);if(y&&E&&D&&_.indexOf(O)<0&&!(sh(v)&&Array.isArray(E))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn(`accessing an object - but returnObjects options is not enabled!`);let e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,E,{...i,ns:c}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(p.res=e,p.usedParams=this.getUsedParamsDetails(i),p):e}if(o){let e=Array.isArray(E),t=e?[]:{},n=e?g:h;for(let e in E)if(Object.prototype.hasOwnProperty.call(E,e)){let r=`${n}${o}${e}`;x&&!m?t[e]=this.translate(r,{...i,defaultValue:Rh(T)?T[e]:void 0,joinArrays:!1,ns:c}):t[e]=this.translate(r,{...i,joinArrays:!1,ns:c}),t[e]===r&&(t[e]=E[e])}m=t}}else if(y&&sh(v)&&Array.isArray(m))m=m.join(v),m&&=this.extendTranslation(m,t,i,r);else{let e=!1,n=!1;!this.isValidLookup(m)&&x&&(e=!0,m=T),this.isValidLookup(m)||(n=!0,m=s);let a=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:m,c=x&&T!==m&&this.options.updateMissing;if(n||e||c){if(this.logger.log(c?`updateKey`:`missingKey`,d,l,s,c?T:m),o){let e=this.resolve(s,{...i,keySeparator:!1});e&&e.res&&this.logger.warn(`Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.`)}let e=[],t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo===`fallback`&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else this.options.saveMissingTo===`all`?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);let n=(e,t,n)=>{let r=x&&n!==m?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,r,c,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,r,c,i),this.emit(`missingKey`,e,l,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach(e=>{let t=this.pluralResolver.getSuffixes(e,i);w&&i[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],s+t,i[`defaultValue${t}`]||T)})}):n(e,s,T))}m=this.extendTranslation(m,t,i,p,r),n&&m===s&&this.options.appendNamespaceToMissingKey&&(m=`${l}${u}${s}`),(n||e)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${u}${s}`:s,e?m:void 0,i))}return a?(p.res=m,p.usedParams=this.getUsedParamsDetails(i),p):m}extendTranslation(e,t,n,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let a=sh(e)&&(n?.interpolation?.skipOnVariables===void 0?this.options.interpolation.skipOnVariables:n.interpolation.skipOnVariables),o;if(a){let t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let s=n.replace&&!sh(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),e=this.interpolator.interpolate(e,s,n.lng||this.language||r.usedLng,n),a){let t=e.match(this.interpolator.nestingRegexp),r=t&&t.length;o<r&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...e)=>i?.[0]===e[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null):this.translate(...e,t),n)),n.interpolation&&this.interpolator.reset()}let a=n.postProcess||this.options.postProcess,o=sh(a)?[a]:a;return e!=null&&o?.length&&n.applyPostProcessor!==!1&&(e=Nh.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,r,i,a,o;return sh(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;let s=this.extractFromKey(e,t),c=s.key;r=c;let l=s.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));let u=t.count!==void 0&&!sh(t.count),d=u&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(sh(t.context)||typeof t.context==`number`)&&t.context!==``,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);l.forEach(e=>{this.isValidLookup(n)||(o=e,!Lh[`${p[0]}-${e}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(Lh[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(`, `)}" won't get resolved as namespace "${o}" was not yet loaded`,`This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!`)),p.forEach(r=>{if(this.isValidLookup(n))return;a=r;let o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));let n=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&e.indexOf(i)===0&&o.push(c+e.replace(i,this.options.pluralSeparator)),o.push(c+e),d&&o.push(c+n)),f){let r=`${c}${this.options.contextSeparator||`_`}${t.context}`;o.push(r),u&&(t.ordinal&&e.indexOf(i)===0&&o.push(r+e.replace(i,this.options.pluralSeparator)),o.push(r+e),d&&o.push(r+n))}}let s;for(;s=o.pop();)this.isValidLookup(n)||(i=s,n=this.getResource(r,e,s,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e===``)}getResource(e,t,n,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){let t=[`defaultValue`,`ordinal`,`context`,`replace`,`lng`,`lngs`,`fallbackLng`,`ns`,`keySeparator`,`nsSeparator`,`returnObjects`,`returnDetails`,`joinArrays`,`postProcess`,`interpolation`],n=e.replace&&!sh(e.replace),r=n?e.replace:e;if(n&&e.count!==void 0&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(let e of t)delete r[e]}return r}static hasDefaultValue(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&t.substring(0,12)===`defaultValue`&&e[t]!==void 0)return!0;return!1}},Bh=class{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ah.create(`languageUtils`)}getScriptPartFromCode(e){if(e=Oh(e),!e||e.indexOf(`-`)<0)return null;let t=e.split(`-`);return t.length===2||(t.pop(),t[t.length-1].toLowerCase()===`x`)?null:this.formatLanguageCode(t.join(`-`))}getLanguagePartFromCode(e){if(e=Oh(e),!e||e.indexOf(`-`)<0)return e;let t=e.split(`-`);return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(sh(e)&&e.indexOf(`-`)>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load===`languageOnly`||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;let n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;let n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;let r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>{if(e===r||!(e.indexOf(`-`)<0&&r.indexOf(`-`)<0)&&(e.indexOf(`-`)>0&&r.indexOf(`-`)<0&&e.substring(0,e.indexOf(`-`))===r||e.indexOf(r)===0&&r.length>1))return e})}),t||=this.getFallbackCodes(this.options.fallbackLng)[0],t}getFallbackCodes(e,t){if(!e)return[];if(typeof e==`function`&&(e=e(t)),sh(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||=e[this.getScriptPartFromCode(t)],n||=e[this.formatLanguageCode(t)],n||=e[this.getLanguagePartFromCode(t)],n||=e.default,n||[]}toResolveHierarchy(e,t){let n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return sh(e)&&(e.indexOf(`-`)>-1||e.indexOf(`_`)>-1)?(this.options.load!==`languageOnly`&&i(this.formatLanguageCode(e)),this.options.load!==`languageOnly`&&this.options.load!==`currentOnly`&&i(this.getScriptPartFromCode(e)),this.options.load!==`currentOnly`&&i(this.getLanguagePartFromCode(e))):sh(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}},Vh={zero:0,one:1,two:2,few:3,many:4,other:5},Hh={select:e=>e===1?`one`:`other`,resolvedOptions:()=>({pluralCategories:[`one`,`other`]})},Uh=class{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ah.create(`pluralResolver`),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){let n=Oh(e===`dev`?`en`:e),r=t.ordinal?`ordinal`:`cardinal`,i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!Intl)return this.logger.error(`No Intl support, please use an Intl polyfill!`),Hh;if(!e.match(/-|_/))return Hh;let n=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(n,t)}return this.pluralRulesCache[i]=a,a}needsPlural(e,t={}){let n=this.getRule(e,t);return n||=this.getRule(`dev`,t),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||=this.getRule(`dev`,t),n?n.resolvedOptions().pluralCategories.sort((e,t)=>Vh[e]-Vh[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:``}${e}`):[]}getSuffix(e,t,n={}){let r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:``}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix(`dev`,t,n))}},Wh=(e,t,n,r=`.`,i=!0)=>{let a=vh(e,t,n);return!a&&i&&sh(n)&&(a=Dh(e,n,r),a===void 0&&(a=Dh(t,n,r))),a},Gh=e=>e.replace(/\$/g,`$$$$`),Kh=class{constructor(e={}){this.logger=Ah.create(`interpolator`),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||={escapeValue:!0};let{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:s,formatSeparator:c,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:h,maxReplaces:g,alwaysFormat:_}=e.interpolation;this.escape=t===void 0?Sh:t,this.escapeValue=n===void 0?!0:n,this.useRawValueToEscape=r===void 0?!1:r,this.prefix=i?bh(i):a||`{{`,this.suffix=o?bh(o):s||`}}`,this.formatSeparator=c||`,`,this.unescapePrefix=l?``:u||`-`,this.unescapeSuffix=this.unescapePrefix?``:l||``,this.nestingPrefix=d?bh(d):f||bh(`$t(`),this.nestingSuffix=p?bh(p):m||bh(`)`),this.nestingOptionsSeparator=h||`,`,this.maxReplaces=g||1e3,this.alwaysFormat=_===void 0?!1:_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,`g`);this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,a,o,s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){let i=Wh(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}let i=e.split(this.formatSeparator),a=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(Wh(t,s,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...t,interpolationkey:a})};this.resetRegExp();let l=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=r?.interpolation?.skipOnVariables===void 0?this.options.interpolation.skipOnVariables:r.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Gh(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Gh(this.escape(e)):Gh(e)}].forEach(t=>{for(o=0;i=t.regex.exec(e);){let n=i[1].trim();if(a=c(n),a===void 0)if(typeof l==`function`){let t=l(e,i,r);a=sh(t)?t:``}else if(r&&Object.prototype.hasOwnProperty.call(r,n))a=``;else if(u){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=``;else !sh(a)&&!this.useRawValueToEscape&&(a=lh(a));let s=t.safeValue(a);if(e=e.replace(i[0],s),u?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,i,a,o=(e,t)=>{let n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;let r=e.split(RegExp(`${n}[ ]*{`)),i=`{${r[1]}`;e=r[0],i=this.interpolate(i,a);let o=i.match(/'/g),s=i.match(/"/g);((o?.length??0)%2==0&&!s||s.length%2!=0)&&(i=i.replace(/'/g,`"`));try{a=JSON.parse(i),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${i}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let s=[];a={...n},a=a.replace&&!sh(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=/{.*}/.test(r[1])?r[1].lastIndexOf(`}`)+1:r[1].indexOf(this.formatSeparator);if(c!==-1&&(s=r[1].slice(c).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,c)),i=t(o.call(this,r[1].trim(),a),a),i&&r[0]===e&&!sh(i))return i;sh(i)||(i=lh(i)),i||=(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),``),s.length&&(i=s.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}},qh=e=>{let t=e.toLowerCase().trim(),n={};if(e.indexOf(`(`)>-1){let r=e.split(`(`);t=r[0].toLowerCase().trim();let i=r[1].substring(0,r[1].length-1);t===`currency`&&i.indexOf(`:`)<0?n.currency||=i.trim():t===`relativetime`&&i.indexOf(`:`)<0?n.range||=i.trim():i.split(`;`).forEach(e=>{if(e){let[t,...r]=e.split(`:`),i=r.join(`:`).trim().replace(/^'+|'+$/g,``),a=t.trim();n[a]||(n[a]=i),i===`false`&&(n[a]=!1),i===`true`&&(n[a]=!0),isNaN(i)||(n[a]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}},Jh=e=>{let t={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});let o=r+JSON.stringify(a),s=t[o];return s||(s=e(Oh(r),i),t[o]=s),s(n)}},Yh=e=>(t,n,r)=>e(Oh(n),r)(t),Xh=class{constructor(e={}){this.logger=Ah.create(`formatter`),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||`,`;let n=t.cacheInBuiltFormats?Jh:Yh;this.formats={number:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t,style:`currency`});return e=>n.format(e)}),datetime:n((e,t)=>{let n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{let n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||`day`)}),list:n((e,t)=>{let n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Jh(t)}format(e,t,n,r={}){let i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf(`(`)>1&&i[0].indexOf(`)`)<0&&i.find(e=>e.indexOf(`)`)>-1)){let e=i.findIndex(e=>e.indexOf(`)`)>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{let{formatName:i,formatOptions:a}=qh(t);if(this.formats[i]){let t=e;try{let o=r?.formatParams?.[r.interpolationkey]||{},s=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,s,{...a,...r,...o})}catch(e){this.logger.warn(e)}return t}else this.logger.warn(`there was no format function for ${i}`);return e},e)}},Zh=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)},Qh=class extends jh{constructor(e,t,n,r={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Ah.create(`backendConnector`),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(e,t,n,r){let i={},a={},o={},s={};return e.forEach(e=>{let r=!0;t.forEach(t=>{let o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(this.state[o]===1?a[o]===void 0&&(a[o]=!0):(this.state[o]=1,r=!1,a[o]===void 0&&(a[o]=!0),i[o]===void 0&&(i[o]=!0),s[t]===void 0&&(s[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){let r=e.split(`|`),i=r[0],a=r[1];t&&this.emit(`failedLoading`,i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);let o={};this.queue.forEach(n=>{gh(n.loaded,[i],a),Zh(n,e),t&&n.errors.push(t),n.pendingCount===0&&!n.done&&(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});let t=n.loaded[e];t.length&&t.forEach(t=>{o[e][t]===void 0&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit(`loaded`,o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:a});return}this.readingCalls++;let o=(o,s)=>{if(this.readingCalls--,this.waitingReads.length>0){let e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}if(o&&s&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,r+1,i*2,a)},i);return}a(o,s)},s=this.backend[n].bind(this.backend);if(s.length===2){try{let n=s(e,t);n&&typeof n.then==`function`?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}return}return s(e,t,o)}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn(`No backend was added via i18next.use. Will not load resources.`),r&&r();sh(e)&&(e=this.languageUtils.toResolveHierarchy(e)),sh(t)&&(t=[t]);let i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=``){let n=e.split(`|`),r=n[0],i=n[1];this.read(r,i,`read`,void 0,void 0,(n,a)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,a),this.loaded(e,n,a)})}saveMissing(e,t,n,r,i,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,`This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!`);return}if(!(n==null||n===``)){if(this.backend?.create){let s={...a,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=c.length===5?c(e,t,n,r,s):c(e,t,n,r),i&&typeof i.then==`function`?i.then(e=>o(null,e)).catch(o):o(null,i)}catch(e){o(e)}else c(e,t,n,r,o,s)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}},$h=()=>({debug:!1,initAsync:!0,ns:[`translation`],defaultNS:[`translation`],fallbackLng:[`dev`],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:`all`,preload:!1,simplifyPluralSuffix:!0,keySeparator:`.`,nsSeparator:`:`,pluralSeparator:`_`,contextSeparator:`_`,partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:`fallback`,saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]==`object`&&(t=e[1]),sh(e[1])&&(t.defaultValue=e[1]),sh(e[2])&&(t.tDescription=e[2]),typeof e[2]==`object`||typeof e[3]==`object`){let n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:`{{`,suffix:`}}`,formatSeparator:`,`,unescapePrefix:`-`,nestingPrefix:`$t(`,nestingSuffix:`)`,nestingOptionsSeparator:`,`,maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),eg=e=>(sh(e.ns)&&(e.ns=[e.ns]),sh(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),sh(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.(`cimode`)<0&&(e.supportedLngs=e.supportedLngs.concat([`cimode`])),typeof e.initImmediate==`boolean`&&(e.initAsync=e.initImmediate),e),tg=()=>{},ng=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{typeof e[t]==`function`&&(e[t]=e[t].bind(e))})},rg=class e extends jh{constructor(e={},t){if(super(),this.options=eg(e),this.services={},this.logger=Ah,this.modules={external:[]},ng(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e==`function`&&(t=e,e={}),e.defaultNS==null&&e.ns&&(sh(e.ns)?e.defaultNS=e.ns:e.ns.indexOf(`translation`)<0&&(e.defaultNS=e.ns[0]));let n=$h();this.options={...n,...this.options,...eg(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);let r=e=>e?typeof e==`function`?new e:e:null;if(!this.options.isClone){this.modules.logger?Ah.init(r(this.modules.logger),this.options):Ah.init(null,this.options);let e;e=this.modules.formatter?this.modules.formatter:Xh;let t=new Bh(this.options);this.store=new Mh(this.options.resources,this.options);let i=this.services;i.logger=Ah,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new Uh(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate(`init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting`),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Kh(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Qh(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on(`*`,(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new zh(this.services,this.options),this.translator.on(`*`,(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||=tg,this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&e[0]!==`dev`&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn(`init: no languageDetector is used and no lng is defined`),[`getResource`,`hasResourceBundle`,`getResourceBundle`,`getDataByLanguage`].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),[`addResource`,`addResources`,`addResourceBundle`,`removeResourceBundle`].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});let i=ch(),a=()=>{let e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn(`init: i18next is already initialized. You should call init just once!`),this.isInitialized=!0,this.options.isClone||this.logger.log(`initialized`,this.options),this.emit(`initialized`,this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),i}loadResources(e,t=tg){let n=t,r=sh(e)?e:this.language;if(typeof e==`function`&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()===`cimode`&&(!this.options.preload||this.options.preload.length===0))return n();let e=[],t=t=>{t&&t!==`cimode`&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{t!==`cimode`&&e.indexOf(t)<0&&e.push(t)})};r?t(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,n){let r=ch();return typeof e==`function`&&(n=e,e=void 0),typeof t==`function`&&(n=t,t=void 0),e||=this.languages,t||=this.options.ns,n||=tg,this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw Error(`You are passing an undefined module! Please check the object you are passing to i18next.use()`);if(!e.type)throw Error(`You are passing a wrong module! Please check the object you are passing to i18next.use()`);return e.type===`backend`&&(this.modules.backend=e),(e.type===`logger`||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type===`languageDetector`&&(this.modules.languageDetector=e),e.type===`i18nFormat`&&(this.modules.i18nFormat=e),e.type===`postProcessor`&&Nh.addPostProcessor(e),e.type===`formatter`&&(this.modules.formatter=e),e.type===`3rdParty`&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!([`cimode`,`dev`].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){let t=this.languages[e];if(!([`cimode`,`dev`].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;let n=ch();this.emit(`languageChanging`,e);let r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,a)=>{a?this.isLanguageChangingTo===e&&(r(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit(`languageChanged`,a),this.logger.log(`languageChanged`,a)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},a=t=>{!e&&!t&&this.services.languageDetector&&(t=[]);let n=sh(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(sh(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,e=>{i(e,a)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),n}getFixedT(e,t,n){let r=(e,t,...i)=>{let a;a=typeof t==`object`?{...t}:this.options.overloadTranslationOptionHandler([e,t].concat(i)),a.lng=a.lng||r.lng,a.lngs=a.lngs||r.lngs,a.ns=a.ns||r.ns,a.keyPrefix!==``&&(a.keyPrefix=a.keyPrefix||n||r.keyPrefix);let o=this.options.keySeparator||`.`,s;return a.keyPrefix&&Array.isArray(e)?s=e.map(e=>(typeof e==`function`&&(e=Ih(e,{...this.options,...t})),`${a.keyPrefix}${o}${e}`)):(typeof e==`function`&&(e=Ih(e,{...this.options,...t})),s=a.keyPrefix?`${a.keyPrefix}${o}${e}`:e),this.t(s,a)};return sh(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn(`hasLoadedNamespace: i18next was not initialized`,this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn(`hasLoadedNamespace: i18n.languages were undefined or empty`,this.languages),!1;let n=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()===`cimode`)return!0;let a=(e,t)=>{let n=this.services.backendConnector.state[`${e}|${t}`];return n===-1||n===0||n===2};if(t.precheck){let e=t.precheck(this,a);if(e!==void 0)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!r||a(i,e)))}loadNamespaces(e,t){let n=ch();return this.options.ns?(sh(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){let n=ch();sh(e)&&(e=[e]);let r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language),!e)return`rtl`;try{let t=new Intl.Locale(e);if(t&&t.getTextInfo){let e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch{}let t=`ar.shu.sqr.ssh.xaa.yhd.yud.aao.abh.abv.acm.acq.acw.acx.acy.adf.ads.aeb.aec.afb.ajp.apc.apd.arb.arq.ars.ary.arz.auz.avl.ayh.ayl.ayn.ayp.bbz.pga.he.iw.ps.pbt.pbu.pst.prp.prd.ug.ur.ydd.yds.yih.ji.yi.hbo.men.xmn.fa.jpr.peo.pes.prs.dv.sam.ckb`.split(`.`),n=this.services?.languageUtils||new Bh($h());return e.toLowerCase().indexOf(`-latn`)>1?`ltr`:t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf(`-arab`)>1?`rtl`:`ltr`}static createInstance(t={},n){let r=new e(t,n);return r.createInstance=e.createInstance,r}cloneInstance(t={},n=tg){let r=t.forkResourceStore;r&&delete t.forkResourceStore;let i={...this.options,...t,isClone:!0},a=new e(i);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),[`store`,`services`,`language`].forEach(e=>{a[e]=this[e]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r&&(a.store=new Mh(Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]={...e[t][r]},n),e[t]),e),{}),i),a.services.resourceStore=a.store),a.translator=new zh(a.services,i),a.translator.on(`*`,(e,...t)=>{a.emit(e,...t)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}.createInstance();rg.createInstance,rg.dir,rg.init,rg.loadResources,rg.reloadResources,rg.use,rg.changeLanguage,rg.getFixedT,rg.t,rg.exists,rg.setDefaultNamespace,rg.hasLoadedNamespace,rg.loadNamespaces,rg.loadLanguages;const ig=(e,t,n,r)=>{let i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,`warn`,`react-i18next::`,!0);dg(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)};var ag={};const og=(e,t,n,r)=>{dg(n)&&ag[n]||(dg(n)&&(ag[n]=new Date),ig(e,t,n,r))};var sg=(e,t)=>()=>{if(e.isInitialized)t();else{let n=()=>{setTimeout(()=>{e.off(`initialized`,n)},0),t()};e.on(`initialized`,n)}};const cg=(e,t,n)=>{e.loadNamespaces(t,sg(e,n))},lg=(e,t,n,r)=>{if(dg(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return cg(e,n,r);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,sg(e,r))},ug=(e,t,n={})=>!t.languages||!t.languages.length?(og(t,`NO_LANGUAGES`,`i18n.languages were undefined or empty`,{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf(`languageChanging`)>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}),dg=e=>typeof e==`string`,fg=e=>typeof e==`object`&&!!e;var pg=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,mg={"&amp;":`&`,"&#38;":`&`,"&lt;":`<`,"&#60;":`<`,"&gt;":`>`,"&#62;":`>`,"&apos;":`'`,"&#39;":`'`,"&quot;":`"`,"&#34;":`"`,"&nbsp;":` `,"&#160;":` `,"&copy;":`©`,"&#169;":`©`,"&reg;":`®`,"&#174;":`®`,"&hellip;":`…`,"&#8230;":`…`,"&#x2F;":`/`,"&#47;":`/`},hg=e=>mg[e],gg={bindI18n:`languageChanged`,bindI18nStore:``,transEmptyNodeValue:``,transSupportBasicHtmlNodes:!0,transWrapTextNodes:``,transKeepBasicHtmlNodesFor:[`br`,`strong`,`i`,`p`],useSuspense:!0,unescape:e=>e.replace(pg,hg)};const _g=(e={})=>{gg={...gg,...e}},vg=()=>gg;var yg;const bg=e=>{yg=e},xg=()=>yg,Sg={type:`3rdParty`,init(e){_g(e.options.react),bg(e)}},Cg=(0,V.createContext)();var wg=class{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}},Tg=se(),Eg={t:(e,t)=>dg(t)?t:fg(t)&&dg(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,ready:!1},Dg=()=>()=>{};const Og=(e,t={})=>{let{i18n:n}=t,{i18n:r,defaultNS:i}=(0,V.useContext)(Cg)||{},a=n||r||xg();a&&!a.reportNamespaces&&(a.reportNamespaces=new wg),a||og(a,`NO_I18NEXT_INSTANCE`,`useTranslation: You will need to pass in an i18next instance by using initReactI18next`);let o=(0,V.useMemo)(()=>({...vg(),...a?.options?.react,...t}),[a,t]),{useSuspense:s,keyPrefix:c}=o,l=(0,V.useMemo)(()=>{let t=e||i||a?.options?.defaultNS;return dg(t)?[t]:t||[`translation`]},[e,i,a]);a?.reportNamespaces?.addUsedNamespaces?.(l);let u=(0,V.useRef)(0),d=(0,V.useCallback)(e=>{if(!a)return Dg;let{bindI18n:t,bindI18nStore:n}=o,r=()=>{u.current+=1,e()};return t&&a.on(t,r),n&&a.store.on(n,r),()=>{t&&t.split(` `).forEach(e=>a.off(e,r)),n&&n.split(` `).forEach(e=>a.store.off(e,r))}},[a,o]),f=(0,V.useRef)(),p=(0,V.useCallback)(()=>{if(!a)return Eg;let e=!!(a.isInitialized||a.initializedStoreOnce)&&l.every(e=>ug(e,a,o)),n=t.lng||a.language,r=u.current,i=f.current;if(i&&i.ready===e&&i.lng===n&&i.keyPrefix===c&&i.revision===r)return i;let s={t:a.getFixedT(n,o.nsMode===`fallback`?l:l[0],c),ready:e,lng:n,keyPrefix:c,revision:r};return f.current=s,s},[a,l,c,o,t.lng]),[m,h]=(0,V.useState)(0),{t:g,ready:_}=(0,Tg.useSyncExternalStore)(d,p,p);(0,V.useEffect)(()=>{if(a&&!_&&!s){let e=()=>h(e=>e+1);t.lng?lg(a,t.lng,l,e):cg(a,l,e)}},[a,t.lng,l,_,s,m]);let v=a||{},y=(0,V.useRef)(null),b=(0,V.useRef)(),x=e=>{let t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;let n=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(n,`__original`))try{Object.defineProperty(n,`__original`,{value:e,writable:!1,enumerable:!1,configurable:!1})}catch{}return n},S=(0,V.useMemo)(()=>{let e=v,t=e?.language,n=e;e&&(y.current&&y.current.__original===e&&b.current===t?n=y.current:(n=x(e),y.current=n,b.current=t));let r=[g,n,_];return r.t=g,r.i18n=n,r.ready=_,r},[g,v,_,v.resolvedLanguage,v.language,v.languages]);if(a&&s&&!_)throw new Promise(e=>{let n=()=>e();t.lng?lg(a,t.lng,l,n):cg(a,l,n)});return S};var kg=({spaceId:e})=>{let{t}=Og(),[n,r]=(0,V.useState)(`Gitee`);return(0,V.useEffect)(()=>{let t=mv.getSpace(e);t&&r(t.platform)},[e]),(0,H.jsx)(l,{p:`1rem`,children:(0,H.jsx)(A,{onClick:()=>{mv.redirectAuthPage(e)},children:t(`space.loginTo`,{platform:n})})})};function Ag(){let e={};function t(t,n){return e[t]||(e[t]=[]),e[t].push(n),function(){if(!e[t])return;let r=e[t].indexOf(n);r>-1&&e[t].splice(r,1)}}function n(t,...n){e[t]&&e[t].forEach(e=>{e(...n)})}return{on:t,emit:n,connector:(e,t,r=!1)=>i=>{r&&(i.stopPropagation(),i.preventDefault()),n(e,typeof t==`function`?t(i):t)}}}const jg=e=>{let t=rc(e),{namespaces:n}=t;return Object.assign(t,{getItem:e=>n[e].get(),setItem:(e,t)=>{n[e].set(t)},getItem$:e=>n[e].$})},Mg=e=>{let{namespaces:t}=rc(e);return{get:e=>t[xr(e)].get(),set:(e,n)=>{t[xr(e)].set(n)},get$:e=>t[xr(e)].$}},Ng=e=>{let{id:t}=e||{};t||=Rt();let n=Ag(),r=jg({}),i=km();return{id:t,emit:n.emit,on:n.on,expose:i.expose,invoke:i.invoke,get:r.get,set:r.set}};function Pg(e,t){let n;try{n=e()}catch{return}return{getItem:e=>{let r=e=>e===null?null:JSON.parse(e,t?.reviver),i=n.getItem(e)??null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,t?.replacer)),removeItem:e=>n.removeItem(e)}}var Fg=e=>t=>{try{let n=e(t);return n instanceof Promise?n:{then(e){return Fg(e)(n)},catch(e){return this}}}catch(e){return{then(e){return this},catch(t){return Fg(t)(e)}}}},Ig=(e,t)=>(n,r,i)=>{let a={storage:Pg(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,s=new Set,c=new Set,l=a.storage;if(!l)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},r,i);let u=()=>{let e=a.partialize({...r()});return l.setItem(a.name,{state:e,version:a.version})},d=i.setState;i.setState=(e,t)=>(d(e,t),u());let f=e((...e)=>(n(...e),u()),r,i);i.getInitialState=()=>f;let p,m=()=>{if(!l)return;o=!1,s.forEach(e=>e(r()??f));let e=a.onRehydrateStorage?.call(a,r()??f)||void 0;return Fg(l.getItem.bind(l))(a.name).then(e=>{if(e)if(typeof e.version==`number`&&e.version!==a.version){if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error(`State loaded from storage couldn't be migrated since no migrate function was provided`)}else return[!1,e.state];return[!1,void 0]}).then(e=>{let[t,i]=e;if(p=a.merge(i,r()??f),n(p,!0),t)return u()}).then(()=>{e?.(p,void 0),p=r(),o=!0,c.forEach(e=>e(p))}).catch(t=>{e?.(void 0,t)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(l=e.storage)},clearStorage:()=>{l?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},a.skipHydration||m(),p||f};const Lg=({name:e=`dataLayer`,initialState:t,primaryKey:n=`id`,persistConfig:r})=>{let i=new mt(1),a=Ng(),o=(e,i)=>({data:t,rehydrated:!r,init:n=>{e({data:n||t})},upsert:t=>{e(e=>{let r=e.data.slice(),i=t[n],a=r.findIndex(e=>e[n]===i);return a>=0?r[a]={...r[a],...t}:r.push(t),{data:r}})},reduce:t=>{e(e=>({data:t(e.data)}))},update:t=>{e(e=>{let r=e.data.slice(),i=t[n],a=r.findIndex(e=>e[n]===i);return a>=0&&(r[a]={...r[a],...t}),{data:r}})},clear:()=>{e({data:[]})},add:t=>{e(e=>({data:[...e.data,t]}))},delete:t=>{e(e=>({data:e.data.filter(e=>e[n]!==t)}))}}),s;if(r&&r.type===`LocalStorage`){let e,t=Ig((t,n,r)=>(e=r,o(t,n)),{name:r.name,storage:Pg(()=>window.localStorage),onRehydrateStorage:()=>()=>{e&&e.setState({rehydrated:!0},!1),a.emit(`load`),i.next(!0)}});s=Yt()(t)}else s=Yt()(o),a.emit(`load`),i.next(!0);function c(e,t){let[n,r]=(0,V.useState)(t(e.getState()));return(0,V.useEffect)(()=>{let i=e.subscribe(()=>{let i=t(e.getState());i!==n&&r(i)});return()=>i()},[e,t,n]),n}let l=()=>c(s,e=>e.data),u=e=>c(s,t=>t.data.find(t=>t[n]===e)),d=e=>c(s,t=>e(t.data)),f=[],p=e=>{for(let t of f)t(e)},m=e=>(f.push(e),()=>h(e)),h=e=>{f=f.filter(t=>t!==e)},g=()=>({init:t=>{s.getState().init(t),p({type:`${e}/init`,payload:t})},upsert:t=>{s.getState().upsert(t),p({type:`${e}/upsert`,payload:t})},reduce:t=>{s.getState().reduce(t),p({type:`${e}/reduce`,payload:t})},update:t=>{s.getState().update(t),p({type:`${e}/update`,payload:t})},clear:()=>{s.getState().clear(),p({type:`${e}/clear`})},add:t=>{s.getState().add(t),p({type:`${e}/add`,payload:t})},delete:t=>{s.getState().delete(t),p({type:`${e}/delete`,payload:t})}});return{reduxStore:{getState:()=>({[e]:{data:s.getState().data}}),subscribe:e=>s.subscribe(e)},useSelector:d,useData:l,useRecord:u,applyChanges:e=>{let t=g();e.forEach(e=>{switch(e.type){case`add`:e.value&&t.add(e.value);break;case`delete`:t.delete(e.id);break;case`update`:e.value&&t.update(e.value);break}})},getActions:g,getData:()=>s.getState().data,getRecord:e=>s.getState().data.find(t=>t[n]===e),id:Rt(),addObserver:m,removeObserver:h,on:a.on,waitUtilLoaded:e=>{let t=i.subscribe(e);return()=>t.unsubscribe()}}},Rg=(e,t)=>{let n=new mt(1);return n.next(e()),t(e=>{n.next(e)}),n};var zg=`3.7.7`,Bg=zg,Vg=typeof Buffer==`function`,Hg=typeof TextDecoder==`function`?new TextDecoder:void 0,Ug=typeof TextEncoder==`function`?new TextEncoder:void 0,Wg=Array.prototype.slice.call(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`),Gg=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(Wg),Kg=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,qg=String.fromCharCode.bind(String),Jg=typeof Uint8Array.from==`function`?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Yg=e=>e.replace(/=/g,``).replace(/[+\/]/g,e=>e==`+`?`-`:`_`),Xg=e=>e.replace(/[^A-Za-z0-9\+\/]/g,``),Zg=e=>{let t,n,r,i,a=``,o=e.length%3;for(let o=0;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw TypeError(`invalid character found`);t=n<<16|r<<8|i,a+=Wg[t>>18&63]+Wg[t>>12&63]+Wg[t>>6&63]+Wg[t&63]}return o?a.slice(0,o-3)+`===`.substring(o):a},Qg=typeof btoa==`function`?e=>btoa(e):Vg?e=>Buffer.from(e,`binary`).toString(`base64`):Zg,$g=Vg?e=>Buffer.from(e).toString(`base64`):e=>{let t=4096,n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(qg.apply(null,e.subarray(r,r+t)));return Qg(n.join(``))},e_=(e,t=!1)=>t?Yg($g(e)):$g(e),t_=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?qg(192|t>>>6)+qg(128|t&63):qg(224|t>>>12&15)+qg(128|t>>>6&63)+qg(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return qg(240|t>>>18&7)+qg(128|t>>>12&63)+qg(128|t>>>6&63)+qg(128|t&63)}},n_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,r_=e=>e.replace(n_,t_),i_=Vg?e=>Buffer.from(e,`utf8`).toString(`base64`):Ug?e=>$g(Ug.encode(e)):e=>Qg(r_(e)),a_=(e,t=!1)=>t?Yg(i_(e)):i_(e),o_=e=>a_(e,!0),s_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,c_=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return qg((t>>>10)+55296)+qg((t&1023)+56320);case 3:return qg((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return qg((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},l_=e=>e.replace(s_,c_),u_=e=>{if(e=e.replace(/\s+/g,``),!Kg.test(e))throw TypeError(`malformed base64.`);e+=`==`.slice(2-(e.length&3));let t,n=``,r,i;for(let a=0;a<e.length;)t=Gg[e.charAt(a++)]<<18|Gg[e.charAt(a++)]<<12|(r=Gg[e.charAt(a++)])<<6|(i=Gg[e.charAt(a++)]),n+=r===64?qg(t>>16&255):i===64?qg(t>>16&255,t>>8&255):qg(t>>16&255,t>>8&255,t&255);return n},d_=typeof atob==`function`?e=>atob(Xg(e)):Vg?e=>Buffer.from(e,`base64`).toString(`binary`):u_,f_=Vg?e=>Jg(Buffer.from(e,`base64`)):e=>Jg(d_(e).split(``).map(e=>e.charCodeAt(0))),p_=e=>f_(h_(e)),m_=Vg?e=>Buffer.from(e,`base64`).toString(`utf8`):Hg?e=>Hg.decode(f_(e)):e=>l_(d_(e)),h_=e=>Xg(e.replace(/[-_]/g,e=>e==`-`?`+`:`/`)),g_=e=>m_(h_(e)),__=e=>{if(typeof e!=`string`)return!1;let t=e.replace(/\s+/g,``).replace(/={0,2}$/,``);return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},v_=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),y_=function(){let e=(e,t)=>Object.defineProperty(String.prototype,e,v_(t));e(`fromBase64`,function(){return g_(this)}),e(`toBase64`,function(e){return a_(this,e)}),e(`toBase64URI`,function(){return a_(this,!0)}),e(`toBase64URL`,function(){return a_(this,!0)}),e(`toUint8Array`,function(){return p_(this)})},b_=function(){let e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,v_(t));e(`toBase64`,function(e){return e_(this,e)}),e(`toBase64URI`,function(){return e_(this,!0)}),e(`toBase64URL`,function(){return e_(this,!0)})},x_={version:zg,VERSION:Bg,atob:d_,atobPolyfill:u_,btoa:Qg,btoaPolyfill:Zg,fromBase64:g_,toBase64:a_,encode:a_,encodeURI:o_,encodeURL:o_,utob:r_,btou:l_,decode:g_,isValid:__,fromUint8Array:e_,toUint8Array:p_,extendString:y_,extendUint8Array:b_,extendBuiltins:()=>{y_(),b_()}},S_=function e(t){function n(e,t,r){var i,a={};if(Array.isArray(e))return e.concat(t);for(i in e)a[r?i.toLowerCase():i]=e[i];for(i in t){var o=r?i.toLowerCase():i,s=t[i];a[o]=o in a&&typeof s==`object`?n(a[o],s,o==`headers`):s}return a}function r(e,r,i,a,o){var s=typeof e==`string`?e:(r=e).url,c={config:r},l=n(t,r),u={};a||=l.data,(l.transformRequest||[]).map(function(e){a=e(a,l.headers)||a}),l.auth&&(u.authorization=l.auth),a&&typeof a==`object`&&typeof a.append!=`function`&&typeof a.text!=`function`&&(a=JSON.stringify(a),u[`content-type`]=`application/json`);try{u[l.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp(`(^|; )`+l.xsrfCookieName+`=([^;]*)`))[2])}catch{}return l.baseURL&&(s=s.replace(/^(?!.*\/\/)\/?/,l.baseURL+`/`)),l.params&&(s+=(~s.indexOf(`?`)?`&`:`?`)+(l.paramsSerializer?l.paramsSerializer(l.params):new URLSearchParams(l.params))),(l.fetch||fetch)(s,{method:(i||l.method||`get`).toUpperCase(),body:a,headers:n(l.headers,u,!0),credentials:l.withCredentials?`include`:o}).then(function(e){for(var t in e)typeof e[t]!=`function`&&(c[t]=e[t]);return l.responseType==`stream`?(c.data=e.body,c):e[l.responseType||`text`]().then(function(e){c.data=e,c.data=JSON.parse(e)}).catch(Object).then(function(){return(l.validateStatus?l.validateStatus(e.status):e.ok)?c:Promise.reject(c)})})}return t||={},r.request=r,r.get=function(e,t){return r(e,t,`get`)},r.delete=function(e,t){return r(e,t,`delete`)},r.head=function(e,t){return r(e,t,`head`)},r.options=function(e,t){return r(e,t,`options`)},r.post=function(e,t,n){return r(e,n,`post`,t)},r.put=function(e,t,n){return r(e,n,`put`,t)},r.patch=function(e,t,n){return r(e,n,`patch`,t)},r.all=Promise.all.bind(Promise),r.spread=function(e){return e.apply.bind(e,e)},r.CancelToken=typeof AbortController==`function`?AbortController:Object,r.defaults=t,r.create=e,r}(),C_=`https://gitee.com/api/v5`;const w_=({redirectUri:e,clientId:t})=>`https://gitee.com/oauth/authorize?client_id=${t}&redirect_uri=${e}&response_type=code&scope=user_info%20projects&state=${encodeURIComponent(JSON.stringify({platform:`gitee`}))}`;var T_=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const E_=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://gitee.com/oauth/token?grant_type=authorization_code&code=${e}&client_id=${t}&redirect_uri=${r}&client_secret=${n}`;return console.log(`url:`,i),(await S_.post(i)).data},D_=async({refreshToken:e})=>{let t=`https://gitee.com/oauth/token?grant_type=refresh_token&refresh_token=${e}`;return(await S_.post(t)).data};var O_=(()=>{let e=e=>e.split(`/`).map(e=>encodeURIComponent(e)).join(`/`);return{getUserInfo:()=>`${C_}/user`,createBranch:(e,t)=>`${C_}/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`${C_}/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`${C_}/repos/${e}/${t}/branches`,createRepo:()=>`${C_}/user/repos`,getRepo:(e,t)=>`${C_}/repos/${e}/${t}`,deleteRepo:(e,t)=>`${C_}/repos/${e}/${t}`,clearRepo:(e,t)=>`${C_}/repos/${e}/${t}/clear`,getRepoList:()=>`${C_}/user/repos`,createFile:(t,n,r)=>`${C_}/repos/${t}/${n}/contents/${e(r)}`,updateFile:(t,n,r)=>`${C_}/repos/${t}/${n}/contents/${e(r)}`,deleteFile:(t,n,r)=>`${C_}/repos/${t}/${n}/contents/${e(r)}`,getPathContents:(t,n,r)=>`${C_}/repos/${t}/${n}/contents/${e(r)}`}})();const k_=({getAccessToken:e})=>{let t=async(e,t,n=`POST`)=>{let r=new FormData;return Object.keys(t).forEach(e=>{r.append(e,t[e])}),S_.request({method:n,url:e,data:r})},n={getInfo:async()=>S_.get(O_.getUserInfo(),{params:T_({access_token:e()})})},r={get:async({owner:t,repo:n})=>S_.get(O_.getRepo(t,n),{params:T_({access_token:e()})}),add:async({repo:n})=>{let r={access_token:e(),name:n,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t(O_.createRepo(),r)},getList:async({page:t=1,per_page:n=20})=>S_.get(O_.getRepoList(),{params:T_({access_token:e(),page:t,per_page:n})}),delete:async({owner:t,repo:n})=>S_.delete(O_.deleteRepo(t,n),{params:{access_token:e(),owner:t,repo:n}}),clear:async({owner:t,repo:n})=>S_.put(O_.clearRepo(t,n),{params:{access_token:e(),owner:t,repo:n}})},i={get:async({owner:t,repo:n,branch:r})=>S_.get(O_.getBranch(t,n,r),{params:T_({access_token:e(),owner:t,repo:n,branch:r})}),getList:async({owner:t,repo:n})=>S_.get(O_.getBranchList(t,n),{params:T_({access_token:e(),owner:t,repo:n})}),add:async({owner:n,repo:r,branch:i,refs:a=`master`})=>{let o={access_token:e(),owner:n,repo:r,branch_name:i,refs:a};return t(O_.createBranch(n,r),o)}},a=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),o=async({owner:t,repo:n,path:r})=>S_.get(O_.getPathContents(t,n,r),{params:T_({access_token:e(),owner:t,repo:n,path:r})});return{File:{add:async({owner:n,repo:r,path:i,content:o,message:s,branch:c=`master`})=>{a(o)||(o=x_.encode(o)),s||=`create `+i;let l={access_token:e(),owner:n,path:i,content:o,message:s,branch:c};return t(O_.createFile(n,r,i),l)},update:async({owner:n,repo:r,path:i,content:s,message:c,branch:l=`master`,sha:u=null})=>(a(s)||(s=x_.encode(s)),u||=(await o({owner:n,repo:r,path:i})).data.sha,c||=`update `+i,t(O_.updateFile(n,r,i),{access_token:e(),owner:n,repo:r,path:i,content:s,message:c,branch:l,sha:u},`PUT`)),delete:async({owner:t,repo:n,path:r,sha:i,message:a})=>(i||=(await o({owner:t,repo:n,path:r})).data.sha,a||=`delete `+r,S_.delete(O_.deleteFile(t,n,r),{params:{access_token:e(),owner:t,repo:n,path:r,sha:i,message:a}})),get:async({owner:e,repo:t,path:n})=>{let r=await o({owner:e,repo:t,path:n}),i=r.data;return!i||Array.isArray(i)||typeof i.content!=`string`?r:(i.rawContent=i.content,i.uint8array=x_.toUint8Array(i.rawContent),i.content=x_.decode(i.rawContent),r)},getInfo:o},Repo:r,User:n,Branch:i}},A_=new class{triggers=new Map;add=e=>{let{repo:t,id:n}=e;q.componentService.register(`AiFillFolder`,be),q.layoutService.sidebar.addView({id:n,viewData:{type:`folderTree`,props:{space:e}}},!0),q.eventBus.on(Ml.ActivityBar.ActivityClicked(n),()=>{q.layoutService.sidebar.setView(n)})};focus=e=>{q.layoutService.activityBar.showActivity(e),q.layoutService.sidebar.setView(e)};getCurrentViewId=()=>q.layoutService.sidebar.getCurrentView()?.id;useCurrentViewId=()=>q.layoutService.sidebar.useCurrentView()?.id;onCurrentViewIdChanged=e=>{q.layoutService.sidebar.subscribeActiveViewId(e)};getCurrentViewId$=()=>q.layoutService.sidebar.ActiveViewId$;remove=e=>{q.layoutService.activityBar.removeActivity(e),q.layoutService.sidebar.removeView(e),this.triggers.delete(e)};registerTrigger=(e,t)=>(this.triggers.set(e,t),()=>{this.triggers.delete(e)});trigger=e=>{let t=this.triggers.get(e);t&&t()}},j_=(e,t,n,r)=>{let i=(0,V.useMemo)(()=>typeof e==`function`?e():e,[]);(0,V.useEffect)(()=>{let e=i.subscribe({next:t,error:n,complete:r});return()=>{e.unsubscribe()}},[])},M_=(e,t)=>{if(e===null)return t;try{return JSON.parse(e)}catch{return t}};var{slice:N_,forEach:P_}=[];function F_(e){return P_.call(N_.call(arguments,1),t=>{if(t)for(let n in t)e[n]===void 0&&(e[n]=t[n])}),e}function I_(e){return typeof e==`string`?[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(e)):!1}var L_=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,R_=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:`/`},r=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){let e=n.maxAge-0;if(Number.isNaN(e))throw Error(`maxAge should be a Number`);r+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!L_.test(n.domain))throw TypeError(`option domain is invalid`);r+=`; Domain=${n.domain}`}if(n.path){if(!L_.test(n.path))throw TypeError(`option path is invalid`);r+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!=`function`)throw TypeError(`option expires is invalid`);r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+=`; HttpOnly`),n.secure&&(r+=`; Secure`),n.sameSite)switch(typeof n.sameSite==`string`?n.sameSite.toLowerCase():n.sameSite){case!0:r+=`; SameSite=Strict`;break;case`lax`:r+=`; SameSite=Lax`;break;case`strict`:r+=`; SameSite=Strict`;break;case`none`:r+=`; SameSite=None`;break;default:throw TypeError(`option sameSite is invalid`)}return n.partitioned&&(r+=`; Partitioned`),r},z_={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:`/`,sameSite:`strict`};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=R_(e,t,i)},read(e){let t=`${e}=`,n=document.cookie.split(`;`);for(let e=0;e<n.length;e++){let r=n[e];for(;r.charAt(0)===` `;)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null},remove(e,t){this.create(e,``,-1,t)}},B_={name:`cookie`,lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<`u`)return z_.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:a}=t;n&&typeof document<`u`&&z_.create(n,e,r,i,a)}},V_={name:`querystring`,lookup(e){let{lookupQuerystring:t}=e,n;if(typeof window<`u`){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf(`?`)>-1&&(e=window.location.hash.substring(window.location.hash.indexOf(`?`)));let r=e.substring(1).split(`&`);for(let e=0;e<r.length;e++){let i=r[e].indexOf(`=`);i>0&&r[e].substring(0,i)===t&&(n=r[e].substring(i+1))}}return n}},H_={name:`hash`,lookup(e){let{lookupHash:t,lookupFromHashIndex:n}=e,r;if(typeof window<`u`){let{hash:e}=window.location;if(e&&e.length>2){let i=e.substring(1);if(t){let e=i.split(`&`);for(let n=0;n<e.length;n++){let i=e[n].indexOf(`=`);i>0&&e[n].substring(0,i)===t&&(r=e[n].substring(i+1))}}if(r)return r;if(!r&&n>-1){let t=e.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof n==`number`?n:0]?.replace(`/`,``):void 0}}}return r}},U_=null,W_=()=>{if(U_!==null)return U_;try{if(U_=typeof window<`u`&&window.localStorage!==null,!U_)return!1;let e=`i18next.translate.boo`;window.localStorage.setItem(e,`foo`),window.localStorage.removeItem(e)}catch{U_=!1}return U_},G_={name:`localStorage`,lookup(e){let{lookupLocalStorage:t}=e;if(t&&W_())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&W_()&&window.localStorage.setItem(n,e)}},K_=null,q_=()=>{if(K_!==null)return K_;try{if(K_=typeof window<`u`&&window.sessionStorage!==null,!K_)return!1;let e=`i18next.translate.boo`;window.sessionStorage.setItem(e,`foo`),window.sessionStorage.removeItem(e)}catch{K_=!1}return K_},J_={name:`sessionStorage`,lookup(e){let{lookupSessionStorage:t}=e;if(t&&q_())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&q_()&&window.sessionStorage.setItem(n,e)}},Y_={name:`navigator`,lookup(e){let t=[];if(typeof navigator<`u`){let{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let n=0;n<e.length;n++)t.push(e[n]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},X_={name:`htmlTag`,lookup(e){let{htmlTag:t}=e,n,r=t||(typeof document<`u`?document.documentElement:null);return r&&typeof r.getAttribute==`function`&&(n=r.getAttribute(`lang`)),n}},Z_={name:`path`,lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>`u`)return;let n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(Array.isArray(n))return n[typeof t==`number`?t:0]?.replace(`/`,``)}},Q_={name:`subdomain`,lookup(e){let{lookupFromSubdomainIndex:t}=e,n=typeof t==`number`?t+1:1,r=typeof window<`u`&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},$_=!1;try{document.cookie,$_=!0}catch{}var ev=[`querystring`,`cookie`,`localStorage`,`sessionStorage`,`navigator`,`htmlTag`];$_||ev.splice(1,1);var tv=()=>({order:ev,lookupQuerystring:`lng`,lookupCookie:`i18next`,lookupLocalStorage:`i18nextLng`,lookupSessionStorage:`i18nextLng`,caches:[`localStorage`],excludeCacheFor:[`cimode`],convertDetectedLanguage:e=>e}),nv=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type=`languageDetector`,this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=F_(t,this.options||{},tv()),typeof this.options.convertDetectedLanguage==`string`&&this.options.convertDetectedLanguage.indexOf(`15897`)>-1&&(this.options.convertDetectedLanguage=e=>e.replace(`-`,`_`)),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(B_),this.addDetector(V_),this.addDetector(G_),this.addDetector(J_),this.addDetector(Y_),this.addDetector(X_),this.addDetector(Z_),this.addDetector(Q_),this.addDetector(H_)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&typeof n==`string`&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>e!=null&&!I_(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}};nv.type=`languageDetector`;var rv={zh:{translation:{common:{settings:`设置`,theme:`主题`,language:`语言`,clear:`清空`,confirm:`确认`,cancel:`取消`,success:`成功`,error:`错误`,loading:`加载中...`,save:`保存`,delete:`删除`,edit:`编辑`,add:`添加`,create:`创建`,search:`搜索`,refresh:`刷新`,authorize:`授权`,login:`登录`,file:`文件`,content:`内容`,name:`名称`,description:`描述`,close:`关闭`,ok:`确定`,yes:`是`,no:`否`},settings:{title:`设置`,quickSettings:`快速设置`,theme:`主题`,switchToDarkMode:`切换到暗黑模式`,switchToLightMode:`切换到明亮模式`,localCache:`本地缓存`,clearLocalCache:`清空所有本地数据`,clearCacheTitle:`清空本地缓存`,clearCacheDescription:`是否确定清空本地缓存？`,cacheCleared:`已清空本地缓存`,clearCacheFailed:`清空失败，请稍后重试`,language:`语言`,switchLanguage:`切换语言`,chinese:`中文`,english:`English`},space:{addWorkspace:`添加工作空间`,selectRepository:`选择仓库`,needAuthorization:`需要授权`,goAuthorize:`去授权`,searchRepository:`搜索仓库...`,loading:`加载中`,noRepository:`暂无仓库`,notFound:`未找到`,localStart:`本地开始`,noLoginRequired:`无需登录`,workspaceAdded:`工作空间添加成功`,addFailed:`添加失败，请重试`,localSpaceCreated:`已创建本地空间，可在左侧选择文件开始编辑`,createLocalSpaceFailed:`创建本地空间失败，请重试`,unauthorized:`当前平台 {{platform}} 未授权或授权已过期，请`,clickToAuthorize:`点此授权`,deleteSpace:`删除此空间`,viewInfo:`查看信息`,loginTo:`登录 {{platform}}`,spaceAdded:`成功添加空间`,spaceExists:`空间已存在`,addReadOnlySpace:`添加只读空间`,addReadOnlySpaceDesc:`输入 GitHub/Gitee 仓库链接`,enterRepoUrl:`输入仓库链接...`,invalidRepoUrl:`无效的仓库链接，请检查格式`,readOnlySpaceAdded:`只读空间添加成功`,readOnlySpaceAddFailed:`添加只读空间失败`,readonly:`只读`,guideAddSpaceTitle:`开始使用：添加工作空间`,guideAddSpaceDesc:`点击左侧加号，连接 GitHub / Gitee，并将你的仓库打开为空间。`},file:{saveSuccess:`保存成功`,loadingEditor:`加载编辑器中...`,unsaved:`未保存`,nameExists:`名称已存在`},introduction:{title:`介绍`,welcome:`欢迎使用 Gitary`,subtitle:`用 Git 的方式，管理你的笔记，AI 智能辅助`,gitIntegration:`Git 集成`,gitIntegrationDesc:`直接连接 GitHub/Gitee/GitCode 仓库，将笔记存储在你的代码仓库中`,markdownEditor:`Markdown 编辑`,markdownEditorDesc:`所见即所得的 Markdown 编辑器，支持数学公式和代码高亮`,aiDrawing:`AI 智能画图`,aiDrawingDesc:`用自然语言描述，AI 自动生成 Excalidraw 图表。AI 可以智能创建、分析和编辑图表`,aiAssistant:`全局 AI 助手`,aiAssistantDesc:`智能助手集成工具，可以操作文件、图表和工作区，具备上下文感知能力`,convenientAccess:`便捷访问`,convenientAccessDesc:`随时随地通过浏览器访问你的笔记，无需本地安装`,secure:`安全可控`,secureDesc:`笔记数据完全存储在你的 Git 仓库中，无需担心数据安全`,getStarted:`开始使用`},zenNotes:{createNewNote:`创建新笔记`,confirmCreateNew:`确定要创建新笔记吗？当前笔记将被保存。`,historyNotes:`历史笔记`,placeholder:`记录你的内心感受...`,wordCount:`字数: {{count}}`},mindFlow:{loadingFailed:`加载失败`,loadDataFailed:`无法加载保存的数据`,error:`错误`,selectNodeAndApiKey:`请选择节点并输入API密钥`,generateFailed:`生成失败`,cannotGenerate:`无法生成新的想法，请重试`,enterContent:`请输入内容`,createCenterTheme:`创建中心主题`,enterMainContent:`输入主内容...`,create:`创建`,selectedNode:`选中节点: {{content}}`,addNodeContent:`手动添加节点内容...`,addNode:`添加节点`,deepAnalysis:`深入分析`,lateralThinking:`横向联想`,abstractSummary:`抽象概括`,confirmDelete:`确定要删除这个节点吗？相关的连接也会被删除。`},auth:{unsupportedPlatform:`不支持的平台: {{platform}}`,redirecting:`即将跳转`,confirmRedirect:`是否确定跳转到{{platform}}登录页面？`},share:{title:`分享`,linkCopied:`已复制链接到剪贴板`},zenmark:{loading:`加载中...`,loadingEditor:`加载编辑器中...`,fileSaved:`文件保存成功`},tree:{refresh:`刷新`,rename:`重命名`,delete:`删除`,newFile:`文件`,newFolder:`文件夹`,newMarkdown:`Markdown`,copyUri:`复制 URI`,uriCopied:`已复制文件 URI`,download:`下载`,downloadStarted:`开始下载文件...`,downloadFailed:`下载失败`,confirmDeleteFile:`你确定要删除该文件吗？`,deleteFolderHint:`删除文件夹中全部文件后，文件夹会自动删除`,renameFolderNotSupported:`暂不支持重命名文件夹`,notFound:`未找到`,directory:`目录`,openWith:`使用 {{name}} 打开`},apps:{zenNotes:`禅意笔记`,streamingNote:`流式笔记`,mindFlow:`思维流`,community:`社区`,aiStoryCards:`AI故事卡`,aiResume:`AI简历助手`,aiQuotes:`AI名言`,excalidraw:`Excalidraw 画板`,drawio:`Draw.io 图表`},globalChat:{welcomeTitle:`我能为您做些什么？`,welcomeDesc:`我是你的全局 AI 助手。无论是代码问题、创意写作还是日常闲聊，我都乐意效劳。`,placeholder:`输入消息...`,disclaimer:`AI 可能会出错，请核对重要信息。`,copyContent:`复制内容`,userQuestion:`用户问题`,errorOccurred:`出错了：{{message}}`,errorRetry:`出错了，请稍后再试。`,systemPrompt:`你是一个嵌入在开发者工作空间中的 AI 助手。你的任务是帮助用户解决各种问题，包括代码问题、创意写作和日常交流。

请遵循以下原则：
1. 提供简洁、高质量的回答
2. 使用 Markdown 格式化代码和文本
3. 如果用户的问题与当前上下文相关，请充分利用上下文信息
4. 对于代码问题，提供清晰、可执行的解决方案
5. 保持友好、专业的语调`,contextInfo:`当前上下文信息`,browserViewing:`用户当前在浏览器中查看: {{title}} ({{url}})`,editorEditing:`用户当前正在编辑: {{fileName}} ({{lineCount}} 行)`,projectFile:`当前项目文件: {{file}}`,contextHint:`你可以根据这些上下文信息来更好地理解用户的问题和需求。`,currentBrowserTab:`当前浏览器标签页`,url:`URL`,title:`标题`,selectedText:`选中文本`,currentEditor:`当前编辑器`,file:`文件`,path:`路径`,language:`语言`,lineCount:`行数`,fileContent:`文件内容`,fileContentTruncated:`文件内容已截断，仅显示前 {{shown}} 个字符，共 {{total}} 个字符`,currentProjectFile:`当前项目文件`,recentFiles:`最近打开的文件`},excalidraw:{title:`Excalidraw 画板（支持 AI）`,loading:`正在加载画板...`,enterApiKey:`请输入 OpenAI API 密钥`,promptPlaceholder:`描述图表内容...`,generate:`AI 生成图`,generating:`生成中...`,newFile:`新建 Excalidraw 画板`,error:`错误`,enterPromptError:`请先输入你想要生成的图的描述。`,generateFailed:`生成失败`,generateFailedDesc:`无法生成图形，请检查 API 密钥和网络连接。`,welcomeTitle:`开始你的 AI 绘图之旅`,welcomeDesc:`用自然语言描述你想要的流程图或架构图，AI 会帮你自动生成`,example1:`一个包含前端、后端和数据库的三层 Web 系统`,example2:`用户注册流程：输入信息 → 验证 → 创建账户 → 发送确认邮件`,canvasRequired:`请在 Excalidraw 画布中打开并使用该助手，以便把生成的图形写入当前画布。`,aiAssistant:`AI 绘图助手`,saving:`正在保存...`,edited:`有未保存更改`,saveError:`保存失败`,saved:`已保存`,saveNow:`立即保存`,uriRequired:`需要提供 URI`,generateSuccess:`生成成功`,diagramAdded:`图表已添加到画布`,diagramGenerated:`图表已生成！`,generateError:`生成图表时出错，请重试`,tools:{noCanvas:`当前没有可用的 Excalidraw 画布。请在一个 Excalidraw 文件中打开画布后再重试。`,promptRequired:`prompt 不能为空。`,operationsRequired:`operations 不能为空。`,invalidOperation:`无效的操作对象。`,addNodeLabelRequired:`add_node 操作需要提供 label。`,connectFromToRequired:`connect 操作需要提供 from 和 to。`,connectNodeNotFound:`connect 操作未找到对应的 from/to 节点，请确认节点文本或 ID 是否正确。`,renameTargetLabelRequired:`rename_node 需要提供 target 和 newLabel。`,renameNodeNotFound:`rename_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,renameOnlyTextNode:`rename_node 目前仅支持重命名文本节点，请确保 target 指向文本元素。`,deleteTargetRequired:`delete_node 需要提供 target。`,deleteNodeNotFound:`delete_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,unknownOperationType:`未知的操作类型: {{type}}`,getSummaryDescription:`总结当前 Excalidraw 画布中的主要节点和连接关系，用于理解现有图表结构。返回的是抽象的节点/边信息，而不是完整的 Excalidraw JSON。`,getSummaryMaxNodesDescription:`最多返回多少个节点，默认返回全部。较大的图可以指定一个较小的数以节省 token。`,generateDiagramDescription:`根据自然语言描述生成一张新的 Excalidraw 图表，并写入当前画布。适合从零创建流程图、架构图等。`,generateDiagramPromptDescription:`你想要的图表描述，例如"一个包含前端、后端和数据库的三层 Web 系统架构图"。`,generateDiagramModeDescription:`append=在现有图的基础上追加元素，replace=清空当前画布并只保留新图。`,applyOperationsDescription:`在当前 Excalidraw 图上应用一组语义化的修改操作（例如新增节点、连接箭头、重命名节点或删除节点）。适合对现有图表做小步编辑，而不是整图重生成。`,applyOperationsOperationsDescription:`要应用的操作列表。每个操作都有 op 字段（add_node | connect | rename_node | delete_node），以及对应的参数。`,applyOperationsOpDescription:`操作类型。`,applyOperationsIdDescription:`新增节点时的逻辑 ID，可选。如果提供，将作为该节点文本元素的 id，后续可以通过该 ID 引用。`,applyOperationsLabelDescription:`新增节点时显示的文本内容，例如"Redis 缓存"或"订单服务"。`,applyOperationsKindDescription:`节点类型（如 service/database/cache 等），目前仅用于语义提示，不影响样式。`}},drawio:{title:`Draw.io 图表编辑器`,loading:`正在加载编辑器...`,newFile:`新建 Draw.io 图表`,saving:`正在保存...`,saved:`已保存`,saveError:`保存失败`,edited:`有未保存更改`,saveNow:`立即保存`,uriRequired:`需要提供 URI`,tools:{noCanvas:`当前没有可用的 Draw.io 画布。请在一个 Draw.io 文件中打开画布后再重试。`,emptyCanvas:`当前画布为空，无法进行分析。`,promptRequired:`prompt 不能为空。`,analysisFailed:`分析图表时出错，请重试。`,generateDiagramDescription:`根据自然语言描述生成一张新的 Draw.io 图表，并写入当前画布。适合从零创建流程图、架构图、UML 图等。`,generateDiagramPromptDescription:`你想要的图表描述，例如"一个包含前端、后端和数据库的三层 Web 系统架构图"。`,generateDiagramModeDescription:`append=在现有图的基础上追加元素，replace=清空当前画布并只保留新图。`,analyzeDescription:`分析当前 Draw.io 画布中的主要节点和连接关系，用于理解现有图表结构。返回节点、边的信息和图表摘要。`,applyOperationsDescription:`在当前 Draw.io 图上应用一组语义化的修改操作（例如新增节点、连接箭头、重命名节点或删除节点）。适合对现有图表做小步编辑，而不是整图重生成。`,applyOperationsOperationsDescription:`要应用的操作列表。每个操作都有 op 字段（add_node | connect | rename_node | delete_node），以及对应的参数。`,applyOperationsOpDescription:`操作类型。`,applyOperationsIdDescription:`新增节点时的逻辑 ID，可选。如果提供，将作为该节点的 id，后续可以通过该 ID 引用。`,applyOperationsLabelDescription:`新增节点时显示的文本内容，例如"Redis 缓存"或"订单服务"。`,applyOperationsKindDescription:`节点类型（如 service/database/cache 等），目前仅用于语义提示，影响样式。`,applyOperationsNearDescription:`新增节点时的相对参考节点，可以是节点 ID 或节点文本。新节点将放置在该节点附近。`,applyOperationsFromDescription:`连接操作的起始节点，可以是节点 ID 或节点文本。`,applyOperationsToDescription:`连接操作的终止节点，可以是节点 ID 或节点文本。`,applyOperationsTargetDescription:`重命名/删除操作的目标节点（ID 或文本）。`,applyOperationsNewLabelDescription:`重命名操作的新文本标签。`,operationsRequired:`operations 不能为空。`,invalidOperation:`无效的操作对象。`,addNodeLabelRequired:`add_node 操作需要提供 label。`,connectFromToRequired:`connect 操作需要提供 from 和 to。`,connectNodeNotFound:`connect 操作未找到对应的 from/to 节点，请确认节点文本或 ID 是否正确。`,renameTargetLabelRequired:`rename_node 需要提供 target 和 newLabel。`,renameNodeNotFound:`rename_node 未找到目标节点，请确认 target 是否为正确的节点文本或 ID。`,deleteTargetRequired:`delete_node 需要提供 target。`,unknownOperationType:`未知的操作类型: {{type}}`,applyOperationsFailed:`应用操作时出错，请重试。`}},story:{loadDataFailed:`加载数据失败`,loadDataFailedDesc:`无法加载保存的数据，请检查您的存储设置。`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`,enterContent:`请输入内容`,generateFailed:`生成失败`,generateFailedDesc:`无法生成AI回应，请检查您的API密钥和网络连接。`,selectDirection:`请选择一个方向`},community:{loadFailed:`加载失败`,loadFailedDesc:`无法加载社区数据`,error:`错误`,enterContent:`请输入内容`,user:`用户`,publishSuccess:`发布成功`,publishSuccessDesc:`帖子已发布到社区`,publishNewPost:`发布新帖子`,shareYourThoughts:`分享你的想法...`,writeSomething:`写点什么...`,publish:`发布`},resume:{loadFailed:`加载失败`,loadFailedDesc:`无法加载保存的数据`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`,enterContent:`请输入内容`},quotes:{loadFailed:`加载失败`,loadFailedDesc:`无法加载保存的数据`,error:`错误`,enterApiKey:`请输入OpenAI API密钥`},thoughts:{placeholder:`记录你的想法...`,confirmDelete:`确定要删除这条记录吗？`,delete:`删除`,noRecords:`还没有任何记录`,startWriting:`开始写下你的第一个想法吧...`},meta:{title:`Gitary - Notion-like editing + Excalidraw drawing for your Git repositories | 类 Notion 编辑 + Excalidraw 画图，运行在你的 Git 仓库上`,description:`Gitary 将 Notion 风格的强大编辑体验和 Excalidraw 画图能力带到你的 Git 仓库中。支持 GitHub/Gitee/GitCode，零中间存储，完全的数据所有权。类 Notion 编辑 + Excalidraw 画图 + Git 的数据控制 = 完美的知识管理方案。`,keywords:`Notion-like,Notion替代品,Notion风格,Git笔记,GitHub笔记,Gitee笔记,GitCode笔记,Markdown编辑器,知识管理,版本控制,开源笔记,数据所有权,Git知识库`},search:{placeholder:`搜索文件或内容…`,selectSpaceFirst:`先选择空间`,searching:`搜索中…`,results:`个结果`,noSpace:`请先选择一个空间`,noQuery:`输入关键词搜索文件或内容`,noQueryDesc:`支持文件名和内容搜索`,noResults:`未找到匹配结果`,noResultsDesc:`尝试使用其他关键词或重建索引`,reindex:`重建索引`,indexing:`正在索引`,indexStale:`索引可能已过期，点击接受当前基线`,indexNormal:`索引状态正常`,navigation:`导航`,open:`打开`,close:`关闭`,openSearch:`打开搜索`,openFile:`打开 {{path}}`,noFocusedSpaceToIndex:`没有聚焦的空间可索引`,noFocusedSpaceToSearch:`没有聚焦的空间可搜索`,indexedSuccess:`已索引 {{indexed}}，已移除 {{removed}}`,foundHits:`找到 {{total}} 个匹配 '{{query}}' 的结果`},browserExtension:{name:`浏览器插件`,title:`Gitary Companion`,description:`浏览器扩展插件，让您可以在 GitHub、Gitee、GitCode 仓库页面一键跳转到 Gitary`},toolInvocation:{error:`错误`,expand:`展开工具详情`,collapse:`收起工具详情`}}},en:{translation:{common:{settings:`Settings`,theme:`Theme`,language:`Language`,clear:`Clear`,confirm:`Confirm`,cancel:`Cancel`,success:`Success`,error:`Error`,loading:`Loading...`,save:`Save`,delete:`Delete`,edit:`Edit`,add:`Add`,create:`Create`,search:`Search`,refresh:`Refresh`,authorize:`Authorize`,login:`Login`,file:`File`,content:`Content`,name:`Name`,description:`Description`,close:`Close`,ok:`OK`,yes:`Yes`,no:`No`},settings:{title:`Settings`,quickSettings:`Quick Settings`,theme:`Theme`,switchToDarkMode:`Switch to Dark Mode`,switchToLightMode:`Switch to Light Mode`,localCache:`Local Cache`,clearLocalCache:`Clear all local data`,clearCacheTitle:`Clear Local Cache`,clearCacheDescription:`Are you sure you want to clear the local cache?`,cacheCleared:`Local cache cleared`,clearCacheFailed:`Failed to clear cache, please try again later`,language:`Language`,switchLanguage:`Switch Language`,chinese:`中文`,english:`English`},space:{addWorkspace:`Add Workspace`,selectRepository:`Select Repository`,needAuthorization:`Authorization Required`,goAuthorize:`Authorize`,searchRepository:`Search repository...`,loading:`Loading`,noRepository:`No repositories`,notFound:`Not found`,localStart:`Start Local`,noLoginRequired:`No login required`,workspaceAdded:`Workspace added successfully`,addFailed:`Failed to add, please try again`,localSpaceCreated:`Local space created, you can select files on the left to start editing`,createLocalSpaceFailed:`Failed to create local space, please try again`,unauthorized:`Platform {{platform}} is not authorized or authorization has expired, please`,clickToAuthorize:`click here to authorize`,deleteSpace:`Delete this space`,viewInfo:`View Info`,loginTo:`Login to {{platform}}`,spaceAdded:`Space added successfully`,spaceExists:`Space already exists`,addReadOnlySpace:`Add Read-Only Space`,addReadOnlySpaceDesc:`Enter GitHub/Gitee repository URL`,enterRepoUrl:`Enter repository URL...`,invalidRepoUrl:`Invalid repository URL, please check the format`,readOnlySpaceAdded:`Read-only space added successfully`,readOnlySpaceAddFailed:`Failed to add read-only space`,readonly:`Read-Only`,guideAddSpaceTitle:`Get Started: Add a Workspace`,guideAddSpaceDesc:`Click the plus icon on the left to connect GitHub / Gitee and open your repository as a space.`},file:{saveSuccess:`Save successful`,loadingEditor:`Loading editor...`,unsaved:`Unsaved`,nameExists:`Name already exists`},introduction:{title:`Introduction`,welcome:`Welcome to Gitary`,subtitle:`Manage your notes the Git way with AI assistance`,gitIntegration:`Git Integration`,gitIntegrationDesc:`Connect directly to GitHub/Gitee/GitCode repositories and store your notes in your code repository`,markdownEditor:`Markdown Editor`,markdownEditorDesc:`WYSIWYG Markdown editor with support for math formulas and code highlighting`,aiDrawing:`AI-Powered Drawing`,aiDrawingDesc:`Generate Excalidraw diagrams from natural language descriptions. AI can create, analyze, and edit diagrams intelligently`,aiAssistant:`Global AI Assistant`,aiAssistantDesc:`Intelligent assistant with tool integration. Can operate files, diagrams, and workspace with context awareness`,convenientAccess:`Convenient Access`,convenientAccessDesc:`Access your notes from anywhere via browser, no local installation required`,secure:`Secure & Controllable`,secureDesc:`Your notes are completely stored in your Git repository, no need to worry about data security`,getStarted:`Get Started`},zenNotes:{createNewNote:`Create New Note`,confirmCreateNew:`Are you sure you want to create a new note? The current note will be saved.`,historyNotes:`History Notes`,placeholder:`Record your inner feelings...`,wordCount:`Word count: {{count}}`},mindFlow:{loadingFailed:`Loading Failed`,loadDataFailed:`Unable to load saved data`,error:`Error`,selectNodeAndApiKey:`Please select a node and enter API key`,generateFailed:`Generation Failed`,cannotGenerate:`Unable to generate new ideas, please try again`,enterContent:`Please enter content`,createCenterTheme:`Create Center Theme`,enterMainContent:`Enter main content...`,create:`Create`,selectedNode:`Selected node: {{content}}`,addNodeContent:`Manually add node content...`,addNode:`Add Node`,deepAnalysis:`Deep Analysis`,lateralThinking:`Lateral Thinking`,abstractSummary:`Abstract Summary`,confirmDelete:`Are you sure you want to delete this node? Related connections will also be deleted.`},auth:{unsupportedPlatform:`Unsupported platform: {{platform}}`,redirecting:`Redirecting`,confirmRedirect:`Are you sure you want to redirect to {{platform}} login page?`},share:{title:`Share`,linkCopied:`Link copied to clipboard`},zenmark:{loading:`Loading...`,loadingEditor:`Loading editor...`,fileSaved:`File saved successfully`},tree:{refresh:`Refresh`,rename:`Rename`,delete:`Delete`,newFile:`File`,newFolder:`Folder`,newMarkdown:`Markdown`,copyUri:`Copy URI`,uriCopied:`File URI copied`,download:`Download`,downloadStarted:`Downloading file...`,downloadFailed:`Download failed`,confirmDeleteFile:`Are you sure you want to delete this file?`,deleteFolderHint:`After deleting all files in the folder, the folder will be automatically deleted`,renameFolderNotSupported:`Renaming folders is not currently supported`,notFound:`Not found`,directory:`Directory`,openWith:`Open with {{name}}`},apps:{zenNotes:`Zen Notes`,streamingNote:`Streaming Note`,mindFlow:`Mind Flow`,community:`Community`,aiStoryCards:`AI Story Cards`,aiResume:`AI Resume Assistant`,aiQuotes:`AI Quotes`,excalidraw:`Excalidraw Canvas`,drawio:`Draw.io Diagram`},globalChat:{welcomeTitle:`How can I help you today?`,welcomeDesc:`I'm your global AI assistant. Whether it's coding questions, creative writing, or casual chat, I'm here to help.`,placeholder:`Type a message...`,disclaimer:`AI can make mistakes. Check important info.`,copyContent:`Copy content`,userQuestion:`User Question`,errorOccurred:`Error: {{message}}`,errorRetry:`An error occurred, please try again later.`,systemPrompt:`You are a helpful AI assistant embedded inside a developer workspace. Your task is to help users solve various problems, including coding questions, creative writing, and daily communication.

Please follow these principles:
1. Provide concise, high-quality answers
2. Use Markdown to format code and text
3. If the user's question is related to the current context, make full use of the context information
4. For coding questions, provide clear, executable solutions
5. Maintain a friendly and professional tone`,contextInfo:`Current Context Information`,browserViewing:`User is currently viewing in browser: {{title}} ({{url}})`,editorEditing:`User is currently editing: {{fileName}} ({{lineCount}} lines)`,projectFile:`Current project file: {{file}}`,contextHint:`You can use this context information to better understand the user's questions and needs.`,currentBrowserTab:`Current Browser Tab`,url:`URL`,title:`Title`,selectedText:`Selected Text`,currentEditor:`Current Editor`,file:`File`,path:`Path`,language:`Language`,lineCount:`Line Count`,fileContent:`File Content`,fileContentTruncated:`File content truncated, showing first {{shown}} characters of {{total}} total`,currentProjectFile:`Current Project File`,recentFiles:`Recently Opened Files`},excalidraw:{title:`Excalidraw Canvas (with AI)`,loading:`Loading Excalidraw canvas...`,enterApiKey:`Please enter OpenAI API key`,promptPlaceholder:`Describe diagram content...`,generate:`Generate with AI`,generating:`Generating...`,newFile:`New Excalidraw canvas`,error:`Error`,enterPromptError:`Please enter a description for the diagram first.`,generateFailed:`Generation failed`,generateFailedDesc:`Unable to generate diagram, please check API key and network connection.`,welcomeTitle:`Start Your AI Drawing Journey`,welcomeDesc:`Describe the flowchart or architecture diagram you want in natural language, and AI will generate it for you`,example1:`A three-tier web system with frontend, backend, and database`,example2:`User registration flow: input info → validate → create account → send confirmation email`,canvasRequired:`Please open this assistant in the Excalidraw canvas to write generated diagrams to the current canvas.`,aiAssistant:`AI Drawing Assistant`,saving:`Saving...`,edited:`Unsaved changes`,saveError:`Save failed`,saved:`Saved`,saveNow:`Save now`,uriRequired:`URI is required`,generateSuccess:`Generation successful`,diagramAdded:`Diagram added to canvas`,diagramGenerated:`Diagram generated!`,generateError:`Error generating diagram, please try again`,tools:{noCanvas:`No Excalidraw canvas available. Please open a canvas in an Excalidraw file and try again.`,promptRequired:`Prompt cannot be empty.`,operationsRequired:`Operations cannot be empty.`,invalidOperation:`Invalid operation object.`,addNodeLabelRequired:`add_node operation requires label.`,connectFromToRequired:`connect operation requires from and to.`,connectNodeNotFound:`connect operation did not find corresponding from/to nodes, please confirm the node text or ID is correct.`,renameTargetLabelRequired:`rename_node requires target and newLabel.`,renameNodeNotFound:`rename_node did not find target node, please confirm target is correct node text or ID.`,renameOnlyTextNode:`rename_node currently only supports renaming text nodes, please ensure target points to a text element.`,deleteTargetRequired:`delete_node requires target.`,deleteNodeNotFound:`delete_node did not find target node, please confirm target is correct node text or ID.`,unknownOperationType:`Unknown operation type: {{type}}`,getSummaryDescription:`Summarize the main nodes and connections in the current Excalidraw canvas to understand the existing diagram structure. Returns abstract node/edge information, not the complete Excalidraw JSON.`,getSummaryMaxNodesDescription:`Maximum number of nodes to return, defaults to all. For larger diagrams, you can specify a smaller number to save tokens.`,generateDiagramDescription:`Generate a new Excalidraw diagram based on natural language description and write it to the current canvas. Suitable for creating flowcharts, architecture diagrams, etc. from scratch.`,generateDiagramPromptDescription:`The diagram description you want, for example "a three-tier web system architecture diagram with frontend, backend, and database".`,generateDiagramModeDescription:`append=add elements on top of existing diagram, replace=clear current canvas and keep only the new diagram.`,applyOperationsDescription:`Apply a set of semantic modification operations (such as adding nodes, connecting arrows, renaming nodes, or deleting nodes) to the current Excalidraw diagram. Suitable for small-step editing of existing diagrams, rather than regenerating the entire diagram.`,applyOperationsOperationsDescription:`List of operations to apply. Each operation has an op field (add_node | connect | rename_node | delete_node) and corresponding parameters.`,applyOperationsOpDescription:`Operation type.`,applyOperationsIdDescription:`Logical ID when adding a node, optional. If provided, it will be used as the id of the node's text element, and can be referenced later by this ID.`,applyOperationsLabelDescription:`Text content displayed when adding a node, for example "Redis Cache" or "Order Service".`,applyOperationsKindDescription:`Node type (such as service/database/cache, etc.), currently only used for semantic hints and does not affect styling.`,applyOperationsNearDescription:`Relative reference node when adding a node, can be a node ID or node text. The new node will be placed near this node.`,applyOperationsFromDescription:`Starting node in connect operation, can be a node ID or node text.`,applyOperationsToDescription:`Terminating node in connect operation, can be a node ID or node text.`,applyOperationsTargetDescription:`Target node (ID or text) for rename_node/delete_node operations.`,applyOperationsNewLabelDescription:`New text label for rename_node operation.`,createDiagramDescription:`Directly create Excalidraw diagram elements. The main Agent can generate an element array and add it to the canvas.`,createDiagramElementsDescription:`Excalidraw element array. Each element only needs to include core fields (type, x, y, width, height, etc.), and the system will automatically supplement other required fields.`,createDiagramModeDescription:`Add mode: append (append to existing elements) or replace (replace all elements).`,appendDiagramDescription:`Append Excalidraw diagram elements to the canvas. Only appends, does not replace existing elements.`,appendDiagramElementsDescription:`Excalidraw element array. Each element only needs to include core fields (type, x, y, width, height, etc.), and the system will automatically supplement other required fields.`,aiAppendDiagramDescription:`Generate and append Excalidraw diagram elements to the canvas via AI. Only appends, does not replace existing elements.`,aiAppendDiagramPromptDescription:`Description of the diagram content to generate.`,elementsRequired:`elements parameter must be an array containing at least one element.`}},drawio:{title:`Draw.io Diagram Editor`,loading:`Loading editor...`,newFile:`New Draw.io diagram`,saving:`Saving...`,saved:`Saved`,saveError:`Save failed`,edited:`Unsaved changes`,saveNow:`Save now`,uriRequired:`URI is required`,tools:{noCanvas:`No Draw.io canvas is currently available. Please open a Draw.io file with a canvas and try again.`,emptyCanvas:`The current canvas is empty and cannot be analyzed.`,promptRequired:`prompt cannot be empty.`,analysisFailed:`Error analyzing diagram, please try again.`,generateDiagramDescription:`Generate a new Draw.io diagram based on natural language description and write it to the current canvas. Suitable for creating flowcharts, architecture diagrams, UML diagrams, etc. from scratch.`,generateDiagramPromptDescription:`Description of the diagram you want, for example "a three-tier Web system architecture diagram with frontend, backend, and database".`,generateDiagramModeDescription:`append=append elements to the existing diagram, replace=clear the current canvas and keep only the new diagram.`,analyzeDescription:`Analyze the main nodes and connection relationships in the current Draw.io canvas to understand the existing diagram structure. Returns node, edge information and diagram summary.`,applyOperationsDescription:`Apply a set of semantic modification operations to the current Draw.io diagram (e.g., add node, connect arrow, rename node, or delete node). Suitable for small-step editing of existing diagrams rather than regenerating the entire diagram.`,applyOperationsOperationsDescription:`List of operations to apply. Each operation has an op field (add_node | connect | rename_node | delete_node) and corresponding parameters.`,applyOperationsOpDescription:`Operation type.`,applyOperationsIdDescription:`Logical ID when adding a node, optional. If provided, it will be used as the id of the node, and can be referenced later by this ID.`,applyOperationsLabelDescription:`Text content displayed when adding a node, for example "Redis Cache" or "Order Service".`,applyOperationsKindDescription:`Node type (such as service/database/cache, etc.), currently used for semantic hints and affects styling.`,applyOperationsNearDescription:`Relative reference node when adding a node, can be a node ID or node text. The new node will be placed near this node.`,applyOperationsFromDescription:`Starting node in connect operation, can be a node ID or node text.`,applyOperationsToDescription:`Terminating node in connect operation, can be a node ID or node text.`,applyOperationsTargetDescription:`Target node (ID or text) for rename_node/delete_node operations.`,applyOperationsNewLabelDescription:`New text label for rename_node operation.`,operationsRequired:`operations cannot be empty.`,invalidOperation:`Invalid operation object.`,addNodeLabelRequired:`add_node operation requires a label.`,connectFromToRequired:`connect operation requires from and to.`,connectNodeNotFound:`connect operation did not find the corresponding from/to node, please confirm that the node text or ID is correct.`,renameTargetLabelRequired:`rename_node requires target and newLabel.`,renameNodeNotFound:`rename_node did not find the target node, please confirm that target is the correct node text or ID.`,deleteTargetRequired:`delete_node requires a target.`,unknownOperationType:`Unknown operation type: {{type}}`,applyOperationsFailed:`Error applying operations, please try again.`}},story:{loadDataFailed:`Failed to Load Data`,loadDataFailedDesc:`Unable to load saved data, please check your storage settings.`,error:`Error`,enterApiKey:`Please enter OpenAI API key`,enterContent:`Please enter content`,generateFailed:`Generation Failed`,generateFailedDesc:`Unable to generate AI response, please check your API key and network connection.`,selectDirection:`Please select a direction`},community:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load community data`,error:`Error`,enterContent:`Please enter content`,user:`User`,publishSuccess:`Published Successfully`,publishSuccessDesc:`Post has been published to the community`,publishNewPost:`Publish New Post`,shareYourThoughts:`Share your thoughts...`,writeSomething:`Write something...`,publish:`Publish`},resume:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load saved data`,error:`Error`,enterApiKey:`Please enter OpenAI API key`,enterContent:`Please enter content`},quotes:{loadFailed:`Load Failed`,loadFailedDesc:`Unable to load saved data`,error:`Error`,enterApiKey:`Please enter OpenAI API key`},thoughts:{placeholder:`Record your thoughts...`,confirmDelete:`Are you sure you want to delete this record?`,delete:`Delete`,noRecords:`No records yet`,startWriting:`Start writing your first thought...`},meta:{title:`Gitary - Notion-like editing + Excalidraw drawing for your Git repositories`,description:`Bring Notion-style powerful editing experience and Excalidraw drawing capabilities to your Git repositories. Support GitHub, Gitee, GitCode. Zero intermediate storage, complete data ownership. Notion-like editing + Excalidraw drawing + Git's data control = perfect knowledge management.`,keywords:`Notion-like,Notion alternative,Notion-style,Git notes,GitHub notes,Gitee notes,GitCode notes,Markdown editor,knowledge management,version control,open source notes,data ownership,Git knowledge base`},search:{placeholder:`Search files or content…`,selectSpaceFirst:`Select a space first`,searching:`Searching…`,results:`results`,noSpace:`Please select a space first`,noQuery:`Enter keywords to search files or content`,noQueryDesc:`Supports filename and content search`,noResults:`No matching results found`,noResultsDesc:`Try using different keywords or rebuild index`,reindex:`Rebuild Index`,indexing:`Indexing`,indexStale:`Index may be outdated, click to accept current baseline`,indexNormal:`Index status normal`,navigation:`Navigate`,open:`Open`,close:`Close`,openSearch:`Open Search`,openFile:`Open {{path}}`,noFocusedSpaceToIndex:`No focused space to index`,noFocusedSpaceToSearch:`No focused space to search`,indexedSuccess:`Indexed {{indexed}}, removed {{removed}}`,foundHits:`Found {{total}} hits for '{{query}}'`},browserExtension:{name:`Browser Extension`,title:`Gitary Companion`,description:`Browser extension that lets you jump to Gitary from GitHub, Gitee, and GitCode repository pages with one click`},toolInvocation:{error:`Error`,expand:`Expand tool details`,collapse:`Collapse tool details`}}}},iv={zh:`zh-CN`,en:`en`},av={ogTitle:`meta[property="og:title"]`,ogDescription:`meta[property="og:description"]`,description:`meta[name="description"]`,keywords:`meta[name="keywords"]`,twitterTitle:`meta[name="twitter:title"]`,twitterDescription:`meta[name="twitter:description"]`},ov=e=>{let t=iv[e]||iv.zh;document.documentElement.setAttribute(`lang`,t)},sv=(e,t)=>{let n=document.querySelector(e);n&&n.setAttribute(`content`,t)},cv=e=>{let t=t=>{let n=t.split(`.`),r=rv[e]?.translation;if(!r)return t;let i=r;for(let e of n)if(typeof i==`object`&&i&&e in i)i=i[e];else return t;return typeof i==`string`?i:t},n=t(`meta.title`),r=t(`meta.description`),i=t(`meta.keywords`);document.title=n,sv(av.ogTitle,n),sv(av.ogDescription,r),sv(av.description,r),sv(av.twitterTitle,n),sv(av.twitterDescription,r),sv(av.keywords,i)};rg.use(nv).use(Sg).init({resources:rv,fallbackLng:`zh`,supportedLngs:[`zh`,`en`],defaultNS:`translation`,interpolation:{escapeValue:!1},detection:{order:[`localStorage`,`navigator`],caches:[`localStorage`],lookupLocalStorage:`i18nextLng`},react:{useSuspense:!1}}).then(()=>{let e=rg.language||`zh`;ov(e),cv(e)}),rg.on(`languageChanged`,e=>{ov(e),cv(e),window.location.reload()});var lv=rg;function J(e,t){return lv.t(e,t)}const uv=new class{storageKey=`authInfo-v2`;authProviders=[];authProvidersChange$=new pt;AuthRecords=Vs(`AuthRecords`,[],e=>{let{AuthRecords$:t,setAuthRecords:n,getAuthRecords:r}=e,i=()=>{let e=M_(localStorage.getItem(this.storageKey),void 0);e&&n(e)};i(),t.pipe(Ms(1)).subscribe(e=>{localStorage.setItem(this.storageKey,JSON.stringify(e))});let a=e=>{let n=t.pipe(Ms(1)).subscribe(e);return()=>n.unsubscribe()},o=e=>{n(r().filter(t=>t.id!==e))},s=e=>{r().find(t=>t.id===e.id)?n(r().map(t=>t.id===e.id?e:t)):n([...r(),e])},c=e=>r().find(t=>t.id===e);return{load:i,onChange:a,removeRecord:o,addRecord:s,getRecord:c,useRecord:e=>{let[n,r]=(0,V.useState)(c(e));return j_(()=>t.pipe(os(t=>t.find(t=>t.id===e)),Ts()),e=>{r(e)}),n}}});getAuthRecords=this.AuthRecords.getAuthRecords;setAuthRecords=this.AuthRecords.setAuthRecords;useAuthRecords=this.AuthRecords.useAuthRecords;authRecords$=this.AuthRecords.AuthRecords$;removeAuthRecord=this.AuthRecords.removeRecord;onAuthRecordsChange=this.AuthRecords.onChange;addAuthRecord=this.AuthRecords.addRecord;getAuthRecord=this.AuthRecords.getRecord;useAuthRecord=this.AuthRecords.useRecord;saveAuthInfo=e=>{this.addAuthRecord({...e,id:this.generateAuthId(e)})};generateAuthId=e=>`${e.platform}-${e.username}`;getAnyAuthInfo=(e,t)=>this.getAuthRecords().find(t=>t.platform===e);getAuthInfo=(e,t)=>this.getAuthRecords().find(n=>n.platform===e&&n.username===t);authenticate=async e=>{let{platform:t,username:n,repo:r,needConfirm:i}=e,a=this.authProviders.find(e=>e.platform===t);if(!a){q.notificationService.error(J(`auth.unsupportedPlatform`,{platform:t}));return}await a.authenticate({username:n,repo:r,needConfirm:i})};registerAuthProvider=e=>{this.authProviders.push(e),this.authProvidersChange$.next(this.authProviders)};onAuthProvidersChange=e=>{let t=this.authProvidersChange$.subscribe(e);return()=>t.unsubscribe()};hasReadPermission=(e,t)=>{let n=this.getAnyAuthInfo(e,t);return!!n&&this.checkSessionValid(n)};isSessionValid=(e,t)=>{let n=this.getAuthInfo(e,t);return this.checkSessionValid(n)};checkSessionValid(e){return!e||!e.accessToken?!1:e.expirationTime?e.createdAt?(e.createdAt+e.expirationTime)*1e3>Date.now():!1:!0}tryRefreshAuthInfo=async(e,t)=>{let n=this.getAuthInfo(e,t);if(!n)return;let r=this.authProviders.find(t=>t.platform===e);if(r&&r.refresh&&n.refreshToken)return await r.refresh({...n,refreshToken:n.refreshToken})};hasWritePermission=(e,t)=>{let n=this.getAuthInfo(e,t);return!!n&&this.checkSessionValid(n)};useAuthProviders=()=>{let[e,t]=(0,V.useState)(this.authProviders);return j_(()=>this.authProvidersChange$,()=>{t(this.authProviders)}),{authProviders:e}}},dv=new class{platforms=new Map;register(e){this.platforms.set(e.id,e)}getPlatform(e){return this.platforms.get(e)}getPlatforms(){return Array.from(this.platforms.values())}},fv={LastFocusedSpaceId:`ui:lastFocusedSpaceId`},pv={get(e){try{return localStorage.getItem(e)??void 0}catch{return}},set(e,t){try{localStorage.setItem(e,t)}catch{}},remove(e){try{localStorage.removeItem(e)}catch{}},getJSON(e){let t=this.get(e);if(t)try{return JSON.parse(t)}catch{return}},setJSON(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}},mv=new class e{static LAST_FOCUSED_SPACE_KEY=fv.LastFocusedSpaceId;spaceStore=Lg({initialState:[],persistConfig:{name:`spaces`,type:`LocalStorage`}});setSpaces=e=>{this.spaceStore.getActions().init(e)};useSpaces=()=>{let[e,t]=(0,V.useState)(this.spaceStore.getData());return(0,V.useEffect)(()=>{this.spaceStore.reduxStore.subscribe(()=>{t(this.spaceStore.getData())})},[]),e};getSpaceStore=()=>this.spaceStore;getSpaces=()=>this.spaceStore.getData();onLoad=e=>this.spaceStore.on(`load`,e);constructor(){q.registry.set(`spaceStore`,this.spaceStore),this.spaceStore.reduxStore.subscribe(()=>{q.eventBus.emit(Ml.Space.SpacesChanged,this.spaceStore.getData())}),A_.onCurrentViewIdChanged(t=>{t&&pv.set(e.LAST_FOCUSED_SPACE_KEY,t)}),this.spaceStore.waitUtilLoaded(()=>{let t=pv.get(e.LAST_FOCUSED_SPACE_KEY);t&&this.spaceStore.getRecord(t)&&setTimeout(()=>this.focusSpace(t),0)})}refreshAuth=e=>new Promise(t=>{let n=this.spaceStore.getRecord(e);if(!n.auth)return t(!1);D_({refreshToken:n.auth?.refresh_token}).then(e=>{this.spaceStore.getActions().update({...n,auth:e}),t(!0)}).catch(e=>{console.log(`auth error:`,e),t(!1)})});login=e=>{let t=this.spaceStore.getRecord(e);q.modalService.createModal({title:J(`space.loginTo`,{platform:t.platform}),content:(0,H.jsx)(kg,{spaceId:e}),footer:!1}).open()};redirectAuthPage=e=>{q.eventBus.emit(Ml.RequestRedirectAuthPage,e)};isAuthorized=e=>{let t=this.spaceStore.getRecord(e);return t?uv.hasReadPermission(t.platform,t.owner):!1};useAutoRefreshAuth=(e,t=1)=>{let n=this.spaceStore.getRecord(e),r=uv.getAnyAuthInfo(n?.platform||``),i=uv.useAuthRecord(uv.generateAuthId({platform:r?.platform||``,username:r?.username||``})),[a,o]=(0,V.useState)(0);(0,V.useEffect)(()=>{uv.isSessionValid(i?.platform||``,i?.username||``)||a<t&&uv.tryRefreshAuthInfo(i?.platform||``,i?.username||``).then(e=>{o(a+1)}).catch(e=>{console.log(`tryRefreshAuthInfo error:`,e),o(a+1)})},[i])};usePermissions=e=>{let t=this.spaceStore.getRecord(e);if(!t)return{hasReadPermission:!1,hasWritePermission:!1};if([`idb`].includes(t.platform))return{hasReadPermission:!0,hasWritePermission:!0};let[n,r]=(0,V.useState)(uv.hasReadPermission(t.platform,t.owner)),[i,a]=(0,V.useState)(uv.hasWritePermission(t.platform,t.owner));return(0,V.useEffect)(()=>{uv.onAuthRecordsChange(()=>{r(uv.hasReadPermission(t.platform,t.owner)),a(uv.hasWritePermission(t.platform,t.owner))})},[]),{hasReadPermission:n,hasWritePermission:i}};getSpace=e=>this.spaceStore.getRecord(e);getSpaceByInfo=e=>{let t=oh.generateSpaceId(e.platform,e.owner,e.repo);return this.spaceStore.getRecord(t)};updateSpace=e=>{this.spaceStore.getActions().update(e)};addSpace=(e,t)=>{let{platform:n,owner:r,repo:i,readonly:a}=e,o=this.spaceStore,s=oh.generateSpaceId(n,r,i),{focus:c,silent:l}=t||{},u=o.getRecord(s);return o.waitUtilLoaded(()=>{o.getActions().upsert({...e,id:s})}),u?l||q.notificationService.success(J(`space.spaceExists`)):l||q.notificationService.success(J(`space.spaceAdded`)),c&&this.focusSpace(s),{platform:n,owner:r,repo:i,id:s,readonly:a}};focusSpace=e=>{A_.focus(e),setTimeout(()=>{A_.trigger(e)},100)};getFocusedSpace=()=>{let e=A_.getCurrentViewId();if(e)return this.spaceStore.getRecord(e)};useFocusedSpace=()=>{let e=A_.useCurrentViewId();return this.spaceStore.getRecord(e)};getFocusedSpace$=()=>A_.getCurrentViewId$().pipe(Ns(e=>Rg(()=>this.spaceStore.getRecord(e),t=>this.spaceStore.reduxStore.subscribe(()=>{t(this.spaceStore.getRecord(e))}))));parseRepoUrl=e=>{try{let t=new URL(e),n=Array.from(dv.getPlatforms()).find(e=>e.hostname===t.hostname);if(!n)return{};let[r,i,...a]=t.pathname.replace(/^\/|\/$/g,``).split(`/`);return!r||!i||a.length>0?{}:{platform:n?.id||``,owner:r||``,repo:(i||``).replace(/\.git$/,``)}}catch{return{platform:``,owner:``,repo:``}}};subscribeSpaces=e=>{e(this.spaceStore.getData()),this.spaceStore.reduxStore.subscribe(()=>{e(this.spaceStore.getData())})}};var hv=`# 欢迎使用 Gitary

**Notion-like 编辑 + AI 智能画图 + 全局 AI 助手，运行在你的 Git 仓库上**

Gitary 是一个强大的知识管理工具，将 Notion 风格的编辑体验、AI 智能画图和全局 AI 助手带到你的 Git 仓库中。

## 🚀 核心功能

- **📝 Notion-like 编辑**：所见即所得的 Markdown 编辑器，支持数学公式、代码高亮
- **🎨 专业图表绘制**：支持 Excalidraw 和 Draw.io，绘制流程图、架构图、UML 图等
- **🤖 AI 智能画图**：用自然语言描述，AI 自动生成 Excalidraw 图表
- **💬 全局 AI 助手**：智能助手集成工具，可以操作文件、图表和工作区
- **🔄 Git 集成**：笔记直接存储在 Git 仓库，享受版本控制和云端同步
- **🔐 数据所有权**：完全的数据控制权，数据在你的 Git 仓库中

## 💡 快速开始

1. **创建笔记**：在文件树中右键创建新的 Markdown 文件
2. **使用 Excalidraw**：创建 \`.excalidraw.json\` 文件开始画图
3. **使用 Draw.io**：创建 \`.drawio\` 文件创建专业图表（流程图、UML 图等）
4. **AI 生成图表**：在 Excalidraw 中打开 AI 助手，用自然语言描述生成图表
4. **全局 AI 助手**：点击侧边栏的 AI 图标，随时获取智能帮助
5. **连接 Git 仓库**：查看「连接-Git-仓库.md」了解如何连接 GitHub/Gitee

## 📚 更多文档

- **Markdown 教程**：查看「Markdown-教程.md」学习 Markdown 语法
- **连接 Git 仓库**：查看「连接-Git-仓库.md」了解如何连接 GitHub/Gitee
- **Excalidraw 示例**：打开「Excalidraw-示例.excalidraw.json」查看画图示例
- **Draw.io 示例**：打开「Draw.io-示例.drawio」查看专业图表示例
`,gv=`# Welcome to Gitary

**Notion-like editing + AI-powered Excalidraw drawing + Global AI Assistant for your Git repositories**

Gitary is a powerful knowledge management tool that brings Notion-style editing experience, AI-powered diagram generation, and a global AI assistant to your Git repositories.

## 🚀 Core Features

- **📝 Notion-like Editing**: WYSIWYG Markdown editor with support for math formulas and code highlighting
- **🎨 Professional Diagramming**: Support for Excalidraw and Draw.io to create flowcharts, architecture diagrams, UML diagrams, and more
- **🤖 AI-Powered Diagram Generation**: Describe in natural language, AI automatically generates Excalidraw diagrams
- **💬 Global AI Assistant**: Intelligent assistant with tool integration, can operate files, diagrams, and workspace
- **🔄 Git Integration**: Notes stored directly in Git repositories, enjoy version control and cloud synchronization
- **🔐 Data Ownership**: Complete data control, your data stays in your Git repositories

## 💡 Quick Start

1. **Create Notes**: Right-click in the file tree to create new Markdown files
2. **Use Excalidraw**: Create \`.excalidraw.json\` files to start drawing
3. **Use Draw.io**: Create \`.drawio\` files to create professional diagrams (flowcharts, UML diagrams, etc.)
4. **AI Diagram Generation**: Open AI assistant in Excalidraw, describe in natural language to generate diagrams
4. **Global AI Assistant**: Click the AI icon in the sidebar for intelligent help anytime
5. **Connect Git Repository**: Check "Connect-Git-Repository.md" to learn how to connect GitHub/Gitee

## 📚 More Documentation

- **Markdown Tutorial**: Check "Markdown-Tutorial.md" to learn Markdown syntax
- **Connect Git Repository**: Check "Connect-Git-Repository.md" to learn how to connect GitHub/Gitee
- **Excalidraw Example**: Open "Excalidraw-Example.excalidraw.json" to see drawing examples
- **Draw.io Example**: Open "Draw.io-Example.drawio" to see professional diagram examples
`,_v=`# 连接 Gitee/GitHub 仓库

## 快速开始

将你的 Gitee 或 GitHub 仓库连接为工作空间，让笔记存储在 Git 仓库中，享受版本控制和云端同步。

## 连接步骤

### 1. 打开添加工作空间菜单

点击左侧边栏的 **加号 (+)** 按钮，打开添加工作空间菜单。

### 2. 选择平台

在菜单中选择 **GitHub** 或 **Gitee**。

### 3. 授权登录

- 如果尚未授权，点击 **"去授权"** 按钮
- 系统会跳转到对应平台的授权页面
- 完成授权后，会自动返回应用

### 4. 选择仓库

- 授权成功后，展开平台菜单
- 在仓库列表中选择你想要连接的仓库
- 点击仓库名称即可添加为工作空间

## 注意事项

- 首次连接需要授权，授权后可以访问你的所有仓库
- 可以选择任意公开或私有仓库作为工作空间
- 支持多个仓库同时作为工作空间使用
- 笔记文件会直接存储在仓库中，支持 Git 版本控制

## 开始使用

连接成功后，你可以在左侧文件树中看到仓库文件，开始创建和编辑你的笔记！

## 🤖 AI 功能

连接 Git 仓库后，你还可以使用 Gitary 的强大 AI 功能：

- **AI 智能画图**：在 Excalidraw 文件中，打开 AI 助手，用自然语言描述即可自动生成图表
- **全局 AI 助手**：点击侧边栏的 AI 图标，随时获取智能帮助，AI 可以：
  - 读取和搜索文件
  - 生成和编辑 Excalidraw 图表
  - 分析代码和文档
  - 提供上下文感知的建议

所有 AI 生成的内容都会直接保存到你的 Git 仓库中，享受完整的版本控制！

`,vv=`# Connect Gitee/GitHub Repository

## Quick Start

Connect your Gitee or GitHub repository as a workspace to store notes in Git repositories, enjoying version control and cloud synchronization.

## Connection Steps

### 1. Open Add Workspace Menu

Click the **plus (+)** button in the left sidebar to open the add workspace menu.

### 2. Select Platform

Choose **GitHub** or **Gitee** from the menu.

### 3. Authorize Login

- If not yet authorized, click the **"Authorize"** button
- The system will redirect to the platform's authorization page
- After completing authorization, you will automatically return to the application

### 4. Select Repository

- After successful authorization, expand the platform menu
- Select the repository you want to connect from the repository list
- Click the repository name to add it as a workspace

## Notes

- First-time connection requires authorization, after which you can access all your repositories
- You can choose any public or private repository as a workspace
- Multiple repositories can be used as workspaces simultaneously
- Note files are stored directly in the repository, supporting Git version control

## Get Started

After successful connection, you can see the repository files in the left file tree and start creating and editing your notes!

## 🤖 AI Features

After connecting your Git repository, you can also use Gitary's powerful AI features:

- **AI-Powered Diagram Generation**: In Excalidraw files, open the AI assistant and describe in natural language to automatically generate diagrams
- **Global AI Assistant**: Click the AI icon in the sidebar for intelligent help anytime. The AI can:
  - Read and search files
  - Generate and edit Excalidraw diagrams
  - Analyze code and documents
  - Provide context-aware suggestions

All AI-generated content is saved directly to your Git repository, enjoying full version control!

`,yv=`# Markdown 简介与使用教程

## 1. Markdown 简介

Markdown 是一种轻量级标记语言，使用简洁的语法进行文本格式化，使得文档编写者能够专注于内容而非格式，特别适合技术文档、笔记和博客的编写。

## 2. Markdown 基本语法

### 标题 (Headers)

编写示例：

\`\`\`markdown
# 一级标题
## 二级标题
### 三级标题
\`\`\`

渲染结果：

---

# 一级标题

## 二级标题

### 三级标题

### 段落与换行

编写示例：

\`\`\`markdown
这是一个段落。  
这是同一段落的下一行。  
\`\`\`

渲染结果： 这是一个段落。\\
这是同一段落的下一行。

### 强调 (Emphasis)

编写示例：

\`\`\`markdown
*斜体* 和 **加粗** 和 _下划线_
\`\`\`

渲染结果： *斜体* 和 **加粗** 和 *下划线*

### 删除线 (Strikethrough)

编写示例：

\`\`\`markdown
~~删除线~~
\`\`\`

渲染结果： ~~删除线~~

### 列表

编写示例：

\`\`\`markdown
- 无序列表项1
- 无序列表项2

1. 有序列表项1
2. 有序列表项2
\`\`\`

渲染结果：

- 无序列表项1

- 无序列表项2

  1. 有序列表项1
  2. 有序列表项2

### 链接与图片

编写示例：

\`\`\`markdown
[链接文本](https://www.baidu.com)
![图片描述](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)
\`\`\`

渲染结果： [链接文本](https://baidu.com)\\
![图片描述](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)

### 引用 (Blockquotes)

编写示例：

\`\`\`markdown
> 这是一个引用。
\`\`\`

渲染结果：

> 这是一个引用。

### 代码块 (Code Blocks)

编写示例：

\`\`\`markdown
\`行内代码\`

\\\`\`\`javascript
// 多行代码块
console.log("Hello, World!");
\\\`\`\`
\`\`\`

渲染结果： \`行内代码\`

\`\`\`javascript
// 多行代码块
console.log("Hello, World!");
\`\`\`

### 分割线

编写示例：

\`\`\`markdown
---
\`\`\`

渲染结果

---

## 3. Markdown 高级语法

### 表格 (Tables)

编写示例：

\`\`\`markdown
| 头部1 | 头部2 | 头部3 |
|-------|-------|-------|
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |
\`\`\`

渲染结果：

| 头部1 | 头部2 | 头部3 |
|-------|-------|-------|
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |

### 任务列表 (Task Lists)

编写示例：

\`\`\`markdown
- [x] 完成任务
- [ ] 未完成任务
\`\`\`

渲染结果：

- [x] 完成任务

- [ ] 未完成任务

### 公式 (Math)

编写示例：

\`\`\`markdown
行内公式：$E = mc^2$

块级公式：
$$
\\sum_{i=1}^{n} a_i^2
$$
\`\`\`

渲染结果： 行内公式：$E = mc^2$

块级公式：

$$
\\sum_{i=1}^{n} a_i^2
$$

### Mermaid 图表 (Mermaid Diagrams)

我们的编辑器支持 Mermaid 图表，可以绘制流程图、序列图、甘特图等多种图表类型。

#### 流程图示例：

\`\`\`mermaid
flowchart TD
    A[开始] --> B{判断条件}
    B -->|是| C[执行操作1]
    B -->|否| D[执行操作2]
    C --> E[结束]
    D --> E
\`\`\`

#### 序列图示例：

\`\`\`mermaid
sequenceDiagram
    participant 用户
    participant 前端
    participant 后端
    participant 数据库
    
    用户->>前端: 发送请求
    前端->>后端: 处理请求
    后端->>数据库: 查询数据
    数据库-->>后端: 返回结果
    后端-->>前端: 返回数据
    前端-->>用户: 显示结果
\`\`\`

#### 甘特图示例：

\`\`\`mermaid
gantt
    title 项目开发计划
    dateFormat YYYY-MM-DD
    section 设计阶段
    需求分析 :done, des1, 2024-01-01, 2024-01-05
    原型设计 :active, des2, 2024-01-06, 2024-01-10
    section 开发阶段
    前端开发 :dev1, 2024-01-11, 2024-01-20
    后端开发 :dev2, 2024-01-11, 2024-01-20
    section 测试阶段
    功能测试 :test1, 2024-01-21, 2024-01-25
\`\`\`

#### 类图示例：

\`\`\`mermaid
classDiagram
    class 用户 {
        +String 姓名
        +String 邮箱
        +登录()
        +登出()
    }
    class 文章 {
        +String 标题
        +String 内容
        +发布()
        +编辑()
    }
    用户 "1" --> "*" 文章 : 创建
\`\`\`

#### 状态图示例：

\`\`\`mermaid
stateDiagram-v2
    [*] --> 待处理
    待处理 --> 进行中: 开始处理
    进行中 --> 已完成: 完成任务
    进行中 --> 待处理: 暂停
    已完成 --> [*]
\`\`\`

---

`,bv=`# Markdown Introduction and Tutorial

## 1. Markdown Introduction

Markdown is a lightweight markup language that uses simple syntax for text formatting, allowing document writers to focus on content rather than format. It is particularly suitable for technical documentation, notes, and blog writing.

## 2. Markdown Basic Syntax

### Headers

Example:

\`\`\`markdown
# Level 1 Header
## Level 2 Header
### Level 3 Header
\`\`\`

Rendering result:

---

# Level 1 Header

## Level 2 Header

### Level 3 Header

### Paragraphs and Line Breaks

Example:

\`\`\`markdown
This is a paragraph.  
This is the next line of the same paragraph.  
\`\`\`

Rendering result: This is a paragraph.\\
This is the next line of the same paragraph.

### Emphasis

Example:

\`\`\`markdown
*Italic* and **Bold** and _Underline_
\`\`\`

Rendering result: *Italic* and **Bold** and *Underline*

### Strikethrough

Example:

\`\`\`markdown
~~Strikethrough~~
\`\`\`

Rendering result: ~~Strikethrough~~

### Lists

Example:

\`\`\`markdown
- Unordered list item 1
- Unordered list item 2

1. Ordered list item 1
2. Ordered list item 2
\`\`\`

Rendering result:

- Unordered list item 1

- Unordered list item 2

  1. Ordered list item 1
  2. Ordered list item 2

### Links and Images

Example:

\`\`\`markdown
[Link text](https://www.example.com)
![Image description](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)
\`\`\`

Rendering result: [Link text](https://example.com)\\
![Image description](https://media.istockphoto.com/id/1845512061/photo/cute-domestic-cats-and-dogs-of-various-colors-run-through-a-summer-sunny-meadow.webp?b=1&s=612x612&w=0&k=20&c=_T6TSIRrqjfMbeQv9hrJafXpoj3zI3fgS_hQbg2acs4=)

### Blockquotes

Example:

\`\`\`markdown
> This is a blockquote.
\`\`\`

Rendering result:

> This is a blockquote.

### Code Blocks

Example:

\`\`\`markdown
\`Inline code\`

\\\`\`\`javascript
// Multi-line code block
console.log("Hello, World!");
\\\`\`\`
\`\`\`

Rendering result: \`Inline code\`

\`\`\`javascript
// Multi-line code block
console.log("Hello, World!");
\`\`\`

### Horizontal Rule

Example:

\`\`\`markdown
---
\`\`\`

Rendering result

---

## 3. Markdown Advanced Syntax

### Tables

Example:

\`\`\`markdown
| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |
\`\`\`

Rendering result:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |

### Task Lists

Example:

\`\`\`markdown
- [x] Completed task
- [ ] Incomplete task
\`\`\`

Rendering result:

- [x] Completed task

- [ ] Incomplete task

### Math Formulas

Example:

\`\`\`markdown
Inline formula: $E = mc^2$

Block formula:
$$
\\sum_{i=1}^{n} a_i^2
$$
\`\`\`

Rendering result: Inline formula: $E = mc^2$

Block formula:

$$
\\sum_{i=1}^{n} a_i^2
$$

### Mermaid Diagrams

Our editor supports Mermaid diagrams, allowing you to create flowcharts, sequence diagrams, Gantt charts, and many other diagram types.

#### Flowchart example:

\`\`\`mermaid
flowchart TD
    A[Start] --> B{Decision}
    B -->|Yes| C[Action 1]
    B -->|No| D[Action 2]
    C --> E[End]
    D --> E
\`\`\`

#### Sequence diagram example:

\`\`\`mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database
    
    User->>Frontend: Send Request
    Frontend->>Backend: Process Request
    Backend->>Database: Query Data
    Database-->>Backend: Return Results
    Backend-->>Frontend: Return Data
    Frontend-->>User: Display Results
\`\`\`

#### Gantt chart example:

\`\`\`mermaid
gantt
    title Project Development Plan
    dateFormat YYYY-MM-DD
    section Design Phase
    Requirements Analysis :done, des1, 2024-01-01, 2024-01-05
    Prototype Design :active, des2, 2024-01-06, 2024-01-10
    section Development Phase
    Frontend Development :dev1, 2024-01-11, 2024-01-20
    Backend Development :dev2, 2024-01-11, 2024-01-20
    section Testing Phase
    Functional Testing :test1, 2024-01-21, 2024-01-25
\`\`\`

#### Class diagram example:

\`\`\`mermaid
classDiagram
    class User {
        +String name
        +String email
        +login()
        +logout()
    }
    class Article {
        +String title
        +String content
        +publish()
        +edit()
    }
    User "1" --> "*" Article : creates
\`\`\`

#### State diagram example:

\`\`\`mermaid
stateDiagram-v2
    [*] --> Pending
    Pending --> InProgress: Start Processing
    InProgress --> Completed: Complete Task
    InProgress --> Pending: Pause
    Completed --> [*]
\`\`\`

---

`,xv=`{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1001,
      "isDeleted": false,
      "id": "title-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 200,
      "y": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#4f46e5",
      "width": 400,
      "height": 80,
      "seed": 1001,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1001,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1002,
      "isDeleted": false,
      "id": "title-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 280,
      "y": 75,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "width": 240,
      "height": 30,
      "seed": 1002,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1002,
      "link": null,
      "locked": false,
      "fontSize": 36,
      "fontFamily": 3,
      "text": "Gitary",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Gitary",
      "lineHeight": 1.25,
      "baseline": 25
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1003,
      "isDeleted": false,
      "id": "subtitle-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 0,
      "y": 150,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 800,
      "height": 25,
      "seed": 1003,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1003,
      "link": null,
      "locked": false,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "类 Notion 编辑 + 专业图表绘制（Excalidraw & Draw.io），运行在你的 Git 仓库上",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "类 Notion 编辑 + 专业图表绘制（Excalidraw & Draw.io），运行在你的 Git 仓库上",
      "lineHeight": 1.25,
      "baseline": 18
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1004,
      "isDeleted": false,
      "id": "feature-1",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e0f2fe",
      "width": 180,
      "height": 120,
      "seed": 1004,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-1-text"
        }
      ],
      "updated": 1004,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1005,
      "isDeleted": false,
      "id": "feature-1-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1005,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1005,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "📝 类 Notion\\n编辑体验\\nWYSIWYG",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-1",
      "originalText": "📝 类 Notion\\n编辑体验\\nWYSIWYG",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1006,
      "isDeleted": false,
      "id": "feature-2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 310,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1006,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-2-text"
        }
      ],
      "updated": 1006,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1007,
      "isDeleted": false,
      "id": "feature-2-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 335,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1007,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1007,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔄 Git 集成\\nGitHub/Gitee\\n零中间存储",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-2",
      "originalText": "🔄 Git 集成\\nGitHub/Gitee\\n零中间存储",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1008,
      "isDeleted": false,
      "id": "feature-3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dbeafe",
      "width": 180,
      "height": 120,
      "seed": 1008,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-3-text"
        }
      ],
      "updated": 1008,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1009,
      "isDeleted": false,
      "id": "feature-3-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1009,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1009,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 VS Code\\n风格界面\\n专业环境",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-3",
      "originalText": "🎨 VS Code\\n风格界面\\n专业环境",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1010,
      "isDeleted": false,
      "id": "feature-4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fce7f3",
      "width": 180,
      "height": 120,
      "seed": 1010,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-4-text"
        }
      ],
      "updated": 1010,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1011,
      "isDeleted": false,
      "id": "feature-4-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1011,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1011,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔍 全文检索\\n快速搜索\\n代码与文档",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-4",
      "originalText": "🔍 全文检索\\n快速搜索\\n代码与文档",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1012,
      "isDeleted": false,
      "id": "feature-5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 290,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dcfce7",
      "width": 220,
      "height": 120,
      "seed": 1012,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-5-text"
        }
      ],
      "updated": 1012,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1013,
      "isDeleted": false,
      "id": "feature-5-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 315,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 170,
      "height": 70,
      "seed": 1013,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1013,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 专业图表\\nExcalidraw & Draw.io\\n流程图 UML 图",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-5",
      "originalText": "🎨 专业图表\\nExcalidraw & Draw.io\\n流程图 UML 图",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1016,
      "isDeleted": false,
      "id": "feature-6",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1016,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-6-text"
        }
      ],
      "updated": 1016,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1017,
      "isDeleted": false,
      "id": "feature-6-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1017,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1017,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🤖 AI 智能\\n画图与助手\\n自然语言生成",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-6",
      "originalText": "🤖 AI 智能\\n画图与助手\\n自然语言生成",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "ellipse",
      "version": 141,
      "versionNonce": 1014,
      "isDeleted": false,
      "id": "advantage-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 250,
      "y": 540,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 300,
      "height": 100,
      "seed": 1014,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": [
        {
          "type": "text",
          "id": "advantage-text"
        }
      ],
      "updated": 1014,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1015,
      "isDeleted": false,
      "id": "advantage-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 300,
      "y": 570,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 200,
      "height": 40,
      "seed": 1015,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1015,
      "link": null,
      "locked": false,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "✅ 完全的数据控制权\\n✅ 无服务依赖",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "advantage-box",
      "originalText": "✅ 完全的数据控制权\\n✅ 无服务依赖",
      "lineHeight": 1.25,
      "baseline": 35
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
`,Sv=`{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1001,
      "isDeleted": false,
      "id": "title-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 200,
      "y": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#4f46e5",
      "width": 400,
      "height": 80,
      "seed": 1001,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "updated": 1001,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1002,
      "isDeleted": false,
      "id": "title-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 280,
      "y": 75,
      "strokeColor": "#ffffff",
      "backgroundColor": "transparent",
      "width": 240,
      "height": 30,
      "seed": 1002,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1002,
      "link": null,
      "locked": false,
      "fontSize": 36,
      "fontFamily": 3,
      "text": "Gitary",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Gitary",
      "lineHeight": 1.25,
      "baseline": 25
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1003,
      "isDeleted": false,
      "id": "subtitle-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 0,
      "y": 150,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 800,
      "height": 25,
      "seed": 1003,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1003,
      "link": null,
      "locked": false,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "Notion-like editing + Professional diagramming (Excalidraw & Draw.io) for your Git repositories",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": null,
      "originalText": "Notion-like editing + Professional diagramming (Excalidraw & Draw.io) for your Git repositories",
      "lineHeight": 1.25,
      "baseline": 18
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1004,
      "isDeleted": false,
      "id": "feature-1",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#e0f2fe",
      "width": 180,
      "height": 120,
      "seed": 1004,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-1-text"
        }
      ],
      "updated": 1004,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1005,
      "isDeleted": false,
      "id": "feature-1-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1005,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1005,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "📝 Notion-like\\nEditor\\nWYSIWYG",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-1",
      "originalText": "📝 Notion-like\\nEditor\\nWYSIWYG",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1006,
      "isDeleted": false,
      "id": "feature-2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 310,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1006,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-2-text"
        }
      ],
      "updated": 1006,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1007,
      "isDeleted": false,
      "id": "feature-2-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 335,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1007,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1007,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔄 Git Integration\\nGitHub/Gitee\\nZero Storage",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-2",
      "originalText": "🔄 Git Integration\\nGitHub/Gitee\\nZero Storage",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1008,
      "isDeleted": false,
      "id": "feature-3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 220,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dbeafe",
      "width": 180,
      "height": 120,
      "seed": 1008,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-3-text"
        }
      ],
      "updated": 1008,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1009,
      "isDeleted": false,
      "id": "feature-3-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 245,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1009,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1009,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 VS Code\\nStyle UI\\nProfessional",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-3",
      "originalText": "🎨 VS Code\\nStyle UI\\nProfessional",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1010,
      "isDeleted": false,
      "id": "feature-4",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 50,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fce7f3",
      "width": 180,
      "height": 120,
      "seed": 1010,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-4-text"
        }
      ],
      "updated": 1010,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1011,
      "isDeleted": false,
      "id": "feature-4-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 75,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1011,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1011,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🔍 Full-Text\\nSearch\\nFast & Accurate",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-4",
      "originalText": "🔍 Full-Text\\nSearch\\nFast & Accurate",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1012,
      "isDeleted": false,
      "id": "feature-5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 290,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#dcfce7",
      "width": 220,
      "height": 120,
      "seed": 1012,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-5-text"
        }
      ],
      "updated": 1012,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1013,
      "isDeleted": false,
      "id": "feature-5-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 315,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 170,
      "height": 70,
      "seed": 1013,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1013,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🎨 Professional\\nDiagramming\\nExcalidraw & Draw.io",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-5",
      "originalText": "🎨 Professional\\nDiagramming\\nExcalidraw & Draw.io",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "rectangle",
      "version": 141,
      "versionNonce": 1016,
      "isDeleted": false,
      "id": "feature-6",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 570,
      "y": 380,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#fef3c7",
      "width": 180,
      "height": 120,
      "seed": 1016,
      "groupIds": [],
      "frameId": null,
      "roundness": {
        "type": 3
      },
      "boundElements": [
        {
          "type": "text",
          "id": "feature-6-text"
        }
      ],
      "updated": 1016,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1017,
      "isDeleted": false,
      "id": "feature-6-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 595,
      "y": 405,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "width": 130,
      "height": 70,
      "seed": 1017,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1017,
      "link": null,
      "locked": false,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "🤖 AI-Powered\\nDiagram & Assistant\\nNatural Language",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "feature-6",
      "originalText": "🤖 AI-Powered\\nDiagram & Assistant\\nNatural Language",
      "lineHeight": 1.25,
      "baseline": 65
    },
    {
      "type": "ellipse",
      "version": 141,
      "versionNonce": 1014,
      "isDeleted": false,
      "id": "advantage-box",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 250,
      "y": 540,
      "strokeColor": "#059669",
      "backgroundColor": "#d1fae5",
      "width": 300,
      "height": 100,
      "seed": 1014,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": [
        {
          "type": "text",
          "id": "advantage-text"
        }
      ],
      "updated": 1014,
      "link": null,
      "locked": false
    },
    {
      "type": "text",
      "version": 141,
      "versionNonce": 1015,
      "isDeleted": false,
      "id": "advantage-text",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "x": 300,
      "y": 570,
      "strokeColor": "#059669",
      "backgroundColor": "transparent",
      "width": 200,
      "height": 40,
      "seed": 1015,
      "groupIds": [],
      "frameId": null,
      "roundness": null,
      "boundElements": null,
      "updated": 1015,
      "link": null,
      "locked": false,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "✅ Complete Data Control\\n✅ No Service Dependency",
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "advantage-box",
      "originalText": "✅ Complete Data Control\\n✅ No Service Dependency",
      "lineHeight": 1.25,
      "baseline": 35
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
`,Cv=`<mxfile host="app.diagrams.net">
  <diagram name="示例图表" id="example-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="欢迎使用 Draw.io" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4f46e5;strokeColor=#1e1e1e;fontColor=#ffffff;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3" value="开始" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4" value="处理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5" value="完成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dcfce7;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="200" as="sourcePoint" />
            <mxPoint x="450" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="320" as="sourcePoint" />
            <mxPoint x="450" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="440" as="sourcePoint" />
            <mxPoint x="450" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="这是一个简单的流程图示例&#xa;你可以使用 Draw.io 创建各种图表：&#xa;• 流程图&#xa;• UML 图&#xa;• 网络图&#xa;• 架构图" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#1e1e1e;align=left;verticalAlign=top;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="400" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

`,wv=`<mxfile host="app.diagrams.net">
  <diagram name="Example Diagram" id="example-diagram">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="Welcome to Draw.io" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4f46e5;strokeColor=#1e1e1e;fontColor=#ffffff;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="250" y="80" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3" value="Start" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4" value="Process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5" value="End" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dcfce7;strokeColor=#1e1e1e;" vertex="1" parent="1">
          <mxGeometry x="340" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="200" as="sourcePoint" />
            <mxPoint x="450" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="320" as="sourcePoint" />
            <mxPoint x="450" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="440" as="sourcePoint" />
            <mxPoint x="450" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="9" value="This is a simple flowchart example&#xa;You can use Draw.io to create various diagrams:&#xa;• Flowcharts&#xa;• UML diagrams&#xa;• Network diagrams&#xa;• Architecture diagrams" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#1e1e1e;align=left;verticalAlign=top;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="400" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

`,Tv=sc.create({scope:`spaceStateCache`,storage:`localStorage`}),Ev=()=>({isIndexedDbReadMeFileInitialized:!1}),Dv=()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`},Ov=()=>Dv()===`en`?gv:hv,kv=()=>Dv()===`en`?vv:_v,Av=()=>Dv()===`en`?bv:yv,jv=()=>Dv()===`zh`?xv:Sv,Mv=()=>Dv()===`zh`?Cv:wv;const Nv=Lm({initilize(e){mv.getSpaceStore().waitUtilLoaded(async()=>{let t={platform:`idb`,owner:`root`,repo:`home`};mv.addSpace(t,{silent:!0});let n=mv.getSpaceByInfo(t);if(n){let{isIndexedDbReadMeFileInitialized:t}=Tv.get(n.id,Ev());if(!t){let t=Ov(),r=kv(),i=async(t,r)=>{let i;try{await e.fs.readFile(oh.getUri(n.id,t)),i=!0}catch{i=!1}if(!i){let i=new TextEncoder().encode(r);await e.fs.writeFile(oh.getUri(n.id,t),i,{overwrite:!0,create:!0})}},a=Dv(),o=a===`en`?`/Connect-Git-Repository.md`:`/连接-Git-仓库.md`,s=a===`en`?`/Markdown-Tutorial.md`:`/Markdown-教程.md`,c=a===`zh`?`/Excalidraw-示例.excalidraw.json`:`/Excalidraw-Example.excalidraw.json`,l=a===`zh`?`/Draw.io-示例.drawio`:`/Draw.io-Example.drawio`,u=Av(),d=jv(),f=Mv();await i(`/README.md`,t),await i(o,r),await i(s,u),await i(c,d),await i(l,f),Tv.set(n.id,{...Tv.get(n.id,Ev()),isIndexedDbReadMeFileInitialized:!0}),e.eventBus.emit(Ml.ReadMeFileInitialized,{spaceId:n.id})}}})}});var Pv=()=>{let e=window.location.hash.match(/\/https:\/\/([^.]+)\.com\/([^/]+)\/([^/]+)/);if(!e)return null;let[,t,n,r]=e;return{platform:t,owner:n,repo:r}},Fv=()=>{let e=new xo(Pv());return window.addEventListener(`hashchange`,()=>e.next(Pv())),e};const Iv=Lm({initilize(e){Fv().subscribe(e=>{if(!e)return;let{platform:t,owner:n,repo:r}=e;mv.focusSpace(oh.generateSpaceId(t,n,r))}),Rg(()=>mv.getFocusedSpace(),e=>mv.getFocusedSpace$().subscribe(e)).subscribe(e=>{if(!e)return;let{platform:t,owner:n,repo:r}=e,i=`/${location.search}#/https://${t}.com/${n}/${r}`;window.location.pathname!==i&&window.history.pushState(null,``,i)})}});var Lv=class{openers=[];listeners=[];open=async(e,t)=>{if(!t||!t.path)return;let n=t.path.split(`/`).pop(),r=this.getMatchedOpeners(n)[0];if(r){let n=oh.getUri(e,t.path).toString();r.init(n),yr.isMobile()&&q.commandService.executeCommand(`client:toggleHome`)}};openWith=async(e,t,n)=>{if(!t||!t.path)return;let r=this.openers.find(e=>e.id===n);if(!r)return;let i=t.path.split(`/`).pop();if(!this.match(r,i))return;let a=oh.getUri(e,t.path).toString();r.init(a),yr.isMobile()&&q.commandService.executeCommand(`client:toggleHome`)};register=e=>{if(!e.id)return!1;this.openers=this.openers.filter(t=>t.id!==e.id),this.openers.push(e);for(let t of this.listeners)t(e);return!0};getOpeners=()=>[...this.openers];getMatchedOpeners=e=>this.openers.filter(t=>this.match(t,e)).sort((e,t)=>(t.priority||0)-(e.priority||0));subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)});match=(e,t)=>typeof e.match==`function`?e.match(t):typeof e.match[0]==`string`?!!e.match.find(e=>t.endsWith(e)):e.match[0]instanceof RegExp?!!e.match.find(e=>e.test(t)):!1};const Rv=new Lv;var zv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`rounded-lg border bg-card text-card-foreground shadow-sm`,e),...t}));zv.displayName=`Card`;var Bv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`flex flex-col space-y-1.5 p-6`,e),...t}));Bv.displayName=`CardHeader`;var Vv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`text-2xl font-semibold leading-none tracking-tight`,e),...t}));Vv.displayName=`CardTitle`;var Hv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`text-sm text-muted-foreground`,e),...t}));Hv.displayName=`CardDescription`;var Uv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`p-6 pt-0`,e),...t}));Uv.displayName=`CardContent`;var Wv=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`div`,{ref:n,className:G(`flex items-center p-6 pt-0`,e),...t}));Wv.displayName=`CardFooter`;const Gv=`RFC3986`,Kv={RFC1738:e=>String(e).replace(/%20/g,`+`),RFC3986:e=>String(e)};var qv=Array.isArray,Jv=(()=>{let e=[];for(let t=0;t<256;++t)e.push(`%`+((t<16?`0`:``)+t.toString(16)).toUpperCase());return e})(),Yv=1024;const Xv=(e,t,n,r,i)=>{if(e.length===0)return e;let a=e;if(typeof e==`symbol`?a=Symbol.prototype.toString.call(e):typeof e!=`string`&&(a=String(e)),n===`iso-8859-1`)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return`%26%23`+parseInt(e.slice(2),16)+`%3B`});let o=``;for(let e=0;e<a.length;e+=Yv){let t=a.length>=Yv?a.slice(e,e+Yv):a,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r===45||r===46||r===95||r===126||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||i===`RFC1738`&&(r===40||r===41)){n[n.length]=t.charAt(e);continue}if(r<128){n[n.length]=Jv[r];continue}if(r<2048){n[n.length]=Jv[192|r>>6]+Jv[128|r&63];continue}if(r<55296||r>=57344){n[n.length]=Jv[224|r>>12]+Jv[128|r>>6&63]+Jv[128|r&63];continue}e+=1,r=65536+((r&1023)<<10|t.charCodeAt(e)&1023),n[n.length]=Jv[240|r>>18]+Jv[128|r>>12&63]+Jv[128|r>>6&63]+Jv[128|r&63]}o+=n.join(``)}return o};function Zv(e){return!e||typeof e!=`object`?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Qv(e,t){if(qv(e)){let n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}var $v=Object.prototype.hasOwnProperty,ey={brackets(e){return String(e)+`[]`},comma:`comma`,indices(e,t){return String(e)+`[`+t+`]`},repeat(e){return String(e)}},ty=Array.isArray,ny=Array.prototype.push,ry=function(e,t){ny.apply(e,ty(t)?t:[t])},iy=Date.prototype.toISOString,ay={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:`indices`,charset:`utf-8`,charsetSentinel:!1,delimiter:`&`,encode:!0,encodeDotInKeys:!1,encoder:Xv,encodeValuesOnly:!1,format:Gv,formatter:Kv[Gv],indices:!1,serializeDate(e){return iy.call(e)},skipNulls:!1,strictNullHandling:!1};function oy(e){return typeof e==`string`||typeof e==`number`||typeof e==`boolean`||typeof e==`symbol`||typeof e==`bigint`}var sy={};function cy(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){let v=e,y=_,b=0,x=!1;for(;(y=y.get(sy))!==void 0&&!x;){let t=y.get(e);if(b+=1,t!==void 0){if(t===b)throw RangeError(`Cyclic object value`);x=!0}y.get(sy)===void 0&&(b=0)}if(typeof l==`function`?v=l(t,v):v instanceof Date?v=f?.(v):n===`comma`&&ty(v)&&(v=Qv(v,function(e){return e instanceof Date?f?.(e):e})),v===null){if(a)return c&&!h?c(t,ay.encoder,g,`key`,p):t;v=``}if(oy(v)||Zv(v)){if(c){let e=h?t:c(t,ay.encoder,g,`key`,p);return[m?.(e)+`=`+m?.(c(v,ay.encoder,g,`value`,p))]}return[m?.(t)+`=`+m?.(String(v))]}let S=[];if(v===void 0)return S;let C;if(n===`comma`&&ty(v))h&&c&&(v=Qv(v,c)),C=[{value:v.length>0?v.join(`,`)||null:void 0}];else if(ty(l))C=l;else{let e=Object.keys(v);C=u?e.sort(u):e}let w=s?String(t).replace(/\./g,`%2E`):String(t),T=r&&ty(v)&&v.length===1?w+`[]`:w;if(i&&ty(v)&&v.length===0)return T+`[]`;for(let t=0;t<C.length;++t){let y=C[t],x=typeof y==`object`&&y.value!==void 0?y.value:v[y];if(o&&x===null)continue;let w=d&&s?y.replace(/\./g,`%2E`):y,E=ty(v)?typeof n==`function`?n(T,w):T:T+(d?`.`+w:`[`+w+`]`);_.set(e,b);let D=new WeakMap;D.set(sy,_),ry(S,cy(x,E,n,r,i,a,o,s,n===`comma`&&h&&ty(v)?null:c,l,u,d,f,p,m,h,g,D))}return S}function ly(e=ay){if(e.allowEmptyArrays!==void 0&&typeof e.allowEmptyArrays!=`boolean`)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(e.encodeDotInKeys!==void 0&&typeof e.encodeDotInKeys!=`boolean`)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!=`function`)throw TypeError(`Encoder has to be a function.`);let t=e.charset||ay.charset;if(e.charset!==void 0&&e.charset!==`utf-8`&&e.charset!==`iso-8859-1`)throw TypeError(`The charset option must be either utf-8, iso-8859-1, or undefined`);let n=Gv;if(e.format!==void 0){if(!$v.call(Kv,e.format))throw TypeError(`Unknown format option provided.`);n=e.format}let r=Kv[n],i=ay.filter;(typeof e.filter==`function`||ty(e.filter))&&(i=e.filter);let a;if(a=e.arrayFormat&&e.arrayFormat in ey?e.arrayFormat:`indices`in e?e.indices?`indices`:`repeat`:ay.arrayFormat,`commaRoundTrip`in e&&typeof e.commaRoundTrip!=`boolean`)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let o=e.allowDots===void 0?e.encodeDotInKeys?!0:ay.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix==`boolean`?e.addQueryPrefix:ay.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays==`boolean`?!!e.allowEmptyArrays:ay.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel==`boolean`?e.charsetSentinel:ay.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:e.delimiter===void 0?ay.delimiter:e.delimiter,encode:typeof e.encode==`boolean`?e.encode:ay.encode,encodeDotInKeys:typeof e.encodeDotInKeys==`boolean`?e.encodeDotInKeys:ay.encodeDotInKeys,encoder:typeof e.encoder==`function`?e.encoder:ay.encoder,encodeValuesOnly:typeof e.encodeValuesOnly==`boolean`?e.encodeValuesOnly:ay.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate==`function`?e.serializeDate:ay.serializeDate,skipNulls:typeof e.skipNulls==`boolean`?e.skipNulls:ay.skipNulls,sort:typeof e.sort==`function`?e.sort:null,strictNullHandling:typeof e.strictNullHandling==`boolean`?e.strictNullHandling:ay.strictNullHandling}}function uy(e,t={}){let n=e,r=ly(t),i,a;typeof r.filter==`function`?(a=r.filter,n=a(``,n)):ty(r.filter)&&(a=r.filter,i=a);let o=[];if(typeof n!=`object`||!n)return``;let s=ey[r.arrayFormat],c=s===`comma`&&r.commaRoundTrip;i||=Object.keys(n),r.sort&&i.sort(r.sort);let l=new WeakMap;for(let e=0;e<i.length;++e){let t=i[e];r.skipNulls&&n[t]===null||ry(o,cy(n[t],t,s,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}let u=o.join(r.delimiter),d=r.addQueryPrefix===!0?`?`:``;return r.charsetSentinel&&(r.charset===`iso-8859-1`?d+=`utf8=%26%2310003%3B&`:d+=`utf8=%E2%9C%93&`),u.length>0?d+u:``}const dy=`4.104.0`;let fy=!1,py,my,hy,gy,_y,vy,yy,by,xy;function Sy(e,t={auto:!1}){if(fy)throw Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(py)throw Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${py}'\``);fy=t.auto,py=e.kind,my=e.fetch,e.Request,e.Response,e.Headers,hy=e.FormData,e.Blob,gy=e.File,_y=e.ReadableStream,vy=e.getMultipartRequestOptions,yy=e.getDefaultAgent,by=e.fileFromPath,xy=e.isFsReadStream}var Cy=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return`MultipartBody`}};function wy({manuallyImported:e}={}){let t=e?`You may need to use polyfills`:"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n",n,r,i,a;try{n=fetch,r=Request,i=Response,a=Headers}catch(e){throw Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:`web`,fetch:n,Request:r,Response:i,Headers:a,FormData:typeof FormData<`u`?FormData:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<`u`?Blob:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<`u`?File:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<`u`?ReadableStream:class{constructor(){throw Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new Cy(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}const Ty=()=>{py||Sy(wy(),{auto:!0})};Ty();var Y=class extends Error{},Ey=class e extends Y{constructor(t,n,r,i){super(`${e.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.request_id=i?.[`x-request-id`],this.error=n;let a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,n){let r=t?.message?typeof t.message==`string`?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||`(no status code or body)`}static generate(t,n,r,i){if(!t||!i)return new Oy({message:r,cause:Fb(n)});let a=n?.error;return t===400?new Ay(t,a,r,i):t===401?new jy(t,a,r,i):t===403?new My(t,a,r,i):t===404?new Ny(t,a,r,i):t===409?new Py(t,a,r,i):t===422?new Fy(t,a,r,i):t===429?new Iy(t,a,r,i):t>=500?new Ly(t,a,r,i):new e(t,a,r,i)}},Dy=class extends Ey{constructor({message:e}={}){super(void 0,void 0,e||`Request was aborted.`,void 0)}},Oy=class extends Ey{constructor({message:e,cause:t}){super(void 0,void 0,e||`Connection error.`,void 0),t&&(this.cause=t)}},ky=class extends Oy{constructor({message:e}={}){super({message:e??`Request timed out.`})}},Ay=class extends Ey{},jy=class extends Ey{},My=class extends Ey{},Ny=class extends Ey{},Py=class extends Ey{},Fy=class extends Ey{},Iy=class extends Ey{},Ly=class extends Ey{},Ry=class extends Y{constructor(){super(`Could not parse response content as the length limit was reached`)}},zy=class extends Y{constructor(){super(`Could not parse response content as the request was rejected by the content filter`)}},By=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},Vy=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},Hy,Uy=class{constructor(){Hy.set(this,void 0),this.buffer=new Uint8Array,By(this,Hy,null,`f`)}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e==`string`?new TextEncoder().encode(e):e,n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;let r=[],i;for(;(i=Wy(this.buffer,Vy(this,Hy,`f`)))!=null;){if(i.carriage&&Vy(this,Hy,`f`)==null){By(this,Hy,i.index,`f`);continue}if(Vy(this,Hy,`f`)!=null&&(i.index!==Vy(this,Hy,`f`)+1||i.carriage)){r.push(this.decodeText(this.buffer.slice(0,Vy(this,Hy,`f`)-1))),this.buffer=this.buffer.slice(Vy(this,Hy,`f`)),By(this,Hy,null,`f`);continue}let e=Vy(this,Hy,`f`)===null?i.preceding:i.preceding-1,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(i.index),By(this,Hy,null,`f`)}return r}decodeText(e){if(e==null)return``;if(typeof e==`string`)return e;if(typeof Buffer<`u`){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Y(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<`u`){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??=new TextDecoder(`utf8`),this.textDecoder.decode(e);throw new Y(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Y(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`)}flush(){return this.buffer.length?this.decode(`
`):[]}};Hy=new WeakMap,Uy.NEWLINE_CHARS=new Set([`
`,`\r`]),Uy.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Wy(e,t){for(let n=t??0;n<e.length;n++){if(e[n]===10)return{preceding:n,index:n+1,carriage:!1};if(e[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function Gy(e){for(let t=0;t<e.length-1;t++){if(e[t]===10&&e[t+1]===10||e[t]===13&&e[t+1]===13)return t+2;if(e[t]===13&&e[t+1]===10&&t+3<e.length&&e[t+2]===13&&e[t+3]===10)return t+4}return-1}function Ky(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var qy=class e{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(t,n){let r=!1;async function*i(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let r of Jy(t,n))if(!e){if(r.data.startsWith(`[DONE]`)){e=!0;continue}if(r.event===null||r.event.startsWith(`response.`)||r.event.startsWith(`transcript.`)){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error(`Could not parse message into JSON:`,r.data),console.error(`From chunk:`,r.raw),e}if(e&&e.error)throw new Ey(void 0,e.error,void 0,xb(t.headers));yield e}else{let e;try{e=JSON.parse(r.data)}catch(e){throw console.error(`Could not parse message into JSON:`,r.data),console.error(`From chunk:`,r.raw),e}if(r.event==`error`)throw new Ey(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}}e=!0}catch(e){if(e instanceof Error&&e.name===`AbortError`)return;throw e}finally{e||n.abort()}}return new e(i,n)}static fromReadableStream(t,n){let r=!1;async function*i(){let e=new Uy,n=Ky(t);for await(let t of n)for(let n of e.decode(t))yield n;for(let t of e.flush())yield t}async function*a(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of i())e||t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&e.name===`AbortError`)return;throw e}finally{e||n.abort()}}return new e(a,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],r=this.iterator(),i=e=>({next:()=>{if(e.length===0){let e=r.next();t.push(e),n.push(e)}return e.shift()}});return[new e(()=>i(t),this.controller),new e(()=>i(n),this.controller)]}toReadableStream(){let e=this,t,n=new TextEncoder;return new _y({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{let{value:r,done:i}=await t.next();if(i)return e.close();let a=n.encode(JSON.stringify(r)+`
`);e.enqueue(a)}catch(t){e.error(t)}},async cancel(){await t.return?.()}})}};async function*Jy(e,t){if(!e.body)throw t.abort(),new Y(`Attempted to iterate over a response with no body`);let n=new Xy,r=new Uy,i=Ky(e.body);for await(let e of Yy(i))for(let t of r.decode(e)){let e=n.decode(t);e&&(yield e)}for(let e of r.flush()){let t=n.decode(e);t&&(yield t)}}async function*Yy(e){let t=new Uint8Array;for await(let n of e){if(n==null)continue;let e=n instanceof ArrayBuffer?new Uint8Array(n):typeof n==`string`?new TextEncoder().encode(n):n,r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length),t=r;let i;for(;(i=Gy(t))!==-1;)yield t.slice(0,i),t=t.slice(i)}t.length>0&&(yield t)}var Xy=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith(`\r`)&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(`:`))return null;let[t,n,r]=Zy(e,`:`);return r.startsWith(` `)&&(r=r.substring(1)),t===`event`?this.event=r:t===`data`&&this.data.push(r),null}};function Zy(e,t){let n=e.indexOf(t);return n===-1?[e,``,``]:[e.substring(0,n),t,e.substring(n+t.length)]}const Qy=e=>typeof e==`object`&&!!e&&typeof e.url==`string`&&typeof e.blob==`function`,$y=e=>typeof e==`object`&&!!e&&typeof e.name==`string`&&typeof e.lastModified==`number`&&eb(e),eb=e=>typeof e==`object`&&!!e&&typeof e.size==`number`&&typeof e.type==`string`&&typeof e.text==`function`&&typeof e.slice==`function`&&typeof e.arrayBuffer==`function`,tb=e=>$y(e)||Qy(e)||xy(e);async function nb(e,t,n){if(e=await e,$y(e))return e;if(Qy(e)){let r=await e.blob();return t||=new URL(e.url).pathname.split(/[\\/]/).pop()??`unknown_file`,new gy(eb(r)?[await r.arrayBuffer()]:[r],t,n)}let r=await rb(e);if(t||=ab(e)??`unknown_file`,!n?.type){let e=r[0]?.type;typeof e==`string`&&(n={...n,type:e})}return new gy(r,t,n)}async function rb(e){let t=[];if(typeof e==`string`||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(eb(e))t.push(await e.arrayBuffer());else if(sb(e))for await(let n of e)t.push(n);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${ib(e)}`);return t}function ib(e){return`[${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(`, `)}]`}function ab(e){return ob(e.name)||ob(e.filename)||ob(e.path)?.split(/[\\/]/).pop()}var ob=e=>{if(typeof e==`string`)return e;if(typeof Buffer<`u`&&e instanceof Buffer)return String(e)},sb=e=>typeof e==`object`&&!!e&&typeof e[Symbol.asyncIterator]==`function`;const cb=e=>e&&typeof e==`object`&&e.body&&e[Symbol.toStringTag]===`MultipartBody`,lb=async e=>vy(await ub(e.body),e),ub=async e=>{let t=new hy;return await Promise.all(Object.entries(e||{}).map(([e,n])=>db(t,e,n))),t};var db=async(e,t,n)=>{if(n!==void 0){if(n==null)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n==`string`||typeof n==`number`||typeof n==`boolean`)e.append(t,String(n));else if(tb(n)){let r=await nb(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>db(e,t+`[]`,n)));else if(typeof n==`object`)await Promise.all(Object.entries(n).map(([n,r])=>db(e,`${t}[${n}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},fb=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},pb=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},mb;Ty();async function hb(e){let{response:t}=e;if(e.options.stream)return Vb(`response`,t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):qy.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let n=t.headers.get(`content-type`)?.split(`;`)[0]?.trim();if(n?.includes(`application/json`)||n?.endsWith(`+json`)){let e=await t.json();return Vb(`response`,t.status,t.url,t.headers,e),gb(e,t)}let r=await t.text();return Vb(`response`,t.status,t.url,t.headers,r),r}function gb(e,t){return!e||typeof e!=`object`||Array.isArray(e)?e:Object.defineProperty(e,`_request_id`,{value:t.headers.get(`x-request-id`),enumerable:!1})}var _b=class e extends Promise{constructor(e,t=hb){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(t){return new e(this.responsePromise,async e=>gb(t(await this.parseResponse(e),e),e.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get(`x-request-id`)}}parse(){return this.parsedPromise||=this.responsePromise.then(this.parseResponse),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},vb=class{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:i}){this.baseURL=e,this.maxRetries=Pb(`maxRetries`,t),this.timeout=Pb(`timeout`,n),this.httpAgent=r,this.fetch=i??my}authHeaders(e){return{}}defaultHeaders(e){return{Accept:`application/json`,"Content-Type":`application/json`,"User-Agent":this.getUserAgent(),...kb(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Hb()}`}get(e,t){return this.methodRequest(`get`,e,t)}post(e,t){return this.methodRequest(`post`,e,t)}patch(e,t){return this.methodRequest(`patch`,e,t)}put(e,t){return this.methodRequest(`put`,e,t)}delete(e,t){return this.methodRequest(`delete`,e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{let r=n&&eb(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:`get`,path:e,...n})}calculateContentLength(e){if(typeof e==`string`){if(typeof Buffer<`u`)return Buffer.byteLength(e,`utf8`).toString();if(typeof TextEncoder<`u`)return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){let n={...e},{method:r,path:i,query:a,headers:o={}}=n,s=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body==`string`?n.body:cb(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(s),l=this.buildURL(i,a);`timeout`in n&&Pb(`timeout`,n.timeout),n.timeout=n.timeout??this.timeout;let u=n.httpAgent??this.httpAgent??yy(l),d=n.timeout+1e3;typeof u?.options?.timeout==`number`&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&r!==`get`&&(e.idempotencyKey||=this.defaultIdempotencyKey(),o[this.idempotencyHeader]=e.idempotencyKey);let f=this.buildHeaders({options:n,headers:o,contentLength:c,retryCount:t});return{req:{method:r,...s&&{body:s},headers:f,...u&&{agent:u},signal:n.signal??null},url:l,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){let i={};n&&(i[`content-length`]=n);let a=this.defaultHeaders(e);return zb(i,a),zb(i,t),cb(e.body)&&py!==`node`&&delete i[`content-type`],Gb(a,`x-stainless-retry-count`)===void 0&&Gb(t,`x-stainless-retry-count`)===void 0&&(i[`x-stainless-retry-count`]=String(r)),Gb(a,`x-stainless-timeout`)===void 0&&Gb(t,`x-stainless-timeout`)===void 0&&e.timeout&&(i[`x-stainless-timeout`]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return Ey.generate(e,t,n,r)}request(e,t=null){return new _b(this.makeRequest(e,t))}async makeRequest(e,t){let n=await e,r=n.maxRetries??this.maxRetries;t??=r,await this.prepareOptions(n);let{req:i,url:a,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(i,{url:a,options:n}),Vb(`request`,a,n,i.headers),n.signal?.aborted)throw new Dy;let s=new AbortController,c=await this.fetchWithTimeout(a,i,o,s).catch(Fb);if(c instanceof Error){if(n.signal?.aborted)throw new Dy;if(t)return this.retryRequest(n,t);throw c.name===`AbortError`?new ky:new Oy({cause:c})}let l=xb(c.headers);if(!c.ok){if(t&&this.shouldRetry(c))return Vb(`response (error; ${`retrying, ${t} attempts remaining`})`,c.status,a,l),this.retryRequest(n,t,l);let e=await c.text().catch(e=>Fb(e).message),r=Ab(e),i=r?void 0:e;throw Vb(`response (error; ${t?`(error; no more retries left)`:`(error; not retryable)`})`,c.status,a,l,i),this.makeStatusError(c.status,r,i,l)}return{response:c,options:n,controller:s}}requestAPIList(e,t){let n=this.makeRequest(t,null);return new bb(this,n,e)}buildURL(e,t){let n=Mb(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith(`/`)&&e.startsWith(`/`)?e.slice(1):e)),r=this.defaultQuery();return Lb(r)||(t={...r,...t}),typeof t==`object`&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>t!==void 0).map(([e,t])=>{if(typeof t==`string`||typeof t==`number`||typeof t==`boolean`)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(t===null)return`${encodeURIComponent(e)}=`;throw new Y(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join(`&`)}async fetchWithTimeout(e,t,n,r){let{signal:i,...a}=t||{};i&&i.addEventListener(`abort`,()=>r.abort());let o=setTimeout(()=>r.abort(),n),s={signal:r.signal,...a};return s.method&&=s.method.toUpperCase(),this.fetch.call(void 0,e,s).finally(()=>{clearTimeout(o)})}shouldRetry(e){let t=e.headers.get(`x-should-retry`);return t===`true`?!0:t===`false`?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r,i=n?.[`retry-after-ms`];if(i){let e=parseFloat(i);Number.isNaN(e)||(r=e)}let a=n?.[`retry-after`];if(a&&!r){let e=parseFloat(a);r=Number.isNaN(e)?Date.parse(a)-Date.now():e*1e3}if(!(r&&0<=r&&r<60*1e3)){let n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Nb(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){let n=t-e;return Math.min(.5*2**n,8)*(1-Math.random()*.25)*1e3}getUserAgent(){return`${this.constructor.name}/JS ${dy}`}},yb=class{constructor(e,t,n,r){mb.set(this,void 0),fb(this,mb,e,`f`),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new Y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if(`params`in e&&typeof t.query==`object`)t.query={...t.query,...e.params};else if(`url`in e){let n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(let[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await pb(this,mb,`f`).requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(mb=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}},bb=class extends _b{constructor(e,t,n){super(t,async t=>new n(e,t.response,await hb(t),t.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}};const xb=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let n=t.toString();return e[n.toLowerCase()]||e[n]}});var Sb={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0};const Cb=e=>typeof e==`object`&&!!e&&!Lb(e)&&Object.keys(e).every(e=>Rb(Sb,e));var wb=()=>{if(typeof Deno<`u`&&Deno.build!=null)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":dy,"X-Stainless-OS":Db(Deno.build.os),"X-Stainless-Arch":Eb(Deno.build.arch),"X-Stainless-Runtime":`deno`,"X-Stainless-Runtime-Version":typeof Deno.version==`string`?Deno.version:Deno.version?.deno??`unknown`};if(typeof EdgeRuntime<`u`)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":dy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":`edge`,"X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<`u`?process:0)===`[object process]`)return{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":dy,"X-Stainless-OS":Db(process.platform),"X-Stainless-Arch":Eb(process.arch),"X-Stainless-Runtime":`node`,"X-Stainless-Runtime-Version":process.version};let e=Tb();return e?{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":dy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`unknown`,"X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":`js`,"X-Stainless-Package-Version":dy,"X-Stainless-OS":`Unknown`,"X-Stainless-Arch":`unknown`,"X-Stainless-Runtime":`unknown`,"X-Stainless-Runtime-Version":`unknown`}};function Tb(){if(typeof navigator>`u`||!navigator)return null;for(let{key:e,pattern:t}of[{key:`edge`,pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`ie`,pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`ie`,pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`chrome`,pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`firefox`,pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:`safari`,pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let n=t.exec(navigator.userAgent);if(n)return{browser:e,version:`${n[1]||0}.${n[2]||0}.${n[3]||0}`}}return null}var Eb=e=>e===`x32`?`x32`:e===`x86_64`||e===`x64`?`x64`:e===`arm`?`arm`:e===`aarch64`||e===`arm64`?`arm64`:e?`other:${e}`:`unknown`,Db=e=>(e=e.toLowerCase(),e.includes(`ios`)?`iOS`:e===`android`?`Android`:e===`darwin`?`MacOS`:e===`win32`?`Windows`:e===`freebsd`?`FreeBSD`:e===`openbsd`?`OpenBSD`:e===`linux`?`Linux`:e?`Other:${e}`:`Unknown`),Ob,kb=()=>Ob??=wb();const Ab=e=>{try{return JSON.parse(e)}catch{return}};var jb=/^[a-z][a-z0-9+.-]*:/i,Mb=e=>jb.test(e);const Nb=e=>new Promise(t=>setTimeout(t,e));var Pb=(e,t)=>{if(typeof t!=`number`||!Number.isInteger(t))throw new Y(`${e} must be an integer`);if(t<0)throw new Y(`${e} must be a positive integer`);return t};const Fb=e=>{if(e instanceof Error)return e;if(typeof e==`object`&&e)try{return Error(JSON.stringify(e))}catch{}return Error(e)},Ib=e=>{if(typeof process<`u`)return{}?.[e]?.trim()??void 0;if(typeof Deno<`u`)return Deno.env?.get?.(e)?.trim()};function Lb(e){if(!e)return!0;for(let t in e)return!1;return!0}function Rb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zb(e,t){for(let n in t){if(!Rb(t,n))continue;let r=n.toLowerCase();if(!r)continue;let i=t[n];i===null?delete e[r]:i!==void 0&&(e[r]=i)}}var Bb=new Set([`authorization`,`api-key`]);function Vb(e,...t){if(typeof process<`u`&&{}?.DEBUG===`true`){let n=t.map(e=>{if(!e)return e;if(e.headers){let t={...e,headers:{...e.headers}};for(let n in e.headers)Bb.has(n.toLowerCase())&&(t.headers[n]=`REDACTED`);return t}let t=null;for(let n in e)Bb.has(n.toLowerCase())&&(t??={...e},t[n]=`REDACTED`);return t??e});console.log(`OpenAI:DEBUG:${e}`,...n)}}var Hb=()=>`xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`.replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e===`x`?t:t&3|8).toString(16)});const Ub=()=>typeof window<`u`&&window.document!==void 0&&typeof navigator<`u`,Wb=e=>typeof e?.get==`function`,Gb=(e,t)=>{let n=t.toLowerCase();if(Wb(e)){let r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(let i of[t,n,t.toUpperCase(),r]){let t=e.get(i);if(t)return t}}for(let[r,i]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${t} header, using the first entry.`),i[0]):i},Kb=e=>{if(typeof Buffer<`u`){let t=Buffer.from(e,`base64`);return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{let t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}};function qb(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}var Jb=class extends yb{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}},Yb=class extends yb{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if(`params`in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let t=e[e.length-1]?.id;return t?{params:{after:t}}:null}},Xb=class{constructor(e){this._client=e}},Zb=class extends Xb{list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,ex,{query:t,...n})}},Qb=class extends Xb{constructor(){super(...arguments),this.messages=new Zb(this._client)}create(e,t){return this._client.post(`/chat/completions`,{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/chat/completions`,$b,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}},$b=class extends Yb{},ex=class extends Yb{};Qb.ChatCompletionsPage=$b,Qb.Messages=Zb;var tx=class extends Xb{constructor(){super(...arguments),this.completions=new Qb(this._client)}};tx.Completions=Qb,tx.ChatCompletionsPage=$b;var nx=class extends Xb{create(e,t){return this._client.post(`/audio/speech`,{body:e,...t,headers:{Accept:`application/octet-stream`,...t?.headers},__binaryResponse:!0})}},rx=class extends Xb{create(e,t){return this._client.post(`/audio/transcriptions`,lb({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}},ix=class extends Xb{create(e,t){return this._client.post(`/audio/translations`,lb({body:e,...t,__metadata:{model:e.model}}))}},ax=class extends Xb{constructor(){super(...arguments),this.transcriptions=new rx(this._client),this.translations=new ix(this._client),this.speech=new nx(this._client)}};ax.Transcriptions=rx,ax.Translations=ix,ax.Speech=nx;var ox=class extends Xb{create(e,t){return this._client.post(`/batches`,{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/batches`,sx,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}},sx=class extends Yb{};ox.BatchesPage=sx;var cx=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},lx=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},ux,dx,fx,px,mx,hx,gx,_x,vx,yx,bx,xx,Sx,Cx=class{constructor(){ux.add(this),this.controller=new AbortController,dx.set(this,void 0),fx.set(this,()=>{}),px.set(this,()=>{}),mx.set(this,void 0),hx.set(this,()=>{}),gx.set(this,()=>{}),_x.set(this,{}),vx.set(this,!1),yx.set(this,!1),bx.set(this,!1),xx.set(this,!1),cx(this,dx,new Promise((e,t)=>{cx(this,fx,e,`f`),cx(this,px,t,`f`)}),`f`),cx(this,mx,new Promise((e,t)=>{cx(this,hx,e,`f`),cx(this,gx,t,`f`)}),`f`),lx(this,dx,`f`).catch(()=>{}),lx(this,mx,`f`).catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit(`end`)},lx(this,ux,`m`,Sx).bind(this))},0)}_connected(){this.ended||(lx(this,fx,`f`).call(this),this._emit(`connect`))}get ended(){return lx(this,vx,`f`)}get errored(){return lx(this,yx,`f`)}get aborted(){return lx(this,bx,`f`)}abort(){this.controller.abort()}on(e,t){return(lx(this,_x,`f`)[e]||(lx(this,_x,`f`)[e]=[])).push({listener:t}),this}off(e,t){let n=lx(this,_x,`f`)[e];if(!n)return this;let r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(lx(this,_x,`f`)[e]||(lx(this,_x,`f`)[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{cx(this,xx,!0,`f`),e!==`error`&&this.once(`error`,n),this.once(e,t)})}async done(){cx(this,xx,!0,`f`),await lx(this,mx,`f`)}_emit(e,...t){if(lx(this,vx,`f`))return;e===`end`&&(cx(this,vx,!0,`f`),lx(this,hx,`f`).call(this));let n=lx(this,_x,`f`)[e];if(n&&(lx(this,_x,`f`)[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),e===`abort`){let e=t[0];!lx(this,xx,`f`)&&!n?.length&&Promise.reject(e),lx(this,px,`f`).call(this,e),lx(this,gx,`f`).call(this,e),this._emit(`end`);return}if(e===`error`){let e=t[0];!lx(this,xx,`f`)&&!n?.length&&Promise.reject(e),lx(this,px,`f`).call(this,e),lx(this,gx,`f`).call(this,e),this._emit(`end`)}}_emitFinal(){}};dx=new WeakMap,fx=new WeakMap,px=new WeakMap,mx=new WeakMap,hx=new WeakMap,gx=new WeakMap,_x=new WeakMap,vx=new WeakMap,yx=new WeakMap,bx=new WeakMap,xx=new WeakMap,ux=new WeakSet,Sx=function(e){if(cx(this,yx,!0,`f`),e instanceof Error&&e.name===`AbortError`&&(e=new Dy),e instanceof Dy)return cx(this,bx,!0,`f`),this._emit(`abort`,e);if(e instanceof Y)return this._emit(`error`,e);if(e instanceof Error){let t=new Y(e.message);return t.cause=e,this._emit(`error`,t)}return this._emit(`error`,new Y(String(e)))};var X=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},wx=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},Tx,Ex,Dx,Ox,kx,Ax,jx,Mx,Nx,Px,Fx,Ix,Lx,Rx,zx,Bx,Vx,Hx,Ux,Wx,Gx,Kx,qx=class e extends Cx{constructor(){super(...arguments),Tx.add(this),Ex.set(this,[]),Dx.set(this,{}),Ox.set(this,{}),kx.set(this,void 0),Ax.set(this,void 0),jx.set(this,void 0),Mx.set(this,void 0),Nx.set(this,void 0),Px.set(this,void 0),Fx.set(this,void 0),Ix.set(this,void 0),Lx.set(this,void 0)}[(Ex=new WeakMap,Dx=new WeakMap,Ox=new WeakMap,kx=new WeakMap,Ax=new WeakMap,jx=new WeakMap,Mx=new WeakMap,Nx=new WeakMap,Px=new WeakMap,Fx=new WeakMap,Ix=new WeakMap,Lx=new WeakMap,Tx=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`event`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){let n=new e;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener(`abort`,()=>this.controller.abort())),this._connected();let r=qy.fromReadableStream(e,this.controller);for await(let e of r)X(this,Tx,`m`,Rx).call(this,e);if(r.controller.signal?.aborted)throw new Dy;return this._addRun(X(this,Tx,`m`,zx).call(this))}toReadableStream(){return new qy(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i,a){let o=new e;return o._run(()=>o._runToolAssistantStream(t,n,r,i,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":`stream`}})),o}async _createToolAssistantStream(e,t,n,r,i){let a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener(`abort`,()=>this.controller.abort()));let o={...r,stream:!0},s=await e.submitToolOutputs(t,n,o,{...i,signal:this.controller.signal});this._connected();for await(let e of s)X(this,Tx,`m`,Rx).call(this,e);if(s.controller.signal?.aborted)throw new Dy;return this._addRun(X(this,Tx,`m`,zx).call(this))}static createThreadAssistantStream(t,n,r){let i=new e;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}static createAssistantStream(t,n,r,i){let a=new e;return a._run(()=>a._runAssistantStream(t,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":`stream`}})),a}currentEvent(){return X(this,Fx,`f`)}currentRun(){return X(this,Ix,`f`)}currentMessageSnapshot(){return X(this,kx,`f`)}currentRunStepSnapshot(){return X(this,Lx,`f`)}async finalRunSteps(){return await this.done(),Object.values(X(this,Dx,`f`))}async finalMessages(){return await this.done(),Object.values(X(this,Ox,`f`))}async finalRun(){if(await this.done(),!X(this,Ax,`f`))throw Error(`Final run was not received.`);return X(this,Ax,`f`)}async _createThreadAssistantStream(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort()));let i={...t,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(let e of a)X(this,Tx,`m`,Rx).call(this,e);if(a.controller.signal?.aborted)throw new Dy;return this._addRun(X(this,Tx,`m`,zx).call(this))}async _createAssistantStream(e,t,n,r){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener(`abort`,()=>this.controller.abort()));let a={...n,stream:!0},o=await e.create(t,a,{...r,signal:this.controller.signal});this._connected();for await(let e of o)X(this,Tx,`m`,Rx).call(this,e);if(o.controller.signal?.aborted)throw new Dy;return this._addRun(X(this,Tx,`m`,zx).call(this))}static accumulateDelta(e,t){for(let[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(t==null){e[n]=r;continue}if(n===`index`||n===`type`){e[n]=r;continue}if(typeof t==`string`&&typeof r==`string`)t+=r;else if(typeof t==`number`&&typeof r==`number`)t+=r;else if(qb(t)&&qb(r))t=this.accumulateDelta(t,r);else if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>typeof e==`string`||typeof e==`number`)){t.push(...r);continue}for(let e of r){if(!qb(e))throw Error(`Expected array delta entry to be an object but got: ${e}`);let n=e.index;if(n==null)throw console.error(e),Error("Expected array delta entry to have an `index` property");if(typeof n!=`number`)throw Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);let r=t[n];r==null?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`);e[n]=t}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,i){return await this._createToolAssistantStream(n,e,t,r,i)}};Rx=function(e){if(!this.ended)switch(wx(this,Fx,e,`f`),X(this,Tx,`m`,Hx).call(this,e),e.event){case`thread.created`:break;case`thread.run.created`:case`thread.run.queued`:case`thread.run.in_progress`:case`thread.run.requires_action`:case`thread.run.completed`:case`thread.run.incomplete`:case`thread.run.failed`:case`thread.run.cancelling`:case`thread.run.cancelled`:case`thread.run.expired`:X(this,Tx,`m`,Kx).call(this,e);break;case`thread.run.step.created`:case`thread.run.step.in_progress`:case`thread.run.step.delta`:case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:X(this,Tx,`m`,Vx).call(this,e);break;case`thread.message.created`:case`thread.message.in_progress`:case`thread.message.delta`:case`thread.message.completed`:case`thread.message.incomplete`:X(this,Tx,`m`,Bx).call(this,e);break;case`error`:throw Error(`Encountered an error event in event processing - errors should be processed earlier`);default:}},zx=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);if(!X(this,Ax,`f`))throw Error(`Final run has not been received`);return X(this,Ax,`f`)},Bx=function(e){let[t,n]=X(this,Tx,`m`,Wx).call(this,e,X(this,kx,`f`));wx(this,kx,t,`f`),X(this,Ox,`f`)[t.id]=t;for(let e of n){let n=t.content[e.index];n?.type==`text`&&this._emit(`textCreated`,n.text)}switch(e.event){case`thread.message.created`:this._emit(`messageCreated`,e.data);break;case`thread.message.in_progress`:break;case`thread.message.delta`:if(this._emit(`messageDelta`,e.data.delta,t),e.data.delta.content)for(let n of e.data.delta.content){if(n.type==`text`&&n.text){let e=n.text,r=t.content[n.index];if(r&&r.type==`text`)this._emit(`textDelta`,e,r.text);else throw Error(`The snapshot associated with this text delta is not text or missing`)}if(n.index!=X(this,jx,`f`)){if(X(this,Mx,`f`))switch(X(this,Mx,`f`).type){case`text`:this._emit(`textDone`,X(this,Mx,`f`).text,X(this,kx,`f`));break;case`image_file`:this._emit(`imageFileDone`,X(this,Mx,`f`).image_file,X(this,kx,`f`));break}wx(this,jx,n.index,`f`)}wx(this,Mx,t.content[n.index],`f`)}break;case`thread.message.completed`:case`thread.message.incomplete`:if(X(this,jx,`f`)!==void 0){let t=e.data.content[X(this,jx,`f`)];if(t)switch(t.type){case`image_file`:this._emit(`imageFileDone`,t.image_file,X(this,kx,`f`));break;case`text`:this._emit(`textDone`,t.text,X(this,kx,`f`));break}}X(this,kx,`f`)&&this._emit(`messageDone`,e.data),wx(this,kx,void 0,`f`)}},Vx=function(e){let t=X(this,Tx,`m`,Ux).call(this,e);switch(wx(this,Lx,t,`f`),e.event){case`thread.run.step.created`:this._emit(`runStepCreated`,e.data);break;case`thread.run.step.delta`:let n=e.data.delta;if(n.step_details&&n.step_details.type==`tool_calls`&&n.step_details.tool_calls&&t.step_details.type==`tool_calls`)for(let e of n.step_details.tool_calls)e.index==X(this,Nx,`f`)?this._emit(`toolCallDelta`,e,t.step_details.tool_calls[e.index]):(X(this,Px,`f`)&&this._emit(`toolCallDone`,X(this,Px,`f`)),wx(this,Nx,e.index,`f`),wx(this,Px,t.step_details.tool_calls[e.index],`f`),X(this,Px,`f`)&&this._emit(`toolCallCreated`,X(this,Px,`f`)));this._emit(`runStepDelta`,e.data.delta,t);break;case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:wx(this,Lx,void 0,`f`),e.data.step_details.type==`tool_calls`&&X(this,Px,`f`)&&(this._emit(`toolCallDone`,X(this,Px,`f`)),wx(this,Px,void 0,`f`)),this._emit(`runStepDone`,e.data,t);break;case`thread.run.step.in_progress`:break}},Hx=function(e){X(this,Ex,`f`).push(e),this._emit(`event`,e)},Ux=function(e){switch(e.event){case`thread.run.step.created`:return X(this,Dx,`f`)[e.data.id]=e.data,e.data;case`thread.run.step.delta`:let t=X(this,Dx,`f`)[e.data.id];if(!t)throw Error(`Received a RunStepDelta before creation of a snapshot`);let n=e.data;if(n.delta){let r=qx.accumulateDelta(t,n.delta);X(this,Dx,`f`)[e.data.id]=r}return X(this,Dx,`f`)[e.data.id];case`thread.run.step.completed`:case`thread.run.step.failed`:case`thread.run.step.cancelled`:case`thread.run.step.expired`:case`thread.run.step.in_progress`:X(this,Dx,`f`)[e.data.id]=e.data;break}if(X(this,Dx,`f`)[e.data.id])return X(this,Dx,`f`)[e.data.id];throw Error(`No snapshot available`)},Wx=function(e,t){let n=[];switch(e.event){case`thread.message.created`:return[e.data,n];case`thread.message.delta`:if(!t)throw Error(`Received a delta with no existing snapshot (there should be one from message creation)`);let r=e.data;if(r.delta.content)for(let e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=X(this,Tx,`m`,Gx).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case`thread.message.in_progress`:case`thread.message.completed`:case`thread.message.incomplete`:if(t)return[t,n];throw Error(`Received thread message event with no existing snapshot`)}throw Error(`Tried to accumulate a non-message event`)},Gx=function(e,t){return qx.accumulateDelta(t,e)},Kx=function(e){switch(wx(this,Ix,e.data,`f`),e.event){case`thread.run.created`:break;case`thread.run.queued`:break;case`thread.run.in_progress`:break;case`thread.run.requires_action`:case`thread.run.cancelled`:case`thread.run.failed`:case`thread.run.completed`:case`thread.run.expired`:wx(this,Ax,e.data,`f`),X(this,Px,`f`)&&(this._emit(`toolCallDone`,X(this,Px,`f`)),wx(this,Px,void 0,`f`));break;case`thread.run.cancelling`:break}};var Jx=class extends Xb{create(e,t){return this._client.post(`/assistants`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/assistants`,Yx,{query:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},Yx=class extends Yb{};Jx.AssistantsPage=Yx;function Xx(e){return typeof e.parse==`function`}const Zx=e=>e?.role===`assistant`,Qx=e=>e?.role===`function`,$x=e=>e?.role===`tool`;function eS(e){return e?.$brand===`auto-parseable-response-format`}function tS(e){return e?.$brand===`auto-parseable-tool`}function nS(e,t){return!t||!sS(t)?{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}:rS(e,t)}function rS(e,t){let n=e.choices.map(e=>{if(e.finish_reason===`length`)throw new Ry;if(e.finish_reason===`content_filter`)throw new zy;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>aS(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?iS(t,e.message.content):null}}});return{...e,choices:n}}function iS(e,t){return e.response_format?.type===`json_schema`&&e.response_format?.type===`json_schema`?`$parseRaw`in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function aS(e,t){let n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:tS(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function oS(e,t){if(!e)return!1;let n=e.tools?.find(e=>e.function?.name===t.function.name);return tS(n)||n?.function.strict||!1}function sS(e){return eS(e.response_format)?!0:e.tools?.some(e=>tS(e)||e.type===`function`&&e.function.strict===!0)??!1}function cS(e){for(let t of e??[]){if(t.type!==`function`)throw new Y(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Y(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var lS=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},uS,dS,fS,pS,mS,hS,gS,_S,vS=10,yS=class extends Cx{constructor(){super(...arguments),uS.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit(`chatCompletion`,e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if(`content`in e||(e.content=null),this.messages.push(e),t){if(this._emit(`message`,e),(Qx(e)||$x(e))&&e.content)this._emit(`functionCallResult`,e.content);else if(Zx(e)&&e.function_call)this._emit(`functionCall`,e.function_call);else if(Zx(e)&&e.tool_calls)for(let t of e.tool_calls)t.type===`function`&&this._emit(`functionCall`,t.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Y(`stream ended without producing a ChatCompletion`);return e}async finalContent(){return await this.done(),lS(this,uS,`m`,dS).call(this)}async finalMessage(){return await this.done(),lS(this,uS,`m`,fS).call(this)}async finalFunctionCall(){return await this.done(),lS(this,uS,`m`,pS).call(this)}async finalFunctionCallResult(){return await this.done(),lS(this,uS,`m`,mS).call(this)}async totalUsage(){return await this.done(),lS(this,uS,`m`,hS).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit(`finalChatCompletion`,e);let t=lS(this,uS,`m`,fS).call(this);t&&this._emit(`finalMessage`,t);let n=lS(this,uS,`m`,dS).call(this);n&&this._emit(`finalContent`,n);let r=lS(this,uS,`m`,pS).call(this);r&&this._emit(`finalFunctionCall`,r);let i=lS(this,uS,`m`,mS).call(this);i!=null&&this._emit(`finalFunctionCallResult`,i),this._chatCompletions.some(e=>e.usage)&&this._emit(`totalUsage`,lS(this,uS,`m`,hS).call(this))}async _createChatCompletion(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),lS(this,uS,`m`,gS).call(this,t);let i=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(rS(i,t))}async _runChatCompletion(e,t,n){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){let r=`function`,{function_call:i=`auto`,stream:a,...o}=t,s=typeof i!=`string`&&i?.name,{maxChatCompletions:c=vS}=n||{},l={};for(let e of t.functions)l[e.name||e.function.name]=e;let u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){let t=(await this._createChatCompletion(e,{...o,function_call:i,functions:u,messages:[...this.messages]},n)).choices[0]?.message;if(!t)throw new Y(`missing message in ChatCompletion response`);if(!t.function_call)return;let{name:a,arguments:c}=t.function_call,d=l[a];if(d){if(s&&s!==a){let e=`Invalid function_call: ${JSON.stringify(a)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,name:a,content:e});continue}}else{let e=`Invalid function_call: ${JSON.stringify(a)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(`, `)}. Please try again`;this._addMessage({role:r,name:a,content:e});continue}let f;try{f=Xx(d)?await d.parse(c):c}catch(e){this._addMessage({role:r,name:a,content:e instanceof Error?e.message:String(e)});continue}let p=await d.function(f,this),m=lS(this,uS,`m`,_S).call(this,p);if(this._addMessage({role:r,name:a,content:m}),s)return}}async _runTools(e,t,n){let r=`tool`,{tool_choice:i=`auto`,stream:a,...o}=t,s=typeof i!=`string`&&i?.function?.name,{maxChatCompletions:c=vS}=n||{},l=t.tools.map(e=>{if(tS(e)){if(!e.$callback)throw new Y("Tool given to `.runTools()` that does not have an associated function");return{type:`function`,function:{function:e.$callback,name:e.function.name,description:e.function.description||``,parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(let e of l)e.type===`function`&&(u[e.function.name||e.function.function.name]=e.function);let d=`tools`in t?l.map(e=>e.type===`function`?{type:`function`,function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){let t=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:d,messages:[...this.messages]},n)).choices[0]?.message;if(!t)throw new Y(`missing message in ChatCompletion response`);if(!t.tool_calls?.length)return;for(let e of t.tool_calls){if(e.type!==`function`)continue;let t=e.id,{name:n,arguments:i}=e.function,a=u[n];if(a){if(s&&s!==n){let e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(`, `)}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let o;try{o=Xx(a)?await a.parse(i):i}catch(e){let n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}let c=await a.function(o,this),l=lS(this,uS,`m`,_S).call(this,c);if(this._addMessage({role:r,tool_call_id:t,content:l}),s)return}}}};uS=new WeakSet,dS=function(){return lS(this,uS,`m`,fS).call(this).content??null},fS=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(Zx(t)){let{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new Y(`stream ended without producing a ChatCompletionMessage with role=assistant`)},pS=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Zx(t)&&t?.function_call)return t.function_call;if(Zx(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},mS=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Qx(t)&&t.content!=null||$x(t)&&t.content!=null&&typeof t.content==`string`&&this.messages.some(e=>e.role===`assistant`&&e.tool_calls?.some(e=>e.type===`function`&&e.id===t.tool_call_id)))return t.content}},hS=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},gS=function(e){if(e.n!=null&&e.n>1)throw new Y(`ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.`)},_S=function(e){return typeof e==`string`?e:e===void 0?`undefined`:JSON.stringify(e)};var bS=class e extends yS{static runFunctions(t,n,r){let i=new e,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runFunctions`}};return i._run(()=>i._runFunctions(t,n,a)),i}static runTools(t,n,r){let i=new e,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runTools`}};return i._run(()=>i._runTools(t,n,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),Zx(e)&&e.content&&this._emit(`content`,e.content)}},xS=1,SS=2,CS=4,wS=8,TS=16,ES=32,DS=64,OS=128,kS=256,AS=OS|kS,jS=496,MS=SS|497,NS=CS|wS,PS={STR:xS,NUM:SS,ARR:CS,OBJ:wS,NULL:TS,BOOL:ES,NAN:DS,INFINITY:OS,MINUS_INFINITY:kS,INF:AS,SPECIAL:jS,ATOM:MS,COLLECTION:NS,ALL:MS|NS},FS=class extends Error{},IS=class extends Error{};function LS(e,t=PS.ALL){if(typeof e!=`string`)throw TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw Error(`${e} is empty`);return RS(e.trim(),t)}var RS=(e,t)=>{let n=e.length,r=0,i=e=>{throw new FS(`${e} at position ${r}`)},a=e=>{throw new IS(`${e} at position ${r}`)},o=()=>(d(),r>=n&&i(`Unexpected end of input`),e[r]===`"`?s():e[r]===`{`?c():e[r]===`[`?l():e.substring(r,r+4)===`null`||PS.NULL&t&&n-r<4&&`null`.startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)===`true`||PS.BOOL&t&&n-r<4&&`true`.startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)===`false`||PS.BOOL&t&&n-r<5&&`false`.startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)===`Infinity`||PS.INFINITY&t&&n-r<8&&`Infinity`.startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)===`-Infinity`||PS.MINUS_INFINITY&t&&1<n-r&&n-r<9&&`-Infinity`.startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)===`NaN`||PS.NAN&t&&n-r<3&&`NaN`.startsWith(e.substring(r))?(r+=3,NaN):u()),s=()=>{let o=r,s=!1;for(r++;r<n&&(e[r]!==`"`||s&&e[r-1]===`\\`);)s=e[r]===`\\`?!s:!1,r++;if(e.charAt(r)==`"`)try{return JSON.parse(e.substring(o,++r-Number(s)))}catch(e){a(String(e))}else if(PS.STR&t)try{return JSON.parse(e.substring(o,r-Number(s))+`"`)}catch{return JSON.parse(e.substring(o,e.lastIndexOf(`\\`))+`"`)}i(`Unterminated string literal`)},c=()=>{r++,d();let a={};try{for(;e[r]!==`}`;){if(d(),r>=n&&PS.OBJ&t)return a;let i=s();d(),r++;try{let e=o();Object.defineProperty(a,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(PS.OBJ&t)return a;throw e}d(),e[r]===`,`&&r++}}catch{if(PS.OBJ&t)return a;i(`Expected '}' at end of object`)}return r++,a},l=()=>{r++;let n=[];try{for(;e[r]!==`]`;)n.push(o()),d(),e[r]===`,`&&r++}catch{if(PS.ARR&t)return n;i(`Expected ']' at end of array`)}return r++,n},u=()=>{if(r===0){e===`-`&&PS.NUM&t&&i(`Not sure what '-' is`);try{return JSON.parse(e)}catch(n){if(PS.NUM&t)try{return e[e.length-1]===`.`?JSON.parse(e.substring(0,e.lastIndexOf(`.`))):JSON.parse(e.substring(0,e.lastIndexOf(`e`)))}catch{}a(String(n))}}let o=r;for(e[r]===`-`&&r++;e[r]&&!`,]}`.includes(e[r]);)r++;r==n&&!(PS.NUM&t)&&i(`Unterminated number literal`);try{return JSON.parse(e.substring(o,r))}catch{e.substring(o,r)===`-`&&PS.NUM&t&&i(`Not sure what '-' is`);try{return JSON.parse(e.substring(o,e.lastIndexOf(`e`)))}catch(e){a(String(e))}}},d=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return o()},zS=e=>LS(e,PS.ALL^PS.NUM),BS=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},VS=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},HS,US,WS,GS,KS,qS,JS,YS,XS,ZS,QS,$S,eC=class e extends yS{constructor(e){super(),HS.add(this),US.set(this,void 0),WS.set(this,void 0),GS.set(this,void 0),BS(this,US,e,`f`),BS(this,WS,[],`f`)}get currentChatCompletionSnapshot(){return VS(this,GS,`f`)}static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){let i=new e(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}async _createChatCompletion(e,t,n){super._createChatCompletion;let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),VS(this,HS,`m`,KS).call(this);let i=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let e of i)VS(this,HS,`m`,JS).call(this,e);if(i.controller.signal?.aborted)throw new Dy;return this._addChatCompletion(VS(this,HS,`m`,ZS).call(this))}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener(`abort`,()=>this.controller.abort())),VS(this,HS,`m`,KS).call(this),this._connected();let r=qy.fromReadableStream(e,this.controller),i;for await(let e of r)i&&i!==e.id&&this._addChatCompletion(VS(this,HS,`m`,ZS).call(this)),VS(this,HS,`m`,JS).call(this,e),i=e.id;if(r.controller.signal?.aborted)throw new Dy;return this._addChatCompletion(VS(this,HS,`m`,ZS).call(this))}[(US=new WeakMap,WS=new WeakMap,GS=new WeakMap,HS=new WeakSet,KS=function(){this.ended||BS(this,GS,void 0,`f`)},qS=function(e){let t=VS(this,WS,`f`)[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},VS(this,WS,`f`)[e.index]=t,t)},JS=function(e){if(this.ended)return;let t=VS(this,HS,`m`,$S).call(this,e);this._emit(`chunk`,e,t);for(let n of e.choices){let e=t.choices[n.index];n.delta.content!=null&&e.message?.role===`assistant`&&e.message?.content&&(this._emit(`content`,n.delta.content,e.message.content),this._emit(`content.delta`,{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),n.delta.refusal!=null&&e.message?.role===`assistant`&&e.message?.refusal&&this._emit(`refusal.delta`,{delta:n.delta.refusal,snapshot:e.message.refusal}),n.logprobs?.content!=null&&e.message?.role===`assistant`&&this._emit(`logprobs.content.delta`,{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),n.logprobs?.refusal!=null&&e.message?.role===`assistant`&&this._emit(`logprobs.refusal.delta`,{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});let r=VS(this,HS,`m`,qS).call(this,e);e.finish_reason&&(VS(this,HS,`m`,XS).call(this,e),r.current_tool_call_index!=null&&VS(this,HS,`m`,YS).call(this,e,r.current_tool_call_index));for(let t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(VS(this,HS,`m`,XS).call(this,e),r.current_tool_call_index!=null&&VS(this,HS,`m`,YS).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(let t of n.delta.tool_calls??[]){let n=e.message.tool_calls?.[t.index];n?.type&&(n?.type===`function`?this._emit(`tool_calls.function.arguments.delta`,{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??``}):n?.type)}}},YS=function(e,t){if(VS(this,HS,`m`,qS).call(this,e).done_tool_calls.has(t))return;let n=e.message.tool_calls?.[t];if(!n)throw Error(`no tool call snapshot`);if(!n.type)throw Error("tool call snapshot missing `type`");if(n.type===`function`){let e=VS(this,US,`f`)?.tools?.find(e=>e.type===`function`&&e.function.name===n.function.name);this._emit(`tool_calls.function.arguments.done`,{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:tS(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},XS=function(e){let t=VS(this,HS,`m`,qS).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;let n=VS(this,HS,`m`,QS).call(this);this._emit(`content.done`,{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit(`refusal.done`,{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit(`logprobs.content.done`,{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit(`logprobs.refusal.done`,{refusal:e.logprobs.refusal}))},ZS=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);let e=VS(this,GS,`f`);if(!e)throw new Y(`request ended without sending any chunks`);return BS(this,GS,void 0,`f`),BS(this,WS,[],`f`),tC(e,VS(this,US,`f`))},QS=function(){let e=VS(this,US,`f`)?.response_format;return eS(e)?e:null},$S=function(e){var t,n,r,i;let a=VS(this,GS,`f`),{choices:o,...s}=e;a?Object.assign(a,s):a=BS(this,GS,{...s,choices:[]},`f`);for(let{delta:o,finish_reason:s,index:c,logprobs:l=null,...u}of e.choices){let e=a.choices[c];if(e||=a.choices[c]={finish_reason:s,index:c,message:{},logprobs:l,...u},l)if(!e.logprobs)e.logprobs=Object.assign({},l);else{let{content:r,refusal:i,...a}=l;Object.assign(e.logprobs,a),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),i&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...i))}if(s&&(e.finish_reason=s,VS(this,US,`f`)&&sS(VS(this,US,`f`)))){if(s===`length`)throw new Ry;if(s===`content_filter`)throw new zy}if(Object.assign(e,u),!o)continue;let{content:d,refusal:f,function_call:p,role:m,tool_calls:h,...g}=o;if(Object.assign(e.message,g),f&&(e.message.refusal=(e.message.refusal||``)+f),m&&(e.message.role=m),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=``),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),d&&(e.message.content=(e.message.content||``)+d,!e.message.refusal&&VS(this,HS,`m`,QS).call(this)&&(e.message.parsed=zS(e.message.content))),h){e.message.tool_calls||(e.message.tool_calls=[]);for(let{index:t,id:n,type:r,function:a,...o}of h){let s=(i=e.message.tool_calls)[t]??(i[t]={});Object.assign(s,o),n&&(s.id=n),r&&(s.type=r),a&&(s.function??={name:a.name??``,arguments:``}),a?.name&&(s.function.name=a.name),a?.arguments&&(s.function.arguments+=a.arguments,oS(VS(this,US,`f`),s)&&(s.function.parsed_arguments=zS(s.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`chunk`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new qy(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function tC(e,t){let{id:n,choices:r,created:i,model:a,system_fingerprint:o,...s}=e;return nS({...s,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:i,...a})=>{if(!n)throw new Y(`missing finish_reason for choice ${r}`);let{content:o=null,function_call:s,tool_calls:c,...l}=t,u=t.role;if(!u)throw new Y(`missing role for choice ${r}`);if(s){let{arguments:e,name:c}=s;if(e==null)throw new Y(`missing function_call.arguments for choice ${r}`);if(!c)throw new Y(`missing function_call.name for choice ${r}`);return{...a,message:{content:o,function_call:{arguments:e,name:c},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}return c?{...a,index:r,finish_reason:n,logprobs:i,message:{...l,role:u,content:o,refusal:t.refusal??null,tool_calls:c.map((t,n)=>{let{function:i,type:a,id:o,...s}=t,{arguments:c,name:l,...u}=i||{};if(o==null)throw new Y(`missing choices[${r}].tool_calls[${n}].id\n${nC(e)}`);if(a==null)throw new Y(`missing choices[${r}].tool_calls[${n}].type\n${nC(e)}`);if(l==null)throw new Y(`missing choices[${r}].tool_calls[${n}].function.name\n${nC(e)}`);if(c==null)throw new Y(`missing choices[${r}].tool_calls[${n}].function.arguments\n${nC(e)}`);return{...s,id:o,type:a,function:{...u,name:l,arguments:c}}})}}:{...a,message:{...l,content:o,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}),created:i,model:a,object:`chat.completion`,...o?{system_fingerprint:o}:{}},t)}function nC(e){return JSON.stringify(e)}var rC=class e extends eC{static fromReadableStream(t){let n=new e(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){let i=new e(null),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runFunctions`}};return i._run(()=>i._runFunctions(t,n,a)),i}static runTools(t,n,r){let i=new e(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`runTools`}};return i._run(()=>i._runTools(t,n,a)),i}},iC=class extends Xb{parse(e,t){return cS(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":`beta.chat.completions.parse`}})._thenUnwrap(t=>rS(t,e))}runFunctions(e,t){return e.stream?rC.runFunctions(this._client,e,t):bS.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?rC.runTools(this._client,e,t):bS.runTools(this._client,e,t)}stream(e,t){return eC.createChatCompletion(this._client,e,t)}},aC=class extends Xb{constructor(){super(...arguments),this.completions=new iC(this._client)}};(function(e){e.Completions=iC})(aC||={});var oC=class extends Xb{create(e,t){return this._client.post(`/realtime/sessions`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},sC=class extends Xb{create(e,t){return this._client.post(`/realtime/transcription_sessions`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}},cC=class extends Xb{constructor(){super(...arguments),this.sessions=new oC(this._client),this.transcriptionSessions=new sC(this._client)}};cC.Sessions=oC,cC.TranscriptionSessions=sC;var lC=class extends Xb{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,uC,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},uC=class extends Yb{};lC.MessagesPage=uC;var dC=class extends Xb{retrieve(e,t,n,r={},i){return Cb(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...i,headers:{"OpenAI-Beta":`assistants=v2`,...i?.headers}})}list(e,t,n={},r){return Cb(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,fC,{query:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}},fC=class extends Yb{};dC.RunStepsPage=fC;var pC=class extends Xb{constructor(){super(...arguments),this.steps=new dC(this._client)}create(e,t,n){let{include:r,...i}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:i,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,mC,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return qx.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(i.status){case`queued`:case`in_progress`:case`cancelling`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=a.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Nb(e);break;case`requires_action`:case`incomplete`:case`cancelled`:case`completed`:case`failed`:case`expired`:return i}}}stream(e,t,n){return qx.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){let i=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,i.id,r)}submitToolOutputsStream(e,t,n,r){return qx.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}},mC=class extends Yb{};pC.RunsPage=mC,pC.Steps=dC,pC.RunStepsPage=fC;var hC=class extends Xb{constructor(){super(...arguments),this.runs=new pC(this._client),this.messages=new lC(this._client)}create(e={},t){return Cb(e)?this.create({},e):this._client.post(`/threads`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}createAndRun(e,t){return this._client.post(`/threads/runs`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return qx.createThreadAssistantStream(e,this._client.beta.threads,t)}};hC.Runs=pC,hC.RunsPage=mC,hC.Messages=lC,hC.MessagesPage=uC;var gC=class extends Xb{constructor(){super(...arguments),this.realtime=new cC(this._client),this.chat=new aC(this._client),this.assistants=new Jx(this._client),this.threads=new hC(this._client)}};gC.Realtime=cC,gC.Assistants=Jx,gC.AssistantsPage=Yx,gC.Threads=hC;var _C=class extends Xb{create(e,t){return this._client.post(`/completions`,{body:e,...t,stream:e.stream??!1})}},vC=class extends Xb{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:`application/binary`,...n?.headers},__binaryResponse:!0})}},yC=class extends Xb{constructor(){super(...arguments),this.content=new vC(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,lb({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,bC,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:`*/*`,...n?.headers}})}},bC=class extends Yb{};yC.FileListResponsesPage=bC,yC.Content=vC;var xC=class extends Xb{constructor(){super(...arguments),this.files=new yC(this._client)}create(e,t){return this._client.post(`/containers`,{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/containers`,SC,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:`*/*`,...t?.headers}})}},SC=class extends Yb{};xC.ContainerListResponsesPage=SC,xC.Files=yC,xC.FileListResponsesPage=bC;var CC=class extends Xb{create(e,t){let n=!!e.encoding_format,r=n?e.encoding_format:`base64`;n&&Vb(`Request`,`User defined encoding_format:`,e.encoding_format);let i=this._client.post(`/embeddings`,{body:{...e,encoding_format:r},...t});return n?i:(Vb(`response`,`Decoding base64 embeddings to float32 array`),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{let t=e.embedding;e.embedding=Kb(t)}),e)))}},wC=class extends Xb{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return Cb(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,TC,{query:n,...r})}},TC=class extends Yb{};wC.OutputItemListResponsesPage=TC;var EC=class extends Xb{constructor(){super(...arguments),this.outputItems=new wC(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,DC,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}},DC=class extends Yb{};EC.RunListResponsesPage=DC,EC.OutputItems=wC,EC.OutputItemListResponsesPage=TC;var OC=class extends Xb{constructor(){super(...arguments),this.runs=new EC(this._client)}create(e,t){return this._client.post(`/evals`,{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/evals`,kC,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}},kC=class extends Yb{};OC.EvalListResponsesPage=kC,OC.Runs=EC,OC.RunListResponsesPage=DC;var AC=class extends Xb{create(e,t){return this._client.post(`/files`,lb({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/files`,jC,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:`application/binary`,...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=1800*1e3}={}){let r=new Set([`processed`,`error`,`deleted`]),i=Date.now(),a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Nb(t),a=await this.retrieve(e),Date.now()-i>n)throw new ky({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}},jC=class extends Yb{};AC.FileObjectsPage=jC;var MC=class extends Xb{},NC=class extends Xb{run(e,t){return this._client.post(`/fine_tuning/alpha/graders/run`,{body:e,...t})}validate(e,t){return this._client.post(`/fine_tuning/alpha/graders/validate`,{body:e,...t})}},PC=class extends Xb{constructor(){super(...arguments),this.graders=new NC(this._client)}};PC.Graders=NC;var FC=class extends Xb{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,IC,{body:t,method:`post`,...n})}retrieve(e,t={},n){return Cb(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}},IC=class extends Jb{};FC.PermissionCreateResponsesPage=IC;var LC=class extends Xb{constructor(){super(...arguments),this.permissions=new FC(this._client)}};LC.Permissions=FC,LC.PermissionCreateResponsesPage=IC;var RC=class extends Xb{list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,zC,{query:t,...n})}},zC=class extends Yb{};RC.FineTuningJobCheckpointsPage=zC;var BC=class extends Xb{constructor(){super(...arguments),this.checkpoints=new RC(this._client)}create(e,t){return this._client.post(`/fine_tuning/jobs`,{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/fine_tuning/jobs`,VC,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Cb(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,HC,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}},VC=class extends Yb{},HC=class extends Yb{};BC.FineTuningJobsPage=VC,BC.FineTuningJobEventsPage=HC,BC.Checkpoints=RC,BC.FineTuningJobCheckpointsPage=zC;var UC=class extends Xb{constructor(){super(...arguments),this.methods=new MC(this._client),this.jobs=new BC(this._client),this.checkpoints=new LC(this._client),this.alpha=new PC(this._client)}};UC.Methods=MC,UC.Jobs=BC,UC.FineTuningJobsPage=VC,UC.FineTuningJobEventsPage=HC,UC.Checkpoints=LC,UC.Alpha=PC;var WC=class extends Xb{},GC=class extends Xb{constructor(){super(...arguments),this.graderModels=new WC(this._client)}};GC.GraderModels=WC;var KC=class extends Xb{createVariation(e,t){return this._client.post(`/images/variations`,lb({body:e,...t}))}edit(e,t){return this._client.post(`/images/edits`,lb({body:e,...t}))}generate(e,t){return this._client.post(`/images/generations`,{body:e,...t})}},qC=class extends Xb{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList(`/models`,JC,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}},JC=class extends Jb{};qC.ModelsPage=JC;var YC=class extends Xb{create(e,t){return this._client.post(`/moderations`,{body:e,...t})}};function XC(e,t){return!t||!$C(t)?{...e,output_parsed:null,output:e.output.map(e=>e.type===`function_call`?{...e,parsed_arguments:null}:e.type===`message`?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}:ZC(e,t)}function ZC(e,t){let n=e.output.map(e=>{if(e.type===`function_call`)return{...e,parsed_arguments:nw(t,e)};if(e.type===`message`){let n=e.content.map(e=>e.type===`output_text`?{...e,parsed:QC(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,`output_text`)||rw(r),Object.defineProperty(r,`output_parsed`,{enumerable:!0,get(){for(let e of r.output)if(e.type===`message`){for(let t of e.content)if(t.type===`output_text`&&t.parsed!==null)return t.parsed}return null}}),r}function QC(e,t){return e.text?.format?.type===`json_schema`?`$parseRaw`in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t):null}function $C(e){return!!eS(e.text?.format)}function ew(e){return e?.$brand===`auto-parseable-tool`}function tw(e,t){return e.find(e=>e.type===`function`&&e.name===t)}function nw(e,t){let n=tw(e.tools??[],t.name);return{...t,...t,parsed_arguments:ew(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function rw(e){let t=[];for(let n of e.output)if(n.type===`message`)for(let e of n.content)e.type===`output_text`&&t.push(e.text);e.output_text=t.join(``)}var iw=class extends Xb{list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,vw,{query:t,...n})}},aw=function(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n},ow=function(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)},sw,cw,lw,uw,dw,fw,pw,mw,hw=class e extends Cx{constructor(e){super(),sw.add(this),cw.set(this,void 0),lw.set(this,void 0),uw.set(this,void 0),aw(this,cw,e,`f`)}static createResponse(t,n,r){let i=new e(n);return i._run(()=>i._createOrRetrieveResponse(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":`stream`}})),i}async _createOrRetrieveResponse(e,t,n){let r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener(`abort`,()=>this.controller.abort())),ow(this,sw,`m`,dw).call(this);let i,a=null;`response_id`in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=t.starting_after??null):i=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let e of i)ow(this,sw,`m`,fw).call(this,e,a);if(i.controller.signal?.aborted)throw new Dy;return ow(this,sw,`m`,pw).call(this)}[(cw=new WeakMap,lw=new WeakMap,uw=new WeakMap,sw=new WeakSet,dw=function(){this.ended||aw(this,lw,void 0,`f`)},fw=function(e,t){if(this.ended)return;let n=(e,n)=>{(t==null||n.sequence_number>t)&&this._emit(e,n)},r=ow(this,sw,`m`,mw).call(this,e);switch(n(`event`,e),e.type){case`response.output_text.delta`:{let t=r.output[e.output_index];if(!t)throw new Y(`missing output at index ${e.output_index}`);if(t.type===`message`){let r=t.content[e.content_index];if(!r)throw new Y(`missing content at index ${e.content_index}`);if(r.type!==`output_text`)throw new Y(`expected content to be 'output_text', got ${r.type}`);n(`response.output_text.delta`,{...e,snapshot:r.text})}break}case`response.function_call_arguments.delta`:{let t=r.output[e.output_index];if(!t)throw new Y(`missing output at index ${e.output_index}`);t.type===`function_call`&&n(`response.function_call_arguments.delta`,{...e,snapshot:t.arguments});break}default:n(e.type,e);break}},pw=function(){if(this.ended)throw new Y(`stream has ended, this shouldn't happen`);let e=ow(this,lw,`f`);if(!e)throw new Y(`request ended without sending any events`);aw(this,lw,void 0,`f`);let t=gw(e,ow(this,cw,`f`));return aw(this,uw,t,`f`),t},mw=function(e){let t=ow(this,lw,`f`);if(!t){if(e.type!==`response.created`)throw new Y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=aw(this,lw,e.response,`f`),t}switch(e.type){case`response.output_item.added`:t.output.push(e.item);break;case`response.content_part.added`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);n.type===`message`&&n.content.push(e.part);break}case`response.output_text.delta`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);if(n.type===`message`){let t=n.content[e.content_index];if(!t)throw new Y(`missing content at index ${e.content_index}`);if(t.type!==`output_text`)throw new Y(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case`response.function_call_arguments.delta`:{let n=t.output[e.output_index];if(!n)throw new Y(`missing output at index ${e.output_index}`);n.type===`function_call`&&(n.arguments+=e.delta);break}case`response.completed`:aw(this,lw,e.response,`f`);break}return t},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on(`event`,n=>{let r=t.shift();r?r.resolve(n):e.push(n)}),this.on(`end`,()=>{n=!0;for(let e of t)e.resolve(void 0);t.length=0}),this.on(`abort`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),this.on(`error`,e=>{n=!0;for(let n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=ow(this,uw,`f`);if(!e)throw new Y(`stream ended without producing a ChatCompletion`);return e}};function gw(e,t){return XC(e,t)}var _w=class extends Xb{constructor(){super(...arguments),this.inputItems=new iw(this._client)}create(e,t){return this._client.post(`/responses`,{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>(`object`in e&&e.object===`response`&&rw(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:`*/*`,...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>ZC(t,e))}stream(e,t){return hw.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:`*/*`,...t?.headers}})}},vw=class extends Yb{};_w.InputItems=iw;var yw=class extends Xb{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,lb({body:t,...n}))}},bw=class extends Xb{constructor(){super(...arguments),this.parts=new yw(this._client)}create(e,t){return this._client.post(`/uploads`,{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}};bw.Parts=yw;const xw=async e=>{let t=await Promise.allSettled(e),n=t.filter(e=>e.status===`rejected`);if(n.length){for(let e of n)console.error(e.reason);throw Error(`${n.length} promise(s) failed - see the above errors`)}let r=[];for(let e of t)e.status===`fulfilled`&&r.push(e.value);return r};var Sw=class extends Xb{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}list(e,t={},n){return Cb(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Cw,{query:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let i=await this.retrieve(e,t,{...n,headers:r}).withResponse(),a=i.data;switch(a.status){case`in_progress`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=i.response.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Nb(e);break;case`failed`:case`completed`:return a}}}async upload(e,t,n){let r=await this._client.files.create({file:t,purpose:`assistants`},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){let r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,ww,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},Cw=class extends Yb{},ww=class extends Jb{};Sw.VectorStoreFilesPage=Cw,Sw.FileContentResponsesPage=ww;var Tw=class extends Xb{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}async createAndPoll(e,t,n){let r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return Cb(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Cw,{query:n,...r,headers:{"OpenAI-Beta":`assistants=v2`,...r?.headers}})}async poll(e,t,n){let r={...n?.headers,"X-Stainless-Poll-Helper":`true`};for(n?.pollIntervalMs&&(r[`X-Stainless-Custom-Poll-Interval`]=n.pollIntervalMs.toString());;){let{data:i,response:a}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(i.status){case`in_progress`:let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{let t=a.headers.get(`openai-poll-after-ms`);if(t){let n=parseInt(t);isNaN(n)||(e=n)}}await Nb(e);break;case`failed`:case`cancelled`:case`completed`:return i}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=r?.maxConcurrency??5,a=Math.min(i,t.length),o=this._client,s=t.values(),c=[...n];async function l(e){for(let t of e){let e=await o.files.create({file:t,purpose:`assistants`},r);c.push(e.id)}}return await xw(Array(a).fill(s).map(l)),await this.createAndPoll(e,{file_ids:c})}},Ew=class extends Xb{constructor(){super(...arguments),this.files=new Sw(this._client),this.fileBatches=new Tw(this._client)}create(e,t){return this._client.post(`/vector_stores`,{body:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}list(e={},t){return Cb(e)?this.list({},e):this._client.getAPIList(`/vector_stores`,Dw,{query:e,...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":`assistants=v2`,...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,Ow,{body:t,method:`post`,...n,headers:{"OpenAI-Beta":`assistants=v2`,...n?.headers}})}},Dw=class extends Yb{},Ow=class extends Jb{};Ew.VectorStoresPage=Dw,Ew.VectorStoreSearchResponsesPage=Ow,Ew.Files=Sw,Ew.VectorStoreFilesPage=Cw,Ew.FileContentResponsesPage=ww,Ew.FileBatches=Tw;var kw,Aw=class extends vb{constructor({baseURL:e=Ib(`OPENAI_BASE_URL`),apiKey:t=Ib(`OPENAI_API_KEY`),organization:n=Ib(`OPENAI_ORG_ID`)??null,project:r=Ib(`OPENAI_PROJECT_ID`)??null,...i}={}){if(t===void 0)throw new Y(`The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).`);let a={apiKey:t,organization:n,project:r,...i,baseURL:e||`https://api.openai.com/v1`};if(!a.dangerouslyAllowBrowser&&Ub())throw new Y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new _C(this),this.chat=new tx(this),this.embeddings=new CC(this),this.files=new AC(this),this.images=new KC(this),this.audio=new ax(this),this.moderations=new YC(this),this.models=new qC(this),this.fineTuning=new UC(this),this.graders=new GC(this),this.vectorStores=new Ew(this),this.beta=new gC(this),this.batches=new ox(this),this.uploads=new bw(this),this.responses=new _w(this),this.evals=new OC(this),this.containers=new xC(this),this._options=a,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return uy(e,{arrayFormat:`brackets`})}};kw=Aw,Aw.OpenAI=kw,Aw.DEFAULT_TIMEOUT=6e5,Aw.OpenAIError=Y,Aw.APIError=Ey,Aw.APIConnectionError=Oy,Aw.APIConnectionTimeoutError=ky,Aw.APIUserAbortError=Dy,Aw.NotFoundError=Ny,Aw.ConflictError=Py,Aw.RateLimitError=Iy,Aw.BadRequestError=Ay,Aw.AuthenticationError=jy,Aw.InternalServerError=Ly,Aw.PermissionDeniedError=My,Aw.UnprocessableEntityError=Fy,Aw.toFile=nb,Aw.fileFromPath=by,Aw.Completions=_C,Aw.Chat=tx,Aw.ChatCompletionsPage=$b,Aw.Embeddings=CC,Aw.Files=AC,Aw.FileObjectsPage=jC,Aw.Images=KC,Aw.Audio=ax,Aw.Moderations=YC,Aw.Models=qC,Aw.ModelsPage=JC,Aw.FineTuning=UC,Aw.Graders=GC,Aw.VectorStores=Ew,Aw.VectorStoresPage=Dw,Aw.VectorStoreSearchResponsesPage=Ow,Aw.Beta=gC,Aw.Batches=ox,Aw.BatchesPage=sx,Aw.Uploads=bw,Aw.Responses=_w,Aw.Evals=OC,Aw.EvalListResponsesPage=kC,Aw.Containers=xC,Aw.ContainerListResponsesPage=SC;var jw=Aw,Mw=e=>e.replace(/\/+$/,``),Nw=class{name;defaultModel;baseUrl;apiKey;client;constructor(e,t){this.name=e,this.baseUrl=Mw(t?.baseUrl||`https://api.openai.com/v1`),this.apiKey=t?.apiKey,this.defaultModel=t?.defaultModel||`gpt-4o-mini`,this.client=new jw({apiKey:this.apiKey||``,baseURL:this.baseUrl,defaultHeaders:t?.headers&&Object.keys(t.headers).length?t.headers:void 0,dangerouslyAllowBrowser:!0})}mapMessage(e){switch(e.role){case`system`:case`user`:return{role:e.role,content:e.content};case`assistant`:return{role:`assistant`,content:e.content,name:e.name,tool_calls:e.toolCalls};case`tool`:return{role:`tool`,content:e.content,tool_call_id:e.name||`tool-call-${Math.random().toString(36).slice(2)}`};default:return{role:`user`,content:e.content}}}async chat(e){let t=e.model||this.defaultModel;if(!t)throw Error(`Provider "${this.name}" 未配置模型`);if(!this.apiKey)throw Error(`Provider "${this.name}" 未配置 API Key`);let n=(await this.client.chat.completions.create({model:t,messages:(e.messages||[]).map(e=>this.mapMessage(e)),tools:e.tools?.map(e=>({type:e.type,function:{name:e.function.name,description:e.function.description,parameters:e.function.parameters}}))})).choices?.[0]?.message,r={messages:[]};if(n){let e=n.name;r.messages.push({role:n.role,content:n.content??``,name:e}),n.tool_calls&&n.tool_calls.length&&(r.toolCalls=n.tool_calls.map(e=>({id:e.id,type:e.type,function:{name:e.function.name,arguments:e.function.arguments}})))}return r}async chatStream(e){let t=e.model||this.defaultModel;if(!t)throw Error(`Provider "${this.name}" 未配置模型`);if(!this.apiKey)throw Error(`Provider "${this.name}" 未配置 API Key`);let n=await this.client.chat.completions.create({model:t,messages:(e.messages||[]).map(e=>this.mapMessage(e)),tools:e.tools?.map(e=>({type:e.type,function:{name:e.function.name,description:e.function.description,parameters:e.function.parameters}})),stream:!0});async function*r(){for await(let e of n)yield{choices:e.choices?.map(e=>({delta:{content:e.delta?.content,tool_calls:e.delta?.tool_calls?.map(e=>({id:e.id,index:e.index??0,type:e.type,function:{name:e.function?.name,arguments:e.function?.arguments}}))},finish_reason:e.finish_reason}))}}return r()}};const Pw={openai:{baseUrl:`https://api.openai.com/v1`,apiKey:void 0,defaultModel:`gpt-4o-mini`},dashscope:{baseUrl:`https://dashscope.aliyuncs.com/compatible-mode/v1`,apiKey:`sk-06c61fc3bb2543069ed235e2df877f8a`,defaultModel:`qwen3-max`},openrouter:{baseUrl:`https://openrouter.ai/api/v1`,apiKey:void 0,defaultModel:`gpt-4o-mini`},deepseek:{baseUrl:`https://api.deepseek.com/v1`,apiKey:void 0,defaultModel:`deepseek-3.2`},kimi:{baseUrl:`https://api.moonshot.cn/v1`,apiKey:void 0,defaultModel:`kimi-k2-thingking`},glm:{baseUrl:`https://open.bigmodel.cn/api/paas/v4`,apiKey:void 0,defaultModel:`glm-4.6`}},Fw=new class{serviceOptions;providerCache=new Map;defaultProvider;defaultProviderName;constructor(e){if(this.serviceOptions=e,e?.provider){this.defaultProvider=e.provider,this.defaultProviderName=e.providerName||e.provider.name||`openai`,this.providerCache.set(this.defaultProviderName,e.provider);return}let t=e?.providerName||`dashscope`;this.defaultProviderName=t;let n=this.resolveProvider(t);this.defaultProvider=n,this.providerCache.set(t,n)}resolveProvider(e){let t=Pw[e];if(!t)throw Error(`未识别的 AI provider: ${e}`);return new Nw(e,{baseUrl:this.serviceOptions?.baseUrl||t.baseUrl,apiKey:this.serviceOptions?.apiKey||t.apiKey,defaultModel:this.serviceOptions?.model||t.defaultModel})}getProvider(e){if(!e)return this.defaultProvider;let t=this.providerCache.get(e);if(t)return t;let n=this.resolveProvider(e);return this.providerCache.set(e,n),n}parseModel(e){if(!e)return{provider:this.defaultProviderName,model:void 0};let t=e.split(`/`);if(t.length>1){let e=t[0];if(Pw[e])return{provider:e,model:t.slice(1).join(`/`)||void 0}}return{provider:this.defaultProviderName,model:e}}async chat(e){let{provider:t,model:n}=this.parseModel(e.model);return this.getProvider(t).chat({...e,model:n})}async chatStream(e,t){let{provider:n,model:r}=this.parseModel(e.model),i=await this.getProvider(n).chatStream({...e,model:r}),a=``,o=[];for await(let e of i){let n=e.choices?.[0]?.delta;if(n&&(n.content&&(a+=n.content,t(n.content)),n.tool_calls))for(let e of n.tool_calls){let t=e.index??0;o[t]||(o[t]={id:e.id||``,type:`function`,function:{name:``,arguments:``}}),e.function?.name&&(o[t].function.name+=e.function.name),e.function?.arguments&&(o[t].function.arguments+=e.function.arguments)}}return{messages:[{role:`assistant`,content:a}],toolCalls:o.length>0?o:void 0}}async chatStreamChunks(e){let{provider:t,model:n}=this.parseModel(e.model);return this.getProvider(t).chatStream({...e,model:n})}};var Iw=class{model;constructor(e=`gpt-4o-mini`){this.model=e}async callAPI(e,t){let n=(await Fw.chat({model:this.model,messages:e})).messages[0];if(!n)throw Error(`AI 网关未返回任何消息`);return n.content}async generateText(e){return this.callAPI([{role:`user`,content:e}])}async generateJSONResponse(e){return this.callAPI([{role:`user`,content:e}],{type:`json_object`})}async generateSceneDescription(e,t){let n=`${t.length?`之前的情节：
`+t.join(`
`)+`

`:``}基于以下内容，请详细描述一个完整的场景或情节：${e}
要求：
1. 保持与之前情节的连贯性
2. 添加细节描述，包括环境、人物状态、动作等
3. 控制在200字以内`;return this.callAPI([{role:`user`,content:n}])}async generateDivergentOptions(e,t){let n=`${t.length?`之前的情节：
`+t.join(`
`)+`

`:``}当前情节：${e}
    
请提供3个合理的剧情发展方向：
1. 每个方向都要简短但具体
2. 确保与已有情节连贯
3. 每个方向都要有独特性`;return this.callAPI([{role:`user`,content:n}])}};function Lw({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)(``),[s,c]=(0,V.useState)(!1),{toast:l}=pd(),u=new Iw(`gpt-4o-mini`);return(0,V.useEffect)(()=>{(async()=>{try{let e=await t();e&&i(e.quotes||[])}catch(e){console.error(`Error loading data:`,e),l({title:n(`quotes.loadFailed`),description:n(`quotes.loadFailedDesc`),variant:`destructive`})}})()},[t,n,l]),(0,V.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({quotes:r})}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[r,e]),(0,H.jsx)(`div`,{className:`min-h-screen bg-gray-50 p-4`,children:(0,H.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,H.jsxs)(zv,{className:`mb-8`,children:[(0,H.jsxs)(Bv,{children:[(0,H.jsx)(Vv,{children:`AI名言生成器`}),(0,H.jsx)(Hv,{children:`生成富有哲理的名言`})]}),(0,H.jsxs)(Uv,{className:`space-y-4`,children:[(0,H.jsx)(fm,{placeholder:`输入主题或类别（可选）`,value:a,onChange:e=>o(e.target.value)}),(0,H.jsx)(_c,{onClick:async()=>{c(!0);try{let e=`创作一句极具洞察力和启发性的观点或思考。${a?`围绕主题：${a}`:``}

要求：
1. 内容要有独特视角，展现深刻的思考
2. 可以是反直觉的洞察，或是对常见现象的重新诠释
3. 语言要简练有力，一针见血
4. 可以挑战传统观点，但要有说服力
5. 创造一个虚构的作者（可以是中文名或英文名）
6. 严格按照以下JSON格式输出，不要包含其他内容：
{
  "content": "你的洞察/思考内容",
  "author": "作者名字"
}`,t=await u.generateText(e),n;try{let e=t.trim().replace(/```json\n?|\n?```/g,``);if(n=JSON.parse(e),!n.content||!n.author)throw Error(`响应格式不正确`)}catch(e){throw console.error(`Parse error:`,e),console.log(`Raw response:`,t),Error(`AI响应格式错误`)}let r={id:Date.now().toString(),content:n.content,author:n.author,category:a||`通用`,timestamp:new Date().toISOString()};i(e=>[r,...e]),o(``),l({title:`生成成功`,description:`新的名言已生成`})}catch(e){console.error(`Error:`,e),l({title:`生成失败`,description:e instanceof Error?e.message:`生成名言时出错，请重试`,variant:`destructive`})}finally{c(!1)}},disabled:s,className:`w-full`,children:s?`生成中...`:`生成名言`})]})]}),(0,H.jsx)(`div`,{className:`space-y-4`,children:r.map(e=>(0,H.jsx)(zv,{className:`bg-white`,children:(0,H.jsxs)(Uv,{className:`pt-6`,children:[(0,H.jsxs)(`blockquote`,{className:`border-l-4 border-blue-500 pl-4 italic`,children:[(0,H.jsx)(`p`,{className:`text-lg text-gray-800 mb-2`,children:e.content}),(0,H.jsx)(`footer`,{className:`text-right`,children:(0,H.jsxs)(`cite`,{className:`text-gray-600`,children:[`—— `,e.author]})})]}),(0,H.jsxs)(`div`,{className:`mt-4 text-sm text-gray-500 flex justify-between`,children:[(0,H.jsx)(`span`,{children:e.category}),(0,H.jsx)(`time`,{children:new Date(e.timestamp).toLocaleString()})]})]})},e.id))})]})})}const Rw=({uri:e})=>e?(0,H.jsx)(Lw,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{quotes:[]}}}}):(0,H.jsx)(`div`,{children:`uri is required`}),zw=Lm({initilize(e){e.componentService.register(`ai-quotes`,Rw),Rv.register({id:`ai-quotes`,label:J(`apps.aiQuotes`),match:[`.aiquotes.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`ai-quotes:${t}`,title:`${J(`apps.aiQuotes`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-quotes`,props:{uri:t}}})}})}});function Bw(e,[t,n]){return Math.min(n,Math.max(t,e))}var Vw=V.createContext(void 0);function Hw(e){let t=V.useContext(Vw);return e||t||`ltr`}function Uw(e){let t=V.useRef({value:e,previous:e});return V.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ww=t(k(),1),Gw=[` `,`Enter`,`ArrowUp`,`ArrowDown`],Kw=[` `,`Enter`],qw=`Select`,[Jw,Yw,Xw]=md(qw),[Zw,Qw]=ot(qw,[Xw,dt]),$w=dt(),[eT,tT]=Zw(qw),[nT,rT]=Zw(qw),iT=e=>{let{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:m}=e,h=$w(t),[g,_]=V.useState(null),[v,y]=V.useState(null),[b,x]=V.useState(!1),S=Hw(l),[C,w]=Tt({prop:r,defaultProp:i??!1,onChange:a,caller:qw}),[T,E]=Tt({prop:o,defaultProp:s,onChange:c,caller:qw}),D=V.useRef(null),O=g?m||!!g.closest(`form`):!0,[k,A]=V.useState(new Set),j=Array.from(k).map(e=>e.props.value).join(`;`);return(0,H.jsx)(Pt,{...h,children:(0,H.jsxs)(eT,{required:p,scope:t,trigger:g,onTriggerChange:_,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:x,contentId:Ze(),value:T,onValueChange:E,open:C,onOpenChange:w,dir:S,triggerPointerDownPosRef:D,disabled:f,children:[(0,H.jsx)(Jw.Provider,{scope:t,children:(0,H.jsx)(nT,{scope:e.__scopeSelect,onNativeOptionAdd:V.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:V.useCallback(e=>{A(t=>{let n=new Set(t);return n.delete(e),n})},[]),children:n})}),O?(0,H.jsxs)($T,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:e=>E(e.target.value),disabled:f,form:m,children:[T===void 0?(0,H.jsx)(`option`,{value:``}):null,Array.from(k)]},j):null]})})};iT.displayName=qw;var aT=`SelectTrigger`,oT=V.forwardRef((e,t)=>{let{__scopeSelect:n,disabled:r=!1,...i}=e,a=$w(n),o=tT(aT,n),s=o.disabled||r,c=Xe(t,o.onTriggerChange),l=Yw(n),u=V.useRef(`touch`),[d,f,p]=tE(e=>{let t=l().filter(e=>!e.disabled),n=nE(t,e,t.find(e=>e.value===o.value));n!==void 0&&o.onValueChange(n.value)}),m=e=>{s||(o.onOpenChange(!0),p()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,H.jsx)(Mt,{asChild:!0,...a,children:(0,H.jsx)(B.button,{type:`button`,role:`combobox`,"aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":`none`,dir:o.dir,"data-state":o.open?`open`:`closed`,disabled:s,"data-disabled":s?``:void 0,"data-placeholder":eE(o.value)?``:void 0,...i,ref:c,onClick:z(i.onClick,e=>{e.currentTarget.focus(),u.current!==`mouse`&&m(e)}),onPointerDown:z(i.onPointerDown,e=>{u.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),e.button===0&&e.ctrlKey===!1&&e.pointerType===`mouse`&&(m(e),e.preventDefault())}),onKeyDown:z(i.onKeyDown,e=>{let t=d.current!==``;!(e.ctrlKey||e.altKey||e.metaKey)&&e.key.length===1&&f(e.key),!(t&&e.key===` `)&&Gw.includes(e.key)&&(m(),e.preventDefault())})})})});oT.displayName=aT;var sT=`SelectValue`,cT=V.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:i,children:a,placeholder:o=``,...s}=e,c=tT(sT,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=Xe(t,c.onValueNodeChange);return Nt(()=>{l(u)},[l,u]),(0,H.jsx)(B.span,{...s,ref:d,style:{pointerEvents:`none`},children:eE(c.value)?(0,H.jsx)(H.Fragment,{children:o}):a})});cT.displayName=sT;var lT=`SelectIcon`,uT=V.forwardRef((e,t)=>{let{__scopeSelect:n,children:r,...i}=e;return(0,H.jsx)(B.span,{"aria-hidden":!0,...i,ref:t,children:r||`▼`})});uT.displayName=lT;var dT=`SelectPortal`,fT=e=>(0,H.jsx)(yt,{asChild:!0,...e});fT.displayName=dT;var pT=`SelectContent`,mT=V.forwardRef((e,t)=>{let n=tT(pT,e.__scopeSelect),[r,i]=V.useState();if(Nt(()=>{i(new DocumentFragment)},[]),!n.open){let t=r;return t?Ww.createPortal((0,H.jsx)(gT,{scope:e.__scopeSelect,children:(0,H.jsx)(Jw.Slot,{scope:e.__scopeSelect,children:(0,H.jsx)(`div`,{children:e.children})})}),t):null}return(0,H.jsx)(bT,{...e,ref:t})});mT.displayName=pT;var hT=10,[gT,_T]=Zw(pT),vT=`SelectContentImpl`,yT=ut(`SelectContent.RemoveScroll`),bT=V.forwardRef((e,t)=>{let{__scopeSelect:n,position:r=`item-aligned`,onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:g,..._}=e,v=tT(pT,n),[y,b]=V.useState(null),[x,S]=V.useState(null),C=Xe(t,e=>b(e)),[w,T]=V.useState(null),[E,D]=V.useState(null),O=Yw(n),[k,A]=V.useState(!1),j=V.useRef(!1);V.useEffect(()=>{if(y)return ie(y)},[y]),yc();let M=V.useCallback(e=>{let[t,...n]=O().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(let n of e)if(n===i||(n?.scrollIntoView({block:`nearest`}),n===t&&x&&(x.scrollTop=0),n===r&&x&&(x.scrollTop=x.scrollHeight),n?.focus(),document.activeElement!==i))return},[O,x]),N=V.useCallback(()=>M([w,y]),[M,w,y]);V.useEffect(()=>{k&&N()},[k,N]);let{onOpenChange:P,triggerPointerDownPosRef:ee}=v;V.useEffect(()=>{if(y){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(ee.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():y.contains(n.target)||P(!1),document.removeEventListener(`pointermove`,t),ee.current=null};return ee.current!==null&&(document.addEventListener(`pointermove`,t),document.addEventListener(`pointerup`,n,{capture:!0,once:!0})),()=>{document.removeEventListener(`pointermove`,t),document.removeEventListener(`pointerup`,n,{capture:!0})}}},[y,P,ee]),V.useEffect(()=>{let e=()=>P(!1);return window.addEventListener(`blur`,e),window.addEventListener(`resize`,e),()=>{window.removeEventListener(`blur`,e),window.removeEventListener(`resize`,e)}},[P]);let[te,F]=tE(e=>{let t=O().filter(e=>!e.disabled),n=nE(t,e,t.find(e=>e.ref.current===document.activeElement));n&&setTimeout(()=>n.ref.current.focus())}),I=V.useCallback((e,t,n)=>{let r=!j.current&&!n;(v.value!==void 0&&v.value===t||r)&&(T(e),r&&(j.current=!0))},[v.value]),re=V.useCallback(()=>y?.focus(),[y]),ae=V.useCallback((e,t,n)=>{let r=!j.current&&!n;(v.value!==void 0&&v.value===t||r)&&D(e)},[v.value]),oe=r===`popper`?wT:ST,se=oe===wT?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:h,avoidCollisions:g}:{};return(0,H.jsx)(gT,{scope:n,content:y,viewport:x,onViewportChange:S,itemRefCallback:I,selectedItem:w,onItemLeave:re,itemTextRefCallback:ae,focusSelectedItem:N,selectedItemText:E,position:r,isPositioned:k,searchRef:te,children:(0,H.jsx)(ne,{as:yT,allowPinchZoom:!0,children:(0,H.jsx)(Tc,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:z(i,e=>{v.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,H.jsx)($e,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:(0,H.jsx)(oe,{role:`listbox`,id:v.contentId,"data-state":v.open?`open`:`closed`,dir:v.dir,onContextMenu:e=>e.preventDefault(),..._,...se,onPlaced:()=>A(!0),ref:C,style:{display:`flex`,flexDirection:`column`,outline:`none`,..._.style},onKeyDown:z(_.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if(e.key===`Tab`&&e.preventDefault(),!t&&e.key.length===1&&F(e.key),[`ArrowUp`,`ArrowDown`,`Home`,`End`].includes(e.key)){let t=O().filter(e=>!e.disabled).map(e=>e.ref.current);if([`ArrowUp`,`End`].includes(e.key)&&(t=t.slice().reverse()),[`ArrowUp`,`ArrowDown`].includes(e.key)){let n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});bT.displayName=vT;var xT=`SelectItemAlignedPosition`,ST=V.forwardRef((e,t)=>{let{__scopeSelect:n,onPlaced:r,...i}=e,a=tT(pT,n),o=_T(pT,n),[s,c]=V.useState(null),[l,u]=V.useState(null),d=Xe(t,e=>u(e)),f=Yw(n),p=V.useRef(!1),m=V.useRef(!0),{viewport:h,selectedItem:g,selectedItemText:_,focusSelectedItem:v}=o,y=V.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&h&&g&&_){let e=a.trigger.getBoundingClientRect(),t=l.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),i=_.getBoundingClientRect();if(a.dir!==`rtl`){let r=i.left-t.left,a=n.left-r,o=e.left-a,c=e.width+o,l=Math.max(c,t.width),u=window.innerWidth-hT,d=Bw(a,[hT,Math.max(hT,u-l)]);s.style.minWidth=c+`px`,s.style.left=d+`px`}else{let r=t.right-i.right,a=window.innerWidth-n.right-r,o=window.innerWidth-e.right-a,c=e.width+o,l=Math.max(c,t.width),u=window.innerWidth-hT,d=Bw(a,[hT,Math.max(hT,u-l)]);s.style.minWidth=c+`px`,s.style.right=d+`px`}let o=f(),c=window.innerHeight-hT*2,u=h.scrollHeight,d=window.getComputedStyle(l),m=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),y=parseInt(d.borderBottomWidth,10),b=parseInt(d.paddingBottom,10),x=m+v+u+b+y,S=Math.min(g.offsetHeight*5,x),C=window.getComputedStyle(h),w=parseInt(C.paddingTop,10),T=parseInt(C.paddingBottom,10),E=e.top+e.height/2-hT,D=c-E,O=g.offsetHeight/2,k=g.offsetTop+O,A=m+v+k,j=x-A;if(A<=E){let e=o.length>0&&g===o[o.length-1].ref.current;s.style.bottom=`0px`;let t=l.clientHeight-h.offsetTop-h.offsetHeight,n=A+Math.max(D,O+(e?T:0)+t+y);s.style.height=n+`px`}else{let e=o.length>0&&g===o[0].ref.current;s.style.top=`0px`;let t=Math.max(E,m+h.offsetTop+(e?w:0)+O)+j;s.style.height=t+`px`,h.scrollTop=A-E+h.offsetTop}s.style.margin=`${hT}px 0`,s.style.minHeight=S+`px`,s.style.maxHeight=c+`px`,r?.(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,h,g,_,a.dir,r]);Nt(()=>y(),[y]);let[b,x]=V.useState();return Nt(()=>{l&&x(window.getComputedStyle(l).zIndex)},[l]),(0,H.jsx)(TT,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:V.useCallback(e=>{e&&m.current===!0&&(y(),v?.(),m.current=!1)},[y,v]),children:(0,H.jsx)(`div`,{ref:c,style:{display:`flex`,flexDirection:`column`,position:`fixed`,zIndex:b},children:(0,H.jsx)(B.div,{...i,ref:d,style:{boxSizing:`border-box`,maxHeight:`100%`,...i.style}})})})});ST.displayName=xT;var CT=`SelectPopperPosition`,wT=V.forwardRef((e,t)=>{let{__scopeSelect:n,align:r=`start`,collisionPadding:i=hT,...a}=e,o=$w(n);return(0,H.jsx)(bt,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:`border-box`,...a.style,"--radix-select-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-select-content-available-width":`var(--radix-popper-available-width)`,"--radix-select-content-available-height":`var(--radix-popper-available-height)`,"--radix-select-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-select-trigger-height":`var(--radix-popper-anchor-height)`}})});wT.displayName=CT;var[TT,ET]=Zw(pT,{}),DT=`SelectViewport`,OT=V.forwardRef((e,t)=>{let{__scopeSelect:n,nonce:r,...i}=e,a=_T(DT,n),o=ET(DT,n),s=Xe(t,a.onViewportChange),c=V.useRef(0);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`style`,{dangerouslySetInnerHTML:{__html:`[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}`},nonce:r}),(0,H.jsx)(Jw.Slot,{scope:n,children:(0,H.jsx)(B.div,{"data-radix-select-viewport":``,role:`presentation`,...i,ref:s,style:{position:`relative`,flex:1,overflow:`hidden auto`,...i.style},onScroll:z(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=o;if(r?.current&&n){let e=Math.abs(c.current-t.scrollTop);if(e>0){let r=window.innerHeight-hT*2,i=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),o=Math.max(i,a);if(o<r){let i=o+e,a=Math.min(r,i),s=i-a;n.style.height=a+`px`,n.style.bottom===`0px`&&(t.scrollTop=s>0?s:0,n.style.justifyContent=`flex-end`)}}}c.current=t.scrollTop})})})]})});OT.displayName=DT;var kT=`SelectGroup`,[AT,jT]=Zw(kT),MT=V.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=Ze();return(0,H.jsx)(AT,{scope:n,id:i,children:(0,H.jsx)(B.div,{role:`group`,"aria-labelledby":i,...r,ref:t})})});MT.displayName=kT;var NT=`SelectLabel`,PT=V.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=jT(NT,n);return(0,H.jsx)(B.div,{id:i.id,...r,ref:t})});PT.displayName=NT;var FT=`SelectItem`,[IT,LT]=Zw(FT),RT=V.forwardRef((e,t)=>{let{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,s=tT(FT,n),c=_T(FT,n),l=s.value===r,[u,d]=V.useState(a??``),[f,p]=V.useState(!1),m=Xe(t,e=>c.itemRefCallback?.(e,r,i)),h=Ze(),g=V.useRef(`touch`),_=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(r===``)throw Error(`A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.`);return(0,H.jsx)(IT,{scope:n,value:r,disabled:i,textId:h,isSelected:l,onItemTextChange:V.useCallback(e=>{d(t=>t||(e?.textContent??``).trim())},[]),children:(0,H.jsx)(Jw.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:(0,H.jsx)(B.div,{role:`option`,"aria-labelledby":h,"data-highlighted":f?``:void 0,"aria-selected":l&&f,"data-state":l?`checked`:`unchecked`,"aria-disabled":i||void 0,"data-disabled":i?``:void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:z(o.onFocus,()=>p(!0)),onBlur:z(o.onBlur,()=>p(!1)),onClick:z(o.onClick,()=>{g.current!==`mouse`&&_()}),onPointerUp:z(o.onPointerUp,()=>{g.current===`mouse`&&_()}),onPointerDown:z(o.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:z(o.onPointerMove,e=>{g.current=e.pointerType,i?c.onItemLeave?.():g.current===`mouse`&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:z(o.onKeyDown,e=>{c.searchRef?.current!==``&&e.key===` `||(Kw.includes(e.key)&&_(),e.key===` `&&e.preventDefault())})})})})});RT.displayName=FT;var zT=`SelectItemText`,BT=V.forwardRef((e,t)=>{let{__scopeSelect:n,className:r,style:i,...a}=e,o=tT(zT,n),s=_T(zT,n),c=LT(zT,n),l=rT(zT,n),[u,d]=V.useState(null),f=Xe(t,e=>d(e),c.onItemTextChange,e=>s.itemTextRefCallback?.(e,c.value,c.disabled)),p=u?.textContent,m=V.useMemo(()=>(0,H.jsx)(`option`,{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:g}=l;return Nt(()=>(h(m),()=>g(m)),[h,g,m]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(B.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ww.createPortal(a.children,o.valueNode):null]})});BT.displayName=zT;var VT=`SelectItemIndicator`,HT=V.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return LT(VT,n).isSelected?(0,H.jsx)(B.span,{"aria-hidden":!0,...r,ref:t}):null});HT.displayName=VT;var UT=`SelectScrollUpButton`,WT=V.forwardRef((e,t)=>{let n=_T(UT,e.__scopeSelect),r=ET(UT,e.__scopeSelect),[i,a]=V.useState(!1),o=Xe(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let e=function(){a(t.scrollTop>0)},t=n.viewport;return e(),t.addEventListener(`scroll`,e),()=>t.removeEventListener(`scroll`,e)}},[n.viewport,n.isPositioned]),i?(0,H.jsx)(qT,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop-=t.offsetHeight)}}):null});WT.displayName=UT;var GT=`SelectScrollDownButton`,KT=V.forwardRef((e,t)=>{let n=_T(GT,e.__scopeSelect),r=ET(GT,e.__scopeSelect),[i,a]=V.useState(!1),o=Xe(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;a(Math.ceil(t.scrollTop)<e)},t=n.viewport;return e(),t.addEventListener(`scroll`,e),()=>t.removeEventListener(`scroll`,e)}},[n.viewport,n.isPositioned]),i?(0,H.jsx)(qT,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop+=t.offsetHeight)}}):null});KT.displayName=GT;var qT=V.forwardRef((e,t)=>{let{__scopeSelect:n,onAutoScroll:r,...i}=e,a=_T(`SelectScrollButton`,n),o=V.useRef(null),s=Yw(n),c=V.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return V.useEffect(()=>()=>c(),[c]),Nt(()=>{s().find(e=>e.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:`nearest`})},[s]),(0,H.jsx)(B.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:z(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:z(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:z(i.onPointerLeave,()=>{c()})})}),JT=`SelectSeparator`,YT=V.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e;return(0,H.jsx)(B.div,{"aria-hidden":!0,...r,ref:t})});YT.displayName=JT;var XT=`SelectArrow`,ZT=V.forwardRef((e,t)=>{let{__scopeSelect:n,...r}=e,i=$w(n),a=tT(XT,n),o=_T(XT,n);return a.open&&o.position===`popper`?(0,H.jsx)(Ft,{...i,...r,ref:t}):null});ZT.displayName=XT;var QT=`SelectBubbleInput`,$T=V.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{let i=V.useRef(null),a=Xe(r,i),o=Uw(t);return V.useEffect(()=>{let e=i.current;if(!e)return;let n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,`value`).set;if(o!==t&&r){let n=new Event(`change`,{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[o,t]),(0,H.jsx)(B.select,{...n,style:{...Ct,...n.style},ref:a,defaultValue:t})});$T.displayName=QT;function eE(e){return e===``||e===void 0}function tE(e){let t=st(e),n=V.useRef(``),r=V.useRef(0),i=V.useCallback(e=>{let i=n.current+e;t(i),(function e(t){n.current=t,window.clearTimeout(r.current),t!==``&&(r.current=window.setTimeout(()=>e(``),1e3))})(i)},[t]),a=V.useCallback(()=>{n.current=``,window.clearTimeout(r.current)},[]);return V.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function nE(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,a=rE(e,Math.max(i,0));r.length===1&&(a=a.filter(e=>e!==n));let o=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return o===n?void 0:o}function rE(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var iE=iT,aE=oT,oE=cT,sE=uT,cE=fT,lE=mT,uE=OT,dE=PT,fE=RT,pE=BT,mE=HT,hE=WT,gE=KT,_E=YT,vE=iE,yE=oE,bE=V.forwardRef(({className:e,children:t,...n},r)=>(0,H.jsxs)(aE,{ref:r,className:G(`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1`,e),...n,children:[t,(0,H.jsx)(sE,{asChild:!0,children:(0,H.jsx)(Jl,{className:`h-4 w-4 opacity-50`})})]}));bE.displayName=aE.displayName;var xE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(hE,{ref:n,className:G(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,H.jsx)(Zl,{className:`h-4 w-4`})}));xE.displayName=hE.displayName;var SE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(gE,{ref:n,className:G(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,H.jsx)(Jl,{className:`h-4 w-4`})}));SE.displayName=gE.displayName;var CE=V.forwardRef(({className:e,children:t,position:n=`popper`,...r},i)=>(0,H.jsx)(cE,{children:(0,H.jsxs)(lE,{ref:i,className:G(`relative z-40 max-h-[300px] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,n===`popper`&&`data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1`,e),position:n,...r,children:[(0,H.jsx)(xE,{}),(0,H.jsx)(uE,{className:G(`p-1`,n===`popper`&&`h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]`),children:t}),(0,H.jsx)(SE,{})]})}));CE.displayName=lE.displayName;var wE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(dE,{ref:n,className:G(`py-1.5 pl-8 pr-2 text-sm font-semibold`,e),...t}));wE.displayName=dE.displayName;var TE=V.forwardRef(({className:e,children:t,...n},r)=>(0,H.jsxs)(fE,{ref:r,className:G(`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,H.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,H.jsx)(mE,{children:(0,H.jsx)(ql,{className:`h-4 w-4`})})}),(0,H.jsx)(pE,{children:t})]}));TE.displayName=fE.displayName;var EE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(_E,{ref:n,className:G(`-mx-1 my-1 h-px bg-muted`,e),...t}));EE.displayName=_E.displayName;var DE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(`textarea`,{className:G(`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:n,...t}));DE.displayName=`Textarea`;var OE=(e,t,n)=>{let r=e.scrollTop,i=e.scrollHeight-r-e.clientHeight<=t;return{nextScrollTop:r,shouldStick:i,shouldUnstick:!i&&r<n}},kE=e=>e.firstElementChild||e,AE=class{container=null;lastScrollTop=0;threshold;resizeObserver;rafId=null;isSticky$;containerRef;constructor(e=20){this.threshold=e,this.isSticky$=new xo(!0),this.containerRef=e=>{e?this.attach(e):this.detach()}}getStickySnapshot(){return this.isSticky$.getValue()}setThreshold(e){this.threshold!==e&&(this.threshold=e,this.evaluateStickiness())}attach(e){if(this.container===e){this.evaluateStickiness();return}this.detach(),this.container=e,this.lastScrollTop=e.scrollTop,e.addEventListener(`scroll`,this.handleScroll,{passive:!0}),this.observeResizes(),this.evaluateStickiness()}detach(){this.container&&=(this.container.removeEventListener(`scroll`,this.handleScroll),this.teardownResizeObserver(),null)}setSticky=e=>{this.commitSticky(e)};setStickyAction=e=>{let t=typeof e==`function`?e(this.getStickySnapshot()):e;this.setSticky(t)};scrollToBottom=(e=`smooth`)=>{this.container&&this.container.scrollTo({top:this.container.scrollHeight,behavior:e})};notifyNewItem=()=>{this.ensureStickyScroll(`auto`)};handleScroll=()=>{this.evaluateStickiness()};evaluateStickiness(){if(!this.container)return;let e=OE(this.container,this.threshold,this.lastScrollTop);if(this.lastScrollTop=e.nextScrollTop,e.shouldStick){this.commitSticky(!0);return}e.shouldUnstick&&this.commitSticky(!1)}commitSticky(e){this.isSticky$.getValue()!==e&&this.isSticky$.next(e)}observeResizes(){!this.container||typeof ResizeObserver>`u`||(this.resizeObserver=new ResizeObserver(()=>{this.isSticky$.getValue()&&(this.cancelAnimation(),this.rafId=requestAnimationFrame(()=>this.ensureStickyScroll(`auto`)))}),this.resizeObserver.observe(kE(this.container)))}ensureStickyScroll(e=`auto`){this.isSticky$.getValue()&&this.scrollToBottom(e)}teardownResizeObserver(){this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.cancelAnimation()}cancelAnimation(){this.rafId!=null&&(cancelAnimationFrame(this.rafId),this.rafId=null)}};function jE(e){let[t,n]=(0,V.useState)(()=>e.getValue());return(0,V.useEffect)(()=>{let t=e.subscribe(n);return()=>t.unsubscribe()},[e]),t}function ME(e){let{threshold:t=20}=e||{},n=(0,V.useRef)(null);n.current?n.current.setThreshold(t):n.current=new AE(t);let r=n.current,i=jE(r.isSticky$);return{containerRef:r.containerRef,isSticky:i,setIsSticky:r.setStickyAction,scrollToBottom:r.scrollToBottom,notifyNewItem:r.notifyNewItem}}var NE=[{id:`gpt-4o`,name:`GPT-4O`},{id:`gpt-4o-mini`,name:`GPT-4O Mini`},{id:`gpt-4`,name:`GPT-4`},{id:`gpt-4-turbo-preview`,name:`GPT-4 Turbo`},{id:`gpt-3.5-turbo`,name:`GPT-3.5 Turbo`}];function PE({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)(``),[a,o]=(0,V.useState)(!1),[s,c]=(0,V.useState)([]),[l,u]=(0,V.useState)(null),[d,f]=(0,V.useState)(``),{toast:p}=pd(),[m,h]=(0,V.useState)(`gpt-4o-mini`),g=(0,V.useMemo)(()=>new Iw(m),[m]),{containerRef:_,notifyNewItem:v,scrollToBottom:y,setIsSticky:b}=ME({threshold:80});(0,V.useEffect)(()=>{(async()=>{try{let e=await t();e&&(c(e.conversation||[]),h(e.selectedModel||`gpt-4o-mini`))}catch(e){console.error(`Error loading data:`,e),p({title:n(`story.loadDataFailed`),description:n(`story.loadDataFailedDesc`),variant:`destructive`})}})()},[t,n,p]),(0,V.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({conversation:s,selectedModel:m}),console.log(`Auto saved successfully`)}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[s,m,e]);let x=async()=>{if(!r.trim()){p({title:n(`story.error`),description:n(`story.enterContent`),variant:`destructive`});return}o(!0);try{let e=T(),t=await g.generateSceneDescription(r,e),n=await g.generateDivergentOptions(t,[...e,t]);c(e=>[...e,{type:`user`,content:r},{type:`scene`,content:t},{type:`divergent`,content:n}]),i(``)}catch(e){console.error(`Error:`,e),p({title:n(`story.generateFailed`),description:n(`story.generateFailedDesc`),variant:`destructive`})}finally{o(!1)}},S=e=>{u(e)},C=async()=>{if(!l){p({title:n(`story.error`),description:n(`story.selectDirection`),variant:`destructive`});return}o(!0);try{let e=d.trim()?`${l}: ${d}`:l,t=T(),n=await g.generateSceneDescription(e,t),r=await g.generateDivergentOptions(n,[...t,n]);c(t=>[...t,{type:`user`,content:e},{type:`scene`,content:n},{type:`divergent`,content:r}]),u(null),f(``)}catch(e){console.error(`Error:`,e),p({title:`生成失败`,description:`无法开始新一轮对话，请重试。`})}finally{o(!1)}},w=(e,t)=>{let n={};switch(e.type){case`user`:return(0,H.jsxs)(zv,{className:`w-full mb-4 bg-slate-50 border-slate-200 shadow-sm`,children:[(0,H.jsx)(Bv,{className:`pb-2`,children:(0,H.jsx)(Vv,{className:`text-sm text-slate-600`,children:`用户输入`})}),(0,H.jsx)(Uv,{children:(0,H.jsx)(`p`,{className:`text-slate-800`,children:e.content})})]},t);case`scene`:return(0,H.jsxs)(zv,{className:`w-full mb-4 bg-white border-blue-100 shadow-md`,children:[(0,H.jsxs)(Bv,{className:`pb-2`,children:[(0,H.jsx)(Vv,{className:`text-lg text-blue-800`,children:`情节描述`}),(0,H.jsx)(Hv,{className:`text-blue-600`,children:`当前场景与故事发展`})]}),(0,H.jsx)(Uv,{children:(0,H.jsx)(`p`,{className:`text-slate-700 leading-relaxed whitespace-pre-line`,children:e.content})})]},t);case`divergent`:{let r=e.content.split(`
`).filter(e=>e.trim().length>0).map(e=>{let[t,n]=e.split(`:`);return{title:t?.trim(),description:n?.trim()}});return(0,H.jsxs)(zv,{className:`w-full mb-4 bg-gradient-to-b from-white to-green-50 border-green-100 shadow-md`,...n,children:[(0,H.jsxs)(Bv,{className:`pb-2`,children:[(0,H.jsx)(Vv,{className:`text-lg text-green-800`,children:`故事分支`}),(0,H.jsx)(Hv,{className:`text-green-600`,children:`选择接下来的发展方向`})]}),(0,H.jsx)(Uv,{children:(0,H.jsx)(`div`,{className:`grid gap-4`,children:r.map(({title:e,description:t},n)=>(0,H.jsxs)(`div`,{className:`group relative overflow-hidden rounded-lg border border-green-100 bg-white shadow-sm 
                      hover:shadow-md hover:border-green-200 transition-all duration-200`,onClick:()=>S(e),children:[(0,H.jsxs)(`div`,{className:`p-4`,children:[(0,H.jsx)(`h4`,{className:`font-medium text-green-800 mb-2 group-hover:text-green-700`,children:e}),(0,H.jsx)(`p`,{className:`text-sm text-slate-600 leading-relaxed mb-3`,children:t}),(0,H.jsx)(_c,{size:`sm`,variant:`outline`,className:`w-full bg-white border-green-200 text-green-700 
                          hover:bg-green-50 hover:text-green-800 hover:border-green-300
                          transition-colors duration-200`,children:`选择此方向`})]}),(0,H.jsx)(`div`,{className:`absolute inset-0 border-2 border-transparent 
                      group-hover:border-green-200 rounded-lg transition-colors duration-200`})]},n))})})]},t)}default:return null}},T=(0,V.useCallback)(()=>s.filter(e=>e.type===`scene`).map(e=>e.content),[s]);(0,V.useEffect)(()=>{v()},[s,v]);let E=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),l?C():x())};return(0,H.jsxs)(`div`,{className:`flex flex-col h-full`,children:[(0,H.jsx)(`div`,{className:`flex-1 overflow-auto p-4 pb-[200px] scroll-smooth`,ref:_,onMouseEnter:()=>b(!1),onMouseLeave:()=>b(!0),children:(0,H.jsx)(`div`,{className:`max-w-3xl mx-auto space-y-4`,children:s.map((e,t)=>w(e,t))})}),(0,H.jsx)(`div`,{className:`relative bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4`,children:(0,H.jsxs)(`div`,{className:`max-w-3xl mx-auto space-y-3`,children:[(0,H.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,H.jsx)(`div`,{className:`flex-1`}),(0,H.jsxs)(vE,{value:m,onValueChange:h,children:[(0,H.jsx)(bE,{className:`w-[180px]`,children:(0,H.jsx)(yE,{placeholder:`选择模型`})}),(0,H.jsx)(CE,{children:NE.map(e=>(0,H.jsx)(TE,{value:e.id,children:e.name},e.id))})]})]}),l?(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsxs)(`div`,{className:`text-sm font-medium`,children:[`继续 `,l,` 方向`]}),(0,H.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,H.jsx)(DE,{placeholder:`输入进一步描述...`,value:d,onChange:e=>f(e.target.value),onKeyDown:E,className:`min-h-[80px]`}),(0,H.jsx)(_c,{onClick:C,disabled:a,className:`shrink-0`,onMouseDown:()=>y(`auto`),children:`开始新一轮`})]})]}):(0,H.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,H.jsx)(fm,{placeholder:`输入任意内容...`,value:r,onChange:e=>i(e.target.value),onKeyDown:E}),(0,H.jsx)(_c,{onClick:x,disabled:a,className:`shrink-0`,onMouseDown:()=>y(`auto`),children:a?`生成中...`:`发送`})]})]})})]})}const FE=({uri:e})=>(console.log(`uri`,e),e?(0,H.jsx)(PE,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}}):(0,H.jsx)(`div`,{children:`uri is required`})),IE=Lm({initilize(e){e.componentService.register(`ai-story-cards`,FE),Rv.register({id:`ai-story-cards`,label:J(`apps.aiStoryCards`),match:[`.aicard.json`],priority:100,init:t=>{console.log(`open uri:`,t),e.layoutService.pageBox.addPage({id:`ai-story-cards:${t}`,title:`${J(`apps.aiStoryCards`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-story-cards`,props:{uri:t}}})}})}});var LE=Yp,RE=Zp,zE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(Qp,{className:G(`fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t,ref:n}));zE.displayName=Qp.displayName;var BE=hc(`fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500`,{variants:{side:{top:`inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top`,bottom:`inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom`,left:`inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm`,right:`inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm`}},defaultVariants:{side:`right`}}),VE=V.forwardRef(({side:e=`right`,className:t,children:n,...r},i)=>(0,H.jsxs)(RE,{children:[(0,H.jsx)(zE,{}),(0,H.jsxs)($p,{ref:i,className:G(BE({side:e}),t),...r,children:[n,(0,H.jsxs)(nm,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary`,children:[(0,H.jsx)(Au,{className:`h-4 w-4`}),(0,H.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));VE.displayName=$p.displayName;var HE=({className:e,...t})=>(0,H.jsx)(`div`,{className:G(`flex flex-col space-y-2 text-center sm:text-left`,e),...t});HE.displayName=`SheetHeader`;var UE=({className:e,...t})=>(0,H.jsx)(`div`,{className:G(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});UE.displayName=`SheetFooter`;var WE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(em,{ref:n,className:G(`text-lg font-semibold text-foreground`,e),...t}));WE.displayName=em.displayName;var GE=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(tm,{ref:n,className:G(`text-sm text-muted-foreground`,e),...t}));GE.displayName=tm.displayName;var KE=n(((e,t)=>{(function(n,r){typeof e==`object`&&typeof t==`object`?t.exports=r(c()):typeof define==`function`&&define.amd?define(`lib`,[`react`],r):typeof e==`object`?e.lib=r(c()):n.lib=r(n.react)})(typeof self<`u`?self:e,function(e){return function(){var t={155:function(t){t.exports=e}},n={};function r(e){var i=n[e];if(i!==void 0)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})};var i={};r.r(i),r.d(i,{useReactToPrint:function(){return p}});var a=r(155);function o({level:e=`error`,messages:t,suppressErrors:n=!1}){n||(e===`error`?console.error(t):e===`warning`?console.warn(t):console.debug(t))}function s(e,t){if(t||!e){let e=document.getElementById(`printWindow`);e&&document.body.removeChild(e)}}function c(e){return e instanceof Error?e:Error(`Unknown Error`)}function l(e,t){let{documentTitle:n,onAfterPrint:r,onPrintError:i,preserveAfterPrint:a,print:l,suppressErrors:u}=t;setTimeout(()=>{if(e.contentWindow){function t(){r?.(),s(a)}if(e.contentWindow.focus(),l)l(e).then(t).catch(e=>{i?i(`print`,c(e)):o({messages:["An error was thrown by the specified `print` function"],suppressErrors:u})});else{if(e.contentWindow.print){let t=e.contentDocument?.title??``,r=e.ownerDocument.title;n&&(e.ownerDocument.title=n,e.contentDocument&&(e.contentDocument.title=n)),e.contentWindow.print(),n&&(e.ownerDocument.title=r,e.contentDocument&&(e.contentDocument.title=t))}else o({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:u});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>(navigator.userAgent??navigator.vendor??(`opera`in window&&window.opera)).match(e))?setTimeout(t,500):t()}}else o({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:u})},500)}function u(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),r=n.nextNode();for(;r;)t.push(r),r=n.nextNode();return t}function d(e,t,n){let r=u(e),i=u(t);if(r.length===i.length)for(let e=0;e<r.length;e++){let t=r[e],a=i[e],o=t.shadowRoot;if(o!==null){let e=a.attachShadow({mode:o.mode});e.innerHTML=o.innerHTML,d(o,e,n)}}else o({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:n})}function f(e,t,n,r){let{contentNode:i,clonedContentNode:a,clonedImgNodes:s,clonedVideoNodes:u,numResourcesToLoad:f,originalCanvasNodes:p}=n,{bodyClass:m,fonts:h,ignoreGlobalStyles:g,pageStyle:_,nonce:v,suppressErrors:y,copyShadowRoots:b}=r;e.onload=null;let x=e.contentDocument??e.contentWindow?.document;if(x){let n=x.body.appendChild(a);b&&d(i,n,!!y),h&&(e.contentDocument?.fonts&&e.contentWindow?.FontFace?h.forEach(n=>{let r=new FontFace(n.family,n.source,{weight:n.weight,style:n.style});e.contentDocument.fonts.add(r),r.loaded.then(()=>{t(r)}).catch(e=>{t(r,[`Failed loading the font:`,r,`Load error:`,c(e)])})}):(h.forEach(e=>{t(e)}),o({messages:[`"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page`],suppressErrors:y})));let r=_??`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`,l=x.createElement(`style`);v&&(l.setAttribute(`nonce`,v),x.head.setAttribute(`nonce`,v)),l.appendChild(x.createTextNode(r)),x.head.appendChild(l),m&&x.body.classList.add(...m.split(` `));let f=x.querySelectorAll(`canvas`);for(let e=0;e<p.length;++e){let t=p[e],n=f[e];if(n===void 0){o({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:y});continue}let r=n.getContext(`2d`);r&&r.drawImage(t,0,0)}for(let e=0;e<s.length;e++){let n=s[e],r=n.getAttribute(`src`);if(r){let e=new Image;e.onload=()=>{t(n)},e.onerror=(e,r,i,a,o)=>{t(n,[`Error loading <img>`,n,`Error`,o])},e.src=r}else t(n,[`Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.`,n])}for(let e=0;e<u.length;e++){let n=u[e];n.preload=`auto`;let r=n.getAttribute(`poster`);if(r){let e=new Image;e.onload=()=>{t(n)},e.onerror=(e,i,a,o,s)=>{t(n,[`Error loading video poster`,r,`for video`,n,`Error:`,s])},e.src=r}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(e,r,i,a,o)=>{t(n,[`Error loading video`,n,`Error`,o])},n.onstalled=()=>{t(n,[`Loading video stalled, skipping`,n])}):t(n,["Error loading video, `src` is empty",n])}let S=`select`,C=i.querySelectorAll(S),w=x.querySelectorAll(S);for(let e=0;e<C.length;e++)w[e].value=C[e].value;if(!g){let e=document.querySelectorAll(`style, link[rel~='stylesheet'], link[as='style']`);for(let n=0,r=e.length;n<r;++n){let r=e[n];if(r.tagName.toLowerCase()===`style`){let e=x.createElement(r.tagName),t=r.sheet;if(t){let i=``;try{let e=t.cssRules.length;for(let n=0;n<e;++n)typeof t.cssRules[n].cssText==`string`&&(i+=`${t.cssRules[n].cssText}\r\n`)}catch(e){o({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",r,`Original error: ${c(e).message}`],level:`warning`})}e.setAttribute(`id`,`react-to-print-${n}`),v&&e.setAttribute(`nonce`,v),e.appendChild(x.createTextNode(i)),x.head.appendChild(e)}}else if(r.getAttribute(`href`))if(r.hasAttribute(`disabled`))o({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",r],level:`warning`}),t(r);else{let e=x.createElement(r.tagName);for(let t=0,n=r.attributes.length;t<n;++t){let n=r.attributes[t];n&&e.setAttribute(n.nodeName,n.nodeValue??``)}e.onload=()=>{t(e)},e.onerror=(n,r,i,a,o)=>{t(e,[`Failed to load`,e,`Error:`,o])},v&&e.setAttribute(`nonce`,v),x.head.appendChild(e)}else o({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",r],level:`warning`}),t(r)}}}f===0&&l(e,r)}function p({bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:i,ignoreGlobalStyles:u,nonce:d,onAfterPrint:p,onBeforePrint:m,onPrintError:h,pageStyle:g,preserveAfterPrint:_,print:v,suppressErrors:y}){return(0,a.useCallback)(a=>{function b(){let s={bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:i,ignoreGlobalStyles:u,nonce:d,onAfterPrint:p,onBeforePrint:m,onPrintError:h,pageStyle:g,preserveAfterPrint:_,print:v,suppressErrors:y},c=function(){let e=document.createElement(`iframe`);return e.width=`${document.documentElement.clientWidth}px`,e.height=`${document.documentElement.clientHeight}px`,e.style.position=`absolute`,e.style.top=`-${document.documentElement.clientHeight+100}px`,e.style.left=`-${document.documentElement.clientWidth+100}px`,e.id=`printWindow`,e.srcdoc=`<!DOCTYPE html>`,e}(),b=function(e,t){let{contentRef:n,fonts:r,ignoreGlobalStyles:i,suppressErrors:a}=t,s=function({contentRef:e,optionalContent:t,suppressErrors:n}){return t&&typeof t==`function`?(e&&o({level:`warning`,messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),t()):e?e.current:void o({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:n})}({contentRef:n,optionalContent:e,suppressErrors:a});if(!s)return;let c=s.cloneNode(!0),l=document.querySelectorAll(`link[rel~='stylesheet'], link[as='style']`),u=c.querySelectorAll(`img`),d=c.querySelectorAll(`video`),f=r?r.length:0;return{contentNode:s,clonedContentNode:c,clonedImgNodes:u,clonedVideoNodes:d,numResourcesToLoad:(i?0:l.length)+u.length+d.length+f,originalCanvasNodes:s.querySelectorAll(`canvas`)}}(a,s);if(!b)return void o({messages:[`There is nothing to print`],suppressErrors:y});(function(e,t,n,r){e.onload=()=>{f(e,t,n,r)},document.body.appendChild(e)})(c,function(e,t,n){let{suppressErrors:r}=e,i=[],a=[];return function(s,c){i.includes(s)?o({level:`debug`,messages:[`Tried to mark a resource that has already been handled`,s],suppressErrors:r}):(c?(o({messages:[`"react-to-print" was unable to load a resource but will continue attempting to print the page`,...c],suppressErrors:r}),a.push(s)):i.push(s),i.length+a.length===t&&l(n,e))}}(s,b.numResourcesToLoad,c),b,s)}s(_,!0),m?m().then(()=>{b()}).catch(e=>{h?.(`onBeforePrint`,c(e))}):b()},[e,t,n,r,i,u,d,p,m,h,g,_,v,y])}return i}()})}))();function qE({resume:e}){let t=(0,V.useRef)(null),n=(0,KE.useReactToPrint)({contentRef:t,documentTitle:`${e.basics.name}_简历`,pageStyle:`
      @page {
        size: A4;
        margin: 20mm;
      }
      @media print {
        html, body {
          height: initial !important;
          overflow: initial !important;
          -webkit-print-color-adjust: exact;
        }
        
        /* 强制分页设置 */
        .page-break-after {
          page-break-after: always;
        }
        
        /* 避免元素内部分页 */
        .no-break-inside {
          break-inside: avoid;
        }
        
        /* 确保新章节从新页开始 */
        .break-before {
          break-before: page;
        }

        /* 防止孤行 */
        p, h2, h3, h4 {
          orphans: 3;
          widows: 3;
        }
      }
    `});return(0,H.jsxs)(`div`,{className:`relative`,children:[(0,H.jsxs)(`button`,{onClick:()=>n(),className:`fixed bottom-6 right-6 bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group z-50`,title:`导出PDF`,children:[(0,H.jsx)(`svg`,{className:`w-6 h-6`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,H.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4`})}),(0,H.jsx)(`span`,{className:`absolute right-full mr-2 bg-gray-800 text-white px-2 py-1 rounded text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200`,children:`导出PDF`})]}),(0,H.jsxs)(`div`,{ref:t,className:`space-y-8 px-6 mt-8 print:mt-8 print:px-8`,children:[(0,H.jsxs)(`div`,{className:`text-center border-b pb-6 print:pb-4 no-break-inside`,children:[(0,H.jsx)(`h2`,{className:`text-2xl font-bold`,children:e.basics.name}),(0,H.jsx)(`p`,{className:`text-xl text-gray-600 mt-2`,children:e.basics.title}),(0,H.jsxs)(`p`,{className:`text-sm text-gray-500 mt-2`,children:[`工作经验：`,e.basics.experience]}),(0,H.jsx)(`p`,{className:`text-gray-700 mt-4 leading-relaxed`,children:e.basics.summary})]}),(0,H.jsxs)(`div`,{className:`no-break-inside`,children:[(0,H.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,H.jsx)(`span`,{className:`bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,H.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,H.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 10V3L4 14h7v7l9-11h-7z`})})}),`专业技能`]}),(0,H.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:e.skills.map((e,t)=>(0,H.jsx)(`span`,{className:`px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm`,children:e},t))})]}),(0,H.jsxs)(`div`,{className:`break-before`,children:[(0,H.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,H.jsx)(`span`,{className:`bg-green-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,H.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,H.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z`})})}),`工作经历`]}),(0,H.jsx)(`div`,{className:`space-y-6`,children:e.experience.map((e,t)=>(0,H.jsxs)(`div`,{className:`relative pl-8 before:content-[''] before:absolute before:left-3 before:top-2 before:w-[2px] before:h-full before:bg-gray-200 no-break-inside`,children:[(0,H.jsx)(`div`,{className:`absolute left-0 top-1.5 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center`,children:(0,H.jsx)(`div`,{className:`w-3 h-3 bg-gray-400 rounded-full`})}),(0,H.jsx)(`h4`,{className:`font-semibold text-gray-800`,children:e.company}),(0,H.jsxs)(`p`,{className:`text-sm text-gray-600 mt-1`,children:[e.position,` | `,e.duration]}),(0,H.jsx)(`ul`,{className:`mt-2 space-y-1`,children:e.highlights.map((e,t)=>(0,H.jsxs)(`li`,{className:`text-gray-600 text-sm`,children:[`• `,e]},t))})]},t))})]}),(0,H.jsxs)(`div`,{className:`break-before`,children:[(0,H.jsxs)(`h3`,{className:`text-lg font-semibold mb-3 flex items-center`,children:[(0,H.jsx)(`span`,{className:`bg-purple-100 w-8 h-8 rounded-full flex items-center justify-center mr-2`,children:(0,H.jsx)(`svg`,{className:`w-4 h-4`,fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,H.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2`})})}),`项目经历`]}),(0,H.jsx)(`div`,{className:`space-y-6`,children:e.projects.map((e,t)=>(0,H.jsxs)(`div`,{className:`bg-gray-50 rounded-lg p-4 no-break-inside`,children:[(0,H.jsx)(`h4`,{className:`font-semibold text-gray-800`,children:e.name}),(0,H.jsx)(`p`,{className:`text-gray-600 mt-2 text-sm`,children:e.description}),(0,H.jsxs)(`div`,{className:`mt-3`,children:[(0,H.jsx)(`p`,{className:`text-sm font-medium text-gray-700`,children:`主要成就：`}),(0,H.jsx)(`ul`,{className:`mt-1 space-y-1`,children:e.achievements.map((e,t)=>(0,H.jsxs)(`li`,{className:`text-gray-600 text-sm`,children:[`• `,e]},t))})]}),(0,H.jsx)(`div`,{className:`mt-3 flex flex-wrap gap-2`,children:e.technologies.map((e,t)=>(0,H.jsx)(`span`,{className:`px-2 py-1 bg-white text-gray-600 rounded text-xs border`,children:e},t))})]},t))})]})]})]})}var JE=n(((e,t)=>{(function(){var n,r=`4.17.21`,i=200,a=`Unsupported core-js use. Try https://npms.io/search?q=ponyfill.`,o=`Expected a function`,s="Invalid `variable` option passed into `_.template`",c=`__lodash_hash_undefined__`,l=500,u=`__lodash_placeholder__`,d=1,f=2,p=4,m=1,h=2,g=1,_=2,v=4,y=8,b=16,x=32,S=64,C=128,w=256,T=512,E=30,D=`...`,O=800,k=16,A=1,j=2,M=3,N=1/0,P=9007199254740991,ee=17976931348623157e292,te=NaN,F=4294967295,I=F-1,ne=F>>>1,re=[[`ary`,C],[`bind`,g],[`bindKey`,_],[`curry`,y],[`curryRight`,b],[`flip`,T],[`partial`,x],[`partialRight`,S],[`rearg`,w]],ie=`[object Arguments]`,ae=`[object Array]`,oe=`[object AsyncFunction]`,se=`[object Boolean]`,ce=`[object Date]`,le=`[object DOMException]`,ue=`[object Error]`,de=`[object Function]`,fe=`[object GeneratorFunction]`,pe=`[object Map]`,me=`[object Number]`,he=`[object Null]`,ge=`[object Object]`,L=`[object Promise]`,_e=`[object Proxy]`,ve=`[object RegExp]`,ye=`[object Set]`,be=`[object String]`,xe=`[object Symbol]`,R=`[object Undefined]`,Se=`[object WeakMap]`,Ce=`[object WeakSet]`,we=`[object ArrayBuffer]`,Te=`[object DataView]`,Ee=`[object Float32Array]`,De=`[object Float64Array]`,Oe=`[object Int8Array]`,ke=`[object Int16Array]`,Ae=`[object Int32Array]`,je=`[object Uint8Array]`,Me=`[object Uint8ClampedArray]`,Ne=`[object Uint16Array]`,Pe=`[object Uint32Array]`,Fe=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,Le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,ze=/[&<>"']/g,Be=RegExp(Re.source),Ve=RegExp(ze.source),He=/<%-([\s\S]+?)%>/g,Ue=/<%([\s\S]+?)%>/g,We=/<%=([\s\S]+?)%>/g,Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ke=/^\w*$/,qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Je=/[\\^$.*+?()[\]{}|]/g,Ye=RegExp(Je.source),Xe=/^\s+/,Ze=/\s/,Qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nt=/[()=,{}\[\]\/\s]/,rt=/\\(\\)?/g,it=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,at=/\w*$/,ot=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,ct=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dt=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,pt=`\\ud800-\\udfff`,mt=`\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff`,ht=`\\u2700-\\u27bf`,gt=`a-z\\xdf-\\xf6\\xf8-\\xff`,_t=`\\xac\\xb1\\xd7\\xf7`,vt=`\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf`,yt=`\\u2000-\\u206f`,bt=` \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000`,xt=`A-Z\\xc0-\\xd6\\xd8-\\xde`,St=`\\ufe0e\\ufe0f`,Ct=_t+vt+yt+bt,wt=`['’]`,Tt=`[`+pt+`]`,Et=`[`+Ct+`]`,B=`[`+mt+`]`,Dt=`\\d+`,Ot=`[`+ht+`]`,kt=`[`+gt+`]`,At=`[^`+pt+Ct+Dt+ht+gt+xt+`]`,jt=`\\ud83c[\\udffb-\\udfff]`,Mt=`(?:`+B+`|`+jt+`)`,Nt=`[^`+pt+`]`,Pt=`(?:\\ud83c[\\udde6-\\uddff]){2}`,Ft=`[\\ud800-\\udbff][\\udc00-\\udfff]`,It=`[`+xt+`]`,Lt=`\\u200d`,Rt=`(?:`+kt+`|`+At+`)`,zt=`(?:`+It+`|`+At+`)`,Bt=`(?:`+wt+`(?:d|ll|m|re|s|t|ve))?`,Vt=`(?:`+wt+`(?:D|LL|M|RE|S|T|VE))?`,Ht=Mt+`?`,V=`[`+St+`]?`,Ut=`(?:`+Lt+`(?:`+[Nt,Pt,Ft].join(`|`)+`)`+V+Ht+`)*`,Wt=`\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])`,Gt=`\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])`,Kt=V+Ht+Ut,qt=`(?:`+[Ot,Pt,Ft].join(`|`)+`)`+Kt,H=`(?:`+[Nt+B+`?`,B,Pt,Ft,Tt].join(`|`)+`)`,Jt=RegExp(wt,`g`),Yt=RegExp(B,`g`),Xt=RegExp(jt+`(?=`+jt+`)|`+H+Kt,`g`),Zt=RegExp([It+`?`+kt+`+`+Bt+`(?=`+[Et,It,`$`].join(`|`)+`)`,zt+`+`+Vt+`(?=`+[Et,It+Rt,`$`].join(`|`)+`)`,It+`?`+Rt+`+`+Bt,It+`+`+Vt,Gt,Wt,Dt,qt].join(`|`),`g`),Qt=RegExp(`[`+Lt+pt+mt+St+`]`),$t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,en=`Array.Buffer.DataView.Date.Error.Float32Array.Float64Array.Function.Int8Array.Int16Array.Int32Array.Map.Math.Object.Promise.RegExp.Set.String.Symbol.TypeError.Uint8Array.Uint8ClampedArray.Uint16Array.Uint32Array.WeakMap._.clearTimeout.isFinite.parseInt.setTimeout`.split(`.`),tn=-1,nn={};nn[Ee]=nn[De]=nn[Oe]=nn[ke]=nn[Ae]=nn[je]=nn[Me]=nn[Ne]=nn[Pe]=!0,nn[ie]=nn[ae]=nn[we]=nn[se]=nn[Te]=nn[ce]=nn[ue]=nn[de]=nn[pe]=nn[me]=nn[ge]=nn[ve]=nn[ye]=nn[be]=nn[Se]=!1;var rn={};rn[ie]=rn[ae]=rn[we]=rn[Te]=rn[se]=rn[ce]=rn[Ee]=rn[De]=rn[Oe]=rn[ke]=rn[Ae]=rn[pe]=rn[me]=rn[ge]=rn[ve]=rn[ye]=rn[be]=rn[xe]=rn[je]=rn[Me]=rn[Ne]=rn[Pe]=!0,rn[ue]=rn[de]=rn[Se]=!1;var an={À:`A`,Á:`A`,Â:`A`,Ã:`A`,Ä:`A`,Å:`A`,à:`a`,á:`a`,â:`a`,ã:`a`,ä:`a`,å:`a`,Ç:`C`,ç:`c`,Ð:`D`,ð:`d`,È:`E`,É:`E`,Ê:`E`,Ë:`E`,è:`e`,é:`e`,ê:`e`,ë:`e`,Ì:`I`,Í:`I`,Î:`I`,Ï:`I`,ì:`i`,í:`i`,î:`i`,ï:`i`,Ñ:`N`,ñ:`n`,Ò:`O`,Ó:`O`,Ô:`O`,Õ:`O`,Ö:`O`,Ø:`O`,ò:`o`,ó:`o`,ô:`o`,õ:`o`,ö:`o`,ø:`o`,Ù:`U`,Ú:`U`,Û:`U`,Ü:`U`,ù:`u`,ú:`u`,û:`u`,ü:`u`,Ý:`Y`,ý:`y`,ÿ:`y`,Æ:`Ae`,æ:`ae`,Þ:`Th`,þ:`th`,ß:`ss`,Ā:`A`,Ă:`A`,Ą:`A`,ā:`a`,ă:`a`,ą:`a`,Ć:`C`,Ĉ:`C`,Ċ:`C`,Č:`C`,ć:`c`,ĉ:`c`,ċ:`c`,č:`c`,Ď:`D`,Đ:`D`,ď:`d`,đ:`d`,Ē:`E`,Ĕ:`E`,Ė:`E`,Ę:`E`,Ě:`E`,ē:`e`,ĕ:`e`,ė:`e`,ę:`e`,ě:`e`,Ĝ:`G`,Ğ:`G`,Ġ:`G`,Ģ:`G`,ĝ:`g`,ğ:`g`,ġ:`g`,ģ:`g`,Ĥ:`H`,Ħ:`H`,ĥ:`h`,ħ:`h`,Ĩ:`I`,Ī:`I`,Ĭ:`I`,Į:`I`,İ:`I`,ĩ:`i`,ī:`i`,ĭ:`i`,į:`i`,ı:`i`,Ĵ:`J`,ĵ:`j`,Ķ:`K`,ķ:`k`,ĸ:`k`,Ĺ:`L`,Ļ:`L`,Ľ:`L`,Ŀ:`L`,Ł:`L`,ĺ:`l`,ļ:`l`,ľ:`l`,ŀ:`l`,ł:`l`,Ń:`N`,Ņ:`N`,Ň:`N`,Ŋ:`N`,ń:`n`,ņ:`n`,ň:`n`,ŋ:`n`,Ō:`O`,Ŏ:`O`,Ő:`O`,ō:`o`,ŏ:`o`,ő:`o`,Ŕ:`R`,Ŗ:`R`,Ř:`R`,ŕ:`r`,ŗ:`r`,ř:`r`,Ś:`S`,Ŝ:`S`,Ş:`S`,Š:`S`,ś:`s`,ŝ:`s`,ş:`s`,š:`s`,Ţ:`T`,Ť:`T`,Ŧ:`T`,ţ:`t`,ť:`t`,ŧ:`t`,Ũ:`U`,Ū:`U`,Ŭ:`U`,Ů:`U`,Ű:`U`,Ų:`U`,ũ:`u`,ū:`u`,ŭ:`u`,ů:`u`,ű:`u`,ų:`u`,Ŵ:`W`,ŵ:`w`,Ŷ:`Y`,ŷ:`y`,Ÿ:`Y`,Ź:`Z`,Ż:`Z`,Ž:`Z`,ź:`z`,ż:`z`,ž:`z`,Ĳ:`IJ`,ĳ:`ij`,Œ:`Oe`,œ:`oe`,ŉ:`'n`,ſ:`s`},on={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`},sn={"&amp;":`&`,"&lt;":`<`,"&gt;":`>`,"&quot;":`"`,"&#39;":`'`},cn={"\\":`\\`,"'":`'`,"\n":`n`,"\r":`r`,"\u2028":`u2028`,"\u2029":`u2029`},ln=parseFloat,un=parseInt,dn=typeof global==`object`&&global&&global.Object===Object&&global,fn=typeof self==`object`&&self&&self.Object===Object&&self,pn=dn||fn||Function(`return this`)(),mn=typeof e==`object`&&e&&!e.nodeType&&e,hn=mn&&typeof t==`object`&&t&&!t.nodeType&&t,gn=hn&&hn.exports===mn,_n=gn&&dn.process,vn=function(){try{return hn&&hn.require&&hn.require(`util`).types||_n&&_n.binding&&_n.binding(`util`)}catch{}}(),yn=vn&&vn.isArrayBuffer,bn=vn&&vn.isDate,xn=vn&&vn.isMap,Sn=vn&&vn.isRegExp,Cn=vn&&vn.isSet,wn=vn&&vn.isTypedArray;function Tn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function En(e,t,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Dn(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function On(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}function kn(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function An(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function jn(e,t){return!!(e!=null&&e.length)&&Un(e,t,0)>-1}function Mn(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nn(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Pn(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Fn(e,t,n,r){var i=-1,a=e==null?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function In(e,t,n,r){var i=e==null?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ln(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Rn=qn(`length`);function zn(e){return e.split(``)}function Bn(e){return e.match(tt)||[]}function Vn(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Hn(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Un(e,t,n){return t===t?yr(e,t,n):Hn(e,Gn,n)}function Wn(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Gn(e){return e!==e}function Kn(e,t){var n=e==null?0:e.length;return n?Zn(e,t)/n:te}function qn(e){return function(t){return t==null?n:t[e]}}function Jn(e){return function(t){return e==null?n:e[t]}}function Yn(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function Xn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Zn(e,t){for(var r,i=-1,a=e.length;++i<a;){var o=t(e[i]);o!==n&&(r=r===n?o:r+o)}return r}function Qn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $n(e,t){return Nn(t,function(t){return[t,e[t]]})}function er(e){return e&&e.slice(0,Cr(e)+1).replace(Xe,``)}function tr(e){return function(t){return e(t)}}function nr(e,t){return Nn(t,function(t){return e[t]})}function rr(e,t){return e.has(t)}function ir(e,t){for(var n=-1,r=e.length;++n<r&&Un(t,e[n],0)>-1;);return n}function ar(e,t){for(var n=e.length;n--&&Un(t,e[n],0)>-1;);return n}function or(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var sr=Jn(an),cr=Jn(on);function lr(e){return`\\`+cn[e]}function ur(e,t){return e==null?n:e[t]}function dr(e){return Qt.test(e)}function fr(e){return $t.test(e)}function pr(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function mr(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function hr(e,t){return function(n){return e(t(n))}}function gr(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];(o===t||o===u)&&(e[n]=u,a[i++]=n)}return a}function _r(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function vr(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function yr(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function br(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function xr(e){return dr(e)?Tr(e):Rn(e)}function Sr(e){return dr(e)?Er(e):zn(e)}function Cr(e){for(var t=e.length;t--&&Ze.test(e.charAt(t)););return t}var wr=Jn(sn);function Tr(e){for(var t=Xt.lastIndex=0;Xt.test(e);)++t;return t}function Er(e){return e.match(Xt)||[]}function Dr(e){return e.match(Zt)||[]}var Or=(function e(t){t=t==null?pn:Or.defaults(pn.Object(),t,Or.pick(pn,en));var Ze=t.Array,tt=t.Date,pt=t.Error,mt=t.Function,ht=t.Math,gt=t.Object,_t=t.RegExp,vt=t.String,yt=t.TypeError,bt=Ze.prototype,xt=mt.prototype,St=gt.prototype,Ct=t[`__core-js_shared__`],wt=xt.toString,Tt=St.hasOwnProperty,Et=0,B=function(){var e=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}(),Dt=St.toString,Ot=wt.call(gt),kt=pn._,At=_t(`^`+wt.call(Tt).replace(Je,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`),jt=gn?t.Buffer:n,Mt=t.Symbol,Nt=t.Uint8Array,Pt=jt?jt.allocUnsafe:n,Ft=hr(gt.getPrototypeOf,gt),It=gt.create,Lt=St.propertyIsEnumerable,Rt=bt.splice,zt=Mt?Mt.isConcatSpreadable:n,Bt=Mt?Mt.iterator:n,Vt=Mt?Mt.toStringTag:n,Ht=function(){try{var e=ns(gt,`defineProperty`);return e({},``,{}),e}catch{}}(),V=t.clearTimeout!==pn.clearTimeout&&t.clearTimeout,Ut=tt&&tt.now!==pn.Date.now&&tt.now,Wt=t.setTimeout!==pn.setTimeout&&t.setTimeout,Gt=ht.ceil,Kt=ht.floor,qt=gt.getOwnPropertySymbols,H=jt?jt.isBuffer:n,Xt=t.isFinite,Zt=bt.join,Qt=hr(gt.keys,gt),$t=ht.max,an=ht.min,on=tt.now,sn=t.parseInt,cn=ht.random,dn=bt.reverse,fn=ns(t,`DataView`),mn=ns(t,`Map`),hn=ns(t,`Promise`),_n=ns(t,`Set`),vn=ns(t,`WeakMap`),Rn=ns(gt,`create`),zn=vn&&new vn,Jn={},yr=Vs(fn),Tr=Vs(mn),Er=Vs(hn),kr=Vs(_n),Ar=Vs(vn),jr=Mt?Mt.prototype:n,Mr=jr?jr.valueOf:n,Nr=jr?jr.toString:n;function U(e){if(Mu(e)&&!K(e)&&!(e instanceof Lr)){if(e instanceof Ir)return e;if(Tt.call(e,`__wrapped__`))return Us(e)}return new Ir(e)}var Pr=function(){function e(){}return function(t){if(!ju(t))return{};if(It)return It(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Fr(){}function Ir(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}U.templateSettings={escape:He,evaluate:Ue,interpolate:We,variable:``,imports:{_:U}},U.prototype=Fr.prototype,U.prototype.constructor=U,Ir.prototype=Pr(Fr.prototype),Ir.prototype.constructor=Ir;function Lr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function Rr(){var e=new Lr(this.__wrapped__);return e.__actions__=mo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mo(this.__views__),e}function zr(){if(this.__filtered__){var e=new Lr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Br(){var e=this.__wrapped__.value(),t=this.__dir__,n=K(e),r=t<0,i=n?e.length:0,a=ss(0,i,this.__views__),o=a.start,s=a.end,c=s-o,l=r?s:o-1,u=this.__iteratees__,d=u.length,f=0,p=an(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return Ja(e,this.__actions__);var m=[];outer:for(;c--&&f<p;){l+=t;for(var h=-1,g=e[l];++h<d;){var _=u[h],v=_.iteratee,y=_.type,b=v(g);if(y==j)g=b;else if(!b){if(y==A)continue outer;break outer}}m[f++]=g}return m}Lr.prototype=Pr(Fr.prototype),Lr.prototype.constructor=Lr;function Vr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hr(){this.__data__=Rn?Rn(null):{},this.size=0}function Ur(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Wr(e){var t=this.__data__;if(Rn){var r=t[e];return r===c?n:r}return Tt.call(t,e)?t[e]:n}function Gr(e){var t=this.__data__;return Rn?t[e]!==n:Tt.call(t,e)}function Kr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Rn&&t===n?c:t,this}Vr.prototype.clear=Hr,Vr.prototype.delete=Ur,Vr.prototype.get=Wr,Vr.prototype.has=Gr,Vr.prototype.set=Kr;function qr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jr(){this.__data__=[],this.size=0}function Yr(e){var t=this.__data__,n=bi(t,e);return n<0?!1:(n==t.length-1?t.pop():Rt.call(t,n,1),--this.size,!0)}function Xr(e){var t=this.__data__,r=bi(t,e);return r<0?n:t[r][1]}function Zr(e){return bi(this.__data__,e)>-1}function Qr(e,t){var n=this.__data__,r=bi(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}qr.prototype.clear=Jr,qr.prototype.delete=Yr,qr.prototype.get=Xr,qr.prototype.has=Zr,qr.prototype.set=Qr;function $r(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ei(){this.size=0,this.__data__={hash:new Vr,map:new(mn||qr),string:new Vr}}function ti(e){var t=es(this,e).delete(e);return this.size-=t?1:0,t}function ni(e){return es(this,e).get(e)}function ri(e){return es(this,e).has(e)}function ii(e,t){var n=es(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}$r.prototype.clear=ei,$r.prototype.delete=ti,$r.prototype.get=ni,$r.prototype.has=ri,$r.prototype.set=ii;function ai(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new $r;++t<n;)this.add(e[t])}function oi(e){return this.__data__.set(e,c),this}function si(e){return this.__data__.has(e)}ai.prototype.add=ai.prototype.push=oi,ai.prototype.has=si;function ci(e){this.size=(this.__data__=new qr(e)).size}function li(){this.__data__=new qr,this.size=0}function ui(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function di(e){return this.__data__.get(e)}function fi(e){return this.__data__.has(e)}function pi(e,t){var n=this.__data__;if(n instanceof qr){var r=n.__data__;if(!mn||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $r(r)}return n.set(e,t),this.size=n.size,this}ci.prototype.clear=li,ci.prototype.delete=ui,ci.prototype.get=di,ci.prototype.has=fi,ci.prototype.set=pi;function mi(e,t){var n=K(e),r=!n&&hu(e),i=!n&&!r&&bu(e),a=!n&&!r&&!i&&qu(e),o=n||r||i||a,s=o?Qn(e.length,vt):[],c=s.length;for(var l in e)(t||Tt.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||hs(l,c)))&&s.push(l);return s}function hi(e){var t=e.length;return t?e[Da(0,t-1)]:n}function gi(e,t){return Rs(mo(e),Ei(t,0,e.length))}function _i(e){return Rs(mo(e))}function vi(e,t,r){(r!==n&&!fu(e[t],r)||r===n&&!(t in e))&&wi(e,t,r)}function yi(e,t,r){var i=e[t];(!(Tt.call(e,t)&&fu(i,r))||r===n&&!(t in e))&&wi(e,t,r)}function bi(e,t){for(var n=e.length;n--;)if(fu(e[n][0],t))return n;return-1}function xi(e,t,n,r){return Mi(e,function(e,i,a){t(r,e,n(e),a)}),r}function Si(e,t){return e&&ho(t,kd(t),e)}function Ci(e,t){return e&&ho(t,Ad(t),e)}function wi(e,t,n){t==`__proto__`&&Ht?Ht(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ti(e,t){for(var r=-1,i=t.length,a=Ze(i),o=e==null;++r<i;)a[r]=o?n:Cd(e,t[r]);return a}function Ei(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Di(e,t,r,i,a,o){var s,c=t&d,l=t&f,u=t&p;if(r&&(s=a?r(e,i,a,o):r(e)),s!==n)return s;if(!ju(e))return e;var m=K(e);if(m){if(s=us(e),!c)return mo(e,s)}else{var h=os(e),g=h==de||h==fe;if(bu(e))return ro(e,c);if(h==ge||h==ie||g&&!a){if(s=l||g?{}:ds(e),!c)return l?_o(e,Ci(s,e)):go(e,Si(s,e))}else{if(!rn[h])return a?e:{};s=fs(e,h,c)}}o||=new ci;var _=o.get(e);if(_)return _;o.set(e,s),Wu(e)?e.forEach(function(n){s.add(Di(n,t,r,n,e,o))}):Nu(e)&&e.forEach(function(n,i){s.set(i,Di(n,t,r,i,e,o))});var v=m?n:(u?l?Xo:Yo:l?Ad:kd)(e);return Dn(v||e,function(n,i){v&&(i=n,n=e[i]),yi(s,i,Di(n,t,r,i,e,o))}),s}function Oi(e){var t=kd(e);return function(n){return ki(n,e,t)}}function ki(e,t,r){var i=r.length;if(e==null)return!i;for(e=gt(e);i--;){var a=r[i],o=t[a],s=e[a];if(s===n&&!(a in e)||!o(s))return!1}return!0}function Ai(e,t,r){if(typeof e!=`function`)throw new yt(o);return Ps(function(){e.apply(n,r)},t)}function ji(e,t,n,r){var a=-1,o=jn,s=!0,c=e.length,l=[],u=t.length;if(!c)return l;n&&(t=Nn(t,tr(n))),r?(o=Mn,s=!1):t.length>=i&&(o=rr,s=!1,t=new ai(t));outer:for(;++a<c;){var d=e[a],f=n==null?d:n(d);if(d=r||d!==0?d:0,s&&f===f){for(var p=u;p--;)if(t[p]===f)continue outer;l.push(d)}else o(t,f,r)||l.push(d)}return l}var Mi=bo(Vi),Ni=bo(Hi,!0);function Pi(e,t){var n=!0;return Mi(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function Fi(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(s!=null&&(c===n?s===s&&!Ku(s):r(s,c)))var c=s,l=o}return l}function Ii(e,t,r,i){var a=e.length;for(r=td(r),r<0&&(r=-r>a?0:a+r),i=i===n||i>a?a:td(i),i<0&&(i+=a),i=r>i?0:nd(i);r<i;)e[r++]=t;return e}function Li(e,t){var n=[];return Mi(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ri(e,t,n,r,i){var a=-1,o=e.length;for(n||=ms,i||=[];++a<o;){var s=e[a];t>0&&n(s)?t>1?Ri(s,t-1,n,r,i):Pn(i,s):r||(i[i.length]=s)}return i}var zi=xo(),Bi=xo(!0);function Vi(e,t){return e&&zi(e,t,kd)}function Hi(e,t){return e&&Bi(e,t,kd)}function Ui(e,t){return An(t,function(t){return Ou(e[t])})}function Wi(e,t){t=$a(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[Bs(t[r++])];return r&&r==i?e:n}function Gi(e,t,n){var r=t(e);return K(e)?r:Pn(r,n(e))}function Ki(e){return e==null?e===n?R:he:Vt&&Vt in gt(e)?rs(e):Os(e)}function qi(e,t){return e>t}function Ji(e,t){return e!=null&&Tt.call(e,t)}function Yi(e,t){return e!=null&&t in gt(e)}function Xi(e,t,n){return e>=an(t,n)&&e<$t(t,n)}function Zi(e,t,r){for(var i=r?Mn:jn,a=e[0].length,o=e.length,s=o,c=Ze(o),l=1/0,u=[];s--;){var d=e[s];s&&t&&(d=Nn(d,tr(t))),l=an(d.length,l),c[s]=!r&&(t||a>=120&&d.length>=120)?new ai(s&&d):n}d=e[0];var f=-1,p=c[0];outer:for(;++f<a&&u.length<l;){var m=d[f],h=t?t(m):m;if(m=r||m!==0?m:0,!(p?rr(p,h):i(u,h,r))){for(s=o;--s;){var g=c[s];if(!(g?rr(g,h):i(e[s],h,r)))continue outer}p&&p.push(h),u.push(m)}}return u}function Qi(e,t,n,r){return Vi(e,function(e,i,a){t(r,n(e),i,a)}),r}function $i(e,t,r){t=$a(t,e),e=As(e,t);var i=e==null?e:e[Bs(mc(t))];return i==null?n:Tn(i,e,r)}function ea(e){return Mu(e)&&Ki(e)==ie}function ta(e){return Mu(e)&&Ki(e)==we}function na(e){return Mu(e)&&Ki(e)==ce}function ra(e,t,n,r,i){return e===t?!0:e==null||t==null||!Mu(e)&&!Mu(t)?e!==e&&t!==t:ia(e,t,n,r,ra,i)}function ia(e,t,n,r,i,a){var o=K(e),s=K(t),c=o?ae:os(e),l=s?ae:os(t);c=c==ie?ge:c,l=l==ie?ge:l;var u=c==ge,d=l==ge,f=c==l;if(f&&bu(e)){if(!bu(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new ci,o||qu(e)?Go(e,t,n,r,i,a):Ko(e,t,c,n,r,i,a);if(!(n&m)){var p=u&&Tt.call(e,`__wrapped__`),h=d&&Tt.call(t,`__wrapped__`);if(p||h){var g=p?e.value():e,_=h?t.value():t;return a||=new ci,i(g,_,n,r,a)}}return f?(a||=new ci,qo(e,t,n,r,i,a)):!1}function aa(e){return Mu(e)&&os(e)==pe}function oa(e,t,r,i){var a=r.length,o=a,s=!i;if(e==null)return!o;for(e=gt(e);a--;){var c=r[a];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){c=r[a];var l=c[0],u=e[l],d=c[1];if(s&&c[2]){if(u===n&&!(l in e))return!1}else{var f=new ci;if(i)var p=i(u,d,l,e,t,f);if(!(p===n?ra(d,u,m|h,i,f):p))return!1}}return!0}function sa(e){return!ju(e)||bs(e)?!1:(Ou(e)?At:st).test(Vs(e))}function ca(e){return Mu(e)&&Ki(e)==ve}function la(e){return Mu(e)&&os(e)==ye}function ua(e){return Mu(e)&&Au(e.length)&&!!nn[Ki(e)]}function da(e){return typeof e==`function`?e:e==null?Rf:typeof e==`object`?K(e)?_a(e[0],e[1]):ga(e):Zf(e)}function fa(e){if(!Ss(e))return Qt(e);var t=[];for(var n in gt(e))Tt.call(e,n)&&n!=`constructor`&&t.push(n);return t}function pa(e){if(!ju(e))return Ds(e);var t=Ss(e),n=[];for(var r in e)r==`constructor`&&(t||!Tt.call(e,r))||n.push(r);return n}function ma(e,t){return e<t}function ha(e,t){var n=-1,r=_u(e)?Ze(e.length):[];return Mi(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function ga(e){var t=ts(e);return t.length==1&&t[0][2]?ws(t[0][0],t[0][1]):function(n){return n===e||oa(n,e,t)}}function _a(e,t){return _s(e)&&Cs(t)?ws(Bs(e),t):function(r){var i=Cd(r,e);return i===n&&i===t?Td(r,e):ra(t,i,m|h)}}function va(e,t,r,i,a){e!==t&&zi(t,function(o,s){if(a||=new ci,ju(o))ya(e,t,s,r,va,i,a);else{var c=i?i(Ms(e,s),o,s+``,e,t,a):n;c===n&&(c=o),vi(e,s,c)}},Ad)}function ya(e,t,r,i,a,o,s){var c=Ms(e,r),l=Ms(t,r),u=s.get(l);if(u){vi(e,r,u);return}var d=o?o(c,l,r+``,e,t,s):n,f=d===n;if(f){var p=K(l),m=!p&&bu(l),h=!p&&!m&&qu(l);d=l,p||m||h?K(c)?d=c:vu(c)?d=mo(c):m?(f=!1,d=ro(l,!0)):h?(f=!1,d=co(l,!0)):d=[]:Vu(l)||hu(l)?(d=c,hu(c)?d=id(c):(!ju(c)||Ou(c))&&(d=ds(l))):f=!1}f&&(s.set(l,d),a(d,l,i,o,s),s.delete(l)),vi(e,r,d)}function ba(e,t){var r=e.length;if(r)return t+=t<0?r:0,hs(t,r)?e[t]:n}function xa(e,t,n){t=t.length?Nn(t,function(e){return K(e)?function(t){return Wi(t,e.length===1?e[0]:e)}:e}):[Rf];var r=-1;return t=Nn(t,tr(W())),Xn(ha(e,function(e,n,i){return{criteria:Nn(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return uo(e,t,n)})}function Sa(e,t){return Ca(e,t,function(t,n){return Td(e,n)})}function Ca(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Wi(e,o);n(s,o)&&Na(a,$a(o,e),s)}return a}function wa(e){return function(t){return Wi(t,e)}}function Ta(e,t,n,r){var i=r?Wn:Un,a=-1,o=t.length,s=e;for(e===t&&(t=mo(t)),n&&(s=Nn(e,tr(n)));++a<o;)for(var c=0,l=t[a],u=n?n(l):l;(c=i(s,u,c,r))>-1;)s!==e&&Rt.call(s,c,1),Rt.call(e,c,1);return e}function Ea(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;hs(i)?Rt.call(e,i,1):Ga(e,i)}}return e}function Da(e,t){return e+Kt(cn()*(t-e+1))}function Oa(e,t,n,r){for(var i=-1,a=$t(Gt((t-e)/(n||1)),0),o=Ze(a);a--;)o[r?a:++i]=e,e+=n;return o}function ka(e,t){var n=``;if(!e||t<1||t>P)return n;do t%2&&(n+=e),t=Kt(t/2),t&&(e+=e);while(t);return n}function Aa(e,t){return Fs(ks(e,t,Rf),e+``)}function ja(e){return hi(Jd(e))}function Ma(e,t){var n=Jd(e);return Rs(n,Ei(t,0,n.length))}function Na(e,t,r,i){if(!ju(e))return e;t=$a(t,e);for(var a=-1,o=t.length,s=o-1,c=e;c!=null&&++a<o;){var l=Bs(t[a]),u=r;if(l===`__proto__`||l===`constructor`||l===`prototype`)return e;if(a!=s){var d=c[l];u=i?i(d,l,c):n,u===n&&(u=ju(d)?d:hs(t[a+1])?[]:{})}yi(c,l,u),c=c[l]}return e}var Pa=zn?function(e,t){return zn.set(e,t),e}:Rf,Fa=Ht?function(e,t){return Ht(e,`toString`,{configurable:!0,enumerable:!1,value:Pf(t),writable:!0})}:Rf;function Ia(e){return Rs(Jd(e))}function La(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Ze(i);++r<i;)a[r]=e[r+t];return a}function Ra(e,t){var n;return Mi(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function za(e,t,n){var r=0,i=e==null?r:e.length;if(typeof t==`number`&&t===t&&i<=ne){for(;r<i;){var a=r+i>>>1,o=e[a];o!==null&&!Ku(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Ba(e,t,Rf,n)}function Ba(e,t,r,i){var a=0,o=e==null?0:e.length;if(o===0)return 0;t=r(t);for(var s=t!==t,c=t===null,l=Ku(t),u=t===n;a<o;){var d=Kt((a+o)/2),f=r(e[d]),p=f!==n,m=f===null,h=f===f,g=Ku(f);if(s)var _=i||h;else _=u?h&&(i||p):c?h&&p&&(i||!m):l?h&&p&&!m&&(i||!g):m||g?!1:i?f<=t:f<t;_?a=d+1:o=d}return an(o,I)}function Va(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!fu(s,c)){var c=s;a[i++]=o===0?0:o}}return a}function Ha(e){return typeof e==`number`?e:Ku(e)?te:+e}function Ua(e){if(typeof e==`string`)return e;if(K(e))return Nn(e,Ua)+``;if(Ku(e))return Nr?Nr.call(e):``;var t=e+``;return t==`0`&&1/e==-N?`-0`:t}function Wa(e,t,n){var r=-1,a=jn,o=e.length,s=!0,c=[],l=c;if(n)s=!1,a=Mn;else if(o>=i){var u=t?null:zo(e);if(u)return _r(u);s=!1,a=rr,l=new ai}else l=t?[]:c;outer:for(;++r<o;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue outer;t&&l.push(f),c.push(d)}else a(l,f,n)||(l!==c&&l.push(f),c.push(d))}return c}function Ga(e,t){return t=$a(t,e),e=As(e,t),e==null||delete e[Bs(mc(t))]}function Ka(e,t,n,r){return Na(e,t,n(Wi(e,t)),r)}function qa(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?La(e,r?0:a,r?a+1:i):La(e,r?a+1:0,r?i:a)}function Ja(e,t){var n=e;return n instanceof Lr&&(n=n.value()),Fn(t,function(e,t){return t.func.apply(t.thisArg,Pn([e],t.args))},n)}function Ya(e,t,n){var r=e.length;if(r<2)return r?Wa(e[0]):[];for(var i=-1,a=Ze(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=ji(a[i]||o,e[s],t,n));return Wa(Ri(a,1),t,n)}function Xa(e,t,r){for(var i=-1,a=e.length,o=t.length,s={};++i<a;){var c=i<o?t[i]:n;r(s,e[i],c)}return s}function Za(e){return vu(e)?e:[]}function Qa(e){return typeof e==`function`?e:Rf}function $a(e,t){return K(e)?e:_s(e,t)?[e]:zs(od(e))}var eo=Aa;function to(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:La(e,t,r)}var no=V||function(e){return pn.clearTimeout(e)};function ro(e,t){if(t)return e.slice();var n=e.length,r=Pt?Pt(n):new e.constructor(n);return e.copy(r),r}function io(e){var t=new e.constructor(e.byteLength);return new Nt(t).set(new Nt(e)),t}function ao(e,t){var n=t?io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function oo(e){var t=new e.constructor(e.source,at.exec(e));return t.lastIndex=e.lastIndex,t}function so(e){return Mr?gt(Mr.call(e)):{}}function co(e,t){var n=t?io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function lo(e,t){if(e!==t){var r=e!==n,i=e===null,a=e===e,o=Ku(e),s=t!==n,c=t===null,l=t===t,u=Ku(t);if(!c&&!u&&!o&&e>t||o&&s&&l&&!c&&!u||i&&s&&l||!r&&l||!a)return 1;if(!i&&!o&&!u&&e<t||u&&r&&a&&!i&&!o||c&&r&&a||!s&&a||!l)return-1}return 0}function uo(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var c=lo(i[r],a[r]);if(c)return r>=s?c:c*(n[r]==`desc`?-1:1)}return e.index-t.index}function fo(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,c=t.length,l=$t(a-o,0),u=Ze(c+l),d=!r;++s<c;)u[s]=t[s];for(;++i<o;)(d||i<a)&&(u[n[i]]=e[i]);for(;l--;)u[s++]=e[i++];return u}function po(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,c=-1,l=t.length,u=$t(a-s,0),d=Ze(u+l),f=!r;++i<u;)d[i]=e[i];for(var p=i;++c<l;)d[p+c]=t[c];for(;++o<s;)(f||i<a)&&(d[p+n[o]]=e[i++]);return d}function mo(e,t){var n=-1,r=e.length;for(t||=Ze(r);++n<r;)t[n]=e[n];return t}function ho(e,t,r,i){var a=!r;r||={};for(var o=-1,s=t.length;++o<s;){var c=t[o],l=i?i(r[c],e[c],c,r,e):n;l===n&&(l=e[c]),a?wi(r,c,l):yi(r,c,l)}return r}function go(e,t){return ho(e,is(e),t)}function _o(e,t){return ho(e,as(e),t)}function vo(e,t){return function(n,r){var i=K(n)?En:xi,a=t?t():{};return i(n,e,W(r,2),a)}}function yo(e){return Aa(function(t,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;for(o=e.length>3&&typeof o==`function`?(a--,o):n,s&&gs(r[0],r[1],s)&&(o=a<3?n:o,a=1),t=gt(t);++i<a;){var c=r[i];c&&e(t,c,i,o)}return t})}function bo(e,t){return function(n,r){if(n==null)return n;if(!_u(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=gt(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function xo(e){return function(t,n,r){for(var i=-1,a=gt(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}function So(e,t,n){var r=t&g,i=To(e);function a(){return(this&&this!==pn&&this instanceof a?i:e).apply(r?n:this,arguments)}return a}function Co(e){return function(t){t=od(t);var r=dr(t)?Sr(t):n,i=r?r[0]:t.charAt(0),a=r?to(r,1).join(``):t.slice(1);return i[e]()+a}}function wo(e){return function(t){return Fn(kf(tf(t).replace(Jt,``)),e,``)}}function To(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Pr(e.prototype),r=e.apply(n,t);return ju(r)?r:n}}function Eo(e,t,r){var i=To(e);function a(){for(var o=arguments.length,s=Ze(o),c=o,l=$o(a);c--;)s[c]=arguments[c];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:gr(s,l);return o-=u.length,o<r?Lo(e,t,ko,a.placeholder,n,s,u,n,n,r-o):Tn(this&&this!==pn&&this instanceof a?i:e,this,s)}return a}function Do(e){return function(t,r,i){var a=gt(t);if(!_u(t)){var o=W(r,3);t=kd(t),r=function(e){return o(a[e],e,a)}}var s=e(t,r,i);return s>-1?a[o?t[s]:s]:n}}function Oo(e){return Jo(function(t){var r=t.length,i=r,a=Ir.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if(typeof s!=`function`)throw new yt(o);if(a&&!c&&Qo(s)==`wrapper`)var c=new Ir([],!0)}for(i=c?i:r;++i<r;){s=t[i];var l=Qo(s),u=l==`wrapper`?Zo(s):n;c=u&&ys(u[0])&&u[1]==(C|y|x|w)&&!u[4].length&&u[9]==1?c[Qo(u[0])].apply(c,u[3]):s.length==1&&ys(s)?c[l]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&e.length==1&&K(n))return c.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}})}function ko(e,t,r,i,a,o,s,c,l,u){var d=t&C,f=t&g,p=t&_,m=t&(y|b),h=t&T,v=p?n:To(e);function x(){for(var n=arguments.length,g=Ze(n),_=n;_--;)g[_]=arguments[_];if(m)var y=$o(x),b=or(g,y);if(i&&(g=fo(g,i,a,m)),o&&(g=po(g,o,s,m)),n-=b,m&&n<u){var S=gr(g,y);return Lo(e,t,ko,x.placeholder,r,g,S,c,l,u-n)}var C=f?r:this,w=p?C[e]:e;return n=g.length,c?g=js(g,c):h&&n>1&&g.reverse(),d&&l<n&&(g.length=l),this&&this!==pn&&this instanceof x&&(w=v||To(w)),w.apply(C,g)}return x}function Ao(e,t){return function(n,r){return Qi(n,e,t(r),{})}}function jo(e,t){return function(r,i){var a;if(r===n&&i===n)return t;if(r!==n&&(a=r),i!==n){if(a===n)return i;typeof r==`string`||typeof i==`string`?(r=Ua(r),i=Ua(i)):(r=Ha(r),i=Ha(i)),a=e(r,i)}return a}}function Mo(e){return Jo(function(t){return t=Nn(t,tr(W())),Aa(function(n){var r=this;return e(t,function(e){return Tn(e,r,n)})})})}function No(e,t){t=t===n?` `:Ua(t);var r=t.length;if(r<2)return r?ka(t,e):t;var i=ka(t,Gt(e/xr(t)));return dr(t)?to(Sr(i),0,e).join(``):i.slice(0,e)}function Po(e,t,n,r){var i=t&g,a=To(e);function o(){for(var t=-1,s=arguments.length,c=-1,l=r.length,u=Ze(l+s),d=this&&this!==pn&&this instanceof o?a:e;++c<l;)u[c]=r[c];for(;s--;)u[c++]=arguments[++t];return Tn(d,i?n:this,u)}return o}function Fo(e){return function(t,r,i){return i&&typeof i!=`number`&&gs(t,r,i)&&(r=i=n),t=ed(t),r===n?(r=t,t=0):r=ed(r),i=i===n?t<r?1:-1:ed(i),Oa(t,r,i,e)}}function Io(e){return function(t,n){return typeof t==`string`&&typeof n==`string`||(t=rd(t),n=rd(n)),e(t,n)}}function Lo(e,t,r,i,a,o,s,c,l,u){var d=t&y,f=d?s:n,p=d?n:s,m=d?o:n,h=d?n:o;t|=d?x:S,t&=~(d?S:x),t&v||(t&=~(g|_));var b=[e,t,a,m,f,h,p,c,l,u],C=r.apply(n,b);return ys(e)&&Ns(C,b),C.placeholder=i,Is(C,e,t)}function Ro(e){var t=ht[e];return function(e,n){if(e=rd(e),n=n==null?0:an(td(n),292),n&&Xt(e)){var r=(od(e)+`e`).split(`e`);return r=(od(t(r[0]+`e`+(+r[1]+n)))+`e`).split(`e`),+(r[0]+`e`+(+r[1]-n))}return t(e)}}var zo=_n&&1/_r(new _n([,-0]))[1]==N?function(e){return new _n(e)}:Kf;function Bo(e){return function(t){var n=os(t);return n==pe?mr(t):n==ye?vr(t):$n(t,e(t))}}function Vo(e,t,r,i,a,s,c,l){var u=t&_;if(!u&&typeof e!=`function`)throw new yt(o);var d=i?i.length:0;if(d||(t&=~(x|S),i=a=n),c=c===n?c:$t(td(c),0),l=l===n?l:td(l),d-=a?a.length:0,t&S){var f=i,p=a;i=a=n}var m=u?n:Zo(e),h=[e,t,r,i,a,f,p,s,c,l];if(m&&Es(h,m),e=h[0],t=h[1],r=h[2],i=h[3],a=h[4],l=h[9]=h[9]===n?u?0:e.length:$t(h[9]-d,0),!l&&t&(y|b)&&(t&=~(y|b)),!t||t==g)var v=So(e,t,r);else v=t==y||t==b?Eo(e,t,l):(t==x||t==(g|x))&&!a.length?Po(e,t,r,i):ko.apply(n,h);return Is((m?Pa:Ns)(v,h),e,t)}function Ho(e,t,r,i){return e===n||fu(e,St[r])&&!Tt.call(i,r)?t:e}function Uo(e,t,r,i,a,o){return ju(e)&&ju(t)&&(o.set(t,e),va(e,t,n,Uo,o),o.delete(t)),e}function Wo(e){return Vu(e)?n:e}function Go(e,t,r,i,a,o){var s=r&m,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,g=r&h?new ai:n;for(o.set(e,t),o.set(t,e);++f<c;){var _=e[f],v=t[f];if(i)var y=s?i(v,_,f,t,e,o):i(_,v,f,e,t,o);if(y!==n){if(y)continue;p=!1;break}if(g){if(!Ln(t,function(e,t){if(!rr(g,t)&&(_===e||a(_,e,r,i,o)))return g.push(t)})){p=!1;break}}else if(!(_===v||a(_,v,r,i,o))){p=!1;break}}return o.delete(e),o.delete(t),p}function Ko(e,t,n,r,i,a,o){switch(n){case Te:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case we:return!(e.byteLength!=t.byteLength||!a(new Nt(e),new Nt(t)));case se:case ce:case me:return fu(+e,+t);case ue:return e.name==t.name&&e.message==t.message;case ve:case be:return e==t+``;case pe:var s=mr;case ye:var c=r&m;if(s||=_r,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=h,o.set(e,t);var u=Go(s(e),s(t),r,i,a,o);return o.delete(e),u;case xe:if(Mr)return Mr.call(e)==Mr.call(t)}return!1}function qo(e,t,r,i,a,o){var s=r&m,c=Yo(e),l=c.length;if(l!=Yo(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:Tt.call(t,d)))return!1}var f=o.get(e),p=o.get(t);if(f&&p)return f==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var g=s;++u<l;){d=c[u];var _=e[d],v=t[d];if(i)var y=s?i(v,_,d,t,e,o):i(_,v,d,e,t,o);if(!(y===n?_===v||a(_,v,r,i,o):y)){h=!1;break}g||=d==`constructor`}if(h&&!g){var b=e.constructor,x=t.constructor;b!=x&&`constructor`in e&&`constructor`in t&&!(typeof b==`function`&&b instanceof b&&typeof x==`function`&&x instanceof x)&&(h=!1)}return o.delete(e),o.delete(t),h}function Jo(e){return Fs(ks(e,n,rc),e+``)}function Yo(e){return Gi(e,kd,is)}function Xo(e){return Gi(e,Ad,as)}var Zo=zn?function(e){return zn.get(e)}:Kf;function Qo(e){for(var t=e.name+``,n=Jn[t],r=Tt.call(Jn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(a==null||a==e)return i.name}return t}function $o(e){return(Tt.call(U,`placeholder`)?U:e).placeholder}function W(){var e=U.iteratee||zf;return e=e===zf?da:e,arguments.length?e(arguments[0],arguments[1]):e}function es(e,t){var n=e.__data__;return vs(t)?n[typeof t==`string`?`string`:`hash`]:n.map}function ts(e){for(var t=kd(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Cs(i)]}return t}function ns(e,t){var r=ur(e,t);return sa(r)?r:n}function rs(e){var t=Tt.call(e,Vt),r=e[Vt];try{e[Vt]=n;var i=!0}catch{}var a=Dt.call(e);return i&&(t?e[Vt]=r:delete e[Vt]),a}var is=qt?function(e){return e==null?[]:(e=gt(e),An(qt(e),function(t){return Lt.call(e,t)}))}:tp,as=qt?function(e){for(var t=[];e;)Pn(t,is(e)),e=Ft(e);return t}:tp,os=Ki;(fn&&os(new fn(new ArrayBuffer(1)))!=Te||mn&&os(new mn)!=pe||hn&&os(hn.resolve())!=L||_n&&os(new _n)!=ye||vn&&os(new vn)!=Se)&&(os=function(e){var t=Ki(e),r=t==ge?e.constructor:n,i=r?Vs(r):``;if(i)switch(i){case yr:return Te;case Tr:return pe;case Er:return L;case kr:return ye;case Ar:return Se}return t});function ss(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case`drop`:e+=o;break;case`dropRight`:t-=o;break;case`take`:t=an(t,e+o);break;case`takeRight`:e=$t(e,t-o);break}}return{start:e,end:t}}function cs(e){var t=e.match($e);return t?t[1].split(et):[]}function ls(e,t,n){t=$a(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=Bs(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&Au(i)&&hs(o,i)&&(K(e)||hu(e)))}function us(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&Tt.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}function ds(e){return typeof e.constructor==`function`&&!Ss(e)?Pr(Ft(e)):{}}function fs(e,t,n){var r=e.constructor;switch(t){case we:return io(e);case se:case ce:return new r(+e);case Te:return ao(e,n);case Ee:case De:case Oe:case ke:case Ae:case je:case Me:case Ne:case Pe:return co(e,n);case pe:return new r;case me:case be:return new r(e);case ve:return oo(e);case ye:return new r;case xe:return so(e)}}function ps(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?`& `:``)+t[r],t=t.join(n>2?`, `:` `),e.replace(Qe,`{
/* [wrapped with `+t+`] */
`)}function ms(e){return K(e)||hu(e)||!!(zt&&e&&e[zt])}function hs(e,t){var n=typeof e;return t??=P,!!t&&(n==`number`||n!=`symbol`&&lt.test(e))&&e>-1&&e%1==0&&e<t}function gs(e,t,n){if(!ju(n))return!1;var r=typeof t;return(r==`number`?_u(n)&&hs(t,n.length):r==`string`&&t in n)?fu(n[t],e):!1}function _s(e,t){if(K(e))return!1;var n=typeof e;return n==`number`||n==`symbol`||n==`boolean`||e==null||Ku(e)?!0:Ke.test(e)||!Ge.test(e)||t!=null&&e in gt(t)}function vs(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}function ys(e){var t=Qo(e),n=U[t];if(typeof n!=`function`||!(t in Lr.prototype))return!1;if(e===n)return!0;var r=Zo(n);return!!r&&e===r[0]}function bs(e){return!!B&&B in e}var xs=Ct?Ou:np;function Ss(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||St)}function Cs(e){return e===e&&!ju(e)}function ws(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in gt(r))}}function Ts(e){var t=Jl(e,function(e){return n.size===l&&n.clear(),e}),n=t.cache;return t}function Es(e,t){var n=e[1],r=t[1],i=n|r,a=i<(g|_|C),o=r==C&&n==y||r==C&&n==w&&e[7].length<=t[8]||r==(C|w)&&t[7].length<=t[8]&&n==y;if(!(a||o))return e;r&g&&(e[2]=t[2],i|=n&g?0:v);var s=t[3];if(s){var c=e[3];e[3]=c?fo(c,s,t[4]):s,e[4]=c?gr(e[3],u):t[4]}return s=t[5],s&&(c=e[5],e[5]=c?po(c,s,t[6]):s,e[6]=c?gr(e[5],u):t[6]),s=t[7],s&&(e[7]=s),r&C&&(e[8]=e[8]==null?t[8]:an(e[8],t[8])),e[9]??=t[9],e[0]=t[0],e[1]=i,e}function Ds(e){var t=[];if(e!=null)for(var n in gt(e))t.push(n);return t}function Os(e){return Dt.call(e)}function ks(e,t,r){return t=$t(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=$t(n.length-t,0),o=Ze(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Ze(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),Tn(e,this,s)}}function As(e,t){return t.length<2?e:Wi(e,La(t,0,-1))}function js(e,t){for(var r=e.length,i=an(t.length,r),a=mo(e);i--;){var o=t[i];e[i]=hs(o,r)?a[o]:n}return e}function Ms(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}var Ns=Ls(Pa),Ps=Wt||function(e,t){return pn.setTimeout(e,t)},Fs=Ls(Fa);function Is(e,t,n){var r=t+``;return Fs(e,ps(r,Hs(cs(r),n)))}function Ls(e){var t=0,r=0;return function(){var i=on(),a=k-(i-r);if(r=i,a>0){if(++t>=O)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Rs(e,t){var r=-1,i=e.length,a=i-1;for(t=t===n?i:t;++r<t;){var o=Da(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}var zs=Ts(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(qe,function(e,n,r,i){t.push(r?i.replace(rt,`$1`):n||e)}),t});function Bs(e){if(typeof e==`string`||Ku(e))return e;var t=e+``;return t==`0`&&1/e==-N?`-0`:t}function Vs(e){if(e!=null){try{return wt.call(e)}catch{}try{return e+``}catch{}}return``}function Hs(e,t){return Dn(re,function(n){var r=`_.`+n[0];t&n[1]&&!jn(e,r)&&e.push(r)}),e.sort()}function Us(e){if(e instanceof Lr)return e.clone();var t=new Ir(e.__wrapped__,e.__chain__);return t.__actions__=mo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ws(e,t,r){t=(r?gs(e,t,r):t===n)?1:$t(td(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=Ze(Gt(i/t));a<i;)s[o++]=La(e,a,a+=t);return s}function Gs(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}function Ks(){var e=arguments.length;if(!e)return[];for(var t=Ze(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Pn(K(n)?mo(n):[n],Ri(t,1))}var qs=Aa(function(e,t){return vu(e)?ji(e,Ri(t,1,vu,!0)):[]}),Js=Aa(function(e,t){var r=mc(t);return vu(r)&&(r=n),vu(e)?ji(e,Ri(t,1,vu,!0),W(r,2)):[]}),Ys=Aa(function(e,t){var r=mc(t);return vu(r)&&(r=n),vu(e)?ji(e,Ri(t,1,vu,!0),n,r):[]});function Xs(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:td(t),La(e,t<0?0:t,i)):[]}function Zs(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:td(t),t=i-t,La(e,0,t<0?0:t)):[]}function Qs(e,t){return e&&e.length?qa(e,W(t,3),!0,!0):[]}function $s(e,t){return e&&e.length?qa(e,W(t,3),!0):[]}function ec(e,t,n,r){var i=e==null?0:e.length;return i?(n&&typeof n!=`number`&&gs(e,t,n)&&(n=0,r=i),Ii(e,t,n,r)):[]}function tc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:td(n);return i<0&&(i=$t(r+i,0)),Hn(e,W(t,3),i)}function nc(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var a=i-1;return r!==n&&(a=td(r),a=r<0?$t(i+a,0):an(a,i-1)),Hn(e,W(t,3),a,!0)}function rc(e){return e!=null&&e.length?Ri(e,1):[]}function ic(e){return e!=null&&e.length?Ri(e,N):[]}function ac(e,t){return e!=null&&e.length?(t=t===n?1:td(t),Ri(e,t)):[]}function oc(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function sc(e){return e&&e.length?e[0]:n}function cc(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:td(n);return i<0&&(i=$t(r+i,0)),Un(e,t,i)}function lc(e){return e!=null&&e.length?La(e,0,-1):[]}var uc=Aa(function(e){var t=Nn(e,Za);return t.length&&t[0]===e[0]?Zi(t):[]}),dc=Aa(function(e){var t=mc(e),r=Nn(e,Za);return t===mc(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Zi(r,W(t,2)):[]}),fc=Aa(function(e){var t=mc(e),r=Nn(e,Za);return t=typeof t==`function`?t:n,t&&r.pop(),r.length&&r[0]===e[0]?Zi(r,n,t):[]});function pc(e,t){return e==null?``:Zt.call(e,t)}function mc(e){var t=e==null?0:e.length;return t?e[t-1]:n}function hc(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var a=i;return r!==n&&(a=td(r),a=a<0?$t(i+a,0):an(a,i-1)),t===t?br(e,t,a):Hn(e,Gn,a,!0)}function G(e,t){return e&&e.length?ba(e,td(t)):n}var gc=Aa(_c);function _c(e,t){return e&&e.length&&t&&t.length?Ta(e,t):e}function vc(e,t,n){return e&&e.length&&t&&t.length?Ta(e,t,W(n,2)):e}function yc(e,t,r){return e&&e.length&&t&&t.length?Ta(e,t,n,r):e}var bc=Jo(function(e,t){var n=e==null?0:e.length,r=Ti(e,t);return Ea(e,Nn(t,function(e){return hs(e,n)?+e:e}).sort(lo)),r});function xc(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],a=e.length;for(t=W(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ea(e,i),n}function Sc(e){return e==null?e:dn.call(e)}function Cc(e,t,r){var i=e==null?0:e.length;return i?(r&&typeof r!=`number`&&gs(e,t,r)?(t=0,r=i):(t=t==null?0:td(t),r=r===n?i:td(r)),La(e,t,r)):[]}function wc(e,t){return za(e,t)}function Tc(e,t,n){return Ba(e,t,W(n,2))}function Ec(e,t){var n=e==null?0:e.length;if(n){var r=za(e,t);if(r<n&&fu(e[r],t))return r}return-1}function Dc(e,t){return za(e,t,!0)}function Oc(e,t,n){return Ba(e,t,W(n,2),!0)}function kc(e,t){if(e!=null&&e.length){var n=za(e,t,!0)-1;if(fu(e[n],t))return n}return-1}function Ac(e){return e&&e.length?Va(e):[]}function jc(e,t){return e&&e.length?Va(e,W(t,2)):[]}function Mc(e){var t=e==null?0:e.length;return t?La(e,1,t):[]}function Nc(e,t,r){return e&&e.length?(t=r||t===n?1:td(t),La(e,0,t<0?0:t)):[]}function Pc(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===n?1:td(t),t=i-t,La(e,t<0?0:t,i)):[]}function Fc(e,t){return e&&e.length?qa(e,W(t,3),!1,!0):[]}function Ic(e,t){return e&&e.length?qa(e,W(t,3)):[]}var Lc=Aa(function(e){return Wa(Ri(e,1,vu,!0))}),Rc=Aa(function(e){var t=mc(e);return vu(t)&&(t=n),Wa(Ri(e,1,vu,!0),W(t,2))}),zc=Aa(function(e){var t=mc(e);return t=typeof t==`function`?t:n,Wa(Ri(e,1,vu,!0),n,t)});function Bc(e){return e&&e.length?Wa(e):[]}function Vc(e,t){return e&&e.length?Wa(e,W(t,2)):[]}function Hc(e,t){return t=typeof t==`function`?t:n,e&&e.length?Wa(e,n,t):[]}function Uc(e){if(!(e&&e.length))return[];var t=0;return e=An(e,function(e){if(vu(e))return t=$t(e.length,t),!0}),Qn(t,function(t){return Nn(e,qn(t))})}function Wc(e,t){if(!(e&&e.length))return[];var r=Uc(e);return t==null?r:Nn(r,function(e){return Tn(t,n,e)})}var Gc=Aa(function(e,t){return vu(e)?ji(e,t):[]}),Kc=Aa(function(e){return Ya(An(e,vu))}),qc=Aa(function(e){var t=mc(e);return vu(t)&&(t=n),Ya(An(e,vu),W(t,2))}),Jc=Aa(function(e){var t=mc(e);return t=typeof t==`function`?t:n,Ya(An(e,vu),n,t)}),Yc=Aa(Uc);function Xc(e,t){return Xa(e||[],t||[],yi)}function Zc(e,t){return Xa(e||[],t||[],Na)}var Qc=Aa(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r==`function`?(e.pop(),r):n,Wc(e,r)});function $c(e){var t=U(e);return t.__chain__=!0,t}function el(e,t){return t(e),e}function tl(e,t){return t(e)}var nl=Jo(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,a=function(t){return Ti(t,e)};return t>1||this.__actions__.length||!(i instanceof Lr)||!hs(r)?this.thru(a):(i=i.slice(r,+r+(t?1:0)),i.__actions__.push({func:tl,args:[a],thisArg:n}),new Ir(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e}))});function rl(){return $c(this)}function il(){return new Ir(this.value(),this.__chain__)}function al(){this.__values__===n&&(this.__values__=$u(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}}function ol(){return this}function sl(e){for(var t,r=this;r instanceof Fr;){var i=Us(r);i.__index__=0,i.__values__=n,t?a.__wrapped__=i:t=i;var a=i;r=r.__wrapped__}return a.__wrapped__=e,t}function cl(){var e=this.__wrapped__;if(e instanceof Lr){var t=e;return this.__actions__.length&&(t=new Lr(this)),t=t.reverse(),t.__actions__.push({func:tl,args:[Sc],thisArg:n}),new Ir(t,this.__chain__)}return this.thru(Sc)}function ll(){return Ja(this.__wrapped__,this.__actions__)}var ul=vo(function(e,t,n){Tt.call(e,n)?++e[n]:wi(e,n,1)});function dl(e,t,r){var i=K(e)?kn:Pi;return r&&gs(e,t,r)&&(t=n),i(e,W(t,3))}function fl(e,t){return(K(e)?An:Li)(e,W(t,3))}var pl=Do(tc),ml=Do(nc);function hl(e,t){return Ri(wl(e,t),1)}function gl(e,t){return Ri(wl(e,t),N)}function _l(e,t,r){return r=r===n?1:td(r),Ri(wl(e,t),r)}function vl(e,t){return(K(e)?Dn:Mi)(e,W(t,3))}function yl(e,t){return(K(e)?On:Ni)(e,W(t,3))}var bl=vo(function(e,t,n){Tt.call(e,n)?e[n].push(t):wi(e,n,[t])});function xl(e,t,n,r){e=_u(e)?e:Jd(e),n=n&&!r?td(n):0;var i=e.length;return n<0&&(n=$t(i+n,0)),Gu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Un(e,t,n)>-1}var Sl=Aa(function(e,t,n){var r=-1,i=typeof t==`function`,a=_u(e)?Ze(e.length):[];return Mi(e,function(e){a[++r]=i?Tn(t,e,n):$i(e,t,n)}),a}),Cl=vo(function(e,t,n){wi(e,n,t)});function wl(e,t){return(K(e)?Nn:ha)(e,W(t,3))}function Tl(e,t,r,i){return e==null?[]:(K(t)||(t=t==null?[]:[t]),r=i?n:r,K(r)||(r=r==null?[]:[r]),xa(e,t,r))}var El=vo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Dl(e,t,n){var r=K(e)?Fn:Yn,i=arguments.length<3;return r(e,W(t,4),n,i,Mi)}function Ol(e,t,n){var r=K(e)?In:Yn,i=arguments.length<3;return r(e,W(t,4),n,i,Ni)}function kl(e,t){return(K(e)?An:Li)(e,Yl(W(t,3)))}function Al(e){return(K(e)?hi:ja)(e)}function jl(e,t,r){return t=(r?gs(e,t,r):t===n)?1:td(t),(K(e)?gi:Ma)(e,t)}function Ml(e){return(K(e)?_i:Ia)(e)}function Nl(e){if(e==null)return 0;if(_u(e))return Gu(e)?xr(e):e.length;var t=os(e);return t==pe||t==ye?e.size:fa(e).length}function Pl(e,t,r){var i=K(e)?Ln:Ra;return r&&gs(e,t,r)&&(t=n),i(e,W(t,3))}var Fl=Aa(function(e,t){if(e==null)return[];var n=t.length;return n>1&&gs(e,t[0],t[1])?t=[]:n>2&&gs(t[0],t[1],t[2])&&(t=[t[0]]),xa(e,Ri(t,1),[])}),Il=Ut||function(){return pn.Date.now()};function Ll(e,t){if(typeof t!=`function`)throw new yt(o);return e=td(e),function(){if(--e<1)return t.apply(this,arguments)}}function Rl(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,Vo(e,C,n,n,n,n,t)}function zl(e,t){var r;if(typeof t!=`function`)throw new yt(o);return e=td(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var Bl=Aa(function(e,t,n){var r=g;if(n.length){var i=gr(n,$o(Bl));r|=x}return Vo(e,r,t,n,i)}),Vl=Aa(function(e,t,n){var r=g|_;if(n.length){var i=gr(n,$o(Vl));r|=x}return Vo(t,r,e,n,i)});function Hl(e,t,r){t=r?n:t;var i=Vo(e,y,n,n,n,n,n,t);return i.placeholder=Hl.placeholder,i}function Ul(e,t,r){t=r?n:t;var i=Vo(e,b,n,n,n,n,n,t);return i.placeholder=Ul.placeholder,i}function Wl(e,t,r){var i,a,s,c,l,u,d=0,f=!1,p=!1,m=!0;if(typeof e!=`function`)throw new yt(o);t=rd(t)||0,ju(r)&&(f=!!r.leading,p=`maxWait`in r,s=p?$t(rd(r.maxWait)||0,t):s,m=`trailing`in r?!!r.trailing:m);function h(t){var r=i,o=a;return i=a=n,d=t,c=e.apply(o,r),c}function g(e){return d=e,l=Ps(y,t),f?h(e):c}function _(e){var n=e-u,r=e-d,i=t-n;return p?an(i,s-r):i}function v(e){var r=e-u,i=e-d;return u===n||r>=t||r<0||p&&i>=s}function y(){var e=Il();if(v(e))return b(e);l=Ps(y,_(e))}function b(e){return l=n,m&&i?h(e):(i=a=n,c)}function x(){l!==n&&no(l),d=0,i=u=a=l=n}function S(){return l===n?c:b(Il())}function C(){var e=Il(),r=v(e);if(i=arguments,a=this,u=e,r){if(l===n)return g(u);if(p)return no(l),l=Ps(y,t),h(u)}return l===n&&(l=Ps(y,t)),c}return C.cancel=x,C.flush=S,C}var Gl=Aa(function(e,t){return Ai(e,1,t)}),Kl=Aa(function(e,t,n){return Ai(e,rd(t)||0,n)});function ql(e){return Vo(e,T)}function Jl(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw new yt(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Jl.Cache||$r),n}Jl.Cache=$r;function Yl(e){if(typeof e!=`function`)throw new yt(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Xl(e){return zl(2,e)}var Zl=eo(function(e,t){t=t.length==1&&K(t[0])?Nn(t[0],tr(W())):Nn(Ri(t,1),tr(W()));var n=t.length;return Aa(function(r){for(var i=-1,a=an(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Tn(e,this,r)})}),Ql=Aa(function(e,t){return Vo(e,x,n,t,gr(t,$o(Ql)))}),$l=Aa(function(e,t){return Vo(e,S,n,t,gr(t,$o($l)))}),eu=Jo(function(e,t){return Vo(e,w,n,n,n,t)});function tu(e,t){if(typeof e!=`function`)throw new yt(o);return t=t===n?t:td(t),Aa(e,t)}function nu(e,t){if(typeof e!=`function`)throw new yt(o);return t=t==null?0:$t(td(t),0),Aa(function(n){var r=n[t],i=to(n,0,t);return r&&Pn(i,r),Tn(e,this,i)})}function ru(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw new yt(o);return ju(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),Wl(e,t,{leading:r,maxWait:t,trailing:i})}function iu(e){return Rl(e,1)}function au(e,t){return Ql(Qa(t),e)}function ou(){if(!arguments.length)return[];var e=arguments[0];return K(e)?e:[e]}function su(e){return Di(e,p)}function cu(e,t){return t=typeof t==`function`?t:n,Di(e,p,t)}function lu(e){return Di(e,d|p)}function uu(e,t){return t=typeof t==`function`?t:n,Di(e,d|p,t)}function du(e,t){return t==null||ki(e,t,kd(t))}function fu(e,t){return e===t||e!==e&&t!==t}var pu=Io(qi),mu=Io(function(e,t){return e>=t}),hu=ea(function(){return arguments}())?ea:function(e){return Mu(e)&&Tt.call(e,`callee`)&&!Lt.call(e,`callee`)},K=Ze.isArray,gu=yn?tr(yn):ta;function _u(e){return e!=null&&Au(e.length)&&!Ou(e)}function vu(e){return Mu(e)&&_u(e)}function yu(e){return e===!0||e===!1||Mu(e)&&Ki(e)==se}var bu=H||np,xu=bn?tr(bn):na;function Su(e){return Mu(e)&&e.nodeType===1&&!Vu(e)}function Cu(e){if(e==null)return!0;if(_u(e)&&(K(e)||typeof e==`string`||typeof e.splice==`function`||bu(e)||qu(e)||hu(e)))return!e.length;var t=os(e);if(t==pe||t==ye)return!e.size;if(Ss(e))return!fa(e).length;for(var n in e)if(Tt.call(e,n))return!1;return!0}function wu(e,t){return ra(e,t)}function Tu(e,t,r){r=typeof r==`function`?r:n;var i=r?r(e,t):n;return i===n?ra(e,t,n,r):!!i}function Eu(e){if(!Mu(e))return!1;var t=Ki(e);return t==ue||t==le||typeof e.message==`string`&&typeof e.name==`string`&&!Vu(e)}function Du(e){return typeof e==`number`&&Xt(e)}function Ou(e){if(!ju(e))return!1;var t=Ki(e);return t==de||t==fe||t==oe||t==_e}function ku(e){return typeof e==`number`&&e==td(e)}function Au(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=P}function ju(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}function Mu(e){return typeof e==`object`&&!!e}var Nu=xn?tr(xn):aa;function Pu(e,t){return e===t||oa(e,t,ts(t))}function Fu(e,t,r){return r=typeof r==`function`?r:n,oa(e,t,ts(t),r)}function Iu(e){return Bu(e)&&e!=+e}function Lu(e){if(xs(e))throw new pt(a);return sa(e)}function Ru(e){return e===null}function zu(e){return e==null}function Bu(e){return typeof e==`number`||Mu(e)&&Ki(e)==me}function Vu(e){if(!Mu(e)||Ki(e)!=ge)return!1;var t=Ft(e);if(t===null)return!0;var n=Tt.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&wt.call(n)==Ot}var Hu=Sn?tr(Sn):ca;function Uu(e){return ku(e)&&e>=-P&&e<=P}var Wu=Cn?tr(Cn):la;function Gu(e){return typeof e==`string`||!K(e)&&Mu(e)&&Ki(e)==be}function Ku(e){return typeof e==`symbol`||Mu(e)&&Ki(e)==xe}var qu=wn?tr(wn):ua;function Ju(e){return e===n}function Yu(e){return Mu(e)&&os(e)==Se}function Xu(e){return Mu(e)&&Ki(e)==Ce}var Zu=Io(ma),Qu=Io(function(e,t){return e<=t});function $u(e){if(!e)return[];if(_u(e))return Gu(e)?Sr(e):mo(e);if(Bt&&e[Bt])return pr(e[Bt]());var t=os(e);return(t==pe?mr:t==ye?_r:Jd)(e)}function ed(e){return e?(e=rd(e),e===N||e===-N?(e<0?-1:1)*ee:e===e?e:0):e===0?e:0}function td(e){var t=ed(e),n=t%1;return t===t?n?t-n:t:0}function nd(e){return e?Ei(td(e),0,F):0}function rd(e){if(typeof e==`number`)return e;if(Ku(e))return te;if(ju(e)){var t=typeof e.valueOf==`function`?e.valueOf():e;e=ju(t)?t+``:t}if(typeof e!=`string`)return e===0?e:+e;e=er(e);var n=z.test(e);return n||ct.test(e)?un(e.slice(2),n?2:8):ot.test(e)?te:+e}function id(e){return ho(e,Ad(e))}function ad(e){return e?Ei(td(e),-P,P):e===0?e:0}function od(e){return e==null?``:Ua(e)}var sd=yo(function(e,t){if(Ss(t)||_u(t)){ho(t,kd(t),e);return}for(var n in t)Tt.call(t,n)&&yi(e,n,t[n])}),cd=yo(function(e,t){ho(t,Ad(t),e)}),ld=yo(function(e,t,n,r){ho(t,Ad(t),e,r)}),ud=yo(function(e,t,n,r){ho(t,kd(t),e,r)}),dd=Jo(Ti);function fd(e,t){var n=Pr(e);return t==null?n:Si(n,t)}var pd=Aa(function(e,t){e=gt(e);var r=-1,i=t.length,a=i>2?t[2]:n;for(a&&gs(t[0],t[1],a)&&(i=1);++r<i;)for(var o=t[r],s=Ad(o),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===n||fu(d,St[u])&&!Tt.call(e,u))&&(e[u]=o[u])}return e}),md=Aa(function(e){return e.push(n,Uo),Tn(Pd,n,e)});function hd(e,t){return Vn(e,W(t,3),Vi)}function gd(e,t){return Vn(e,W(t,3),Hi)}function _d(e,t){return e==null?e:zi(e,W(t,3),Ad)}function vd(e,t){return e==null?e:Bi(e,W(t,3),Ad)}function yd(e,t){return e&&Vi(e,W(t,3))}function bd(e,t){return e&&Hi(e,W(t,3))}function xd(e){return e==null?[]:Ui(e,kd(e))}function Sd(e){return e==null?[]:Ui(e,Ad(e))}function Cd(e,t,r){var i=e==null?n:Wi(e,t);return i===n?r:i}function wd(e,t){return e!=null&&ls(e,t,Ji)}function Td(e,t){return e!=null&&ls(e,t,Yi)}var Ed=Ao(function(e,t,n){t!=null&&typeof t.toString!=`function`&&(t=Dt.call(t)),e[t]=n},Pf(Rf)),Dd=Ao(function(e,t,n){t!=null&&typeof t.toString!=`function`&&(t=Dt.call(t)),Tt.call(e,t)?e[t].push(n):e[t]=[n]},W),Od=Aa($i);function kd(e){return _u(e)?mi(e):fa(e)}function Ad(e){return _u(e)?mi(e,!0):pa(e)}function jd(e,t){var n={};return t=W(t,3),Vi(e,function(e,r,i){wi(n,t(e,r,i),e)}),n}function Md(e,t){var n={};return t=W(t,3),Vi(e,function(e,r,i){wi(n,r,t(e,r,i))}),n}var Nd=yo(function(e,t,n){va(e,t,n)}),Pd=yo(function(e,t,n,r){va(e,t,n,r)}),Fd=Jo(function(e,t){var n={};if(e==null)return n;var r=!1;t=Nn(t,function(t){return t=$a(t,e),r||=t.length>1,t}),ho(e,Xo(e),n),r&&(n=Di(n,d|f|p,Wo));for(var i=t.length;i--;)Ga(n,t[i]);return n});function Id(e,t){return Rd(e,Yl(W(t)))}var Ld=Jo(function(e,t){return e==null?{}:Sa(e,t)});function Rd(e,t){if(e==null)return{};var n=Nn(Xo(e),function(e){return[e]});return t=W(t),Ca(e,n,function(e,n){return t(e,n[0])})}function zd(e,t,r){t=$a(t,e);var i=-1,a=t.length;for(a||(a=1,e=n);++i<a;){var o=e==null?n:e[Bs(t[i])];o===n&&(i=a,o=r),e=Ou(o)?o.call(e):o}return e}function Bd(e,t,n){return e==null?e:Na(e,t,n)}function Vd(e,t,r,i){return i=typeof i==`function`?i:n,e==null?e:Na(e,t,r,i)}var Hd=Bo(kd),Ud=Bo(Ad);function Wd(e,t,n){var r=K(e),i=r||bu(e)||qu(e);if(t=W(t,4),n==null){var a=e&&e.constructor;n=i?r?new a:[]:ju(e)&&Ou(a)?Pr(Ft(e)):{}}return(i?Dn:Vi)(e,function(e,r,i){return t(n,e,r,i)}),n}function Gd(e,t){return e==null?!0:Ga(e,t)}function Kd(e,t,n){return e==null?e:Ka(e,t,Qa(n))}function qd(e,t,r,i){return i=typeof i==`function`?i:n,e==null?e:Ka(e,t,Qa(r),i)}function Jd(e){return e==null?[]:nr(e,kd(e))}function Yd(e){return e==null?[]:nr(e,Ad(e))}function Xd(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=rd(r),r=r===r?r:0),t!==n&&(t=rd(t),t=t===t?t:0),Ei(rd(e),t,r)}function Zd(e,t,r){return t=ed(t),r===n?(r=t,t=0):r=ed(r),e=rd(e),Xi(e,t,r)}function Qd(e,t,r){if(r&&typeof r!=`boolean`&&gs(e,t,r)&&(t=r=n),r===n&&(typeof t==`boolean`?(r=t,t=n):typeof e==`boolean`&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=ed(e),t===n?(t=e,e=0):t=ed(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var a=cn();return an(e+a*(t-e+ln(`1e-`+((a+``).length-1))),t)}return Da(e,t)}var $d=wo(function(e,t,n){return t=t.toLowerCase(),e+(n?ef(t):t)});function ef(e){return Of(od(e).toLowerCase())}function tf(e){return e=od(e),e&&e.replace(ut,sr).replace(Yt,``)}function nf(e,t,r){e=od(e),t=Ua(t);var i=e.length;r=r===n?i:Ei(td(r),0,i);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function rf(e){return e=od(e),e&&Ve.test(e)?e.replace(ze,cr):e}function af(e){return e=od(e),e&&Ye.test(e)?e.replace(Je,`\\$&`):e}var of=wo(function(e,t,n){return e+(n?`-`:``)+t.toLowerCase()}),sf=wo(function(e,t,n){return e+(n?` `:``)+t.toLowerCase()}),cf=Co(`toLowerCase`);function lf(e,t,n){e=od(e),t=td(t);var r=t?xr(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return No(Kt(i),n)+e+No(Gt(i),n)}function uf(e,t,n){e=od(e),t=td(t);var r=t?xr(e):0;return t&&r<t?e+No(t-r,n):e}function df(e,t,n){e=od(e),t=td(t);var r=t?xr(e):0;return t&&r<t?No(t-r,n)+e:e}function ff(e,t,n){return n||t==null?t=0:t&&=+t,sn(od(e).replace(Xe,``),t||0)}function pf(e,t,r){return t=(r?gs(e,t,r):t===n)?1:td(t),ka(od(e),t)}function mf(){var e=arguments,t=od(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var hf=wo(function(e,t,n){return e+(n?`_`:``)+t.toLowerCase()});function gf(e,t,r){return r&&typeof r!=`number`&&gs(e,t,r)&&(t=r=n),r=r===n?F:r>>>0,r?(e=od(e),e&&(typeof t==`string`||t!=null&&!Hu(t))&&(t=Ua(t),!t&&dr(e))?to(Sr(e),0,r):e.split(t,r)):[]}var _f=wo(function(e,t,n){return e+(n?` `:``)+Of(t)});function vf(e,t,n){return e=od(e),n=n==null?0:Ei(td(n),0,e.length),t=Ua(t),e.slice(n,n+t.length)==t}function yf(e,t,r){var i=U.templateSettings;r&&gs(e,t,r)&&(t=n),e=od(e),t=ld({},t,i,Ho);var a=ld({},t.imports,i.imports,Ho),o=kd(a),c=nr(a,o),l,u,d=0,f=t.interpolate||dt,p=`__p += '`,m=_t((t.escape||dt).source+`|`+f.source+`|`+(f===We?it:dt).source+`|`+(t.evaluate||dt).source+`|$`,`g`),h=`//# sourceURL=`+(Tt.call(t,`sourceURL`)?(t.sourceURL+``).replace(/\s/g,` `):`lodash.templateSources[`+ ++tn+`]`)+`
`;e.replace(m,function(t,n,r,i,a,o){return r||=i,p+=e.slice(d,o).replace(ft,lr),n&&(l=!0,p+=`' +
__e(`+n+`) +
'`),a&&(u=!0,p+=`';
`+a+`;
__p += '`),r&&(p+=`' +
((__t = (`+r+`)) == null ? '' : __t) +
'`),d=o+t.length,t}),p+=`';
`;var g=Tt.call(t,`variable`)&&t.variable;if(!g)p=`with (obj) {
`+p+`
}
`;else if(nt.test(g))throw new pt(s);p=(u?p.replace(Fe,``):p).replace(Ie,`$1`).replace(Le,`$1;`),p=`function(`+(g||`obj`)+`) {
`+(g?``:`obj || (obj = {});
`)+`var __t, __p = ''`+(l?`, __e = _.escape`:``)+(u?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+p+`return __p
}`;var _=Af(function(){return mt(o,h+`return `+p).apply(n,c)});if(_.source=p,Eu(_))throw _;return _}function bf(e){return od(e).toLowerCase()}function xf(e){return od(e).toUpperCase()}function Sf(e,t,r){if(e=od(e),e&&(r||t===n))return er(e);if(!e||!(t=Ua(t)))return e;var i=Sr(e),a=Sr(t);return to(i,ir(i,a),ar(i,a)+1).join(``)}function Cf(e,t,r){if(e=od(e),e&&(r||t===n))return e.slice(0,Cr(e)+1);if(!e||!(t=Ua(t)))return e;var i=Sr(e);return to(i,0,ar(i,Sr(t))+1).join(``)}function wf(e,t,r){if(e=od(e),e&&(r||t===n))return e.replace(Xe,``);if(!e||!(t=Ua(t)))return e;var i=Sr(e);return to(i,ir(i,Sr(t))).join(``)}function Tf(e,t){var r=E,i=D;if(ju(t)){var a=`separator`in t?t.separator:a;r=`length`in t?td(t.length):r,i=`omission`in t?Ua(t.omission):i}e=od(e);var o=e.length;if(dr(e)){var s=Sr(e);o=s.length}if(r>=o)return e;var c=r-xr(i);if(c<1)return i;var l=s?to(s,0,c).join(``):e.slice(0,c);if(a===n)return l+i;if(s&&(c+=l.length-c),Hu(a)){if(e.slice(c).search(a)){var u,d=l;for(a.global||(a=_t(a.source,od(at.exec(a))+`g`)),a.lastIndex=0;u=a.exec(d);)var f=u.index;l=l.slice(0,f===n?c:f)}}else if(e.indexOf(Ua(a),c)!=c){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+i}function Ef(e){return e=od(e),e&&Be.test(e)?e.replace(Re,wr):e}var Df=wo(function(e,t,n){return e+(n?` `:``)+t.toUpperCase()}),Of=Co(`toUpperCase`);function kf(e,t,r){return e=od(e),t=r?n:t,t===n?fr(e)?Dr(e):Bn(e):e.match(t)||[]}var Af=Aa(function(e,t){try{return Tn(e,n,t)}catch(e){return Eu(e)?e:new pt(e)}}),jf=Jo(function(e,t){return Dn(t,function(t){t=Bs(t),wi(e,t,Bl(e[t],e))}),e});function Mf(e){var t=e==null?0:e.length,n=W();return e=t?Nn(e,function(e){if(typeof e[1]!=`function`)throw new yt(o);return[n(e[0]),e[1]]}):[],Aa(function(n){for(var r=-1;++r<t;){var i=e[r];if(Tn(i[0],this,n))return Tn(i[1],this,n)}})}function Nf(e){return Oi(Di(e,d))}function Pf(e){return function(){return e}}function Ff(e,t){return e==null||e!==e?t:e}var If=Oo(),Lf=Oo(!0);function Rf(e){return e}function zf(e){return da(typeof e==`function`?e:Di(e,d))}function Bf(e){return ga(Di(e,d))}function Vf(e,t){return _a(e,Di(t,d))}var Hf=Aa(function(e,t){return function(n){return $i(n,e,t)}}),Uf=Aa(function(e,t){return function(n){return $i(e,n,t)}});function Wf(e,t,n){var r=kd(t),i=Ui(t,r);n==null&&!(ju(t)&&(i.length||!r.length))&&(n=t,t=e,e=this,i=Ui(t,kd(t)));var a=!(ju(n)&&`chain`in n)||!!n.chain,o=Ou(e);return Dn(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=mo(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pn([this.value()],arguments))})}),e}function Gf(){return pn._===this&&(pn._=kt),this}function Kf(){}function qf(e){return e=td(e),Aa(function(t){return ba(t,e)})}var Jf=Mo(Nn),Yf=Mo(kn),Xf=Mo(Ln);function Zf(e){return _s(e)?qn(Bs(e)):wa(e)}function Qf(e){return function(t){return e==null?n:Wi(e,t)}}var $f=Fo(),ep=Fo(!0);function tp(){return[]}function np(){return!1}function rp(){return{}}function ip(){return``}function ap(){return!0}function op(e,t){if(e=td(e),e<1||e>P)return[];var n=F,r=an(e,F);t=W(t),e-=F;for(var i=Qn(r,t);++n<e;)t(n);return i}function sp(e){return K(e)?Nn(e,Bs):Ku(e)?[e]:mo(zs(od(e)))}function cp(e){var t=++Et;return od(e)+t}var lp=jo(function(e,t){return e+t},0),up=Ro(`ceil`),dp=jo(function(e,t){return e/t},1),fp=Ro(`floor`);function pp(e){return e&&e.length?Fi(e,Rf,qi):n}function mp(e,t){return e&&e.length?Fi(e,W(t,2),qi):n}function hp(e){return Kn(e,Rf)}function gp(e,t){return Kn(e,W(t,2))}function _p(e){return e&&e.length?Fi(e,Rf,ma):n}function vp(e,t){return e&&e.length?Fi(e,W(t,2),ma):n}var yp=jo(function(e,t){return e*t},1),bp=Ro(`round`),xp=jo(function(e,t){return e-t},0);function Sp(e){return e&&e.length?Zn(e,Rf):0}function Cp(e,t){return e&&e.length?Zn(e,W(t,2)):0}return U.after=Ll,U.ary=Rl,U.assign=sd,U.assignIn=cd,U.assignInWith=ld,U.assignWith=ud,U.at=dd,U.before=zl,U.bind=Bl,U.bindAll=jf,U.bindKey=Vl,U.castArray=ou,U.chain=$c,U.chunk=Ws,U.compact=Gs,U.concat=Ks,U.cond=Mf,U.conforms=Nf,U.constant=Pf,U.countBy=ul,U.create=fd,U.curry=Hl,U.curryRight=Ul,U.debounce=Wl,U.defaults=pd,U.defaultsDeep=md,U.defer=Gl,U.delay=Kl,U.difference=qs,U.differenceBy=Js,U.differenceWith=Ys,U.drop=Xs,U.dropRight=Zs,U.dropRightWhile=Qs,U.dropWhile=$s,U.fill=ec,U.filter=fl,U.flatMap=hl,U.flatMapDeep=gl,U.flatMapDepth=_l,U.flatten=rc,U.flattenDeep=ic,U.flattenDepth=ac,U.flip=ql,U.flow=If,U.flowRight=Lf,U.fromPairs=oc,U.functions=xd,U.functionsIn=Sd,U.groupBy=bl,U.initial=lc,U.intersection=uc,U.intersectionBy=dc,U.intersectionWith=fc,U.invert=Ed,U.invertBy=Dd,U.invokeMap=Sl,U.iteratee=zf,U.keyBy=Cl,U.keys=kd,U.keysIn=Ad,U.map=wl,U.mapKeys=jd,U.mapValues=Md,U.matches=Bf,U.matchesProperty=Vf,U.memoize=Jl,U.merge=Nd,U.mergeWith=Pd,U.method=Hf,U.methodOf=Uf,U.mixin=Wf,U.negate=Yl,U.nthArg=qf,U.omit=Fd,U.omitBy=Id,U.once=Xl,U.orderBy=Tl,U.over=Jf,U.overArgs=Zl,U.overEvery=Yf,U.overSome=Xf,U.partial=Ql,U.partialRight=$l,U.partition=El,U.pick=Ld,U.pickBy=Rd,U.property=Zf,U.propertyOf=Qf,U.pull=gc,U.pullAll=_c,U.pullAllBy=vc,U.pullAllWith=yc,U.pullAt=bc,U.range=$f,U.rangeRight=ep,U.rearg=eu,U.reject=kl,U.remove=xc,U.rest=tu,U.reverse=Sc,U.sampleSize=jl,U.set=Bd,U.setWith=Vd,U.shuffle=Ml,U.slice=Cc,U.sortBy=Fl,U.sortedUniq=Ac,U.sortedUniqBy=jc,U.split=gf,U.spread=nu,U.tail=Mc,U.take=Nc,U.takeRight=Pc,U.takeRightWhile=Fc,U.takeWhile=Ic,U.tap=el,U.throttle=ru,U.thru=tl,U.toArray=$u,U.toPairs=Hd,U.toPairsIn=Ud,U.toPath=sp,U.toPlainObject=id,U.transform=Wd,U.unary=iu,U.union=Lc,U.unionBy=Rc,U.unionWith=zc,U.uniq=Bc,U.uniqBy=Vc,U.uniqWith=Hc,U.unset=Gd,U.unzip=Uc,U.unzipWith=Wc,U.update=Kd,U.updateWith=qd,U.values=Jd,U.valuesIn=Yd,U.without=Gc,U.words=kf,U.wrap=au,U.xor=Kc,U.xorBy=qc,U.xorWith=Jc,U.zip=Yc,U.zipObject=Xc,U.zipObjectDeep=Zc,U.zipWith=Qc,U.entries=Hd,U.entriesIn=Ud,U.extend=cd,U.extendWith=ld,Wf(U,U),U.add=lp,U.attempt=Af,U.camelCase=$d,U.capitalize=ef,U.ceil=up,U.clamp=Xd,U.clone=su,U.cloneDeep=lu,U.cloneDeepWith=uu,U.cloneWith=cu,U.conformsTo=du,U.deburr=tf,U.defaultTo=Ff,U.divide=dp,U.endsWith=nf,U.eq=fu,U.escape=rf,U.escapeRegExp=af,U.every=dl,U.find=pl,U.findIndex=tc,U.findKey=hd,U.findLast=ml,U.findLastIndex=nc,U.findLastKey=gd,U.floor=fp,U.forEach=vl,U.forEachRight=yl,U.forIn=_d,U.forInRight=vd,U.forOwn=yd,U.forOwnRight=bd,U.get=Cd,U.gt=pu,U.gte=mu,U.has=wd,U.hasIn=Td,U.head=sc,U.identity=Rf,U.includes=xl,U.indexOf=cc,U.inRange=Zd,U.invoke=Od,U.isArguments=hu,U.isArray=K,U.isArrayBuffer=gu,U.isArrayLike=_u,U.isArrayLikeObject=vu,U.isBoolean=yu,U.isBuffer=bu,U.isDate=xu,U.isElement=Su,U.isEmpty=Cu,U.isEqual=wu,U.isEqualWith=Tu,U.isError=Eu,U.isFinite=Du,U.isFunction=Ou,U.isInteger=ku,U.isLength=Au,U.isMap=Nu,U.isMatch=Pu,U.isMatchWith=Fu,U.isNaN=Iu,U.isNative=Lu,U.isNil=zu,U.isNull=Ru,U.isNumber=Bu,U.isObject=ju,U.isObjectLike=Mu,U.isPlainObject=Vu,U.isRegExp=Hu,U.isSafeInteger=Uu,U.isSet=Wu,U.isString=Gu,U.isSymbol=Ku,U.isTypedArray=qu,U.isUndefined=Ju,U.isWeakMap=Yu,U.isWeakSet=Xu,U.join=pc,U.kebabCase=of,U.last=mc,U.lastIndexOf=hc,U.lowerCase=sf,U.lowerFirst=cf,U.lt=Zu,U.lte=Qu,U.max=pp,U.maxBy=mp,U.mean=hp,U.meanBy=gp,U.min=_p,U.minBy=vp,U.stubArray=tp,U.stubFalse=np,U.stubObject=rp,U.stubString=ip,U.stubTrue=ap,U.multiply=yp,U.nth=G,U.noConflict=Gf,U.noop=Kf,U.now=Il,U.pad=lf,U.padEnd=uf,U.padStart=df,U.parseInt=ff,U.random=Qd,U.reduce=Dl,U.reduceRight=Ol,U.repeat=pf,U.replace=mf,U.result=zd,U.round=bp,U.runInContext=e,U.sample=Al,U.size=Nl,U.snakeCase=hf,U.some=Pl,U.sortedIndex=wc,U.sortedIndexBy=Tc,U.sortedIndexOf=Ec,U.sortedLastIndex=Dc,U.sortedLastIndexBy=Oc,U.sortedLastIndexOf=kc,U.startCase=_f,U.startsWith=vf,U.subtract=xp,U.sum=Sp,U.sumBy=Cp,U.template=yf,U.times=op,U.toFinite=ed,U.toInteger=td,U.toLength=nd,U.toLower=bf,U.toNumber=rd,U.toSafeInteger=ad,U.toString=od,U.toUpper=xf,U.trim=Sf,U.trimEnd=Cf,U.trimStart=wf,U.truncate=Tf,U.unescape=Ef,U.uniqueId=cp,U.upperCase=Df,U.upperFirst=Of,U.each=vl,U.eachRight=yl,U.first=sc,Wf(U,function(){var e={};return Vi(U,function(t,n){Tt.call(U.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),U.VERSION=r,Dn([`bind`,`bindKey`,`curry`,`curryRight`,`partial`,`partialRight`],function(e){U[e].placeholder=U}),Dn([`drop`,`take`],function(e,t){Lr.prototype[e]=function(r){r=r===n?1:$t(td(r),0);var i=this.__filtered__&&!t?new Lr(this):this.clone();return i.__filtered__?i.__takeCount__=an(r,i.__takeCount__):i.__views__.push({size:an(r,F),type:e+(i.__dir__<0?`Right`:``)}),i},Lr.prototype[e+`Right`]=function(t){return this.reverse()[e](t).reverse()}}),Dn([`filter`,`map`,`takeWhile`],function(e,t){var n=t+1,r=n==A||n==M;Lr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:W(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Dn([`head`,`last`],function(e,t){var n=`take`+(t?`Right`:``);Lr.prototype[e]=function(){return this[n](1).value()[0]}}),Dn([`initial`,`tail`],function(e,t){var n=`drop`+(t?``:`Right`);Lr.prototype[e]=function(){return this.__filtered__?new Lr(this):this[n](1)}}),Lr.prototype.compact=function(){return this.filter(Rf)},Lr.prototype.find=function(e){return this.filter(e).head()},Lr.prototype.findLast=function(e){return this.reverse().find(e)},Lr.prototype.invokeMap=Aa(function(e,t){return typeof e==`function`?new Lr(this):this.map(function(n){return $i(n,e,t)})}),Lr.prototype.reject=function(e){return this.filter(Yl(W(e)))},Lr.prototype.slice=function(e,t){e=td(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Lr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=td(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Lr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Lr.prototype.toArray=function(){return this.take(F)},Vi(Lr.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=U[i?`take`+(t==`last`?`Right`:``):t],o=i||/^find/.test(t);a&&(U.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof Lr,l=s[0],u=c||K(t),d=function(e){var t=a.apply(U,Pn([e],s));return i&&f?t[0]:t};u&&r&&typeof l==`function`&&l.length!=1&&(c=u=!1);var f=this.__chain__,p=!!this.__actions__.length,m=o&&!f,h=c&&!p;if(!o&&u){t=h?t:new Lr(this);var g=e.apply(t,s);return g.__actions__.push({func:tl,args:[d],thisArg:n}),new Ir(g,f)}return m&&h?e.apply(this,s):(g=this.thru(d),m?i?g.value()[0]:g.value():g)})}),Dn([`pop`,`push`,`shift`,`sort`,`splice`,`unshift`],function(e){var t=bt[e],n=/^(?:push|sort|unshift)$/.test(e)?`tap`:`thru`,r=/^(?:pop|shift)$/.test(e);U.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(K(i)?i:[],e)}return this[n](function(n){return t.apply(K(n)?n:[],e)})}}),Vi(Lr.prototype,function(e,t){var n=U[t];if(n){var r=n.name+``;Tt.call(Jn,r)||(Jn[r]=[]),Jn[r].push({name:t,func:n})}}),Jn[ko(n,_).name]=[{name:`wrapper`,func:n}],Lr.prototype.clone=Rr,Lr.prototype.reverse=zr,Lr.prototype.value=Br,U.prototype.at=nl,U.prototype.chain=rl,U.prototype.commit=il,U.prototype.next=al,U.prototype.plant=sl,U.prototype.reverse=cl,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=ll,U.prototype.first=U.prototype.head,Bt&&(U.prototype[Bt]=ol),U})();typeof define==`function`&&typeof define.amd==`object`&&define.amd?(pn._=Or,define(function(){return Or})):hn?((hn.exports=Or)._=Or,mn._=Or):pn._=Or}).call(e)}))();function YE({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)(``),[s,c]=(0,V.useState)(!1),[l,u]=(0,V.useState)(null),{toast:d}=pd(),{containerRef:f,notifyNewItem:p,scrollToBottom:m,setIsSticky:h}=ME({threshold:80}),g=new Iw(`gpt-4o-mini`),_=(0,V.useRef)({messages:r});(0,V.useEffect)(()=>{(async()=>{try{let e=await t();e&&i(e.messages||[])}catch(e){console.error(`Error loading data:`,e),d({title:n(`resume.loadFailed`),description:n(`resume.loadFailedDesc`),variant:`destructive`})}})()},[t,n,d]),(0,V.useEffect)(()=>{let t={messages:r};if((0,JE.isEqual)(t,_.current))return;let n=setTimeout(async()=>{try{await e(t),_.current=t}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(n)},[r,e]),(0,V.useEffect)(()=>{p()},[r,p]);let v=async()=>{if(!a.trim()){d({title:n(`resume.error`),description:n(`resume.enterContent`),variant:`destructive`});return}c(!0);try{let e={type:`user`,content:a,timestamp:new Date().toISOString()};i(t=>[...t,e]),o(``),requestAnimationFrame(()=>m());let t=`你是一个专业的简历顾问。基于用户的输入："${a}"，
请提供专业的建议和帮助。如果收集到足够信息，请生成一份简历。

历史对话：
${r.map(e=>`${e.type}: ${e.content}`).join(`
`)}

请返回以下格式的JSON：
{
  "reply": "你的回复",
  "generateResume": true/false,
  "resumeData": {
    "basics": {
      "name": "姓名",
      "title": "职位",
      "experience": "经验年限",
      "summary": "个人总结"
    },
    "skills": ["技能1", "技能2"],
    "experience": [{
      "company": "公司名",
      "position": "职位",
      "duration": "时间段",
      "highlights": ["亮点1", "亮点2"]
    }],
    "projects": [{
      "name": "项目名",
      "description": "描述",
      "achievements": ["成就1", "成就2"],
      "technologies": ["技术1", "技术2"]
    }]
  }
}`,n=await g.generateJSONResponse(t),s=JSON.parse(n),c=[{type:`assistant`,content:s.reply,timestamp:new Date().toISOString()}];s.generateResume&&c.push({type:`resume-card`,content:`简历预览`,resumeData:s.resumeData,timestamp:new Date().toISOString()}),i(e=>[...e,...c])}catch(e){console.error(`Error:`,e),d({title:`生成失败`,description:`无法生成回应，请检查您的API密钥和网络连接。`,variant:`destructive`})}finally{c(!1)}};return(0,H.jsxs)(`div`,{className:`min-h-screen bg-gray-50 p-4`,children:[(0,H.jsxs)(`div`,{className:`max-w-4xl mx-auto`,children:[(0,H.jsx)(zv,{className:`mb-4`,children:(0,H.jsx)(Bv,{children:(0,H.jsx)(Vv,{children:`AI简历助手`})})}),(0,H.jsx)(`div`,{className:`space-y-4 mb-4 max-h-[60vh] overflow-auto`,ref:f,onMouseEnter:()=>h(!1),onMouseLeave:()=>h(!0),children:r.map(e=>{switch(e.type){case`resume-card`:return(0,H.jsxs)(zv,{className:`cursor-pointer hover:shadow-lg transition-shadow`,onClick:()=>u(e.resumeData||null),children:[(0,H.jsx)(Bv,{children:(0,H.jsx)(Vv,{children:`简历预览`})}),(0,H.jsx)(Uv,{children:(0,H.jsxs)(`div`,{className:`space-y-2`,children:[(0,H.jsx)(`h3`,{children:e.resumeData?.basics.title}),(0,H.jsx)(`p`,{children:e.resumeData?.basics.summary})]})})]},e.timestamp);default:return(0,H.jsx)(`div`,{className:`p-4 rounded-lg mb-4 ${e.type===`user`?`bg-blue-100 ml-12`:`bg-gray-100 mr-12`}`,children:e.content},e.timestamp)}})}),(0,H.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,H.jsx)(fm,{placeholder:`告诉我你想找什么样的工作，或分享你的经历...`,value:a,onChange:e=>o(e.target.value),onKeyDown:e=>e.key===`Enter`&&!e.shiftKey&&v()}),(0,H.jsx)(_c,{onClick:v,disabled:s,className:`shrink-0`,children:s?`生成中...`:`发送`})]})]}),(0,H.jsx)(LE,{open:!!l,onOpenChange:()=>u(null),children:(0,H.jsxs)(VE,{side:`right`,className:`w-[1000px] overflow-y-auto max-h-screen p-8`,children:[(0,H.jsx)(HE,{className:`mb-6`,children:(0,H.jsx)(WE,{children:`个人简历`})}),l&&(0,H.jsx)(qE,{resume:l})]})})]})}const XE=({uri:e})=>e?(0,H.jsx)(YE,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{messages:[],apiKey:``}}}}):(0,H.jsx)(`div`,{children:`uri is required`}),ZE=Lm({initilize(e){e.componentService.register(`ai-resume`,XE),Rv.register({id:`ai-resume`,label:J(`apps.aiResume`),match:[`.airesume.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`ai-resume:${t}`,title:`${J(`apps.aiResume`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`ai-resume`,props:{uri:t}}})}})}});var QE=`rovingFocusGroup.onEntryFocus`,$E={bubbles:!1,cancelable:!0},eD=`RovingFocusGroup`,[tD,nD,rD]=md(eD),[iD,aD]=ot(eD,[rD]),[oD,sD]=iD(eD),cD=V.forwardRef((e,t)=>(0,H.jsx)(tD.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,H.jsx)(tD.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,H.jsx)(lD,{...e,ref:t})})}));cD.displayName=eD;var lD=V.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=V.useRef(null),p=Xe(t,f),m=Hw(a),[h,g]=Tt({prop:o,defaultProp:s??null,onChange:c,caller:eD}),[_,v]=V.useState(!1),y=st(l),b=nD(n),x=V.useRef(!1),[S,C]=V.useState(0);return V.useEffect(()=>{let e=f.current;if(e)return e.addEventListener(QE,y),()=>e.removeEventListener(QE,y)},[y]),(0,H.jsx)(oD,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:h,onItemFocus:V.useCallback(e=>g(e),[g]),onItemShiftTab:V.useCallback(()=>v(!0),[]),onFocusableItemAdd:V.useCallback(()=>C(e=>e+1),[]),onFocusableItemRemove:V.useCallback(()=>C(e=>e-1),[]),children:(0,H.jsx)(B.div,{tabIndex:_||S===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:`none`,...e.style},onMouseDown:z(e.onMouseDown,()=>{x.current=!0}),onFocus:z(e.onFocus,e=>{let t=!x.current;if(e.target===e.currentTarget&&t&&!_){let t=new CustomEvent(QE,$E);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=b().filter(e=>e.focusable);hD([e.find(e=>e.active),e.find(e=>e.id===h),...e].filter(Boolean).map(e=>e.ref.current),u)}}x.current=!1}),onBlur:z(e.onBlur,()=>v(!1))})})}),uD=`RovingFocusGroupItem`,dD=V.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...s}=e,c=Ze(),l=a||c,u=sD(uD,n),d=u.currentTabStopId===l,f=nD(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:h}=u;return V.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),(0,H.jsx)(tD.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:(0,H.jsx)(B.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:z(e.onMouseDown,e=>{r?u.onItemFocus(l):e.preventDefault()}),onFocus:z(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:z(e.onKeyDown,e=>{if(e.key===`Tab`&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=mD(e,u.orientation,u.dir);if(t!==void 0){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=f().filter(e=>e.focusable).map(e=>e.ref.current);if(t===`last`)n.reverse();else if(t===`prev`||t===`next`){t===`prev`&&n.reverse();let r=n.indexOf(e.currentTarget);n=u.loop?gD(n,r+1):n.slice(r+1)}setTimeout(()=>hD(n))}}),children:typeof o==`function`?o({isCurrentTabStop:d,hasTabStop:h!=null}):o})})});dD.displayName=uD;var fD={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`};function pD(e,t){return t===`rtl`?e===`ArrowLeft`?`ArrowRight`:e===`ArrowRight`?`ArrowLeft`:e:e}function mD(e,t,n){let r=pD(e.key,n);if(!(t===`vertical`&&[`ArrowLeft`,`ArrowRight`].includes(r))&&!(t===`horizontal`&&[`ArrowUp`,`ArrowDown`].includes(r)))return fD[r]}function hD(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function gD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var _D=cD,vD=dD,yD=[`Enter`,` `],bD=[`ArrowDown`,`PageUp`,`Home`],xD=[`ArrowUp`,`PageDown`,`End`],SD=[...bD,...xD],CD={ltr:[...yD,`ArrowRight`],rtl:[...yD,`ArrowLeft`]},wD={ltr:[`ArrowLeft`],rtl:[`ArrowRight`]},TD=`Menu`,[ED,DD,OD]=md(TD),[kD,AD]=ot(TD,[OD,dt,aD]),jD=dt(),MD=aD(),[ND,PD]=kD(TD),[FD,ID]=kD(TD),LD=e=>{let{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,s=jD(t),[c,l]=V.useState(null),u=V.useRef(!1),d=st(a),f=Hw(i);return V.useEffect(()=>{let e=()=>{u.current=!0,document.addEventListener(`pointerdown`,t,{capture:!0,once:!0}),document.addEventListener(`pointermove`,t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener(`keydown`,e,{capture:!0}),()=>{document.removeEventListener(`keydown`,e,{capture:!0}),document.removeEventListener(`pointerdown`,t,{capture:!0}),document.removeEventListener(`pointermove`,t,{capture:!0})}},[]),(0,H.jsx)(Pt,{...s,children:(0,H.jsx)(ND,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:(0,H.jsx)(FD,{scope:t,onClose:V.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};LD.displayName=TD;var RD=`MenuAnchor`,zD=V.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=jD(n);return(0,H.jsx)(Mt,{...i,...r,ref:t})});zD.displayName=RD;var BD=`MenuPortal`,[VD,HD]=kD(BD,{forceMount:void 0}),UD=e=>{let{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=PD(BD,t);return(0,H.jsx)(VD,{scope:t,forceMount:n,children:(0,H.jsx)(wt,{present:n||a.open,children:(0,H.jsx)(yt,{asChild:!0,container:i,children:r})})})};UD.displayName=BD;var WD=`MenuContent`,[GD,KD]=kD(WD),qD=V.forwardRef((e,t)=>{let n=HD(WD,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=PD(WD,e.__scopeMenu),o=ID(WD,e.__scopeMenu);return(0,H.jsx)(ED.Provider,{scope:e.__scopeMenu,children:(0,H.jsx)(wt,{present:r||a.open,children:(0,H.jsx)(ED.Slot,{scope:e.__scopeMenu,children:o.modal?(0,H.jsx)(JD,{...i,ref:t}):(0,H.jsx)(YD,{...i,ref:t})})})})}),JD=V.forwardRef((e,t)=>{let n=PD(WD,e.__scopeMenu),r=V.useRef(null),i=Xe(t,r);return V.useEffect(()=>{let e=r.current;if(e)return ie(e)},[]),(0,H.jsx)(ZD,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:z(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),YD=V.forwardRef((e,t)=>{let n=PD(WD,e.__scopeMenu);return(0,H.jsx)(ZD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),XD=ut(`MenuContent.ScrollLock`),ZD=V.forwardRef((e,t)=>{let{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...h}=e,g=PD(WD,n),_=ID(WD,n),v=jD(n),y=MD(n),b=DD(n),[x,S]=V.useState(null),C=V.useRef(null),w=Xe(t,C,g.onContentChange),T=V.useRef(0),E=V.useRef(``),D=V.useRef(0),O=V.useRef(null),k=V.useRef(`right`),A=V.useRef(0),j=m?ne:V.Fragment,M=m?{as:XD,allowPinchZoom:!0}:void 0,N=e=>{let t=E.current+e,n=b().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,a=FO(n.map(e=>e.textValue),t,i),o=n.find(e=>e.textValue===a)?.ref.current;(function e(t){E.current=t,window.clearTimeout(T.current),t!==``&&(T.current=window.setTimeout(()=>e(``),1e3))})(t),o&&setTimeout(()=>o.focus())};V.useEffect(()=>()=>window.clearTimeout(T.current),[]),yc();let P=V.useCallback(e=>k.current===O.current?.side&&LO(e,O.current?.area),[]);return(0,H.jsx)(GD,{scope:n,searchRef:E,onItemEnter:V.useCallback(e=>{P(e)&&e.preventDefault()},[P]),onItemLeave:V.useCallback(e=>{P(e)||(C.current?.focus(),S(null))},[P]),onTriggerLeave:V.useCallback(e=>{P(e)&&e.preventDefault()},[P]),pointerGraceTimerRef:D,onPointerGraceIntentChange:V.useCallback(e=>{O.current=e},[]),children:(0,H.jsx)(j,{...M,children:(0,H.jsx)(Tc,{asChild:!0,trapped:i,onMountAutoFocus:z(a,e=>{e.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,H.jsx)($e,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:(0,H.jsx)(_D,{asChild:!0,...y,dir:_.dir,orientation:`vertical`,loop:r,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:z(c,e=>{_.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,H.jsx)(bt,{role:`menu`,"aria-orientation":`vertical`,"data-state":AO(g.open),"data-radix-menu-content":``,dir:_.dir,...v,...h,ref:w,style:{outline:`none`,...h.style},onKeyDown:z(h.onKeyDown,e=>{let t=e.target.closest(`[data-radix-menu-content]`)===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=e.key.length===1;t&&(e.key===`Tab`&&e.preventDefault(),!n&&r&&N(e.key));let i=C.current;if(e.target!==i||!SD.includes(e.key))return;e.preventDefault();let a=b().filter(e=>!e.disabled).map(e=>e.ref.current);xD.includes(e.key)&&a.reverse(),NO(a)}),onBlur:z(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),E.current=``)}),onPointerMove:z(e.onPointerMove,RO(e=>{let t=e.target,n=A.current!==e.clientX;e.currentTarget.contains(t)&&n&&(k.current=e.clientX>A.current?`right`:`left`,A.current=e.clientX)}))})})})})})})});qD.displayName=WD;var QD=`MenuGroup`,$D=V.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,H.jsx)(B.div,{role:`group`,...r,ref:t})});$D.displayName=QD;var eO=`MenuLabel`,tO=V.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,H.jsx)(B.div,{...r,ref:t})});tO.displayName=eO;var nO=`MenuItem`,rO=`menu.itemSelect`,iO=V.forwardRef((e,t)=>{let{disabled:n=!1,onSelect:r,...i}=e,a=V.useRef(null),o=ID(nO,e.__scopeMenu),s=KD(nO,e.__scopeMenu),c=Xe(t,a),l=V.useRef(!1),u=()=>{let e=a.current;if(!n&&e){let t=new CustomEvent(rO,{bubbles:!0,cancelable:!0});e.addEventListener(rO,e=>r?.(e),{once:!0}),Ye(e,t),t.defaultPrevented?l.current=!1:o.onClose()}};return(0,H.jsx)(aO,{...i,ref:c,disabled:n,onClick:z(e.onClick,u),onPointerDown:t=>{e.onPointerDown?.(t),l.current=!0},onPointerUp:z(e.onPointerUp,e=>{l.current||e.currentTarget?.click()}),onKeyDown:z(e.onKeyDown,e=>{let t=s.searchRef.current!==``;n||t&&e.key===` `||yD.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});iO.displayName=nO;var aO=V.forwardRef((e,t)=>{let{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=KD(nO,n),s=MD(n),c=V.useRef(null),l=Xe(t,c),[u,d]=V.useState(!1),[f,p]=V.useState(``);return V.useEffect(()=>{let e=c.current;e&&p((e.textContent??``).trim())},[a.children]),(0,H.jsx)(ED.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:(0,H.jsx)(vD,{asChild:!0,...s,focusable:!r,children:(0,H.jsx)(B.div,{role:`menuitem`,"data-highlighted":u?``:void 0,"aria-disabled":r||void 0,"data-disabled":r?``:void 0,...a,ref:l,onPointerMove:z(e.onPointerMove,RO(e=>{r?o.onItemLeave(e):(o.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:z(e.onPointerLeave,RO(e=>o.onItemLeave(e))),onFocus:z(e.onFocus,()=>d(!0)),onBlur:z(e.onBlur,()=>d(!1))})})})}),oO=`MenuCheckboxItem`,sO=V.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:r,...i}=e;return(0,H.jsx)(hO,{scope:e.__scopeMenu,checked:n,children:(0,H.jsx)(iO,{role:`menuitemcheckbox`,"aria-checked":jO(n)?`mixed`:n,...i,ref:t,"data-state":MO(n),onSelect:z(i.onSelect,()=>r?.(jO(n)?!0:!n),{checkForDefaultPrevented:!1})})})});sO.displayName=oO;var cO=`MenuRadioGroup`,[lO,uO]=kD(cO,{value:void 0,onValueChange:()=>{}}),dO=V.forwardRef((e,t)=>{let{value:n,onValueChange:r,...i}=e,a=st(r);return(0,H.jsx)(lO,{scope:e.__scopeMenu,value:n,onValueChange:a,children:(0,H.jsx)($D,{...i,ref:t})})});dO.displayName=cO;var fO=`MenuRadioItem`,pO=V.forwardRef((e,t)=>{let{value:n,...r}=e,i=uO(fO,e.__scopeMenu),a=n===i.value;return(0,H.jsx)(hO,{scope:e.__scopeMenu,checked:a,children:(0,H.jsx)(iO,{role:`menuitemradio`,"aria-checked":a,...r,ref:t,"data-state":MO(a),onSelect:z(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});pO.displayName=fO;var mO=`MenuItemIndicator`,[hO,gO]=kD(mO,{checked:!1}),_O=V.forwardRef((e,t)=>{let{__scopeMenu:n,forceMount:r,...i}=e,a=gO(mO,n);return(0,H.jsx)(wt,{present:r||jO(a.checked)||a.checked===!0,children:(0,H.jsx)(B.span,{...i,ref:t,"data-state":MO(a.checked)})})});_O.displayName=mO;var vO=`MenuSeparator`,yO=V.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,H.jsx)(B.div,{role:`separator`,"aria-orientation":`horizontal`,...r,ref:t})});yO.displayName=vO;var bO=`MenuArrow`,xO=V.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=jD(n);return(0,H.jsx)(Ft,{...i,...r,ref:t})});xO.displayName=bO;var SO=`MenuSub`,[CO,wO]=kD(SO),TO=e=>{let{__scopeMenu:t,children:n,open:r=!1,onOpenChange:i}=e,a=PD(SO,t),o=jD(t),[s,c]=V.useState(null),[l,u]=V.useState(null),d=st(i);return V.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),(0,H.jsx)(Pt,{...o,children:(0,H.jsx)(ND,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:(0,H.jsx)(CO,{scope:t,contentId:Ze(),triggerId:Ze(),trigger:s,onTriggerChange:c,children:n})})})};TO.displayName=SO;var EO=`MenuSubTrigger`,DO=V.forwardRef((e,t)=>{let n=PD(EO,e.__scopeMenu),r=ID(EO,e.__scopeMenu),i=wO(EO,e.__scopeMenu),a=KD(EO,e.__scopeMenu),o=V.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=V.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return V.useEffect(()=>u,[u]),V.useEffect(()=>{let e=s.current;return()=>{window.clearTimeout(e),c(null)}},[s,c]),(0,H.jsx)(zD,{asChild:!0,...l,children:(0,H.jsx)(aO,{id:i.triggerId,"aria-haspopup":`menu`,"aria-expanded":n.open,"aria-controls":i.contentId,"data-state":AO(n.open),...e,ref:It(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),!(e.disabled||t.defaultPrevented)&&(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:z(e.onPointerMove,RO(t=>{a.onItemEnter(t),!t.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:z(e.onPointerLeave,RO(e=>{u();let t=n.content?.getBoundingClientRect();if(t){let r=n.content?.dataset.side,i=r===`right`,o=i?-5:5,c=t[i?`left`:`right`],l=t[i?`right`:`left`];a.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:c,y:t.bottom}],side:r}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:z(e.onKeyDown,t=>{let i=a.searchRef.current!==``;e.disabled||i&&t.key===` `||CD[r.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});DO.displayName=EO;var OO=`MenuSubContent`,kO=V.forwardRef((e,t)=>{let n=HD(WD,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=PD(WD,e.__scopeMenu),o=ID(WD,e.__scopeMenu),s=wO(OO,e.__scopeMenu),c=V.useRef(null),l=Xe(t,c);return(0,H.jsx)(ED.Provider,{scope:e.__scopeMenu,children:(0,H.jsx)(wt,{present:r||a.open,children:(0,H.jsx)(ED.Slot,{scope:e.__scopeMenu,children:(0,H.jsx)(ZD,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:l,align:`start`,side:o.dir===`rtl`?`left`:`right`,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:z(e.onFocusOutside,e=>{e.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:z(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:z(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),n=wD[o.dir].includes(e.key);t&&n&&(a.onOpenChange(!1),s.trigger?.focus(),e.preventDefault())})})})})})});kO.displayName=OO;function AO(e){return e?`open`:`closed`}function jO(e){return e===`indeterminate`}function MO(e){return jO(e)?`indeterminate`:e?`checked`:`unchecked`}function NO(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function PO(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function FO(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,a=PO(e,Math.max(i,0));r.length===1&&(a=a.filter(e=>e!==n));let o=a.find(e=>e.toLowerCase().startsWith(r.toLowerCase()));return o===n?void 0:o}function IO(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e],s=t[a],c=o.x,l=o.y,u=s.x,d=s.y;l>r!=d>r&&n<(u-c)*(r-l)/(d-l)+c&&(i=!i)}return i}function LO(e,t){return t?IO({x:e.clientX,y:e.clientY},t):!1}function RO(e){return t=>t.pointerType===`mouse`?e(t):void 0}var zO=LD,BO=zD,VO=UD,HO=qD,UO=$D,WO=tO,GO=iO,KO=sO,qO=dO,JO=pO,YO=_O,XO=yO,ZO=xO,QO=DO,$O=kO,ek=`DropdownMenu`,[tk,nk]=ot(ek,[AD]),rk=AD(),[ik,ak]=tk(ek),ok=e=>{let{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:s=!0}=e,c=rk(t),l=V.useRef(null),[u,d]=Tt({prop:i,defaultProp:a??!1,onChange:o,caller:ek});return(0,H.jsx)(ik,{scope:t,triggerId:Ze(),triggerRef:l,contentId:Ze(),open:u,onOpenChange:d,onOpenToggle:V.useCallback(()=>d(e=>!e),[d]),modal:s,children:(0,H.jsx)(zO,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})};ok.displayName=ek;var sk=`DropdownMenuTrigger`,ck=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=ak(sk,n),o=rk(n);return(0,H.jsx)(BO,{asChild:!0,...o,children:(0,H.jsx)(B.button,{type:`button`,id:a.triggerId,"aria-haspopup":`menu`,"aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?`open`:`closed`,"data-disabled":r?``:void 0,disabled:r,...i,ref:It(t,a.triggerRef),onPointerDown:z(e.onPointerDown,e=>{!r&&e.button===0&&e.ctrlKey===!1&&(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:z(e.onKeyDown,e=>{r||([`Enter`,` `].includes(e.key)&&a.onOpenToggle(),e.key===`ArrowDown`&&a.onOpenChange(!0),[`Enter`,` `,`ArrowDown`].includes(e.key)&&e.preventDefault())})})})});ck.displayName=sk;var lk=`DropdownMenuPortal`,uk=e=>{let{__scopeDropdownMenu:t,...n}=e,r=rk(t);return(0,H.jsx)(VO,{...r,...n})};uk.displayName=lk;var dk=`DropdownMenuContent`,fk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=ak(dk,n),a=rk(n),o=V.useRef(!1);return(0,H.jsx)(HO,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:z(e.onCloseAutoFocus,e=>{o.current||i.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:z(e.onInteractOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0,r=t.button===2||n;(!i.modal||r)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});fk.displayName=dk;var pk=`DropdownMenuGroup`,mk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(UO,{...i,...r,ref:t})});mk.displayName=pk;var hk=`DropdownMenuLabel`,gk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(WO,{...i,...r,ref:t})});gk.displayName=hk;var _k=`DropdownMenuItem`,vk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(GO,{...i,...r,ref:t})});vk.displayName=_k;var yk=`DropdownMenuCheckboxItem`,bk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(KO,{...i,...r,ref:t})});bk.displayName=yk;var xk=`DropdownMenuRadioGroup`,Sk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(qO,{...i,...r,ref:t})});Sk.displayName=xk;var Ck=`DropdownMenuRadioItem`,wk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(JO,{...i,...r,ref:t})});wk.displayName=Ck;var Tk=`DropdownMenuItemIndicator`,Ek=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(YO,{...i,...r,ref:t})});Ek.displayName=Tk;var Dk=`DropdownMenuSeparator`,Ok=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(XO,{...i,...r,ref:t})});Ok.displayName=Dk;var kk=`DropdownMenuArrow`,Ak=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(ZO,{...i,...r,ref:t})});Ak.displayName=kk;var jk=`DropdownMenuSubTrigger`,Mk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)(QO,{...i,...r,ref:t})});Mk.displayName=jk;var Nk=`DropdownMenuSubContent`,Pk=V.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=rk(n);return(0,H.jsx)($O,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});Pk.displayName=Nk;var Fk=ok,Ik=ck,Lk=uk,Rk=fk,zk=gk,Bk=vk,Vk=bk,Hk=wk,Uk=Ek,Wk=Ok,Gk=Mk,Kk=Pk,qk=Fk,Jk=Ik,Yk=V.forwardRef(({className:e,inset:t,children:n,...r},i)=>(0,H.jsxs)(Gk,{ref:i,className:G(`flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...r,children:[n,(0,H.jsx)(Xl,{className:`ml-auto`})]}));Yk.displayName=Gk.displayName;var Xk=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(Kk,{ref:n,className:G(`z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...t}));Xk.displayName=Kk.displayName;var Zk=V.forwardRef(({className:e,sideOffset:t=4,onCloseAutoFocus:n,...r},i)=>(0,H.jsx)(Lk,{children:(0,H.jsx)(Rk,{ref:i,sideOffset:t,className:G(`z-40 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),onCloseAutoFocus:e=>{e.preventDefault(),n?.(e)},...r})}));Zk.displayName=Rk.displayName;var Qk=V.forwardRef(({className:e,inset:t,...n},r)=>(0,H.jsx)(Bk,{ref:r,className:G(`relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,t&&`pl-8`,e),...n}));Qk.displayName=Bk.displayName;var $k=V.forwardRef(({className:e,children:t,checked:n,...r},i)=>(0,H.jsxs)(Vk,{ref:i,className:G(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),checked:n,...r,children:[(0,H.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,H.jsx)(Uk,{children:(0,H.jsx)(ql,{className:`h-4 w-4`})})}),t]}));$k.displayName=Vk.displayName;var eA=V.forwardRef(({className:e,children:t,...n},r)=>(0,H.jsxs)(Hk,{ref:r,className:G(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,H.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,H.jsx)(Uk,{children:(0,H.jsx)(tu,{className:`h-2 w-2 fill-current`})})}),t]}));eA.displayName=Hk.displayName;var tA=V.forwardRef(({className:e,inset:t,...n},r)=>(0,H.jsx)(zk,{ref:r,className:G(`px-2 py-1.5 text-sm font-semibold`,t&&`pl-8`,e),...n}));tA.displayName=zk.displayName;var nA=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(Wk,{ref:n,className:G(`-mx-1 my-1 h-px bg-muted`,e),...t}));nA.displayName=Wk.displayName;var rA=({className:e,...t})=>(0,H.jsx)(`span`,{className:G(`ml-auto text-xs tracking-widest opacity-60`,e),...t});rA.displayName=`DropdownMenuShortcut`;var iA=[`😊`,`😐`,`😢`,`😡`,`🤔`];function aA({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)(``),[s,c]=(0,V.useState)(`😊`),[l,u]=(0,V.useState)(null),[d,f]=(0,V.useState)(!1);(0,V.useEffect)(()=>{(async()=>{try{if(t)i(await t());else{let e=localStorage.getItem(`thoughts`);e&&i(JSON.parse(e))}}catch(e){console.error(`Failed to load thoughts:`,e)}})()},[t]),(0,V.useEffect)(()=>{(async()=>{try{e?await e(r):localStorage.setItem(`thoughts`,JSON.stringify(r))}catch(e){console.error(`Failed to save thoughts:`,e)}})()},[r,e]),(0,V.useEffect)(()=>{let e=e=>{d&&!e.target.closest(`.mood-picker`)&&f(!1)};return document.addEventListener(`click`,e),()=>{document.removeEventListener(`click`,e)}},[d]);let p=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),m())},m=()=>{if(a.trim()){let e={id:Date.now(),content:a,timestamp:Date.now(),mood:s};i(t=>[e,...t]),o(``)}},h=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,H.jsx)(`div`,{className:`min-h-screen bg-gray-50`,children:(0,H.jsxs)(`div`,{className:`max-w-2xl mx-auto px-4 py-6`,children:[(0,H.jsx)(`div`,{className:`sticky top-4 z-10 mb-8`,children:(0,H.jsx)(`div`,{className:`flex space-x-2`,children:(0,H.jsxs)(`div`,{className:`flex-grow flex space-x-2 items-center border rounded-xl px-4 py-3 bg-white shadow-lg hover:shadow-xl transition-shadow duration-200 focus-within:shadow-xl focus-within:ring-1 focus-within:ring-blue-100`,children:[(0,H.jsxs)(`div`,{className:`relative mood-picker`,children:[(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`text-xl p-1.5 h-auto hover:bg-gray-50 rounded-full transition-colors`,onClick:()=>f(!d),children:s}),d&&(0,H.jsx)(`div`,{className:`absolute top-full left-0 mt-2 bg-white shadow-xl rounded-lg p-2 z-20 border border-gray-100`,children:(0,H.jsx)(`div`,{className:`flex gap-1.5`,children:iA.map(e=>(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`text-xl p-2 h-auto hover:bg-gray-50 rounded-full transition-colors`,onClick:()=>{c(e),f(!1)},children:e},e))})})]}),(0,H.jsx)(fm,{type:`text`,value:a,onChange:e=>o(e.target.value),onKeyPress:p,placeholder:n(`thoughts.placeholder`),className:`flex-grow border-0 focus:ring-0 focus-visible:ring-0 focus:outline-none px-0 placeholder-gray-400 text-base`,autoFocus:!0})]})})}),(0,H.jsxs)(`div`,{className:`space-y-4 pb-6`,children:[r.map(e=>(0,H.jsx)(zv,{className:`group bg-white border-transparent hover:border-gray-200 shadow-sm hover:shadow transition-all duration-200`,children:(0,H.jsx)(Uv,{className:`p-5`,children:(0,H.jsxs)(`div`,{className:`flex justify-between items-start gap-4`,children:[(0,H.jsxs)(`div`,{className:`flex-grow`,children:[(0,H.jsx)(`p`,{className:`whitespace-pre-wrap text-base leading-relaxed text-gray-700`,children:e.content}),(0,H.jsxs)(`div`,{className:`flex items-center gap-2 mt-3 text-sm text-gray-500`,children:[(0,H.jsx)(`span`,{className:`text-lg`,children:e.mood}),(0,H.jsx)(`span`,{className:`text-gray-300`,children:`•`}),(0,H.jsx)(`time`,{dateTime:new Date(e.timestamp).toISOString(),children:new Date(e.timestamp).toLocaleString()})]})]}),(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-gray-400 hover:text-gray-600 -mr-2`,children:(0,H.jsx)(au,{className:`h-4 w-4`})})}),(0,H.jsx)(Zk,{align:`end`,className:`w-[160px]`,children:(0,H.jsxs)(Qk,{className:`text-red-600 focus:text-red-700 focus:bg-red-50`,onClick:()=>{window.confirm(n(`thoughts.confirmDelete`))&&h(e.id)},children:[(0,H.jsx)(ku,{className:`h-4 w-4 mr-2`}),n(`thoughts.delete`)]})})]})]})})},e.id)),r.length===0&&(0,H.jsxs)(`div`,{className:`text-center text-gray-400 py-16 bg-white rounded-xl border border-dashed border-gray-200`,children:[(0,H.jsx)(`p`,{className:`text-lg`,children:n(`thoughts.noRecords`)}),(0,H.jsx)(`p`,{className:`text-sm mt-1`,children:n(`thoughts.startWriting`)})]})]})]})})}const oA=({uri:e})=>e?(0,H.jsx)(aA,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}}):(0,H.jsx)(`div`,{children:`uri is required`}),sA=Lm({initilize(e){e.componentService.register(`streaming-note`,oA),Rv.register({id:`streaming-note`,label:J(`apps.streamingNote`),match:[`.streaming.json`],priority:100,init:t=>{console.log(`open uri:`,t),e.layoutService.pageBox.addPage({id:`streaming-note:${t}`,title:`${J(`apps.streamingNote`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`streaming-note`,props:{uri:t}}})}})}});function cA({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)(null),[s,c]=(0,V.useState)(!1);(0,V.useEffect)(()=>{(async()=>{try{let e;if(t)e=await t();else{let t=localStorage.getItem(`zenNotes`);e=t?JSON.parse(t):[]}if(i(e),e.length===0){let e={id:Date.now().toString(),content:``,createdAt:new Date().toISOString()};o(e),l(e)}else o(e[0])}catch(e){console.error(`Failed to load notes:`,e)}})()},[t]);let l=async t=>{let n=a?r.map(e=>e.id===t.id?t:e):[t,...r];i(n);try{e?await e(n):localStorage.setItem(`zenNotes`,JSON.stringify(n))}catch(e){console.error(`Failed to save notes:`,e)}},u=e=>{if(a){let t={...a,content:e.target.value};o(t),l(t)}},d=()=>{let e={id:Date.now().toString(),content:``,createdAt:new Date().toISOString()};o(e),l(e)},f=e=>{o(e)};return(0,H.jsxs)(`div`,{className:`min-h-screen flex flex-col transition-colors duration-300 ${s?`bg-gray-900 text-gray-100`:`bg-gray-100 text-gray-900`}`,children:[(0,H.jsxs)(`nav`,{className:`p-4 flex justify-between items-center border-b ${s?`border-gray-700`:`border-gray-200`}`,children:[(0,H.jsx)(`h1`,{className:`text-2xl font-semibold`,children:`Zen Notes`}),(0,H.jsxs)(`div`,{className:`flex space-x-2`,children:[(0,H.jsxs)(rm,{children:[(0,H.jsx)(im,{asChild:!0,children:(0,H.jsx)(_c,{variant:`outline`,size:`icon`,className:`${s?`border-gray-700 hover:bg-gray-800 hover:text-gray-100`:`hover:bg-gray-100`}`,children:(0,H.jsx)(Cu,{className:`h-4 w-4`})})}),(0,H.jsxs)(sm,{className:`${s?`bg-gray-800 text-gray-100 border-gray-700`:`bg-white`}`,children:[(0,H.jsx)(cm,{children:(0,H.jsx)(um,{children:n(`zenNotes.createNewNote`)})}),(0,H.jsx)(`p`,{className:s?`text-gray-300`:`text-gray-600`,children:n(`zenNotes.confirmCreateNew`)}),(0,H.jsx)(_c,{onClick:d,className:s?`bg-blue-600 hover:bg-blue-700`:``,children:n(`common.ok`)})]})]}),(0,H.jsxs)(rm,{children:[(0,H.jsx)(im,{asChild:!0,children:(0,H.jsx)(_c,{variant:`outline`,size:`icon`,className:`${s?`border-gray-700 hover:bg-gray-800 hover:text-gray-100`:`hover:bg-gray-100`}`,children:(0,H.jsx)(pu,{className:`h-4 w-4`})})}),(0,H.jsxs)(sm,{className:`${s?`bg-gray-800 text-gray-100 border-gray-700`:`bg-white`}`,children:[(0,H.jsx)(cm,{children:(0,H.jsx)(um,{children:n(`zenNotes.historyNotes`)})}),(0,H.jsx)(`div`,{className:`max-h-96 overflow-y-auto`,children:r.map(e=>(0,H.jsxs)(`div`,{className:`p-2 cursor-pointer ${s?`hover:bg-gray-700`:`hover:bg-gray-100`}`,onClick:()=>f(e),children:[(0,H.jsx)(`p`,{className:`font-semibold`,children:new Date(e.createdAt).toLocaleString()}),(0,H.jsx)(`p`,{className:`truncate ${s?`text-gray-300`:`text-gray-600`}`,children:e.content})]},e.id))})]})]}),(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,onClick:()=>{c(!s)},"aria-label":s?`Switch to light mode`:`Switch to dark mode`,className:`${s?`hover:bg-gray-800 text-gray-100`:`hover:bg-gray-100`}`,children:s?(0,H.jsx)(Ou,{className:`h-4 w-4`}):(0,H.jsx)(vu,{className:`h-4 w-4`})})]})]}),(0,H.jsx)(`main`,{className:`flex-1 flex items-center justify-center p-4`,children:(0,H.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,H.jsx)(DE,{value:a?.content||``,onChange:u,placeholder:n(`zenNotes.placeholder`),className:`w-full h-64 p-4 rounded-lg resize-none focus:ring-2 focus:ring-opacity-50 transition-all duration-300 ${s?`bg-gray-800 text-gray-100 focus:ring-blue-500 border-gray-700 placeholder-gray-500`:`bg-white text-gray-900 focus:ring-blue-500 placeholder-gray-400`}`}),(0,H.jsx)(`p`,{className:`mt-2 text-sm ${s?`text-gray-400`:`text-gray-500`}`,children:n(`zenNotes.wordCount`,{count:a?.content.length||0})})]})})]})}const lA=({uri:e})=>e?(0,H.jsx)(cA,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return[]}}}):(0,H.jsx)(`div`,{children:`uri is required`}),uA=Lm({initilize(e){e.componentService.register(`zen-notes`,lA),Rv.register({id:`zen-notes`,label:J(`apps.zenNotes`),match:[`.zennotes.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`zen-notes:${t}`,title:`${J(`apps.zenNotes`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`zen-notes`,props:{uri:t}}})}})}});var dA=n((e=>{var t=c();function n(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var r=typeof Object.is==`function`?Object.is:n,i=t.useState,a=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),c=r[0].inst,l=r[1];return o(function(){c.value=n,c.getSnapshot=t,u(c)&&l({inst:c})},[e,n,t]),a(function(){return u(c)&&l({inst:c}),e(function(){u(c)&&l({inst:c})})},[e]),s(n),n}function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch{return!0}}function d(e,t){return t()}var f=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?d:l;e.useSyncExternalStore=t.useSyncExternalStore===void 0?f:t.useSyncExternalStore})),fA=n(((e,t)=>{t.exports=dA()}))();function pA(){return(0,fA.useSyncExternalStore)(mA,()=>!0,()=>!1)}function mA(){return()=>{}}var hA=`Avatar`,[gA,_A]=ot(hA),[vA,yA]=gA(hA),bA=V.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,a]=V.useState(`idle`);return(0,H.jsx)(vA,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:(0,H.jsx)(B.span,{...r,ref:t})})});bA.displayName=hA;var xA=`AvatarImage`,SA=V.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=yA(xA,n),s=EA(r,a),c=st(e=>{i(e),o.onImageLoadingStatusChange(e)});return Nt(()=>{s!==`idle`&&c(s)},[s,c]),s===`loaded`?(0,H.jsx)(B.img,{...a,ref:t,src:r}):null});SA.displayName=xA;var CA=`AvatarFallback`,wA=V.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,a=yA(CA,n),[o,s]=V.useState(r===void 0);return V.useEffect(()=>{if(r!==void 0){let e=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&a.imageLoadingStatus!==`loaded`?(0,H.jsx)(B.span,{...i,ref:t}):null});wA.displayName=CA;function TA(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function EA(e,{referrerPolicy:t,crossOrigin:n}){let r=pA(),i=V.useRef(null),a=(()=>r?(i.current||=new window.Image,i.current):null)(),[o,s]=V.useState(()=>TA(a,e));return Nt(()=>{s(TA(a,e))},[a,e]),Nt(()=>{let e=e=>()=>{s(e)};if(!a)return;let r=e(`loaded`),i=e(`error`);return a.addEventListener(`load`,r),a.addEventListener(`error`,i),t&&(a.referrerPolicy=t),typeof n==`string`&&(a.crossOrigin=n),()=>{a.removeEventListener(`load`,r),a.removeEventListener(`error`,i)}},[a,n,t]),o}var DA=bA,OA=SA,kA=wA,AA=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(DA,{ref:n,className:G(`relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));AA.displayName=DA.displayName;var jA=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(OA,{ref:n,className:G(`aspect-square h-full w-full`,e),...t}));jA.displayName=OA.displayName;var MA=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(kA,{ref:n,className:G(`flex h-full w-full items-center justify-center rounded-full bg-muted`,e),...t}));MA.displayName=kA.displayName;function NA({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)(``),{toast:s}=pd();(0,V.useEffect)(()=>{(async()=>{try{let e=await t?.();e?.posts&&i(e.posts)}catch(e){console.error(`Error loading data:`,e),s({title:n(`community.loadFailed`),description:n(`community.loadFailedDesc`),variant:`destructive`})}})()},[t,n,s]),(0,V.useEffect)(()=>{let t=setTimeout(async()=>{try{await e?.({posts:r})}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[r,e]);let c=async()=>{if(!a.trim()){s({title:n(`community.error`),description:n(`community.enterContent`),variant:`destructive`});return}let e={id:Date.now().toString(),content:a,author:{name:n(`community.user`)+Math.floor(Math.random()*1e3),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${Date.now()}`},likes:0,comments:0,createdAt:new Date().toISOString()};i(t=>[e,...t]),o(``),s({title:n(`community.publishSuccess`),description:n(`community.publishSuccessDesc`)})},l=e=>{i(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t))};return(0,H.jsx)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300`,children:(0,H.jsxs)(`div`,{className:`max-w-2xl mx-auto p-4`,children:[(0,H.jsxs)(zv,{className:`mb-8 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`,children:[(0,H.jsxs)(Bv,{children:[(0,H.jsx)(Vv,{className:`dark:text-gray-100`,children:n(`community.publishNewPost`)}),(0,H.jsx)(Hv,{className:`dark:text-gray-400`,children:n(`community.shareYourThoughts`)})]}),(0,H.jsx)(Uv,{children:(0,H.jsx)(DE,{placeholder:n(`community.writeSomething`),value:a,onChange:e=>o(e.target.value),className:`min-h-[100px] bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 
                border-gray-200 dark:border-gray-700 placeholder-gray-400 dark:placeholder-gray-500`})}),(0,H.jsx)(Wv,{className:`flex justify-end`,children:(0,H.jsx)(_c,{onClick:c,className:`dark:bg-blue-600 dark:hover:bg-blue-700`,children:n(`community.publish`)})})]}),(0,H.jsx)(`div`,{className:`space-y-4`,children:r.map(e=>(0,H.jsxs)(zv,{className:`overflow-hidden bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`,children:[(0,H.jsxs)(Bv,{className:`flex flex-row items-center gap-4`,children:[(0,H.jsxs)(AA,{children:[(0,H.jsx)(jA,{src:e.author.avatar}),(0,H.jsx)(MA,{className:`dark:bg-gray-700 dark:text-gray-100`,children:e.author.name[0]})]}),(0,H.jsxs)(`div`,{className:`flex-1`,children:[(0,H.jsx)(Vv,{className:`text-base dark:text-gray-100`,children:e.author.name}),(0,H.jsx)(Hv,{className:`dark:text-gray-400`,children:new Date(e.createdAt).toLocaleString()})]}),(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,className:`dark:hover:bg-gray-700`,children:(0,H.jsx)(iu,{className:`h-4 w-4 dark:text-gray-400`})})]}),(0,H.jsx)(Uv,{children:(0,H.jsx)(`p`,{className:`text-gray-700 dark:text-gray-300 whitespace-pre-wrap`,children:e.content})}),(0,H.jsx)(Wv,{className:`border-t dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50`,children:(0,H.jsxs)(`div`,{className:`flex gap-4 text-gray-500 dark:text-gray-400`,children:[(0,H.jsxs)(_c,{variant:`ghost`,size:`sm`,className:`gap-2 dark:hover:bg-gray-700`,onClick:()=>l(e.id),children:[(0,H.jsx)(fu,{className:`h-4 w-4`}),(0,H.jsx)(`span`,{children:e.likes})]}),(0,H.jsxs)(_c,{variant:`ghost`,size:`sm`,className:`gap-2 dark:hover:bg-gray-700`,children:[(0,H.jsx)(_u,{className:`h-4 w-4`}),(0,H.jsx)(`span`,{children:e.comments})]}),(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`dark:hover:bg-gray-700`,children:(0,H.jsx)(Eu,{className:`h-4 w-4`})})]})})]},e.id))})]})})}const PA=({uri:e})=>e?(0,H.jsx)(NA,{saveData:async t=>{try{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})}catch(e){console.error(`Failed to save data:`,e)}},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{posts:[]}}}}):(0,H.jsx)(`div`,{children:`uri is required`}),FA=Lm({initilize(e){e.componentService.register(`community`,PA),Rv.register({id:`community`,label:J(`apps.community`),match:[`.community.json`],priority:100,init:async t=>e.layoutService.pageBox.addPage({id:`community:${t}`,title:`${J(`apps.community`)}:${oh.getFileName(t)}`,viewData:{type:`community`,props:{uri:t}}})})}});function IA(e){if(typeof e==`string`||typeof e==`number`)return``+e;let t=``;if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=IA(e[n]))!==``&&(t+=(t&&` `)+r);else for(let n in e)e[n]&&(t+=(t&&` `)+n);return t}var LA=t(de(),1),{useDebugValue:RA}=V.default,{useSyncExternalStoreWithSelector:zA}=LA.default,BA=e=>e;function VA(e,t=BA,n){let r=zA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return RA(r),r}var HA=(e,t)=>{let n=te(e),r=(e,r=t)=>VA(n,e,r);return Object.assign(r,n),r},UA=(e,t)=>e?HA(e,t):HA;function WA(e,t){if(Object.is(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var GA={value:()=>{}};function KA(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new qA(n)}function qA(e){this._=e}function JA(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}qA.prototype=KA.prototype={constructor:qA,on:function(e,t){var n=this._,r=JA(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=YA(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=XA(n[i],e.name,t);else if(t==null)for(i in n)n[i]=XA(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qA(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function YA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function XA(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=GA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ZA=KA,QA={svg:`http://www.w3.org/2000/svg`,xhtml:`http://www.w3.org/1999/xhtml`,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function $A(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),QA.hasOwnProperty(t)?{space:QA[t],local:e}:e}function ej(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===`http://www.w3.org/1999/xhtml`&&t.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?t.createElement(e):t.createElementNS(n,e)}}function tj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function nj(e){var t=$A(e);return(t.local?tj:ej)(t)}function rj(){}function ij(e){return e==null?rj:function(){return this.querySelector(e)}}function aj(e){typeof e!=`function`&&(e=ij(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new qM(r,this._parents)}function oj(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sj(){return[]}function cj(e){return e==null?sj:function(){return this.querySelectorAll(e)}}function lj(e){return function(){return oj(e.apply(this,arguments))}}function uj(e){e=typeof e==`function`?lj(e):cj(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new qM(r,i)}function dj(e){return function(){return this.matches(e)}}function fj(e){return function(t){return t.matches(e)}}var pj=Array.prototype.find;function mj(e){return function(){return pj.call(this.children,e)}}function hj(){return this.firstElementChild}function gj(e){return this.select(e==null?hj:mj(typeof e==`function`?e:fj(e)))}var _j=Array.prototype.filter;function vj(){return Array.from(this.children)}function yj(e){return function(){return _j.call(this.children,e)}}function bj(e){return this.selectAll(e==null?vj:yj(typeof e==`function`?e:fj(e)))}function xj(e){typeof e!=`function`&&(e=dj(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new qM(r,this._parents)}function Sj(e){return Array(e.length)}function Cj(){return new qM(this._enter||this._groups.map(Sj),this._parents)}function wj(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wj.prototype={constructor:wj,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tj(e){return function(){return e}}function Ej(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new wj(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function Dj(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new wj(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function Oj(e){return e.__data__}function kj(e,t){if(!arguments.length)return Array.from(this,Oj);var n=t?Dj:Ej,r=this._parents,i=this._groups;typeof e!=`function`&&(e=Tj(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=Aj(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m);n(u,d,h,g,c[l]=Array(f),p,t);for(var _=0,v=0,y,b;_<m;++_)if(y=h[_]){for(_>=v&&(v=_+1);!(b=g[v])&&++v<m;);y._next=b||null}}return o=new qM(o,r),o._enter=s,o._exit=c,o}function Aj(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function jj(){return new qM(this._exit||this._groups.map(Sj),this._parents)}function Mj(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Nj(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new qM(s,this._parents)}function Pj(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Fj(e){e||=Ij;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new qM(i,this._parents).order()}function Ij(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lj(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rj(){return Array.from(this)}function zj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Bj(){let e=0;for(let t of this)++e;return e}function Vj(){return!this.node()}function Hj(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Uj(e){return function(){this.removeAttribute(e)}}function Wj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gj(e,t){return function(){this.setAttribute(e,t)}}function Kj(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jj(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Yj(e,t){var n=$A(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Wj:Uj:typeof t==`function`?n.local?Jj:qj:n.local?Kj:Gj)(n,t))}function Xj(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zj(e){return function(){this.style.removeProperty(e)}}function Qj(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $j(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function eM(e,t,n){return arguments.length>1?this.each((t==null?Zj:typeof t==`function`?$j:Qj)(e,t,n??``)):tM(this.node(),e)}function tM(e,t){return e.style.getPropertyValue(t)||Xj(e).getComputedStyle(e,null).getPropertyValue(t)}function nM(e){return function(){delete this[e]}}function rM(e,t){return function(){this[e]=t}}function iM(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aM(e,t){return arguments.length>1?this.each((t==null?nM:typeof t==`function`?iM:rM)(e,t)):this.node()[e]}function oM(e){return e.trim().split(/^|\s+/)}function sM(e){return e.classList||new cM(e)}function cM(e){this._node=e,this._names=oM(e.getAttribute(`class`)||``)}cM.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function lM(e,t){for(var n=sM(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function uM(e,t){for(var n=sM(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function dM(e){return function(){lM(this,e)}}function fM(e){return function(){uM(this,e)}}function pM(e,t){return function(){(t.apply(this,arguments)?lM:uM)(this,e)}}function mM(e,t){var n=oM(e+``);if(arguments.length<2){for(var r=sM(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?pM:t?dM:fM)(n,t))}function hM(){this.textContent=``}function gM(e){return function(){this.textContent=e}}function _M(e){return function(){this.textContent=e.apply(this,arguments)??``}}function vM(e){return arguments.length?this.each(e==null?hM:(typeof e==`function`?_M:gM)(e)):this.node().textContent}function yM(){this.innerHTML=``}function bM(e){return function(){this.innerHTML=e}}function xM(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function SM(e){return arguments.length?this.each(e==null?yM:(typeof e==`function`?xM:bM)(e)):this.node().innerHTML}function CM(){this.nextSibling&&this.parentNode.appendChild(this)}function wM(){return this.each(CM)}function TM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function EM(){return this.each(TM)}function DM(e){var t=typeof e==`function`?e:nj(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function OM(){return null}function kM(e,t){var n=typeof e==`function`?e:nj(e),r=t==null?OM:typeof t==`function`?t:ij(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function AM(){var e=this.parentNode;e&&e.removeChild(this)}function jM(){return this.each(AM)}function MM(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NM(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PM(e){return this.select(e?NM:MM)}function FM(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function IM(e){return function(t){e.call(this,t,this.__data__)}}function LM(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function RM(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function zM(e,t,n){return function(){var r=this.__on,i,a=IM(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function BM(e,t,n){var r=LM(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?zM:RM,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function VM(e,t,n){var r=Xj(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function HM(e,t){return function(){return VM(this,e,t)}}function UM(e,t){return function(){return VM(this,e,t.apply(this,arguments))}}function WM(e,t){return this.each((typeof t==`function`?UM:HM)(e,t))}function*GM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var KM=[null];function qM(e,t){this._groups=e,this._parents=t}function JM(){return new qM([[document.documentElement]],KM)}function YM(){return this}qM.prototype=JM.prototype={constructor:qM,select:aj,selectAll:uj,selectChild:gj,selectChildren:bj,filter:xj,data:kj,enter:Cj,exit:jj,join:Mj,merge:Nj,selection:YM,order:Pj,sort:Fj,call:Lj,nodes:Rj,node:zj,size:Bj,empty:Vj,each:Hj,attr:Yj,style:eM,property:aM,classed:mM,text:vM,html:SM,raise:wM,lower:EM,append:DM,insert:kM,remove:jM,clone:PM,datum:FM,on:BM,dispatch:WM,[Symbol.iterator]:GM};var XM=JM;function ZM(e){return typeof e==`string`?new qM([[document.querySelector(e)]],[document.documentElement]):new qM([[e]],KM)}function QM(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $M(e,t){if(e=QM(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const eN={passive:!1},tN={capture:!0,passive:!1};function nN(e){e.stopImmediatePropagation()}function rN(e){e.preventDefault(),e.stopImmediatePropagation()}function iN(e){var t=e.document.documentElement,n=ZM(e).on(`dragstart.drag`,rN,tN);`onselectstart`in t?n.on(`selectstart.drag`,rN,tN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function aN(e,t){var n=e.document.documentElement,r=ZM(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,rN,tN),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var oN=e=>()=>e;function sN(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}sN.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cN(e){return!e.ctrlKey&&!e.button}function lN(){return this.parentNode}function uN(e,t){return t??{x:e.x,y:e.y}}function dN(){return navigator.maxTouchPoints||`ontouchstart`in this}function fN(){var e=cN,t=lN,n=uN,r=dN,i={},a=ZA(`start`,`drag`,`end`),o=0,s,c,l,u,d=0;function f(e){e.on(`mousedown.drag`,p).filter(r).on(`touchstart.drag`,g).on(`touchmove.drag`,_,eN).on(`touchend.drag touchcancel.drag`,v).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function p(n,r){if(!(u||!e.call(this,n,r))){var i=y(this,t.call(this,n,r),n,r,`mouse`);i&&(ZM(n.view).on(`mousemove.drag`,m,tN).on(`mouseup.drag`,h,tN),iN(n.view),nN(n),l=!1,s=n.clientX,c=n.clientY,i(`start`,n))}}function m(e){if(rN(e),!l){var t=e.clientX-s,n=e.clientY-c;l=t*t+n*n>d}i.mouse(`drag`,e)}function h(e){ZM(e.view).on(`mousemove.drag mouseup.drag`,null),aN(e.view,l),rN(e),i.mouse(`end`,e)}function g(n,r){if(e.call(this,n,r)){var i=n.changedTouches,a=t.call(this,n,r),o=i.length,s,c;for(s=0;s<o;++s)(c=y(this,a,n,r,i[s].identifier,i[s]))&&(nN(n),c(`start`,n,i[s]))}}function _(e){var t=e.changedTouches,n=t.length,r,a;for(r=0;r<n;++r)(a=i[t[r].identifier])&&(rN(e),a(`drag`,e,t[r]))}function v(e){var t=e.changedTouches,n=t.length,r,a;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),r=0;r<n;++r)(a=i[t[r].identifier])&&(nN(e),a(`end`,e,t[r]))}function y(e,t,r,s,c,l){var u=a.copy(),d=$M(l||r,t),p,m,h;if((h=n.call(e,new sN(`beforestart`,{sourceEvent:r,target:f,identifier:c,active:o,x:d[0],y:d[1],dx:0,dy:0,dispatch:u}),s))!=null)return p=h.x-d[0]||0,m=h.y-d[1]||0,function n(r,a,l){var g=d,_;switch(r){case`start`:i[c]=n,_=o++;break;case`end`:delete i[c],--o;case`drag`:d=$M(l||a,t),_=o;break}u.call(r,e,new sN(r,{sourceEvent:a,subject:h,target:f,identifier:c,active:_,x:d[0]+p,y:d[1]+m,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:u}),s)}}return f.filter=function(t){return arguments.length?(e=typeof t==`function`?t:oN(!!t),f):e},f.container=function(e){return arguments.length?(t=typeof e==`function`?e:oN(e),f):t},f.subject=function(e){return arguments.length?(n=typeof e==`function`?e:oN(e),f):n},f.touchable=function(e){return arguments.length?(r=typeof e==`function`?e:oN(!!e),f):r},f.on=function(){var e=a.on.apply(a,arguments);return e===a?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function pN(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hN(){}var gN=.7,_N=1/gN,vN=`\\s*([+-]?\\d+)\\s*`,yN=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,bN=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,xN=/^#([0-9a-f]{3,8})$/,SN=RegExp(`^rgb\\(${vN},${vN},${vN}\\)$`),CN=RegExp(`^rgb\\(${bN},${bN},${bN}\\)$`),wN=RegExp(`^rgba\\(${vN},${vN},${vN},${yN}\\)$`),TN=RegExp(`^rgba\\(${bN},${bN},${bN},${yN}\\)$`),EN=RegExp(`^hsl\\(${yN},${bN},${bN}\\)$`),DN=RegExp(`^hsla\\(${yN},${bN},${bN},${yN}\\)$`),ON={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pN(hN,NN,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kN,formatHex:kN,formatHex8:AN,formatHsl:jN,formatRgb:MN,toString:MN});function kN(){return this.rgb().formatHex()}function AN(){return this.rgb().formatHex8()}function jN(){return KN(this).formatHsl()}function MN(){return this.rgb().formatRgb()}function NN(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=xN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?PN(t):n===3?new RN(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?FN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?FN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SN.exec(e))?new RN(t[1],t[2],t[3],1):(t=CN.exec(e))?new RN(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wN.exec(e))?FN(t[1],t[2],t[3],t[4]):(t=TN.exec(e))?FN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EN.exec(e))?GN(t[1],t[2]/100,t[3]/100,1):(t=DN.exec(e))?GN(t[1],t[2]/100,t[3]/100,t[4]):ON.hasOwnProperty(e)?PN(ON[e]):e===`transparent`?new RN(NaN,NaN,NaN,0):null}function PN(e){return new RN(e>>16&255,e>>8&255,e&255,1)}function FN(e,t,n,r){return r<=0&&(e=t=n=NaN),new RN(e,t,n,r)}function IN(e){return e instanceof hN||(e=NN(e)),e?(e=e.rgb(),new RN(e.r,e.g,e.b,e.opacity)):new RN}function LN(e,t,n,r){return arguments.length===1?IN(e):new RN(e,t,n,r??1)}function RN(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pN(RN,LN,mN(hN,{brighter(e){return e=e==null?_N:_N**+e,new RN(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gN:gN**+e,new RN(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new RN(UN(this.r),UN(this.g),UN(this.b),HN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zN,formatHex:zN,formatHex8:BN,formatRgb:VN,toString:VN}));function zN(){return`#${WN(this.r)}${WN(this.g)}${WN(this.b)}`}function BN(){return`#${WN(this.r)}${WN(this.g)}${WN(this.b)}${WN((isNaN(this.opacity)?1:this.opacity)*255)}`}function VN(){let e=HN(this.opacity);return`${e===1?`rgb(`:`rgba(`}${UN(this.r)}, ${UN(this.g)}, ${UN(this.b)}${e===1?`)`:`, ${e})`}`}function HN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function UN(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function WN(e){return e=UN(e),(e<16?`0`:``)+e.toString(16)}function GN(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new JN(e,t,n,r)}function KN(e){if(e instanceof JN)return new JN(e.h,e.s,e.l,e.opacity);if(e instanceof hN||(e=NN(e)),!e)return new JN;if(e instanceof JN)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new JN(o,s,c,e.opacity)}function qN(e,t,n,r){return arguments.length===1?KN(e):new JN(e,t,n,r??1)}function JN(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pN(JN,qN,mN(hN,{brighter(e){return e=e==null?_N:_N**+e,new JN(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gN:gN**+e,new JN(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new RN(ZN(e>=240?e-240:e+120,i,r),ZN(e,i,r),ZN(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new JN(YN(this.h),XN(this.s),XN(this.l),HN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=HN(this.opacity);return`${e===1?`hsl(`:`hsla(`}${YN(this.h)}, ${XN(this.s)*100}%, ${XN(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function YN(e){return e=(e||0)%360,e<0?e+360:e}function XN(e){return Math.max(0,Math.min(1,e||0))}function ZN(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var QN=e=>()=>e;function $N(e,t){return function(n){return e+n*t}}function eP(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function tP(e,t){var n=t-e;return n?$N(e,n>180||n<-180?n-360*Math.round(n/360):n):QN(isNaN(e)?t:e)}function nP(e){return(e=+e)==1?rP:function(t,n){return n-t?eP(t,n,e):QN(isNaN(t)?n:t)}}function rP(e,t){var n=t-e;return n?$N(e,n):QN(isNaN(e)?t:e)}var iP=(function e(t){var n=nP(t);function r(e,t){var r=n((e=LN(e)).r,(t=LN(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=rP(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function aP(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var oP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sP=new RegExp(oP.source,`g`);function cP(e){return function(){return e}}function lP(e){return function(t){return e(t)+``}}function uP(e,t){var n=oP.lastIndex=sP.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=oP.exec(e))&&(i=sP.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:aP(r,i)})),n=sP.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?lP(c[0].x):cP(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}var dP=180/Math.PI,fP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pP(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*dP,skewX:Math.atan(c)*dP,scaleX:o,scaleY:s}}var mP;function hP(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?fP:pP(t.a,t.b,t.c,t.d,t.e,t.f)}function gP(e){return e==null||(mP||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),mP.setAttribute(`transform`,e),!(e=mP.transform.baseVal.consolidate()))?fP:(e=e.matrix,pP(e.a,e.b,e.c,e.d,e.e,e.f))}function _P(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:aP(e,i)},{i:c-2,x:aP(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:aP(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:aP(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:aP(e,n)},{i:s-2,x:aP(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var vP=_P(hP,`px, `,`px)`,`deg)`),yP=_P(gP,`, `,`)`,`)`),bP=1e-12;function xP(e){return((e=Math.exp(e))+1/e)/2}function SP(e){return((e=Math.exp(e))-1/e)/2}function CP(e){return((e=Math.exp(2*e))-1)/(e+1)}var wP=(function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<bP)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=xP(y),c=s/(n*g)*(i*CP(t*r+y)-SP(y));return[a+c*d,o+c*f,s*i/xP(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i})(Math.SQRT2,2,4),TP=0,EP=0,DP=0,OP=1e3,kP,AP,jP=0,MP=0,NP=0,PP=typeof performance==`object`&&performance.now?performance:Date,FP=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function IP(){return MP||=(FP(LP),PP.now()+NP)}function LP(){MP=0}function RP(){this._call=this._time=this._next=null}RP.prototype=zP.prototype={constructor:RP,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?IP():+n)+(t==null?0:+t),!this._next&&AP!==this&&(AP?AP._next=this:kP=this,AP=this),this._call=e,this._time=n,WP()},stop:function(){this._call&&(this._call=null,this._time=1/0,WP())}};function zP(e,t,n){var r=new RP;return r.restart(e,t,n),r}function BP(){IP(),++TP;for(var e=kP,t;e;)(t=MP-e._time)>=0&&e._call.call(void 0,t),e=e._next;--TP}function VP(){MP=(jP=PP.now())+NP,TP=EP=0;try{BP()}finally{TP=0,UP(),MP=0}}function HP(){var e=PP.now(),t=e-jP;t>OP&&(NP-=t,jP=e)}function UP(){for(var e,t=kP,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:kP=n);AP=e,WP(r)}function WP(e){TP||(EP&&=clearTimeout(EP),e-MP>24?(e<1/0&&(EP=setTimeout(VP,e-PP.now()-NP)),DP&&=clearInterval(DP)):(DP||=(jP=PP.now(),setInterval(HP,OP)),TP=1,FP(VP)))}function GP(e,t,n){var r=new RP;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var KP=ZA(`start`,`end`,`cancel`,`interrupt`),qP=[];function JP(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;QP(e,n,{name:t,index:r,group:i,on:KP,tween:qP,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function YP(e,t){var n=ZP(e,t);if(n.state>0)throw Error(`too late; already scheduled`);return n}function XP(e,t){var n=ZP(e,t);if(n.state>3)throw Error(`too late; already running`);return n}function ZP(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function QP(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=zP(a,0,n.time);function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==1)return c();for(l in r)if(f=r[l],f.name===n.name){if(f.state===3)return GP(o);f.state===4?(f.state=6,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(GP(function(){n.state===3&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===2){for(n.state=3,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===5&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function $P(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function eF(e){return this.each(function(){$P(this,e)})}function tF(e,t){var n,r;return function(){var i=XP(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nF(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=XP(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function rF(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=ZP(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?tF:nF)(n,e,t))}function iF(e,t,n){var r=e._id;return e.each(function(){var e=XP(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return ZP(e,r).value[t]}}function aF(e,t){var n;return(typeof t==`number`?aP:t instanceof NN?iP:(n=NN(t))?(t=n,iP):uP)(e,t)}function oF(e){return function(){this.removeAttribute(e)}}function sF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cF(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function lF(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function uF(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function dF(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function fF(e,t){var n=$A(e),r=n===`transform`?yP:aF;return this.attrTween(e,typeof t==`function`?(n.local?dF:uF)(n,r,iF(this,`attr.`+e,t)):t==null?(n.local?sF:oF)(n):(n.local?lF:cF)(n,r,t))}function pF(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mF(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hF(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&mF(e,i)),n}return i._value=t,i}function gF(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&pF(e,i)),n}return i._value=t,i}function _F(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=$A(e);return this.tween(n,(r.local?hF:gF)(r,t))}function vF(e,t){return function(){YP(this,e).delay=+t.apply(this,arguments)}}function yF(e,t){return t=+t,function(){YP(this,e).delay=t}}function bF(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?vF:yF)(t,e)):ZP(this.node(),t).delay}function xF(e,t){return function(){XP(this,e).duration=+t.apply(this,arguments)}}function SF(e,t){return t=+t,function(){XP(this,e).duration=t}}function CF(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?xF:SF)(t,e)):ZP(this.node(),t).duration}function wF(e,t){if(typeof t!=`function`)throw Error();return function(){XP(this,e).ease=t}}function TF(e){var t=this._id;return arguments.length?this.each(wF(t,e)):ZP(this.node(),t).ease}function EF(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();XP(this,e).ease=n}}function DF(e){if(typeof e!=`function`)throw Error();return this.each(EF(this._id,e))}function OF(e){typeof e!=`function`&&(e=dj(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new rI(r,this._parents,this._name,this._id)}function kF(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new rI(o,this._parents,this._name,this._id)}function AF(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function jF(e,t,n){var r,i,a=AF(t)?YP:XP;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function MF(e,t){var n=this._id;return arguments.length<2?ZP(this.node(),n).on.on(e):this.each(jF(n,e,t))}function NF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function PF(){return this.on(`end.remove`,NF(this._id))}function FF(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=ij(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,JP(l[f],t,n,f,l,ZP(u,n)));return new rI(a,this._parents,t,n)}function IF(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=cj(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=ZP(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&JP(p,t,n,h,f,m);a.push(f),o.push(u)}return new rI(a,o,t,n)}var LF=XM.prototype.constructor;function RF(){return new LF(this._groups,this._parents)}function zF(e,t){var n,r,i;return function(){var a=tM(this,e),o=(this.style.removeProperty(e),tM(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function BF(e){return function(){this.style.removeProperty(e)}}function VF(e,t,n){var r,i=n+``,a;return function(){var o=tM(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function HF(e,t,n){var r,i,a;return function(){var o=tM(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),tM(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function UF(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=XP(this,e),l=c.on,u=c.value[a]==null?s||=BF(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function WF(e,t,n){var r=(e+=``)==`transform`?vP:aF;return t==null?this.styleTween(e,zF(e,r)).on(`end.style.`+e,BF(e)):typeof t==`function`?this.styleTween(e,HF(e,r,iF(this,`style.`+e,t))).each(UF(this._id,e)):this.styleTween(e,VF(e,r,t),n).on(`end.style.`+e,null)}function GF(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function KF(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&GF(e,a,n)),r}return a._value=t,a}function qF(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,KF(e,t,n??``))}function JF(e){return function(){this.textContent=e}}function YF(e){return function(){this.textContent=e(this)??``}}function XF(e){return this.tween(`text`,typeof e==`function`?YF(iF(this,`text`,e)):JF(e==null?``:e+``))}function ZF(e){return function(t){this.textContent=e.call(this,t)}}function QF(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ZF(r)),t}return r._value=e,r}function $F(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,QF(e))}function eI(){for(var e=this._name,t=this._id,n=aI(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=ZP(c,t);JP(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new rI(r,this._parents,e,n)}function tI(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=XP(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var nI=0;function rI(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function iI(e){return XM().transition(e)}function aI(){return++nI}var oI=XM.prototype;rI.prototype=iI.prototype={constructor:rI,select:FF,selectAll:IF,selectChild:oI.selectChild,selectChildren:oI.selectChildren,filter:OF,merge:kF,selection:RF,transition:eI,call:oI.call,nodes:oI.nodes,node:oI.node,size:oI.size,empty:oI.empty,each:oI.each,on:MF,attr:fF,attrTween:_F,style:WF,styleTween:qF,text:XF,textTween:$F,remove:PF,tween:rF,delay:bF,duration:CF,ease:TF,easeVarying:DF,end:tI,[Symbol.iterator]:oI[Symbol.iterator]};function sI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cI={time:null,delay:0,duration:250,ease:sI};function lI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function uI(e){var t,n;e instanceof rI?(t=e._id,e=e._name):(t=aI(),(n=cI).time=IP(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&JP(c,e,t,l,o,n||lI(c,t));return new rI(r,this._parents,e,t)}XM.prototype.interrupt=eF,XM.prototype.transition=uI;var dI=e=>()=>e;function fI(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function pI(e,t,n){this.k=e,this.x=t,this.y=n}pI.prototype={constructor:pI,scale:function(e){return e===1?this:new pI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var mI=new pI(1,0,0);hI.prototype=pI.prototype;function hI(e){for(;!e.__zoom;)if(!(e=e.parentNode))return mI;return e.__zoom}function gI(e){e.stopImmediatePropagation()}function _I(e){e.preventDefault(),e.stopImmediatePropagation()}function vI(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function yI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function bI(){return this.__zoom||mI}function xI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function SI(){return navigator.maxTouchPoints||`ontouchstart`in this}function CI(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function wI(){var e=vI,t=yI,n=CI,r=xI,i=SI,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=wP,l=ZA(`start`,`zoom`,`end`),u,d,f,p=500,m=150,h=0,g=10;function _(e){e.property(`__zoom`,bI).on(`wheel.zoom`,w,{passive:!1}).on(`mousedown.zoom`,T).on(`dblclick.zoom`,E).filter(i).on(`touchstart.zoom`,D).on(`touchmove.zoom`,O).on(`touchend.zoom touchcancel.zoom`,k).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}_.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,bI),e===i?i.interrupt().each(function(){S(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):x(e,t,n,r)},_.scaleBy=function(e,t,n,r){_.scaleTo(e,function(){return this.__zoom.k*(typeof t==`function`?t.apply(this,arguments):t)},n,r)},_.scaleTo=function(e,r,i,a){_.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?b(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(y(v(a,l),s,c),e,o)},i,a)},_.translateBy=function(e,r,i,a){_.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},_.translateTo=function(e,r,i,a,s){_.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?b(e):typeof a==`function`?a.apply(this,arguments):a;return n(mI.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function v(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new pI(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new pI(e.k,r,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,n,r,i){e.on(`start.zoom`,function(){S(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){S(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=S(e,a).event(i),s=t.apply(e,a),l=r==null?b(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new pI(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function S(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=ZM(this.that).datum();l.call(e,this.that,new fI(e,{sourceEvent:this.sourceEvent,target:_,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function w(t,...i){if(!e.apply(this,arguments))return;var s=S(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=$M(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],$P(this),s.start();_I(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(y(v(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function T(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=S(this,r,!0).event(t),s=ZM(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=$M(t,i),l=t.clientX,u=t.clientY;iN(t.view),gI(t),a.mouse=[c,this.__zoom.invert(c)],$P(this),a.start();function d(e){if(_I(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>h}a.event(e).zoom(`mouse`,n(y(a.that.__zoom,a.mouse[0]=$M(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),aN(e.view,a.moved),_I(e),a.event(e).end()}}function E(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=$M(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(y(v(a,u),c,l),t.apply(this,i),o);_I(r),s>0?ZM(this).transition().duration(s).call(x,d,c,r):ZM(this).call(_.transform,d,c,r)}}function D(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=S(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(gI(t),s=0;s<i;++s)c=r[s],l=$M(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),$P(this),a.start())}}function O(e,...t){if(this.__zooming){var r=S(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(_I(e),s=0;s<a;++s)c=i[s],l=$M(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=v(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(y(c,l,u),r.extent,o))}}function k(e,...t){if(this.__zooming){var n=S(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(gI(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=$M(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<g)){var s=ZM(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return _.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:dI(+e),_):r},_.filter=function(t){return arguments.length?(e=typeof t==`function`?t:dI(!!t),_):e},_.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:dI(!!e),_):i},_.extent=function(e){return arguments.length?(t=typeof e==`function`?e:dI([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),_):t},_.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],_):[a[0],a[1]]},_.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(e){return arguments.length?(n=e,_):n},_.duration=function(e){return arguments.length?(s=+e,_):s},_.interpolate=function(e){return arguments.length?(c=e,_):c},_.on=function(){var e=l.on.apply(l,arguments);return e===l?_:e},_.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,_):Math.sqrt(h)},_.tapDistance=function(e){return arguments.length?(g=+e,_):g},_}k();var TI=(0,V.createContext)(null),EI=TI.Provider,DI={error001:()=>`[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001`,error002:()=>`It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.`,error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>`The React Flow parent container needs a width and a height to render the graph.`,error005:()=>`Only child nodes can use a parent extent.`,error006:()=>`Can't create edge. An edge needs a source and a target.`,error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?`target`:`source`} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>`Handle: No node id found. Make sure to only use a Handle inside a custom Node.`,error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},OI=DI.error001();function kI(e,t){let n=(0,V.useContext)(TI);if(n===null)throw Error(OI);return VA(n,e,t)}var AI=()=>{let e=(0,V.useContext)(TI);if(e===null)throw Error(OI);return(0,V.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},jI=e=>e.userSelectionActive?`none`:`all`;function MI({position:e,children:t,className:n,style:r,...i}){let a=kI(jI),o=`${e}`.split(`-`);return V.createElement(`div`,{className:IA([`react-flow__panel`,n,...o]),style:{...r,pointerEvents:a},...i},t)}function NI({proOptions:e,position:t=`bottom-right`}){return e?.hideAttribution?null:V.createElement(MI,{position:t,className:`react-flow__attribution`,"data-message":`Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro`},V.createElement(`a`,{href:`https://reactflow.dev`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`React Flow attribution`},`React Flow`))}var PI=(0,V.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{let d=(0,V.useRef)(null),[f,p]=(0,V.useState)({x:0,y:0,width:0,height:0}),m=IA([`react-flow__edge-textwrapper`,l]);return(0,V.useEffect)(()=>{if(d.current){let e=d.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n===void 0||!n?null:V.createElement(`g`,{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:m,visibility:f.width?`visible`:`hidden`,...u},i&&V.createElement(`rect`,{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:`react-flow__edge-textbg`,style:a,rx:s,ry:s}),V.createElement(`text`,{className:`react-flow__edge-text`,y:f.height/2,dy:`0.3em`,ref:d,style:r},n),c)}),FI=e=>({width:e.offsetWidth,height:e.offsetHeight}),II=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),LI=(e={x:0,y:0},t)=>({x:II(e.x,t[0][0],t[1][0]),y:II(e.y,t[0][1],t[1][1])}),RI=(e,t,n)=>e<t?II(Math.abs(e-t),1,50)/50:e>n?-II(Math.abs(e-n),1,50)/50:0,zI=(e,t)=>[RI(e.x,35,t.width-35)*20,RI(e.y,35,t.height-35)*20],BI=e=>e.getRootNode?.()||window?.document,VI=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),HI=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),UI=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),WI=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),GI=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},KI=e=>qI(e.width)&&qI(e.height)&&qI(e.x)&&qI(e.y),qI=e=>!isNaN(e)&&isFinite(e),JI=Symbol.for(`internals`),YI=[`Enter`,` `,`Escape`],XI=(e,t)=>{},ZI=e=>`nativeEvent`in e;function QI(e){let t=(ZI(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return[`INPUT`,`SELECT`,`TEXTAREA`].includes(t?.nodeName)||t?.hasAttribute(`contenteditable`)||!!t?.closest(`.nokey`)}var $I=e=>`clientX`in e,eL=(e,t)=>{let n=$I(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},tL=()=>typeof navigator<`u`&&navigator?.userAgent?.indexOf(`Mac`)>=0,nL=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p=20})=>V.createElement(V.Fragment,null,V.createElement(`path`,{id:e,style:u,d:t,fill:`none`,className:`react-flow__edge-path`,markerEnd:d,markerStart:f}),p&&V.createElement(`path`,{d:t,fill:`none`,strokeOpacity:0,strokeWidth:p,className:`react-flow__edge-interaction`}),i&&qI(n)&&qI(r)?V.createElement(PI,{x:n,y:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null);nL.displayName=`BaseEdge`;function rL(e,t,n){return n===void 0?n:r=>{let i=t().edges.find(t=>t.id===e);i&&n(r,{...i})}}function iL({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=n<e?n+i:n-i,o=Math.abs(r-t)/2;return[a,r<t?r+o:r-o,i,o]}function aL({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let c=e*.125+i*.375+o*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125;return[c,l,Math.abs(c-e),Math.abs(l-t)]}var oL;(function(e){e.Strict=`strict`,e.Loose=`loose`})(oL||={});var sL;(function(e){e.Free=`free`,e.Vertical=`vertical`,e.Horizontal=`horizontal`})(sL||={});var cL;(function(e){e.Partial=`partial`,e.Full=`full`})(cL||={});var lL;(function(e){e.Bezier=`default`,e.Straight=`straight`,e.Step=`step`,e.SmoothStep=`smoothstep`,e.SimpleBezier=`simplebezier`})(lL||={});var uL;(function(e){e.Arrow=`arrow`,e.ArrowClosed=`arrowclosed`})(uL||={});var Z;(function(e){e.Left=`left`,e.Top=`top`,e.Right=`right`,e.Bottom=`bottom`})(Z||={});function dL({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Z.Left||e===Z.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function fL({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top}){let[o,s]=dL({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=dL({pos:a,x1:r,y1:i,x2:e,y2:t}),[u,d,f,p]=aL({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${s} ${c},${l} ${r},${i}`,u,d,f,p]}var pL=(0,V.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:a=Z.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})=>{let[g,_,v]=fL({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a});return V.createElement(nL,{path:g,labelX:_,labelY:v,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})});pL.displayName=`SimpleBezierEdge`;var mL={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},hL=({source:e,sourcePosition:t=Z.Bottom,target:n})=>t===Z.Left||t===Z.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gL=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function _L({source:e,sourcePosition:t=Z.Bottom,target:n,targetPosition:r=Z.Top,center:i,offset:a}){let o=mL[t],s=mL[r],c={x:e.x+o.x*a,y:e.y+o.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=hL({source:c,sourcePosition:t,target:l}),d=u.x===0?`y`:`x`,f=u[d],p=[],m,h,g={x:0,y:0},_={x:0,y:0},[v,y,b,x]=iL({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){m=i.x??v,h=i.y??y;let e=[{x:m,y:c.y},{x:m,y:l.y}],t=[{x:c.x,y:h},{x:l.x,y:h}];p=o[d]===f?d===`x`?e:t:d===`x`?t:e}else{let i=[{x:c.x,y:l.y}],u=[{x:l.x,y:c.y}];if(p=d===`x`?o.x===f?u:i:o.y===f?i:u,t===r){let t=Math.abs(e[d]-n[d]);if(t<=a){let r=Math.min(a-1,a-t);o[d]===f?g[d]=(c[d]>e[d]?-1:1)*r:_[d]=(l[d]>n[d]?-1:1)*r}}if(t!==r){let e=d===`x`?`y`:`x`,t=o[d]===s[e],n=c[e]>l[e],r=c[e]<l[e];(o[d]===1&&(!t&&n||t&&r)||o[d]!==1&&(!t&&r||t&&n))&&(p=d===`x`?i:u)}let v={x:c.x+g.x,y:c.y+g.y},y={x:l.x+_.x,y:l.y+_.y};Math.max(Math.abs(v.x-p[0].x),Math.abs(y.x-p[0].x))>=Math.max(Math.abs(v.y-p[0].y),Math.abs(y.y-p[0].y))?(m=(v.x+y.x)/2,h=p[0].y):(m=p[0].x,h=(v.y+y.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...p,{x:l.x+_.x,y:l.y+_.y},n],m,h,b,x]}function vL(e,t,n,r){let i=Math.min(gL(e,t)/2,gL(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1;return`L ${a},${o+i*(e.y<n.y?-1:1)}Q ${a},${o} ${a+i*s},${o}`}function yL({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,borderRadius:o=5,centerX:s,centerY:c,offset:l=20}){let[u,d,f,p,m]=_L({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((e,t,n)=>{let r=``;return r=n>0&&n<u.length-1?vL(u[n-1],t,u[n+1],o):`${n===0?`M`:`L`}${t.x} ${t.y}`,e+=r,e},``),d,f,p,m]}var bL=(0,V.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:d=Z.Bottom,targetPosition:f=Z.Top,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=yL({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:h?.borderRadius,offset:h?.offset});return V.createElement(nL,{path:_,labelX:v,labelY:y,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:m,interactionWidth:g})});bL.displayName=`SmoothStepEdge`;var xL=(0,V.memo)(e=>V.createElement(bL,{...e,pathOptions:(0,V.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));xL.displayName=`StepEdge`;function SL({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,a,o,s]=iL({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,o,s]}var CL=(0,V.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})=>{let[m,h,g]=SL({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(nL,{path:m,labelX:h,labelY:g,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})});CL.displayName=`StraightEdge`;function wL(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function TL({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Z.Left:return[t-wL(t-r,a),n];case Z.Right:return[t+wL(r-t,a),n];case Z.Top:return[t,n-wL(n-i,a)];case Z.Bottom:return[t,n+wL(i-n,a)]}}function EL({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:a=Z.Top,curvature:o=.25}){let[s,c]=TL({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=TL({pos:a,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,p,m]=aL({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,p,m]}var DL=(0,V.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:a=Z.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=EL({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a,curvature:h?.curvature});return V.createElement(nL,{path:_,labelX:v,labelY:y,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g})});DL.displayName=`BezierEdge`;var OL=(0,V.createContext)(null),kL=OL.Provider;OL.Consumer;var AL=()=>(0,V.useContext)(OL),jL=e=>`id`in e&&`source`in e&&`target`in e,ML=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||``}-${n}${r||``}`,NL=(e,t)=>e===void 0?``:typeof e==`string`?e:`${t?`${t}__`:``}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join(`&`)}`,PL=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),FL=(e,t)=>{if(!e.source||!e.target)return DI.error006(),t;let n;return n=jL(e)?{...e}:{...e,id:ML(e)},PL(n,t)?t:t.concat(n)},IL=({x:e,y:t},[n,r,i],a,[o,s])=>{let c={x:(e-n)/i,y:(t-r)/i};return a?{x:o*Math.round(c.x/o),y:s*Math.round(c.y/s)}:c},LL=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),RL=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},zL=(e,t=[0,0])=>e.length===0?{x:0,y:0,width:0,height:0}:UI(e.reduce((e,n)=>{let{x:r,y:i}=RL(n,t).positionAbsolute;return VI(e,HI({x:r,y:i,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),BL=(e,t,[n,r,i]=[0,0,1],a=!1,o=!1,s=[0,0])=>{let c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:i=!1}=e;if(o&&!r||i)return!1;let{positionAbsolute:u}=RL(e,s),d=GI(c,{x:u.x,y:u.y,width:t||0,height:n||0}),f=t===void 0||n===void 0||t===null||n===null,p=a&&d>0,m=(t||0)*(n||0);(f||p||d>=m||e.dragging)&&l.push(e)}),l},VL=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},HL=(e,t,n,r,i,a=.1)=>{let o=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=II(Math.min(o,s),r,i),l=e.x+e.width/2,u=e.y+e.height/2;return{x:t/2-l*c,y:n/2-u*c,zoom:c}},UL=(e,t=0)=>e.transition().duration(t);function WL(e,t,n,r){return(t[n]||[]).reduce((t,i)=>(`${e.id}-${i.id}-${n}`!==r&&t.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),t),[])}function GL(e,t,n,r,i,a){let{x:o,y:s}=eL(e),c=t.elementsFromPoint(o,s).find(e=>e.classList.contains(`react-flow__handle`));if(c){let e=c.getAttribute(`data-nodeid`);if(e){let t=XL(void 0,c),r=c.getAttribute(`data-handleid`),o=a({nodeId:e,id:r,type:t});if(o){let a=i.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:o}}}}let l=[],u=1/0;if(i.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=a(e);t<=u&&(t<u?l=[{handle:e,validHandleResult:n}]:t===u&&l.push({handle:e,validHandleResult:n}),u=t)}}),!l.length)return{handle:null,validHandleResult:qL()};if(l.length===1)return l[0];let d=l.some(({validHandleResult:e})=>e.isValid),f=l.some(({handle:e})=>e.type===`target`);return l.find(({handle:e,validHandleResult:t})=>f?e.type===`target`:d?t.isValid:!0)||l[0]}var KL={source:null,target:null,sourceHandle:null,targetHandle:null},qL=()=>({handleDomNode:null,isValid:!1,connection:KL,endHandle:null});function JL(e,t,n,r,i,a,o){let s=i===`target`,c=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...qL(),handleDomNode:c};if(c){let e=XL(void 0,c),i=c.getAttribute(`data-nodeid`),o=c.getAttribute(`data-handleid`),u=c.classList.contains(`connectable`),d=c.classList.contains(`connectableend`),f={source:s?i:n,sourceHandle:s?o:r,target:s?n:i,targetHandle:s?r:o};l.connection=f,u&&d&&(t===oL.Strict?s&&e===`source`||!s&&e===`target`:i!==n||o!==r)&&(l.endHandle={nodeId:i,handleId:o,type:e},l.isValid=a(f))}return l}function YL({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,i)=>{if(i[JI]){let{handleBounds:a}=i[JI],o=[],s=[];a&&(o=WL(i,a,`source`,`${t}-${n}-${r}`),s=WL(i,a,`target`,`${t}-${n}-${r}`)),e.push(...o,...s)}return e},[])}function XL(e,t){return e||(t?.classList.contains(`target`)?`target`:t?.classList.contains(`source`)?`source`:null)}function ZL(e){e?.classList.remove(`valid`,`connecting`,`react-flow__handle-valid`,`react-flow__handle-connecting`)}function QL(e,t){let n=null;return t?n=`valid`:e&&!t&&(n=`invalid`),n}function $L({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:a,setState:o,isValidConnection:s,edgeUpdaterType:c,onReconnectEnd:l}){let u=BI(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:p,connectionRadius:m,onConnectStart:h,panBy:g,getNodes:_,cancelConnection:v}=a(),y=0,b,{x,y:S}=eL(e),C=u?.elementFromPoint(x,S),w=XL(c,C),T=f?.getBoundingClientRect();if(!T||!w)return;let E,D=eL(e,T),O=!1,k=null,A=!1,j=null,M=YL({nodes:_(),nodeId:n,handleId:t,handleType:w}),N=()=>{if(!p)return;let[e,t]=zI(D,T);g({x:e,y:t}),y=requestAnimationFrame(N)};o({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:w,connectionStartHandle:{nodeId:n,handleId:t,type:w},connectionEndHandle:null}),h?.(e,{nodeId:n,handleId:t,handleType:w});function P(e){let{transform:r}=a();D=eL(e,T);let{handle:c,validHandleResult:l}=GL(e,u,IL(D,r,!1,[1,1]),m,M,e=>JL(e,d,n,t,i?`target`:`source`,s,u));if(b=c,O||=(N(),!0),j=l.handleDomNode,k=l.connection,A=l.isValid,o({connectionPosition:b&&A?LL({x:b.x,y:b.y},r):D,connectionStatus:QL(!!b,A),connectionEndHandle:l.endHandle}),!b&&!A&&!j)return ZL(E);k.source!==k.target&&j&&(ZL(E),E=j,j.classList.add(`connecting`,`react-flow__handle-connecting`),j.classList.toggle(`valid`,A),j.classList.toggle(`react-flow__handle-valid`,A))}function ee(e){(b||j)&&k&&A&&r?.(k),a().onConnectEnd?.(e),c&&l?.(e),ZL(E),v(),cancelAnimationFrame(y),O=!1,A=!1,k=null,j=null,u.removeEventListener(`mousemove`,P),u.removeEventListener(`mouseup`,ee),u.removeEventListener(`touchmove`,P),u.removeEventListener(`touchend`,ee)}u.addEventListener(`mousemove`,P),u.addEventListener(`mouseup`,ee),u.addEventListener(`touchmove`,P),u.addEventListener(`touchend`,ee)}var eR=()=>!0,tR=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),nR=(e,t,n)=>r=>{let{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:o}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n}},rR=(0,V.forwardRef)(({type:e=`source`,position:t=Z.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:o,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p)=>{let m=o||null,h=e===`target`,g=AI(),_=AL(),{connectOnClick:v,noPanClassName:y}=kI(tR,WA),{connecting:b,clickConnecting:x}=kI(nR(_,m,e),WA);_||g.getState().onError?.(`010`,DI.error010());let S=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),i={...t,...e};if(r){let{edges:e,setEdges:t}=g.getState();t(FL(i,e))}n?.(i),s?.(i)},C=e=>{if(!_)return;let t=$I(e);i&&(t&&e.button===0||!t)&&$L({event:e,handleId:m,nodeId:_,onConnect:S,isTarget:h,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||eR}),t?u?.(e):d?.(e)},w=t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:o,connectionMode:s,isValidConnection:c}=g.getState();if(!_||!o&&!i)return;if(!o){r?.(t,{nodeId:_,handleId:m,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:m}});return}let l=BI(t.target),u=n||c||eR,{connection:d,isValid:f}=JL({nodeId:_,id:m,type:e},s,o.nodeId,o.handleId||null,o.type,u,l);f&&S(d),a?.(t),g.setState({connectionClickStartHandle:null})};return V.createElement(`div`,{"data-handleid":m,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${m}-${e}`,className:IA([`react-flow__handle`,`react-flow__handle-${t}`,`nodrag`,y,l,{source:!h,target:h,connectable:r,connectablestart:i,connectableend:a,connecting:x,connectionindicator:r&&(i&&!b||a&&b)}]),onMouseDown:C,onTouchStart:C,onClick:v?w:void 0,ref:p,...f},c)});rR.displayName=`Handle`;var iR=(0,V.memo)(rR),aR=({data:e,isConnectable:t,targetPosition:n=Z.Top,sourcePosition:r=Z.Bottom})=>V.createElement(V.Fragment,null,V.createElement(iR,{type:`target`,position:n,isConnectable:t}),e?.label,V.createElement(iR,{type:`source`,position:r,isConnectable:t}));aR.displayName=`DefaultNode`;var oR=(0,V.memo)(aR),sR=({data:e,isConnectable:t,sourcePosition:n=Z.Bottom})=>V.createElement(V.Fragment,null,e?.label,V.createElement(iR,{type:`source`,position:n,isConnectable:t}));sR.displayName=`InputNode`;var cR=(0,V.memo)(sR),lR=({data:e,isConnectable:t,targetPosition:n=Z.Top})=>V.createElement(V.Fragment,null,V.createElement(iR,{type:`target`,position:n,isConnectable:t}),e?.label);lR.displayName=`OutputNode`;var uR=(0,V.memo)(lR),dR=()=>null;dR.displayName=`GroupNode`;var fR=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),pR=e=>e.id;function mR(e,t){return WA(e.selectedNodes.map(pR),t.selectedNodes.map(pR))&&WA(e.selectedEdges.map(pR),t.selectedEdges.map(pR))}var hR=(0,V.memo)(({onSelectionChange:e})=>{let t=AI(),{selectedNodes:n,selectedEdges:r}=kI(fR,mR);return(0,V.useEffect)(()=>{let i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(e=>e(i))},[n,r,e]),null});hR.displayName=`SelectionListener`;var gR=e=>!!e.onSelectionChange;function _R({onSelectionChange:e}){let t=kI(gR);return e||t?V.createElement(hR,{onSelectionChange:e}):null}var vR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function yR(e,t){(0,V.useEffect)(()=>{e!==void 0&&t(e)},[e])}function bR(e,t,n){(0,V.useEffect)(()=>{t!==void 0&&n({[e]:t})},[t])}var xR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:a,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:m,minZoom:h,maxZoom:g,nodeExtent:_,onNodesChange:v,onEdgesChange:y,elementsSelectable:b,connectionMode:x,snapGrid:S,snapToGrid:C,translateExtent:w,connectOnClick:T,defaultEdgeOptions:E,fitView:D,fitViewOptions:O,onNodesDelete:k,onEdgesDelete:A,onNodeDrag:j,onNodeDragStart:M,onNodeDragStop:N,onSelectionDrag:P,onSelectionDragStart:ee,onSelectionDragStop:te,noPanClassName:F,nodeOrigin:I,rfId:ne,autoPanOnConnect:re,autoPanOnNodeDrag:ie,onError:ae,connectionRadius:oe,isValidConnection:se,nodeDragThreshold:ce})=>{let{setNodes:le,setEdges:ue,setDefaultNodesAndEdges:de,setMinZoom:fe,setMaxZoom:pe,setTranslateExtent:me,setNodeExtent:he,reset:ge}=kI(vR,WA),L=AI();return(0,V.useEffect)(()=>{let e=r?.map(e=>({...e,...E}));return de(n,e),()=>{ge()}},[]),bR(`defaultEdgeOptions`,E,L.setState),bR(`connectionMode`,x,L.setState),bR(`onConnect`,i,L.setState),bR(`onConnectStart`,a,L.setState),bR(`onConnectEnd`,o,L.setState),bR(`onClickConnectStart`,s,L.setState),bR(`onClickConnectEnd`,c,L.setState),bR(`nodesDraggable`,l,L.setState),bR(`nodesConnectable`,u,L.setState),bR(`nodesFocusable`,d,L.setState),bR(`edgesFocusable`,f,L.setState),bR(`edgesUpdatable`,p,L.setState),bR(`elementsSelectable`,b,L.setState),bR(`elevateNodesOnSelect`,m,L.setState),bR(`snapToGrid`,C,L.setState),bR(`snapGrid`,S,L.setState),bR(`onNodesChange`,v,L.setState),bR(`onEdgesChange`,y,L.setState),bR(`connectOnClick`,T,L.setState),bR(`fitViewOnInit`,D,L.setState),bR(`fitViewOnInitOptions`,O,L.setState),bR(`onNodesDelete`,k,L.setState),bR(`onEdgesDelete`,A,L.setState),bR(`onNodeDrag`,j,L.setState),bR(`onNodeDragStart`,M,L.setState),bR(`onNodeDragStop`,N,L.setState),bR(`onSelectionDrag`,P,L.setState),bR(`onSelectionDragStart`,ee,L.setState),bR(`onSelectionDragStop`,te,L.setState),bR(`noPanClassName`,F,L.setState),bR(`nodeOrigin`,I,L.setState),bR(`rfId`,ne,L.setState),bR(`autoPanOnConnect`,re,L.setState),bR(`autoPanOnNodeDrag`,ie,L.setState),bR(`onError`,ae,L.setState),bR(`connectionRadius`,oe,L.setState),bR(`isValidConnection`,se,L.setState),bR(`nodeDragThreshold`,ce,L.setState),yR(e,le),yR(t,ue),yR(h,fe),yR(g,pe),yR(w,me),yR(_,he),null},SR={display:`none`},CR={position:`absolute`,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,clipPath:`inset(100%)`},wR=`react-flow__node-desc`,TR=`react-flow__edge-desc`,ER=`react-flow__aria-live`,DR=e=>e.ariaLiveMessage;function OR({rfId:e}){let t=kI(DR);return V.createElement(`div`,{id:`${ER}-${e}`,"aria-live":`assertive`,"aria-atomic":`true`,style:CR},t)}function kR({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement(`div`,{id:`${wR}-${e}`,style:SR},`Press enter or space to select a node.`,!t&&`You can then use the arrow keys to move the node around.`,` Press delete to remove it and escape to cancel.`,` `),V.createElement(`div`,{id:`${TR}-${e}`,style:SR},`Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.`),!t&&V.createElement(OR,{rfId:e}))}var AR=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,V.useState)(!1),i=(0,V.useRef)(!1),a=(0,V.useRef)(new Set([])),[o,s]=(0,V.useMemo)(()=>{if(e!==null){let t=(Array.isArray(e)?e:[e]).filter(e=>typeof e==`string`).map(e=>e.split(`+`));return[t,t.reduce((e,t)=>e.concat(...t),[])]}return[[],[]]},[e]);return(0,V.useEffect)(()=>{let n=typeof document<`u`?document:null,c=t?.target||n;if(e!==null){let e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&QI(e))return!1;let n=MR(e.code,s);a.current.add(e[n]),jR(o,a.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&QI(e))return!1;let n=MR(e.code,s);jR(o,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),e.key===`Meta`&&a.current.clear(),i.current=!1},l=()=>{a.current.clear(),r(!1)};return c?.addEventListener(`keydown`,e),c?.addEventListener(`keyup`,n),window.addEventListener(`blur`,l),()=>{c?.removeEventListener(`keydown`,e),c?.removeEventListener(`keyup`,n),window.removeEventListener(`blur`,l)}}},[e,r]),n};function jR(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function MR(e,t){return t.includes(e)?`code`:`key`}function NR(e,t,n,r){let i=e.parentNode||e.parentId;if(!i)return n;let a=t.get(i),o=RL(a,r);return NR(a,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(a[JI]?.z??0)>(n.z??0)?a[JI]?.z??0:n.z??0},r)}function PR(e,t,n){e.forEach(r=>{let i=r.parentNode||r.parentId;if(i&&!e.has(i))throw Error(`Parent node ${i} not found`);if(i||n?.[r.id]){let{x:i,y:a,z:o}=NR(r,e,{...r.position,z:r[JI]?.z??0},t);r.positionAbsolute={x:i,y:a},r[JI].z=o,n?.[r.id]&&(r[JI].isParent=!0)}})}function FR(e,t,n,r){let i=new Map,a={},o=r?1e3:0;return e.forEach(e=>{let n=(qI(e.zIndex)?e.zIndex:0)+(e.selected?o:0),r=t.get(e.id),s={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(a[c]=!0);let l=r?.type&&r?.type!==e.type;Object.defineProperty(s,JI,{enumerable:!1,value:{handleBounds:l?void 0:r?.[JI]?.handleBounds,z:n}}),i.set(e.id,s)}),PR(i,n,a),i}function IR(e,t={}){let{getNodes:n,width:r,height:i,minZoom:a,maxZoom:o,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!l&&u;if(s&&c&&(f||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),l=e.every(e=>e.width&&e.height);if(e.length>0&&l){let{x:n,y:l,zoom:u}=HL(zL(e,d),r,i,t.minZoom??a,t.maxZoom??o,t.padding??.1),f=mI.translate(n,l).scale(u);return typeof t.duration==`number`&&t.duration>0?s.transform(UL(c,t.duration),f):s.transform(c,f),!0}}return!1}function LR(e,t){return e.forEach(e=>{let n=t.get(e.id);n&&t.set(n.id,{...n,[JI]:n[JI],selected:e.selected})}),new Map(t)}function RR(e,t){return t.map(t=>{let n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function zR({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:i,edges:a,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e?.length&&(c&&r({nodeInternals:LR(e,i)}),o?.(e)),t?.length&&(l&&r({edges:RR(t,a)}),s?.(t))}var BR=()=>{},VR={zoomIn:BR,zoomOut:BR,zoomTo:BR,getZoom:()=>1,setViewport:BR,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:BR,fitBounds:BR,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},HR=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),UR=()=>{let e=AI(),{d3Zoom:t,d3Selection:n}=kI(HR,WA);return(0,V.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(UL(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(UL(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(UL(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{let[a,o,s]=e.getState().transform,c=mI.translate(r.x??a,r.y??o).scale(r.zoom??s);t.transform(UL(n,i?.duration),c)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>IR(e.getState,t),setCenter:(r,i,a)=>{let{width:o,height:s,maxZoom:c}=e.getState(),l=a?.zoom===void 0?c:a.zoom,u=o/2-r*l,d=s/2-i*l,f=mI.translate(u,d).scale(l);t.transform(UL(n,a?.duration),f)},fitBounds:(r,i)=>{let{width:a,height:o,minZoom:s,maxZoom:c}=e.getState(),{x:l,y:u,zoom:d}=HL(r,a,o,s,c,i?.padding??.1),f=mI.translate(l,u).scale(d);t.transform(UL(n,i?.duration),f)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:i}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),IL(t,n,r,i)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:i,domNode:a}=e.getState();if(!a)return t;let{x:o,y:s}=a.getBoundingClientRect();return IL({x:t.x-o,y:t.y-s},n,r,i)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:i,y:a}=r.getBoundingClientRect(),o=LL(t,n);return{x:o.x+i,y:o.y+a}},viewportInitialized:!0}:VR,[t,n])};function WR(){let e=UR(),t=AI(),n=(0,V.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,V.useCallback)(e=>t.getState().nodeInternals.get(e),[]),i=(0,V.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),a=(0,V.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),o=(0,V.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:i,onNodesChange:a}=t.getState(),o=n(),s=typeof e==`function`?e(o):e;i?r(s):a&&a(s.length===0?o.map(e=>({type:`remove`,id:e.id})):s.map(e=>({item:e,type:`reset`})))},[]),s=(0,V.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:a}=t.getState(),o=typeof e==`function`?e(n):e;i?r(o):a&&a(o.length===0?n.map(e=>({type:`remove`,id:e.id})):o.map(e=>({item:e,type:`reset`})))},[]),c=(0,V.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:i,hasDefaultNodes:a,onNodesChange:o}=t.getState();a?i([...r(),...n]):o&&o(n.map(e=>({item:e,type:`add`})))},[]),l=(0,V.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:i,hasDefaultEdges:a,onEdgesChange:o}=t.getState();a?i([...r,...n]):o&&o(n.map(e=>({item:e,type:`add`})))},[]),u=(0,V.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[i,a,o]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:a,zoom:o}}},[]),d=(0,V.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:i,edges:a,hasDefaultNodes:o,hasDefaultEdges:s,onNodesDelete:c,onEdgesDelete:l,onNodesChange:u,onEdgesChange:d}=t.getState(),f=(e||[]).map(e=>e.id),p=(n||[]).map(e=>e.id),m=i().reduce((e,t)=>{let n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return(typeof t.deletable!=`boolean`||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),h=a.filter(e=>typeof e.deletable==`boolean`?e.deletable:!0),g=h.filter(e=>p.includes(e.id));if(m||g){let e=VL(m,h),n=[...g,...e],i=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(s||o)&&(s&&t.setState({edges:a.filter(e=>!i.includes(e.id))}),o&&(m.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),i.length>0&&(l?.(n),d&&d(i.map(e=>({id:e,type:`remove`})))),m.length>0&&(c?.(m),u&&u(m.map(e=>({id:e.id,type:`remove`}))))}},[]),f=(0,V.useCallback)(e=>{let n=KI(e),r=n?null:t.getState().nodeInternals.get(e.id);return!n&&!r?[null,null,n]:[n?e:WI(r),r,n]},[]),p=(0,V.useCallback)((e,n=!0,r)=>{let[i,a,o]=f(e);return i?(r||t.getState().getNodes()).filter(e=>{if(!o&&(e.id===a.id||!e.positionAbsolute))return!1;let t=GI(WI(e),i);return n&&t>0||t>=i.width*i.height}):[]},[]),m=(0,V.useCallback)((e,t,n=!0)=>{let[r]=f(e);if(!r)return!1;let i=GI(r,t);return n&&i>0||i>=r.width*r.height},[]);return(0,V.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:o,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,r,i,a,o,s,c,l,u,d,p,m])}var GR={actInsideInputWithModifier:!1},KR=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=AI(),{deleteElements:r}=WR(),i=AR(e,GR),a=AR(t);(0,V.useEffect)(()=>{if(i){let{edges:e,getNodes:t}=n.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,V.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])};function qR(e){let t=AI();(0,V.useEffect)(()=>{let n,r=()=>{if(!e.current)return;let n=FI(e.current);(n.height===0||n.width===0)&&t.getState().onError?.(`004`,DI.error004()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener(`resize`,r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener(`resize`,r),n&&e.current&&n.unobserve(e.current)}},[])}var JR={position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},YR=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,XR=e=>({x:e.x,y:e.y,zoom:e.k}),ZR=(e,t)=>e.target.closest(`.${t}`),QR=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),$R=e=>{let t=e.ctrlKey&&tL()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},ez=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),tz=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=sL.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:p,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:_=!0,children:v,noWheelClassName:y,noPanClassName:b})=>{let x=(0,V.useRef)(),S=AI(),C=(0,V.useRef)(!1),w=(0,V.useRef)(!1),T=(0,V.useRef)(null),E=(0,V.useRef)({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:k,userSelectionActive:A}=kI(ez,WA),j=AR(g),M=(0,V.useRef)(0),N=(0,V.useRef)(!1),P=(0,V.useRef)();return qR(T),(0,V.useEffect)(()=>{if(T.current){let e=T.current.getBoundingClientRect(),t=wI().scaleExtent([m,h]).translateExtent(p),n=ZM(T.current).call(t),r=mI.translate(f.x,f.y).scale(II(f.zoom,m,h)),i=[[0,0],[e.width,e.height]],a=t.constrain()(r,i,p);t.transform(n,a),t.wheelDelta($R),S.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on(`wheel.zoom`),transform:[a.x,a.y,a.k],domNode:T.current.closest(`.react-flow`)})}},[]),(0,V.useEffect)(()=>{O&&D&&(o&&!j&&!A?O.on(`wheel.zoom`,r=>{if(ZR(r,y))return!1;r.preventDefault(),r.stopImmediatePropagation();let i=O.property(`__zoom`).k||1;if(r.ctrlKey&&a){let e=$M(r),t=i*2**$R(r);D.scaleTo(O,t,e,r);return}let o=r.deltaMode===1?20:1,l=c===sL.Vertical?0:r.deltaX*o,u=c===sL.Horizontal?0:r.deltaY*o;!tL()&&r.shiftKey&&c!==sL.Vertical&&(l=r.deltaY*o,u=0),D.translateBy(O,-(l/i)*s,-(u/i)*s,{internal:!0});let d=XR(O.property(`__zoom`)),{onViewportChangeStart:f,onViewportChange:p,onViewportChangeEnd:m}=S.getState();clearTimeout(P.current),N.current||(N.current=!0,t?.(r,d),f?.(d)),N.current&&(e?.(r,d),p?.(d),P.current=setTimeout(()=>{n?.(r,d),m?.(d),N.current=!1},150))},{passive:!1}):k!==void 0&&O.on(`wheel.zoom`,function(e,t){if(!_&&e.type===`wheel`&&!e.ctrlKey||ZR(e,y))return null;e.preventDefault(),k.call(this,e,t)},{passive:!1}))},[A,o,c,O,D,k,j,a,_,y,t,e,n]),(0,V.useEffect)(()=>{D&&D.on(`start`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=S.getState(),r=XR(e.transform);C.current=!0,E.current=r,e.sourceEvent?.type===`mousedown`&&S.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[D,t]),(0,V.useEffect)(()=>{D&&(A&&!C.current?D.on(`zoom`,null):A||D.on(`zoom`,t=>{let{onViewportChange:n}=S.getState();if(S.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),w.current=!!(r&&QR(d,M.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=XR(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[A,D,e,d,r]),(0,V.useEffect)(()=>{D&&D.on(`end`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:t}=S.getState();if(C.current=!1,S.setState({paneDragging:!1}),r&&QR(d,M.current??0)&&!w.current&&r(e.sourceEvent),w.current=!1,(n||t)&&YR(E.current,e.transform)){let r=XR(e.transform);E.current=r,clearTimeout(x.current),x.current=setTimeout(()=>{t?.(r),n?.(e.sourceEvent,r)},o?150:0)}})},[D,o,d,n,r]),(0,V.useEffect)(()=>{D&&D.filter(e=>{let t=j||i,n=a&&e.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&e.button===1&&e.type===`mousedown`&&(ZR(e,`react-flow__node`)||ZR(e,`react-flow__edge`)))return!0;if(!d&&!t&&!o&&!l&&!a||A||!l&&e.type===`dblclick`||ZR(e,y)&&e.type===`wheel`||ZR(e,b)&&(e.type!==`wheel`||o&&e.type===`wheel`&&!j)||!a&&e.ctrlKey&&e.type===`wheel`||!t&&!o&&!n&&e.type===`wheel`||!d&&(e.type===`mousedown`||e.type===`touchstart`)||Array.isArray(d)&&!d.includes(e.button)&&e.type===`mousedown`)return!1;let r=Array.isArray(d)&&d.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||e.type===`wheel`)&&r})},[A,D,i,a,o,l,d,u,j]),V.createElement(`div`,{className:`react-flow__renderer`,ref:T,style:JR},v)},nz=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rz(){let{userSelectionActive:e,userSelectionRect:t}=kI(nz,WA);return e&&t?V.createElement(`div`,{className:`react-flow__selection react-flow__container`,style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function iz(e,t){let n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){let e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function az(e,t){if(e.some(e=>e.type===`reset`))return e.filter(e=>e.type===`reset`).map(e=>e.item);let n=e.filter(e=>e.type===`add`).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(r.length===0)return t.push(n),t;let i={...n};for(let e of r)if(e)switch(e.type){case`select`:i.selected=e.selected;break;case`position`:e.position!==void 0&&(i.position=e.position),e.positionAbsolute!==void 0&&(i.positionAbsolute=e.positionAbsolute),e.dragging!==void 0&&(i.dragging=e.dragging),i.expandParent&&iz(t,i);break;case`dimensions`:e.dimensions!==void 0&&(i.width=e.dimensions.width,i.height=e.dimensions.height),e.updateStyle!==void 0&&(i.style={...i.style||{},...e.dimensions}),typeof e.resizing==`boolean`&&(i.resizing=e.resizing),i.expandParent&&iz(t,i);break;case`remove`:return t}return t.push(i),t},n)}function oz(e,t){return az(e,t)}function sz(e,t){return az(e,t)}var cz=(e,t)=>({id:e,type:`select`,selected:t});function lz(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(cz(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(cz(n.id,!1))),e},[])}var uz=(e,t)=>n=>{n.target===t.current&&e?.(n)},dz=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),fz=(0,V.memo)(({isSelecting:e,selectionMode:t=cL.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{let f=(0,V.useRef)(null),p=AI(),m=(0,V.useRef)(0),h=(0,V.useRef)(0),g=(0,V.useRef)(),{userSelectionActive:_,elementsSelectable:v,dragging:y}=kI(dz,WA),b=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),m.current=0,h.current=0},x=e=>{a?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},S=e=>{if(Array.isArray(n)&&n?.includes(2)){e.preventDefault();return}o?.(e)},C=s?e=>s(e):void 0,w=t=>{let{resetSelectedElements:n,domNode:i}=p.getState();if(g.current=i?.getBoundingClientRect(),!v||!e||t.button!==0||t.target!==f.current||!g.current)return;let{x:a,y:o}=eL(t,g.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:a,startY:o,x:a,y:o}}),r?.(t)},T=n=>{let{userSelectionRect:r,nodeInternals:i,edges:a,transform:o,onNodesChange:s,onEdgesChange:c,nodeOrigin:l,getNodes:u}=p.getState();if(!e||!g.current||!r)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});let d=eL(n,g.current),f=r.startX??0,_=r.startY??0,v={...r,x:d.x<f?d.x:f,y:d.y<_?d.y:_,width:Math.abs(d.x-f),height:Math.abs(d.y-_)},y=u(),b=BL(i,v,o,t===cL.Partial,!0,l),x=VL(b,a).map(e=>e.id),S=b.map(e=>e.id);if(m.current!==S.length){m.current=S.length;let e=lz(y,S);e.length&&s?.(e)}if(h.current!==x.length){h.current=x.length;let e=lz(a,x);e.length&&c?.(e)}p.setState({userSelectionRect:v})},E=e=>{if(e.button!==0)return;let{userSelectionRect:t}=p.getState();!_&&t&&e.target===f.current&&x?.(e),p.setState({nodesSelectionActive:m.current>0}),b(),i?.(e)},D=e=>{_&&(p.setState({nodesSelectionActive:m.current>0}),i?.(e)),b()},O=v&&(e||_);return V.createElement(`div`,{className:IA([`react-flow__pane`,{dragging:y,selection:e}]),onClick:O?void 0:uz(x,f),onContextMenu:uz(S,f),onWheel:uz(C,f),onMouseEnter:O?void 0:c,onMouseDown:O?w:void 0,onMouseMove:O?T:l,onMouseUp:O?E:void 0,onMouseLeave:O?D:u,ref:f,style:JR},d,V.createElement(rz,null))});fz.displayName=`Pane`;function pz(e,t){let n=e.parentNode||e.parentId;if(!n)return!1;let r=t.get(n);return r?r.selected?!0:pz(r,t):!1}function mz(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function hz(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!pz(n,e))&&(n.draggable||t&&n.draggable===void 0)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function gz(e,t){return!t||t===`parent`?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function _z(e,t,n,r,i=[0,0],a){let o=gz(e,e.extent||r),s=o,c=e.parentNode||e.parentId;if(e.extent===`parent`&&!e.expandParent)if(c&&e.width&&e.height){let t=n.get(c),{x:r,y:a}=RL(t,i).positionAbsolute;s=t&&qI(r)&&qI(a)&&qI(t.width)&&qI(t.height)?[[r+e.width*i[0],a+e.height*i[1]],[r+t.width-e.width+e.width*i[0],a+t.height-e.height+e.height*i[1]]]:s}else a?.(`005`,DI.error005()),s=o;else if(e.extent&&c&&e.extent!==`parent`){let{x:t,y:r}=RL(n.get(c),i).positionAbsolute;s=[[e.extent[0][0]+t,e.extent[0][1]+r],[e.extent[1][0]+t,e.extent[1][1]+r]]}let l={x:0,y:0};c&&(l=RL(n.get(c),i).positionAbsolute);let u=s&&s!==`parent`?LI(t,s):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function vz({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}var yz=(e,t,n,r)=>{let i=t.querySelectorAll(e);if(!i||!i.length)return null;let a=Array.from(i),o=t.getBoundingClientRect(),s={x:o.width*r[0],y:o.height*r[1]};return a.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute(`data-handleid`),position:e.getAttribute(`data-handlepos`),x:(t.left-o.left-s.x)/n,y:(t.top-o.top-s.y)/n,...FI(e)}})};function bz(e,t,n){return n===void 0?n:r=>{let i=t().nodeInternals.get(e);i&&n(r,{...i})}}function xz({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:s,onError:c}=t.getState(),l=s.get(e);if(!l){c?.(`012`,DI.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function Sz(){let e=AI();return(0,V.useCallback)(({sourceEvent:t})=>{let{transform:n,snapGrid:r,snapToGrid:i}=e.getState(),a=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY,s={x:(a-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:i?r[0]*Math.round(s.x/r[0]):s.x,ySnapped:i?r[1]*Math.round(s.y/r[1]):s.y,...s}},[])}function Cz(e){return(t,n,r)=>e?.(t,r)}function wz({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,selectNodesOnDrag:o}){let s=AI(),[c,l]=(0,V.useState)(!1),u=(0,V.useRef)([]),d=(0,V.useRef)({x:null,y:null}),f=(0,V.useRef)(0),p=(0,V.useRef)(null),m=(0,V.useRef)({x:0,y:0}),h=(0,V.useRef)(null),g=(0,V.useRef)(!1),_=(0,V.useRef)(!1),v=(0,V.useRef)(!1),y=Sz();return(0,V.useEffect)(()=>{if(e?.current){let c=ZM(e.current),b=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:a,updateNodePositions:o,nodeExtent:c,snapGrid:f,snapToGrid:p,nodeOrigin:m,onError:g}=s.getState();d.current={x:e,y:t};let _=!1,v={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&c&&(v=HI(zL(u.current,m))),u.current=u.current.map(r=>{let i={x:e-r.distance.x,y:t-r.distance.y};p&&(i.x=f[0]*Math.round(i.x/f[0]),i.y=f[1]*Math.round(i.y/f[1]));let a=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];u.current.length>1&&c&&!r.extent&&(a[0][0]=r.positionAbsolute.x-v.x+c[0][0],a[1][0]=r.positionAbsolute.x+(r.width??0)-v.x2+c[1][0],a[0][1]=r.positionAbsolute.y-v.y+c[0][1],a[1][1]=r.positionAbsolute.y+(r.height??0)-v.y2+c[1][1]);let o=_z(r,i,n,a,m,g);return _=_||r.position.x!==o.position.x||r.position.y!==o.position.y,r.position=o.position,r.positionAbsolute=o.positionAbsolute,r}),!_)return;o(u.current,!0,!0),l(!0);let y=i?r:Cz(a);if(y&&h.current){let[e,t]=vz({nodeId:i,dragItems:u.current,nodeInternals:n});y(h.current,e,t)}},x=()=>{if(!p.current)return;let[e,t]=zI(m.current,p.current);if(e!==0||t!==0){let{transform:n,panBy:r}=s.getState();d.current.x=(d.current.x??0)-e/n[2],d.current.y=(d.current.y??0)-t/n[2],r({x:e,y:t})&&b(d.current)}f.current=requestAnimationFrame(x)},S=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:c,unselectNodesAndEdges:l,onNodeDragStart:f,onSelectionDragStart:p}=s.getState();_.current=!0;let m=i?f:Cz(p);(!o||!a)&&!r&&i&&(n.get(i)?.selected||l()),i&&a&&o&&xz({id:i,store:s,nodeRef:e});let h=y(t);if(d.current=h,u.current=hz(n,c,h,i),m&&u.current){let[e,r]=vz({nodeId:i,dragItems:u.current,nodeInternals:n});m(t.sourceEvent,e,r)}};if(t)c.on(`.drag`,null);else{let t=fN().on(`start`,e=>{let{domNode:t,nodeDragThreshold:n}=s.getState();n===0&&S(e),v.current=!1,d.current=y(e),p.current=t?.getBoundingClientRect()||null,m.current=eL(e.sourceEvent,p.current)}).on(`drag`,e=>{let t=y(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=s.getState();if(e.sourceEvent.type===`touchmove`&&e.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!g.current&&_.current&&n&&(g.current=!0,x()),!_.current){let n=t.xSnapped-(d?.current?.x??0),i=t.ySnapped-(d?.current?.y??0);Math.sqrt(n*n+i*i)>r&&S(e)}(d.current.x!==t.xSnapped||d.current.y!==t.ySnapped)&&u.current&&_.current&&(h.current=e.sourceEvent,m.current=eL(e.sourceEvent,p.current),b(t))}}).on(`end`,e=>{if(!(!_.current||v.current)&&(l(!1),g.current=!1,_.current=!1,cancelAnimationFrame(f.current),u.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:a}=s.getState(),o=i?r:Cz(a);if(t(u.current,!1,!1),o){let[t,r]=vz({nodeId:i,dragItems:u.current,nodeInternals:n});o(e.sourceEvent,t,r)}}}).filter(t=>{let i=t.target;return!t.button&&(!n||!mz(i,`.${n}`,e))&&(!r||mz(i,r,e))});return c.call(t),()=>{c.on(`.drag`,null)}}}},[e,t,n,r,a,s,i,o,y]),c}function Tz(){let e=AI();return(0,V.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:i,getNodes:a,snapToGrid:o,snapGrid:s,onError:c,nodesDraggable:l}=e.getState(),u=a().filter(e=>e.selected&&(e.draggable||l&&e.draggable===void 0)),d=o?s[0]:5,f=o?s[1]:5,p=t.isShiftPressed?4:1,m=t.x*d*p,h=t.y*f*p;i(u.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+h};o&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));let{positionAbsolute:i,position:a}=_z(e,t,n,r,void 0,c);e.position=a,e.positionAbsolute=i}return e}),!0,!1)},[])}var Ez={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Dz=e=>{let t=({id:t,type:n,data:r,xPos:i,yPos:a,xPosOrigin:o,yPosOrigin:s,selected:c,onClick:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onContextMenu:p,onDoubleClick:m,style:h,className:g,isDraggable:_,isSelectable:v,isConnectable:y,isFocusable:b,selectNodesOnDrag:x,sourcePosition:S,targetPosition:C,hidden:w,resizeObserver:T,dragHandle:E,zIndex:D,isParent:O,noDragClassName:k,noPanClassName:A,initialized:j,disableKeyboardA11y:M,ariaLabel:N,rfId:P,hasHandleBounds:ee})=>{let te=AI(),F=(0,V.useRef)(null),I=(0,V.useRef)(null),ne=(0,V.useRef)(S),re=(0,V.useRef)(C),ie=(0,V.useRef)(n),ae=v||_||l||u||d||f,oe=Tz(),se=bz(t,te.getState,u),ce=bz(t,te.getState,d),le=bz(t,te.getState,f),ue=bz(t,te.getState,p),de=bz(t,te.getState,m),fe=e=>{let{nodeDragThreshold:n}=te.getState();if(v&&(!x||!_||n>0)&&xz({id:t,store:te,nodeRef:F}),l){let n=te.getState().nodeInternals.get(t);n&&l(e,{...n})}},pe=e=>{QI(e)||M||(YI.includes(e.key)&&v?xz({id:t,store:te,unselect:e.key===`Escape`,nodeRef:F}):_&&c&&Object.prototype.hasOwnProperty.call(Ez,e.key)&&(te.setState({ariaLiveMessage:`Moved selected node ${e.key.replace(`Arrow`,``).toLowerCase()}. New position, x: ${~~i}, y: ${~~a}`}),oe({x:Ez[e.key].x,y:Ez[e.key].y,isShiftPressed:e.shiftKey})))};(0,V.useEffect)(()=>()=>{I.current&&=(T?.unobserve(I.current),null)},[]),(0,V.useEffect)(()=>{if(F.current&&!w){let e=F.current;(!j||!ee||I.current!==e)&&(I.current&&T?.unobserve(I.current),T?.observe(e),I.current=e)}},[w,j,ee]),(0,V.useEffect)(()=>{let e=ie.current!==n,r=ne.current!==S,i=re.current!==C;F.current&&(e||r||i)&&(e&&(ie.current=n),r&&(ne.current=S),i&&(re.current=C),te.getState().updateNodeDimensions([{id:t,nodeElement:F.current,forceUpdate:!0}]))},[t,n,S,C]);let me=wz({nodeRef:F,disabled:w||!_,noDragClassName:k,handleSelector:E,nodeId:t,isSelectable:v,selectNodesOnDrag:x});return w?null:V.createElement(`div`,{className:IA([`react-flow__node`,`react-flow__node-${n}`,{[A]:_},g,{selected:c,selectable:v,parent:O,dragging:me}]),ref:F,style:{zIndex:D,transform:`translate(${o}px,${s}px)`,pointerEvents:ae?`all`:`none`,visibility:j?`visible`:`hidden`,...h},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:se,onMouseMove:ce,onMouseLeave:le,onContextMenu:ue,onClick:fe,onDoubleClick:de,onKeyDown:b?pe:void 0,tabIndex:b?0:void 0,role:b?`button`:void 0,"aria-describedby":M?void 0:`${wR}-${P}`,"aria-label":N},V.createElement(kL,{value:t},V.createElement(e,{id:t,data:r,type:n,xPos:i,yPos:a,selected:c,isConnectable:y,sourcePosition:S,targetPosition:C,dragging:me,dragHandle:E,zIndex:D})))};return t.displayName=`NodeWrapper`,(0,V.memo)(t)},Oz=e=>({...zL(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive});function kz({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=AI(),{width:i,height:a,x:o,y:s,transformString:c,userSelectionActive:l}=kI(Oz,WA),u=Tz(),d=(0,V.useRef)(null);if((0,V.useEffect)(()=>{n||d.current?.focus({preventScroll:!0})},[n]),wz({nodeRef:d}),l||!i||!a)return null;let f=e?t=>{e(t,r.getState().getNodes().filter(e=>e.selected))}:void 0;return V.createElement(`div`,{className:IA([`react-flow__nodesselection`,`react-flow__container`,t]),style:{transform:c}},V.createElement(`div`,{ref:d,className:`react-flow__nodesselection-rect`,onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Ez,e.key)&&u({x:Ez[e.key].x,y:Ez[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:a,top:s,left:o}}))}var Az=(0,V.memo)(kz),jz=e=>e.nodesSelectionActive,Mz=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:_,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:E,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,preventScrolling:j,onSelectionContextMenu:M,noWheelClassName:N,noPanClassName:P,disableKeyboardA11y:ee})=>{let te=kI(jz),F=AR(d),I=AR(_),ne=I||E,re=I||S,ie=F||f&&ne!==!0;return KR({deleteKeyCode:s,multiSelectionKeyCode:g}),V.createElement(tz,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:re,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:!F&&ne,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:N,noPanClassName:P},V.createElement(fz,{onSelectionStart:m,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:ne,isSelecting:!!ie,selectionMode:p},e,te&&V.createElement(Az,{onSelectionContextMenu:M,noPanClassName:P,disableKeyboardA11y:ee})))};Mz.displayName=`FlowRenderer`;var Nz=(0,V.memo)(Mz);function Pz(e){return kI((0,V.useCallback)(t=>e?BL(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[e]))}function Fz(e){let t={input:Dz(e.input||cR),default:Dz(e.default||oR),output:Dz(e.output||uR),group:Dz(e.group||dR)},n=Object.keys(e).filter(e=>![`input`,`default`,`output`,`group`].includes(e)).reduce((t,n)=>(t[n]=Dz(e[n]||oR),t),{});return{...t,...n}}var Iz=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r||i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Lz=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Rz=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:o}=kI(Lz,WA),s=Pz(e.onlyRenderVisibleElements),c=(0,V.useRef)(),l=(0,V.useMemo)(()=>{if(typeof ResizeObserver>`u`)return null;let e=new ResizeObserver(e=>{a(e.map(e=>({id:e.target.getAttribute(`data-id`),nodeElement:e.target,forceUpdate:!0})))});return c.current=e,e},[]);return(0,V.useEffect)(()=>()=>{c?.current?.disconnect()},[]),V.createElement(`div`,{className:`react-flow__nodes`,style:JR},s.map(a=>{let s=a.type||`default`;e.nodeTypes[s]||(o?.(`003`,DI.error003(s)),s=`default`);let c=e.nodeTypes[s]||e.nodeTypes.default,u=!!(a.draggable||t&&a.draggable===void 0),d=!!(a.selectable||i&&a.selectable===void 0),f=!!(a.connectable||n&&a.connectable===void 0),p=!!(a.focusable||r&&a.focusable===void 0),m=e.nodeExtent?LI(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,h=m?.x??0,g=m?.y??0,_=Iz({x:h,y:g,width:a.width??0,height:a.height??0,origin:e.nodeOrigin});return V.createElement(c,{key:a.id,id:a.id,className:a.className,style:a.style,type:s,data:a.data,sourcePosition:a.sourcePosition||Z.Bottom,targetPosition:a.targetPosition||Z.Top,hidden:a.hidden,xPos:h,yPos:g,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:u,isSelectable:d,isConnectable:f,isFocusable:p,resizeObserver:l,dragHandle:a.dragHandle,zIndex:a[JI]?.z??0,isParent:!!a[JI]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel,hasHandleBounds:!!a[JI]?.handleBounds})}))};Rz.displayName=`NodeRenderer`;var zz=(0,V.memo)(Rz),Bz=(e,t,n)=>n===Z.Left?e-t:n===Z.Right?e+t:e,Vz=(e,t,n)=>n===Z.Top?e-t:n===Z.Bottom?e+t:e,Hz=`react-flow__edgeupdater`,Uz=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:o,type:s})=>V.createElement(`circle`,{onMouseDown:i,onMouseEnter:a,onMouseOut:o,className:IA([Hz,`${Hz}-${s}`]),cx:Bz(t,r,e),cy:Vz(n,r,e),r,stroke:`transparent`,fill:`transparent`}),Wz=()=>!0,Gz=e=>{let t=({id:t,className:n,type:r,data:i,onClick:a,onEdgeDoubleClick:o,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,source:g,target:_,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,elementsSelectable:w,hidden:T,sourceHandleId:E,targetHandleId:D,onContextMenu:O,onMouseEnter:k,onMouseMove:A,onMouseLeave:j,reconnectRadius:M,onReconnect:N,onReconnectStart:P,onReconnectEnd:ee,markerEnd:te,markerStart:F,rfId:I,ariaLabel:ne,isFocusable:re,isReconnectable:ie,pathOptions:ae,interactionWidth:oe,disableKeyboardA11y:se})=>{let ce=(0,V.useRef)(null),[le,ue]=(0,V.useState)(!1),[de,fe]=(0,V.useState)(!1),pe=AI(),me=(0,V.useMemo)(()=>`url('#${NL(F,I)}')`,[F,I]),he=(0,V.useMemo)(()=>`url('#${NL(te,I)}')`,[te,I]);if(T)return null;let ge=e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:i,multiSelectionActive:o}=pe.getState(),s=n.find(e=>e.id===t);s&&(w&&(pe.setState({nodesSelectionActive:!1}),s.selected&&o?(i({nodes:[],edges:[s]}),ce.current?.blur()):r([t])),a&&a(e,s))},L=rL(t,pe.getState,o),_e=rL(t,pe.getState,O),ve=rL(t,pe.getState,k),ye=rL(t,pe.getState,A),be=rL(t,pe.getState,j),xe=(e,n)=>{if(e.button!==0)return;let{edges:r,isValidConnection:i}=pe.getState(),a=n?_:g,o=(n?D:E)||null,s=n?`target`:`source`,c=i||Wz,l=n,u=r.find(e=>e.id===t);fe(!0),P?.(e,u,s),$L({event:e,handleId:o,nodeId:a,onConnect:e=>N?.(u,e),isTarget:l,getState:pe.getState,setState:pe.setState,isValidConnection:c,edgeUpdaterType:s,onReconnectEnd:e=>{fe(!1),ee?.(e,u,s)}})},R=e=>xe(e,!0),Se=e=>xe(e,!1),Ce=()=>ue(!0),we=()=>ue(!1),Te=!w&&!a;return V.createElement(`g`,{className:IA([`react-flow__edge`,`react-flow__edge-${r}`,n,{selected:s,animated:c,inactive:Te,updating:le}]),onClick:ge,onDoubleClick:L,onContextMenu:_e,onMouseEnter:ve,onMouseMove:ye,onMouseLeave:be,onKeyDown:re?e=>{if(!se&&YI.includes(e.key)&&w){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:i}=pe.getState();e.key===`Escape`?(ce.current?.blur(),n({edges:[i.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:re?0:void 0,role:re?`button`:`img`,"data-testid":`rf__edge-${t}`,"aria-label":ne===null?void 0:ne||`Edge from ${g} to ${_}`,"aria-describedby":re?`${TR}-${I}`:void 0,ref:ce},!de&&V.createElement(e,{id:t,source:g,target:_,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,data:i,style:h,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,sourceHandleId:E,targetHandleId:D,markerStart:me,markerEnd:he,pathOptions:ae,interactionWidth:oe}),ie&&V.createElement(V.Fragment,null,(ie===`source`||ie===!0)&&V.createElement(Uz,{position:S,centerX:v,centerY:y,radius:M,onMouseDown:R,onMouseEnter:Ce,onMouseOut:we,type:`source`}),(ie===`target`||ie===!0)&&V.createElement(Uz,{position:C,centerX:b,centerY:x,radius:M,onMouseDown:Se,onMouseEnter:Ce,onMouseOut:we,type:`target`})))};return t.displayName=`EdgeWrapper`,(0,V.memo)(t)};function Kz(e){let t={default:Gz(e.default||DL),straight:Gz(e.bezier||CL),step:Gz(e.step||xL),smoothstep:Gz(e.step||bL),simplebezier:Gz(e.simplebezier||pL)},n=Object.keys(e).filter(e=>![`default`,`bezier`].includes(e)).reduce((t,n)=>(t[n]=Gz(e[n]||DL),t),{});return{...t,...n}}function qz(e,t,n=null){let r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,a=n?.width||t.width,o=n?.height||t.height;switch(e){case Z.Top:return{x:r+a/2,y:i};case Z.Right:return{x:r+a,y:i+o/2};case Z.Bottom:return{x:r+a/2,y:i+o};case Z.Left:return{x:r,y:i+o/2}}}function Jz(e,t){return e?e.length===1||!t?e[0]:t&&e.find(e=>e.id===t)||null:null}var Yz=(e,t,n,r,i,a)=>{let o=qz(n,e,t),s=qz(a,r,i);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function Xz({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:o,height:s,transform:c}){let l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);let u=HI({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:s/c[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function Zz(e){let t=e?.[JI]?.handleBounds||null,n=t&&e?.width&&e?.height&&e?.positionAbsolute?.x!==void 0&&e?.positionAbsolute?.y!==void 0;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var Qz=[{level:0,isMaxLevel:!0,edges:[]}];function $z(e,t,n=!1){let r=-1,i=e.reduce((e,i)=>{let a=qI(i.zIndex),o=a?i.zIndex:0;if(n){let e=t.get(i.target),n=t.get(i.source),r=i.selected||e?.selected||n?.selected,s=Math.max(n?.[JI]?.z||0,e?.[JI]?.z||0,1e3);o=(a?i.zIndex:0)+(r?s:0)}return e[o]?e[o].push(i):e[o]=[i],r=o>r?o:r,e},{}),a=Object.entries(i).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return a.length===0?Qz:a}function eB(e,t,n){return $z(kI((0,V.useCallback)(n=>e?n.edges.filter(e=>{let r=t.get(e.source),i=t.get(e.target);return r?.width&&r?.height&&i?.width&&i?.height&&Xz({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:i.width,targetHeight:i.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t])),t,n)}var tB=({color:e=`none`,strokeWidth:t=1})=>V.createElement(`polyline`,{style:{stroke:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,fill:`none`,points:`-5,-4 0,0 -5,4`}),nB=({color:e=`none`,strokeWidth:t=1})=>V.createElement(`polyline`,{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4 -5,-4`}),rB={[uL.Arrow]:tB,[uL.ArrowClosed]:nB};function iB(e){let t=AI();return(0,V.useMemo)(()=>Object.prototype.hasOwnProperty.call(rB,e)?rB[e]:(t.getState().onError?.(`009`,DI.error009(e)),null),[e])}var aB=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a=`strokeWidth`,strokeWidth:o,orient:s=`auto-start-reverse`})=>{let c=iB(t);return c?V.createElement(`marker`,{className:`react-flow__arrowhead`,id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:`-10 -10 20 20`,markerUnits:a,orient:s,refX:`0`,refY:`0`},V.createElement(c,{color:n,strokeWidth:o})):null},oB=({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,i)=>([i.markerStart,i.markerEnd].forEach(i=>{if(i&&typeof i==`object`){let a=NL(i,t);r.includes(a)||(n.push({id:a,color:i.color||e,...i}),r.push(a))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))},sB=({defaultColor:e,rfId:t})=>{let n=kI((0,V.useCallback)(oB({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return V.createElement(`defs`,null,n.map(e=>V.createElement(aB,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};sB.displayName=`MarkerDefinitions`;var cB=(0,V.memo)(sB),lB=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),uB=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,children:g,disableKeyboardA11y:_})=>{let{edgesFocusable:v,edgesUpdatable:y,elementsSelectable:b,width:x,height:S,connectionMode:C,nodeInternals:w,onError:T}=kI(lB,WA),E=eB(t,w,n);return x?V.createElement(V.Fragment,null,E.map(({level:t,edges:n,isMaxLevel:g})=>V.createElement(`svg`,{key:t,style:{zIndex:t},width:x,height:S,className:`react-flow__edges react-flow__container`},g&&V.createElement(cB,{defaultColor:e,rfId:r}),V.createElement(`g`,null,n.map(e=>{let[t,n,g]=Zz(w.get(e.source)),[x,S,E]=Zz(w.get(e.target));if(!g||!E)return null;let D=e.type||`default`;i[D]||(T?.(`011`,DI.error011(D)),D=`default`);let O=i[D]||i.default,k=C===oL.Strict?S.target:(S.target??[]).concat(S.source??[]),A=Jz(n.source,e.sourceHandle),j=Jz(k,e.targetHandle),M=A?.position||Z.Bottom,N=j?.position||Z.Top,P=!!(e.focusable||v&&e.focusable===void 0),ee=e.reconnectable||e.updatable,te=f!==void 0&&(ee||y&&ee===void 0);if(!A||!j)return T?.(`008`,DI.error008(A,e)),null;let{sourceX:F,sourceY:I,targetX:ne,targetY:re}=Yz(t,A,M,x,j,N);return V.createElement(O,{key:e.id,id:e.id,className:IA([e.className,a]),type:D,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:F,sourceY:I,targetX:ne,targetY:re,sourcePosition:M,targetPosition:N,elementsSelectable:b,onContextMenu:o,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,rfId:r,ariaLabel:e.ariaLabel,isFocusable:P,isReconnectable:te,pathOptions:`pathOptions`in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:_})})))),g):null};uB.displayName=`EdgeRenderer`;var dB=(0,V.memo)(uB),fB=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function pB({children:e}){let t=kI(fB);return V.createElement(`div`,{className:`react-flow__viewport react-flow__container`,style:{transform:t}},e)}function mB(e){let t=WR(),n=(0,V.useRef)(!1);(0,V.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var hB={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top},gB=({nodeId:e,handleType:t,style:n,type:r=lL.Bezier,CustomComponent:i,connectionStatus:a})=>{let{fromNode:o,handleId:s,toX:c,toY:l,connectionMode:u}=kI((0,V.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),WA),d=o?.[JI]?.handleBounds,f=d?.[t];if(u===oL.Loose&&(f||=d?.[t===`source`?`target`:`source`]),!o||!f)return null;let p=s?f.find(e=>e.id===s):f[0],m=p?p.x+p.width/2:(o.width??0)/2,h=p?p.y+p.height/2:o.height??0,g=(o.positionAbsolute?.x??0)+m,_=(o.positionAbsolute?.y??0)+h,v=p?.position,y=v?hB[v]:null;if(!v||!y)return null;if(i)return V.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:g,fromY:_,toX:c,toY:l,fromPosition:v,toPosition:y,connectionStatus:a});let b=``,x={sourceX:g,sourceY:_,sourcePosition:v,targetX:c,targetY:l,targetPosition:y};return r===lL.Bezier?[b]=EL(x):r===lL.Step?[b]=yL({...x,borderRadius:0}):r===lL.SmoothStep?[b]=yL(x):r===lL.SimpleBezier?[b]=fL(x):b=`M${g},${_} ${c},${l}`,V.createElement(`path`,{d:b,fill:`none`,className:`react-flow__connection-path`,style:n})};gB.displayName=`ConnectionLine`;var _B=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function vB({containerStyle:e,style:t,type:n,component:r}){let{nodeId:i,handleType:a,nodesConnectable:o,width:s,height:c,connectionStatus:l}=kI(_B,WA);return i&&a&&s&&o?V.createElement(`svg`,{style:e,width:s,height:c,className:`react-flow__edges react-flow__connectionline react-flow__container`},V.createElement(`g`,{className:IA([`react-flow__connection`,l])},V.createElement(gB,{nodeId:i,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:l}))):null}function yB(e,t){return(0,V.useRef)(null),AI(),(0,V.useMemo)(()=>t(e),[e])}var bB=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:a,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:h,onSelectionEnd:g,connectionLineType:_,connectionLineStyle:v,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:k,selectNodesOnDrag:A,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,preventScrolling:ee,defaultMarkerColor:te,zoomOnScroll:F,zoomOnPinch:I,panOnScroll:ne,panOnScrollSpeed:re,panOnScrollMode:ie,zoomOnDoubleClick:ae,panOnDrag:oe,onPaneClick:se,onPaneMouseEnter:ce,onPaneMouseMove:le,onPaneMouseLeave:ue,onPaneScroll:de,onPaneContextMenu:fe,onEdgeContextMenu:pe,onEdgeMouseEnter:me,onEdgeMouseMove:he,onEdgeMouseLeave:ge,onReconnect:L,onReconnectStart:_e,onReconnectEnd:ve,reconnectRadius:ye,noDragClassName:be,noWheelClassName:xe,noPanClassName:R,elevateEdgesOnSelect:Se,disableKeyboardA11y:Ce,nodeOrigin:we,nodeExtent:Te,rfId:Ee})=>{let De=yB(e,Fz),Oe=yB(t,Kz);return mB(a),V.createElement(Nz,{onPaneClick:se,onPaneMouseEnter:ce,onPaneMouseMove:le,onPaneMouseLeave:ue,onPaneContextMenu:fe,onPaneScroll:de,deleteKeyCode:D,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:F,zoomOnPinch:I,zoomOnDoubleClick:ae,panOnScroll:ne,panOnScrollSpeed:re,panOnScrollMode:ie,panOnDrag:oe,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,onSelectionContextMenu:m,preventScrolling:ee,noDragClassName:be,noWheelClassName:xe,noPanClassName:R,disableKeyboardA11y:Ce},V.createElement(pB,null,V.createElement(dB,{edgeTypes:Oe,onEdgeClick:s,onEdgeDoubleClick:l,onlyRenderVisibleElements:O,onEdgeContextMenu:pe,onEdgeMouseEnter:me,onEdgeMouseMove:he,onEdgeMouseLeave:ge,onReconnect:L,onReconnectStart:_e,onReconnectEnd:ve,reconnectRadius:ye,defaultMarkerColor:te,noPanClassName:R,elevateEdgesOnSelect:!!Se,disableKeyboardA11y:Ce,rfId:Ee},V.createElement(vB,{style:v,type:_,component:y,containerStyle:b})),V.createElement(`div`,{className:`react-flow__edgelabel-renderer`}),V.createElement(zz,{nodeTypes:De,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:A,onlyRenderVisibleElements:O,noPanClassName:R,noDragClassName:be,disableKeyboardA11y:Ce,nodeOrigin:we,nodeExtent:Te,rfId:Ee})))};bB.displayName=`GraphView`;var xB=(0,V.memo)(bB),SB=[[-1/0,-1/0],[1/0,1/0]],CB={rfId:`1`,width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:SB,nodeExtent:SB,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:`source`,connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:oL.Strict,domNode:null,paneDragging:!1,noPanClassName:`nopan`,nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:``,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:XI,isValidConnection:void 0},wB=()=>UA((e,t)=>({...CB,setNodes:n=>{let{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:FR(n,r,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let i=n!==void 0,a=r!==void 0;e({nodeInternals:i?FR(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:a?r:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c?.querySelector(`.react-flow__viewport`);if(!u)return;let d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((e,t)=>{let n=i.get(t.id);if(n?.hidden)i.set(n.id,{...n,[JI]:{...n[JI],handleBounds:void 0}});else if(n){let r=FI(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(i.set(n.id,{...n,[JI]:{...n[JI],handleBounds:{source:yz(`.source`,t.nodeElement,f,l),target:yz(`.target`,t.nodeElement,f,l)}},...r}),e.push({id:n.id,type:`dimensions`,dimensions:r}))}return e},[]);PR(i,l);let m=o||a&&!o&&IR(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:m}),p?.length>0&&r?.(p)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:i}=t();i(e.map(e=>{let t={id:e.id,type:`position`,dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:c}=t();n?.length&&(a&&e({nodeInternals:FR(oz(n,s()),i,o,c)}),r?.(n))},addSelectedNodes:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>cz(e,!0)):(o=lz(a(),n),s=lz(i,[])),zR({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>cz(e,!0)):(o=lz(i,n),s=lz(a(),[])),zR({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:i,getNodes:a}=t(),o=n||a(),s=r||i;zR({changedNodes:o.map(e=>(e.selected=!1,cz(e.id,!1))),changedEdges:s.map(e=>cz(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t();zR({changedNodes:r().filter(e=>e.selected).map(e=>cz(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>cz(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=LI(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:i,d3Zoom:a,d3Selection:o,translateExtent:s}=t();if(!a||!o||!e.x&&!e.y)return!1;let c=mI.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),l=[[0,0],[r,i]],u=a?.constrain()(c,l,s);return a.transform(o,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:CB.connectionNodeId,connectionHandleId:CB.connectionHandleId,connectionHandleType:CB.connectionHandleType,connectionStatus:CB.connectionStatus,connectionStartHandle:CB.connectionStartHandle,connectionEndHandle:CB.connectionEndHandle}),reset:()=>e({...CB})}),Object.is),TB=({children:e})=>{let t=(0,V.useRef)(null);return t.current||=wB(),V.createElement(EI,{value:t.current},e)};TB.displayName=`ReactFlowProvider`;var EB=({children:e})=>(0,V.useContext)(TI)?V.createElement(V.Fragment,null,e):V.createElement(TB,null,e);EB.displayName=`ReactFlowWrapper`;var DB={input:cR,default:oR,output:uR,group:dR},OB={default:DL,straight:CL,step:xL,smoothstep:bL,simplebezier:pL},kB=[0,0],AB=[15,15],jB={x:0,y:0,zoom:1},MB={width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,zIndex:0},NB=(0,V.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a=DB,edgeTypes:o=OB,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onNodesDelete:E,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:k,onSelectionDrag:A,onSelectionDragStop:j,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,connectionMode:ee=oL.Strict,connectionLineType:te=lL.Bezier,connectionLineStyle:F,connectionLineComponent:I,connectionLineContainerStyle:ne,deleteKeyCode:re=`Backspace`,selectionKeyCode:ie=`Shift`,selectionOnDrag:ae=!1,selectionMode:oe=cL.Full,panActivationKeyCode:se=`Space`,multiSelectionKeyCode:ce=tL()?`Meta`:`Control`,zoomActivationKeyCode:le=tL()?`Meta`:`Control`,snapToGrid:ue=!1,snapGrid:de=AB,onlyRenderVisibleElements:fe=!1,selectNodesOnDrag:pe=!0,nodesDraggable:me,nodesConnectable:he,nodesFocusable:ge,nodeOrigin:L=kB,edgesFocusable:_e,edgesUpdatable:ve,elementsSelectable:ye,defaultViewport:be=jB,minZoom:xe=.5,maxZoom:R=2,translateExtent:Se=SB,preventScrolling:Ce=!0,nodeExtent:we,defaultMarkerColor:Te=`#b1b1b7`,zoomOnScroll:Ee=!0,zoomOnPinch:De=!0,panOnScroll:Oe=!1,panOnScrollSpeed:ke=.5,panOnScrollMode:Ae=sL.Free,zoomOnDoubleClick:je=!0,panOnDrag:Me=!0,onPaneClick:Ne,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:Ie,onPaneScroll:Le,onPaneContextMenu:Re,children:ze,onEdgeContextMenu:Be,onEdgeDoubleClick:Ve,onEdgeMouseEnter:He,onEdgeMouseMove:Ue,onEdgeMouseLeave:We,onEdgeUpdate:Ge,onEdgeUpdateStart:Ke,onEdgeUpdateEnd:qe,onReconnect:Je,onReconnectStart:Ye,onReconnectEnd:Xe,reconnectRadius:Ze=10,edgeUpdaterRadius:Qe=10,onNodesChange:$e,onEdgesChange:et,noDragClassName:tt=`nodrag`,noWheelClassName:nt=`nowheel`,noPanClassName:rt=`nopan`,fitView:it=!1,fitViewOptions:at,connectOnClick:ot=!0,attributionPosition:z,proOptions:st,defaultEdgeOptions:ct,elevateNodesOnSelect:lt=!0,elevateEdgesOnSelect:ut=!1,disableKeyboardA11y:dt=!1,autoPanOnConnect:ft=!0,autoPanOnNodeDrag:pt=!0,connectionRadius:mt=20,isValidConnection:ht,onError:gt,style:_t,id:vt,nodeDragThreshold:yt,...bt},xt)=>{let St=vt||`1`;return V.createElement(`div`,{...bt,style:{..._t,...MB},ref:xt,className:IA([`react-flow`,i]),"data-testid":`rf__wrapper`,id:vt},V.createElement(EB,null,V.createElement(xB,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:o,connectionLineType:te,connectionLineStyle:F,connectionLineComponent:I,connectionLineContainerStyle:ne,selectionKeyCode:ie,selectionOnDrag:ae,selectionMode:oe,deleteKeyCode:re,multiSelectionKeyCode:ce,panActivationKeyCode:se,zoomActivationKeyCode:le,onlyRenderVisibleElements:fe,selectNodesOnDrag:pe,defaultViewport:be,translateExtent:Se,minZoom:xe,maxZoom:R,preventScrolling:Ce,zoomOnScroll:Ee,zoomOnPinch:De,zoomOnDoubleClick:je,panOnScroll:Oe,panOnScrollSpeed:ke,panOnScrollMode:Ae,panOnDrag:Me,onPaneClick:Ne,onPaneMouseEnter:Pe,onPaneMouseMove:Fe,onPaneMouseLeave:Ie,onPaneScroll:Le,onPaneContextMenu:Re,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,onEdgeContextMenu:Be,onEdgeDoubleClick:Ve,onEdgeMouseEnter:He,onEdgeMouseMove:Ue,onEdgeMouseLeave:We,onReconnect:Je??Ge,onReconnectStart:Ye??Ke,onReconnectEnd:Xe??qe,reconnectRadius:Ze??Qe,defaultMarkerColor:Te,noDragClassName:tt,noWheelClassName:nt,noPanClassName:rt,elevateEdgesOnSelect:ut,rfId:St,disableKeyboardA11y:dt,nodeOrigin:L,nodeExtent:we}),V.createElement(xR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,nodesDraggable:me,nodesConnectable:he,nodesFocusable:ge,edgesFocusable:_e,edgesUpdatable:ve,elementsSelectable:ye,elevateNodesOnSelect:lt,minZoom:xe,maxZoom:R,nodeExtent:we,onNodesChange:$e,onEdgesChange:et,snapToGrid:ue,snapGrid:de,connectionMode:ee,translateExtent:Se,connectOnClick:ot,defaultEdgeOptions:ct,fitView:it,fitViewOptions:at,onNodesDelete:E,onEdgesDelete:D,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onSelectionDrag:A,onSelectionDragStart:k,onSelectionDragStop:j,noPanClassName:rt,nodeOrigin:L,rfId:St,autoPanOnConnect:ft,autoPanOnNodeDrag:pt,onError:gt,connectionRadius:mt,isValidConnection:ht,nodeDragThreshold:yt}),V.createElement(_R,{onSelectionChange:O}),ze,V.createElement(NI,{proOptions:st,position:z}),V.createElement(kR,{rfId:St,disableKeyboardA11y:dt})))});NB.displayName=`ReactFlow`;function PB(e){return t=>{let[n,r]=(0,V.useState)(t);return[n,r,(0,V.useCallback)(t=>r(n=>e(t,n)),[])]}}var FB=PB(oz),IB=PB(sz);function LB(){return V.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`},V.createElement(`path`,{d:`M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z`}))}function RB(){return V.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 5`},V.createElement(`path`,{d:`M0 0h32v4.2H0z`}))}function zB(){return V.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 30`},V.createElement(`path`,{d:`M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z`}))}function BB(){return V.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},V.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z`}))}function VB(){return V.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},V.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z`}))}var HB=({children:e,className:t,...n})=>V.createElement(`button`,{type:`button`,className:IA([`react-flow__controls-button`,t]),...n},e);HB.displayName=`ControlButton`;var UB=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),WB=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:o,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d=`bottom-left`})=>{let f=AI(),[p,m]=(0,V.useState)(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:_}=kI(UB,WA),{zoomIn:v,zoomOut:y,fitView:b}=WR();if((0,V.useEffect)(()=>{m(!0)},[]),!p)return null;let x=()=>{v(),a?.()},S=()=>{y(),o?.()},C=()=>{b(i),s?.()},w=()=>{f.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),c?.(!h)};return V.createElement(MI,{className:IA([`react-flow__controls`,l]),position:d,style:e,"data-testid":`rf__controls`},t&&V.createElement(V.Fragment,null,V.createElement(HB,{onClick:x,className:`react-flow__controls-zoomin`,title:`zoom in`,"aria-label":`zoom in`,disabled:_},V.createElement(LB,null)),V.createElement(HB,{onClick:S,className:`react-flow__controls-zoomout`,title:`zoom out`,"aria-label":`zoom out`,disabled:g},V.createElement(RB,null))),n&&V.createElement(HB,{className:`react-flow__controls-fitview`,onClick:C,title:`fit view`,"aria-label":`fit view`},V.createElement(zB,null)),r&&V.createElement(HB,{className:`react-flow__controls-interactive`,onClick:w,title:`toggle interactivity`,"aria-label":`toggle interactivity`},h?V.createElement(VB,null):V.createElement(BB,null)),u)};WB.displayName=`Controls`;var GB=(0,V.memo)(WB),KB;(function(e){e.Lines=`lines`,e.Dots=`dots`,e.Cross=`cross`})(KB||={});function qB({color:e,dimensions:t,lineWidth:n}){return V.createElement(`path`,{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function JB({color:e,radius:t}){return V.createElement(`circle`,{cx:t,cy:t,r:t,fill:e})}var YB={[KB.Dots]:`#91919a`,[KB.Lines]:`#eee`,[KB.Cross]:`#e2e2e2`},XB={[KB.Dots]:1,[KB.Lines]:1,[KB.Cross]:6},ZB=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function QB({id:e,variant:t=KB.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:o,style:s,className:c}){let l=(0,V.useRef)(null),{transform:u,patternId:d}=kI(ZB,WA),f=o||YB[t],p=r||XB[t],m=t===KB.Dots,h=t===KB.Cross,g=Array.isArray(n)?n:[n,n],_=[g[0]*u[2]||1,g[1]*u[2]||1],v=p*u[2],y=h?[v,v]:_,b=m?[v/a,v/a]:[y[0]/a,y[1]/a];return V.createElement(`svg`,{className:IA([`react-flow__background`,c]),style:{...s,position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},ref:l,"data-testid":`rf__background`},V.createElement(`pattern`,{id:d+e,x:u[0]%_[0],y:u[1]%_[1],width:_[0],height:_[1],patternUnits:`userSpaceOnUse`,patternTransform:`translate(-${b[0]},-${b[1]})`},m?V.createElement(JB,{color:f,radius:v/a}):V.createElement(qB,{dimensions:y,color:f,lineWidth:i})),V.createElement(`rect`,{x:`0`,y:`0`,width:`100%`,height:`100%`,fill:`url(#${d+e})`}))}QB.displayName=`Background`;var $B=(0,V.memo)(QB),eV=(e,t)=>({default:({data:n,id:r})=>(0,H.jsxs)(`div`,{className:`group px-4 py-2 rounded-lg shadow-md border relative ${n.isRoot?`bg-blue-50 border-blue-200`:`bg-white border-gray-200`}`,children:[(0,H.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,H.jsxs)(`div`,{className:`text-xs text-gray-500`,children:[`ID: `,r]}),(0,H.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,H.jsx)(`p`,{className:`text-sm flex-grow`,children:n.content}),(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:(0,H.jsx)(_c,{variant:`ghost`,size:`sm`,className:`opacity-0 group-hover:opacity-100 transition-opacity duration-200 h-6 w-6 p-0`,onClick:e=>e.stopPropagation(),children:(0,H.jsx)(au,{className:`h-4 w-4`})})}),(0,H.jsxs)(Zk,{align:`end`,className:`w-[160px]`,children:[(0,H.jsxs)(Qk,{onClick:t=>{t.stopPropagation(),e({id:r,data:n})},children:[(0,H.jsx)(xu,{className:`h-4 w-4 mr-2`}),`编辑`]}),!n.isRoot&&(0,H.jsxs)(Qk,{className:`text-red-600 focus:text-red-700 focus:bg-red-50`,onClick:e=>{e.stopPropagation(),t(r)},children:[(0,H.jsx)(ku,{className:`h-4 w-4 mr-2`}),`删除`]})]})]})]})]}),(0,H.jsx)(`div`,{className:`absolute left-0 top-1/2 w-3 h-3 -ml-1.5 -mt-1.5 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100`}),(0,H.jsx)(`div`,{className:`absolute right-0 top-1/2 w-3 h-3 -mr-1.5 -mt-1.5 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100`})]})});function tV({saveData:e,loadData:t}){let{t:n}=Og(),[r,i]=(0,V.useState)([]),[a,o]=(0,V.useState)([]),[s,c]=(0,V.useState)(null),[l,u]=(0,V.useState)(``),[d,f]=(0,V.useState)(!1),{toast:p}=pd(),m=new Iw(`gpt-4o-mini`),[h,g]=(0,V.useState)(``),[_,v]=(0,V.useState)(!1),[y,b]=(0,V.useState)(``),[x,S]=(0,V.useState)(1);(0,V.useEffect)(()=>{(async()=>{try{let e=await t();e&&(e.apiKey&&u(e.apiKey),e.nodes&&i(e.nodes),e.edges&&o(e.edges))}catch(e){console.error(`Error loading data:`,e),p({title:n(`mindFlow.loadingFailed`),description:n(`mindFlow.loadDataFailed`),variant:`destructive`})}})()},[t,n,p]),(0,V.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({nodes:r,edges:a}),console.log(`Auto saved successfully`)}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[r,a,l,e]);let C=async e=>{if(!s||!l){p({title:n(`mindFlow.error`),description:n(`mindFlow.selectNodeAndApiKey`),variant:`destructive`});return}f(!0);try{let t=`基于以下内容："${s.data.content}"
根据方向提示："${e}"
请生成1个相关的想法或概念。要求：
1. 想法要简洁但有深度
2. 确保与原内容有关联性
3. 严格按照以下JSON格式输出：
{
  "idea": {"content": "想法内容"}
}`,n=await m.generateText(t),{idea:r}=JSON.parse(n),a=(x+1).toString(),c={id:a,type:`default`,position:{x:s.position.x+Math.cos(Math.PI/4)*250,y:s.position.y+Math.sin(Math.PI/4)*250},data:{content:r.content},sourcePosition:Z.Right,targetPosition:Z.Left},l={id:`${s.id}-${a}`,source:s.id,target:a,type:`smoothstep`,animated:!0,markerEnd:{type:uL.ArrowClosed}};i(e=>[...e,c]),o(e=>[...e,l]),S(x+1)}catch(e){console.error(`Error:`,e),p({title:n(`mindFlow.generateFailed`),description:n(`mindFlow.cannotGenerate`),variant:`destructive`})}finally{f(!1)}},w=()=>{if(!h.trim()){p({title:n(`mindFlow.error`),description:n(`mindFlow.enterContent`),variant:`destructive`});return}i([{id:`1`,type:`default`,position:{x:window.innerWidth/2-100,y:window.innerHeight/2-50},data:{content:h,isRoot:!0},sourcePosition:Z.Right,targetPosition:Z.Left}]),g(``)},T=e=>{b(e.data.content),v(!0)},E=()=>{!s||!y.trim()||(i(e=>e.map(e=>e.id===s.id?{...e,data:{...e.data,content:y.trim()}}:e)),v(!1))},D=e=>{window.confirm(n(`mindFlow.confirmDelete`))&&(i(t=>t.filter(t=>t.id!==e)),o(t=>t.filter(t=>t.source!==e&&t.target!==e)))},O=()=>{if(!s||!h.trim()){p({title:n(`mindFlow.error`),description:n(`mindFlow.enterContent`),variant:`destructive`});return}let e=(x+1).toString(),t={id:e,type:`default`,position:{x:s.position.x+Math.cos(Math.PI/4)*250,y:s.position.y+Math.sin(Math.PI/4)*250},data:{content:h},sourcePosition:Z.Right,targetPosition:Z.Left},r={id:`${s.id}-${e}`,source:s.id,target:e,type:`smoothstep`,animated:!0,markerEnd:{type:uL.ArrowClosed}};i(e=>[...e,t]),o(e=>[...e,r]),S(x+1)},k=(0,V.useMemo)(()=>eV(T,D),[T,D]);console.log(`[nodes]`,r,`[edges]`,a,`selectedNode`,s);let A=(0,V.useCallback)(e=>{if(e.source&&e.target){let t={id:`${e.source}-${e.target}`,source:e.source,target:e.target,type:`smoothstep`,animated:!0,markerEnd:{type:uL.ArrowClosed}};o(e=>FL(t,e))}},[]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`h-screen w-full relative`,children:[(0,H.jsxs)(`div`,{className:`absolute top-4 left-4 z-10 w-80 space-y-2`,children:[(0,H.jsx)(fm,{type:`password`,placeholder:`OpenAI API Key`,value:l,onChange:e=>u(e.target.value)}),r.length===0?(0,H.jsxs)(zv,{className:`p-4`,children:[(0,H.jsx)(`p`,{className:`text-sm font-medium mb-2`,children:n(`mindFlow.createCenterTheme`)}),(0,H.jsxs)(`div`,{className:`flex flex-col space-y-2`,children:[(0,H.jsx)(fm,{placeholder:n(`mindFlow.enterMainContent`),value:h,onChange:e=>g(e.target.value),onKeyPress:e=>e.key===`Enter`&&w()}),(0,H.jsx)(_c,{onClick:w,className:`w-full`,children:n(`mindFlow.create`)})]})]}):s&&(0,H.jsxs)(zv,{className:`p-4`,children:[(0,H.jsxs)(`p`,{className:`text-sm font-medium mb-2`,children:[`选中���点: `,s.data.content]}),(0,H.jsxs)(`div`,{className:`flex flex-col space-y-2`,children:[(0,H.jsx)(fm,{placeholder:n(`mindFlow.addNodeContent`),value:h,onChange:e=>g(e.target.value),onKeyPress:e=>e.key===`Enter`&&O()}),(0,H.jsx)(_c,{size:`sm`,onClick:O,className:`w-full`,children:n(`mindFlow.addNode`)}),(0,H.jsx)(`div`,{className:`h-px bg-gray-200 my-2`}),(0,H.jsx)(_c,{size:`sm`,onClick:()=>C(n(`mindFlow.deepAnalysis`)),disabled:d,className:`w-full`,children:n(`mindFlow.deepAnalysis`)}),(0,H.jsx)(_c,{size:`sm`,onClick:()=>C(n(`mindFlow.lateralThinking`)),disabled:d,className:`w-full`,children:n(`mindFlow.lateralThinking`)}),(0,H.jsx)(_c,{size:`sm`,onClick:()=>C(n(`mindFlow.abstractSummary`)),disabled:d,className:`w-full`,children:n(`mindFlow.abstractSummary`)})]})]})]}),(0,H.jsxs)(NB,{nodes:r,edges:a,nodeTypes:k,onNodeClick:(e,t)=>c(t),onPaneClick:()=>c(null),onConnect:A,connectOnClick:!0,fitView:!0,defaultEdgeOptions:{type:`smoothstep`,animated:!0,markerEnd:{type:uL.ArrowClosed}},connectionMode:oL.Loose,snapToGrid:!0,snapGrid:[15,15],fitViewOptions:{padding:.2},minZoom:.5,maxZoom:2,children:[(0,H.jsx)($B,{}),(0,H.jsx)(GB,{})]})]}),(0,H.jsx)(rm,{open:_,onOpenChange:v,children:(0,H.jsxs)(sm,{children:[(0,H.jsx)(cm,{children:(0,H.jsx)(um,{children:`编辑节点内容`})}),(0,H.jsxs)(`div`,{className:`space-y-4 py-4`,children:[(0,H.jsx)(fm,{value:y,onChange:e=>b(e.target.value),placeholder:`输入新的内容...`,autoFocus:!0}),(0,H.jsxs)(`div`,{className:`flex justify-end space-x-2`,children:[(0,H.jsx)(_c,{variant:`outline`,onClick:()=>v(!1),children:`取消`}),(0,H.jsx)(_c,{onClick:E,children:`保存`})]})]})]})})]})}const nV=({uri:e})=>e?(0,H.jsx)(tV,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{nodes:[],edges:[]}}}}):(0,H.jsx)(`div`,{children:`uri is required`}),rV=Lm({initilize(e){e.componentService.register(`mind-flow`,nV),Rv.register({id:`mind-flow`,label:J(`apps.mindFlow`),match:[`.mindflow.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`mind-flow:${t}`,title:`${J(`apps.mindFlow`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`mind-flow`,props:{uri:t}}})}})}});var iV=[{id:`1`,type:`input`,data:{label:`Input Node`},position:{x:250,y:25}},{id:`2`,data:{label:`Default Node`},position:{x:100,y:125}},{id:`3`,type:`output`,data:{label:`Output Node`},position:{x:250,y:250}}],aV=[{id:`e1-2`,source:`1`,target:`2`},{id:`e2-3`,source:`2`,target:`3`}];function oV({saveData:e,loadData:t}){let[n,r,i]=FB(iV),[a,o,s]=IB(aV);(0,V.useEffect)(()=>{(async()=>{try{let e=await t();e&&(e.nodes&&r(e.nodes),e.edges&&o(e.edges))}catch(e){console.error(`Error loading data:`,e)}})()},[t,r,o]),(0,V.useEffect)(()=>{let t=setTimeout(async()=>{try{await e({nodes:n,edges:a}),console.log(`Auto saved successfully`)}catch(e){console.error(`Auto save failed:`,e)}},1e3);return()=>clearTimeout(t)},[n,a,e]);let c=(0,V.useCallback)(e=>o(t=>FL(e,t)),[o]);return(0,H.jsxs)(`div`,{className:`h-screen w-full relative`,children:[(0,H.jsx)(`div`,{className:`absolute top-4 left-4 z-10`,children:(0,H.jsx)(zv,{className:`p-4`,children:(0,H.jsx)(_c,{onClick:()=>{let e={id:`${n.length+1}`,data:{label:`Node ${n.length+1}`},position:{x:Math.random()*500,y:Math.random()*500}};return r(t=>[...t,e]),e},children:`Add Node`})})}),(0,H.jsxs)(NB,{nodes:n,edges:a,onNodesChange:i,onEdgesChange:s,onConnect:c,fitView:!0,children:[(0,H.jsx)($B,{}),(0,H.jsx)(GB,{})]})]})}const sV=({uri:e})=>e?(0,H.jsx)(oV,{saveData:async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(t)),{create:!0,overwrite:!0})},loadData:async()=>{try{let t=await q.fs.readFile(rh.parse(e));return JSON.parse(new TextDecoder().decode(t))}catch{return{nodes:[],edges:[]}}}}):(0,H.jsx)(`div`,{children:`uri is required`}),cV=Lm({initilize(e){e.componentService.register(`flow-demo`,sV),Rv.register({id:`flow-demo`,label:`Flow Demo`,match:[`.flowdemo.json`],priority:100,init:t=>{e.layoutService.pageBox.addPage({id:`flow-demo:${t}`,title:`Flow Demo:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`flow-demo`,props:{uri:t}}})}})}});let lV=function(e){return e.IDLE=`idle`,e.DIRTY=`dirty`,e.SAVING=`saving`,e.SAVED=`saved`,e.ERROR=`error`,e}({});var uV=Array.isArray,dV=`[object AsyncFunction]`,fV=`[object Function]`,pV=`[object GeneratorFunction]`,mV=`[object Proxy]`;function hV(e){if(!an(e))return!1;var t=An(e);return t==fV||t==pV||t==dV||t==mV}var gV=hV,_V=cn[`__core-js_shared__`],vV=function(){var e=/[^.]+$/.exec(_V&&_V.keys&&_V.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function yV(e){return!!vV&&vV in e}var bV=yV,xV=Function.prototype.toString;function SV(e){if(e!=null){try{return xV.call(e)}catch{}try{return e+``}catch{}}return``}var CV=SV,wV=/[\\^$.*+?()[\]{}|]/g,TV=/^\[object .+?Constructor\]$/,EV=Function.prototype,DV=Object.prototype,OV=EV.toString,kV=DV.hasOwnProperty,AV=RegExp(`^`+OV.call(kV).replace(wV,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function jV(e){return!an(e)||bV(e)?!1:(gV(e)?AV:TV).test(CV(e))}var MV=jV;function NV(e,t){return e?.[t]}var PV=NV;function FV(e,t){var n=PV(e,t);return MV(n)?n:void 0}var IV=FV,LV=IV(cn,`WeakMap`),RV=9007199254740991,zV=/^(?:0|[1-9]\d*)$/;function BV(e,t){var n=typeof e;return t??=RV,!!t&&(n==`number`||n!=`symbol`&&zV.test(e))&&e>-1&&e%1==0&&e<t}var VV=BV;function HV(e,t){return e===t||e!==e&&t!==t}var UV=HV,WV=9007199254740991;function GV(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=WV}var KV=GV;function qV(e){return e!=null&&KV(e.length)&&!gV(e)}var JV=qV,YV=Object.prototype;function XV(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||YV)}var ZV=XV;function QV(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var $V=QV,eH=`[object Arguments]`;function tH(e){return Mn(e)&&An(e)==eH}var nH=tH,rH=Object.prototype,iH=rH.hasOwnProperty,aH=rH.propertyIsEnumerable,oH=nH(function(){return arguments}())?nH:function(e){return Mn(e)&&iH.call(e,`callee`)&&!aH.call(e,`callee`)};function sH(){return!1}var cH=sH,lH=typeof exports==`object`&&exports&&!exports.nodeType&&exports,uH=lH&&typeof module==`object`&&module&&!module.nodeType&&module,dH=uH&&uH.exports===lH?cn.Buffer:void 0,fH=(dH?dH.isBuffer:void 0)||cH,pH=`[object Arguments]`,mH=`[object Array]`,hH=`[object Boolean]`,gH=`[object Date]`,_H=`[object Error]`,vH=`[object Function]`,yH=`[object Map]`,bH=`[object Number]`,xH=`[object Object]`,SH=`[object RegExp]`,CH=`[object Set]`,wH=`[object String]`,TH=`[object WeakMap]`,EH=`[object ArrayBuffer]`,DH=`[object DataView]`,OH=`[object Float32Array]`,kH=`[object Float64Array]`,AH=`[object Int8Array]`,jH=`[object Int16Array]`,MH=`[object Int32Array]`,NH=`[object Uint8Array]`,PH=`[object Uint8ClampedArray]`,FH=`[object Uint16Array]`,IH=`[object Uint32Array]`,LH={};LH[OH]=LH[kH]=LH[AH]=LH[jH]=LH[MH]=LH[NH]=LH[PH]=LH[FH]=LH[IH]=!0,LH[pH]=LH[mH]=LH[EH]=LH[hH]=LH[DH]=LH[gH]=LH[_H]=LH[vH]=LH[yH]=LH[bH]=LH[xH]=LH[SH]=LH[CH]=LH[wH]=LH[TH]=!1;function RH(e){return Mn(e)&&KV(e.length)&&!!LH[An(e)]}var zH=RH;function BH(e){return function(t){return e(t)}}var VH=BH,HH=typeof exports==`object`&&exports&&!exports.nodeType&&exports,UH=HH&&typeof module==`object`&&module&&!module.nodeType&&module,WH=UH&&UH.exports===HH&&on.process,GH=function(){try{return UH&&UH.require&&UH.require(`util`).types||WH&&WH.binding&&WH.binding(`util`)}catch{}}(),KH=GH&&GH.isTypedArray,qH=KH?VH(KH):zH,JH=Object.prototype.hasOwnProperty;function YH(e,t){var n=uV(e),r=!n&&oH(e),i=!n&&!r&&fH(e),a=!n&&!r&&!i&&qH(e),o=n||r||i||a,s=o?$V(e.length,String):[],c=s.length;for(var l in e)(t||JH.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||VV(l,c)))&&s.push(l);return s}var XH=YH;function ZH(e,t){return function(n){return e(t(n))}}var QH=ZH,$H=QH(Object.keys,Object),eU=Object.prototype.hasOwnProperty;function tU(e){if(!ZV(e))return $H(e);var t=[];for(var n in Object(e))eU.call(e,n)&&n!=`constructor`&&t.push(n);return t}var nU=tU;function rU(e){return JV(e)?XH(e):nU(e)}var iU=rU,aU=IV(Object,`create`);function oU(){this.__data__=aU?aU(null):{},this.size=0}var sU=oU;function cU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lU=cU,uU=`__lodash_hash_undefined__`,dU=Object.prototype.hasOwnProperty;function fU(e){var t=this.__data__;if(aU){var n=t[e];return n===uU?void 0:n}return dU.call(t,e)?t[e]:void 0}var pU=fU,mU=Object.prototype.hasOwnProperty;function hU(e){var t=this.__data__;return aU?t[e]!==void 0:mU.call(t,e)}var gU=hU,_U=`__lodash_hash_undefined__`;function vU(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=aU&&t===void 0?_U:t,this}var yU=vU;function bU(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bU.prototype.clear=sU,bU.prototype.delete=lU,bU.prototype.get=pU,bU.prototype.has=gU,bU.prototype.set=yU;var xU=bU;function SU(){this.__data__=[],this.size=0}var CU=SU;function wU(e,t){for(var n=e.length;n--;)if(UV(e[n][0],t))return n;return-1}var TU=wU,EU=Array.prototype.splice;function DU(e){var t=this.__data__,n=TU(t,e);return n<0?!1:(n==t.length-1?t.pop():EU.call(t,n,1),--this.size,!0)}var OU=DU;function kU(e){var t=this.__data__,n=TU(t,e);return n<0?void 0:t[n][1]}var AU=kU;function jU(e){return TU(this.__data__,e)>-1}var MU=jU;function NU(e,t){var n=this.__data__,r=TU(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var PU=NU;function FU(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}FU.prototype.clear=CU,FU.prototype.delete=OU,FU.prototype.get=AU,FU.prototype.has=MU,FU.prototype.set=PU;var IU=FU,LU=IV(cn,`Map`);function RU(){this.size=0,this.__data__={hash:new xU,map:new(LU||IU),string:new xU}}var zU=RU;function BU(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var VU=BU;function HU(e,t){var n=e.__data__;return VU(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var UU=HU;function WU(e){var t=UU(this,e).delete(e);return this.size-=t?1:0,t}var GU=WU;function KU(e){return UU(this,e).get(e)}var qU=KU;function JU(e){return UU(this,e).has(e)}var YU=JU;function XU(e,t){var n=UU(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ZU=XU;function QU(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}QU.prototype.clear=zU,QU.prototype.delete=GU,QU.prototype.get=qU,QU.prototype.has=YU,QU.prototype.set=ZU;var $U=QU;function eW(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var tW=eW;function nW(){this.__data__=new IU,this.size=0}var rW=nW;function iW(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var aW=iW;function oW(e){return this.__data__.get(e)}var sW=oW;function cW(e){return this.__data__.has(e)}var lW=cW,uW=200;function dW(e,t){var n=this.__data__;if(n instanceof IU){var r=n.__data__;if(!LU||r.length<uW-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $U(r)}return n.set(e,t),this.size=n.size,this}var fW=dW;function pW(e){this.size=(this.__data__=new IU(e)).size}pW.prototype.clear=rW,pW.prototype.delete=aW,pW.prototype.get=sW,pW.prototype.has=lW,pW.prototype.set=fW;var mW=pW;function hW(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var gW=hW;function _W(){return[]}var vW=_W,yW=Object.prototype.propertyIsEnumerable,bW=Object.getOwnPropertySymbols,xW=bW?function(e){return e==null?[]:(e=Object(e),gW(bW(e),function(t){return yW.call(e,t)}))}:vW;function SW(e,t,n){var r=t(e);return uV(e)?r:tW(r,n(e))}var CW=SW;function wW(e){return CW(e,iU,xW)}var TW=wW,EW=IV(cn,`DataView`),DW=IV(cn,`Promise`),OW=IV(cn,`Set`),kW=`[object Map]`,AW=`[object Object]`,jW=`[object Promise]`,MW=`[object Set]`,NW=`[object WeakMap]`,PW=`[object DataView]`,FW=CV(EW),IW=CV(LU),LW=CV(DW),RW=CV(OW),zW=CV(LV),BW=An;(EW&&BW(new EW(new ArrayBuffer(1)))!=PW||LU&&BW(new LU)!=kW||DW&&BW(DW.resolve())!=jW||OW&&BW(new OW)!=MW||LV&&BW(new LV)!=NW)&&(BW=function(e){var t=An(e),n=t==AW?e.constructor:void 0,r=n?CV(n):``;if(r)switch(r){case FW:return PW;case IW:return kW;case LW:return jW;case RW:return MW;case zW:return NW}return t});var VW=BW,HW=cn.Uint8Array,UW=`__lodash_hash_undefined__`;function WW(e){return this.__data__.set(e,UW),this}var GW=WW;function KW(e){return this.__data__.has(e)}var qW=KW;function JW(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new $U;++t<n;)this.add(e[t])}JW.prototype.add=JW.prototype.push=GW,JW.prototype.has=qW;var YW=JW;function XW(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var ZW=XW;function QW(e,t){return e.has(t)}var $W=QW,eG=1,tG=2;function nG(e,t,n,r,i,a){var o=n&eG,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&tG?new YW:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!ZW(t,function(e,t){if(!$W(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var rG=nG;function iG(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var aG=iG;function oG(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var sG=oG,cG=1,lG=2,uG=`[object Boolean]`,dG=`[object Date]`,fG=`[object Error]`,pG=`[object Map]`,mG=`[object Number]`,hG=`[object RegExp]`,gG=`[object Set]`,_G=`[object String]`,vG=`[object Symbol]`,yG=`[object ArrayBuffer]`,bG=`[object DataView]`,xG=gn?gn.prototype:void 0,SG=xG?xG.valueOf:void 0;function CG(e,t,n,r,i,a,o){switch(n){case bG:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case yG:return!(e.byteLength!=t.byteLength||!a(new HW(e),new HW(t)));case uG:case dG:case mG:return UV(+e,+t);case fG:return e.name==t.name&&e.message==t.message;case hG:case _G:return e==t+``;case pG:var s=aG;case gG:var c=r&cG;if(s||=sG,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=lG,o.set(e,t);var u=rG(s(e),s(t),r,i,a,o);return o.delete(e),u;case vG:if(SG)return SG.call(e)==SG.call(t)}return!1}var wG=CG,TG=1,EG=Object.prototype.hasOwnProperty;function DG(e,t,n,r,i,a){var o=n&TG,s=TW(e),c=s.length;if(c!=TW(t).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in t:EG.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=o;++l<c;){u=s[l];var h=e[u],g=t[u];if(r)var _=o?r(g,h,u,t,e,a):r(h,g,u,e,t,a);if(!(_===void 0?h===g||i(h,g,n,r,a):_)){p=!1;break}m||=u==`constructor`}if(p&&!m){var v=e.constructor,y=t.constructor;v!=y&&`constructor`in e&&`constructor`in t&&!(typeof v==`function`&&v instanceof v&&typeof y==`function`&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p}var OG=DG,kG=1,AG=`[object Arguments]`,jG=`[object Array]`,MG=`[object Object]`,NG=Object.prototype.hasOwnProperty;function PG(e,t,n,r,i,a){var o=uV(e),s=uV(t),c=o?jG:VW(e),l=s?jG:VW(t);c=c==AG?MG:c,l=l==AG?MG:l;var u=c==MG,d=l==MG,f=c==l;if(f&&fH(e)){if(!fH(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new mW,o||qH(e)?rG(e,t,n,r,i,a):wG(e,t,c,n,r,i,a);if(!(n&kG)){var p=u&&NG.call(e,`__wrapped__`),m=d&&NG.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new mW,i(h,g,n,r,a)}}return f?(a||=new mW,OG(e,t,n,r,i,a)):!1}var FG=PG;function IG(e,t,n,r,i){return e===t?!0:e==null||t==null||!Mn(e)&&!Mn(t)?e!==e&&t!==t:FG(e,t,n,r,IG,i)}var LG=IG;function RG(e,t){return LG(e,t)}var zG=RG;const BG=$t((e,t)=>({contexts:[],addContexts:t=>{e(e=>{if(!t.length)return e;let n=new Map(e.contexts.map(e=>[e.id,e])),r=!1;return t.forEach(e=>{let t={id:e.id,description:e.description,value:e.value},i=n.get(e.id);(!i||!zG(i,t))&&(n.set(e.id,t),r=!0)}),r?{contexts:Array.from(n.values())}:e})},removeContexts:t=>{e(e=>{if(!t.length)return e;let n=new Set(t),r=e.contexts.filter(e=>!n.has(e.id));return r.length===e.contexts.length?e:{contexts:r}})},getAllContexts:()=>t().contexts.map(e=>({description:e.description,value:e.value})),clearAllContexts:()=>{e({contexts:[]})}})),VG=new class{addContexts=e=>{BG.getState().addContexts(e)};removeContexts=e=>{BG.getState().removeContexts(e)};getAllContexts=()=>BG.getState().getAllContexts();clearAllContexts=()=>{BG.getState().clearAllContexts()}},HG=e=>{let t=(0,V.useMemo)(()=>new xo(e),[]);return(0,V.useEffect)(()=>{t.getValue()!==e&&t.next(e)},[e,t]),t};function UG(e){let t=HG(e),n=(0,V.useRef)([]);j_(()=>t.pipe(Ts((e,t)=>zG(e,t))),e=>{n.current.length>0&&VG.removeContexts(n.current);let t=e.map(e=>({...e,id:Rt()}));VG.addContexts(t),n.current=t.map(e=>e.id)}),(0,V.useEffect)(()=>()=>{n.current.length>0&&(VG.removeContexts(n.current),n.current=[])},[])}function WG(e){let[t,n]=(0,V.useState)([]);(0,V.useEffect)(()=>{let t=e.pipe(Ss(e=>e!==null&&Array.isArray(e.elements)),ws(500),os(e=>{let t=(e.elements??[]).filter(e=>!e||typeof e!=`object`?!1:!e.isDeleted);return t.length?[{description:`current_excalidraw_elements`,value:JSON.stringify(t)}]:[]}),Ts((e,t)=>JSON.stringify(e)===JSON.stringify(t))).subscribe(e=>{n(e)});return()=>{t.unsubscribe()}},[e]),UG(t)}function GG(e){let t=(0,V.useRef)(e);t.current=e;let n=(0,V.useRef)();return n.current||=((...e)=>t.current(...e)),n.current}function KG(e){return JSON.stringify({elements:e?.elements,files:e?.files})}const qG=e=>{let[t,n]=(0,V.useState)(null),[r,i]=(0,V.useState)(!1),a=GG(async()=>{try{let t=await q.fs.readFile(rh.parse(e)),n=JSON.parse(new TextDecoder().decode(t));return!n||typeof n!=`object`?null:(console.log(`loadData`,{parsed:n}),JG(n))}catch{return console.error(`loadData error`),null}});return(0,V.useEffect)(()=>{let e=!1;return i(!0),(async()=>{let t=await a();e||(n(t),i(!1))})(),()=>{e=!0}},[e,a]),{scene:t,loading:r}},JG=e=>{let t=(e.elements??[]).filter(e=>!e||typeof e!=`object`?!1:!e.isDeleted);return{elements:t.length>0?t:void 0,files:e.files,appState:e.appState?{zoom:e.appState.zoom}:void 0}};var YG=(0,V.lazy)(async()=>({default:(await oe(()=>import(`./excalidraw-ai-canvas-C9W67411.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))).ExcalidrawAICanvas}));const XG=({uri:e})=>{let{t}=Og(),[n,r]=(0,V.useState)(lV.IDLE),i=(0,V.useMemo)(()=>new xo(null),[]),{scene:a,loading:o}=qG(e);(0,V.useEffect)(()=>{a&&!o&&i.next(a)},[a,o,i]);let s=GG(async t=>{let n=JG(t);await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(JSON.stringify(n)),{create:!0,overwrite:!0})});(0,V.useEffect)(()=>{let e=i.pipe(Ss(e=>e!==null&&e.elements!==void 0),ws(1e3),Ts((e,t)=>KG(e)===KG(t)),Ms(1)).subscribe(async e=>{try{r(lV.SAVING),await s(e),r(lV.SAVED)}catch(e){console.error(`Auto save excalidraw data failed:`,e),r(lV.ERROR)}});return()=>{e.unsubscribe()}},[i,s]);let c=GG(e=>{i.next(e),KG(e)!==KG(i.getValue())&&r(lV.DIRTY)}),l=GG(async()=>{let e=i.getValue();if(e)try{r(lV.SAVING),await s(e),r(lV.SAVED)}catch(e){console.error(`Manual save excalidraw data failed:`,e),r(lV.ERROR)}});return(0,V.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&(e.key===`s`||e.key===`S`)&&(e.preventDefault(),l())};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[l]),WG(i),e?o?(0,H.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`excalidraw.loading`)}):(0,H.jsx)(V.Suspense,{fallback:(0,H.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`excalidraw.loading`)}),children:(0,H.jsx)(YG,{initialValue:a,onChange:c,showSaveStatus:!0,saveStatus:n,onSaveClick:l},e)}):(0,H.jsx)(`div`,{children:t(`excalidraw.uriRequired`)})},ZG=Lm({initilize(e){e.componentService.register(`excalidraw`,XG),Rv.register({id:`excalidraw`,label:J(`apps.excalidraw`),showInTreeMenu:!0,icon:`AiOutlineFileAdd`,match:[`.excalidraw.json`,`.excalidraw`],priority:100,templates:[{id:`new-excalidraw`,label:J(`excalidraw.newFile`),defaultFileName:`Untitled.excalidraw.json`,initialContent:`{}`,icon:`AiOutlineFileAdd`}],init:t=>{e.layoutService.pageBox.addPage({id:`excalidraw:${t}`,title:`${J(`apps.excalidraw`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`excalidraw`,props:{uri:t}}})}})}});let QG=function(e){return e.IDLE=`idle`,e.DIRTY=`dirty`,e.SAVING=`saving`,e.SAVED=`saved`,e.ERROR=`error`,e}({});const $G=e=>{let[t,n]=(0,V.useState)(null),[r,i]=(0,V.useState)(!1),a=GG(async()=>{try{let t=await q.fs.readFile(rh.parse(e));return new TextDecoder().decode(t)||`<mxfile><diagram></diagram></mxfile>`}catch{return`<mxfile><diagram></diagram></mxfile>`}});return(0,V.useEffect)(()=>{let e=!1;return i(!0),(async()=>{let t=await a();e||(n(t),i(!1))})(),()=>{e=!0}},[e,a]),{xml:t,loading:r}};var eK=new class{currentHandle=null;register(e){this.currentHandle=e}unregister(e){this.currentHandle===e&&(this.currentHandle=null)}getCurrentHandle(){return this.currentHandle}};function tK(e){eK.register(e)}function nK(e){eK.unregister(e)}function rK(){return eK.getCurrentHandle()}var iK=`https://embed.diagrams.net`;function aK({xmlRef:e,iframeRef:t,onChange:n}){(0,V.useEffect)(()=>{let n={getXml(){return e.current},updateXml(n){let r=t.current;r&&(e.current=n,r.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:n}),iK))},getIframe(){return t.current}};return tK(n),()=>nK(n)},[GG(n),e,t])}var oK=`https://embed.diagrams.net`,sK=`${oK}/?embed=1&ui=atlas&spin=1&proto=json&saveAndExit=0`;const cK=({initialXml:e,onChange:t,onSave:n})=>{let r=(0,V.useRef)(null),i=(0,V.useRef)(e||`<mxfile><diagram></diagram></mxfile>`);(0,V.useEffect)(()=>{e&&(i.current=e)},[e]),aK({xmlRef:i,iframeRef:r,onChange:t});let a=GG(t),o=GG(n||(()=>{})),s=GG(e=>{if(e.origin!==oK)return;let t=r.current;if(t){if(e.data===`ready`)i.current&&t.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:i.current}),oK);else if(typeof e.data==`string`)try{let n=JSON.parse(e.data);n.event===`change`?n.xml&&(i.current=n.xml,a(n.xml)):n.event===`save`?n.xml&&(i.current=n.xml,o(n.xml)):n.event===`init`&&i.current&&t.contentWindow?.postMessage(JSON.stringify({action:`load`,xml:i.current}),oK)}catch(e){console.error(`Failed to parse draw.io message:`,e)}}});return(0,V.useEffect)(()=>(window.addEventListener(`message`,s),()=>window.removeEventListener(`message`,s)),[s]),(0,H.jsx)(`iframe`,{ref:r,src:i.current?`${sK}&xml=${encodeURIComponent(i.current)}`:sK,className:`w-full h-full border-0`,title:`Draw.io Editor`})},lK=({xml:e,onChange:t,onSave:n,saveStatus:r})=>{let{t:i}=Og();return(0,H.jsxs)(`div`,{className:`h-full w-full relative`,children:[(0,H.jsx)(`div`,{className:`absolute top-4 right-4 z-10`,children:(0,H.jsx)(Ll,{children:(0,H.jsxs)(Rl,{children:[(0,H.jsx)(zl,{asChild:!0,children:(0,H.jsx)(`div`,{className:`flex items-center justify-center`,children:(()=>r===QG.SAVING?(0,H.jsx)(K,{className:`h-4 w-4 animate-spin`}):r===QG.DIRTY?(0,H.jsx)(eu,{className:`h-4 w-4`}):r===QG.ERROR?(0,H.jsx)(Ql,{className:`h-4 w-4 text-destructive`}):(0,H.jsx)($l,{className:`h-4 w-4 text-green-600`}))()})}),(0,H.jsx)(Bl,{children:(()=>r===QG.SAVING?i(`drawio.saving`):r===QG.DIRTY?i(`drawio.edited`):r===QG.ERROR?i(`drawio.saveError`):i(`drawio.saved`))()})]})})}),(0,H.jsx)(cK,{initialXml:e,onChange:t,onSave:n})]})};function uK(e){return e??``}const dK=({uri:e})=>{let{t}=Og(),[n,r]=(0,V.useState)(QG.IDLE),i=(0,V.useMemo)(()=>new xo(null),[]),{xml:a,loading:o}=$G(e);(0,V.useEffect)(()=>{a&&!o&&i.next(a)},[a,o,i]);let s=GG(async t=>{await q.fs.writeFile(rh.parse(e),new TextEncoder().encode(t),{create:!0,overwrite:!0})});(0,V.useEffect)(()=>{let e=i.pipe(Ss(e=>e!==null&&e!==``),ws(1e3),Ts((e,t)=>uK(e)===uK(t)),Ms(1)).subscribe(async e=>{try{r(QG.SAVING),await s(e),r(QG.SAVED)}catch(e){console.error(`Auto save drawio data failed:`,e),r(QG.ERROR)}});return()=>{e.unsubscribe()}},[i,s]);let c=GG(e=>{i.next(e),uK(e)!==uK(i.getValue())&&r(QG.DIRTY)}),l=GG(async e=>{try{r(QG.SAVING),await s(e),r(QG.SAVED)}catch(e){console.error(`Save drawio data failed:`,e),r(QG.ERROR)}});return e?o?(0,H.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:t(`drawio.loading`)}):(0,H.jsx)(lK,{xml:a,onChange:c,onSave:l,saveStatus:n}):(0,H.jsx)(`div`,{children:t(`drawio.uriRequired`)})},fK=Lm({initilize(e){e.componentService.register(`drawio`,dK),Rv.register({id:`drawio`,label:J(`apps.drawio`),showInTreeMenu:!0,icon:`AiOutlineFileAdd`,match:[`.drawio`],priority:100,templates:[{id:`new-drawio`,label:J(`drawio.newFile`),defaultFileName:`Untitled.drawio`,initialContent:`<mxfile><diagram></diagram></mxfile>`,icon:`AiOutlineFileAdd`}],init:t=>{e.layoutService.pageBox.addPage({id:`drawio:${t}`,title:`${J(`apps.drawio`)}:${(e=>e.split(`/`).pop()??`unknown`)(t)}`,viewData:{type:`drawio`,props:{uri:t}}})}})}}),pK=Lm({initilize(e){e.pluginService.use([zw,IE,ZE,sA,uA,FA,rV,cV,ZG,fK])}}),mK=zt,hK=Bt,gK=e=>{let[t,n]=(0,V.useState)(null),[r,i]=(0,V.useState)(!0),[a,o]=(0,V.useState)(null);return(0,V.useEffect)(()=>{e().then(e=>n(e)).catch(e=>o(e)).finally(()=>i(!1))},[]),[{data:t,loading:r,error:a},{refetch:()=>{i(!0),e().then(e=>n(e)).catch(e=>o(e)).finally(()=>i(!1))},mutate:e=>{n(e)}}]};var _K=V.lazy(()=>oe(()=>import(`./custom-monaco-editor-Bszab1L4.js`),__vite__mapDeps([14,1,2,3,4,5,15,16])).then(e=>({default:e.CustomMonacoEditor}))),vK={js:`javascript`,ts:`typescript`,json:`json`,html:`html`,css:`css`,md:`markdown`,scss:`scss`,less:`less`,jsx:`javascript`,tsx:`typescript`,yaml:`yaml`,yml:`yaml`,xml:`xml`,ini:`ini`,conf:`ini`,java:`java`,cpp:`cpp`,cxx:`cpp`,cc:`cpp`,hpp:`cpp`,hxx:`cpp`,py:`python`,sh:`shell`,bash:`shell`,zsh:`shell`,bat:`bat`,ps1:`powershell`,psm1:`powershell`,sql:`sql`,php:`php`,go:`go`,rb:`ruby`,lua:`lua`,pl:`perl`,rs:`rust`,cs:`csharp`,fs:`fsharp`,swift:`swift`,kt:`kotlin`,scala:`scala`,perl:`perl`,coffee:`coffeescript`,toml:`plaintext`,csv:`plaintext`,properties:`plaintext`,log:`plaintext`};const yK=({uri:e})=>{let{t}=Og();e=e.replace(`::`,`:/xxx.com`);let[{data:n,loading:r}]=gK(()=>q.fs.readFile(rh.parse(e)).then(e=>new TextDecoder().decode(e))),i=e.split(`.`).pop();(0,V.useEffect)(()=>{!r&&n!==void 0&&q.eventBus.emit(Ml.FileLoaded,{uri:e})},[r,n,e]);let a=V.useRef(n||null),o=n=>{q.fs.writeFile(rh.parse(e),new TextEncoder().encode(n),{overwrite:!0,create:!1}).then(()=>{q.notificationService.success(t(`file.saveSuccess`))})};return(0,H.jsx)(V.Suspense,{fallback:(0,H.jsx)(`div`,{children:t(`file.loadingEditor`)}),children:(0,H.jsx)(_K,{value:n||``,language:i&&vK[i]||`txt`,onChange:e=>{a.current=e},keyBindings:[{key:mK.CtrlCmd|hK.KeyS,action:()=>{a.current!==null&&o(a.current)}}]})})},bK=`ada.adb.ads.applescript.as.asc.ascii.ascx.asm.asmx.asp.aspx.atom.au3.awk.bas.bash.bashrc.bat.bbcolors.bcp.bdsgroup.bdsproj.bib.bowerrc.c.cbl.cc.cfc.cfg.cfm.cfml.cgi.cjs.clj.cljs.cls.cmake.cmd.cnf.cob.code-snippets.coffee.coffeekup.conf.cp.cpp.cpt.cpy.crt.cs.csh.cson.csproj.csr.css.csslintrc.csv.ctl.curlrc.cxx.d.dart.dfm.diff.dof.dpk.dpr.dproj.dtd.eco.editorconfig.ejs.el.elm.emacs.eml.ent.erb.erl.eslintignore.eslintrc.ex.exs.f.f03.f77.f90.f95.fish.for.fpp.frm.fs.fsproj.fsx.ftn.gemrc.gemspec.gitattributes.gitconfig.gitignore.gitkeep.gitmodules.go.gpp.gradle.graphql.groovy.groupproj.grunit.gtmpl.gvimrc.h.haml.hbs.hgignore.hh.hpp.hrl.hs.hta.htaccess.htc.htm.html.htpasswd.hxx.iced.iml.inc.inf.info.ini.ino.int.irbrc.itcl.itermcolors.itk.jade.java.jhtm.jhtml.js.jscsrc.jshintignore.jshintrc.json.json5.jsonld.jsp.jspx.jsx.ksh.less.lhs.lisp.log.ls.lsp.lua.m.m4.mak.map.markdown.master.md.mdown.mdwn.mdx.metadata.mht.mhtml.mjs.mk.mkd.mkdn.mkdown.ml.mli.mm.mxml.nfm.nfo.noon.npmignore.npmrc.nuspec.nvmrc.ops.pas.pasm.patch.pbxproj.pch.pem.pg.php.php3.php4.php5.phpt.phtml.pir.pl.pm.pmc.pod.pot.prettierrc.properties.props.pt.pug.purs.py.pyx.r.rake.rb.rbw.rc.rdoc.rdoc_options.resx.rexx.rhtml.rjs.rlib.ron.rs.rss.rst.rtf.rvmrc.rxml.s.sass.scala.scm.scss.seestyle.sh.shtml.sln.sls.spec.sql.sqlite.sqlproj.srt.ss.sss.st.strings.sty.styl.stylus.sub.sublime-build.sublime-commands.sublime-completions.sublime-keymap.sublime-macro.sublime-menu.sublime-project.sublime-settings.sublime-workspace.sv.svc.svg.swift.t.tcl.tcsh.terminal.tex.text.textile.tg.tk.tmLanguage.tmpl.tmTheme.tpl.ts.tsv.tsx.tt.tt2.ttml.twig.toml.txt.v.vb.vbproj.vbs.vcproj.vcxproj.vh.vhd.vhdl.vim.viminfo.vimrc.vm.vue.webapp.webmanifest.wsc.x-php.xaml.xht.xhtml.xml.xs.xsd.xsl.xslt.y.yaml.yml.zsh.zshrc`.split(`.`),xK=`LICENSE,LICENSE.txt,LICENSE.md,README,README.txt,Makefile,Dockerfile,.dockerignore,.env,.env.local,.env.development,.env.production,.env.test,CHANGELOG,CHANGELOG.txt,CHANGELOG.md,CONTRIBUTING,CONTRIBUTING.txt,CONTRIBUTING.md,AUTHORS,AUTHORS.txt,NOTICE,NOTICE.txt,COPYING,COPYING.txt,.gitattributes,.gitignore,.gitmodules,.editorconfig,.prettierrc,.prettierignore,.eslintrc,.eslintignore,.npmignore,.npmrc,.nvmrc,.bashrc,.zshrc,.vimrc,.gvimrc`.split(`,`),SK=({xbook:e,pageId:t,uri:n,viewType:r,title:i,viewProps:a})=>{let o=e.layoutService.pageBox;if((o.getPageList?.()||[]).find(e=>e.id===t)){o.showPage(t);return}o.addPage({id:t,title:i??n,status:`loading`,viewData:{type:r,props:a??{uri:n}}}),e.eventBus.emit(Ml.FileLoading,{uri:n})};var CK=Lm({addComponents(e){return{"text-file-view":yK}},initilize(e){Rv.register({id:`text-file-view`,label:`Monaco Editor`,icon:`AiOutlineCodeEditor`,showInTreeMenu:!0,priority:-20,match:[...bK.map(e=>`.${e}`),...xK],init:t=>{SK({xbook:e,pageId:`text-file-view:${t}`,uri:t,viewType:`text-file-view`})}});let t=(t,n)=>{(e.layoutService.pageBox.getPageList?.()||[]).filter(e=>e.viewData?.props?.uri===t).forEach(t=>{e.layoutService.pageBox.updatePage({id:t.id,status:n})})};e.eventBus.on(Ml.FileLoaded,({uri:e})=>{t(e,void 0)})}}),wK=`::`,TK=e=>{let[t,...n]=e.split(wK);return{spaceId:t,path:n.join(wK)}};const EK=(()=>({service:{open:async(e,t)=>oh.getUri(e,t).toString(),read:async e=>{let t=/:\/\//.test(e)?oh.parseUri(e):oh.getUri(...Object.values(TK(e))),n=await q.fs.readFile(t);return new TextDecoder().decode(n)},write:async(e,t)=>{let n=/:\/\//.test(e)?oh.parseUri(e):oh.getUri(...Object.values(TK(e))),r=new TextEncoder().encode(t);return await q.fs.writeFile(n,r,{overwrite:!0,create:!0}),!0}},generateFileId:(e,t)=>`${e}${wK}${t}`,isRootPath:e=>e===`/`||e===`.`||e===``}))();function DK(e,t){let n=t?.autosave??!1,r=t?.debounceMs??500,[i,a]=(0,V.useState)(``),[o,s]=(0,V.useState)(``),[c,l]=(0,V.useState)(!0),[u,d]=(0,V.useState)(!1),[f,p]=(0,V.useState)(null),m=(0,V.useRef)(null),h=(0,V.useRef)(!1),g=i!==o;(0,V.useEffect)(()=>{if(c)return;let t=h.current;h.current=g,g&&!t?q.eventBus.emit(Ml.FileDirty,{uri:e}):!g&&t&&q.eventBus.emit(Ml.FileClean,{uri:e})},[g,c,e]),(0,V.useEffect)(()=>{let t=!1;return l(!0),EK.service.read(e).then(n=>{t||(a(n),s(n),h.current=!1,l(!1),q.eventBus.emit(Ml.FileLoaded,{uri:e}))}).catch(n=>{t||(p(String(n?.message||n)),l(!1),q.eventBus.emit(Ml.FileLoaded,{uri:e}))}),()=>{t=!0}},[e]);let _=(0,V.useCallback)(async t=>{let n=t===void 0?i:t;d(!0);try{await EK.service.write(e,n),s(n),h.current=!1,q.eventBus.emit(Ml.FileSaved),q.eventBus.emit(Ml.FileClean,{uri:e})}catch(e){p(String(e?.message||e))}finally{d(!1)}},[e,i]),v=(0,V.useCallback)(e=>{a(e),n&&(m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_()},r))},[n,r,_]);return(0,V.useEffect)(()=>()=>{m.current&&window.clearTimeout(m.current)},[]),{content:i,setContent:v,flush:_,loading:c,saving:u,error:f,isDirty:g}}var OK=(0,V.lazy)(async()=>({default:(await oe(()=>import(`./es-DtRtD8je.js`),__vite__mapDeps([17,1,2,3,4,5,8,9,7,10,11,12]))).ZenmarkEditor}));const kK=e=>{let{t}=Og(),{uri:n}=e,{content:r,setContent:i,loading:a,flush:o}=DK(n,{autosave:!1}),s=(0,V.useRef)(null),[c,l]=(0,V.useState)(null);return(0,V.useEffect)(()=>{let e=!1;return oe(()=>import(`./es-DtRtD8je.js`),__vite__mapDeps([17,1,2,3,4,5,8,9,7,10,11,12])).then(t=>{e||l({KeyMod:t.KeyMod,KeyCode:t.KeyCode,matchesKeybinding:t.matchesKeybinding})}).catch(e=>{console.error(`Failed to load zenmark-editor keybindings`,e)}),()=>{e=!0}},[]),(0,V.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&(e.key===`s`||e.key===`S`)&&!e.shiftKey&&s.current?.contains(document.activeElement)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o())};return document.addEventListener(`keydown`,e,!0),()=>{document.removeEventListener(`keydown`,e,!0)}},[o]),a?(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 h-full`,children:(0,H.jsxs)(`div`,{className:`flex flex-col items-center gap-3 text-center`,children:[(0,H.jsx)(K,{className:`h-6 w-6 animate-spin text-muted-foreground/70`}),(0,H.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,H.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`zenmark.loading`)}),(0,H.jsx)(`p`,{className:`text-xs text-muted-foreground/60 truncate max-w-xs`,children:n.split(`/`).pop()})]})]})}):(0,H.jsx)(`div`,{ref:s,style:{height:`100%`},children:(0,H.jsx)(V.Suspense,{fallback:(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 h-full`,children:(0,H.jsxs)(`div`,{className:`flex flex-col items-center gap-3 text-center`,children:[(0,H.jsx)(K,{className:`h-6 w-6 animate-spin text-muted-foreground/70`}),(0,H.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[(0,H.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`zenmark.loadingEditor`)}),(0,H.jsx)(`p`,{className:`text-xs text-muted-foreground/60 truncate max-w-xs`,children:n.split(`/`).pop()})]})]})}),children:(0,H.jsx)(OK,{value:r,onChange:e=>{i(e)},onKeyDown:e=>{if(!c)return!1;let t=c.KeyMod.CtrlCmd|c.KeyCode.KEY_S;return c.matchesKeybinding(e,t)?(e.preventDefault(),e.stopPropagation(),o(),!0):!1}})})})};var AK=Lm({async initilize(e){e.componentService.register(`zenmark-editor`,kK),Rv.register({id:`zenmark-editor`,label:J(`apps.zenNotes`),icon:`AiOutlineFileMarkdown`,showInTreeMenu:!0,priority:-10,match:[`.md`,`.markdown`,`.MD`],init:t=>{SK({xbook:e,pageId:`zenmark-editor:${t}`,uri:t,viewType:`zenmark-editor`})}});let t=(t,n)=>{(e.layoutService.pageBox.getPageList?.()||[]).filter(e=>e.viewData?.props?.uri===t).forEach(t=>{e.layoutService.pageBox.updatePage({id:t.id,status:n})})};e.eventBus.on(Ml.FileSaved,()=>{e.notificationService.success({title:J(`zenmark.fileSaved`),duration:1e3})}),e.eventBus.on(Ml.FileDirty,({uri:e})=>{t(e,`unsaved`)}),e.eventBus.on(Ml.FileClean,({uri:e})=>{t(e,void 0)}),e.eventBus.on(Ml.FileLoaded,({uri:e})=>{t(e,void 0)})}});const jK=Lm({async initilize(e){e.pluginService.use([pK,CK,AK])}});var MK=sc.create({scope:`showCurrentSpacePagesOnly`,storage:`localStorage`});const NK=Lm({initilize(e){e.layoutService.pageBox.subscribePageList(e=>{let t=mv.getFocusedSpace();t?.id&&MK.set(t.id,e)}),mv.getFocusedSpace$().pipe(Ts((e,t)=>e?.id===t?.id),Os()).subscribe(([t,n])=>{let r=e.layoutService.pageBox.getPageList();if(t?.id&&MK.set(t.id,r),n?.id){let t=MK.get(n.id,void 0);t?e.layoutService.pageBox.setPageList(t):e.layoutService.pageBox.setPageList([])}})}});let PK=function(e){return e[e.Unknown=0]=`Unknown`,e[e.File=1]=`File`,e[e.Directory=2]=`Directory`,e[e.SymbolicLink=64]=`SymbolicLink`,e}({});var FK=class{async readDirectory(e,t){let n=oh.getUri(e,t);return q.fs.readDirectory(n)}async readFile(e,t){let n=oh.getUri(e,t);return q.fs.readFile(n)}async stat(e,t){try{let n=oh.getUri(e,t),r=await q.fs.stat(n);return{mtime:r.mtime,size:r.size}}catch{return{}}}};const IK=e=>{let t=e.toLowerCase();return[`.png`,`.jpg`,`.jpeg`,`.gif`,`.webp`,`.ico`,`.pdf`,`.zip`,`.tar`,`.gz`,`.7z`,`.mp3`,`.mp4`,`.mov`,`.wav`,`.ttf`,`.woff`,`.woff2`,`.exe`,`.dll`].some(e=>t.endsWith(e))||t.startsWith(`.git/`)},LK=e=>{let t=e.split(`/`);if(t.some(e=>[`.git`,`node_modules`,`.next`,`dist`,`build`].includes(e)))return!0;let n=t[t.length-1];return!![`.DS_Store`,`Thumbs.db`].includes(n)};var RK=ac(`search-meta`,`localStorage`),zK=class{getAll(e){return RK.get(e,{})||{}}set(e,t,n){let r=this.getAll(e);r[t]=n,RK.set(e,r)}remove(e,t){let n=this.getAll(e);delete n[t],RK.set(e,n)}listPaths(e){return Object.keys(this.getAll(e))}REPO_META_KEY=`__repo__`;getRepoMeta(e){let t=RK.get(e,{}),n=t?t[this.REPO_META_KEY]:void 0;return n&&typeof n==`object`?n:{}}setRepoMeta(e,t){let n=this.getAll(e),r=n[this.REPO_META_KEY],i={...typeof r==`object`&&r?r:{},...t};n[this.REPO_META_KEY]=i,RK.set(e,n)}},BK=e=>{let t=e.charCodeAt(0);return t>=19968&&t<=40959||t>=13312&&t<=19903||t>=131072&&t<=173791||t>=173824&&t<=177983||t>=177984&&t<=178207||t>=178208&&t<=183983},VK=e=>e.toLowerCase(),HK=e=>{let t=[];if(!e||!/^[a-z0-9_]+$/.test(e)||e.length<3||e.length>48)return t;for(let n=0;n<=e.length-3;n++)t.push(e.slice(n,n+3));return t};const UK=e=>{if(!e)return[];let t=VK(e),n=[],r=0;for(;r<t.length;){let e=t[r],i=BK(e),a=r+1;for(;a<t.length&&BK(t[a])===i;)a++;let o=t.slice(r,a);if(i)if(o.length===1)n.push(o);else for(let e=0;e<o.length-1;e++)n.push(o.slice(e,e+2));else{let e=o.split(/[^a-z0-9_]+/g).filter(Boolean);for(let t of e){n.push(t);let e=HK(t);e.length&&n.push(...e)}}r=a}return n},WK=(e,t)=>{let n=UK(e||``),r=UK(t||``);return[...n,...n,...r]};var GK=ac(`search-index`,`localStorage`),KK=class{terms=new Map;docs=new Map;pathIndex=new Map;getSpaceTerms(e){return this.terms.has(e)||this.terms.set(e,new Map),this.terms.get(e)}getSpaceDocs(e){return this.docs.has(e)||this.docs.set(e,new Map),this.docs.get(e)}getSpacePathIndex(e){return this.pathIndex.has(e)||this.pathIndex.set(e,new Map),this.pathIndex.get(e)}async upsert(e,t){let n=this.getSpaceTerms(e),r=this.getSpaceDocs(e),i=this.getSpacePathIndex(e);for(let a of t){let t=r.get(a.id);t&&this.removeDocTokens(e,t);let o=WK(a.title||``,a.text||``),s=new Map;o.forEach(e=>s.set(e,(s.get(e)||0)+1));let c={id:a.id,spaceId:a.spaceId,path:a.path,title:a.title,text:a.text,len:Math.max(1,o.length)};r.set(a.id,c),i.has(a.path)||i.set(a.path,new Set),i.get(a.path).add(a.id);for(let[e,t]of s)n.has(e)||n.set(e,new Map),n.get(e).set(a.id,t)}await this.persist(e)}async removeByPath(e,t){let n=this.getSpaceDocs(e),r=this.getSpacePathIndex(e),i=r.get(t);if(i){for(let t of Array.from(i)){let r=n.get(t);r&&this.removeDocTokens(e,r),n.delete(t)}r.delete(t),await this.persist(e)}}removeDocTokens(e,t){let n=this.getSpaceTerms(e),r=WK(t.title||``,t.text||``),i=new Set(r);for(let e of i){let r=n.get(e);r&&(r.delete(t.id),r.size===0&&n.delete(e))}let a=this.getSpacePathIndex(e),o=a.get(t.path);o&&(o.delete(t.id),o.size===0&&a.delete(t.path))}async search(e,t,n={}){let r=this.getSpaceTerms(e),i=this.getSpaceDocs(e),a=UK(t).filter(Boolean),o=new Map,s=Math.max(1,i.size);for(let e of a){let t=r.get(e);if(!t)continue;let n=t.size,a=Math.log(1+s/n);for(let[e,n]of t){let t=i.get(e);if(!t)continue;let r=n/t.len,s=(o.get(e)||0)+r*a;o.set(e,s)}}let c=Array.from(o.entries()).sort((e,t)=>t[1]-e[1]).map(([e,t])=>{let n=i.get(e);return{id:n.id,spaceId:n.spaceId,path:n.path,title:n.title,snippet:this.makeSnippet(n.text,a),score:t}}),{limit:l=20,offset:u=0}=n;return{hits:c.slice(u,u+l),total:c.length}}makeSnippet(e,t,n=96){if(!e)return``;let r=e.toLowerCase(),i=-1;for(let e of t){let t=r.indexOf(e);if(t!==-1){i=t;break}}if(i===-1)return e.slice(0,n);let a=Math.max(0,i-Math.floor(n/2)),o=Math.min(e.length,a+n);return(a>0?`...`:``)+e.slice(a,o)+(o<e.length?`...`:``)}async persist(e){let t=this.getSpaceTerms(e),n=this.getSpaceDocs(e),r=this.getSpacePathIndex(e),i={terms:Array.from(t.entries()).map(([e,t])=>[e,Array.from(t.entries())]),docs:Array.from(n.entries()),paths:Array.from(r.entries()).map(([e,t])=>[e,Array.from(t.values())])};GK.set(e,i)}async restore(e){let t=GK.get(e);if(!t)return;let n=new Map;for(let[e,r]of t.terms)n.set(e,new Map(r));this.terms.set(e,n);let r=new Map(t.docs);this.docs.set(e,r);let i=new Map;for(let[e,n]of t.paths)i.set(e,new Set(n));this.pathIndex.set(e,i)}async drop(e){this.terms.delete(e),this.docs.delete(e),this.pathIndex.delete(e),GK.remove(e)}getDocCount(e){return this.getSpaceDocs(e).size}async scanSubstring(e,t,n={}){let{limit:r=50,offset:i=0}=n,a=(t||``).toLowerCase();if(!a)return{hits:[],total:0};let o=Array.from(this.getSpaceDocs(e).values()),s=[];for(let e of o){let t=e.text.toLowerCase().indexOf(a);t!==-1&&s.push({id:e.id,spaceId:e.spaceId,path:e.path,title:e.title,snippet:this.makeSnippet(e.text,[a],96),score:1/(1+t)+.1/(1+e.len)})}return s.sort((e,t)=>t.score-e.score),{hits:s.slice(i,i+r),total:s.length}}};async function qK(e){let t=mv.getSpace(e);if(!t)return{isLarge:!1,reason:`no-space`};let{platform:n,owner:r,repo:i}=t;if(n===`github`){let e=uv.getAnyAuthInfo(n,r)?.accessToken,t=`https://api.github.com/repos/${r}/${i}/zipball`;try{let n=await S_.head(t,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),r=Number(n.headers.get(`Content-Length`)||n.headers.get(`content-length`)||0);return r&&r>=52428800?{isLarge:!0,reason:`archive-size`,metrics:{contentLength:r}}:{isLarge:!1,reason:`archive-size`,metrics:{contentLength:r}}}catch{return{isLarge:!1,reason:`head-failed`}}}return{isLarge:!1,reason:`no-estimator`}}var JK=class{async tryFetchZip(e){let t=mv.getSpace(e);if(!t)return;let{platform:n,owner:r,repo:i}=t;if(n!==`github`)return;let a=uv.getAnyAuthInfo(n,r)?.accessToken,o=`https://api.github.com/repos/${r}/${i}/zipball`;return(await S_.get(o,{responseType:`arrayBuffer`,headers:a?{Authorization:`Bearer ${a}`}:void 0})).data}async enumerate(e){try{await this.tryFetchZip(e);return}catch{return}}},YK=new TextDecoder,XK=e=>oh.generateHash(e);const ZK=new class{reader;meta=new zK;index=new KK;logs=new Map;onLogEmitter=new $u;onProgressEmitter=new $u;watching=new Set;fsListenerRegistered=!1;constructor(e=new FK){this.reader=e}async restore(e){await this.index.restore(e)}async dropSpace(e){await this.index.drop(e)}async search(e,t,n){await this.index.restore(e);let r=(t||``).trim();return/^[a-z0-9]$/i.test(r)?(this.log(e,`Substring scan fallback for short query: '${r}'`),this.index.scanSubstring(e,r,n)):this.index.search(e,r,n)}onLog(e){return this.onLogEmitter.event(e)}onProgress(e){return this.onProgressEmitter.event(e)}getLogs(e){return this.logs.get(e)||[]}clearLogs(e){this.logs.delete(e)}getDocCount(e){return this.index.getDocCount(e)}log(e,t,n=`info`){let r=this.logs.get(e)||[],i=`[${new Date().toLocaleTimeString()}] ${t}`;r.push(i),r.length>500&&r.shift(),this.logs.set(e,r),this.onLogEmitter.fire({spaceId:e,message:i,level:n})}async indexSpace(e,t={}){await this.index.restore(e);let n=new Set,r=0,i=0,a=Date.now();this.log(e,`Index start: full=${!!t.full}`),this.onProgressEmitter.fire({spaceId:e,phase:`start`,indexed:0,removed:0});try{let t=await qK(e);if(this.log(e,`Sizer: isLarge=${t.isLarge} reason=${t.reason||``}`),t.isLarge){let t=await new JK().enumerate(e);if(t&&t.length)for(let a of t){if(!a.path||LK(a.path))continue;let t=a.path.split(`/`).pop()||a.path;if(IK(t))continue;let o=a.content||``,s=[{id:oh.generateHash(`${e}:${a.path}`),spaceId:e,path:a.path,title:t,text:o,updatedAt:Date.now()}];await this.index.upsert(e,s),this.meta.set(e,a.path,{hash:oh.generateHash(o),updatedAt:Date.now()}),n.add(a.path),r++,r%100==0&&this.onProgressEmitter.fire({spaceId:e,phase:`archive`,indexed:r,removed:i})}}}catch{}let o=async i=>{let a=await this.reader.readDirectory(e,i);for(let[s,c]of a){let a=i.endsWith(`/`)?i+s:i+`/`+s;LK(a)||(c===PK.Directory?await o(a):c===PK.File&&(await this.processFile(e,a,t),n.add(a),r++))}};r===0&&(this.log(e,`Walk scan start`),await o(`/`));let s=this.meta.listPaths(e);for(let t of s)n.has(t)||(await this.index.removeByPath(e,t),this.meta.remove(e,t),i++);let c=Date.now()-a;return this.log(e,`Index done: indexed=${r}, removed=${i}, docs=${this.getDocCount(e)}, took=${c}ms`),this.onProgressEmitter.fire({spaceId:e,phase:`done`,indexed:r,removed:i}),{indexed:r,removed:i}}async reindexPaths(e,t){await this.index.restore(e);let n=0;for(let r of t)await this.processFile(e,r,{full:!0}),n++;return n}async processFile(e,t,n){let r=t.split(`/`).pop()||t;if(IK(r))return;let i=await this.reader.stat?.(e,t)||{},a=this.meta.getAll(e)[t],o=``,s=a?.hash;if((()=>n.full||!a?!0:typeof i.mtime==`number`&&typeof i.size==`number`?a.mtime!==i.mtime||a.size!==i.size:!0)())try{let c=await this.reader.readFile(e,t);if(o=YK.decode(c),s=XK(o),!n.full&&a&&!i.mtime&&!i.size&&a.hash===s){this.log(e,`Skip unchanged ${t}`);return}let l=[{id:XK(`${e}:${t}`),spaceId:e,path:t,title:r,text:o,updatedAt:Date.now()}];await this.index.upsert(e,l),this.onProgressEmitter.fire({spaceId:e,phase:`file`,indexed:1,removed:0,path:t})}catch(n){let r=n instanceof Error?n.message:String(n);this.log(e,`Error reading ${t}: ${r}`,`error`)}this.meta.set(e,t,{mtime:i.mtime,size:i.size,hash:s,updatedAt:Date.now()})}startWatch(e){this.watching.has(e)||(this.watching.add(e),this.ensureFsListener(),this.log(e,`FS watch enabled`))}stopWatch(e){this.watching.delete(e),this.log(e,`FS watch disabled`)}ensureFsListener(){if(!this.fsListenerRegistered)try{q.fs.onDidChangeFile?.(e=>{if(Array.isArray(e))for(let t of e){let e=t.uri.toString(),n=oh.getSpaceIdFromUri(e);if(!n||!this.watching.has(n))continue;let r=oh.getInSpacePathFromUri(e);this.log(n,`FS change ${r}`),this.processFile(n,r,{full:!1})}}),this.fsListenerRegistered=!0}catch{}}};async function QK(e,t,n){try{let r=(await S_.get(`https://api.github.com/repos/${e}/${t}`,{headers:n?{Authorization:`Bearer ${n}`}:void 0})).data?.default_branch||`master`;return(await S_.get(`https://api.github.com/repos/${e}/${t}/commits/${r}`,{headers:n?{Authorization:`Bearer ${n}`}:void 0})).data?.sha}catch{return}}async function $K(e,t,n){try{let r=await S_.head(`https://api.github.com/repos/${e}/${t}/zipball`,{headers:n?{Authorization:`Bearer ${n}`}:void 0}),i=Number(r.headers.get(`content-length`)||r.headers.get(`Content-Length`)||0);return{etag:r.headers.get(`etag`)||r.headers.get(`ETag`)||void 0,contentLength:i||void 0}}catch{return{}}}async function eq(e){let t=mv.getSpace(e);if(!t)return;let{platform:n,owner:r,repo:i}=t;if(n===`github`){let e=uv.getAnyAuthInfo(n,r)?.accessToken,[t,a]=await Promise.all([QK(r,i,e),$K(r,i,e)]);return{head:t,etag:a.etag,contentLength:a.contentLength}}}const tq=new class{spaceId$=new xo(void 0);query$=new xo(``);debouncedQuery$=this.query$.pipe(ws(200),Ts(),js(1));loading$=new xo(!1);watching$=new xo(!1);indexing$=new xo(!1);results$=_s([this.spaceId$,this.debouncedQuery$]).pipe(Ns(([e,t])=>!e||!t?as({hits:[],total:0}):(this.loading$.next(!0),is(ZK.search(e,t,{limit:50})).pipe(os(e=>({hits:e.hits.map(e=>({id:e.id,path:e.path,title:e.title,snippet:e.snippet})),total:e.total})),Ps(()=>this.loading$.next(!1)),Cs(e=>(console.warn(`search error`,e),this.loading$.next(!1),as({hits:[],total:0})))))),js(1));docCount$=new xo(0);sizer$=this.spaceId$.pipe(Ns(e=>e?is(qK(e)).pipe(os(e=>({isLarge:e.isLarge,reason:e.reason})),Cs(()=>as({isLarge:!1,reason:`error`}))):as(null)),js(1));logs$=new xo([]);stale$=new xo(null);lastValidatedAt$=new xo(void 0);meta=new zK;constructor(){this.spaceId$.pipe(Ts()).subscribe(async e=>{if(!e){this.docCount$.next(0),this.logs$.next([]);return}await ZK.restore(e),this.docCount$.next(ZK.getDocCount(e)),this.logs$.next(ZK.getLogs(e))}),ZK.onProgress(e=>{let t=this.spaceId$.getValue();!e||!t||e.spaceId!==t||this.docCount$.next(ZK.getDocCount(t))}),ZK.onLog(e=>{let t=this.spaceId$.getValue();!e||!t||e.spaceId!==t||this.logs$.next([...ZK.getLogs(t)])})}setSpaceId(e){this.spaceId$.next(e)}setQuery(e){this.query$.next(e)}async reindex(){let e=this.spaceId$.getValue();if(e||=mv.getFocusedSpace()?.id||fp.sidebar.getActiveViewId?.(),e){this.indexing$.next(!0);try{let{indexed:t,removed:n}=await ZK.indexSpace(e,{full:!0});this.docCount$.next(ZK.getDocCount(e)),_m.success(`索引完成：新增/更新 ${t}，移除 ${n}`)}catch(e){let t=e instanceof Error?e.message:String(e);_m.error(`重建索引失败：${t}`)}finally{this.indexing$.next(!1)}}}toggleWatch(){let e=this.spaceId$.getValue();if(!e)return;let t=!this.watching$.getValue();this.watching$.next(t),t?ZK.startWatch(e):ZK.stopWatch(e)}async validate(){let e=this.spaceId$.getValue();if(!e)return;let t=await eq(e),n=this.meta.getRepoMeta(e),r=typeof n.head==`string`&&typeof t?.head==`string`?n.head!==t.head:null;this.stale$.next(r);let i=Date.now();this.lastValidatedAt$.next(i),this.meta.setRepoMeta(e,{validatedAt:i,etag:t?.etag})}async acceptCurrentHead(){let e=this.spaceId$.getValue();if(!e)return;let t=await eq(e);if(t?.head){let n=Date.now();this.meta.setRepoMeta(e,{head:t.head,validatedAt:n,etag:t.etag}),this.stale$.next(!1),this.lastValidatedAt$.next(n)}}};function nq(e,t){let[n,r]=(0,V.useState)(t);return(0,V.useEffect)(()=>{let t=e.subscribe(r);return()=>t.unsubscribe()},[e]),n}const rq=()=>{let e=mv.useSpaces(),t=nq(tq.spaceId$,tq.spaceId$.getValue()),n=nq(tq.query$,tq.query$.getValue()),r=nq(tq.loading$,tq.loading$.getValue()),i=nq(tq.results$,{hits:[],total:0}),a=nq(tq.docCount$,tq.docCount$.getValue()),o=nq(tq.sizer$,null),s=nq(tq.logs$,[]),c=nq(tq.watching$,!1),l=nq(tq.indexing$,!1),u=nq(tq.stale$,null),d=nq(tq.lastValidatedAt$,tq.lastValidatedAt$.getValue?.()||void 0);(0,V.useEffect)(()=>{if(!tq.spaceId$.getValue()){let t=mv.getFocusedSpace();t?.id?tq.setSpaceId(t.id):e[0]?.id&&tq.setSpaceId(e[0].id)}},[e.length]);let f=e=>{tq.setSpaceId(e)},p=e=>tq.setQuery(e),m=()=>tq.toggleWatch(),h=()=>tq.reindex(),g=()=>tq.validate(),_=()=>tq.acceptCurrentHead(),v=(0,V.useRef)(new Set);return(0,V.useEffect)(()=>{t&&a===0&&!l&&!v.current.has(t)&&(v.current.add(t),tq.reindex())},[t,a,l]),{spaces:e,spaceId:t,selectSpace:f,q:n,setQ:p,loading:r,items:i.hits,total:i.total,docCount:a,sizer:o,logs:s,watching:c,indexing:l,toggleWatch:m,reindex:h,stale:u,lastValidatedAt:d,validate:g,acceptHead:_}},iq=({spaceId:e,query:t,onQueryChange:n,loading:r,stale:i,onValidate:a,onAcceptHead:o,onKeyDown:s,disabled:c=!1})=>{let{t:l}=Og(),u=(0,V.useRef)(null);return(0,V.useEffect)(()=>{u.current?.focus(),u.current?.select()},[]),(0,H.jsx)(`div`,{className:`relative flex-shrink-0 px-4`,children:(0,H.jsxs)(`div`,{className:`relative flex items-center gap-2.5 px-4 py-3 transition-all duration-200`,children:[(0,H.jsx)(Ie,{className:`h-4 w-4 text-muted-foreground flex-shrink-0 transition-colors duration-200`}),(0,H.jsx)(fm,{ref:u,value:t,onChange:e=>n(e.target.value),placeholder:l(e?`search.placeholder`:`search.selectSpaceFirst`),onKeyDown:s,className:`flex-1 border-0 bg-transparent text-sm placeholder:text-muted-foreground/50 focus-visible:ring-0 focus-visible:ring-offset-0`,disabled:c}),r&&(0,H.jsx)(K,{className:`h-4 w-4 animate-spin text-muted-foreground flex-shrink-0`}),!r&&typeof i==`boolean`&&(0,H.jsx)(`button`,{type:`button`,onClick:i?o:a,className:G(`flex items-center gap-1 rounded-lg px-2 py-1 text-sm transition-all duration-150`,`hover:bg-background/60 focus:outline-none`,i?`text-amber-600 dark:text-amber-400`:`text-emerald-600 dark:text-emerald-400`),title:l(i?`search.indexStale`:`search.indexNormal`),children:i?(0,H.jsx)(Ql,{className:`h-3.5 w-3.5`}):(0,H.jsx)($l,{className:`h-3.5 w-3.5`})})]})})},aq=({type:e})=>{let{t}=Og();return e===`no-space`?(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0`,children:(0,H.jsx)(`div`,{className:`text-center`,children:(0,H.jsx)(`p`,{className:`text-sm text-muted-foreground/70`,children:t(`search.noSpace`)})})}):e===`loading`?(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 text-sm text-muted-foreground/70`,children:(0,H.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,H.jsx)(K,{className:`h-4 w-4 animate-spin`}),(0,H.jsx)(`span`,{children:t(`search.searching`)})]})}):e===`no-query`?(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 px-4`,children:(0,H.jsxs)(`div`,{className:`text-center`,children:[(0,H.jsx)(`div`,{className:`mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-muted/30`,children:(0,H.jsx)(Ie,{className:`h-6 w-6 text-muted-foreground/40`})}),(0,H.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:t(`search.noQuery`)}),(0,H.jsx)(`p`,{className:`mt-1 text-sm text-muted-foreground/60`,children:t(`search.noQueryDesc`)})]})}):(0,H.jsx)(`div`,{className:`flex-1 flex items-center justify-center min-h-0 px-4`,children:(0,H.jsxs)(`div`,{className:`text-center`,children:[(0,H.jsx)(`div`,{className:`mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-muted/20`,children:(0,H.jsx)(cu,{className:`h-6 w-6 text-muted-foreground/40`})}),(0,H.jsx)(`p`,{className:`text-sm font-medium text-foreground/90`,children:t(`search.noResults`)}),(0,H.jsx)(`p`,{className:`mt-1 text-sm text-muted-foreground/60`,children:t(`search.noResultsDesc`)})]})})},oq=(e,t)=>{if(!e)return null;if(!t)return(0,H.jsx)(H.Fragment,{children:e});let n=t.toLowerCase(),r=e,i=r.toLowerCase(),a=[],o=0;for(;o<r.length;){let e=i.indexOf(n,o);if(e===-1){a.push(r.slice(o));break}e>o&&a.push(r.slice(o,e)),a.push((0,H.jsx)(`mark`,{className:`bg-yellow-200/60 dark:bg-yellow-900/40 rounded px-0.5 font-medium`,children:r.slice(e,e+n.length)},e)),o=e+n.length}return(0,H.jsx)(H.Fragment,{children:a})};var sq=e=>(e.split(`/`).pop()||``).split(`.`).pop()||``;const cq=({item:e,query:t,isActive:n,onSelect:r,onMouseEnter:i,itemRef:a})=>{let{t:o}=Og(),s=sq(e.path);return(0,H.jsx)(`div`,{ref:a,className:G(`group relative cursor-pointer rounded-lg px-4 py-2.5 transition-all duration-150`,`hover:bg-muted/40 focus-within:bg-muted/40`,n&&`bg-muted/50`),onMouseEnter:i,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},onFocus:i,tabIndex:0,role:`button`,"aria-label":o(`search.openFile`,{path:e.path}),children:(0,H.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,H.jsx)(`div`,{className:`mt-0.5 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-md text-xs font-medium text-muted-foreground/60 bg-muted/40 group-hover:bg-muted/60 transition-colors`,children:s||`·`}),(0,H.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,H.jsx)(`div`,{className:`truncate text-sm font-medium text-foreground`,children:oq(e.title||e.path.split(`/`).pop()||e.path,t)}),(0,H.jsx)(`div`,{className:`mt-0.5 truncate text-sm text-muted-foreground/70`,children:e.path}),e.snippet&&(0,H.jsx)(`div`,{className:`mt-1.5 line-clamp-2 text-sm leading-relaxed text-muted-foreground/80`,children:oq(e.snippet,t)})]}),(0,H.jsx)(Xl,{className:`h-3.5 w-3.5 flex-shrink-0 text-muted-foreground/30 opacity-0 group-hover:opacity-100 transition-opacity`})]})})},lq=({items:e,query:t,loading:n,activeIndex:r,onItemSelect:i,onItemHover:a,activeItemRef:o})=>{let s=(0,V.useRef)(null);(0,V.useEffect)(()=>{if(o?.current&&s.current){let e=s.current,t=o.current,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();(r.bottom>n.bottom||r.top<n.top)&&t.scrollIntoView({block:`nearest`,behavior:`smooth`})}},[r,o]);let c=(()=>n&&t?`loading`:t?t&&e.length===0?`no-results`:null:`no-query`)();return(0,H.jsxs)(`div`,{ref:s,className:`mt-3 flex-1 min-h-0 overflow-auto rounded-xl scrollbar-thin scrollbar-thumb-muted-foreground/20 scrollbar-track-transparent`,children:[c&&(0,H.jsx)(aq,{type:c}),!c&&e.length>0&&(0,H.jsx)(`div`,{className:`space-y-0.5`,children:e.map((e,n)=>(0,H.jsx)(cq,{item:e,query:t,isActive:n===r,onSelect:()=>i(n),onMouseEnter:()=>a(n),itemRef:n===r?o:void 0},e.id))})]})},uq=({loading:e,query:t,total:n})=>{let{t:r}=Og();return(0,H.jsx)(`div`,{className:`mt-3 flex items-center justify-between px-4 flex-shrink-0`,children:(0,H.jsx)(`div`,{className:`flex items-center gap-2 text-sm text-muted-foreground/80`,children:e?(0,H.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,H.jsx)(K,{className:`h-3 w-3 animate-spin`}),(0,H.jsx)(`span`,{children:r(`search.searching`)})]}):t&&n>0?(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`span`,{className:`font-medium text-foreground`,children:n}),(0,H.jsx)(`span`,{className:`ml-1`,children:r(`search.results`)})]}):null})})},dq=({itemsCount:e,activeIndex:t})=>{let{t:n}=Og();return(0,H.jsxs)(`div`,{className:`mt-4 pt-3 border-t border-border/30 flex items-center justify-between px-4 pb-3 text-xs text-muted-foreground/70 flex-shrink-0`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,H.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↑`}),(0,H.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↓`}),(0,H.jsx)(`span`,{className:`text-xs`,children:n(`search.navigation`)}),(0,H.jsx)(`span`,{className:`text-muted-foreground/50`,children:`·`}),(0,H.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`↵`}),(0,H.jsx)(`span`,{className:`text-xs`,children:n(`search.open`)}),(0,H.jsx)(`span`,{className:`text-muted-foreground/50`,children:`·`}),(0,H.jsx)(`kbd`,{className:`rounded-md bg-muted/50 px-2 py-1 font-mono text-xs`,children:`ESC`}),(0,H.jsx)(`span`,{className:`text-xs`,children:n(`search.close`)})]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e>0&&(0,H.jsxs)(`div`,{className:`text-muted-foreground/60 text-xs`,children:[t+1,` / `,e]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-1.5 text-muted-foreground/50 text-xs`,children:[(0,H.jsx)(`kbd`,{className:`rounded-md bg-muted/40 px-1.5 py-0.5 font-mono text-xs`,children:`⌘K`}),(0,H.jsx)(`span`,{children:n(`search.openSearch`)})]})]})]})},fq=({space:e,onReindex:t,indexing:n=!1,disabled:r=!1})=>{let{t:i}=Og();return e?(0,H.jsxs)(`div`,{className:`px-4 pb-2 flex items-center justify-between`,children:[(0,H.jsxs)(`div`,{className:`text-xs font-medium text-muted-foreground/50 uppercase tracking-wider`,children:[e.owner,`/`,e.repo]}),t&&(0,H.jsx)(`button`,{type:`button`,onClick:t,disabled:r||n,className:`text-xs text-muted-foreground/60 hover:text-muted-foreground/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:n?(0,H.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,H.jsx)(K,{className:`h-3 w-3 animate-spin`}),(0,H.jsx)(`span`,{children:i(`search.indexing`)})]}):i(`search.reindex`)})]}):null},pq=({onClose:e})=>{let{spaceId:t,q:n,setQ:r,items:i,total:a,loading:o,reindex:s,indexing:c,stale:l,validate:u,acceptHead:d}=rq(),[f,p]=(0,V.useState)(0),m=(0,V.useRef)(null);(0,V.useEffect)(()=>{p(0)},[t,n]);let h=(0,V.useCallback)(async(n,r)=>{if(!t)return;let a=i[n];if(!a)return;mv.focusSpace(t);let o={id:a.path,name:a.path.split(`/`).pop()||a.path,path:a.path,type:`file`};await Rv.open(t,o),fp.pageBox.show?.(),r?.keepOpen||e()},[t,i,e]);return(0,H.jsxs)(`div`,{className:`w-full max-w-3xl flex flex-col`,style:{height:`520px`,maxHeight:`80vh`},children:[(0,H.jsx)(iq,{spaceId:t,query:n,onQueryChange:r,loading:o,stale:l,onValidate:u,onAcceptHead:d,onKeyDown:(0,V.useCallback)(t=>{if(t.key===`Escape`){e();return}if(t.key===`ArrowDown`){t.preventDefault(),p(e=>Math.min(e+1,Math.max(0,i.length-1)));return}if(t.key===`ArrowUp`){t.preventDefault(),p(e=>Math.max(0,e-1));return}if(t.key===`Enter`){t.preventDefault(),i.length>0&&h(f,{keepOpen:t.metaKey||t.ctrlKey});return}},[i.length,f,h,e]),disabled:!t}),(0,H.jsx)(fq,{space:t?mv.getSpace(t):void 0,onReindex:s,indexing:c,disabled:!t}),(0,H.jsxs)(`div`,{className:`flex-1 flex flex-col min-h-0 overflow-hidden`,children:[!t&&(0,H.jsx)(aq,{type:`no-space`}),t&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(uq,{loading:o,query:n,total:a}),(0,H.jsx)(lq,{items:i,query:n,loading:o,activeIndex:f,onItemSelect:e=>h(e),onItemHover:p,activeItemRef:m})]})]}),t&&(0,H.jsx)(dq,{itemsCount:i.length,activeIndex:f})]})},mq=Lm({async initilize(e){e.componentService.register(`AiOutlineSearch`,Ie);try{e.layoutService.sidebar.removeView(`search`)}catch{}e.layoutService.activityBar.addActivity({id:`search`,name:`Search`,icon:`AiOutlineSearch`,unselectable:!0,order:30}),e.eventBus.on(Ml.ActivityBar.ActivityClicked(`search`),()=>{e.commandService.executeCommand(`search.quickOpen`)}),e.commandService.registerCommand(`search.indexSpace`,async t=>{let n=t||mv.getFocusedSpace()?.id;if(!n)return e.notificationService.warning(J(`search.noFocusedSpaceToIndex`));let{indexed:r,removed:i}=await ZK.indexSpace(n,{full:!0});e.notificationService.success(J(`search.indexedSuccess`,{indexed:r,removed:i}))}),e.commandService.registerCommand(`search.searchInSpace`,async(t,n)=>{let r=n||mv.getFocusedSpace()?.id;if(!r)return e.notificationService.warning(J(`search.noFocusedSpaceToSearch`));let i=await ZK.search(r,t,{limit:20});return console.log(`search results`,{spaceId:r,query:t,res:i}),e.notificationService.success(J(`search.foundHits`,{total:i.total,query:t})),i}),e.commandService.registerCommand(`search.quickOpen`,async()=>{let t=mv.getFocusedSpace();t?.id&&tq.setSpaceId(t.id);let n=e.modalService.open({footer:!1,closeIcon:!0,modalContentClassName:`sm:max-w-3xl`,modalBodyClassName:`p-0`,content:(0,H.jsx)(pq,{onClose:()=>n.close()})})}),window.addEventListener(`keydown`,t=>{if((t.metaKey||t.ctrlKey)&&(t.key===`k`||t.key===`K`)){let n=t.target,r=(n?.tagName||``).toLowerCase(),i=n?.isContentEditable;if(r===`input`||r===`textarea`||i)return;t.preventDefault(),e.commandService.executeCommand(`search.quickOpen`)}})}});function hq({activity:e,isExpanded:t}){return(0,H.jsx)(ju,{activity:e,isExpanded:t,onClick:()=>{let e=Dl();e!==`gitary.app`&&e!==`www.gitary.app`&&window.open(`https://gitary.app`,`_blank`)},icon:(0,H.jsx)(`img`,{src:`/logo.svg`,alt:`Gitary`,className:`w-full h-full object-contain`}),textClassName:`font-semibold tracking-tight`})}const gq=Lm({initilize(e){let t=`gitary-brand`;e.componentService.register(`activity:${t}`,hq),e.layoutService.activityBar.addActivity({id:t,icon:`gitary-logo`,name:`Gitary`,order:0,unselectable:!0},!0)}});var _q=new Map,vq=new Set;const yq=e=>{_q.set(e.id,e),vq.forEach(e=>e(new Map(_q)))},bq=()=>new Map(_q),xq=e=>(vq.add(e),()=>{vq.delete(e)}),Sq=(0,V.createContext)(null),Cq=()=>{let e=(0,V.useContext)(Sq);if(!e)throw Error(`useGlobalSidecar must be used within GlobalSidecarProvider`);return e};var wq=400,Tq=200,Eq=150,Dq=-50;function Oq(){let[e,t]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{if(typeof window>`u`||typeof window.matchMedia!=`function`)return;let e=window.matchMedia(`(max-width: 768px)`),n=e=>{t(e.matches)};if(t(e.matches),typeof e.addEventListener==`function`)return e.addEventListener(`change`,n),()=>e.removeEventListener(`change`,n);if(typeof e.addListener==`function`)return e.addListener(n),()=>e.removeListener(n)},[]),e}const kq=({children:e})=>{let t=Oq(),[n,r]=(0,V.useState)(()=>bq()),[i,a]=(0,V.useState)(!1),[o,s]=(0,V.useState)(void 0),[c,l]=(0,V.useState)({}),[u,d]=(0,V.useState)(!1);(0,V.useEffect)(()=>xq(e=>{if(r(e),e.size===0)s(void 0),a(!1);else if(o&&!e.has(o)){let t=e.values().next().value;s(t?.id)}}),[o]),(0,V.useEffect)(()=>{if(i){d(!1);let e=Tq+Dq,t=setTimeout(()=>{d(!0)},e);return()=>clearTimeout(t)}else d(!1)},[i]);let f=(0,V.useCallback)((e,t)=>{n.has(e)&&(s(e),l(t||{}),a(!0))},[n]),p=(0,V.useCallback)(e=>{n.has(e)&&(i&&o===e?a(!1):(s(e),a(!0)))},[o,i,n]),m=(0,V.useCallback)(()=>{a(!1)},[]),h=(0,V.useMemo)(()=>({open:i,activePaneId:o,openPane:f,togglePane:p,closePane:m}),[i,o,f,p,m]),g=(0,V.useMemo)(()=>[...n.values()],[n]),_=(0,V.useMemo)(()=>[...g].sort((e,t)=>(e.order??0)-(t.order??0)),[g]),v=_.find(e=>e.id===o),y=v?.component;return(0,H.jsx)(Sq.Provider,{value:h,children:(0,H.jsxs)(`div`,{className:`flex h-full w-full overflow-hidden relative`,children:[(0,H.jsx)(`div`,{className:`flex-1 min-w-0`,children:e}),_.length>0&&(0,H.jsxs)(H.Fragment,{children:[t&&(0,H.jsx)(`div`,{className:`fixed bottom-4 right-4 z-40 flex flex-col items-center gap-3`,children:_.map(e=>{let t=e.icon??_u,n=e.id===o&&i;return(0,H.jsx)(`button`,{onClick:()=>{n?m():f(e.id)},className:G(`group flex h-11 w-11 items-center justify-center rounded-full shadow-md border bg-background/95 backdrop-blur-sm transition-all`,n?`text-foreground`:`text-muted-foreground hover:bg-muted/80 hover:text-foreground`),title:e.title,children:(0,H.jsx)(t,{className:`h-5 w-5`})},e.id)})}),(!t||t&&i)&&(0,H.jsxs)(`div`,{className:G(`bg-background/95 backdrop-blur-sm z-50`,t?`fixed inset-0 flex justify-end`:`flex h-full relative`),style:{"--global-ai-sidebar-width":`clamp(280px, 80vw, ${wq}px)`},children:[t&&i&&(0,H.jsx)(`div`,{className:`absolute inset-0 bg-black/40 z-0`,onClick:m}),(0,H.jsx)(`div`,{className:G(`overflow-hidden flex flex-col bg-background border-l border-border/40 transition-all ease-in-out relative z-10`,t?i&&v?`w-full max-w-[480px] h-full translate-x-0`:`w-0 h-full translate-x-full`:i&&v?`w-[--global-ai-sidebar-width]`:`w-0`),style:{transitionDuration:`${Tq}ms`},children:i&&v&&y?(0,H.jsxs)(`div`,{className:G(`h-full flex flex-col transition-opacity`,u?`opacity-100`:`opacity-0`),style:{transitionDuration:`${Eq}ms`},children:[(0,H.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 bg-background/80 backdrop-blur-md sticky top-0 z-10 border-b border-border/40`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-2.5`,children:[v.icon&&(0,H.jsx)(`div`,{className:`w-5 h-5`,children:(0,H.jsx)(v.icon,{className:`w-full h-full`})}),(0,H.jsx)(`p`,{className:`text-sm font-medium text-foreground/90 tracking-tight`,children:v.title})]}),(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,onClick:m,className:`h-6 w-6 rounded-full hover:bg-muted/50 text-muted-foreground transition-colors`,children:`×`})]}),(0,H.jsx)(`div`,{className:`flex-1 min-h-0 flex flex-col overflow-hidden`,children:(0,H.jsx)(y,{...c,closePane:m})})]}):null}),!t&&(0,H.jsx)(`div`,{className:`w-[52px] flex flex-col items-center py-6 gap-4 border-l border-border/40 bg-background/50 backdrop-blur-sm`,children:_.map(e=>{let t=e.icon??_u,n=e.id===o&&i;return(0,H.jsx)(`button`,{onClick:()=>{n?m():f(e.id)},className:G(`group relative flex h-10 w-10 items-center justify-center rounded-xl transition-all duration-200 ease-out`,n?`bg-muted text-foreground`:`text-muted-foreground hover:bg-muted/80 hover:text-foreground`),title:e.title,children:(0,H.jsx)(t,{className:G(`h-5 w-5 transition-transform duration-200`,n?`scale-100`:`group-hover:scale-110`)})},e.id)})})]})]})]})})};var Aq=V.lazy(async()=>({default:(await oe(()=>import(`./global-chat-panel-BSkI3HkW.js`),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13]))).GlobalChatPanel}));const jq=()=>{let{t:e}=Og();return(0,H.jsx)(V.Suspense,{fallback:(0,H.jsx)(`div`,{className:`h-full w-full flex items-center justify-center text-sm text-muted-foreground`,children:e(`globalChat.loading`)||`Loading AI assistant...`}),children:(0,H.jsx)(Aq,{})})},Mq=({className:e})=>(0,H.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,className:e,children:[(0,H.jsx)(`defs`,{children:(0,H.jsxs)(`linearGradient`,{id:`ai-grad`,x1:`0%`,y1:`0%`,x2:`100%`,y2:`100%`,children:[(0,H.jsx)(`stop`,{offset:`0%`,stopColor:`#6366f1`}),(0,H.jsx)(`stop`,{offset:`100%`,stopColor:`#a855f7`})]})}),(0,H.jsx)(`path`,{d:`M12 2L15 8L21 9L16.5 14L18 20L12 17L6 20L7.5 14L3 9L9 8L12 2Z`,fill:`url(#ai-grad)`})]}),Nq=({content:e,className:t,isDark:n=!1})=>(0,H.jsx)(`div`,{className:G(`max-w-none text-sm break-words`,t),children:(0,H.jsx)(Vt,{remarkPlugins:[Ht],components:{code(e){let{children:t,className:r,node:i,ref:a,...o}=e,s=/language-(\w+)/.exec(r||``);return s?(0,H.jsx)(`div`,{className:`relative group`,children:(0,H.jsx)(M,{...o,PreTag:`div`,language:s[1],style:n?P:N,className:`rounded-md border border-border/50 !my-3`,customStyle:{margin:0,padding:`1rem`,backgroundColor:`transparent`},children:String(t).replace(/\n$/,``)})}):(0,H.jsx)(`code`,{...o,className:G(`bg-muted px-1.5 py-0.5 rounded-sm font-mono text-xs`,r),children:t})},p({children:e}){return(0,H.jsx)(`p`,{className:`mb-2 last:mb-0 leading-relaxed`,children:e})},ul({children:e}){return(0,H.jsx)(`ul`,{className:`list-disc list-outside ml-4 mb-2 space-y-1`,children:e})},ol({children:e}){return(0,H.jsx)(`ol`,{className:`list-decimal list-outside ml-4 mb-2 space-y-1`,children:e})},li({children:e}){return(0,H.jsx)(`li`,{className:`leading-relaxed`,children:e})},h1({children:e}){return(0,H.jsx)(`h1`,{className:`text-base font-bold mt-4 mb-2 border-b pb-1`,children:e})},h2({children:e}){return(0,H.jsx)(`h2`,{className:`text-sm font-bold mt-3 mb-2`,children:e})},h3({children:e}){return(0,H.jsx)(`h3`,{className:`text-sm font-semibold mt-2 mb-1`,children:e})},h4({children:e}){return(0,H.jsx)(`h4`,{className:`text-xs font-semibold mt-2 mb-1`,children:e})},a({children:e,href:t}){return(0,H.jsx)(`a`,{href:t,target:`_blank`,rel:`noreferrer`,className:`text-primary underline underline-offset-4 hover:text-primary/80`,children:e})},blockquote({children:e}){return(0,H.jsx)(`blockquote`,{className:`border-l-2 border-primary/50 pl-4 italic text-muted-foreground my-2`,children:e})},table({children:e}){return(0,H.jsx)(`div`,{className:`my-4 w-full overflow-y-auto rounded-md border border-border`,children:(0,H.jsx)(`table`,{className:`w-full text-sm m-0 border-collapse`,children:e})})},thead({children:e}){return(0,H.jsx)(`thead`,{className:`bg-muted/50 text-left font-medium border-b border-border`,children:e})},tbody({children:e}){return(0,H.jsx)(`tbody`,{className:`divide-y divide-border/50`,children:e})},tr({children:e}){return(0,H.jsx)(`tr`,{className:`hover:bg-muted/30 transition-colors m-0 p-0`,children:e})},th({children:e}){return(0,H.jsx)(`th`,{className:`px-4 py-2 font-medium border-r border-border/50 last:border-r-0`,children:e})},td({children:e}){return(0,H.jsx)(`td`,{className:`px-4 py-2 border-r border-border/50 last:border-r-0`,children:e})},hr(){return(0,H.jsx)(`hr`,{className:`my-4 border-border`})}},children:e})});var Pq=!1,Fq=()=>{Pq||=(yq({id:`global-chat`,title:`AI Assistant`,description:`跨页面问答与命令`,icon:Mq,order:1,component:jq}),!0)};const Iq=Lm({initilize(e){Fq(),e.workbenchService.addReactEntry({id:`global-sidecar`,WrapperComponent:kq})}});function Lq({shortcut:e,isExpanded:t}){return(0,H.jsx)(ju,{activity:{id:e.id,name:e.name,icon:e.icon},isExpanded:t,icon:(0,H.jsx)(Ee,{className:`w-full h-full`}),onClick:()=>{window.open(`https://chromewebstore.google.com/detail/gitary-companion/halhhaelcfghngkpkikcnlcjbmlkgjed`,`_blank`,`noopener,noreferrer`)}})}const Rq=Lm({initilize(e){e.componentService.register(`AiOutlineChrome`,Ee),e.shortcutService.addShortcut({id:`browser-extension`,name:J(`browserExtension.name`),order:9998,icon:`AiOutlineChrome`}),e.componentService.register(`shortcut:browser-extension`,Lq)}});var zq=Lm({initilize(e){e.pluginService.use([gq,Iq,jK,Iv,NK,mq,Rq,Nv])}});const Bq=Lm({initilize(e){mv.subscribeSpaces(e=>{let t=!1,n=e.map(e=>(e.id.includes(`:`)&&(t=!0),{...e,id:e.id.includes(`:`)?oh.generateHash(e.id):e.id}));t&&mv.setSpaces(n)})}});var Vq=Lm({initilize(e){e.pluginService.use([Bq])}}),Hq={localhost:{clientId:`be57567173ecb4139e99e54a216e3e728f1c355d3f8a4568bb417bc94c7e1194`,clientSecret:`5dbc1127b37fb2849a425d3e47d856df1f5efa6fa9be5c9793224ecc15d2b376`,redirectUri:`http://localhost:3000/gitee_login/index.html`},eiooie:{clientId:`4f4b30de2e5102ee76c1a30a98193fb5e090b4600831c030f313e0ec530e68f9`,clientSecret:`5700145980a135586925608a325dba18c7b2459ef75203a9ff0768737ae83252`,redirectUri:`https://apps.eiooie.com/gitee_login/index.html`},WriteDimstackCom:{clientId:`e9d3ac7adbf20644f335257353e1798d709062b85b73896a4d4f762b7ee92e40`,clientSecret:`c4bb089c4585b53ae68150b847a99ef3445de57c060082256c296b725df46de1`,redirectUri:`https://write.dimstack.com/?platform=gitee`},GitaryApp:{clientId:`9bdeb8edca91d4fdf2293aa0853b0ef8968cb4b730ca3411623be9e70c829ce4`,clientSecret:`655be51197357be09f7d408489604f0b2fc091d814bd5145f082c3fac993b770`,redirectUri:`https://gitary.app/?platform=gitee`},Localhost5173:{clientId:`7fa2b5a6e0445f723e8bc04850293d604ca2d50b537e90ed71e344edcbdb87da`,clientSecret:`45a3e2898145673b20f1198d0be5ac7600b4f3c792f5e2a0f40238ca4a984ca5`,redirectUri:`http://localhost:5173/?platform=gitee`}},Uq=Hq[Ol()]||Hq.GitaryApp;function Wq(e,t){let n=new URL(e),r=n.searchParams;return Object.keys(t).forEach(e=>{let n=t[e];n===null?r.delete(e):r.set(e,n)}),n.search=r.toString(),n.toString()}var Gq=window.history,Kq=document.location,qq=()=>new Proxy({},{get(e,t){return new URLSearchParams(Kq.search).get(t)},set(e,t,n){let r={};for(let[e,t]of new URLSearchParams(Kq.search))r[e]=t;r[t]=n;let i=[];return Object.keys(r).forEach(e=>{i.push(`${e}=${r[e]}`)}),Kq.search=`?`+i.join(`&&`),!0}}),Jq=()=>{let e=qq();return new Proxy(Kq,{get(t,n){return n===`query`?e:t[n]}})},Yq=()=>Jq(),Xq={counter:-1,bank:{},addListener:function(e){return this.counter+=1,this.bank[this.counter]=e,()=>{delete this.bank[this.counter]}},callAll:function(){Object.keys(this.bank).map(e=>this.bank[e](Zq.location))}},Zq={location:Yq(),length:Gq.length,createHref:function(e){let t=``;if(e.query&&Object.keys(e.query).length){t=`?`;let n=[];Object.keys(e.query).map(t=>{n.push(`${t}=${encodeURIComponent(e.query[t])}`)}),t+=n.join(`&`)}return e.pathname+t},push:function(e,t=!0){typeof e==`object`&&(e=this.createHref(e)),Gq.pushState({},``,e),this.location=Yq(),this.length=Gq.length,t&&Xq.callAll()},listen:function(e){return Xq.addListener(e)},update:function(){this.location=Yq(),this.length=Gq.length,Xq.callAll()}};window.onpopstate=()=>{Zq.update()};var Qq=Zq,$q=e=>{let t=Math.ceil(Date.now()/1e3);if(typeof e==`number`&&Number.isFinite(e))return e;if(typeof e==`string`&&e){let t=Date.parse(e);if(!Number.isNaN(t))return Math.ceil(t/1e3)}return t},eJ=e=>{if(!(typeof e!=`string`||!e))try{let t=JSON.parse(e);if(t&&typeof t==`object`&&`platform`in t&&typeof t.platform==`string`)return t.platform}catch{}};const tJ=({platform:e,createToken:t,clientId:n,clientSecret:r,redirectUri:i,fetchUserInfo:a})=>({name:`CheckAuthCodeAndNext:`+e,execute(e){let{platform:o,username:s}=e,c=Qq.location.query.code,l=Qq.location.query.platform,u=Qq.location.query.state,d=eJ(u);c&&(o===l||o===d)&&(t({clientId:n,clientSecret:r,redirectUri:i,code:c}).then(async e=>{let t;if(a){let n=await a({accessToken:e.access_token});n&&(t=n.username)}e&&uv.saveAuthInfo({platform:o,username:t||s,accessToken:e.access_token,refreshToken:e.refresh_token,expirationTime:e.expires_in,refreshTokenExpirationTime:e.refresh_token_expires_in,createdAt:$q(e.created_at),scope:e.scope,tokenType:e.token_type})}),Qq.push(Wq(location.href,{code:null,platform:null,state:null})))}}),nJ=({platform:e,refreshAccessToken:t,getLoginUrl:n,callbackTaskName:r,id:i,title:a,description:o})=>({platform:e,id:i,title:a,description:o,refresh:async e=>{let{platform:n,username:r,refreshToken:i}=e,a=await t({refreshToken:i});uv.saveAuthInfo({platform:n,username:r,accessToken:a.access_token,refreshToken:a.refresh_token,expirationTime:a.expires_in,refreshTokenExpirationTime:a.refresh_token_expires_in,createdAt:$q(a.created_at),scope:a.scope,tokenType:a.token_type})},getLoginUrl:n,authenticate:async t=>{let{username:i,repo:a,needConfirm:o}=t||{};if(o){let{t}=await oe(()=>import(`./utils-Bs5sNz94.js`),[]).then(e=>({t:e.t}));if(!await q.modalService.confirm({title:t(`auth.redirecting`),description:t(`auth.confirmRedirect`,{platform:e})}))return}localStorage.setItem(`authRepo`,a||``),localStorage.setItem(`authOwner`,i||``),q.taskService.addTask(r,{platform:e,username:i},{deffered:!0});let s=n();window.open(s,`_self`)}});var rJ=Lm({initilize(e){let t=tJ({platform:`gitee`,clientId:Uq.clientId,clientSecret:Uq.clientSecret,redirectUri:Uq.redirectUri,createToken:E_,fetchUserInfo:async({accessToken:e})=>{let t=await k_({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name,response:t}}}),n=nJ({id:`gitee`,platform:`gitee`,callbackTaskName:t.name,refreshAccessToken:D_,getLoginUrl:()=>w_({clientId:Uq.clientId,redirectUri:Uq.redirectUri})});e.taskService.registerTaskType(t),uv.registerAuthProvider(n)}}),iJ={localhost:{clientId:`be57567173ecb4139e99e54a216e3e728f1c355d3f8a4568bb417bc94c7e1194`,clientSecret:`5dbc1127b37fb2849a425d3e47d856df1f5efa6fa9be5c9793224ecc15d2b376`,redirectUri:`http://localhost:3000/gitee_login/index.html`},eiooie:{clientId:`4f4b30de2e5102ee76c1a30a98193fb5e090b4600831c030f313e0ec530e68f9`,clientSecret:`5700145980a135586925608a325dba18c7b2459ef75203a9ff0768737ae83252`,redirectUri:`https://apps.eiooie.com/gitee_login/index.html`},WriteDimstackCom:{clientId:`Ov23lifrUzI6VGkwpGWd`,clientSecret:`91701fd46c951ef707084f6142e5a11ddb55f744`,redirectUri:`https://write.dimstack.com/?platform=github`},GitaryApp:{clientId:`Ov23li7gtCm6evUeqZ4d`,clientSecret:`c1b0b88727cb4f4c279d9bc6b82552f8ba760155`,redirectUri:`https://gitary.app/?platform=github`},Localhost5173:{clientId:`Ov23li1cdcxP0rM2KVLq`,clientSecret:`34f80b513b96b5371682c6131e160eb41fc3e70f`,redirectUri:`http://localhost:5173/?platform=github`}},aJ=iJ[Ol()]||iJ.GitaryApp;function oJ(){return typeof navigator==`object`&&`userAgent`in navigator?navigator.userAgent:typeof process==`object`&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:`<environment undetectable>`}function sJ(e,t,n,r){if(typeof n!=`function`)throw Error(`method for before hook must be a function`);return r||={},Array.isArray(t)?t.reverse().reduce((t,n)=>sJ.bind(null,e,n,t,r),n)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((e,t)=>t.hook.bind(null,e,r),n)():n(r))}function cJ(e,t,n,r){let i=r;e.registry[n]||(e.registry[n]=[]),t===`before`&&(r=(e,t)=>Promise.resolve().then(i.bind(null,t)).then(e.bind(null,t))),t===`after`&&(r=(e,t)=>{let n;return Promise.resolve().then(e.bind(null,t)).then(e=>(n=e,i(n,t))).then(()=>n)}),t===`error`&&(r=(e,t)=>Promise.resolve().then(e.bind(null,t)).catch(e=>i(e,t))),e.registry[n].push({hook:r,orig:i})}function lJ(e,t,n){if(!e.registry[t])return;let r=e.registry[t].map(e=>e.orig).indexOf(n);r!==-1&&e.registry[t].splice(r,1)}var uJ=Function.bind,dJ=uJ.bind(uJ);function fJ(e,t,n){let r=dJ(lJ,null).apply(null,n?[t,n]:[t]);e.api={remove:r},e.remove=r,[`before`,`error`,`after`,`wrap`].forEach(r=>{let i=n?[t,r,n]:[t,r];e[r]=e.api[r]=dJ(cJ,null).apply(null,i)})}function pJ(){let e=Symbol(`Singular`),t={registry:{}},n=sJ.bind(null,t,e);return fJ(n,t,e),n}function mJ(){let e={registry:{}},t=sJ.bind(null,e);return fJ(t,e),t}var hJ={Singular:pJ,Collection:mJ},gJ=`octokit-endpoint.js/0.0.0-development ${oJ()}`,_J={method:`GET`,baseUrl:`https://api.github.com`,headers:{accept:`application/vnd.github.v3+json`,"user-agent":gJ},mediaType:{format:``}};function vJ(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}function yJ(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function bJ(e,t){let n=Object.assign({},e);return Object.keys(t).forEach(r=>{yJ(t[r])&&r in e?n[r]=bJ(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}function xJ(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function SJ(e,t,n){if(typeof t==`string`){let[e,r]=t.split(` `);n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);n.headers=vJ(n.headers),xJ(n),xJ(n.headers);let r=bJ(e||{},n);return n.url===`/graphql`&&(e&&e.mediaType.previews?.length&&(r.mediaType.previews=e.mediaType.previews.filter(e=>!r.mediaType.previews.includes(e)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(e=>e.replace(/-preview/,``))),r}function CJ(e,t){let n=/\?/.test(e)?`&`:`?`,r=Object.keys(t);return r.length===0?e:e+n+r.map(e=>e===`q`?`q=`+t.q.split(`+`).map(encodeURIComponent).join(`+`):`${e}=${encodeURIComponent(t[e])}`).join(`&`)}var wJ=/\{[^{}}]+\}/g;function TJ(e){return e.replace(RegExp(`(?:^\\W+)|(?:(?<!\\W)\\W+$)`,`g`),``).split(/,/)}function EJ(e){let t=e.match(wJ);return t?t.map(TJ).reduce((e,t)=>e.concat(t),[]):[]}function DJ(e,t){let n={__proto__:null};for(let r of Object.keys(e))t.indexOf(r)===-1&&(n[r]=e[r]);return n}function OJ(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,`[`).replace(/%5D/g,`]`)),e}).join(``)}function kJ(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}function AJ(e,t,n){return t=e===`+`||e===`#`?OJ(t):kJ(t),n?kJ(n)+`=`+t:t}function jJ(e){return e!=null}function MJ(e){return e===`;`||e===`&`||e===`?`}function NJ(e,t,n,r){var i=e[n],a=[];if(jJ(i)&&i!==``)if(typeof i==`string`||typeof i==`number`||typeof i==`boolean`)i=i.toString(),r&&r!==`*`&&(i=i.substring(0,parseInt(r,10))),a.push(AJ(t,i,MJ(t)?n:``));else if(r===`*`)Array.isArray(i)?i.filter(jJ).forEach(function(e){a.push(AJ(t,e,MJ(t)?n:``))}):Object.keys(i).forEach(function(e){jJ(i[e])&&a.push(AJ(t,i[e],e))});else{let e=[];Array.isArray(i)?i.filter(jJ).forEach(function(n){e.push(AJ(t,n))}):Object.keys(i).forEach(function(n){jJ(i[n])&&(e.push(kJ(n)),e.push(AJ(t,i[n].toString())))}),MJ(t)?a.push(kJ(n)+`=`+e.join(`,`)):e.length!==0&&a.push(e.join(`,`))}else t===`;`?jJ(i)&&a.push(kJ(n)):i===``&&(t===`&`||t===`?`)?a.push(kJ(n)+`=`):i===``&&a.push(``);return a}function PJ(e){return{expand:FJ.bind(null,e)}}function FJ(e,t){var n=[`+`,`#`,`.`,`/`,`;`,`?`,`&`];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,r,i){if(r){let e=``,i=[];if(n.indexOf(r.charAt(0))!==-1&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);i.push(NJ(t,e,r[1],r[2]||r[3]))}),e&&e!==`+`){var a=`,`;return e===`?`?a=`&`:e!==`#`&&(a=e),(i.length===0?``:e)+i.join(a)}else return i.join(`,`)}else return OJ(i)}),e===`/`?e:e.replace(/\/$/,``)}function IJ(e){let t=e.method.toUpperCase(),n=(e.url||`/`).replace(/:([a-z]\w+)/g,`{$1}`),r=Object.assign({},e.headers),i,a=DJ(e,[`method`,`baseUrl`,`url`,`headers`,`request`,`mediaType`]),o=EJ(n);n=PJ(n).expand(a),/^http/.test(n)||(n=e.baseUrl+n);let s=DJ(a,Object.keys(e).filter(e=>o.includes(e)).concat(`baseUrl`));return/application\/octet-stream/i.test(r.accept)||(e.mediaType.format&&(r.accept=r.accept.split(/,/).map(t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(`,`)),n.endsWith(`/graphql`)&&e.mediaType.previews?.length&&(r.accept=(r.accept.match(RegExp(`(?<![\\w-])[\\w-]+(?=-preview)`,`g`))||[]).concat(e.mediaType.previews).map(t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:`+json`}`).join(`,`))),[`GET`,`HEAD`].includes(t)?n=CJ(n,s):`data`in s?i=s.data:Object.keys(s).length&&(i=s),!r[`content-type`]&&i!==void 0&&(r[`content-type`]=`application/json; charset=utf-8`),[`PATCH`,`PUT`].includes(t)&&i===void 0&&(i=``),Object.assign({method:t,url:n,headers:r},i===void 0?null:{body:i},e.request?{request:e.request}:null)}function LJ(e,t,n){return IJ(SJ(e,t,n))}function RJ(e,t){let n=SJ(e,t),r=LJ.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:RJ.bind(null,n),merge:SJ.bind(null,n),parse:IJ})}var zJ=RJ(null,_J),BJ=n(((e,t)=>{var n=function(){};n.prototype=Object.create(null);var r=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,i=/\\([\v\u0020-\u00ff])/gu,a=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,o={type:``,parameters:new n};Object.freeze(o.parameters),Object.freeze(o);function s(e){if(typeof e!=`string`)throw TypeError(`argument header is required and must be a string`);let t=e.indexOf(`;`),o=t===-1?e.trim():e.slice(0,t).trim();if(a.test(o)===!1)throw TypeError(`invalid media type`);let s={type:o.toLowerCase(),parameters:new n};if(t===-1)return s;let c,l,u;for(r.lastIndex=t;l=r.exec(e);){if(l.index!==t)throw TypeError(`invalid parameter format`);t+=l[0].length,c=l[1].toLowerCase(),u=l[2],u[0]===`"`&&(u=u.slice(1,u.length-1),i.test(u)&&(u=u.replace(i,`$1`))),s.parameters[c]=u}if(t!==e.length)throw TypeError(`invalid parameter format`);return s}function c(e){if(typeof e!=`string`)return o;let t=e.indexOf(`;`),s=t===-1?e.trim():e.slice(0,t).trim();if(a.test(s)===!1)return o;let c={type:s.toLowerCase(),parameters:new n};if(t===-1)return c;let l,u,d;for(r.lastIndex=t;u=r.exec(e);){if(u.index!==t)return o;t+=u[0].length,l=u[1].toLowerCase(),d=u[2],d[0]===`"`&&(d=d.slice(1,d.length-1),i.test(d)&&(d=d.replace(i,`$1`))),c.parameters[l]=d}return t===e.length?c:o}t.exports.default={parse:s,safeParse:c},t.exports.parse=s,t.exports.safeParse=c,t.exports.defaultContentType=o}))(),VJ=class extends Error{name;status;request;response;constructor(e,t,n){super(e),this.name=`HttpError`,this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),`response`in n&&(this.response=n.response);let r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(RegExp(`(?<! ) .*$`,``),` [REDACTED]`)})),r.url=r.url.replace(/\bclient_secret=\w+/g,`client_secret=[REDACTED]`).replace(/\baccess_token=\w+/g,`access_token=[REDACTED]`),this.request=r}},HJ=`9.2.4`,UJ={headers:{"user-agent":`octokit-request.js/${HJ} ${oJ()}`}};function WJ(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let n=Object.prototype.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}async function GJ(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw Error(`fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing`);let n=e.request?.log||console,r=e.request?.parseSuccessResponseBody!==!1,i=WJ(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,a=Object.fromEntries(Object.entries(e.headers).map(([e,t])=>[e,String(t)])),o;try{o=await t(e.url,{method:e.method,body:i,redirect:e.request?.redirect,headers:a,signal:e.request?.signal,...e.body&&{duplex:`half`}})}catch(t){let n=`Unknown Error`;if(t instanceof Error){if(t.name===`AbortError`)throw t.status=500,t;n=t.message,t.name===`TypeError`&&`cause`in t&&(t.cause instanceof Error?n=t.cause.message:typeof t.cause==`string`&&(n=t.cause))}let r=new VJ(n,500,{request:e});throw r.cause=t,r}let s=o.status,c=o.url,l={};for(let[e,t]of o.headers)l[e]=t;let u={url:c,status:s,headers:l,data:``};if(`deprecation`in l){let t=l.link&&l.link.match(/<([^<>]+)>; rel="deprecation"/),r=t&&t.pop();n.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${r?`. See ${r}`:``}`)}if(s===204||s===205)return u;if(e.method===`HEAD`){if(s<400)return u;throw new VJ(o.statusText,s,{response:u,request:e})}if(s===304)throw u.data=await KJ(o),new VJ(`Not modified`,s,{response:u,request:e});if(s>=400)throw u.data=await KJ(o),new VJ(JJ(u.data),s,{response:u,request:e});return u.data=r?await KJ(o):o.body,u}async function KJ(e){let t=e.headers.get(`content-type`);if(!t)return e.text().catch(()=>``);let n=(0,BJ.safeParse)(t);if(qJ(n)){let t=``;try{return t=await e.text(),JSON.parse(t)}catch{return t}}else if(n.type.startsWith(`text/`)||n.parameters.charset?.toLowerCase()===`utf-8`)return e.text().catch(()=>``);else return e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function qJ(e){return e.type===`application/json`||e.type===`application/scim+json`}function JJ(e){if(typeof e==`string`)return e;if(e instanceof ArrayBuffer)return`Unknown error`;if(`message`in e){let t=`documentation_url`in e?` - ${e.documentation_url}`:``;return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(e=>JSON.stringify(e)).join(`, `)}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function YJ(e,t){let n=e.defaults(t);return Object.assign(function(e,t){let r=n.merge(e,t);if(!r.request||!r.request.hook)return GJ(n.parse(r));let i=(e,t)=>GJ(n.parse(n.merge(e,t)));return Object.assign(i,{endpoint:n,defaults:YJ.bind(null,n)}),r.request.hook(i,r)},{endpoint:n,defaults:YJ.bind(null,n)})}var XJ=YJ(zJ,UJ),ZJ=`0.0.0-development`;function QJ(e){return`Request failed due to following response errors:
`+e.errors.map(e=>` - ${e.message}`).join(`
`)}var $J=class extends Error{constructor(e,t,n){super(QJ(n)),this.request=e,this.headers=t,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`GraphqlResponseError`;errors;data},eY=[`method`,`baseUrl`,`url`,`headers`,`request`,`query`,`mediaType`,`operationName`],tY=[`query`,`method`,`url`],nY=/\/api\/v3\/?$/;function rY(e,t,n){if(n){if(typeof t==`string`&&`query`in n)return Promise.reject(Error(`[@octokit/graphql] "query" cannot be used as variable name`));for(let e in n)if(tY.includes(e))return Promise.reject(Error(`[@octokit/graphql] "${e}" cannot be used as variable name`))}let r=typeof t==`string`?Object.assign({query:t},n):t,i=Object.keys(r).reduce((e,t)=>eY.includes(t)?(e[t]=r[t],e):(e.variables||={},e.variables[t]=r[t],e),{}),a=r.baseUrl||e.endpoint.DEFAULTS.baseUrl;return nY.test(a)&&(i.url=a.replace(nY,`/api/graphql`)),e(i).then(e=>{if(e.data.errors){let t={};for(let n of Object.keys(e.headers))t[n]=e.headers[n];throw new $J(i,t,e.data)}return e.data.data})}function iY(e,t){let n=e.defaults(t);return Object.assign((e,t)=>rY(n,e,t),{defaults:iY.bind(null,n),endpoint:n.endpoint})}iY(XJ,{headers:{"user-agent":`octokit-graphql.js/${ZJ} ${oJ()}`},method:`POST`,url:`/graphql`});function aY(e){return iY(e,{method:`POST`,url:`/graphql`})}var oY=`(?:[a-zA-Z0-9_-]+)`,sY=`\\.`,cY=RegExp(`^${oY}${sY}${oY}${sY}${oY}$`),lY=cY.test.bind(cY);async function uY(e){let t=lY(e),n=e.startsWith(`v1.`)||e.startsWith(`ghs_`),r=e.startsWith(`ghu_`);return{type:`token`,token:e,tokenType:t?`app`:n?`installation`:r?`user-to-server`:`oauth`}}function dY(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function fY(e,t,n,r){let i=t.endpoint.merge(n,r);return i.headers.authorization=dY(e),t(i)}var pY=function(e){if(!e)throw Error(`[@octokit/auth-token] No token passed to createTokenAuth`);if(typeof e!=`string`)throw Error(`[@octokit/auth-token] Token passed to createTokenAuth is not a string`);return e=e.replace(/^(token|bearer) +/i,``),Object.assign(uY.bind(null,e),{hook:fY.bind(null,e)})},mY=`6.1.6`,hY=()=>{},gY=console.warn.bind(console),_Y=console.error.bind(console);function vY(e={}){return typeof e.debug!=`function`&&(e.debug=hY),typeof e.info!=`function`&&(e.info=hY),typeof e.warn!=`function`&&(e.warn=gY),typeof e.error!=`function`&&(e.error=_Y),e}var yY=`octokit-core.js/${mY} ${oJ()}`,bY=class{static VERSION=mY;static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let t=this.plugins;return class extends this{static plugins=t.concat(e.filter(e=>!t.includes(e)))}}constructor(e={}){let t=new hJ.Collection,n={baseUrl:XJ.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${yY}`:yY,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=XJ.defaults(n),this.graphql=aY(this.request).defaults(n),this.log=vY(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=pY(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}request;graphql;log;hook;auth},xY=`0.0.0-development`;function SY(e){if(!e.data)return{...e,data:[]};if(!(`total_count`in e.data&&!(`url`in e.data)))return e;let t=e.data.incomplete_results,n=e.data.repository_selection,r=e.data.total_count;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count;let i=Object.keys(e.data)[0];return e.data=e.data[i],t!==void 0&&(e.data.incomplete_results=t),n!==void 0&&(e.data.repository_selection=n),e.data.total_count=r,e}function CY(e,t,n){let r=typeof t==`function`?t.endpoint(n):e.request.endpoint(t,n),i=typeof t==`function`?t:e.request,a=r.method,o=r.headers,s=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!s)return{done:!0};try{let e=SY(await i({method:a,url:s,headers:o}));return s=((e.headers.link||``).match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:e}}catch(e){if(e.status!==409)throw e;return s=``,{value:{status:200,headers:{},data:[]}}}}})}}function wY(e,t,n,r){return typeof n==`function`&&(r=n,n=void 0),TY(e,[],CY(e,t,n)[Symbol.asyncIterator](),r)}function TY(e,t,n,r){return n.next().then(i=>{if(i.done)return t;let a=!1;function o(){a=!0}return t=t.concat(r?r(i.value,o):i.value.data),a?t:TY(e,t,n,r)})}var EY=Object.assign(wY,{iterator:CY});function DY(e){return{paginate:Object.assign(wY.bind(null,e),{iterator:CY.bind(null,e)})}}DY.VERSION=xY;var OY=(e,t)=>`The cursor at "${e.join(`,`)}" did not change its value "${t}" after a page transition. Please make sure your that your query is set up correctly.`,kY=class extends Error{constructor(e,t){super(OY(e.pathInQuery,t)),this.pageInfo=e,this.cursorValue=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`MissingCursorChangeError`},AY=class extends Error{constructor(e){super(`No pageInfo property found in response. Please make sure to specify the pageInfo in your query. Response-Data: ${JSON.stringify(e,null,2)}`),this.response=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name=`MissingPageInfo`},jY=e=>Object.prototype.toString.call(e)===`[object Object]`;function MY(e){let t=NY(e,`pageInfo`);if(t.length===0)throw new AY(e);return t}var NY=(e,t,n=[])=>{for(let r of Object.keys(e)){let i=[...n,r],a=e[r];if(jY(a)){if(a.hasOwnProperty(t))return i;let e=NY(a,t,i);if(e.length>0)return e}}return[]},PY=(e,t)=>t.reduce((e,t)=>e[t],e),FY=(e,t,n)=>{let r=t[t.length-1],i=PY(e,[...t].slice(0,-1));typeof n==`function`?i[r]=n(i[r]):i[r]=n},IY=e=>{let t=MY(e);return{pathInQuery:t,pageInfo:PY(e,[...t,`pageInfo`])}},LY=e=>e.hasOwnProperty(`hasNextPage`),RY=e=>LY(e)?e.endCursor:e.startCursor,zY=e=>LY(e)?e.hasNextPage:e.hasPreviousPage,BY=e=>(t,n={})=>{let r=!0,i={...n};return{[Symbol.asyncIterator]:()=>({async next(){if(!r)return{done:!0,value:{}};let n=await e.graphql(t,i),a=IY(n),o=RY(a.pageInfo);if(r=zY(a.pageInfo),r&&o===i.cursor)throw new kY(a,o);return i={...i,cursor:o},{done:!1,value:n}}})}},VY=(e,t)=>{if(Object.keys(e).length===0)return Object.assign(e,t);let n=MY(e),r=[...n,`nodes`],i=PY(t,r);i&&FY(e,r,e=>[...e,...i]);let a=[...n,`edges`],o=PY(t,a);o&&FY(e,a,e=>[...e,...o]);let s=[...n,`pageInfo`];return FY(e,s,PY(t,s)),e},HY=e=>{let t=BY(e);return async(e,n={})=>{let r={};for await(let i of t(e,n))r=VY(r,i);return r}};function UY(e){return{graphql:Object.assign(e.graphql,{paginate:Object.assign(HY(e),{iterator:BY(e)})})}}var WY=`14.0.0`,GY={actions:{addCustomLabelsToSelfHostedRunnerForOrg:[`POST /orgs/{org}/actions/runners/{runner_id}/labels`],addCustomLabelsToSelfHostedRunnerForRepo:[`POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],addRepoAccessToSelfHostedRunnerGroupInOrg:[`PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],approveWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve`],cancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel`],createEnvironmentVariable:[`POST /repos/{owner}/{repo}/environments/{environment_name}/variables`],createHostedRunnerForOrg:[`POST /orgs/{org}/actions/hosted-runners`],createOrUpdateEnvironmentSecret:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}`],createOrgVariable:[`POST /orgs/{org}/actions/variables`],createRegistrationTokenForOrg:[`POST /orgs/{org}/actions/runners/registration-token`],createRegistrationTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/registration-token`],createRemoveTokenForOrg:[`POST /orgs/{org}/actions/runners/remove-token`],createRemoveTokenForRepo:[`POST /repos/{owner}/{repo}/actions/runners/remove-token`],createRepoVariable:[`POST /repos/{owner}/{repo}/actions/variables`],createWorkflowDispatch:[`POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches`],deleteActionsCacheById:[`DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}`],deleteActionsCacheByKey:[`DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}`],deleteArtifact:[`DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],deleteEnvironmentSecret:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],deleteEnvironmentVariable:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],deleteHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],deleteOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}`],deleteOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}`],deleteRepoVariable:[`DELETE /repos/{owner}/{repo}/actions/variables/{name}`],deleteSelfHostedRunnerFromOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}`],deleteSelfHostedRunnerFromRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}`],deleteWorkflowRun:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}`],deleteWorkflowRunLogs:[`DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],disableSelectedRepositoryGithubActionsOrganization:[`DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}`],disableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable`],downloadArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}`],downloadJobLogsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs`],downloadWorkflowRunAttemptLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs`],downloadWorkflowRunLogs:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs`],enableSelectedRepositoryGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories/{repository_id}`],enableWorkflow:[`PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable`],forceCancelWorkflowRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel`],generateRunnerJitconfigForOrg:[`POST /orgs/{org}/actions/runners/generate-jitconfig`],generateRunnerJitconfigForRepo:[`POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig`],getActionsCacheList:[`GET /repos/{owner}/{repo}/actions/caches`],getActionsCacheUsage:[`GET /repos/{owner}/{repo}/actions/cache/usage`],getActionsCacheUsageByRepoForOrg:[`GET /orgs/{org}/actions/cache/usage-by-repository`],getActionsCacheUsageForOrg:[`GET /orgs/{org}/actions/cache/usage`],getAllowedActionsOrganization:[`GET /orgs/{org}/actions/permissions/selected-actions`],getAllowedActionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/selected-actions`],getArtifact:[`GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}`],getCustomOidcSubClaimForRepo:[`GET /repos/{owner}/{repo}/actions/oidc/customization/sub`],getEnvironmentPublicKey:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key`],getEnvironmentSecret:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}`],getEnvironmentVariable:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],getGithubActionsDefaultWorkflowPermissionsOrganization:[`GET /orgs/{org}/actions/permissions/workflow`],getGithubActionsDefaultWorkflowPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions/workflow`],getGithubActionsPermissionsOrganization:[`GET /orgs/{org}/actions/permissions`],getGithubActionsPermissionsRepository:[`GET /repos/{owner}/{repo}/actions/permissions`],getHostedRunnerForOrg:[`GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],getHostedRunnersGithubOwnedImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/github-owned`],getHostedRunnersLimitsForOrg:[`GET /orgs/{org}/actions/hosted-runners/limits`],getHostedRunnersMachineSpecsForOrg:[`GET /orgs/{org}/actions/hosted-runners/machine-sizes`],getHostedRunnersPartnerImagesForOrg:[`GET /orgs/{org}/actions/hosted-runners/images/partner`],getHostedRunnersPlatformsForOrg:[`GET /orgs/{org}/actions/hosted-runners/platforms`],getJobForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/jobs/{job_id}`],getOrgPublicKey:[`GET /orgs/{org}/actions/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}`],getOrgVariable:[`GET /orgs/{org}/actions/variables/{name}`],getPendingDeploymentsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],getRepoPermissions:[`GET /repos/{owner}/{repo}/actions/permissions`,{},{renamed:[`actions`,`getGithubActionsPermissionsRepository`]}],getRepoPublicKey:[`GET /repos/{owner}/{repo}/actions/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/actions/secrets/{secret_name}`],getRepoVariable:[`GET /repos/{owner}/{repo}/actions/variables/{name}`],getReviewsForRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals`],getSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}`],getSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}`],getWorkflow:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}`],getWorkflowAccessToRepository:[`GET /repos/{owner}/{repo}/actions/permissions/access`],getWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}`],getWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}`],getWorkflowRunUsage:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing`],getWorkflowUsage:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing`],listArtifactsForRepo:[`GET /repos/{owner}/{repo}/actions/artifacts`],listEnvironmentSecrets:[`GET /repos/{owner}/{repo}/environments/{environment_name}/secrets`],listEnvironmentVariables:[`GET /repos/{owner}/{repo}/environments/{environment_name}/variables`],listGithubHostedRunnersInGroupForOrg:[`GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners`],listHostedRunnersForOrg:[`GET /orgs/{org}/actions/hosted-runners`],listJobsForWorkflowRun:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs`],listJobsForWorkflowRunAttempt:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs`],listLabelsForSelfHostedRunnerForOrg:[`GET /orgs/{org}/actions/runners/{runner_id}/labels`],listLabelsForSelfHostedRunnerForRepo:[`GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],listOrgSecrets:[`GET /orgs/{org}/actions/secrets`],listOrgVariables:[`GET /orgs/{org}/actions/variables`],listRepoOrganizationSecrets:[`GET /repos/{owner}/{repo}/actions/organization-secrets`],listRepoOrganizationVariables:[`GET /repos/{owner}/{repo}/actions/organization-variables`],listRepoSecrets:[`GET /repos/{owner}/{repo}/actions/secrets`],listRepoVariables:[`GET /repos/{owner}/{repo}/actions/variables`],listRepoWorkflows:[`GET /repos/{owner}/{repo}/actions/workflows`],listRunnerApplicationsForOrg:[`GET /orgs/{org}/actions/runners/downloads`],listRunnerApplicationsForRepo:[`GET /repos/{owner}/{repo}/actions/runners/downloads`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/actions/secrets/{secret_name}/repositories`],listSelectedReposForOrgVariable:[`GET /orgs/{org}/actions/variables/{name}/repositories`],listSelectedRepositoriesEnabledGithubActionsOrganization:[`GET /orgs/{org}/actions/permissions/repositories`],listSelfHostedRunnersForOrg:[`GET /orgs/{org}/actions/runners`],listSelfHostedRunnersForRepo:[`GET /repos/{owner}/{repo}/actions/runners`],listWorkflowRunArtifacts:[`GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts`],listWorkflowRuns:[`GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs`],listWorkflowRunsForRepo:[`GET /repos/{owner}/{repo}/actions/runs`],reRunJobForWorkflowRun:[`POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun`],reRunWorkflow:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun`],reRunWorkflowFailedJobs:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs`],removeAllCustomLabelsFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels`],removeAllCustomLabelsFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],removeCustomLabelFromSelfHostedRunnerForOrg:[`DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}`],removeCustomLabelFromSelfHostedRunnerForRepo:[`DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgVariable:[`DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}`],reviewCustomGatesForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule`],reviewPendingDeploymentsForRun:[`POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments`],setAllowedActionsOrganization:[`PUT /orgs/{org}/actions/permissions/selected-actions`],setAllowedActionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/selected-actions`],setCustomLabelsForSelfHostedRunnerForOrg:[`PUT /orgs/{org}/actions/runners/{runner_id}/labels`],setCustomLabelsForSelfHostedRunnerForRepo:[`PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels`],setCustomOidcSubClaimForRepo:[`PUT /repos/{owner}/{repo}/actions/oidc/customization/sub`],setGithubActionsDefaultWorkflowPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions/workflow`],setGithubActionsDefaultWorkflowPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/workflow`],setGithubActionsPermissionsOrganization:[`PUT /orgs/{org}/actions/permissions`],setGithubActionsPermissionsRepository:[`PUT /repos/{owner}/{repo}/actions/permissions`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/actions/secrets/{secret_name}/repositories`],setSelectedReposForOrgVariable:[`PUT /orgs/{org}/actions/variables/{name}/repositories`],setSelectedRepositoriesEnabledGithubActionsOrganization:[`PUT /orgs/{org}/actions/permissions/repositories`],setWorkflowAccessToRepository:[`PUT /repos/{owner}/{repo}/actions/permissions/access`],updateEnvironmentVariable:[`PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}`],updateHostedRunnerForOrg:[`PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}`],updateOrgVariable:[`PATCH /orgs/{org}/actions/variables/{name}`],updateRepoVariable:[`PATCH /repos/{owner}/{repo}/actions/variables/{name}`]},activity:{checkRepoIsStarredByAuthenticatedUser:[`GET /user/starred/{owner}/{repo}`],deleteRepoSubscription:[`DELETE /repos/{owner}/{repo}/subscription`],deleteThreadSubscription:[`DELETE /notifications/threads/{thread_id}/subscription`],getFeeds:[`GET /feeds`],getRepoSubscription:[`GET /repos/{owner}/{repo}/subscription`],getThread:[`GET /notifications/threads/{thread_id}`],getThreadSubscriptionForAuthenticatedUser:[`GET /notifications/threads/{thread_id}/subscription`],listEventsForAuthenticatedUser:[`GET /users/{username}/events`],listNotificationsForAuthenticatedUser:[`GET /notifications`],listOrgEventsForAuthenticatedUser:[`GET /users/{username}/events/orgs/{org}`],listPublicEvents:[`GET /events`],listPublicEventsForRepoNetwork:[`GET /networks/{owner}/{repo}/events`],listPublicEventsForUser:[`GET /users/{username}/events/public`],listPublicOrgEvents:[`GET /orgs/{org}/events`],listReceivedEventsForUser:[`GET /users/{username}/received_events`],listReceivedPublicEventsForUser:[`GET /users/{username}/received_events/public`],listRepoEvents:[`GET /repos/{owner}/{repo}/events`],listRepoNotificationsForAuthenticatedUser:[`GET /repos/{owner}/{repo}/notifications`],listReposStarredByAuthenticatedUser:[`GET /user/starred`],listReposStarredByUser:[`GET /users/{username}/starred`],listReposWatchedByUser:[`GET /users/{username}/subscriptions`],listStargazersForRepo:[`GET /repos/{owner}/{repo}/stargazers`],listWatchedReposForAuthenticatedUser:[`GET /user/subscriptions`],listWatchersForRepo:[`GET /repos/{owner}/{repo}/subscribers`],markNotificationsAsRead:[`PUT /notifications`],markRepoNotificationsAsRead:[`PUT /repos/{owner}/{repo}/notifications`],markThreadAsDone:[`DELETE /notifications/threads/{thread_id}`],markThreadAsRead:[`PATCH /notifications/threads/{thread_id}`],setRepoSubscription:[`PUT /repos/{owner}/{repo}/subscription`],setThreadSubscription:[`PUT /notifications/threads/{thread_id}/subscription`],starRepoForAuthenticatedUser:[`PUT /user/starred/{owner}/{repo}`],unstarRepoForAuthenticatedUser:[`DELETE /user/starred/{owner}/{repo}`]},apps:{addRepoToInstallation:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`addRepoToInstallationForAuthenticatedUser`]}],addRepoToInstallationForAuthenticatedUser:[`PUT /user/installations/{installation_id}/repositories/{repository_id}`],checkToken:[`POST /applications/{client_id}/token`],createFromManifest:[`POST /app-manifests/{code}/conversions`],createInstallationAccessToken:[`POST /app/installations/{installation_id}/access_tokens`],deleteAuthorization:[`DELETE /applications/{client_id}/grant`],deleteInstallation:[`DELETE /app/installations/{installation_id}`],deleteToken:[`DELETE /applications/{client_id}/token`],getAuthenticated:[`GET /app`],getBySlug:[`GET /apps/{app_slug}`],getInstallation:[`GET /app/installations/{installation_id}`],getOrgInstallation:[`GET /orgs/{org}/installation`],getRepoInstallation:[`GET /repos/{owner}/{repo}/installation`],getSubscriptionPlanForAccount:[`GET /marketplace_listing/accounts/{account_id}`],getSubscriptionPlanForAccountStubbed:[`GET /marketplace_listing/stubbed/accounts/{account_id}`],getUserInstallation:[`GET /users/{username}/installation`],getWebhookConfigForApp:[`GET /app/hook/config`],getWebhookDelivery:[`GET /app/hook/deliveries/{delivery_id}`],listAccountsForPlan:[`GET /marketplace_listing/plans/{plan_id}/accounts`],listAccountsForPlanStubbed:[`GET /marketplace_listing/stubbed/plans/{plan_id}/accounts`],listInstallationReposForAuthenticatedUser:[`GET /user/installations/{installation_id}/repositories`],listInstallationRequestsForAuthenticatedApp:[`GET /app/installation-requests`],listInstallations:[`GET /app/installations`],listInstallationsForAuthenticatedUser:[`GET /user/installations`],listPlans:[`GET /marketplace_listing/plans`],listPlansStubbed:[`GET /marketplace_listing/stubbed/plans`],listReposAccessibleToInstallation:[`GET /installation/repositories`],listSubscriptionsForAuthenticatedUser:[`GET /user/marketplace_purchases`],listSubscriptionsForAuthenticatedUserStubbed:[`GET /user/marketplace_purchases/stubbed`],listWebhookDeliveries:[`GET /app/hook/deliveries`],redeliverWebhookDelivery:[`POST /app/hook/deliveries/{delivery_id}/attempts`],removeRepoFromInstallation:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`,{},{renamed:[`apps`,`removeRepoFromInstallationForAuthenticatedUser`]}],removeRepoFromInstallationForAuthenticatedUser:[`DELETE /user/installations/{installation_id}/repositories/{repository_id}`],resetToken:[`PATCH /applications/{client_id}/token`],revokeInstallationAccessToken:[`DELETE /installation/token`],scopeToken:[`POST /applications/{client_id}/token/scoped`],suspendInstallation:[`PUT /app/installations/{installation_id}/suspended`],unsuspendInstallation:[`DELETE /app/installations/{installation_id}/suspended`],updateWebhookConfigForApp:[`PATCH /app/hook/config`]},billing:{getGithubActionsBillingOrg:[`GET /orgs/{org}/settings/billing/actions`],getGithubActionsBillingUser:[`GET /users/{username}/settings/billing/actions`],getGithubBillingUsageReportOrg:[`GET /organizations/{org}/settings/billing/usage`],getGithubPackagesBillingOrg:[`GET /orgs/{org}/settings/billing/packages`],getGithubPackagesBillingUser:[`GET /users/{username}/settings/billing/packages`],getSharedStorageBillingOrg:[`GET /orgs/{org}/settings/billing/shared-storage`],getSharedStorageBillingUser:[`GET /users/{username}/settings/billing/shared-storage`]},campaigns:{createCampaign:[`POST /orgs/{org}/campaigns`],deleteCampaign:[`DELETE /orgs/{org}/campaigns/{campaign_number}`],getCampaignSummary:[`GET /orgs/{org}/campaigns/{campaign_number}`],listOrgCampaigns:[`GET /orgs/{org}/campaigns`],updateCampaign:[`PATCH /orgs/{org}/campaigns/{campaign_number}`]},checks:{create:[`POST /repos/{owner}/{repo}/check-runs`],createSuite:[`POST /repos/{owner}/{repo}/check-suites`],get:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}`],getSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}`],listAnnotations:[`GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations`],listForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-runs`],listForSuite:[`GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs`],listSuitesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/check-suites`],rerequestRun:[`POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest`],rerequestSuite:[`POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest`],setSuitesPreferences:[`PATCH /repos/{owner}/{repo}/check-suites/preferences`],update:[`PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}`]},codeScanning:{commitAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits`],createAutofix:[`POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],createVariantAnalysis:[`POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses`],deleteAnalysis:[`DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}`],deleteCodeqlDatabase:[`DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getAlert:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`,{},{renamedParameters:{alert_id:`alert_number`}}],getAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}`],getAutofix:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix`],getCodeqlDatabase:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}`],getDefaultSetup:[`GET /repos/{owner}/{repo}/code-scanning/default-setup`],getSarif:[`GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}`],getVariantAnalysis:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}`],getVariantAnalysisRepoTask:[`GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}`],listAlertInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`],listAlertsForOrg:[`GET /orgs/{org}/code-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/code-scanning/alerts`],listAlertsInstances:[`GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances`,{},{renamed:[`codeScanning`,`listAlertInstances`]}],listCodeqlDatabases:[`GET /repos/{owner}/{repo}/code-scanning/codeql/databases`],listRecentAnalyses:[`GET /repos/{owner}/{repo}/code-scanning/analyses`],updateAlert:[`PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}`],updateDefaultSetup:[`PATCH /repos/{owner}/{repo}/code-scanning/default-setup`],uploadSarif:[`POST /repos/{owner}/{repo}/code-scanning/sarifs`]},codeSecurity:{attachConfiguration:[`POST /orgs/{org}/code-security/configurations/{configuration_id}/attach`],attachEnterpriseConfiguration:[`POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach`],createConfiguration:[`POST /orgs/{org}/code-security/configurations`],createConfigurationForEnterprise:[`POST /enterprises/{enterprise}/code-security/configurations`],deleteConfiguration:[`DELETE /orgs/{org}/code-security/configurations/{configuration_id}`],deleteConfigurationForEnterprise:[`DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],detachConfiguration:[`DELETE /orgs/{org}/code-security/configurations/detach`],getConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}`],getConfigurationForRepository:[`GET /repos/{owner}/{repo}/code-security-configuration`],getConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations`],getConfigurationsForOrg:[`GET /orgs/{org}/code-security/configurations`],getDefaultConfigurations:[`GET /orgs/{org}/code-security/configurations/defaults`],getDefaultConfigurationsForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/defaults`],getRepositoriesForConfiguration:[`GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories`],getRepositoriesForEnterpriseConfiguration:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories`],getSingleConfigurationForEnterprise:[`GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}`],setConfigurationAsDefault:[`PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults`],setConfigurationAsDefaultForEnterprise:[`PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults`],updateConfiguration:[`PATCH /orgs/{org}/code-security/configurations/{configuration_id}`],updateEnterpriseConfiguration:[`PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}`]},codesOfConduct:{getAllCodesOfConduct:[`GET /codes_of_conduct`],getConductCode:[`GET /codes_of_conduct/{key}`]},codespaces:{addRepositoryForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],checkPermissionsForDevcontainer:[`GET /repos/{owner}/{repo}/codespaces/permissions_check`],codespaceMachinesForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/machines`],createForAuthenticatedUser:[`POST /user/codespaces`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],createOrUpdateSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}`],createWithPrForAuthenticatedUser:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces`],createWithRepoForAuthenticatedUser:[`POST /repos/{owner}/{repo}/codespaces`],deleteForAuthenticatedUser:[`DELETE /user/codespaces/{codespace_name}`],deleteFromOrganization:[`DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],deleteSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}`],exportForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/exports`],getCodespacesForUserInOrg:[`GET /orgs/{org}/members/{username}/codespaces`],getExportDetailsForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}/exports/{export_id}`],getForAuthenticatedUser:[`GET /user/codespaces/{codespace_name}`],getOrgPublicKey:[`GET /orgs/{org}/codespaces/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}`],getPublicKeyForAuthenticatedUser:[`GET /user/codespaces/secrets/public-key`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/codespaces/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}`],getSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}`],listDevcontainersInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/devcontainers`],listForAuthenticatedUser:[`GET /user/codespaces`],listInOrganization:[`GET /orgs/{org}/codespaces`,{},{renamedParameters:{org_id:`org`}}],listInRepositoryForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces`],listOrgSecrets:[`GET /orgs/{org}/codespaces/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/codespaces/secrets`],listRepositoriesForSecretForAuthenticatedUser:[`GET /user/codespaces/secrets/{secret_name}/repositories`],listSecretsForAuthenticatedUser:[`GET /user/codespaces/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],preFlightWithRepoForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/new`],publishForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/publish`],removeRepositoryForSecretForAuthenticatedUser:[`DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}`],repoMachinesForAuthenticatedUser:[`GET /repos/{owner}/{repo}/codespaces/machines`],setRepositoriesForSecretForAuthenticatedUser:[`PUT /user/codespaces/secrets/{secret_name}/repositories`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories`],startForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/start`],stopForAuthenticatedUser:[`POST /user/codespaces/{codespace_name}/stop`],stopInOrganization:[`POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop`],updateForAuthenticatedUser:[`PATCH /user/codespaces/{codespace_name}`]},copilot:{addCopilotSeatsForTeams:[`POST /orgs/{org}/copilot/billing/selected_teams`],addCopilotSeatsForUsers:[`POST /orgs/{org}/copilot/billing/selected_users`],cancelCopilotSeatAssignmentForTeams:[`DELETE /orgs/{org}/copilot/billing/selected_teams`],cancelCopilotSeatAssignmentForUsers:[`DELETE /orgs/{org}/copilot/billing/selected_users`],copilotMetricsForOrganization:[`GET /orgs/{org}/copilot/metrics`],copilotMetricsForTeam:[`GET /orgs/{org}/team/{team_slug}/copilot/metrics`],getCopilotOrganizationDetails:[`GET /orgs/{org}/copilot/billing`],getCopilotSeatDetailsForUser:[`GET /orgs/{org}/members/{username}/copilot`],listCopilotSeats:[`GET /orgs/{org}/copilot/billing/seats`]},dependabot:{addSelectedRepoToOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],createOrUpdateOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}`],createOrUpdateRepoSecret:[`PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],deleteOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}`],deleteRepoSecret:[`DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],getAlert:[`GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`],getOrgPublicKey:[`GET /orgs/{org}/dependabot/secrets/public-key`],getOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}`],getRepoPublicKey:[`GET /repos/{owner}/{repo}/dependabot/secrets/public-key`],getRepoSecret:[`GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/dependabot/alerts`],listAlertsForOrg:[`GET /orgs/{org}/dependabot/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/dependabot/alerts`],listOrgSecrets:[`GET /orgs/{org}/dependabot/secrets`],listRepoSecrets:[`GET /repos/{owner}/{repo}/dependabot/secrets`],listSelectedReposForOrgSecret:[`GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],removeSelectedRepoFromOrgSecret:[`DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}`],setSelectedReposForOrgSecret:[`PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories`],updateAlert:[`PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}`]},dependencyGraph:{createRepositorySnapshot:[`POST /repos/{owner}/{repo}/dependency-graph/snapshots`],diffRange:[`GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}`],exportSbom:[`GET /repos/{owner}/{repo}/dependency-graph/sbom`]},emojis:{get:[`GET /emojis`]},gists:{checkIsStarred:[`GET /gists/{gist_id}/star`],create:[`POST /gists`],createComment:[`POST /gists/{gist_id}/comments`],delete:[`DELETE /gists/{gist_id}`],deleteComment:[`DELETE /gists/{gist_id}/comments/{comment_id}`],fork:[`POST /gists/{gist_id}/forks`],get:[`GET /gists/{gist_id}`],getComment:[`GET /gists/{gist_id}/comments/{comment_id}`],getRevision:[`GET /gists/{gist_id}/{sha}`],list:[`GET /gists`],listComments:[`GET /gists/{gist_id}/comments`],listCommits:[`GET /gists/{gist_id}/commits`],listForUser:[`GET /users/{username}/gists`],listForks:[`GET /gists/{gist_id}/forks`],listPublic:[`GET /gists/public`],listStarred:[`GET /gists/starred`],star:[`PUT /gists/{gist_id}/star`],unstar:[`DELETE /gists/{gist_id}/star`],update:[`PATCH /gists/{gist_id}`],updateComment:[`PATCH /gists/{gist_id}/comments/{comment_id}`]},git:{createBlob:[`POST /repos/{owner}/{repo}/git/blobs`],createCommit:[`POST /repos/{owner}/{repo}/git/commits`],createRef:[`POST /repos/{owner}/{repo}/git/refs`],createTag:[`POST /repos/{owner}/{repo}/git/tags`],createTree:[`POST /repos/{owner}/{repo}/git/trees`],deleteRef:[`DELETE /repos/{owner}/{repo}/git/refs/{ref}`],getBlob:[`GET /repos/{owner}/{repo}/git/blobs/{file_sha}`],getCommit:[`GET /repos/{owner}/{repo}/git/commits/{commit_sha}`],getRef:[`GET /repos/{owner}/{repo}/git/ref/{ref}`],getTag:[`GET /repos/{owner}/{repo}/git/tags/{tag_sha}`],getTree:[`GET /repos/{owner}/{repo}/git/trees/{tree_sha}`],listMatchingRefs:[`GET /repos/{owner}/{repo}/git/matching-refs/{ref}`],updateRef:[`PATCH /repos/{owner}/{repo}/git/refs/{ref}`]},gitignore:{getAllTemplates:[`GET /gitignore/templates`],getTemplate:[`GET /gitignore/templates/{name}`]},hostedCompute:{createNetworkConfigurationForOrg:[`POST /orgs/{org}/settings/network-configurations`],deleteNetworkConfigurationFromOrg:[`DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkConfigurationForOrg:[`GET /orgs/{org}/settings/network-configurations/{network_configuration_id}`],getNetworkSettingsForOrg:[`GET /orgs/{org}/settings/network-settings/{network_settings_id}`],listNetworkConfigurationsForOrg:[`GET /orgs/{org}/settings/network-configurations`],updateNetworkConfigurationForOrg:[`PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}`]},interactions:{getRestrictionsForAuthenticatedUser:[`GET /user/interaction-limits`],getRestrictionsForOrg:[`GET /orgs/{org}/interaction-limits`],getRestrictionsForRepo:[`GET /repos/{owner}/{repo}/interaction-limits`],getRestrictionsForYourPublicRepos:[`GET /user/interaction-limits`,{},{renamed:[`interactions`,`getRestrictionsForAuthenticatedUser`]}],removeRestrictionsForAuthenticatedUser:[`DELETE /user/interaction-limits`],removeRestrictionsForOrg:[`DELETE /orgs/{org}/interaction-limits`],removeRestrictionsForRepo:[`DELETE /repos/{owner}/{repo}/interaction-limits`],removeRestrictionsForYourPublicRepos:[`DELETE /user/interaction-limits`,{},{renamed:[`interactions`,`removeRestrictionsForAuthenticatedUser`]}],setRestrictionsForAuthenticatedUser:[`PUT /user/interaction-limits`],setRestrictionsForOrg:[`PUT /orgs/{org}/interaction-limits`],setRestrictionsForRepo:[`PUT /repos/{owner}/{repo}/interaction-limits`],setRestrictionsForYourPublicRepos:[`PUT /user/interaction-limits`,{},{renamed:[`interactions`,`setRestrictionsForAuthenticatedUser`]}]},issues:{addAssignees:[`POST /repos/{owner}/{repo}/issues/{issue_number}/assignees`],addLabels:[`POST /repos/{owner}/{repo}/issues/{issue_number}/labels`],addSubIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],checkUserCanBeAssigned:[`GET /repos/{owner}/{repo}/assignees/{assignee}`],checkUserCanBeAssignedToIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}`],create:[`POST /repos/{owner}/{repo}/issues`],createComment:[`POST /repos/{owner}/{repo}/issues/{issue_number}/comments`],createLabel:[`POST /repos/{owner}/{repo}/labels`],createMilestone:[`POST /repos/{owner}/{repo}/milestones`],deleteComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}`],deleteLabel:[`DELETE /repos/{owner}/{repo}/labels/{name}`],deleteMilestone:[`DELETE /repos/{owner}/{repo}/milestones/{milestone_number}`],get:[`GET /repos/{owner}/{repo}/issues/{issue_number}`],getComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}`],getEvent:[`GET /repos/{owner}/{repo}/issues/events/{event_id}`],getLabel:[`GET /repos/{owner}/{repo}/labels/{name}`],getMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}`],list:[`GET /issues`],listAssignees:[`GET /repos/{owner}/{repo}/assignees`],listComments:[`GET /repos/{owner}/{repo}/issues/{issue_number}/comments`],listCommentsForRepo:[`GET /repos/{owner}/{repo}/issues/comments`],listEvents:[`GET /repos/{owner}/{repo}/issues/{issue_number}/events`],listEventsForRepo:[`GET /repos/{owner}/{repo}/issues/events`],listEventsForTimeline:[`GET /repos/{owner}/{repo}/issues/{issue_number}/timeline`],listForAuthenticatedUser:[`GET /user/issues`],listForOrg:[`GET /orgs/{org}/issues`],listForRepo:[`GET /repos/{owner}/{repo}/issues`],listLabelsForMilestone:[`GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels`],listLabelsForRepo:[`GET /repos/{owner}/{repo}/labels`],listLabelsOnIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/labels`],listMilestones:[`GET /repos/{owner}/{repo}/milestones`],listSubIssues:[`GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues`],lock:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/lock`],removeAllLabels:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels`],removeAssignees:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees`],removeLabel:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}`],removeSubIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue`],reprioritizeSubIssue:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`],setLabels:[`PUT /repos/{owner}/{repo}/issues/{issue_number}/labels`],unlock:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock`],update:[`PATCH /repos/{owner}/{repo}/issues/{issue_number}`],updateComment:[`PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}`],updateLabel:[`PATCH /repos/{owner}/{repo}/labels/{name}`],updateMilestone:[`PATCH /repos/{owner}/{repo}/milestones/{milestone_number}`]},licenses:{get:[`GET /licenses/{license}`],getAllCommonlyUsed:[`GET /licenses`],getForRepo:[`GET /repos/{owner}/{repo}/license`]},markdown:{render:[`POST /markdown`],renderRaw:[`POST /markdown/raw`,{headers:{"content-type":`text/plain; charset=utf-8`}}]},meta:{get:[`GET /meta`],getAllVersions:[`GET /versions`],getOctocat:[`GET /octocat`],getZen:[`GET /zen`],root:[`GET /`]},migrations:{deleteArchiveForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/archive`],deleteArchiveForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/archive`],downloadArchiveForOrg:[`GET /orgs/{org}/migrations/{migration_id}/archive`],getArchiveForAuthenticatedUser:[`GET /user/migrations/{migration_id}/archive`],getStatusForAuthenticatedUser:[`GET /user/migrations/{migration_id}`],getStatusForOrg:[`GET /orgs/{org}/migrations/{migration_id}`],listForAuthenticatedUser:[`GET /user/migrations`],listForOrg:[`GET /orgs/{org}/migrations`],listReposForAuthenticatedUser:[`GET /user/migrations/{migration_id}/repositories`],listReposForOrg:[`GET /orgs/{org}/migrations/{migration_id}/repositories`],listReposForUser:[`GET /user/migrations/{migration_id}/repositories`,{},{renamed:[`migrations`,`listReposForAuthenticatedUser`]}],startForAuthenticatedUser:[`POST /user/migrations`],startForOrg:[`POST /orgs/{org}/migrations`],unlockRepoForAuthenticatedUser:[`DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock`],unlockRepoForOrg:[`DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock`]},oidc:{getOidcCustomSubTemplateForOrg:[`GET /orgs/{org}/actions/oidc/customization/sub`],updateOidcCustomSubTemplateForOrg:[`PUT /orgs/{org}/actions/oidc/customization/sub`]},orgs:{addSecurityManagerTeam:[`PUT /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team`}],assignTeamToOrgRole:[`PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],assignUserToOrgRole:[`PUT /orgs/{org}/organization-roles/users/{username}/{role_id}`],blockUser:[`PUT /orgs/{org}/blocks/{username}`],cancelInvitation:[`DELETE /orgs/{org}/invitations/{invitation_id}`],checkBlockedUser:[`GET /orgs/{org}/blocks/{username}`],checkMembershipForUser:[`GET /orgs/{org}/members/{username}`],checkPublicMembershipForUser:[`GET /orgs/{org}/public_members/{username}`],convertMemberToOutsideCollaborator:[`PUT /orgs/{org}/outside_collaborators/{username}`],createInvitation:[`POST /orgs/{org}/invitations`],createIssueType:[`POST /orgs/{org}/issue-types`],createOrUpdateCustomProperties:[`PATCH /orgs/{org}/properties/schema`],createOrUpdateCustomPropertiesValuesForRepos:[`PATCH /orgs/{org}/properties/values`],createOrUpdateCustomProperty:[`PUT /orgs/{org}/properties/schema/{custom_property_name}`],createWebhook:[`POST /orgs/{org}/hooks`],delete:[`DELETE /orgs/{org}`],deleteIssueType:[`DELETE /orgs/{org}/issue-types/{issue_type_id}`],deleteWebhook:[`DELETE /orgs/{org}/hooks/{hook_id}`],enableOrDisableSecurityProductOnAllOrgRepos:[`POST /orgs/{org}/{security_product}/{enablement}`,{},{deprecated:`octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization`}],get:[`GET /orgs/{org}`],getAllCustomProperties:[`GET /orgs/{org}/properties/schema`],getCustomProperty:[`GET /orgs/{org}/properties/schema/{custom_property_name}`],getMembershipForAuthenticatedUser:[`GET /user/memberships/orgs/{org}`],getMembershipForUser:[`GET /orgs/{org}/memberships/{username}`],getOrgRole:[`GET /orgs/{org}/organization-roles/{role_id}`],getOrgRulesetHistory:[`GET /orgs/{org}/rulesets/{ruleset_id}/history`],getOrgRulesetVersion:[`GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}`],getWebhook:[`GET /orgs/{org}/hooks/{hook_id}`],getWebhookConfigForOrg:[`GET /orgs/{org}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}`],list:[`GET /organizations`],listAppInstallations:[`GET /orgs/{org}/installations`],listAttestations:[`GET /orgs/{org}/attestations/{subject_digest}`],listBlockedUsers:[`GET /orgs/{org}/blocks`],listCustomPropertiesValuesForRepos:[`GET /orgs/{org}/properties/values`],listFailedInvitations:[`GET /orgs/{org}/failed_invitations`],listForAuthenticatedUser:[`GET /user/orgs`],listForUser:[`GET /users/{username}/orgs`],listInvitationTeams:[`GET /orgs/{org}/invitations/{invitation_id}/teams`],listIssueTypes:[`GET /orgs/{org}/issue-types`],listMembers:[`GET /orgs/{org}/members`],listMembershipsForAuthenticatedUser:[`GET /user/memberships/orgs`],listOrgRoleTeams:[`GET /orgs/{org}/organization-roles/{role_id}/teams`],listOrgRoleUsers:[`GET /orgs/{org}/organization-roles/{role_id}/users`],listOrgRoles:[`GET /orgs/{org}/organization-roles`],listOrganizationFineGrainedPermissions:[`GET /orgs/{org}/organization-fine-grained-permissions`],listOutsideCollaborators:[`GET /orgs/{org}/outside_collaborators`],listPatGrantRepositories:[`GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories`],listPatGrantRequestRepositories:[`GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories`],listPatGrantRequests:[`GET /orgs/{org}/personal-access-token-requests`],listPatGrants:[`GET /orgs/{org}/personal-access-tokens`],listPendingInvitations:[`GET /orgs/{org}/invitations`],listPublicMembers:[`GET /orgs/{org}/public_members`],listSecurityManagerTeams:[`GET /orgs/{org}/security-managers`,{},{deprecated:`octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams`}],listWebhookDeliveries:[`GET /orgs/{org}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /orgs/{org}/hooks`],pingWebhook:[`POST /orgs/{org}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeCustomProperty:[`DELETE /orgs/{org}/properties/schema/{custom_property_name}`],removeMember:[`DELETE /orgs/{org}/members/{username}`],removeMembershipForUser:[`DELETE /orgs/{org}/memberships/{username}`],removeOutsideCollaborator:[`DELETE /orgs/{org}/outside_collaborators/{username}`],removePublicMembershipForAuthenticatedUser:[`DELETE /orgs/{org}/public_members/{username}`],removeSecurityManagerTeam:[`DELETE /orgs/{org}/security-managers/teams/{team_slug}`,{},{deprecated:`octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team`}],reviewPatGrantRequest:[`POST /orgs/{org}/personal-access-token-requests/{pat_request_id}`],reviewPatGrantRequestsInBulk:[`POST /orgs/{org}/personal-access-token-requests`],revokeAllOrgRolesTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}`],revokeAllOrgRolesUser:[`DELETE /orgs/{org}/organization-roles/users/{username}`],revokeOrgRoleTeam:[`DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}`],revokeOrgRoleUser:[`DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}`],setMembershipForUser:[`PUT /orgs/{org}/memberships/{username}`],setPublicMembershipForAuthenticatedUser:[`PUT /orgs/{org}/public_members/{username}`],unblockUser:[`DELETE /orgs/{org}/blocks/{username}`],update:[`PATCH /orgs/{org}`],updateIssueType:[`PUT /orgs/{org}/issue-types/{issue_type_id}`],updateMembershipForAuthenticatedUser:[`PATCH /user/memberships/orgs/{org}`],updatePatAccess:[`POST /orgs/{org}/personal-access-tokens/{pat_id}`],updatePatAccesses:[`POST /orgs/{org}/personal-access-tokens`],updateWebhook:[`PATCH /orgs/{org}/hooks/{hook_id}`],updateWebhookConfigForOrg:[`PATCH /orgs/{org}/hooks/{hook_id}/config`]},packages:{deletePackageForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}`],deletePackageForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}`],deletePackageForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}`],deletePackageVersionForAuthenticatedUser:[`DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForOrg:[`DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],deletePackageVersionForUser:[`DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getAllPackageVersionsForAPackageOwnedByAnOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByOrg`]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`,{},{renamed:[`packages`,`getAllPackageVersionsForPackageOwnedByAuthenticatedUser`]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByOrg:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions`],getAllPackageVersionsForPackageOwnedByUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions`],getPackageForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}`],getPackageForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}`],getPackageForUser:[`GET /users/{username}/packages/{package_type}/{package_name}`],getPackageVersionForAuthenticatedUser:[`GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForOrganization:[`GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}`],getPackageVersionForUser:[`GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}`],listDockerMigrationConflictingPackagesForAuthenticatedUser:[`GET /user/docker/conflicts`],listDockerMigrationConflictingPackagesForOrganization:[`GET /orgs/{org}/docker/conflicts`],listDockerMigrationConflictingPackagesForUser:[`GET /users/{username}/docker/conflicts`],listPackagesForAuthenticatedUser:[`GET /user/packages`],listPackagesForOrganization:[`GET /orgs/{org}/packages`],listPackagesForUser:[`GET /users/{username}/packages`],restorePackageForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}`],restorePackageVersionForAuthenticatedUser:[`POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForOrg:[`POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`],restorePackageVersionForUser:[`POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore`]},privateRegistries:{createOrgPrivateRegistry:[`POST /orgs/{org}/private-registries`],deleteOrgPrivateRegistry:[`DELETE /orgs/{org}/private-registries/{secret_name}`],getOrgPrivateRegistry:[`GET /orgs/{org}/private-registries/{secret_name}`],getOrgPublicKey:[`GET /orgs/{org}/private-registries/public-key`],listOrgPrivateRegistries:[`GET /orgs/{org}/private-registries`],updateOrgPrivateRegistry:[`PATCH /orgs/{org}/private-registries/{secret_name}`]},pulls:{checkIfMerged:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/merge`],create:[`POST /repos/{owner}/{repo}/pulls`],createReplyForReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`],createReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],createReviewComment:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/comments`],deletePendingReview:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],deleteReviewComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}`],dismissReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals`],get:[`GET /repos/{owner}/{repo}/pulls/{pull_number}`],getReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],getReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}`],list:[`GET /repos/{owner}/{repo}/pulls`],listCommentsForReview:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments`],listCommits:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/commits`],listFiles:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/files`],listRequestedReviewers:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],listReviewComments:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/comments`],listReviewCommentsForRepo:[`GET /repos/{owner}/{repo}/pulls/comments`],listReviews:[`GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews`],merge:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge`],removeRequestedReviewers:[`DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],requestReviewers:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`],submitReview:[`POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events`],update:[`PATCH /repos/{owner}/{repo}/pulls/{pull_number}`],updateBranch:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch`],updateReview:[`PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}`],updateReviewComment:[`PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}`]},rateLimit:{get:[`GET /rate_limit`]},reactions:{createForCommitComment:[`POST /repos/{owner}/{repo}/comments/{comment_id}/reactions`],createForIssue:[`POST /repos/{owner}/{repo}/issues/{issue_number}/reactions`],createForIssueComment:[`POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],createForPullRequestReviewComment:[`POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],createForRelease:[`POST /repos/{owner}/{repo}/releases/{release_id}/reactions`],createForTeamDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],createForTeamDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`],deleteForCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}`],deleteForIssue:[`DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}`],deleteForIssueComment:[`DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}`],deleteForPullRequestComment:[`DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}`],deleteForRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}`],deleteForTeamDiscussion:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}`],deleteForTeamDiscussionComment:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}`],listForCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}/reactions`],listForIssue:[`GET /repos/{owner}/{repo}/issues/{issue_number}/reactions`],listForIssueComment:[`GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions`],listForPullRequestReviewComment:[`GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions`],listForRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}/reactions`],listForTeamDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions`],listForTeamDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions`]},repos:{acceptInvitation:[`PATCH /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`acceptInvitationForAuthenticatedUser`]}],acceptInvitationForAuthenticatedUser:[`PATCH /user/repository_invitations/{invitation_id}`],addAppAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],addCollaborator:[`PUT /repos/{owner}/{repo}/collaborators/{username}`],addStatusCheckContexts:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],addTeamAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],addUserAccessRestrictions:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],cancelPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel`],checkAutomatedSecurityFixes:[`GET /repos/{owner}/{repo}/automated-security-fixes`],checkCollaborator:[`GET /repos/{owner}/{repo}/collaborators/{username}`],checkPrivateVulnerabilityReporting:[`GET /repos/{owner}/{repo}/private-vulnerability-reporting`],checkVulnerabilityAlerts:[`GET /repos/{owner}/{repo}/vulnerability-alerts`],codeownersErrors:[`GET /repos/{owner}/{repo}/codeowners/errors`],compareCommits:[`GET /repos/{owner}/{repo}/compare/{base}...{head}`],compareCommitsWithBasehead:[`GET /repos/{owner}/{repo}/compare/{basehead}`],createAttestation:[`POST /repos/{owner}/{repo}/attestations`],createAutolink:[`POST /repos/{owner}/{repo}/autolinks`],createCommitComment:[`POST /repos/{owner}/{repo}/commits/{commit_sha}/comments`],createCommitSignatureProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],createCommitStatus:[`POST /repos/{owner}/{repo}/statuses/{sha}`],createDeployKey:[`POST /repos/{owner}/{repo}/keys`],createDeployment:[`POST /repos/{owner}/{repo}/deployments`],createDeploymentBranchPolicy:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],createDeploymentProtectionRule:[`POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],createDeploymentStatus:[`POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],createDispatchEvent:[`POST /repos/{owner}/{repo}/dispatches`],createForAuthenticatedUser:[`POST /user/repos`],createFork:[`POST /repos/{owner}/{repo}/forks`],createInOrg:[`POST /orgs/{org}/repos`],createOrUpdateCustomPropertiesValues:[`PATCH /repos/{owner}/{repo}/properties/values`],createOrUpdateEnvironment:[`PUT /repos/{owner}/{repo}/environments/{environment_name}`],createOrUpdateFileContents:[`PUT /repos/{owner}/{repo}/contents/{path}`],createOrgRuleset:[`POST /orgs/{org}/rulesets`],createPagesDeployment:[`POST /repos/{owner}/{repo}/pages/deployments`],createPagesSite:[`POST /repos/{owner}/{repo}/pages`],createRelease:[`POST /repos/{owner}/{repo}/releases`],createRepoRuleset:[`POST /repos/{owner}/{repo}/rulesets`],createUsingTemplate:[`POST /repos/{template_owner}/{template_repo}/generate`],createWebhook:[`POST /repos/{owner}/{repo}/hooks`],declineInvitation:[`DELETE /user/repository_invitations/{invitation_id}`,{},{renamed:[`repos`,`declineInvitationForAuthenticatedUser`]}],declineInvitationForAuthenticatedUser:[`DELETE /user/repository_invitations/{invitation_id}`],delete:[`DELETE /repos/{owner}/{repo}`],deleteAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],deleteAdminBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],deleteAnEnvironment:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}`],deleteAutolink:[`DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}`],deleteBranchProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection`],deleteCommitComment:[`DELETE /repos/{owner}/{repo}/comments/{comment_id}`],deleteCommitSignatureProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],deleteDeployKey:[`DELETE /repos/{owner}/{repo}/keys/{key_id}`],deleteDeployment:[`DELETE /repos/{owner}/{repo}/deployments/{deployment_id}`],deleteDeploymentBranchPolicy:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],deleteFile:[`DELETE /repos/{owner}/{repo}/contents/{path}`],deleteInvitation:[`DELETE /repos/{owner}/{repo}/invitations/{invitation_id}`],deleteOrgRuleset:[`DELETE /orgs/{org}/rulesets/{ruleset_id}`],deletePagesSite:[`DELETE /repos/{owner}/{repo}/pages`],deletePullRequestReviewProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],deleteRelease:[`DELETE /repos/{owner}/{repo}/releases/{release_id}`],deleteReleaseAsset:[`DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}`],deleteRepoRuleset:[`DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}`],deleteWebhook:[`DELETE /repos/{owner}/{repo}/hooks/{hook_id}`],disableAutomatedSecurityFixes:[`DELETE /repos/{owner}/{repo}/automated-security-fixes`],disableDeploymentProtectionRule:[`DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],disablePrivateVulnerabilityReporting:[`DELETE /repos/{owner}/{repo}/private-vulnerability-reporting`],disableVulnerabilityAlerts:[`DELETE /repos/{owner}/{repo}/vulnerability-alerts`],downloadArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`,{},{renamed:[`repos`,`downloadZipballArchive`]}],downloadTarballArchive:[`GET /repos/{owner}/{repo}/tarball/{ref}`],downloadZipballArchive:[`GET /repos/{owner}/{repo}/zipball/{ref}`],enableAutomatedSecurityFixes:[`PUT /repos/{owner}/{repo}/automated-security-fixes`],enablePrivateVulnerabilityReporting:[`PUT /repos/{owner}/{repo}/private-vulnerability-reporting`],enableVulnerabilityAlerts:[`PUT /repos/{owner}/{repo}/vulnerability-alerts`],generateReleaseNotes:[`POST /repos/{owner}/{repo}/releases/generate-notes`],get:[`GET /repos/{owner}/{repo}`],getAccessRestrictions:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions`],getAdminBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],getAllDeploymentProtectionRules:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules`],getAllEnvironments:[`GET /repos/{owner}/{repo}/environments`],getAllStatusCheckContexts:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`],getAllTopics:[`GET /repos/{owner}/{repo}/topics`],getAppsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`],getAutolink:[`GET /repos/{owner}/{repo}/autolinks/{autolink_id}`],getBranch:[`GET /repos/{owner}/{repo}/branches/{branch}`],getBranchProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection`],getBranchRules:[`GET /repos/{owner}/{repo}/rules/branches/{branch}`],getClones:[`GET /repos/{owner}/{repo}/traffic/clones`],getCodeFrequencyStats:[`GET /repos/{owner}/{repo}/stats/code_frequency`],getCollaboratorPermissionLevel:[`GET /repos/{owner}/{repo}/collaborators/{username}/permission`],getCombinedStatusForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/status`],getCommit:[`GET /repos/{owner}/{repo}/commits/{ref}`],getCommitActivityStats:[`GET /repos/{owner}/{repo}/stats/commit_activity`],getCommitComment:[`GET /repos/{owner}/{repo}/comments/{comment_id}`],getCommitSignatureProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures`],getCommunityProfileMetrics:[`GET /repos/{owner}/{repo}/community/profile`],getContent:[`GET /repos/{owner}/{repo}/contents/{path}`],getContributorsStats:[`GET /repos/{owner}/{repo}/stats/contributors`],getCustomDeploymentProtectionRule:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}`],getCustomPropertiesValues:[`GET /repos/{owner}/{repo}/properties/values`],getDeployKey:[`GET /repos/{owner}/{repo}/keys/{key_id}`],getDeployment:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}`],getDeploymentBranchPolicy:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],getDeploymentStatus:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}`],getEnvironment:[`GET /repos/{owner}/{repo}/environments/{environment_name}`],getLatestPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/latest`],getLatestRelease:[`GET /repos/{owner}/{repo}/releases/latest`],getOrgRuleSuite:[`GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}`],getOrgRuleSuites:[`GET /orgs/{org}/rulesets/rule-suites`],getOrgRuleset:[`GET /orgs/{org}/rulesets/{ruleset_id}`],getOrgRulesets:[`GET /orgs/{org}/rulesets`],getPages:[`GET /repos/{owner}/{repo}/pages`],getPagesBuild:[`GET /repos/{owner}/{repo}/pages/builds/{build_id}`],getPagesDeployment:[`GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}`],getPagesHealthCheck:[`GET /repos/{owner}/{repo}/pages/health`],getParticipationStats:[`GET /repos/{owner}/{repo}/stats/participation`],getPullRequestReviewProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],getPunchCardStats:[`GET /repos/{owner}/{repo}/stats/punch_card`],getReadme:[`GET /repos/{owner}/{repo}/readme`],getReadmeInDirectory:[`GET /repos/{owner}/{repo}/readme/{dir}`],getRelease:[`GET /repos/{owner}/{repo}/releases/{release_id}`],getReleaseAsset:[`GET /repos/{owner}/{repo}/releases/assets/{asset_id}`],getReleaseByTag:[`GET /repos/{owner}/{repo}/releases/tags/{tag}`],getRepoRuleSuite:[`GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}`],getRepoRuleSuites:[`GET /repos/{owner}/{repo}/rulesets/rule-suites`],getRepoRuleset:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}`],getRepoRulesetHistory:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history`],getRepoRulesetVersion:[`GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}`],getRepoRulesets:[`GET /repos/{owner}/{repo}/rulesets`],getStatusChecksProtection:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],getTeamsWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`],getTopPaths:[`GET /repos/{owner}/{repo}/traffic/popular/paths`],getTopReferrers:[`GET /repos/{owner}/{repo}/traffic/popular/referrers`],getUsersWithAccessToProtectedBranch:[`GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`],getViews:[`GET /repos/{owner}/{repo}/traffic/views`],getWebhook:[`GET /repos/{owner}/{repo}/hooks/{hook_id}`],getWebhookConfigForRepo:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/config`],getWebhookDelivery:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}`],listActivities:[`GET /repos/{owner}/{repo}/activity`],listAttestations:[`GET /repos/{owner}/{repo}/attestations/{subject_digest}`],listAutolinks:[`GET /repos/{owner}/{repo}/autolinks`],listBranches:[`GET /repos/{owner}/{repo}/branches`],listBranchesForHeadCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head`],listCollaborators:[`GET /repos/{owner}/{repo}/collaborators`],listCommentsForCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/comments`],listCommitCommentsForRepo:[`GET /repos/{owner}/{repo}/comments`],listCommitStatusesForRef:[`GET /repos/{owner}/{repo}/commits/{ref}/statuses`],listCommits:[`GET /repos/{owner}/{repo}/commits`],listContributors:[`GET /repos/{owner}/{repo}/contributors`],listCustomDeploymentRuleIntegrations:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps`],listDeployKeys:[`GET /repos/{owner}/{repo}/keys`],listDeploymentBranchPolicies:[`GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies`],listDeploymentStatuses:[`GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses`],listDeployments:[`GET /repos/{owner}/{repo}/deployments`],listForAuthenticatedUser:[`GET /user/repos`],listForOrg:[`GET /orgs/{org}/repos`],listForUser:[`GET /users/{username}/repos`],listForks:[`GET /repos/{owner}/{repo}/forks`],listInvitations:[`GET /repos/{owner}/{repo}/invitations`],listInvitationsForAuthenticatedUser:[`GET /user/repository_invitations`],listLanguages:[`GET /repos/{owner}/{repo}/languages`],listPagesBuilds:[`GET /repos/{owner}/{repo}/pages/builds`],listPublic:[`GET /repositories`],listPullRequestsAssociatedWithCommit:[`GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls`],listReleaseAssets:[`GET /repos/{owner}/{repo}/releases/{release_id}/assets`],listReleases:[`GET /repos/{owner}/{repo}/releases`],listTags:[`GET /repos/{owner}/{repo}/tags`],listTeams:[`GET /repos/{owner}/{repo}/teams`],listWebhookDeliveries:[`GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries`],listWebhooks:[`GET /repos/{owner}/{repo}/hooks`],merge:[`POST /repos/{owner}/{repo}/merges`],mergeUpstream:[`POST /repos/{owner}/{repo}/merge-upstream`],pingWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/pings`],redeliverWebhookDelivery:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts`],removeAppAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],removeCollaborator:[`DELETE /repos/{owner}/{repo}/collaborators/{username}`],removeStatusCheckContexts:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],removeStatusCheckProtection:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],removeTeamAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],removeUserAccessRestrictions:[`DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],renameBranch:[`POST /repos/{owner}/{repo}/branches/{branch}/rename`],replaceAllTopics:[`PUT /repos/{owner}/{repo}/topics`],requestPagesBuild:[`POST /repos/{owner}/{repo}/pages/builds`],setAdminBranchProtection:[`POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins`],setAppAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps`,{},{mapToData:`apps`}],setStatusCheckContexts:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts`,{},{mapToData:`contexts`}],setTeamAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams`,{},{mapToData:`teams`}],setUserAccessRestrictions:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users`,{},{mapToData:`users`}],testPushWebhook:[`POST /repos/{owner}/{repo}/hooks/{hook_id}/tests`],transfer:[`POST /repos/{owner}/{repo}/transfer`],update:[`PATCH /repos/{owner}/{repo}`],updateBranchProtection:[`PUT /repos/{owner}/{repo}/branches/{branch}/protection`],updateCommitComment:[`PATCH /repos/{owner}/{repo}/comments/{comment_id}`],updateDeploymentBranchPolicy:[`PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}`],updateInformationAboutPagesSite:[`PUT /repos/{owner}/{repo}/pages`],updateInvitation:[`PATCH /repos/{owner}/{repo}/invitations/{invitation_id}`],updateOrgRuleset:[`PUT /orgs/{org}/rulesets/{ruleset_id}`],updatePullRequestReviewProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews`],updateRelease:[`PATCH /repos/{owner}/{repo}/releases/{release_id}`],updateReleaseAsset:[`PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}`],updateRepoRuleset:[`PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}`],updateStatusCheckPotection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`,{},{renamed:[`repos`,`updateStatusCheckProtection`]}],updateStatusCheckProtection:[`PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks`],updateWebhook:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}`],updateWebhookConfigForRepo:[`PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config`],uploadReleaseAsset:[`POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}`,{baseUrl:`https://uploads.github.com`}]},search:{code:[`GET /search/code`],commits:[`GET /search/commits`],issuesAndPullRequests:[`GET /search/issues`,{},{deprecated:`octokit.rest.search.issuesAndPullRequests() is deprecated, see https://docs.github.com/rest/search/search#search-issues-and-pull-requests`}],labels:[`GET /search/labels`],repos:[`GET /search/repositories`],topics:[`GET /search/topics`],users:[`GET /search/users`]},secretScanning:{createPushProtectionBypass:[`POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses`],getAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`],getScanHistory:[`GET /repos/{owner}/{repo}/secret-scanning/scan-history`],listAlertsForEnterprise:[`GET /enterprises/{enterprise}/secret-scanning/alerts`],listAlertsForOrg:[`GET /orgs/{org}/secret-scanning/alerts`],listAlertsForRepo:[`GET /repos/{owner}/{repo}/secret-scanning/alerts`],listLocationsForAlert:[`GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations`],updateAlert:[`PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}`]},securityAdvisories:{createFork:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks`],createPrivateVulnerabilityReport:[`POST /repos/{owner}/{repo}/security-advisories/reports`],createRepositoryAdvisory:[`POST /repos/{owner}/{repo}/security-advisories`],createRepositoryAdvisoryCveRequest:[`POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve`],getGlobalAdvisory:[`GET /advisories/{ghsa_id}`],getRepositoryAdvisory:[`GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}`],listGlobalAdvisories:[`GET /advisories`],listOrgRepositoryAdvisories:[`GET /orgs/{org}/security-advisories`],listRepositoryAdvisories:[`GET /repos/{owner}/{repo}/security-advisories`],updateRepositoryAdvisory:[`PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}`]},teams:{addOrUpdateMembershipForUserInOrg:[`PUT /orgs/{org}/teams/{team_slug}/memberships/{username}`],addOrUpdateRepoPermissionsInOrg:[`PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],checkPermissionsForRepoInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],create:[`POST /orgs/{org}/teams`],createDiscussionCommentInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],createDiscussionInOrg:[`POST /orgs/{org}/teams/{team_slug}/discussions`],deleteDiscussionCommentInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],deleteDiscussionInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],deleteInOrg:[`DELETE /orgs/{org}/teams/{team_slug}`],getByName:[`GET /orgs/{org}/teams/{team_slug}`],getDiscussionCommentInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],getDiscussionInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],getMembershipForUserInOrg:[`GET /orgs/{org}/teams/{team_slug}/memberships/{username}`],list:[`GET /orgs/{org}/teams`],listChildInOrg:[`GET /orgs/{org}/teams/{team_slug}/teams`],listDiscussionCommentsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`],listDiscussionsInOrg:[`GET /orgs/{org}/teams/{team_slug}/discussions`],listForAuthenticatedUser:[`GET /user/teams`],listMembersInOrg:[`GET /orgs/{org}/teams/{team_slug}/members`],listPendingInvitationsInOrg:[`GET /orgs/{org}/teams/{team_slug}/invitations`],listReposInOrg:[`GET /orgs/{org}/teams/{team_slug}/repos`],removeMembershipForUserInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}`],removeRepoInOrg:[`DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`],updateDiscussionCommentInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}`],updateDiscussionInOrg:[`PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}`],updateInOrg:[`PATCH /orgs/{org}/teams/{team_slug}`]},users:{addEmailForAuthenticated:[`POST /user/emails`,{},{renamed:[`users`,`addEmailForAuthenticatedUser`]}],addEmailForAuthenticatedUser:[`POST /user/emails`],addSocialAccountForAuthenticatedUser:[`POST /user/social_accounts`],block:[`PUT /user/blocks/{username}`],checkBlocked:[`GET /user/blocks/{username}`],checkFollowingForUser:[`GET /users/{username}/following/{target_user}`],checkPersonIsFollowedByAuthenticated:[`GET /user/following/{username}`],createGpgKeyForAuthenticated:[`POST /user/gpg_keys`,{},{renamed:[`users`,`createGpgKeyForAuthenticatedUser`]}],createGpgKeyForAuthenticatedUser:[`POST /user/gpg_keys`],createPublicSshKeyForAuthenticated:[`POST /user/keys`,{},{renamed:[`users`,`createPublicSshKeyForAuthenticatedUser`]}],createPublicSshKeyForAuthenticatedUser:[`POST /user/keys`],createSshSigningKeyForAuthenticatedUser:[`POST /user/ssh_signing_keys`],deleteEmailForAuthenticated:[`DELETE /user/emails`,{},{renamed:[`users`,`deleteEmailForAuthenticatedUser`]}],deleteEmailForAuthenticatedUser:[`DELETE /user/emails`],deleteGpgKeyForAuthenticated:[`DELETE /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`deleteGpgKeyForAuthenticatedUser`]}],deleteGpgKeyForAuthenticatedUser:[`DELETE /user/gpg_keys/{gpg_key_id}`],deletePublicSshKeyForAuthenticated:[`DELETE /user/keys/{key_id}`,{},{renamed:[`users`,`deletePublicSshKeyForAuthenticatedUser`]}],deletePublicSshKeyForAuthenticatedUser:[`DELETE /user/keys/{key_id}`],deleteSocialAccountForAuthenticatedUser:[`DELETE /user/social_accounts`],deleteSshSigningKeyForAuthenticatedUser:[`DELETE /user/ssh_signing_keys/{ssh_signing_key_id}`],follow:[`PUT /user/following/{username}`],getAuthenticated:[`GET /user`],getById:[`GET /user/{account_id}`],getByUsername:[`GET /users/{username}`],getContextForUser:[`GET /users/{username}/hovercard`],getGpgKeyForAuthenticated:[`GET /user/gpg_keys/{gpg_key_id}`,{},{renamed:[`users`,`getGpgKeyForAuthenticatedUser`]}],getGpgKeyForAuthenticatedUser:[`GET /user/gpg_keys/{gpg_key_id}`],getPublicSshKeyForAuthenticated:[`GET /user/keys/{key_id}`,{},{renamed:[`users`,`getPublicSshKeyForAuthenticatedUser`]}],getPublicSshKeyForAuthenticatedUser:[`GET /user/keys/{key_id}`],getSshSigningKeyForAuthenticatedUser:[`GET /user/ssh_signing_keys/{ssh_signing_key_id}`],list:[`GET /users`],listAttestations:[`GET /users/{username}/attestations/{subject_digest}`],listBlockedByAuthenticated:[`GET /user/blocks`,{},{renamed:[`users`,`listBlockedByAuthenticatedUser`]}],listBlockedByAuthenticatedUser:[`GET /user/blocks`],listEmailsForAuthenticated:[`GET /user/emails`,{},{renamed:[`users`,`listEmailsForAuthenticatedUser`]}],listEmailsForAuthenticatedUser:[`GET /user/emails`],listFollowedByAuthenticated:[`GET /user/following`,{},{renamed:[`users`,`listFollowedByAuthenticatedUser`]}],listFollowedByAuthenticatedUser:[`GET /user/following`],listFollowersForAuthenticatedUser:[`GET /user/followers`],listFollowersForUser:[`GET /users/{username}/followers`],listFollowingForUser:[`GET /users/{username}/following`],listGpgKeysForAuthenticated:[`GET /user/gpg_keys`,{},{renamed:[`users`,`listGpgKeysForAuthenticatedUser`]}],listGpgKeysForAuthenticatedUser:[`GET /user/gpg_keys`],listGpgKeysForUser:[`GET /users/{username}/gpg_keys`],listPublicEmailsForAuthenticated:[`GET /user/public_emails`,{},{renamed:[`users`,`listPublicEmailsForAuthenticatedUser`]}],listPublicEmailsForAuthenticatedUser:[`GET /user/public_emails`],listPublicKeysForUser:[`GET /users/{username}/keys`],listPublicSshKeysForAuthenticated:[`GET /user/keys`,{},{renamed:[`users`,`listPublicSshKeysForAuthenticatedUser`]}],listPublicSshKeysForAuthenticatedUser:[`GET /user/keys`],listSocialAccountsForAuthenticatedUser:[`GET /user/social_accounts`],listSocialAccountsForUser:[`GET /users/{username}/social_accounts`],listSshSigningKeysForAuthenticatedUser:[`GET /user/ssh_signing_keys`],listSshSigningKeysForUser:[`GET /users/{username}/ssh_signing_keys`],setPrimaryEmailVisibilityForAuthenticated:[`PATCH /user/email/visibility`,{},{renamed:[`users`,`setPrimaryEmailVisibilityForAuthenticatedUser`]}],setPrimaryEmailVisibilityForAuthenticatedUser:[`PATCH /user/email/visibility`],unblock:[`DELETE /user/blocks/{username}`],unfollow:[`DELETE /user/following/{username}`],updateAuthenticated:[`PATCH /user`]}},KY=new Map;for(let[e,t]of Object.entries(GY))for(let[n,r]of Object.entries(t)){let[t,i,a]=r,[o,s]=t.split(/ /),c=Object.assign({method:o,url:s},i);KY.has(e)||KY.set(e,new Map),KY.get(e).set(n,{scope:e,methodName:n,endpointDefaults:c,decorations:a})}var qY={has({scope:e},t){return KY.get(e).has(t)},getOwnPropertyDescriptor(e,t){return{value:this.get(e,t),configurable:!0,writable:!0,enumerable:!0}},defineProperty(e,t,n){return Object.defineProperty(e.cache,t,n),!0},deleteProperty(e,t){return delete e.cache[t],!0},ownKeys({scope:e}){return[...KY.get(e).keys()]},set(e,t,n){return e.cache[t]=n},get({octokit:e,scope:t,cache:n},r){if(n[r])return n[r];let i=KY.get(t).get(r);if(!i)return;let{endpointDefaults:a,decorations:o}=i;return o?n[r]=YY(e,t,r,a,o):n[r]=e.request.defaults(a),n[r]}};function JY(e){let t={};for(let n of KY.keys())t[n]=new Proxy({octokit:e,scope:n,cache:{}},qY);return t}function YY(e,t,n,r,i){let a=e.request.defaults(r);function o(...r){let o=a.endpoint.merge(...r);if(i.mapToData)return o=Object.assign({},o,{data:o[i.mapToData],[i.mapToData]:void 0}),a(o);if(i.renamed){let[r,a]=i.renamed;e.log.warn(`octokit.${t}.${n}() has been renamed to octokit.${r}.${a}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){let o=a.endpoint.merge(...r);for(let[r,a]of Object.entries(i.renamedParameters))r in o&&(e.log.warn(`"${r}" parameter is deprecated for "octokit.${t}.${n}()". Use "${a}" instead`),a in o||(o[a]=o[r]),delete o[r]);return a(o)}return a(...r)}return Object.assign(o,a)}function XY(e){return{rest:JY(e)}}XY.VERSION=WY;function ZY(e){let t=JY(e);return{...t,rest:t}}ZY.VERSION=WY;var QY=n(((e,t)=>{(function(n,r){typeof e==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):n.Bottleneck=r()})(e,(function(){var e=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{};function t(e){return e&&e.default||e}var n={load:function(e,t,n={}){var r,i;for(r in t)i=t[r],n[r]=e[r]??i;return n},overwrite:function(e,t,n={}){var r,i;for(r in e)i=e[r],t[r]!==void 0&&(n[r]=i);return n}},r=class{constructor(e,t){this.incr=e,this.decr=t,this._first=null,this._last=null,this.length=0}push(e){var t;this.length++,typeof this.incr==`function`&&this.incr(),t={value:e,prev:this._last,next:null},this._last==null?this._first=this._last=t:(this._last.next=t,this._last=t)}shift(){var e;if(this._first!=null)return this.length--,typeof this.decr==`function`&&this.decr(),e=this._first.value,(this._first=this._first.next)==null?this._last=null:this._first.prev=null,e}first(){if(this._first!=null)return this._first.value}getArray(){for(var e=this._first,t,n=[];e!=null;)n.push((t=e,e=e.next,t.value));return n}forEachShift(e){for(var t=this.shift();t!=null;)e(t),t=this.shift()}debug(){for(var e=this._first,t,n=[];e!=null;)n.push((t=e,e=e.next,{value:t.value,prev:t.prev?.value,next:t.next?.value}));return n}},i=class{constructor(e){if(this.instance=e,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw Error(`An Emitter already exists for this object`);this.instance.on=(e,t)=>this._addListener(e,`many`,t),this.instance.once=(e,t)=>this._addListener(e,`once`,t),this.instance.removeAllListeners=(e=null)=>e==null?this._events={}:delete this._events[e]}_addListener(e,t,n){var r;return(r=this._events)[e]??(r[e]=[]),this._events[e].push({cb:n,status:t}),this.instance}listenerCount(e){return this._events[e]==null?0:this._events[e].length}async trigger(e,...t){var n,r;try{return e!==`debug`&&this.trigger(`debug`,`Event triggered: ${e}`,t),this._events[e]==null?void 0:(this._events[e]=this._events[e].filter(function(e){return e.status!==`none`}),r=this._events[e].map(async e=>{var n,r;if(e.status!==`none`){e.status===`once`&&(e.status=`none`);try{return r=typeof e.cb==`function`?e.cb(...t):void 0,typeof r?.then==`function`?await r:r}catch(e){return n=e,this.trigger(`error`,n),null}}}),(await Promise.all(r)).find(function(e){return e!=null}))}catch(e){return n=e,this.trigger(`error`,n),null}}},a=r,o=i,s=class{constructor(e){this.Events=new o(this),this._length=0,this._lists=(function(){var t,n,r=[];for(t=1,n=e;1<=n?t<=n:t>=n;1<=n?++t:--t)r.push(new a((()=>this.incr()),(()=>this.decr())));return r}).call(this)}incr(){if(this._length++===0)return this.Events.trigger(`leftzero`)}decr(){if(--this._length===0)return this.Events.trigger(`zero`)}push(e){return this._lists[e.options.priority].push(e)}queued(e){return e==null?this._length:this._lists[e].length}shiftAll(e){return this._lists.forEach(function(t){return t.forEachShift(e)})}getFirst(e=this._lists){var t,n,r;for(t=0,n=e.length;t<n;t++)if(r=e[t],r.length>0)return r;return[]}shiftLastFrom(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}},c=class extends Error{},l,u,d,f=10,p;u=5,p=n,l=c,d=class{constructor(e,t,n,r,i,a,o,s){this.task=e,this.args=t,this.rejectOnDrop=i,this.Events=a,this._states=o,this.Promise=s,this.options=p.load(n,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((e,t)=>{this._resolve=e,this._reject=t}),this.retryCount=0}_sanitizePriority(e){var t=~~e===e?e:u;return t<0?0:t>f-1?f-1:t}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:e,message:t=`This job has been dropped by Bottleneck`}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(e??new l(t)),this.Events.trigger(`dropped`,{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(e){var t=this._states.jobStatus(this.options.id);if(!(t===e||e===`DONE`&&t===null))throw new l(`Invalid job status ${t}, expected ${e}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger(`received`,{args:this.args,options:this.options})}doQueue(e,t){return this._assertStatus(`RECEIVED`),this._states.next(this.options.id),this.Events.trigger(`queued`,{args:this.args,options:this.options,reachedHWM:e,blocked:t})}doRun(){return this.retryCount===0?(this._assertStatus(`QUEUED`),this._states.next(this.options.id)):this._assertStatus(`EXECUTING`),this.Events.trigger(`scheduled`,{args:this.args,options:this.options})}async doExecute(e,t,n,r){var i,a,o;this.retryCount===0?(this._assertStatus(`RUNNING`),this._states.next(this.options.id)):this._assertStatus(`EXECUTING`),a={args:this.args,options:this.options,retryCount:this.retryCount},this.Events.trigger(`executing`,a);try{if(o=await(e==null?this.task(...this.args):e.schedule(this.options,this.task,...this.args)),t())return this.doDone(a),await r(this.options,a),this._assertStatus(`DONE`),this._resolve(o)}catch(e){return i=e,this._onFailure(i,a,t,n,r)}}doExpire(e,t,n){var r,i;return this._states.jobStatus(this.options.id===`RUNNING`)&&this._states.next(this.options.id),this._assertStatus(`EXECUTING`),i={args:this.args,options:this.options,retryCount:this.retryCount},r=new l(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(r,i,e,t,n)}async _onFailure(e,t,n,r,i){var a,o;if(n())return a=await this.Events.trigger(`failed`,e,t),a==null?(this.doDone(t),await i(this.options,t),this._assertStatus(`DONE`),this._reject(e)):(o=~~a,this.Events.trigger(`retry`,`Retrying ${this.options.id} after ${o} ms`,t),this.retryCount++,r(o))}doDone(e){return this._assertStatus(`EXECUTING`),this._states.next(this.options.id),this.Events.trigger(`done`,e)}};var m=d,h,g,_=n;h=c,g=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.clientId=this.instance._randomIndex(),_.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var e;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(e=this.heartbeat=setInterval(()=>{var e,t,n,r=Date.now(),i;if(this.storeOptions.reservoirRefreshInterval!=null&&r>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=r,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&r>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval&&({reservoirIncreaseAmount:e,reservoirIncreaseMaximum:n,reservoir:i}=this.storeOptions,this._lastReservoirIncrease=r,t=n==null?e:Math.min(e,n-i),t>0))return this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity())},this.heartbeatInterval)).unref==`function`?e.unref():void 0:clearInterval(this.heartbeat)}async __publish__(e){return await this.yieldLoop(),this.instance.Events.trigger(`message`,e.toString())}async __disconnect__(e){return await this.yieldLoop(),clearInterval(this.heartbeat),this.Promise.resolve()}yieldLoop(e=0){return new this.Promise(function(t,n){return setTimeout(t,e)})}computePenalty(){return this.storeOptions.penalty??(15*this.storeOptions.minTime||5e3)}async __updateSettings__(e){return await this.yieldLoop(),_.overwrite(e,e,this.storeOptions),this._startHeartbeat(),this.instance._drainAll(this.computeCapacity()),!0}async __running__(){return await this.yieldLoop(),this._running}async __queued__(){return await this.yieldLoop(),this.instance.queued()}async __done__(){return await this.yieldLoop(),this._done}async __groupCheck__(e){return await this.yieldLoop(),this._nextRequest+this.timeout<e}computeCapacity(){var e,t;return{maxConcurrent:e,reservoir:t}=this.storeOptions,e!=null&&t!=null?Math.min(e-this._running,t):e==null?t??null:e-this._running}conditionsCheck(e){var t=this.computeCapacity();return t==null||e<=t}async __incrementReservoir__(e){var t;return await this.yieldLoop(),t=this.storeOptions.reservoir+=e,this.instance._drainAll(this.computeCapacity()),t}async __currentReservoir__(){return await this.yieldLoop(),this.storeOptions.reservoir}isBlocked(e){return this._unblockTime>=e}check(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}async __check__(e){var t;return await this.yieldLoop(),t=Date.now(),this.check(e,t)}async __register__(e,t,n){var r,i;return await this.yieldLoop(),r=Date.now(),this.conditionsCheck(t)?(this._running+=t,this.storeOptions.reservoir!=null&&(this.storeOptions.reservoir-=t),i=Math.max(this._nextRequest-r,0),this._nextRequest=r+i+this.storeOptions.minTime,{success:!0,wait:i,reservoir:this.storeOptions.reservoir}):{success:!1}}strategyIsBlock(){return this.storeOptions.strategy===3}async __submit__(e,t){var n,r,i;if(await this.yieldLoop(),this.storeOptions.maxConcurrent!=null&&t>this.storeOptions.maxConcurrent)throw new h(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${this.storeOptions.maxConcurrent}`);return r=Date.now(),i=this.storeOptions.highWater!=null&&e===this.storeOptions.highWater&&!this.check(t,r),n=this.strategyIsBlock()&&(i||this.isBlocked(r)),n&&(this._unblockTime=r+this.computePenalty(),this._nextRequest=this._unblockTime+this.storeOptions.minTime,this.instance._dropAllQueued()),{reachedHWM:i,blocked:n,strategy:this.storeOptions.strategy}}async __free__(e,t){return await this.yieldLoop(),this._running-=t,this._done+=t,this.instance._drainAll(this.computeCapacity()),{running:this._running}}};var v=g,y=c,b=class{constructor(e){this.status=e,this._jobs={},this.counts=this.status.map(function(){return 0})}next(e){var t=this._jobs[e],n=t+1;if(t!=null&&n<this.status.length)return this.counts[t]--,this.counts[n]++,this._jobs[e]++;if(t!=null)return this.counts[t]--,delete this._jobs[e]}start(e){var t=0;return this._jobs[e]=t,this.counts[t]++}remove(e){var t=this._jobs[e];return t!=null&&(this.counts[t]--,delete this._jobs[e]),t!=null}jobStatus(e){return this.status[this._jobs[e]]??null}statusJobs(e){var t,n,r,i,a;if(e!=null){if(n=this.status.indexOf(e),n<0)throw new y(`status must be one of ${this.status.join(`, `)}`);for(t in r=this._jobs,i=[],r)a=r[t],a===n&&i.push(t);return i}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce(((e,t,n)=>(e[this.status[n]]=t,e)),{})}},x=r,S=class{constructor(e,t){this.schedule=this.schedule.bind(this),this.name=e,this.Promise=t,this._running=0,this._queue=new x}isEmpty(){return this._queue.length===0}async _tryToRun(){var e,t,n,r,i,a,o;if(this._running<1&&this._queue.length>0)return this._running++,{task:o,args:e,resolve:i,reject:r}=this._queue.shift(),t=await(async function(){try{return a=await o(...e),function(){return i(a)}}catch(e){return n=e,function(){return r(n)}}})(),this._running--,this._tryToRun(),t()}schedule(e,...t){var n,r,i=r=null;return n=new this.Promise(function(e,t){return i=e,r=t}),this._queue.push({task:e,args:t,resolve:i,reject:r}),this._tryToRun(),n}},C=`2.19.5`,w={version:C},T=Object.freeze({version:C,default:w}),E=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),D=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),O=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),k,A,j,M,N,P=n;k=i,M=E,j=D,N=O,A=(function(){class e{constructor(e={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=e,P.load(this.limiterOptions,this.defaults,this),this.Events=new k(this),this.instances={},this.Bottleneck=L,this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection??(this.limiterOptions.datastore===`redis`?this.connection=new M(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore===`ioredis`&&(this.connection=new j(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(e=``){return this.instances[e]??(()=>{var t=this.instances[e]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${e}`,timeout:this.timeout,connection:this.connection}));return this.Events.trigger(`created`,t,e),t})()}async deleteKey(e=``){var t,n=this.instances[e];return this.connection&&(t=await this.connection.__runCommand__([`del`,...N.allKeys(`${this.id}-${e}`)])),n!=null&&(delete this.instances[e],await n.disconnect()),n!=null||t>0}limiters(){var e,t=this.instances,n=[],r;for(e in t)r=t[e],n.push({key:e,limiter:r});return n}keys(){return Object.keys(this.instances)}async clusterKeys(){var e,t,n,r,i,a,o,s,c;if(this.connection==null)return this.Promise.resolve(this.keys());for(a=[],e=null,c=`b_${this.id}-`.length,t=9;e!==0;)for([s,n]=await this.connection.__runCommand__([`scan`,e??0,`match`,`b_${this.id}-*_settings`,`count`,1e4]),e=~~s,r=0,o=n.length;r<o;r++)i=n[r],a.push(i.slice(c,-t));return a}_startAutoCleanup(){var e;return clearInterval(this.interval),typeof(e=this.interval=setInterval(async()=>{var e,t,n,r,i=Date.now(),a;for(t in n=this.instances,r=[],n){a=n[t];try{await a._store.__groupCheck__(i)?r.push(this.deleteKey(t)):r.push(void 0)}catch(t){e=t,r.push(a.Events.trigger(`error`,e))}}return r},this.timeout/2)).unref==`function`?e.unref():void 0}updateSettings(e={}){if(P.overwrite(e,this.defaults,this),P.overwrite(e,e,this.limiterOptions),e.timeout!=null)return this._startAutoCleanup()}disconnect(e=!0){if(!this.sharedConnection)return this.connection?.disconnect(e)}}return e.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:`group-key`},e}).call(e);var ee=A,te,F,I=n;F=i,te=(function(){class e{constructor(e={}){this.options=e,I.load(this.options,this.defaults,this),this.Events=new F(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((e,t)=>this._resolve=e)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger(`batch`,this._arr),this._arr=[],this._resetPromise()}add(e){var t;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),t}}return e.prototype.defaults={maxTime:null,maxSize:null,Promise},e}).call(e);var ne=te,re=()=>console.log(`You must import the full version of Bottleneck in order to use this feature.`),ie=t(T),ae,oe,se,ce,le,ue,de,fe,pe,me,he,ge=[].splice;ue=10,oe=5,he=n,de=s,ce=m,le=v,fe=re,se=i,pe=b,me=S,ae=(function(){class e{constructor(t={},...n){var r,i;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(t,n),he.load(t,this.instanceDefaults,this),this._queues=new de(ue),this._scheduled={},this._states=new pe([`RECEIVED`,`QUEUED`,`RUNNING`,`EXECUTING`].concat(this.trackDoneStatus?[`DONE`]:[])),this._limiter=null,this.Events=new se(this),this._submitLock=new me(`submit`,this.Promise),this._registerLock=new me(`register`,this.Promise),i=he.load(t,this.storeDefaults,{}),this._store=(function(){if(this.datastore===`redis`||this.datastore===`ioredis`||this.connection!=null)return r=he.load(t,this.redisStoreDefaults,{}),new fe(this,i,r);if(this.datastore===`local`)return r=he.load(t,this.localStoreDefaults,{}),new le(this,i,r);throw new e.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on(`leftzero`,()=>{var e;return(e=this._store.heartbeat)==null?void 0:typeof e.ref==`function`?e.ref():void 0}),this._queues.on(`zero`,()=>{var e;return(e=this._store.heartbeat)==null?void 0:typeof e.unref==`function`?e.unref():void 0})}_validateOptions(t,n){if(!(typeof t==`object`&&t&&n.length===0))throw new e.prototype.BottleneckError(`Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.`)}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(e){return this._store.__publish__(e)}disconnect(e=!0){return this._store.__disconnect__(e)}chain(e){return this._limiter=e,this}queued(e){return this._queues.queued(e)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(e){return this._states.jobStatus(e)}jobs(e){return this._states.statusJobs(e)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(e=1){return this._store.__check__(e)}_clearGlobalState(e){return this._scheduled[e]==null?!1:(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}async _free(e,t,n,r){var i,a;try{if({running:a}=await this._store.__free__(e,n.weight),this.Events.trigger(`debug`,`Freed ${n.id}`,r),a===0&&this.empty())return this.Events.trigger(`idle`)}catch(e){return i=e,this.Events.trigger(`error`,i)}}_run(e,t,n){var r,i,a;return t.doRun(),r=this._clearGlobalState.bind(this,e),a=this._run.bind(this,e,t),i=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout(()=>t.doExecute(this._limiter,r,a,i),n),expiration:t.options.expiration==null?void 0:setTimeout(function(){return t.doExpire(r,a,i)},n+t.options.expiration),job:t}}_drainOne(e){return this._registerLock.schedule(()=>{var t,n,r,i,a;return this.queued()===0||(a=this._queues.getFirst(),{options:i,args:t}=r=a.first(),e!=null&&i.weight>e)?this.Promise.resolve(null):(this.Events.trigger(`debug`,`Draining ${i.id}`,{args:t,options:i}),n=this._randomIndex(),this._store.__register__(n,i.weight,i.expiration).then(({success:e,wait:o,reservoir:s})=>{var c;return this.Events.trigger(`debug`,`Drained ${i.id}`,{success:e,args:t,options:i}),e?(a.shift(),c=this.empty(),c&&this.Events.trigger(`empty`),s===0&&this.Events.trigger(`depleted`,c),this._run(n,r,o),this.Promise.resolve(i.weight)):this.Promise.resolve(null)}))})}_drainAll(e,t=0){return this._drainOne(e).then(n=>{var r;return n==null?this.Promise.resolve(t):(r=e==null?e:e-n,this._drainAll(r,t+n))}).catch(e=>this.Events.trigger(`error`,e))}_dropAllQueued(e){return this._queues.shiftAll(function(t){return t.doDrop({message:e})})}stop(t={}){var n,r;return t=he.load(t,this.stopDefaults),r=e=>{var t=()=>{var t=this._states.counts;return t[0]+t[1]+t[2]+t[3]===e};return new this.Promise((e,n)=>t()?e():this.on(`done`,()=>{if(t())return this.removeAllListeners(`done`),e()}))},n=t.dropWaitingJobs?(this._run=function(e,n){return n.doDrop({message:t.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var e,n=this._scheduled,i;for(e in n)i=n[e],this.jobStatus(i.job.options.id)===`RUNNING`&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:t.dropErrorMessage}));return this._dropAllQueued(t.dropErrorMessage),r(0)}))):this.schedule({priority:ue-1,weight:0},()=>r(1)),this._receive=function(n){return n._reject(new e.prototype.BottleneckError(t.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new e.prototype.BottleneckError(`stop() has already been called`)),n}async _addToQueue(t){var n,r,i,a,o,s,c;({args:n,options:a}=t);try{({reachedHWM:o,blocked:r,strategy:c}=await this._store.__submit__(this.queued(),a.weight))}catch(e){return i=e,this.Events.trigger(`debug`,`Could not queue ${a.id}`,{args:n,options:a,error:i}),t.doDrop({error:i}),!1}return r?(t.doDrop(),!0):o&&(s=c===e.prototype.strategy.LEAK?this._queues.shiftLastFrom(a.priority):c===e.prototype.strategy.OVERFLOW_PRIORITY?this._queues.shiftLastFrom(a.priority+1):c===e.prototype.strategy.OVERFLOW?t:void 0,s?.doDrop(),s==null||c===e.prototype.strategy.OVERFLOW)?(s??t.doDrop(),o):(t.doQueue(o,r),this._queues.push(t),await this._drainAll(),o)}_receive(t){return this._states.jobStatus(t.options.id)==null?(t.doReceive(),this._submitLock.schedule(this._addToQueue,t)):(t._reject(new e.prototype.BottleneckError(`A job with the same id already exists (id=${t.options.id})`)),!1)}submit(...e){var t,n,r,i,a,o,s;return typeof e[0]==`function`?(a=e,[n,...e]=a,[t]=ge.call(e,-1),i=he.load({},this.jobDefaults)):(o=e,[i,n,...e]=o,[t]=ge.call(e,-1),i=he.load(i,this.jobDefaults)),s=(...e)=>new this.Promise(function(t,r){return n(...e,function(...e){return(e[0]==null?t:r)(e)})}),r=new ce(s,e,i,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),r.promise.then(function(e){return typeof t==`function`?t(...e):void 0}).catch(function(e){return Array.isArray(e)?typeof t==`function`?t(...e):void 0:typeof t==`function`?t(e):void 0}),this._receive(r)}schedule(...e){var t,n,r;return typeof e[0]==`function`?([r,...e]=e,n={}):[n,r,...e]=e,t=new ce(r,e,n,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(t),t.promise}wrap(e){var t=this.schedule.bind(this),n=function(...n){return t(e.bind(this),...n)};return n.withOptions=function(n,...r){return t(n,e,...r)},n}async updateSettings(e={}){return await this._store.__updateSettings__(he.overwrite(e,this.storeDefaults)),he.overwrite(e,this.instanceDefaults,this),this}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(e=0){return this._store.__incrementReservoir__(e)}}return e.default=e,e.Events=se,e.version=e.prototype.version=ie.version,e.strategy=e.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},e.BottleneckError=e.prototype.BottleneckError=c,e.Group=e.prototype.Group=ee,e.RedisConnection=e.prototype.RedisConnection=E,e.IORedisConnection=e.prototype.IORedisConnection=D,e.Batcher=e.prototype.Batcher=ne,e.prototype.jobDefaults={priority:oe,weight:1,expiration:null,id:`<no-id>`},e.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:e.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},e.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},e.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},e.prototype.instanceDefaults={datastore:`local`,connection:null,id:`<no-id>`,rejectOnDrop:!0,trackDoneStatus:!1,Promise},e.prototype.stopDefaults={enqueueErrorMessage:`This limiter has been stopped and cannot accept new jobs.`,dropWaitingJobs:!0,dropErrorMessage:`This limiter has been stopped.`},e}).call(e);var L=ae;return L}))})),$Y=t(QY(),1),eX=`0.0.0-development`;async function tX(e,t,n,r){if(!n.request||!n.request.request)throw n;if(n.status>=400&&!e.doNotRetry.includes(n.status)){let i=r.request.retries==null?e.retries:r.request.retries,a=((r.request.retryCount||0)+1)**2;throw t.retry.retryRequest(n,i,a)}throw n}async function nX(e,t,n,r){let i=new $Y.default;return i.on(`failed`,function(t,n){let i=~~t.request.request.retries,a=~~t.request.request.retryAfter;if(r.request.retryCount=n.retryCount+1,i>n.retryCount)return a*e.retryAfterBaseValue}),i.schedule(rX.bind(null,e,t,n),r)}async function rX(e,t,n,r){let i=await n(n,r);return i.data&&i.data.errors&&i.data.errors.length>0&&/Something went wrong while executing your query/.test(i.data.errors[0].message)?tX(e,t,new VJ(i.data.errors[0].message,500,{request:r,response:i}),r):i}function iX(e,t){let n=Object.assign({enabled:!0,retryAfterBaseValue:1e3,doNotRetry:[400,401,403,404,410,422,451],retries:3},t.retry);return n.enabled&&(e.hook.error(`request`,tX.bind(null,n,e)),e.hook.wrap(`request`,nX.bind(null,n,e))),{retry:{retryRequest:(e,t,n)=>(e.request.request=Object.assign({},e.request.request,{retries:t,retryAfter:n}),e)}}}iX.VERSION=eX;var aX=t(QY(),1),oX=`0.0.0-development`,sX=()=>Promise.resolve();function cX(e,t,n){return e.retryLimiter.schedule(lX,e,t,n)}async function lX(e,t,n){let{pathname:r}=new URL(n.url,`http://github.test`),i=uX(n.method,r),a=!i&&n.method!==`GET`&&n.method!==`HEAD`,o=n.method===`GET`&&r.startsWith(`/search/`),s=r.startsWith(`/graphql`),c=~~t.retryCount>0?{priority:0,weight:0}:{};e.clustering&&(c.expiration=1e3*60),(a||s)&&await e.write.key(e.id).schedule(c,sX),a&&e.triggersNotification(r)&&await e.notifications.key(e.id).schedule(c,sX),o&&await e.search.key(e.id).schedule(c,sX);let l=(i?e.auth:e.global).key(e.id).schedule(c,t,n);if(s){let e=await l;if(e.data.errors!=null&&e.data.errors.some(e=>e.type===`RATE_LIMITED`))throw Object.assign(Error(`GraphQL Rate Limit Exceeded`),{response:e,data:e.data})}return l}function uX(e,t){return e===`PATCH`&&/^\/applications\/[^/]+\/token\/scoped$/.test(t)||e===`POST`&&(/^\/applications\/[^/]+\/token$/.test(t)||/^\/app\/installations\/[^/]+\/access_tokens$/.test(t)||t===`/login/oauth/access_token`)}var dX=[`/orgs/{org}/invitations`,`/orgs/{org}/invitations/{invitation_id}`,`/orgs/{org}/teams/{team_slug}/discussions`,`/orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments`,`/repos/{owner}/{repo}/collaborators/{username}`,`/repos/{owner}/{repo}/commits/{commit_sha}/comments`,`/repos/{owner}/{repo}/issues`,`/repos/{owner}/{repo}/issues/{issue_number}/comments`,`/repos/{owner}/{repo}/issues/{issue_number}/sub_issue`,`/repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority`,`/repos/{owner}/{repo}/pulls`,`/repos/{owner}/{repo}/pulls/{pull_number}/comments`,`/repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies`,`/repos/{owner}/{repo}/pulls/{pull_number}/merge`,`/repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers`,`/repos/{owner}/{repo}/pulls/{pull_number}/reviews`,`/repos/{owner}/{repo}/releases`,`/teams/{team_id}/discussions`,`/teams/{team_id}/discussions/{discussion_number}/comments`];function fX(e){let t=`^(?:${e.map(e=>e.split(`/`).map(e=>e.startsWith(`{`)?`(?:.+?)`:e).join(`/`)).map(e=>`(?:${e})`).join(`|`)})[^/]*$`;return new RegExp(t,`i`)}var pX=fX(dX),mX=pX.test.bind(pX),hX={},gX=function(e,t){hX.global=new e.Group({id:`octokit-global`,maxConcurrent:10,...t}),hX.auth=new e.Group({id:`octokit-auth`,maxConcurrent:1,...t}),hX.search=new e.Group({id:`octokit-search`,maxConcurrent:1,minTime:2e3,...t}),hX.write=new e.Group({id:`octokit-write`,maxConcurrent:1,minTime:1e3,...t}),hX.notifications=new e.Group({id:`octokit-notifications`,maxConcurrent:1,minTime:3e3,...t})};function _X(e,t){let{enabled:n=!0,Bottleneck:r=aX.default,id:i=`no-id`,timeout:a=1e3*60*2,connection:o}=t.throttle||{};if(!n)return{};let s={timeout:a};o!==void 0&&(s.connection=o),hX.global??gX(r,s);let c=Object.assign({clustering:o!=null,triggersNotification:mX,fallbackSecondaryRateRetryAfter:60,retryAfterBaseValue:1e3,retryLimiter:new r,id:i,...hX},t.throttle);if(typeof c.onSecondaryRateLimit!=`function`||typeof c.onRateLimit!=`function`)throw Error(`octokit/plugin-throttling error:
        You must pass the onSecondaryRateLimit and onRateLimit error handlers.
        See https://octokit.github.io/rest.js/#throttling

        const octokit = new Octokit({
          throttle: {
            onSecondaryRateLimit: (retryAfter, options) => {/* ... */},
            onRateLimit: (retryAfter, options) => {/* ... */}
          }
        })
    `);let l={},u=new r.Events(l);return l.on(`secondary-limit`,c.onSecondaryRateLimit),l.on(`rate-limit`,c.onRateLimit),l.on(`error`,t=>e.log.warn(`Error in throttling-plugin limit handler`,t)),c.retryLimiter.on(`failed`,async function(t,n){let[r,i,a]=n.args,{pathname:o}=new URL(a.url,`http://github.test`);if(!(o.startsWith(`/graphql`)&&t.status!==401||t.status===403||t.status===429))return;let s=~~i.retryCount;i.retryCount=s,a.request.retryCount=s;let{wantRetry:c,retryAfter:l=0}=await async function(){if(/\bsecondary rate\b/i.test(t.message)){let n=Number(t.response.headers[`retry-after`])||r.fallbackSecondaryRateRetryAfter;return{wantRetry:await u.trigger(`secondary-limit`,n,a,e,s),retryAfter:n}}if(t.response.headers!=null&&t.response.headers[`x-ratelimit-remaining`]===`0`||(t.response.data?.errors??[]).some(e=>e.type===`RATE_LIMITED`)){let n=new Date(~~t.response.headers[`x-ratelimit-reset`]*1e3).getTime(),r=Math.max(Math.ceil((n-Date.now())/1e3)+1,0);return{wantRetry:await u.trigger(`rate-limit`,r,a,e,s),retryAfter:r}}return{}}();if(c)return i.retryCount++,l*r.retryAfterBaseValue}),e.hook.wrap(`request`,cX.bind(null,c)),{}}_X.VERSION=oX,_X.triggersNotification=mX;function vX(e){let t=e.clientType||`oauth-app`,n=e.baseUrl||`https://github.com`,r={clientType:t,allowSignup:e.allowSignup!==!1,clientId:e.clientId,login:e.login||null,redirectUrl:e.redirectUrl||null,state:e.state||Math.random().toString(36).substr(2),url:``};if(t===`oauth-app`){let t=`scopes`in e?e.scopes:[];r.scopes=typeof t==`string`?t.split(/[,\s]+/).filter(Boolean):t}return r.url=yX(`${n}/login/oauth/authorize`,r),r}function yX(e,t){let n={allowSignup:`allow_signup`,clientId:`client_id`,login:`login`,redirectUrl:`redirect_uri`,scopes:`scope`,state:`state`},r=e;return Object.keys(n).filter(e=>t[e]!==null).filter(e=>e===`scopes`?t.clientType===`github-app`?!1:!Array.isArray(t[e])||t[e].length>0:!0).map(e=>[n[e],`${t[e]}`]).forEach(([e,t],n)=>{r+=n===0?`?`:`&`,r+=`${e}=${encodeURIComponent(t)}`}),r}function bX(e){let t=e.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(t.baseUrl)?`https://github.com`:t.baseUrl.replace(`/api/v3`,``)}async function xX(e,t,n){let r={baseUrl:bX(e),headers:{accept:`application/json`},...n},i=await e(t,r);if(`error`in i.data){let n=new VJ(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:e.endpoint.merge(t,r)});throw n.response=i,n}return i}function SX({request:e=XJ,...t}){let n=bX(e);return vX({...t,baseUrl:n})}async function CX(e){let t=await xX(e.request||XJ,`POST /login/oauth/access_token`,{client_id:e.clientId,client_secret:e.clientSecret,code:e.code,redirect_uri:e.redirectUrl}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(e.clientType===`github-app`){if(`refresh_token`in t.data){let e=new Date(t.headers.date).getTime();n.refreshToken=t.data.refresh_token,n.expiresAt=wX(e,t.data.expires_in),n.refreshTokenExpiresAt=wX(e,t.data.refresh_token_expires_in)}delete n.scopes}return{...t,authentication:n}}function wX(e,t){return new Date(e+t*1e3).toISOString()}async function TX(e){let t=e.request||XJ,n={client_id:e.clientId};return`scopes`in e&&Array.isArray(e.scopes)&&(n.scope=e.scopes.join(` `)),xX(t,`POST /login/device/code`,n)}async function EX(e){let t=await xX(e.request||XJ,`POST /login/oauth/access_token`,{client_id:e.clientId,device_code:e.code,grant_type:`urn:ietf:params:oauth:grant-type:device_code`}),n={clientType:e.clientType,clientId:e.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(`clientSecret`in e&&(n.clientSecret=e.clientSecret),e.clientType===`github-app`){if(`refresh_token`in t.data){let e=new Date(t.headers.date).getTime();n.refreshToken=t.data.refresh_token,n.expiresAt=DX(e,t.data.expires_in),n.refreshTokenExpiresAt=DX(e,t.data.refresh_token_expires_in)}delete n.scopes}return{...t,authentication:n}}function DX(e,t){return new Date(e+t*1e3).toISOString()}async function OX(e){let t=await(e.request||XJ)(`POST /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.token,scopes:t.data.scopes};return t.data.expires_at&&(n.expiresAt=t.data.expires_at),e.clientType===`github-app`&&delete n.scopes,{...t,authentication:n}}async function kX(e){let t=await xX(e.request||XJ,`POST /login/oauth/access_token`,{client_id:e.clientId,client_secret:e.clientSecret,grant_type:`refresh_token`,refresh_token:e.refreshToken}),n=new Date(t.headers.date).getTime(),r={clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:AX(n,t.data.expires_in),refreshTokenExpiresAt:AX(n,t.data.refresh_token_expires_in)};return{...t,authentication:r}}function AX(e,t){return new Date(e+t*1e3).toISOString()}async function jX(e){let{request:t,clientType:n,clientId:r,clientSecret:i,token:a,...o}=e,s=await(e.request||XJ)(`POST /applications/{client_id}/token/scoped`,{headers:{authorization:`basic ${btoa(`${r}:${i}`)}`},client_id:r,access_token:a,...o}),c=Object.assign({clientType:n,clientId:r,clientSecret:i,token:s.data.token},s.data.expires_at?{expiresAt:s.data.expires_at}:{});return{...s,authentication:c}}async function MX(e){let t=await(e.request||XJ)(`PATCH /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token}),n={clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.data.token,scopes:t.data.scopes};return t.data.expires_at&&(n.expiresAt=t.data.expires_at),e.clientType===`github-app`&&delete n.scopes,{...t,authentication:n}}async function NX(e){return(e.request||XJ)(`DELETE /applications/{client_id}/token`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token})}async function PX(e){return(e.request||XJ)(`DELETE /applications/{client_id}/grant`,{headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`},client_id:e.clientId,access_token:e.token})}async function FX(e,t){let n=IX(e,t.auth);if(n)return n;let{data:r}=await TX({clientType:e.clientType,clientId:e.clientId,request:t.request||e.request,scopes:t.auth.scopes||e.scopes});await e.onVerification(r);let i=await RX(t.request||e.request,e.clientId,e.clientType,r);return e.authentication=i,i}function IX(e,t){if(t.refresh===!0||!e.authentication)return!1;if(e.clientType===`github-app`)return e.authentication;let n=e.authentication;return(`scopes`in t&&t.scopes||e.scopes).join(` `)===n.scopes.join(` `)?n:!1}async function LX(e){await new Promise(t=>setTimeout(t,e*1e3))}async function RX(e,t,n,r){try{let i={clientId:t,request:e,code:r.device_code},{authentication:a}=n===`oauth-app`?await EX({...i,clientType:`oauth-app`}):await EX({...i,clientType:`github-app`});return{type:`token`,tokenType:`oauth`,...a}}catch(i){if(!i.response)throw i;let a=i.response.data.error;if(a===`authorization_pending`)return await LX(r.interval),RX(e,t,n,r);if(a===`slow_down`)return await LX(r.interval+7),RX(e,t,n,r);throw i}}async function zX(e,t){return FX(e,{auth:t})}async function BX(e,t,n,r){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);let{token:a}=await FX(e,{request:t,auth:{type:`oauth`}});return i.headers.authorization=`token ${a}`,t(i)}var VX=`0.0.0-development`;function HX(e){let t=e.request||XJ.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${VX} ${oJ()}`}}),{request:n=t,...r}=e,i=e.clientType===`github-app`?{...r,clientType:`github-app`,request:n}:{...r,clientType:`oauth-app`,request:n,scopes:e.scopes||[]};if(!e.clientId)throw Error(`[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)`);if(!e.onVerification)throw Error(`[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)`);return Object.assign(zX.bind(null,i),{hook:BX.bind(null,i)})}var UX=`0.0.0-development`;async function WX(e){if(`code`in e.strategyOptions){let{authentication:t}=await CX({clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request});return{type:`token`,tokenType:`oauth`,...t}}if(`onVerification`in e.strategyOptions){let t=await HX({clientType:e.clientType,clientId:e.clientId,onTokenCreated:e.onTokenCreated,...e.strategyOptions,request:e.request})({type:`oauth`});return{clientSecret:e.clientSecret,...t}}if(`token`in e.strategyOptions)return{type:`token`,tokenType:`oauth`,clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,onTokenCreated:e.onTokenCreated,...e.strategyOptions};throw Error(`[@octokit/auth-oauth-user] Invalid strategy options`)}async function GX(e,t={}){if(e.authentication||=(e.clientType,await WX(e)),e.authentication.invalid)throw Error(`[@octokit/auth-oauth-user] Token is invalid`);let n=e.authentication;if(`expiresAt`in n&&(t.type===`refresh`||new Date(n.expiresAt)<new Date)){let{authentication:t}=await kX({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:n.refreshToken,request:e.request});e.authentication={tokenType:`oauth`,type:`token`,...t}}if(t.type===`refresh`){if(e.clientType===`oauth-app`)throw Error(`[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens`);if(!n.hasOwnProperty(`expiresAt`))throw Error(`[@octokit/auth-oauth-user] Refresh token missing`);await e.onTokenCreated?.(e.authentication,{type:t.type})}if(t.type===`check`||t.type===`reset`){let n=t.type===`check`?OX:MX;try{let{authentication:r}=await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request});return e.authentication={tokenType:`oauth`,type:`token`,...r},t.type===`reset`&&await e.onTokenCreated?.(e.authentication,{type:t.type}),e.authentication}catch(t){throw t.status===404&&(t.message=`[@octokit/auth-oauth-user] Token is invalid`,e.authentication.invalid=!0),t}}if(t.type===`delete`||t.type===`deleteAuthorization`){let n=t.type===`delete`?NX:PX;try{await n({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:e.authentication.token,request:e.request})}catch(e){if(e.status!==404)throw e}return e.authentication.invalid=!0,e.authentication}return e.authentication}var KX=/\/applications\/[^/]+\/(token|grant)s?/;function qX(e){return e&&KX.test(e)}async function JX(e,t,n,r={}){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);if(qX(i.url)){let n=btoa(`${e.clientId}:${e.clientSecret}`);return i.headers.authorization=`basic ${n}`,t(i)}let{token:a}=(e.clientType,await GX({...e,request:t}));return i.headers.authorization=`token `+a,t(i)}function YX({clientId:e,clientSecret:t,clientType:n=`oauth-app`,request:r=XJ.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${UX} ${oJ()}`}}),onTokenCreated:i,...a}){let o=Object.assign({clientType:n,clientId:e,clientSecret:t,onTokenCreated:i,strategyOptions:a,request:r});return Object.assign(GX.bind(null,o),{hook:JX.bind(null,o)})}YX.VERSION=UX;async function XX(e,t){if(t.type===`oauth-app`)return{type:`oauth-app`,clientId:e.clientId,clientSecret:e.clientSecret,clientType:e.clientType,headers:{authorization:`basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`}};if(`factory`in t){let{type:n,...r}={...t,...e};return t.factory(r)}let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.request,...t};return(e.clientType,await YX({...n,clientType:e.clientType}))()}async function ZX(e,t,n,r){let i=t.endpoint.merge(n,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return t(i);if(e.clientType===`github-app`&&!qX(i.url))throw Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let a=btoa(`${e.clientId}:${e.clientSecret}`);i.headers.authorization=`basic ${a}`;try{return await t(i)}catch(e){throw e.status===401&&(e.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),e}}var QX=`0.0.0-development`;function $X(e){let t=Object.assign({request:XJ.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${QX} ${oJ()}`}}),clientType:`oauth-app`},e);return Object.assign(XX.bind(null,t),{hook:ZX.bind(null,t)})}function eZ(e){return e.includes(`-----BEGIN RSA PRIVATE KEY-----`)}function tZ(e){return e.includes(`-----BEGIN OPENSSH PRIVATE KEY-----`)}function nZ(e){let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return t}function rZ(e){let t=e.trim().split(`
`).slice(1,-1).join(``);return nZ(atob(t))}function iZ(e,t){return`${sZ(e)}.${sZ(t)}`}function aZ(e){for(var t=``,n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return oZ(btoa(t))}function oZ(e){return e.replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`)}function sZ(e){return oZ(btoa(JSON.stringify(e)))}var{subtle:cZ}=globalThis.crypto;function lZ(e){return e}async function uZ({privateKey:e,payload:t}){let n=lZ(e);if(eZ(n))throw Error(`[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats`);if(tZ(n))throw Error(`[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats`);let r={name:`RSASSA-PKCS1-v1_5`,hash:{name:`SHA-256`}},i={alg:`RS256`,typ:`JWT`},a=rZ(n),o=await cZ.importKey(`pkcs8`,a,r,!1,[`sign`]),s=iZ(i,t),c=nZ(s);return`${s}.${aZ(await cZ.sign(r.name,o,c))}`}async function dZ({id:e,privateKey:t,now:n=Math.floor(Date.now()/1e3)}){let r=t.replace(/\\n/g,`
`),i=n-30,a=i+600;return{appId:e,expiration:a,token:await uZ({privateKey:r,payload:{iat:i,exp:a,iss:e}})}}var fZ=class{constructor(e=1e3,t=0){if(isNaN(e)||e<0)throw Error(`Invalid max value`);if(isNaN(t)||t<0)throw Error(`Invalid ttl value`);this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=t}bumpLru(e){if(this.last===e)return;let t=this.last,n=e.next,r=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=t,t.next=e,r!==null&&(r.next=n),n!==null&&(n.prev=r),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}}deleteMany(e){for(var t=0;t<e.length;t++)this.delete(e[t])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let t=this.items[e];if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(t),t.value}}getMany(e){let t=[];for(var n=0;n<e.length;n++)t.push(this.get(e[n]));return t}keys(){return Object.keys(this.items)}set(e,t){if(Object.prototype.hasOwnProperty.call(this.items,e)){let n=this.items[e];n.value=t,n.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==n&&this.bumpLru(n);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};async function pZ({appId:e,privateKey:t,timeDifference:n}){try{let r={id:e,privateKey:t};n&&Object.assign(r,{now:Math.floor(Date.now()/1e3)+n});let i=await dZ(r);return{type:`app`,token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(e){throw t===`-----BEGIN RSA PRIVATE KEY-----`?Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):e}}function mZ(){return new fZ(15e3,1e3*60*59)}async function hZ(e,t){let n=_Z(t),r=await e.get(n);if(!r)return;let[i,a,o,s,c,l]=r.split(`|`);return{token:i,createdAt:a,expiresAt:o,permissions:t.permissions||c.split(/,/).reduce((e,t)=>(/!$/.test(t)?e[t.slice(0,-1)]=`write`:e[t]=`read`,e),{}),repositoryIds:t.repositoryIds,repositoryNames:t.repositoryNames,singleFileName:l,repositorySelection:s}}async function gZ(e,t,n){let r=_Z(t),i=t.permissions?``:Object.keys(n.permissions).map(e=>`${e}${n.permissions[e]===`write`?`!`:``}`).join(`,`),a=[n.token,n.createdAt,n.expiresAt,n.repositorySelection,i,n.singleFileName].join(`|`);await e.set(r,a)}function _Z({installationId:e,permissions:t={},repositoryIds:n=[],repositoryNames:r=[]}){let i=Object.keys(t).sort().map(e=>t[e]===`read`?e:`${e}!`).join(`,`);return[e,n.sort().join(`,`),r.join(`,`),i].filter(Boolean).join(`|`)}function vZ({installationId:e,token:t,createdAt:n,expiresAt:r,repositorySelection:i,permissions:a,repositoryIds:o,repositoryNames:s,singleFileName:c}){return Object.assign({type:`token`,tokenType:`installation`,token:t,installationId:e,permissions:a,createdAt:n,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,s?{repositoryNames:s}:null,c?{singleFileName:c}:null)}async function yZ(e,t,n){let r=Number(t.installationId||e.installationId);if(!r)throw Error(`[@octokit/auth-app] installationId option is required for installation authentication.`);if(t.factory){let{type:n,factory:r,oauthApp:i,...a}={...e,...t};return r(a)}let i=n||e.request;return xZ(e,{...t,installationId:r},i)}var bZ=new Map;function xZ(e,t,n){let r=_Z(t);if(bZ.has(r))return bZ.get(r);let i=SZ(e,t,n).finally(()=>bZ.delete(r));return bZ.set(r,i),i}async function SZ(e,t,n){if(!t.refresh){let n=await hZ(e.cache,t);if(n){let{token:e,createdAt:r,expiresAt:i,permissions:a,repositoryIds:o,repositoryNames:s,singleFileName:c,repositorySelection:l}=n;return vZ({installationId:t.installationId,token:e,createdAt:r,expiresAt:i,permissions:a,repositorySelection:l,repositoryIds:o,repositoryNames:s,singleFileName:c})}}let r=await pZ(e),i={installation_id:t.installationId,mediaType:{previews:[`machine-man`]},headers:{authorization:`bearer ${r.token}`}};t.repositoryIds&&Object.assign(i,{repository_ids:t.repositoryIds}),t.repositoryNames&&Object.assign(i,{repositories:t.repositoryNames}),t.permissions&&Object.assign(i,{permissions:t.permissions});let{data:{token:a,expires_at:o,repositories:s,permissions:c,repository_selection:l,single_file:u}}=await n(`POST /app/installations/{installation_id}/access_tokens`,i),d=c||{},f=l||`all`,p=s?s.map(e=>e.id):void 0,m=s?s.map(e=>e.name):void 0,h=new Date().toISOString(),g={token:a,createdAt:h,expiresAt:o,repositorySelection:f,permissions:d,repositoryIds:p,repositoryNames:m};u&&Object.assign(i,{singleFileName:u}),await gZ(e.cache,t,g);let _={installationId:t.installationId,token:a,createdAt:h,expiresAt:o,repositorySelection:f,permissions:d,repositoryIds:p,repositoryNames:m};return u&&Object.assign(_,{singleFileName:u}),vZ(_)}async function CZ(e,t){switch(t.type){case`app`:return pZ(e);case`oauth-app`:return e.oauthApp({type:`oauth-app`});case`installation`:return yZ(e,{...t,type:`installation`});case`oauth-user`:return e.oauthApp(t);default:throw Error(`Invalid auth type: ${t.type}`)}}var wZ=[`/app`,`/app/hook/config`,`/app/hook/deliveries`,`/app/hook/deliveries/{delivery_id}`,`/app/hook/deliveries/{delivery_id}/attempts`,`/app/installations`,`/app/installations/{installation_id}`,`/app/installations/{installation_id}/access_tokens`,`/app/installations/{installation_id}/suspended`,`/app/installation-requests`,`/marketplace_listing/accounts/{account_id}`,`/marketplace_listing/plan`,`/marketplace_listing/plans`,`/marketplace_listing/plans/{plan_id}/accounts`,`/marketplace_listing/stubbed/accounts/{account_id}`,`/marketplace_listing/stubbed/plan`,`/marketplace_listing/stubbed/plans`,`/marketplace_listing/stubbed/plans/{plan_id}/accounts`,`/orgs/{org}/installation`,`/repos/{owner}/{repo}/installation`,`/users/{username}/installation`];function TZ(e){let t=`^(?:${e.map(e=>e.split(`/`).map(e=>e.startsWith(`{`)?`(?:.+?)`:e).join(`/`)).map(e=>`(?:${e})`).join(`|`)})$`;return new RegExp(t,`i`)}var EZ=TZ(wZ);function DZ(e){return!!e&&EZ.test(e.split(`?`)[0])}var OZ=5*1e3;function kZ(e){return!(e.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||e.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}async function AZ(e,t,n,r){let i=t.endpoint.merge(n,r),a=i.url;if(/\/login\/oauth\/access_token$/.test(a))return t(i);if(DZ(a.replace(t.endpoint.DEFAULTS.baseUrl,``))){let{token:n}=await pZ(e);i.headers.authorization=`bearer ${n}`;let r;try{r=await t(i)}catch(n){if(kZ(n)||n.response.headers.date===void 0)throw n;let r=Math.floor((Date.parse(n.response.headers.date)-Date.parse(new Date().toString()))/1e3);e.log.warn(n.message),e.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${r} seconds. Retrying request with the difference accounted for.`);let{token:a}=await pZ({...e,timeDifference:r});return i.headers.authorization=`bearer ${a}`,t(i)}return r}if(qX(a)){let n=await e.oauthApp({type:`oauth-app`});return i.headers.authorization=n.headers.authorization,t(i)}let{token:o,createdAt:s}=await yZ(e,{},t.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,jZ(e,t,i,s)}async function jZ(e,t,n,r,i=0){let a=new Date-+new Date(r);try{return await t(n)}catch(o){if(o.status!==401)throw o;if(a>=OZ)throw i>0&&(o.message=`After ${i} retries within ${a/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let s=i*1e3;return e.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${s/1e3}s)`),await new Promise(e=>setTimeout(e,s)),jZ(e,t,n,r,i)}}var MZ=`7.2.2`;function NZ(e){if(!e.appId)throw Error(`[@octokit/auth-app] appId option is required`);if(!e.privateKey)throw Error(`[@octokit/auth-app] privateKey option is required`);if(`installationId`in e&&!e.installationId)throw Error(`[@octokit/auth-app] installationId is set to a falsy value`);let t=e.log||{};typeof t.warn!=`function`&&(t.warn=console.warn.bind(console));let n=e.request||XJ.defaults({headers:{"user-agent":`octokit-auth-app.js/${MZ} ${oJ()}`}}),r=Object.assign({request:n,cache:mZ()},e,e.installationId?{installationId:Number(e.installationId)}:{},{log:t,oauthApp:$X({clientType:`github-app`,clientId:e.clientId||``,clientSecret:e.clientSecret||``,request:n})});return Object.assign(CZ.bind(null,r),{hook:AZ.bind(null,r)})}async function PZ(e){return{type:`unauthenticated`,reason:e}}function FZ(e){return e.status!==403||!e.response?!1:e.response.headers[`x-ratelimit-remaining`]===`0`}var IZ=/\babuse\b/i;function LZ(e){return e.status===403?IZ.test(e.message):!1}async function RZ(e,t,n,r){let i=t.endpoint.merge(n,r);return t(i).catch(t=>{throw t.status===404?(t.message=`Not found. May be due to lack of authentication. Reason: ${e}`,t):FZ(t)?(t.message=`API rate limit exceeded. This maybe caused by the lack of authentication. Reason: ${e}`,t):LZ(t)?(t.message=`You have triggered an abuse detection mechanism. This maybe caused by the lack of authentication. Reason: ${e}`,t):t.status===401?(t.message=`Unauthorized. "${i.method} ${i.url}" failed most likely due to lack of authentication. Reason: ${e}`,t):(t.status>=400&&t.status<500&&(t.message=t.message.replace(/\.?$/,`. May be caused by lack of authentication (${e}).`)),t)})}var zZ=function(e){if(!e||!e.reason)throw Error(`[@octokit/auth-unauthenticated] No reason passed to createUnauthenticatedAuth`);return Object.assign(PZ.bind(null,e.reason),{hook:RZ.bind(null,e.reason)})},BZ=`7.1.6`;function VZ(e,t,n){if(Array.isArray(t)){for(let r of t)VZ(e,r,n);return}e.eventHandlers[t]||(e.eventHandlers[t]=[]),e.eventHandlers[t].push(n)}var HZ=bY.defaults({userAgent:`octokit-oauth-app.js/${BZ} ${oJ()}`});async function UZ(e,t){let{name:n,action:r}=t;if(e.eventHandlers[`${n}.${r}`])for(let i of e.eventHandlers[`${n}.${r}`])await i(t);if(e.eventHandlers[n])for(let r of e.eventHandlers[n])await r(t)}async function WZ(e,t){return e.octokit.auth({type:`oauth-user`,...t,async factory(t){let n=new e.Octokit({authStrategy:YX,auth:t}),r=await n.auth({type:`get`});return await UZ(e,{name:`token`,action:`created`,token:r.token,scopes:r.scopes,authentication:r,octokit:n}),n}})}function GZ(e,t){let n={clientId:e.clientId,request:e.octokit.request,...t,allowSignup:e.allowSignup??t.allowSignup,redirectUrl:t.redirectUrl??e.redirectUrl,scopes:t.scopes??e.defaultScopes};return SX({clientType:e.clientType,...n})}async function KZ(e,t){let n=await e.octokit.auth({type:`oauth-user`,...t});return await UZ(e,{name:`token`,action:`created`,token:n.token,scopes:n.scopes,authentication:n,octokit:new e.Octokit({authStrategy:YX,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.token,scopes:n.scopes,refreshToken:n.refreshToken,expiresAt:n.expiresAt,refreshTokenExpiresAt:n.refreshTokenExpiresAt}})}),{authentication:n}}async function qZ(e,t){let n=await OX({clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t});return Object.assign(n.authentication,{type:`token`,tokenType:`oauth`}),n}async function JZ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t};if(e.clientType===`oauth-app`){let t=await MX({clientType:`oauth-app`,...n}),r=Object.assign(t.authentication,{type:`token`,tokenType:`oauth`});return await UZ(e,{name:`token`,action:`reset`,token:t.authentication.token,scopes:t.authentication.scopes||void 0,authentication:r,octokit:new e.Octokit({authStrategy:YX,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:t.authentication.token,scopes:t.authentication.scopes}})}),{...t,authentication:r}}let r=await MX({clientType:`github-app`,...n}),i=Object.assign(r.authentication,{type:`token`,tokenType:`oauth`});return await UZ(e,{name:`token`,action:`reset`,token:r.authentication.token,authentication:i,octokit:new e.Octokit({authStrategy:YX,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:r.authentication.token}})}),{...r,authentication:i}}async function YZ(e,t){if(e.clientType===`oauth-app`)throw Error(`[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps`);let n=await kX({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,refreshToken:t.refreshToken}),r=Object.assign(n.authentication,{type:`token`,tokenType:`oauth`});return await UZ(e,{name:`token`,action:`refreshed`,token:n.authentication.token,authentication:r,octokit:new e.Octokit({authStrategy:YX,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:r}}async function XZ(e,t){if(e.clientType===`oauth-app`)throw Error(`[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps`);let n=await jX({clientType:`github-app`,clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t}),r=Object.assign(n.authentication,{type:`token`,tokenType:`oauth`});return await UZ(e,{name:`token`,action:`scoped`,token:n.authentication.token,authentication:r,octokit:new e.Octokit({authStrategy:YX,auth:{clientType:e.clientType,clientId:e.clientId,clientSecret:e.clientSecret,token:n.authentication.token}})}),{...n,authentication:r}}async function ZZ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},r=e.clientType===`oauth-app`?await NX({clientType:`oauth-app`,...n}):await NX({clientType:`github-app`,...n});return await UZ(e,{name:`token`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:zZ,auth:{reason:`Handling "token.deleted" event. The access for the token has been revoked.`}})}),r}async function QZ(e,t){let n={clientId:e.clientId,clientSecret:e.clientSecret,request:e.octokit.request,...t},r=e.clientType===`oauth-app`?await PX({clientType:`oauth-app`,...n}):await PX({clientType:`github-app`,...n});return await UZ(e,{name:`token`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:zZ,auth:{reason:`Handling "token.deleted" event. The access for the token has been revoked.`}})}),await UZ(e,{name:`authorization`,action:`deleted`,token:t.token,octokit:new e.Octokit({authStrategy:zZ,auth:{reason:`Handling "authorization.deleted" event. The access for the app has been revoked.`}})}),r}var $Z=class{static VERSION=BZ;static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}constructor(e){let t=e.Octokit||HZ;this.type=e.clientType||`oauth-app`;let n=new t({authStrategy:$X,auth:{clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret}}),r={clientType:this.type,clientId:e.clientId,clientSecret:e.clientSecret,defaultScopes:e.defaultScopes||[],allowSignup:e.allowSignup,baseUrl:e.baseUrl,redirectUrl:e.redirectUrl,log:e.log,Octokit:t,octokit:n,eventHandlers:{}};this.on=VZ.bind(null,r),this.octokit=n,this.getUserOctokit=WZ.bind(null,r),this.getWebFlowAuthorizationUrl=GZ.bind(null,r),this.createToken=KZ.bind(null,r),this.checkToken=qZ.bind(null,r),this.resetToken=JZ.bind(null,r),this.refreshToken=YZ.bind(null,r),this.scopeToken=XZ.bind(null,r),this.deleteToken=ZZ.bind(null,r),this.deleteAuthorization=QZ.bind(null,r)}type;on;octokit;getUserOctokit;getWebFlowAuthorizationUrl;createToken;checkToken;resetToken;refreshToken;scopeToken;deleteToken;deleteAuthorization},eQ=new TextEncoder;function tQ(e){let t=e.match(/[\dA-F]{2}/gi).map(function(e){return parseInt(e,16)});return new Uint8Array(t)}function nQ(e){return Array.prototype.map.call(new Uint8Array(e),e=>e.toString(16).padStart(2,`0`)).join(``)}async function rQ(e){return crypto.subtle.importKey(`raw`,eQ.encode(e),{name:`HMAC`,hash:{name:`SHA-256`}},!1,[`sign`,`verify`])}async function iQ(e,t){if(!e||!t)throw TypeError(`[@octokit/webhooks-methods] secret & payload required for sign()`);if(typeof t!=`string`)throw TypeError(`[@octokit/webhooks-methods] payload must be a string`);return`sha256=${nQ(await crypto.subtle.sign(`HMAC`,await rQ(e),eQ.encode(t)))}`}async function aQ(e,t,n){if(!e||!t||!n)throw TypeError(`[@octokit/webhooks-methods] secret, eventPayload & signature required`);if(typeof t!=`string`)throw TypeError(`[@octokit/webhooks-methods] eventPayload must be a string`);return await crypto.subtle.verify(`HMAC`,await rQ(e),tQ(n.replace(`sha256=`,``)),eQ.encode(t))}async function oQ(e,t,n,r){if(await aQ(e,t,n))return!0;if(r!==void 0)for(let e of r){let r=await aQ(e,t,n);if(r)return r}return!1}var sQ=(e={})=>(typeof e.debug!=`function`&&(e.debug=()=>{}),typeof e.info!=`function`&&(e.info=()=>{}),typeof e.warn!=`function`&&(e.warn=console.warn.bind(console)),typeof e.error!=`function`&&(e.error=console.error.bind(console)),e),cQ=`branch_protection_configuration,branch_protection_configuration.disabled,branch_protection_configuration.enabled,branch_protection_rule,branch_protection_rule.created,branch_protection_rule.deleted,branch_protection_rule.edited,check_run,check_run.completed,check_run.created,check_run.requested_action,check_run.rerequested,check_suite,check_suite.completed,check_suite.requested,check_suite.rerequested,code_scanning_alert,code_scanning_alert.appeared_in_branch,code_scanning_alert.closed_by_user,code_scanning_alert.created,code_scanning_alert.fixed,code_scanning_alert.reopened,code_scanning_alert.reopened_by_user,commit_comment,commit_comment.created,create,custom_property,custom_property.created,custom_property.deleted,custom_property.promote_to_enterprise,custom_property.updated,custom_property_values,custom_property_values.updated,delete,dependabot_alert,dependabot_alert.auto_dismissed,dependabot_alert.auto_reopened,dependabot_alert.created,dependabot_alert.dismissed,dependabot_alert.fixed,dependabot_alert.reintroduced,dependabot_alert.reopened,deploy_key,deploy_key.created,deploy_key.deleted,deployment,deployment.created,deployment_protection_rule,deployment_protection_rule.requested,deployment_review,deployment_review.approved,deployment_review.rejected,deployment_review.requested,deployment_status,deployment_status.created,discussion,discussion.answered,discussion.category_changed,discussion.closed,discussion.created,discussion.deleted,discussion.edited,discussion.labeled,discussion.locked,discussion.pinned,discussion.reopened,discussion.transferred,discussion.unanswered,discussion.unlabeled,discussion.unlocked,discussion.unpinned,discussion_comment,discussion_comment.created,discussion_comment.deleted,discussion_comment.edited,fork,github_app_authorization,github_app_authorization.revoked,gollum,installation,installation.created,installation.deleted,installation.new_permissions_accepted,installation.suspend,installation.unsuspend,installation_repositories,installation_repositories.added,installation_repositories.removed,installation_target,installation_target.renamed,issue_comment,issue_comment.created,issue_comment.deleted,issue_comment.edited,issues,issues.assigned,issues.closed,issues.deleted,issues.demilestoned,issues.edited,issues.labeled,issues.locked,issues.milestoned,issues.opened,issues.pinned,issues.reopened,issues.transferred,issues.typed,issues.unassigned,issues.unlabeled,issues.unlocked,issues.unpinned,issues.untyped,label,label.created,label.deleted,label.edited,marketplace_purchase,marketplace_purchase.cancelled,marketplace_purchase.changed,marketplace_purchase.pending_change,marketplace_purchase.pending_change_cancelled,marketplace_purchase.purchased,member,member.added,member.edited,member.removed,membership,membership.added,membership.removed,merge_group,merge_group.checks_requested,merge_group.destroyed,meta,meta.deleted,milestone,milestone.closed,milestone.created,milestone.deleted,milestone.edited,milestone.opened,org_block,org_block.blocked,org_block.unblocked,organization,organization.deleted,organization.member_added,organization.member_invited,organization.member_removed,organization.renamed,package,package.published,package.updated,page_build,personal_access_token_request,personal_access_token_request.approved,personal_access_token_request.cancelled,personal_access_token_request.created,personal_access_token_request.denied,ping,project,project.closed,project.created,project.deleted,project.edited,project.reopened,project_card,project_card.converted,project_card.created,project_card.deleted,project_card.edited,project_card.moved,project_column,project_column.created,project_column.deleted,project_column.edited,project_column.moved,projects_v2,projects_v2.closed,projects_v2.created,projects_v2.deleted,projects_v2.edited,projects_v2.reopened,projects_v2_item,projects_v2_item.archived,projects_v2_item.converted,projects_v2_item.created,projects_v2_item.deleted,projects_v2_item.edited,projects_v2_item.reordered,projects_v2_item.restored,projects_v2_status_update,projects_v2_status_update.created,projects_v2_status_update.deleted,projects_v2_status_update.edited,public,pull_request,pull_request.assigned,pull_request.auto_merge_disabled,pull_request.auto_merge_enabled,pull_request.closed,pull_request.converted_to_draft,pull_request.demilestoned,pull_request.dequeued,pull_request.edited,pull_request.enqueued,pull_request.labeled,pull_request.locked,pull_request.milestoned,pull_request.opened,pull_request.ready_for_review,pull_request.reopened,pull_request.review_request_removed,pull_request.review_requested,pull_request.synchronize,pull_request.unassigned,pull_request.unlabeled,pull_request.unlocked,pull_request_review,pull_request_review.dismissed,pull_request_review.edited,pull_request_review.submitted,pull_request_review_comment,pull_request_review_comment.created,pull_request_review_comment.deleted,pull_request_review_comment.edited,pull_request_review_thread,pull_request_review_thread.resolved,pull_request_review_thread.unresolved,push,registry_package,registry_package.published,registry_package.updated,release,release.created,release.deleted,release.edited,release.prereleased,release.published,release.released,release.unpublished,repository,repository.archived,repository.created,repository.deleted,repository.edited,repository.privatized,repository.publicized,repository.renamed,repository.transferred,repository.unarchived,repository_advisory,repository_advisory.published,repository_advisory.reported,repository_dispatch,repository_dispatch.sample.collected,repository_import,repository_ruleset,repository_ruleset.created,repository_ruleset.deleted,repository_ruleset.edited,repository_vulnerability_alert,repository_vulnerability_alert.create,repository_vulnerability_alert.dismiss,repository_vulnerability_alert.reopen,repository_vulnerability_alert.resolve,secret_scanning_alert,secret_scanning_alert.created,secret_scanning_alert.publicly_leaked,secret_scanning_alert.reopened,secret_scanning_alert.resolved,secret_scanning_alert.validated,secret_scanning_alert_location,secret_scanning_alert_location.created,secret_scanning_scan,secret_scanning_scan.completed,security_advisory,security_advisory.published,security_advisory.updated,security_advisory.withdrawn,security_and_analysis,sponsorship,sponsorship.cancelled,sponsorship.created,sponsorship.edited,sponsorship.pending_cancellation,sponsorship.pending_tier_change,sponsorship.tier_changed,star,star.created,star.deleted,status,sub_issues,sub_issues.parent_issue_added,sub_issues.parent_issue_removed,sub_issues.sub_issue_added,sub_issues.sub_issue_removed,team,team.added_to_repository,team.created,team.deleted,team.edited,team.removed_from_repository,team_add,watch,watch.started,workflow_dispatch,workflow_job,workflow_job.completed,workflow_job.in_progress,workflow_job.queued,workflow_job.waiting,workflow_run,workflow_run.completed,workflow_run.in_progress,workflow_run.requested`.split(`,`);function lQ(e,t,n){e.hooks[t]||(e.hooks[t]=[]),e.hooks[t].push(n)}function uQ(e,t,n){if(Array.isArray(t)){t.forEach(t=>uQ(e,t,n));return}if([`*`,`error`].includes(t)){let e=t===`*`?`any`:t,n=`Using the "${t}" event with the regular Webhooks.on() function is not supported. Please use the Webhooks.on${e.charAt(0).toUpperCase()+e.slice(1)}() method instead`;throw Error(n)}cQ.includes(t)||e.log.warn(`"${t}" is not a known webhook name (https://developer.github.com/v3/activity/events/types/)`),lQ(e,t,n)}function dQ(e,t){lQ(e,`*`,t)}function fQ(e,t){lQ(e,`error`,t)}function pQ(e,t){let n;try{n=e(t)}catch(e){console.log(`FATAL: Error occurred in "error" event handler`),console.log(e)}n&&n.catch&&n.catch(e=>{console.log(`FATAL: Error occurred in "error" event handler`),console.log(e)})}function mQ(e,t,n){let r=[e.hooks[n],e.hooks[`*`]];return t&&r.unshift(e.hooks[`${n}.${t}`]),[].concat(...r.filter(Boolean))}function hQ(e,t){let n=e.hooks.error||[];if(t instanceof Error){let e=Object.assign(AggregateError([t],t.message),{event:t});return n.forEach(t=>pQ(t,e)),Promise.reject(e)}if(!t||!t.name){let e=Error(`Event name not passed`);throw AggregateError([e],e.message)}if(!t.payload){let e=Error(`Event name not passed`);throw AggregateError([e],e.message)}let r=mQ(e,`action`in t.payload?t.payload.action:null,t.name);if(r.length===0)return Promise.resolve();let i=[],a=r.map(n=>{let r=Promise.resolve(t);return e.transform&&(r=r.then(e.transform)),r.then(e=>n(e)).catch(e=>i.push(Object.assign(e,{event:t})))});return Promise.all(a).then(()=>{if(i.length===0)return;let e=AggregateError(i,i.map(e=>e.message).join(`
`));throw Object.assign(e,{event:t}),n.forEach(t=>pQ(t,e)),e})}function gQ(e,t,n){if(Array.isArray(t)){t.forEach(t=>gQ(e,t,n));return}if(e.hooks[t]){for(let r=e.hooks[t].length-1;r>=0;r--)if(e.hooks[t][r]===n){e.hooks[t].splice(r,1);return}}}function _Q(e){let t={hooks:{},log:sQ(e&&e.log)};return e&&e.transform&&(t.transform=e.transform),{on:uQ.bind(null,t),onAny:dQ.bind(null,t),onError:fQ.bind(null,t),removeListener:gQ.bind(null,t),receive:hQ.bind(null,t)}}async function vQ(e,t){if(!await oQ(e.secret,t.payload,t.signature,e.additionalSecrets).catch(()=>!1)){let n=Error(`[@octokit/webhooks] signature does not match event payload and secret`);return e.eventHandler.receive(Object.assign(n,{event:t,status:400}))}let n;try{n=JSON.parse(t.payload)}catch(e){throw e.message=`Invalid JSON`,e.status=400,AggregateError([e],e.message)}return e.eventHandler.receive({id:t.id,name:t.name,payload:n})}var yQ=new TextDecoder(`utf-8`,{fatal:!1});yQ.decode.bind(yQ);var bQ=class{sign;verify;on;onAny;onError;removeListener;receive;verifyAndReceive;constructor(e){if(!e||!e.secret)throw Error(`[@octokit/webhooks] options.secret required`);let t={eventHandler:_Q(e),secret:e.secret,additionalSecrets:e.additionalSecrets,hooks:{},log:sQ(e.log)};this.sign=iQ.bind(null,e.secret),this.verify=aQ.bind(null,e.secret),this.on=t.eventHandler.on,this.onAny=t.eventHandler.onAny,this.onError=t.eventHandler.onError,this.removeListener=t.eventHandler.removeListener,this.receive=t.eventHandler.receive,this.verifyAndReceive=vQ.bind(null,t)}},xQ=`15.1.6`;function SQ(e,t){return new bQ({secret:t.secret,transform:async t=>{if(!(`installation`in t.payload)||typeof t.payload.installation!=`object`){let n=new e.constructor({authStrategy:zZ,auth:{reason:`"installation" key missing in webhook event payload`}});return{...t,octokit:n}}let n=t.payload.installation.id,r=await e.auth({type:`installation`,installationId:n,factory(e){return new e.octokit.constructor({...e.octokitOptions,authStrategy:NZ,auth:{...e,installationId:n}})}});return r.hook.before(`request`,e=>{e.headers[`x-github-delivery`]=t.id}),{...t,octokit:r}}})}async function CQ(e,t){return e.octokit.auth({type:`installation`,installationId:t,factory(e){let n={...e.octokitOptions,authStrategy:NZ,auth:{...e,installationId:t}};return new e.octokit.constructor(n)}})}function wQ(e){return Object.assign(TQ.bind(null,e),{iterator:EQ.bind(null,e)})}async function TQ(e,t){let n=EQ(e)[Symbol.asyncIterator](),r=await n.next();for(;!r.done;)await t(r.value),r=await n.next()}function EQ(e){return{async*[Symbol.asyncIterator](){let t=EY.iterator(e.octokit,`GET /app/installations`);for await(let{data:n}of t)for(let t of n)yield{octokit:await CQ(e,t.id),installation:t}}}}function DQ(e){return Object.assign(OQ.bind(null,e),{iterator:AQ.bind(null,e)})}async function OQ(e,t,n){let r=AQ(e,n?t:void 0)[Symbol.asyncIterator](),i=await r.next();for(;!i.done;)n?await n(i.value):await t(i.value),i=await r.next()}function kQ(e,t){return{async*[Symbol.asyncIterator](){yield{octokit:await e.getInstallationOctokit(t)}}}}function AQ(e,t){return{async*[Symbol.asyncIterator](){let n=t?kQ(e,t.installationId):e.eachInstallation.iterator();for await(let{octokit:e}of n){let t=EY.iterator(e,`GET /installation/repositories`);for await(let{data:n}of t)for(let t of n)yield{octokit:e,repository:t}}}}}function jQ(e){let t;return async function(n={}){t||=MQ(e);let r=await t,i=new URL(r);return n.target_id!==void 0&&(i.pathname+=`/permissions`,i.searchParams.append(`target_id`,n.target_id.toFixed())),n.state!==void 0&&i.searchParams.append(`state`,n.state),i.href}}async function MQ(e){let{data:t}=await e.octokit.request(`GET /app`);if(!t)throw Error(`[@octokit/app] unable to fetch metadata for app`);return`${t.html_url}/installations/new`}var NQ=class{static VERSION=xQ;static defaults(e){return class extends this{constructor(...t){super({...e,...t[0]})}}}octokit;webhooks;oauth;getInstallationOctokit;eachInstallation;eachRepository;getInstallationUrl;log;constructor(e){let t=e.Octokit||bY,n={authStrategy:NZ,auth:Object.assign({appId:e.appId,privateKey:e.privateKey},e.oauth?{clientId:e.oauth.clientId,clientSecret:e.oauth.clientSecret}:{})};`log`in e&&e.log!==void 0&&(n.log=e.log),this.octokit=new t(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),e.webhooks?this.webhooks=SQ(this.octokit,e.webhooks):Object.defineProperty(this,`webhooks`,{get(){throw Error(`[@octokit/app] webhooks option not set`)}}),e.oauth?this.oauth=new $Z({...e.oauth,clientType:`github-app`,Octokit:t}):Object.defineProperty(this,`oauth`,{get(){throw Error(`[@octokit/app] oauth.clientId / oauth.clientSecret options are not set`)}}),this.getInstallationOctokit=CQ.bind(null,this),this.eachInstallation=wQ(this),this.eachRepository=DQ(this),this.getInstallationUrl=jQ(this)}},PQ=bY.plugin(XY,DY,UY,iX,_X).defaults({userAgent:`octokit.js/0.0.0-development`,throttle:{onRateLimit:FQ,onSecondaryRateLimit:IQ}});function FQ(e,t,n){if(n.log.warn(`Request quota exhausted for request ${t.method} ${t.url}`),t.request.retryCount===0)return n.log.info(`Retrying after ${e} seconds!`),!0}function IQ(e,t,n){if(n.log.warn(`SecondaryRateLimit detected for request ${t.method} ${t.url}`),t.request.retryCount===0)return n.log.info(`Retrying after ${e} seconds!`),!0}NQ.defaults({Octokit:PQ});var LQ=$Z.defaults({Octokit:PQ});const RQ=({redirectUri:e,clientId:t})=>`https://github.com/login/oauth/authorize?client_id=${t}&redirect_uri=${e}&apiresponse_type=code&scope=user%20repo&state=${encodeURIComponent(JSON.stringify({platform:`github`}))}`;var zQ=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const BQ=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://proxy.agentverse.cc/?${`https://github.com/login/oauth/access_token?code=${e}&client_id=${t}&redirect_uri=${encodeURIComponent(r)}&client_secret=${n}`}`,a=await S_.post(i);return Object.fromEntries(new URLSearchParams(a.data).entries())},VQ=async({refreshToken:e})=>{let t=`https://github.com/oauth/token?grant_type=refresh_token&refresh_token=${e}`;return(await S_.post(t)).data};var HQ=(()=>({getUserInfo:()=>`https://api.github.com/user`,createBranch:(e,t)=>`https://api.github.com/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`https://api.github.com/repos/${e}/${t}/branches`,createRepo:()=>`https://api.github.com/user/repos`,getRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}`,deleteRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}`,clearRepo:(e,t)=>`https://api.github.com/repos/${e}/${t}/clear`,getRepoList:()=>`https://api.github.com/user/repos`,createFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,updateFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,deleteFile:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`,getPathContents:(e,t,n)=>`https://api.github.com/repos/${e}/${t}/contents/${n.startsWith(`/`)?n.slice(1):n}`}))();const UQ=({getAccessToken:e})=>{let t=async(t,n,r=`POST`,i=!1)=>{if(i)return S_.request({method:r,url:t,data:n,headers:{Authorization:`Bearer ${e()}`}});let a=new FormData;return Object.keys(n).forEach(e=>{a.append(e,n[e])}),S_.request({method:r,url:t,data:a,headers:{Authorization:`Bearer ${e()}`}})},n={getInfo:async()=>S_.get(HQ.getUserInfo(),{headers:{Authorization:`Bearer ${e()}`}})},r={get:async({owner:e,repo:t})=>S_.get(HQ.getRepo(e,t),{params:zQ({})}),add:async({repo:e})=>{let n={name:e,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t(HQ.createRepo(),n)},getList:async({page:t=1,per_page:n=20})=>S_.get(HQ.getRepoList(),{params:zQ({page:t,per_page:n}),headers:{Authorization:`Bearer ${e()}`}}),delete:async({owner:e,repo:t})=>S_.delete(HQ.deleteRepo(e,t),{params:{owner:e,repo:t}}),clear:async({owner:e,repo:t})=>S_.put(HQ.clearRepo(e,t),{params:{owner:e,repo:t}})},i={get:async({owner:e,repo:t,branch:n})=>S_.get(HQ.getBranch(e,t,n),{params:zQ({owner:e,repo:t,branch:n})}),getList:async({owner:e,repo:t})=>S_.get(HQ.getBranchList(e,t),{params:zQ({owner:e,repo:t})}),add:async({owner:e,repo:n,branch:r,refs:i=`master`})=>{let a={owner:e,repo:n,branch_name:r,refs:i};return t(HQ.createBranch(e,n),a)}},a=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),o=async({owner:t,repo:n,path:r})=>S_.get(HQ.getPathContents(t,n,r),{params:zQ({owner:t,repo:n,path:r}),headers:{Authorization:`Bearer ${e()}`}});return{File:{add:async({owner:t,repo:n,path:r,content:i,message:o,branch:s=`master`})=>{let c=new PQ({auth:e()});r=r.startsWith(`/`)?r.slice(1):r,a(i)||(i=x_.encode(i)),o||=`create `+r;let l={owner:t,path:r,content:i,message:o,branch:s,repo:n};return c.rest.repos.createOrUpdateFileContents(l)},update:async({owner:e,repo:n,path:r,content:i,message:s,branch:c=`master`,sha:l=null})=>(a(i)||(i=x_.encode(i)),l||=(await o({owner:e,repo:n,path:r})).data.sha,s||=`update `+r,t(HQ.updateFile(e,n,r),{owner:e,repo:n,path:r,content:i,message:s,branch:c,sha:l},`PUT`,!0)),delete:async({owner:t,repo:n,path:r,sha:i,message:a})=>(i||=(await o({owner:t,repo:n,path:r})).data.sha,a||=`delete `+r,S_.delete(HQ.deleteFile(t,n,r),{params:{owner:t,repo:n,path:r,sha:i,message:a},headers:{Authorization:`Bearer ${e()}`}})),get:async({owner:e,repo:t,path:n})=>{let r=await o({owner:e,repo:t,path:n});return r.data.rawContent=r.data.content,r.data.uint8array=x_.toUint8Array(r.data.rawContent),r.data.content=x_.decode(r.data.rawContent),r},getInfo:o},Repo:r,User:n,Branch:i}};var WQ=Lm({initilize(e){let t=tJ({platform:`github`,clientId:aJ.clientId,clientSecret:aJ.clientSecret,redirectUri:aJ.redirectUri,createToken:async e=>{let{clientId:t,clientSecret:n}=e;return new LQ({clientId:t,clientSecret:n}),localStorage.getItem(`authRepo`),localStorage.getItem(`authOwner`),BQ({...e})},fetchUserInfo:async({accessToken:e})=>{let t=await UQ({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name,response:t}}}),n=nJ({id:`github`,platform:`github`,callbackTaskName:t.name,refreshAccessToken:VQ,getLoginUrl:()=>RQ({clientId:aJ.clientId,redirectUri:aJ.redirectUri})});e.taskService.registerTaskType(t),uv.registerAuthProvider(n)}}),GQ={GitaryApp:{clientId:`098834700de44fb495289d22ef1acfeb`,clientSecret:`4c595f02948f4773a9105e34c0214fee`,redirectUri:`https://gitary.app/?platform=gitcode`},Localhost5173:{clientId:`098834700de44fb495289d22ef1acfeb`,clientSecret:`4c595f02948f4773a9105e34c0214fee`,redirectUri:`http://localhost:5173/?platform=gitcode`}},KQ=GQ[Ol()]||GQ.GitaryApp,qQ=`https://api.gitcode.com/api/v5`,JQ=`https://gitcode.com/oauth`;const YQ=({redirectUri:e,clientId:t})=>{let n=`${JQ}/authorize`,r=encodeURIComponent(JSON.stringify({platform:`gitcode`}));return`${n}?client_id=${t}&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=all_user%20all_repository%20read_projects&state=${r}`};var XQ=e=>Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));const ZQ=async({code:e,clientId:t,clientSecret:n,redirectUri:r})=>{let i=`https://proxy.agentverse.cc/?${`${JQ}/token?grant_type=authorization_code&code=${encodeURIComponent(e)}&client_id=${encodeURIComponent(t)}&client_secret=${encodeURIComponent(n)}`}`;return(await S_.post(i)).data},QQ=async({refreshToken:e})=>{let t=`https://proxy.agentverse.cc/?${`${JQ}/token?grant_type=refresh_token&refresh_token=${encodeURIComponent(e)}`}`;return(await S_.post(t)).data};var $Q=(()=>({getUserInfo:()=>`${qQ}/user`,createBranch:(e,t)=>`${qQ}/repos/${e}/${t}/branches`,getBranch:(e,t,n)=>`${qQ}/repos/${e}/${t}/branches/${n}`,getBranchList:(e,t)=>`${qQ}/repos/${e}/${t}/branches`,createRepo:()=>`${qQ}/user/repos`,getRepo:(e,t)=>`${qQ}/repos/${e}/${t}`,deleteRepo:(e,t)=>`${qQ}/repos/${e}/${t}`,getRepoList:()=>`${qQ}/user/repos`,createFile:(e,t,n)=>`${qQ}/repos/${e}/${t}/contents/${n}`,updateFile:(e,t,n)=>`${qQ}/repos/${e}/${t}/contents/${n}`,deleteFile:(e,t,n)=>`${qQ}/repos/${e}/${t}/contents/${n}`,getPathContents:(e,t,n)=>`${qQ}/repos/${e}/${t}/contents/${n}`}))();const e$=({getAccessToken:e})=>{let t=async(e,t,n=`POST`)=>{let r=new FormData;return Object.keys(t).forEach(e=>{r.append(e,t[e])}),S_.request({method:n,url:e,data:r})},n={getInfo:async()=>S_.get($Q.getUserInfo(),{params:XQ({access_token:e()})})},r={get:async({owner:t,repo:n})=>S_.get($Q.getRepo(t,n),{params:XQ({access_token:e()})}),add:async({repo:n})=>{let r={access_token:e(),name:n,has_issues:!0,has_wiki:!0,can_comment:!0,private:!0};return t($Q.createRepo(),r)},getList:async({page:t=1,per_page:n=20})=>S_.get($Q.getRepoList(),{params:XQ({access_token:e(),page:t,per_page:n})}),delete:async({owner:t,repo:n})=>S_.delete($Q.deleteRepo(t,n),{params:{access_token:e(),owner:t,repo:n}})},i=e=>/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e),a=async({owner:t,repo:n,path:r})=>S_.get($Q.getPathContents(t,n,r),{params:XQ({access_token:e(),owner:t,repo:n,path:r})});return{User:n,Repo:r,Branch:{getList:async({owner:t,repo:n})=>S_.get($Q.getBranchList(t,n),{params:XQ({access_token:e(),owner:t,repo:n})})},File:{add:async({owner:n,repo:r,path:a,content:o,message:s,branch:c=`master`})=>{i(o)||(o=x_.encode(o)),s||=`create `+a;let l={access_token:e(),owner:n,path:a,content:o,message:s,branch:c};return t($Q.createFile(n,r,a),l)},update:async({owner:n,repo:r,path:o,content:s,message:c,branch:l=`master`,sha:u=null})=>(i(s)||(s=x_.encode(s)),u||=(await a({owner:n,repo:r,path:o})).data.sha,c||=`update `+o,t($Q.updateFile(n,r,o),{access_token:e(),owner:n,repo:r,path:o,content:s,message:c,branch:l,sha:u},`PUT`)),delete:async({owner:n,repo:r,path:i,sha:o,message:s})=>{o||=(await a({owner:n,repo:r,path:i})).data.sha,s||=`delete `+i;let c={access_token:e(),owner:n,repo:r,path:i,sha:o,message:s};return t($Q.deleteFile(n,r,i),c,`DELETE`)},get:async({owner:e,repo:t,path:n})=>{let r=await a({owner:e,repo:t,path:n});return r.data.rawContent=r.data.content,r.data.uint8array=x_.toUint8Array(r.data.rawContent),r.data.content=x_.decode(r.data.rawContent),r},getInfo:a}}};var t$=Lm({initilize(e){let t=tJ({platform:`gitcode`,clientId:KQ.clientId,clientSecret:KQ.clientSecret,redirectUri:KQ.redirectUri,createToken:ZQ,fetchUserInfo:async({accessToken:e})=>{let t=await e$({getAccessToken:()=>e}).User.getInfo();return{username:t.data?.name||t.data?.login}}}),n=nJ({id:`gitcode`,platform:`gitcode`,callbackTaskName:t.name,refreshAccessToken:QQ,getLoginUrl:()=>YQ({clientId:KQ.clientId,redirectUri:KQ.redirectUri})});e.taskService.registerTaskType(t),uv.registerAuthProvider(n)}}),n$=Lm({initilize(){window.authService=uv,q.eventBus.on(Ml.RequestRedirectAuthPage,e=>{let t=mv.getSpace(e);t&&uv.authenticate({platform:t.platform,username:t.owner,repo:t.repo})}),q.pluginService.use(rJ),q.pluginService.use(WQ),q.pluginService.use(t$)}}),r$=1,i$=.9,a$=.8,o$=.17,s$=.1,c$=.999,l$=.9999,u$=.99,d$=/[\\\/_+.#"@\[\(\{&]/,f$=/[\\\/_+.#"@\[\(\{&]/g,p$=/[\s-]/,m$=/[\s-]/g;function h$(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?r$:u$;var s=`${i},${a}`;if(o[s]!==void 0)return o[s];for(var c=r.charAt(a),l=n.indexOf(c,i),u=0,d,f,p,m;l>=0;)d=h$(e,t,n,r,l+1,a+1,o),d>u&&(l===i?d*=r$:d$.test(e.charAt(l-1))?(d*=a$,p=e.slice(i,l-1).match(f$),p&&i>0&&(d*=c$**+p.length)):p$.test(e.charAt(l-1))?(d*=i$,m=e.slice(i,l-1).match(m$),m&&i>0&&(d*=c$**+m.length)):(d*=o$,i>0&&(d*=c$**+(l-i))),e.charAt(l)!==t.charAt(a)&&(d*=l$)),(d<s$&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=h$(e,t,n,r,l+1,a+2,o),f*s$>d&&(d=f*s$)),d>u&&(u=d),l=n.indexOf(c,l+1);return o[s]=u,u}function g$(e){return e.toLowerCase().replace(m$,` `)}function _$(e,t,n){return e=n&&n.length>0?`${e+` `+n.join(` `)}`:e,h$(e,t,g$(e),g$(t),0,0,{})}var v$=`[cmdk-group=""]`,y$=`[cmdk-group-items=""]`,b$=`[cmdk-group-heading=""]`,x$=`[cmdk-item=""]`,S$=`${x$}:not([aria-disabled="true"])`,C$=`cmdk-item-select`,w$=`data-value`,T$=(e,t,n)=>_$(e,t,n),E$=V.createContext(void 0),D$=()=>V.useContext(E$),O$=V.createContext(void 0),k$=()=>V.useContext(O$),A$=V.createContext(void 0),j$=V.forwardRef((e,t)=>{let n=G$(()=>({search:``,value:e.value??e.defaultValue??``,selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}})),r=G$(()=>new Set),i=G$(()=>new Map),a=G$(()=>new Map),o=G$(()=>new Set),s=U$(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:m,disablePointerSelection:h=!1,vimBindings:g=!0,..._}=e,v=Ze(),y=Ze(),b=Ze(),x=V.useRef(null),S=J$();W$(()=>{if(u!==void 0){let e=u.trim();n.current.value=e,C.emit()}},[u]),W$(()=>{S(6,k)},[]);let C=V.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,o;if(!Object.is(n.current[e],t)){if(n.current[e]=t,e===`search`)O(),E(),S(1,D);else if(e===`value`){if(document.activeElement.hasAttribute(`cmdk-input`)||document.activeElement.hasAttribute(`cmdk-root`)){let e=document.getElementById(b);e?e.focus():(i=document.getElementById(v))==null||i.focus()}if(S(7,()=>{n.current.selectedItemId=A()?.id,C.emit()}),r||S(5,k),s.current?.value!==void 0){let e=t??``;(o=(a=s.current).onValueChange)==null||o.call(a,e);return}}C.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),w=V.useMemo(()=>({value:(e,t,r)=>{t!==a.current.get(e)?.value&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,T(t,r)),S(2,()=>{E(),C.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),S(3,()=>{O(),E(),n.current.value||D(),C.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=A();S(4,()=>{O(),t?.getAttribute(`id`)===e&&D(),C.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e[`aria-label`],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:v,inputId:b,labelId:y,listInnerRef:x}),[]);function T(e,t){let r=s.current?.filter??T$;return e?r(e,n.current.search,t):0}function E(){if(!n.current.search||s.current.shouldFilter===!1)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=x.current;j().sort((t,n)=>{let r=t.getAttribute(`id`),i=n.getAttribute(`id`);return(e.get(i)??0)-(e.get(r)??0)}).forEach(e=>{let t=e.closest(y$);t?t.appendChild(e.parentElement===t?e:e.closest(`${y$} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${y$} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=x.current?.querySelector(`${v$}[${w$}="${encodeURIComponent(e[0])}"]`);t?.parentElement.appendChild(t)})}function D(){let e=j().find(e=>e.getAttribute(`aria-disabled`)!==`true`)?.getAttribute(w$);C.setState(`value`,e||void 0)}function O(){if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let t of r.current){let r=T(a.current.get(t)?.value??``,a.current.get(t)?.keywords??[]);n.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of i.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=e}function k(){var e;let t=A();t&&(t.parentElement?.firstChild===t&&((e=t.closest(v$)?.querySelector(b$))==null||e.scrollIntoView({block:`nearest`})),t.scrollIntoView({block:`nearest`}))}function A(){return x.current?.querySelector(`${x$}[aria-selected="true"]`)}function j(){return Array.from(x.current?.querySelectorAll(S$)||[])}function M(e){let t=j()[e];t&&C.setState(`value`,t.getAttribute(w$))}function N(e){var t;let n=A(),r=j(),i=r.findIndex(e=>e===n),a=r[i+e];(t=s.current)!=null&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&C.setState(`value`,a.getAttribute(w$))}function P(e){let t=A()?.closest(v$),n;for(;t&&!n;)t=e>0?V$(t,v$):H$(t,v$),n=t?.querySelector(S$);n?C.setState(`value`,n.getAttribute(w$)):N(e)}let ee=()=>M(j().length-1),te=e=>{e.preventDefault(),e.metaKey?ee():e.altKey?P(1):N(1)},F=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?P(-1):N(-1)};return V.createElement(B.div,{ref:t,tabIndex:-1,..._,"cmdk-root":``,onKeyDown:e=>{var t;(t=_.onKeyDown)==null||t.call(_,e);let n=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||n))switch(e.key){case`n`:case`j`:g&&e.ctrlKey&&te(e);break;case`ArrowDown`:te(e);break;case`p`:case`k`:g&&e.ctrlKey&&F(e);break;case`ArrowUp`:F(e);break;case`Home`:e.preventDefault(),M(0);break;case`End`:e.preventDefault(),ee();break;case`Enter`:{e.preventDefault();let t=A();if(t){let e=new Event(C$);t.dispatchEvent(e)}}}}},V.createElement(`label`,{"cmdk-label":``,htmlFor:w.inputId,id:w.labelId,style:Z$},c),X$(e,e=>V.createElement(O$.Provider,{value:C},V.createElement(E$.Provider,{value:w},e))))}),M$=V.forwardRef((e,t)=>{let n=Ze(),r=V.useRef(null),i=V.useContext(A$),a=D$(),o=U$(e),s=o.current?.forceMount??i?.forceMount;W$(()=>{if(!s)return a.item(n,i?.id)},[s]);let c=q$(n,r,[e.value,e.children,r],e.keywords),l=k$(),u=K$(e=>e.value&&e.value===c.current),d=K$(e=>s||a.filter()===!1?!0:e.search?e.filtered.items.get(n)>0:!0);V.useEffect(()=>{let t=r.current;if(!(!t||e.disabled))return t.addEventListener(C$,f),()=>t.removeEventListener(C$,f)},[d,e.onSelect,e.disabled]);function f(){var e,t;p(),(t=(e=o.current).onSelect)==null||t.call(e,c.current)}function p(){l.setState(`value`,c.current,!0)}if(!d)return null;let{disabled:m,value:h,onSelect:g,forceMount:_,keywords:v,...y}=e;return V.createElement(B.div,{ref:It(r,t),...y,id:n,"cmdk-item":``,role:`option`,"aria-disabled":!!m,"aria-selected":!!u,"data-disabled":!!m,"data-selected":!!u,onPointerMove:m||a.getDisablePointerSelection()?void 0:p,onClick:m?void 0:f},e.children)}),N$=V.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=Ze(),s=V.useRef(null),c=V.useRef(null),l=Ze(),u=D$(),d=K$(e=>i||u.filter()===!1?!0:e.search?e.filtered.groups.has(o):!0);W$(()=>u.group(o),[]),q$(o,s,[e.value,e.heading,c]);let f=V.useMemo(()=>({id:o,forceMount:i}),[i]);return V.createElement(B.div,{ref:It(s,t),...a,"cmdk-group":``,role:`presentation`,hidden:d?void 0:!0},n&&V.createElement(`div`,{ref:c,"cmdk-group-heading":``,"aria-hidden":!0,id:l},n),X$(e,e=>V.createElement(`div`,{"cmdk-group-items":``,role:`group`,"aria-labelledby":n?l:void 0},V.createElement(A$.Provider,{value:f},e))))}),P$=V.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=V.useRef(null),a=K$(e=>!e.search);return!n&&!a?null:V.createElement(B.div,{ref:It(i,t),...r,"cmdk-separator":``,role:`separator`})}),F$=V.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=k$(),o=K$(e=>e.search),s=K$(e=>e.selectedItemId),c=D$();return V.useEffect(()=>{e.value!=null&&a.setState(`search`,e.value)},[e.value]),V.createElement(B.input,{ref:t,...r,"cmdk-input":``,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,"aria-autocomplete":`list`,role:`combobox`,"aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":s,id:c.inputId,type:`text`,value:i?e.value:o,onChange:e=>{i||a.setState(`search`,e.target.value),n?.(e.target.value)}})}),I$=V.forwardRef((e,t)=>{let{children:n,label:r=`Suggestions`,...i}=e,a=V.useRef(null),o=V.useRef(null),s=K$(e=>e.selectedItemId),c=D$();return V.useEffect(()=>{if(o.current&&a.current){let e=o.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty(`--cmdk-list-height`,n.toFixed(1)+`px`)})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),V.createElement(B.div,{ref:It(a,t),...i,"cmdk-list":``,role:`listbox`,tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:c.listId},X$(e,e=>V.createElement(`div`,{ref:It(o,c.listInnerRef),"cmdk-list-sizer":``},e)))}),L$=V.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...s}=e;return V.createElement(Yp,{open:n,onOpenChange:r},V.createElement(Zp,{container:o},V.createElement(Qp,{"cmdk-overlay":``,className:i}),V.createElement($p,{"aria-label":e.label,"cmdk-dialog":``,className:a},V.createElement(j$,{ref:t,...s}))))}),R$=V.forwardRef((e,t)=>K$(e=>e.filtered.count===0)?V.createElement(B.div,{ref:t,...e,"cmdk-empty":``,role:`presentation`}):null),z$=V.forwardRef((e,t)=>{let{progress:n,children:r,label:i=`Loading...`,...a}=e;return V.createElement(B.div,{ref:t,...a,"cmdk-loading":``,role:`progressbar`,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},X$(e,e=>V.createElement(`div`,{"aria-hidden":!0},e)))}),B$=Object.assign(j$,{List:I$,Item:M$,Input:F$,Group:N$,Separator:P$,Dialog:L$,Empty:R$,Loading:z$});function V$(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function H$(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function U$(e){let t=V.useRef(e);return W$(()=>{t.current=e}),t}var W$=typeof window>`u`?V.useEffect:V.useLayoutEffect;function G$(e){let t=V.useRef();return t.current===void 0&&(t.current=e()),t}function K$(e){let t=k$(),n=()=>e(t.snapshot());return V.useSyncExternalStore(t.subscribe,n,n)}function q$(e,t,n,r=[]){let i=V.useRef(),a=D$();return W$(()=>{var o;let s=(()=>{for(let e of n){if(typeof e==`string`)return e.trim();if(typeof e==`object`&&`current`in e)return e.current?e.current.textContent?.trim():i.current}})(),c=r.map(e=>e.trim());a.value(e,s,c),(o=t.current)==null||o.setAttribute(w$,s),i.current=s}),i}var J$=()=>{let[e,t]=V.useState(),n=G$(()=>new Map);return W$(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function Y$(e){let t=e.type;return typeof t==`function`?t(e.props):`render`in t?t.render(e.props):e}function X$({asChild:e,children:t},n){return e&&V.isValidElement(t)?V.cloneElement(Y$(t),{ref:t.ref},n(t.props.children)):n(t)}var Z$={position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,borderWidth:`0`},Q$=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(B$,{ref:n,className:G(`flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground`,e),...t}));Q$.displayName=B$.displayName;var $$=V.forwardRef(({className:e,...t},n)=>(0,H.jsxs)(`div`,{className:`flex items-center border-b px-3`,"cmdk-input-wrapper":``,children:[(0,H.jsx)(Tu,{className:`mr-2 h-4 w-4 shrink-0 opacity-50`}),(0,H.jsx)(B$.Input,{ref:n,className:G(`flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]}));$$.displayName=B$.Input.displayName;var e1=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(B$.List,{ref:n,className:G(`max-h-[300px] overflow-y-auto overflow-x-hidden`,e),...t}));e1.displayName=B$.List.displayName;var t1=V.forwardRef((e,t)=>(0,H.jsx)(B$.Empty,{ref:t,className:`py-6 text-center text-sm`,...e}));t1.displayName=B$.Empty.displayName;var n1=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(B$.Group,{ref:n,className:G(`overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground`,e),...t}));n1.displayName=B$.Group.displayName;var r1=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(B$.Separator,{ref:n,className:G(`-mx-1 h-px bg-border`,e),...t}));r1.displayName=B$.Separator.displayName;var i1=V.forwardRef(({className:e,...t},n)=>(0,H.jsx)(B$.Item,{ref:n,className:G(`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50`,e),...t}));i1.displayName=B$.Item.displayName;var a1=({className:e,...t})=>(0,H.jsx)(`span`,{className:G(`ml-auto text-xs tracking-widest text-muted-foreground`,e),...t});a1.displayName=`CommandShortcut`;var o1=e=>{let t=uv.getAnyAuthInfo(e)?.accessToken;if(!t)return as([]);if(e===`gitee`){let e=k_({getAccessToken:()=>t});return xs(Array.from({length:2},(t,n)=>is(e.Repo.getList({page:n+1,per_page:100})).pipe(os(e=>e.data)))).pipe(os(e=>e.flat().slice(0,200)))}else if(e.toLowerCase()===`github`){let e=UQ({getAccessToken:()=>t});return xs(Array.from({length:2},(t,n)=>is(e.Repo.getList({page:n+1,per_page:100})).pipe(os(e=>e.data)))).pipe(os(e=>e.flat().slice(0,200)))}else if(e.toLowerCase()===`gitcode`){let e=e$({getAccessToken:()=>t});return xs(Array.from({length:2},(t,n)=>is(e.Repo.getList({page:n+1,per_page:100})).pipe(os(e=>e.data)))).pipe(os(e=>e.flat().slice(0,200)))}return as([])};const s1=({children:e})=>{let{t}=Og();uv.useAuthRecords();let{authProviders:n}=uv.useAuthProviders(),r=!!uv.getAnyAuthInfo(`github`)?.accessToken,i=!!uv.getAnyAuthInfo(`gitee`)?.accessToken,a=!!uv.getAnyAuthInfo(`gitcode`)?.accessToken,o=n.find(e=>e.platform===`github`),s=n.find(e=>e.platform===`gitee`),c=n.find(e=>e.platform===`gitcode`),[l,u]=(0,V.useState)(!1),[d,f]=(0,V.useState)(!1),[p,m]=(0,V.useState)(!1),[h,g]=(0,V.useState)([]),[_,v]=(0,V.useState)(!1),[y,b]=(0,V.useState)([]),[x,S]=(0,V.useState)(!1),[C,w]=(0,V.useState)([]),[T,E]=(0,V.useState)(!1),[D,O]=(0,V.useState)(!1),[k,A]=(0,V.useState)(``),[j,M]=(0,V.useState)(!1);(0,V.useEffect)(()=>{if(r&&l&&h.length===0){v(!0);let e=o1(`github`).subscribe({next:e=>{v(!1),e&&e.length>0?g(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):g([])},error:e=>{console.error(`Failed to load GitHub repos:`,e),v(!1),g([])}});return()=>e.unsubscribe()}},[r,l,h.length]),(0,V.useEffect)(()=>{if(i&&d&&y.length===0){S(!0);let e=o1(`gitee`).subscribe({next:e=>{S(!1),e&&e.length>0?b(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):b([])},error:e=>{console.error(`Failed to load Gitee repos:`,e),S(!1),b([])}});return()=>e.unsubscribe()}},[i,d,y.length]),(0,V.useEffect)(()=>{if(a&&p&&C.length===0){E(!0);let e=o1(`gitcode`).subscribe({next:e=>{E(!1),e&&e.length>0?w(e.map(e=>({value:e.name,label:e.name,owner:e.owner?.login||e.owner?.name||``}))):w([])},error:e=>{console.error(`Failed to load GitCode repos:`,e),E(!1),w([])}});return()=>e.unsubscribe()}},[a,p,C.length]);let N=async(e,n,r)=>{try{mv.addSpace({platform:e,owner:r,repo:n.toLowerCase()},{focus:!0,silent:!0}),q.notificationService.success(t(`space.workspaceAdded`))}catch{q.notificationService.error(t(`space.addFailed`))}},P=async()=>{o&&await o.authenticate({needConfirm:!1})},ee=async()=>{s&&await s.authenticate({needConfirm:!1})},te=e=>{e.preventDefault(),r?u(!l):P()},F=e=>{e.preventDefault(),i?f(!d):ee()},I=async()=>{c&&await c.authenticate({needConfirm:!0})},ne=e=>{e.preventDefault(),a?m(!p):I()},re=async()=>{let e={platform:`idb`,owner:`root`,repo:`home`};try{let n=mv.getSpaceByInfo(e)||mv.addSpace(e,{focus:!0,silent:!0});mv.focusSpace(n.id);try{await oe(async()=>{let{openerService:e}=await import(`./opener.service-CPIZIdyP.js`);return{openerService:e}},__vite__mapDeps([19,1,2,3,4,5,8,9,7,10,11,12])).then(({openerService:e})=>e.open(n.id,{id:n.id+`/README.md`,name:`README.md`,path:`/README.md`,type:`file`}))}catch{q.notificationService.info(t(`space.localSpaceCreated`))}}catch{q.notificationService.error(t(`space.createLocalSpaceFailed`))}},ie=e=>{e.preventDefault(),O(!D)},ae=async()=>{if(k.trim()){M(!0);try{let e=k.trim();!e.startsWith(`http://`)&&!e.startsWith(`https://`)&&(e=`https://${e}`);let n=mv.parseRepoUrl(e);if(!n.platform||!n.owner||!n.repo){q.notificationService.error(t(`space.invalidRepoUrl`)),M(!1);return}let r=mv.getSpaceByInfo({platform:n.platform,owner:n.owner,repo:n.repo});if(r){q.notificationService.info(t(`space.spaceExists`)),mv.focusSpace(r.id),M(!1),A(``),O(!1);return}mv.addSpace({platform:n.platform,owner:n.owner,repo:n.repo,readonly:!0},{focus:!0,silent:!0}),q.notificationService.success(t(`space.readOnlySpaceAdded`)),A(``),O(!1)}catch(e){console.error(`Failed to add read-only space:`,e),q.notificationService.error(t(`space.readOnlySpaceAddFailed`))}finally{M(!1)}}};return(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:e}),(0,H.jsxs)(Zk,{align:`start`,side:`right`,className:`w-[280px] p-1`,sideOffset:6,children:[(0,H.jsx)(tA,{className:`px-2.5 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wider`,children:t(`space.addWorkspace`)}),(0,H.jsx)(nA,{className:`my-1`}),(0,H.jsxs)(`div`,{className:`space-y-1`,children:[(0,H.jsx)(Qk,{onClick:te,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(du,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`GitHub`}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(r?`space.selectRepository`:`space.needAuthorization`)})]}),r?_?(0,H.jsx)(K,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):l?(0,H.jsx)(Jl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsx)(Xl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,H.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,H.jsx)(Kl,{className:`h-3 w-3`})]})]})}),r&&l&&(0,H.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,H.jsxs)(Q$,{className:`bg-transparent`,children:[(0,H.jsx)($$,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,H.jsxs)(e1,{className:`max-h-[240px]`,children:[(0,H.jsx)(n1,{className:`p-0`,children:_?(0,H.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,H.jsx)(K,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):h.length===0?(0,H.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):h.map(e=>(0,H.jsx)(i1,{onSelect:()=>N(`github`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!_&&h.length>0&&(0,H.jsx)(t1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,H.jsxs)(`div`,{className:`space-y-1`,children:[(0,H.jsx)(Qk,{onClick:F,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(uu,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`Gitee`}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(i?`space.selectRepository`:`space.needAuthorization`)})]}),i?x?(0,H.jsx)(K,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):d?(0,H.jsx)(Jl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsx)(Xl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,H.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,H.jsx)(Kl,{className:`h-3 w-3`})]})]})}),i&&d&&(0,H.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,H.jsxs)(Q$,{className:`bg-transparent`,children:[(0,H.jsx)($$,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,H.jsxs)(e1,{className:`max-h-[240px]`,children:[(0,H.jsx)(n1,{className:`p-0`,children:x?(0,H.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,H.jsx)(K,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):y.length===0?(0,H.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):y.map(e=>(0,H.jsx)(i1,{onSelect:()=>N(`gitee`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!x&&y.length>0&&(0,H.jsx)(t1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,H.jsxs)(`div`,{className:`space-y-1`,children:[(0,H.jsx)(Qk,{onClick:ne,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(uu,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:`GitCode`}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(a?`space.selectRepository`:`space.needAuthorization`)})]}),a?T?(0,H.jsx)(K,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0 animate-spin`}):p?(0,H.jsx)(Jl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsx)(Xl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0`,children:[(0,H.jsx)(`span`,{children:t(`space.goAuthorize`)}),(0,H.jsx)(Kl,{className:`h-3 w-3`})]})]})}),a&&p&&(0,H.jsx)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2`,children:(0,H.jsxs)(Q$,{className:`bg-transparent`,children:[(0,H.jsx)($$,{placeholder:t(`space.searchRepository`),className:`h-8 text-sm border-0 focus:ring-0 bg-transparent`}),(0,H.jsxs)(e1,{className:`max-h-[240px]`,children:[(0,H.jsx)(n1,{className:`p-0`,children:T?(0,H.jsxs)(`div`,{className:`py-4 text-center text-xs flex items-center justify-center gap-2 text-muted-foreground`,children:[(0,H.jsx)(K,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):C.length===0?(0,H.jsx)(`div`,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.noRepository`)}):C.map(e=>(0,H.jsx)(i1,{onSelect:()=>N(`gitcode`,e.value,e.owner),className:`cursor-pointer px-2 py-1.5 rounded-sm text-sm`,children:e.label},e.value))}),!T&&C.length>0&&(0,H.jsx)(t1,{className:`py-4 text-center text-xs text-muted-foreground`,children:t(`space.notFound`)})]})]})})]}),(0,H.jsx)(nA,{className:`my-1`}),(0,H.jsxs)(`div`,{className:`space-y-1`,children:[(0,H.jsx)(Qk,{onClick:ie,className:`px-2.5 py-2 cursor-pointer group focus:bg-accent/50`,onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(hu,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:t(`space.addReadOnlySpace`)}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(`space.addReadOnlySpaceDesc`)})]}),D?(0,H.jsx)(Jl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`}):(0,H.jsx)(Xl,{className:`h-3.5 w-3.5 text-muted-foreground/60 shrink-0`})]})}),D&&(0,H.jsxs)(`div`,{className:`ml-6 mr-1 mb-1 rounded-md bg-muted/50 p-2 space-y-2`,children:[(0,H.jsx)(fm,{value:k,onChange:e=>A(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),ae())},placeholder:t(`space.enterRepoUrl`),className:`h-8 text-sm`,disabled:j}),(0,H.jsx)(`button`,{onClick:ae,disabled:j||!k.trim(),className:`w-full h-8 text-xs bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:j?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(K,{className:`h-3.5 w-3.5 animate-spin`}),t(`space.loading`)]}):t(`space.addReadOnlySpace`)})]})]}),(0,H.jsx)(nA,{className:`my-1`}),(0,H.jsx)(Qk,{onClick:re,className:`px-2.5 py-2 cursor-pointer group`,children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(Du,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:t(`space.localStart`)}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:t(`space.noLoginRequired`)})]})]})})]})]})},c1=({activity:e,isExpanded:t})=>{let{icon:n=`AiOutlinePlusCircle`,name:r}=e,i=Yu.useComponent(n)??(()=>null),a=(0,H.jsxs)(`button`,{className:G(`flex items-center transition-all duration-300 ease-in-out`,t?`px-3 py-1.5 w-full`:`p-1.5 aspect-square`,t?`rounded-sm`:`rounded-md`,`hover:bg-accent/80 hover:text-accent-foreground`,`data-[state=open]:pointer-events-none`,!t&&`justify-center`),onMouseDown:e=>e.preventDefault(),children:[(0,H.jsx)(i,{className:G(`flex-shrink-0 transition-all duration-300 ease-in-out`,t?`h-5 w-5`:`h-[22px] w-[22px]`,`hover:scale-105`)}),t&&(0,H.jsx)(`span`,{className:`ml-2.5 text-sm truncate text-muted-foreground animate-in fade-in-0 slide-in-from-left-2 duration-300`,children:r})]});return t?(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsx)(s1,{children:(0,H.jsx)(`div`,{className:`flex justify-center w-full`,children:a})})}):(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsxs)(Rl,{disableHoverableContent:!0,children:[(0,H.jsx)(s1,{children:(0,H.jsx)(zl,{asChild:!0,children:(0,H.jsx)(`div`,{className:`flex justify-center`,children:a})})}),(0,H.jsx)(Bl,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:r})]})})},l1=Lm({initilize(e){let t=`addGiteeRepo`;e.componentService.register(`AiOutlinePlusCircle`,Re),e.componentService.register(`activity:${t}`,c1),e.layoutService.activityBar.addActivity({id:t,icon:`AiOutlinePlusCircle`,name:J(`common.add`),order:100,unselectable:!0},!0),oh.getStore().waitUtilLoaded(()=>{oh.getStore().getData().length===0&&e.layoutService.activityBar.getActivityList().find(e=>e.id===t)&&e.eventBus.emit(Ml.ActivityBar.ActivityClicked(t))})}});var u1=Lm({initilize(e){let t=fv.LastFocusedSpaceId,n=[];e.eventBus.on(Ml.Space.SpacesChanged,r=>{let i=n.map(e=>e.id),a=r.map(e=>e.id);r.filter(e=>!i.includes(e.id));let o=n.filter(e=>!a.includes(e.id)),s=r.filter(e=>!n.includes(e));n=r,s.forEach(e=>{A_.add(e)}),o.forEach(e=>{A_.remove(e.id)});let c=e.layoutService.sidebar.getViewList(),l=e.layoutService.sidebar.getActiveViewId();if(!c.some(e=>e.id===l)){let n,r=pv.get(t);r&&c.some(e=>e.id===r)&&(n=r),n||=c[0]?.id,n&&e.layoutService.sidebar.setActiveViewId(n)}}),e.eventBus.on(Ml.ActivityBar.DragItem,({prevIndex:e,nextIndex:t})=>{oh.getStore().getActions().reduce(n=>{if(e===t)return n;let r=n.slice(0,Math.min(e,t)),i=n.slice(Math.max(e,t)+1),a=n.slice(Math.min(e,t)+1,Math.max(e,t)),o=n[e],s=n[t],c;return c=e<t?[...r,...a,s,o,...i]:[...r,o,s,...a,...i],c})})}});const d1=(e,t)=>{let[n,r]=(0,V.useState)(()=>{let n=q.registry.get(e);return n===void 0?t:n});return(0,V.useEffect)(()=>q.registry.subscribe(e,e=>{r(e)}),[]),[n,t=>q.registry.set(e,t)]};var f1=(0,V.createContext)({}),p1=({children:e,...t})=>{let n=(0,V.useContext)(f1);return(0,H.jsx)(f1.Provider,{value:{...n,...t},children:e})};const m1=()=>(0,V.useContext)(f1);var h1=p1,g1=({title:e,children:t,className:n=``,actions:r})=>{let i=m1();return(0,H.jsxs)(y,{className:[`side-card`,n].join(` `),w:`100%`,h:`100%`,overflow:`hidden`,flexShrink:0,gap:0,children:[(0,H.jsxs)(qk,{children:[(0,H.jsx)(D,{w:`100%`,h:`2.5rem`,align:`center`,flexShrink:0,className:`header`,px:4,py:2,bg:`gray.100`,_dark:{bg:`gray.800`,borderColor:`gray.700`},borderBottom:`1px solid`,borderColor:`gray.200`,children:(0,H.jsxs)(j,{align:`center`,w:`100%`,children:[(0,H.jsx)(S,{label:e,children:(0,H.jsx)(H.Fragment,{children:typeof e==`string`?(0,H.jsx)(f,{as:`b`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,overflow:`hidden`,fontSize:`lg`,color:`gray.800`,_dark:{color:`gray.200`},children:e}):e})}),(0,H.jsx)(Jk,{asChild:!0,children:(0,H.jsx)(p,{"aria-label":`Options`,icon:(0,H.jsx)(Ue,{}),variant:`ghost`,size:`sm`,ml:`auto`,_hover:{bg:`gray.200`,_dark:{bg:`gray.600`}}})})]})}),(0,H.jsx)(Zk,{align:`start`,sideOffset:4,className:`min-w-40`,children:r.map(e=>{let t={};return e.events&&e.id&&e.events.forEach(n=>t[`on${n}`]=t=>{q.eventBus.emit(`${e.id}::${n}`,{event:t,context:i}),e.id&&n.toLowerCase()===`click`&&q.eventBus.emit(Ml.Action.Clicked(e.id),{event:t,context:i})}),(0,H.jsxs)(Qk,{...t,children:[e.icon,e.title]},e.title)})})]}),(0,H.jsx)(y,{m:`0 !important`,w:`100%`,flexGrow:1,overflow:`hidden`,gap:0,children:(0,H.jsx)(y,{w:`100%`,height:`100%`,overflowX:`hidden`,className:`flex-container-limited`,gap:0,children:t})})]})};function _1(e){let{t}=Og(),{options:n=[],value:r,onChange:i,placeholder:a}=e,[o,s]=V.useState(!1),c=n.find(e=>e.value===r);return(0,H.jsxs)(pl,{open:o,onOpenChange:s,children:[(0,H.jsx)(ml,{asChild:!0,children:(0,H.jsxs)(_c,{variant:`ghost`,role:`combobox`,"aria-expanded":o,className:G(`flex w-full h-10 justify-start items-center flex-shrink overflow-hidden ml-1 px-1 py-1`,!o&&`bg-transparent`,`hover:bg-gray-200 dark:hover:bg-gray-600`,`focus:ring-0 focus:border-0`),children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-2 min-w-0 flex-grow`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 flex items-center justify-center w-7 h-7 bg-teal-200 dark:bg-teal-500 rounded-md`,children:(0,H.jsxs)(`span`,{className:`text-black dark:text-white font-semibold text-lg`,children:[c?.title?.charAt(0).toUpperCase(),` `]})}),(0,H.jsxs)(`span`,{className:G(`truncate flex-grow min-w-0`,r?`font-semibold text-base text-gray-800 dark:text-gray-200`:`text-gray-400 dark:text-gray-500`),children:[c?.label||a,` `]})]}),(0,H.jsx)(Te,{className:`ml-2 h-4 w-4 shrink-0 opacity-50 text-gray-500 dark:text-gray-300`})]})}),(0,H.jsx)(hl,{className:`w-[300px] p-0 dark:bg-gray-800 dark:border-gray-700`,children:(0,H.jsxs)(Q$,{defaultValue:r,filter:(e,t)=>{let r=n.find(t=>t.value===e);return r&&`${r.data?.platform} ${r.data?.repo} ${r.data?.owner}`.includes(t)?1:0},children:[(0,H.jsx)($$,{placeholder:a,className:`h-9 dark:bg-gray-800 dark:text-gray-200`,onValueChange:e=>{}}),(0,H.jsx)(t1,{className:`dark:text-gray-400`,children:t(`tree.notFound`)}),(0,H.jsx)(n1,{children:(0,H.jsx)(e1,{children:n.map(e=>(0,H.jsxs)(i1,{value:e.value,className:`dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600`,onSelect:e=>{i?.(e===r?void 0:e),s(!1)},children:[e.label,(0,H.jsx)(L,{className:G(`ml-auto h-4 w-4`,r===e.value?`opacity-100 dark:text-gray-200`:`opacity-0`)})]},e.value))})})]})})]})}const v1=({space:e})=>{let{t}=Og();return(0,H.jsxs)(`div`,{className:`flex items-center overflow-hidden w-full`,children:[(0,H.jsxs)(`div`,{className:`flex items-center overflow-hidden flex-shrink min-w-0 mr-1`,children:[(0,H.jsx)(`div`,{className:`text-s text-gray-500 truncate min-w-0`,children:e.owner}),(0,H.jsx)(`div`,{className:`text-s text-gray-500 flex-shrink-0 mx-0.5`,children:`/`}),(0,H.jsx)(`div`,{className:`text-s text-gray-500 truncate min-w-0 flex-shrink`,children:e.repo})]}),e.readonly&&(0,H.jsxs)(`div`,{className:`flex items-center text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 rounded-full px-1 mr-1 flex-shrink-0`,children:[(0,H.jsx)(gu,{className:`h-2.5 w-2.5 mr-0.5`}),(0,H.jsx)(`span`,{children:t(`space.readonly`)})]}),(0,H.jsx)(`div`,{className:`text-xs text-gray-500 bg-gray-200 dark:bg-gray-700 rounded-full px-1 flex-shrink-0`,children:e.platform})]})},y1={NodeContentLoaded:`NodeContentLoaded`,TreeOpened:`TreeOpened`,CopyFilePath:br(`copyFilePath`),DownloadFile:br(`downloadFile`),NodeClick:br(`node::click`),AddMarkdownAt:br(`addMarkdownAt`),AddFileAt:br(`addFileAt`),AddFolderAt:br(`addFolderAt`),DeleteNode:br(`deleteNode`),EditNode:br(`editNode`),EditBlur:br(`editBlur`),EditKeyEnter:br(`editKeyEnter`),EditKeyDown:br(`editKeyDown`),EditChange:br(`editProgress`),EditWillFinish:br(`editWillFinish`),RefreshNode:br(`refreshNode`),KeydownEnter:br(`keydownEnter`),DragStart:br(`dragStart`),DragEnd:br(`dragEnd`),DragEnter:br(`dragEnter`),DragLeave:br(`dragLeave`),DragOver:br(`dragOver`),Drop:br(`drop`),NodeMoved:br(`nodeMoved`)},b1={TreeService:br(`treeService`),EditInputNodeName:br(`edit.inputNodeName`),RefershNode:br(`refreshNode`)},x1={FilterNodes:br(`filterNodes`)};let S1=function(e){return e.File=`file`,e.Dir=`dir`,e}({}),C1=function(e){return e.PlainText=`plainText`,e.Markdown=`markdown`,e}({});const w1=()=>({createPlugin:e=>(t={})=>{let{id:n,name:r,description:i,addOptions:a=()=>({}),...o}=e,s=a(),c=e=>(Object.assign(s,e),l),l={id:n,name:r,description:i,options:s,configure:c};c(t);let u={};for(let e in o)u[e]=o[e].bind(l);return Object.assign(l,u)}}),T1=()=>w1().createPlugin,E1=(...e)=>T1()(...e),D1=()=>({createPlugin:e=>w1().createPlugin(e)}),O1=e=>(...t)=>E1(e)(...t),k1={TreeService:br(`treeService`)},A1={DraggedNodeInfo:br(`draggedNodeInfo`)},j1=(0,V.createContext)(void 0),M1=()=>{let e=(0,V.useContext)(j1);if(!e)throw Error(`No tree context provided`);return e},N1=(0,V.createContext)(void 0),P1=()=>{let e=(0,V.useContext)(N1);if(!e)throw Error(`No tree context provided`);return e},F1=O1({activate({eventBus:e,viewSystem:t,serviceBus:n,dataStore:r}){let i=n.createProxy(k1.TreeService);e.on(y1.NodeClick,({node:{id:e}})=>i.toggleNode({id:e})),e.on(y1.EditKeyEnter,({node:{id:e}})=>i.toggleNode({id:e}))}});let I1=function(e){return e.FILE=`file`,e.DIR=`dir`,e}({});const L1=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t.endsWith(`/`)?t+=e[n]:t+=`/`+e[n];return t},R1=(e,t)=>{let n=e.split(`/`),r=t.split(`/`);return n.length<=r.length?!1:n.slice(0,r.length).every((e,t)=>e===r[t])},z1=(e,t,n)=>{let{registry:r}=M1(),[i,a]=(0,V.useState)(null),[o,s]=(0,V.useState)(null);return{dragPosition:i,canDrop:(0,V.useMemo)(()=>{if(o&&i===`inside`){let n=t.getNode(o.draggedId);if(e.type!==I1.DIR||n?.type===I1.DIR||R1(n?.path||``,e.path||``))return!1}return!0},[i,o,e,t]),handleDragStart:t=>{t.stopPropagation(),r.set(A1.DraggedNodeInfo,{nodeId:e.id}),n.emit(y1.DragStart,{node:e,event:t})},handleDragOver:t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect=`move`;let i=t.currentTarget.getBoundingClientRect(),o=r.get(A1.DraggedNodeInfo)?.nodeId;s({draggedId:o});let c=t.clientY-i.top;c<i.height*.25?a(`before`):c>i.height*.75?a(`after`):a(`inside`),n.emit(y1.DragOver,{node:e,event:t})},handleDragEnter:t=>{t.stopPropagation(),n.emit(y1.DragEnter,{node:e,event:t})},handleDragLeave:t=>{t.stopPropagation(),a(null),n.emit(y1.DragLeave,{node:e,event:t})},handleDrop:t=>{t.preventDefault(),t.stopPropagation(),i&&n.emit(y1.Drop,{node:e,event:t,position:i}),a(null)}}};var B1=t(Ot(),1);const V1=({node:e,level:t,context:n,parentNode:r})=>{let{dataStore:i,viewSystem:a,eventBus:o}=n,{renderer:s}=a,{id:c}=e,u=i.useNode(c);if(!u)return null;let{children:d}=u,{expanded:f,highlight:p,isDragOver:m}=a.viewStateStore.useRecord(c)||a.getDefaultViewState({id:c}),{dragPosition:h,canDrop:g,handleDragStart:_,handleDragOver:v,handleDragEnter:y,handleDragLeave:b,handleDrop:x}=z1(u,i,o);return(0,H.jsx)(j1.Provider,{value:n,children:(0,H.jsx)(j,{w:`100%`,direction:`column`,className:(0,B1.default)(`tree-node-wrapper relative`,{"cursor-no-drop":!g&&m}),draggable:!0,onDragStart:_,onDragOver:v,onDragEnter:y,onDragLeave:b,onDrop:x,children:(0,H.jsxs)(j,{direction:`row`,w:`100%`,align:`center`,overflow:`hidden`,className:(0,B1.default)({"tree-node":!0,"tree-node-highlight":p,"tree-root-node":t===0,"bg-gray-200 dark:bg-gray-700 bg-opacity-50 dark:bg-opacity-50":m&&g,"outline outline-2 outline-blue-500 dark:outline-blue-400":m&&h===`inside`&&g,"outline outline-2 outline-red-500 dark:outline-red-400":m&&h===`inside`&&!g,[`level-${t}`]:!0}),children:[t>1&&(0,H.jsx)(l,{className:`placeholder`,w:3,flexShrink:0,flexGrow:0}),(0,H.jsxs)(j,{className:`tree-node-content`,flexFlow:`column`,h:`100%`,flexGrow:1,align:`center`,overflow:`hidden`,children:[s.render({type:`tree-node-header`,props:{node:e,level:t,parentNode:r,dragPosition:h,isDragOver:m,canDrop:g}},0),s.render({type:`tree-node-list`,props:{nodes:d,expanded:f,parentNode:e,level:t}},1)]})]})},c)})};var H1=class{nodeMap=new Map;child2Parent={};parent2Children={};nodeSubjects=new Map;childrenSubjects=new Map;constructor(e){this.initSubTree(void 0,e)}initSubTree=(e,t,n)=>{let{overwrite:r}=n||{};if(!r&&this.nodeMap.has(t.id))throw Error(`Node ${t.id} already exists`);this.nodeMap.set(t.id,{id:t.id,data:t.data}),e&&(this.child2Parent[t.id]=e,this.parent2Children[e]=[...this.parent2Children[e]||[],t.id]),t.children&&t.children.forEach(e=>this.initSubTree(t.id,e))};getNode=e=>this.nodeMap.get(e);getParentNode=e=>{let t=this.child2Parent[e];return t?this.getNode(t):void 0};getChildrenIds=e=>this.parent2Children[e]||[];getSubTree=e=>{let t=this.getNode(e);if(!t)return;let n=this.getChildrenIds(e).map(e=>this.getSubTree(e));return{...t,children:n}};createObservableOfSubject=e=>{let{topic:t,getSubject:n,setSubject:r,removeSubject:i,emitCurrentValueOnSubscribe:a,getCurrentValue:o}=e;return bs(()=>{let e=n(t);return e||(e=a&&o?new xo(o()):new pt,r(t,e)),e.asObservable()}).pipe(js({bufferSize:1,refCount:!0}),Ds(()=>{let e=n(t);e&&!e.observed&&i(t)}))};getNodeObservable(e,t){return this.createObservableOfSubject({topic:e,getSubject:e=>this.nodeSubjects.get(e),setSubject:(e,t)=>this.nodeSubjects.set(e,t),removeSubject:e=>this.nodeSubjects.delete(e),emitCurrentValueOnSubscribe:t?.emitCurrentValueOnSubscribe,getCurrentValue:()=>this.getNode(e)})}getChildrenIdsObservable(e,t){return this.createObservableOfSubject({topic:e,getSubject:e=>this.childrenSubjects.get(e),setSubject:(e,t)=>this.childrenSubjects.set(e,t),removeSubject:e=>this.childrenSubjects.delete(e),emitCurrentValueOnSubscribe:t?.emitCurrentValueOnSubscribe,getCurrentValue:()=>this.getChildrenIds(e)})}observeNode=(e,t,n)=>{this.nodeSubjects.has(e)||this.nodeSubjects.set(e,new pt);let r=this.nodeSubjects.get(e),i=r.subscribe(t);return n?.fireImmediately&&t(this.getNode(e)),()=>{i.unsubscribe(),r.observed||this.nodeSubjects.delete(e)}};observeChildrenIds=(e,t,n)=>{this.childrenSubjects.has(e)||this.childrenSubjects.set(e,new pt);let r=this.childrenSubjects.get(e),i=r.subscribe(t);return n?.fireImmediately&&t(this.getChildrenIds(e)),()=>{i.unsubscribe(),r.observed||this.childrenSubjects.delete(e)}};updateNode=e=>(this.nodeMap.set(e.id,e),this.nodeSubjects.get(e.id)?.next(e),!0);addNode=(e,...t)=>{this.getNode(e)&&(t.forEach(t=>{this.nodeMap.set(t.id,t),this.child2Parent[t.id]=e}),this.parent2Children[e]=[...this.parent2Children[e]||[],...t.map(e=>e.id)],t.forEach(e=>{this.nodeSubjects.get(e.id)?.next(e)}),this.childrenSubjects.get(e)?.next(this.getChildrenIds(e)))};sortChildren=(e,t)=>{let n=this.getChildrenIds(e).sort(t);this.parent2Children[e]=n,this.childrenSubjects.get(e)?.next(n)};sortSubTree=(e,t)=>{this.sortChildren(e,t),this.getChildrenIds(e).forEach(e=>this.sortSubTree(e,t))};removeNode=e=>{if(!this.getNode(e))return;let t=this.child2Parent[e];t&&(this.parent2Children[t]=this.parent2Children[t]?.filter(t=>t!==e)),this.nodeMap.delete(e),delete this.child2Parent[e],delete this.parent2Children[e],this.nodeSubjects.get(e)?.next(void 0),this.nodeSubjects.get(e)?.complete(),this.nodeSubjects.delete(e),this.childrenSubjects.get(e)?.next([]),this.childrenSubjects.get(e)?.complete(),this.childrenSubjects.delete(e)}},U1=class{tree;rootId;constructor(e){this.tree=new H1(e),this.rootId=e.id,this.sortSubTree(this.rootId)}getRootMenuTree=()=>{let e=this.getMenuTree(this.rootId);return{...e,children:e.children||[]}};getMenuTree=e=>this.tree.getSubTree(e);getMenuItem=e=>this.tree.getNode(e);addMenuItems=e=>{e.reduce((e,t)=>{let n=t.data.parentId,r=e.find(e=>e.parentId===n);return r?r.items.push(t):e.push({parentId:n,items:[t]}),e},[]).forEach(e=>{if(!e.parentId)throw Error(`Invalid menu item: parentId is required.`);this.tree.addNode(e.parentId,...e.items),this.sortChildren(e.parentId)})};sortChildren=e=>this.tree.sortChildren(e,(e,t)=>(this.tree.getNode(e).data.order??1/0)-(this.tree.getNode(t).data.order??1/0));sortSubTree=e=>{this.tree.sortSubTree(e,(e,t)=>(this.tree.getNode(e).data.order??1/0)-(this.tree.getNode(t).data.order??1/0))};addMenuTree=e=>{this.tree.initSubTree(e.data.parentId,e),e.data.parentId?this.sortSubTree(e.data.parentId):this.sortSubTree(e.id)};updateMenuItem=e=>{this.tree.updateNode(e),e.data.parentId&&this.sortChildren(e.data.parentId)};removeMenuItem=e=>this.tree.removeNode(e);getMenuItemObservable=(e,t)=>this.tree.getNodeObservable(e,t);getChildrenIdsObservable=(e,t)=>this.tree.getChildrenIdsObservable(e,t)},W1=class{add(e,t,n){if(typeof arguments[0]!=`string`)for(let e in arguments[0])this.add(e,arguments[0][e],arguments[1]);else (Array.isArray(e)?e:[e]).forEach(function(e){this[e]=this[e]||[],t&&this[e][n?`unshift`:`push`](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(e){e.call(t&&t.context?t.context:t,t)})}},G1=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(e=>{if(typeof e!=`object`||!e.name||!e.init)throw Error(`Invalid JSEP plugin format`);this.registered[e.name]||(e.init(this.jsep),this.registered[e.name]=e)})}},K1=class e{static get version(){return`1.4.0`}static toString(){return`JavaScript Expression Parser (JSEP) v`+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,n,r){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=n,r?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,n){return e.literals[t]=n,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(e=>e.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(e){let t=Error(e+` at character `+this.index);throw t.index=this.index,t.description=e,t}runHook(t,n){if(e.hooks[t]){let r={context:this,node:n};return e.hooks.run(t,r),r.node}return n}searchHook(t){if(e.hooks[t]){let n={context:this};return e.hooks[t].find(function(e){return e.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook(`gobble-spaces`)}parse(){this.runHook(`before-all`);let t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook(`after-all`,n)}gobbleExpressions(t){let n=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===e.SEMCOL_CODE||r===e.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(r===t)break;this.throwError(`Unexpected "`+this.char+`"`)}return n}gobbleExpression(){let e=this.searchHook(`gobble-expression`)||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook(`after-expression`,e)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),n=t.length;for(;n>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,r,i,a,o,s,c,l;if(o=this.gobbleToken(),!o||(n=this.gobbleBinaryOp(),!n))return o;for(a={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},s=this.gobbleToken(),s||this.throwError(`Expected expression after `+n),i=[o,a,s];n=this.gobbleBinaryOp();){if(r=e.binaryPrecedence(n),r===0){this.index-=n.length;break}a={value:n,prec:r,right_a:e.right_associative.has(n)},l=n;let c=e=>a.right_a&&e.right_a?r>e.prec:r<=e.prec;for(;i.length>2&&c(i[i.length-2]);)s=i.pop(),n=i.pop().value,o=i.pop(),t={type:e.BINARY_EXP,operator:n,left:o,right:s},i.push(t);t=this.gobbleToken(),t||this.throwError(`Expected expression after `+l),i.push(a,t)}for(c=i.length-1,t=i[c];c>1;)t={type:e.BINARY_EXP,operator:i[c-1].value,left:i[c-2],right:t},c-=2;return t}gobbleToken(){let t,n,r,i;if(this.gobbleSpaces(),i=this.searchHook(`gobble-token`),i)return this.runHook(`after-token`,i);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)i=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),r=n.length;r>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=r;let t=this.gobbleToken();return t||this.throwError(`missing unaryOp argument`),this.runHook(`after-token`,{type:e.UNARY_EXP,operator:n,argument:t,prefix:!0})}n=n.substr(0,--r)}e.isIdentifierStart(t)?(i=this.gobbleIdentifier(),e.literals.hasOwnProperty(i.name)?i={type:e.LITERAL,value:e.literals[i.name],raw:i.name}:i.name===e.this_str&&(i={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook(`after-token`,i)):this.runHook(`after-token`,!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){let r;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError(`Unexpected "`+this.char+`"`),this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError(`Unclosed [`),this.index++):n===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(n===e.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t=``,n,r;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n===`e`||n===`E`){for(t+=this.expr.charAt(this.index++),n=this.char,(n===`+`||n===`-`)&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError(`Expected exponent (`+t+this.char+`)`)}return r=this.code,e.isIdentifierStart(r)?this.throwError(`Variable names cannot start with a number (`+t+this.char+`)`):(r===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError(`Unexpected period`),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t=``,n=this.index,r=this.expr.charAt(this.index++),i=!1;for(;this.index<this.expr.length;){let e=this.expr.charAt(this.index++);if(e===r){i=!0;break}else if(e===`\\`)switch(e=this.expr.charAt(this.index++),e){case`n`:t+=`
`;break;case`r`:t+=`\r`;break;case`t`:t+=`	`;break;case`b`:t+=`\b`;break;case`f`:t+=`\f`;break;case`v`:t+=`\v`;break;default:t+=e}else t+=e}return i||this.throwError(`Unclosed quote after "`+t+`"`),{type:e.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError(`Unexpected `+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){let n=[],r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let a=this.code;if(a===t){r=!0,this.index++,t===e.CPAREN_CODE&&i&&i>=n.length&&this.throwError(`Unexpected token `+String.fromCharCode(t));break}else if(a===e.COMMA_CODE){if(this.index++,i++,i!==n.length){if(t===e.CPAREN_CODE)this.throwError(`Unexpected token ,`);else if(t===e.CBRACK_CODE)for(let e=n.length;e<i;e++)n.push(null)}}else if(n.length!==i&&i!==0)this.throwError(`Expected comma`);else{let t=this.gobbleExpression();(!t||t.type===e.COMPOUND)&&this.throwError(`Expected comma`),n.push(t)}}return r||this.throwError(`Expected `+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError(`Unclosed (`)}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},q1=new W1;Object.assign(K1,{hooks:q1,plugins:new G1(K1),COMPOUND:`Compound`,SEQUENCE_EXP:`SequenceExpression`,IDENTIFIER:`Identifier`,MEMBER_EXP:`MemberExpression`,LITERAL:`Literal`,THIS_EXP:`ThisExpression`,CALL_EXP:`CallExpression`,UNARY_EXP:`UnaryExpression`,BINARY_EXP:`BinaryExpression`,ARRAY_EXP:`ArrayExpression`,TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set([`**`]),additional_identifier_chars:new Set([`$`,`_`]),literals:{true:!0,false:!1,null:null},this_str:`this`}),K1.max_unop_len=K1.getMaxKeyLen(K1.unary_ops),K1.max_binop_len=K1.getMaxKeyLen(K1.binary_ops);var J1=e=>new K1(e).parse(),Y1=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(K1).filter(e=>!Y1.includes(e)&&J1[e]===void 0).forEach(e=>{J1[e]=K1[e]}),J1.Jsep=K1;var X1=`ConditionalExpression`;J1.plugins.register({name:`ternary`,init(e){e.hooks.add(`after-expression`,function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let n=t.node,r=this.gobbleExpression();if(r||this.throwError(`Expected expression`),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let i=this.gobbleExpression();if(i||this.throwError(`Expected expression`),t.node={type:X1,test:n,consequent:r,alternate:i},n.operator&&e.binary_ops[n.operator]<=.9){let r=n;for(;r.right.operator&&e.binary_ops[r.right.operator]<=.9;)r=r.right;t.node.test=r.right,r.right=t.node,t.node=n}}else this.throwError(`Expected :`)}})}});function Z1(e){let t=J1(e),n=Q1(t);return{eval:$1(t),dependencies:n}}function Q1(e){let t=new Set;function n(e){switch(e.type){case`Identifier`:t.add(e.name);break;case`BinaryExpression`:n(e.left),n(e.right);break;case`UnaryExpression`:n(e.argument);break}}return n(e),Array.from(t)}function $1(e){return function(t){return e0(e,t)}}function e0(e,t){switch(e.type){case`Literal`:return e.value;case`CallExpression`:return t0(e,t);case`Identifier`:return t[e.name];case`BinaryExpression`:return n0(e.operator,e0(e.left,t),e0(e.right,t));case`UnaryExpression`:return n0(e.operator,e0(e.argument,t));default:throw Error(`Unsupported node type: ${e.type}`)}}function t0(e,t){let n=e.callee;if(n.type===`MemberExpression`){let r=n,i=e0(r.object,t),a=r.property.name,o=e.arguments.map(e=>e0(e,t));if(typeof i==`string`&&typeof o[0]==`string`){if(a===`endsWith`)return i.endsWith(o[0]);if(a===`startsWith`)return i.startsWith(o[0])}}return!1}function n0(e,t,n){switch(e){case`==`:return t==n;case`!=`:return t!=n;case`===`:return t===n;case`!==`:return t!==n;case`<`:return t<n;case`<=`:return t<=n;case`>`:return t>n;case`>=`:return t>=n;case`&&`:return t&&n;case`||`:return t||n;case`!`:return!t;default:throw Error(`Unsupported operator: ${e}`)}}var r0=class extends U1{};const i0=(e,t)=>{let{validationRules:n}=e.data,r={isValid:!0,message:``};if(!n)return r;for(let e of n){let{check:n,failMessage:i}=e;if(!Z1(n).eval(t))return r.isValid=!1,r.message=i,r}return r},a0=({node:e,level:t})=>{let{viewSystem:n}=M1();return _0({nodeMenuItems:n.getNodeMenuItems({node:e,level:t}),viewSystem:n,node:e,level:t})},o0=({menuItem:e})=>{let{viewSystem:{renderer:t},eventBus:n}=M1(),{data:{event:r}}=e,i=P1(),{node:a,level:o}=i,{isValid:s,message:c}=i0(e,{...a,level:o});return console.log(`[MenuItemView]`,e.data,`node:`,a,`level:`,o,`result:`,{isValid:s,message:c}),(0,H.jsx)(Qk,{disabled:!s,onClick:e=>{s&&r&&n.emit(r,{...i,event:e})},children:(0,H.jsxs)(`div`,{className:`flex flex-col gap-1 min-w-0`,children:[(0,H.jsxs)(`div`,{className:`flex items-center gap-2 min-w-0`,children:[e.data.icon&&t.render({type:e.data.icon}),(0,H.jsx)(`span`,{className:`truncate`,children:e.data.label})]}),!s&&c&&(0,H.jsx)(`span`,{className:`text-xs text-muted-foreground truncate`,children:c})]})})},s0=({menuTree:e})=>{let{viewSystem:{renderer:t}}=M1();return e.children&&e.children.length>0?(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,className:`focus:outline-none h-6 w-6`,children:e.data.icon?t.render({type:e.data.icon}):e.data.label})}),(0,H.jsx)(Zk,{className:`w-auto min-w-[180px] max-w-[320px]`,children:e.children?.map(e=>(0,H.jsx)(o0,{menuItem:e},e.id))})]}):null},c0=({menuItems:e,node:t,level:n})=>{let r=(0,V.useMemo)(()=>({node:t,level:n}),[t,n]);return(0,H.jsx)(N1.Provider,{value:r,children:(0,H.jsx)(`div`,{className:`flex items-center gap-1 pr-1 hover-visible`,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:e.map(e=>(0,H.jsx)(s0,{menuTree:e},e.id))})})},l0=({inputRef:e,value:t,name:n,parentNode:r,eventBus:i,node:a})=>(0,H.jsxs)(`div`,{className:`relative w-full`,children:[(0,H.jsx)(`input`,{ref:e,type:`text`,autoFocus:!0,value:t,onChange:i.connector(y1.EditChange,e=>({node:a,event:e,parentNode:r})),onBlur:i.connector(y1.EditBlur,e=>({node:a,event:e,parentNode:r})),onKeyDown:e=>{e.code.toLowerCase()===`enter`&&i.emit(y1.EditKeyEnter,{node:a,event:e,parentNode:r})},defaultValue:n,className:`w-full text-base pl-0 bg-transparent border-none focus:outline-none`,placeholder:`请输入名称`}),(0,H.jsx)(`div`,{className:`absolute left-0 bottom-0 w-full h-[2px] bg-gray-500`}),(0,H.jsx)(`div`,{className:`absolute left-0 bottom-0 w-full h-[2px] bg-blue-600 transform scale-x-0 transition-transform duration-300 ease-in-out focus-within:scale-x-100`})]}),u0=({viewState:e,viewSystem:t})=>e.expandable?e.expanded?t.render(`icon-expanded`):t.render(`icon-collapsed`):(0,H.jsx)(l,{className:`invisible`,children:t.render(`icon-collapsed`)}),d0=(e,t)=>{let{eventBus:n}=M1();return{handleNodeClick:t=>{n.emit(y1.NodeClick,{node:e,event:t})},handleKeyDown:t=>{t.code.toLowerCase()===`enter`&&n.emit(y1.KeydownEnter,{node:e,event:t})}}};var f0=t(Ot(),1);const p0=({node:e,level:t,parentNode:n,dragPosition:r,isDragOver:i,canDrop:a})=>{let{viewSystem:o,dataStore:s,eventBus:c}=M1(),u=s.useNode(e.id),{renderer:d}=o;if(!u)return null;let{name:p}=u,m=o.viewStateStore.useRecord(e.id)||o.getDefaultViewState({id:e.id}),h=(0,V.useRef)(null),{handleNodeClick:g,handleKeyDown:_}=d0(e,n);return(0,V.useEffect)(()=>{setTimeout(()=>{if(m.editMode&&h.current){h.current.focus();let e=p.lastIndexOf(`.`);e>0&&h.current.setSelectionRange(0,e)}})},[m.editMode,p]),(0,V.useEffect)(()=>m.validationMessage&&m.editMode&&h.current?q.popupService.open({target:h.current,content:m.validationMessage}):()=>{},[m.validationMessage,m.editMode]),(0,H.jsxs)(j,{className:`tree-node-content-top h-8 mt-0.5 mb-0.5 items-center overflow-hidden ${t===0?`ml-2`:``}`,width:`100%`,position:`relative`,children:[r===`before`&&(0,H.jsx)(l,{className:`h-0.5  bg-blue-500  absolute top-0 left-0 right-0`}),(0,H.jsxs)(j,{className:(0,f0.default)(`min-w-0 h-9 mr-2 max-h-full w-full items-center overflow-hidden hover-action tree-node-header`,{"can-drop":i&&a}),onClick:g,tabIndex:-1,onKeyDown:_,position:`relative`,border:i&&a&&r===`inside`?`1px solid blue`:`none`,bg:i&&a&&r===`inside`?`blue`:`transparent`,children:[(0,H.jsxs)(j,{className:`items-center overflow-hidden pr-2 hover-action`,minWidth:`0`,flex:`1`,children:[(0,H.jsx)(u0,{viewState:m,viewSystem:o}),(0,H.jsx)(l,{flexShrink:0,children:m.loading?o.render(`icon-loading`,{size:`1rem`}):o.render(`icon-node-type`,{node:e})}),(0,H.jsx)(l,{width:`0.5rem`,flexShrink:0}),(0,H.jsx)(l,{minWidth:`0`,flex:`1`,children:m.editMode?(0,H.jsx)(l0,{inputRef:h,value:m.editingName,name:p,parentNode:n,eventBus:c,node:e}):(0,H.jsx)(f,{fontSize:`1rem`,title:p,isTruncated:!0,children:p})})]}),(0,H.jsx)(j,{className:`action-box items-center justify-center h-full`,flexShrink:0,children:d.render({type:`tree-node-action-bar`,props:{node:e,level:t}})})]}),r===`after`&&(0,H.jsx)(l,{className:`h-0.5  bg-blue-500 absolute bottom-0 left-0 right-0`})]})},m0=(e,t)=>{let n=/(\d+)|(\D+)/g,r=e.name.match(n),i=t.name.match(n);if(!r||!i)return e.name.localeCompare(t.name);for(;r.length&&i.length;){let e=r.shift(),t=i.shift();if(e===void 0||t===void 0)break;if(!isNaN(parseInt(e))&&!isNaN(parseInt(t))){let n=parseInt(e)-parseInt(t);if(n!==0)return n}else if(e!==t)return e.localeCompare(t)}return r.length-i.length};var h0=t(Ot(),1);const g0=({expanded:e,nodes:t,parentNode:n,level:r})=>{let{hookRegistry:i,viewSystem:a}=M1(),o=e=>i.getHooks(x1.FilterNodes).reduce((e,t)=>t(e),e);return(0,H.jsx)(j,{direction:`column`,ml:`0.5rem`,className:(0,h0.default)({[`level-${r}`]:!0,"tree-node-children-list":!0,"tree-node-children-list-expanded":e,"tree-node-children-list-collapsed":!e,[w`
          height: ${t?.length?`auto`:`0`};
        `]:e,[w`
          flex-grow: 1;
          overflow-y: auto;
          max-height: 100%;
        `]:r===0}),w:`calc(100% - 0.5rem)`,children:t&&o([...t].sort(m0).sort((e,t)=>(e.type===`file`?1:0)-(t.type===`file`?1:0))).map(e=>a.renderNode({node:e,level:r+1,parentNode:n}))})},_0=({nodeMenuItems:e,viewSystem:t,node:n,level:r})=>{let i;return i=e.length===0?null:(0,H.jsx)(c0,{menuItems:e,node:n,level:r}),i},v0=O1({activate({viewSystem:e,hookRegistry:t,dataStore:n,eventBus:r}){let{renderer:i}=e,a=x,o=E,s=()=>(0,H.jsx)(He,{className:w`
        animation: ${_`
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    `} 1s linear infinite;
      `}),c=Ge;e.renderer.register(`icon-expanded`,o),e.renderer.register(`icon-collapsed`,a),e.renderer.register(`icon-ellipsis`,c),e.renderer.register(`icon-expanded-default`,o),e.renderer.register(`icon-collapsed-default`,a),e.renderer.register(`icon-ellipsis-default`,c),e.renderer.register(`icon-node-type`,()=>null),e.renderer.register(`icon-loading`,s),e.setDefaultViewStateProvider((e,t)=>({id:e.id,expanded:!1,editMode:!1,expandable:!0,highlight:!1,...t})),i.register(`tree-node-action-bar`,a0),i.register(`tree-node-header`,p0),i.register(`tree-node-list`,g0),e.renderer.register(`tree-node`,V1)}}),y0=e=>{let{viewSystem:t,dataStore:n,options:{defaultExpanded:r=!1}}=e;return class{toggleNode=({id:e,event:i})=>{i&&(i.stopPropagation(),i.preventDefault());let a=n.getNode(e),o=t.viewStateStore.getRecord(e)||t.getDefaultViewState(a,{expanded:r});t.viewStateStore.getActions().upsert({...o,expanded:!o.expanded})};expandNode=({id:e,event:i})=>{i&&(i.stopPropagation(),i.preventDefault());let a=n.getNode(e),o=t.viewStateStore.getRecord(e)||t.getDefaultViewState(a,{expanded:r});t.viewStateStore.getActions().upsert({...o,expanded:!0})};async moveNode(e,t){throw Error(`not implemented`)}}};var b0=D1().createPlugin({addOptions(){return{addable:({node:e})=>e.type===S1.Dir}},activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r,options:{space:{id:i}}}){e.addNodeMenuItems([{id:`addFile`,key:`addFile`,name:J(`tree.newFile`),label:J(`tree.newFile`),event:y1.AddFileAt.name,when:`type === 'dir'`,icon:`AiFillFileAdd`,group:`add`},{id:`addNode`,key:`addNode`,name:J(`tree.newFolder`),label:J(`tree.newFolder`),event:y1.AddFolderAt.name,when:`type === 'dir'`,icon:`AiFillFolderAdd`,group:`add`},{id:`addMarkdownDocumnet`,key:`addMarkdownDocumnet`,label:J(`tree.newMarkdown`),event:y1.AddMarkdownAt.name,when:`type === 'dir'`,icon:`AiFillFileMarkdown`,group:`add`}]),t.on(y1.AddMarkdownAt,({node:e})=>{t.emit(y1.AddFileAt,{node:e,documentType:C1.Markdown})}),t.on(y1.AddFileAt,({node:e,documentType:a})=>{let o=e.id,s=n.getNode(o),c=oh.getStore().getRecord(i),l=Rt();r.invoke(b1.EditInputNodeName,{parentId:o,defaultName:a===C1.Markdown?`Untitled.md`:``,nodeType:S1.File,callback:async e=>{let r=L1(s.path,e),i={id:l,type:S1.File,path:r,name:e};n.getActions().add({node:{...i,loading:!0},parentId:o});try{console.log(`writeFile`,oh.getUri(c?.id,r)),await ed.writeFile(oh.getUri(c?.id,r),new TextEncoder().encode(`# `),{create:!0,overwrite:!0}),console.log(`writeFile success`),n.getActions().update({node:i}),console.log(`emit NodeClick`),t.emit(y1.NodeClick,{node:i})}catch{n.getActions().delete({id:l}),q.notificationService.error(`Failed to create file`)}}})}),t.on(y1.AddFolderAt,({node:e})=>{let t=e.id,a=n.getNode(t),o=oh.getStore().getRecord(i),s=Rt();r.invoke(b1.EditInputNodeName,{parentId:t,nodeType:S1.Dir,callback:async e=>{let r=L1(a.path,e);await ed.createDirectory(oh.getUri(o?.id,r)),n.getActions().add({node:{id:s,type:S1.Dir,path:r,name:e,children:[]},parentId:t})}})})}}),x0=D1().createPlugin({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r,options:{space:{platform:i,owner:a,repo:o}}}){let s=r.createProxy(b1.TreeService);t.on(y1.TreeOpened,()=>{let e=n.getData();if(!e||!e.children)return;let t=(()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`})()===`zh`?`Excalidraw-示例.excalidraw.json`:`Excalidraw-Example.excalidraw.json`,r=e.children.find(e=>e.name===t&&e.type===S1.File);r&&s.openNode(r.id)})}});const S0=D1().createPlugin,C0=S0({activate({hookRegistry:e}){e.addHook(x1.FilterNodes,e=>e.length>1?e.filter(e=>e.name.toLowerCase()!==`.keep`):e)}});var w0=E1({activate({serviceBus:e}){e.invoke(b1.RefershNode,`root`)}}),T0=E1({activate({dataStore:e}){let t=e=>{let n={...e};return n.id=n.id||`node-${Rt()}`,n.children&&n.children.length&&(n.children=n.children.map(t)),n.id===`root`&&(n.path=`/`,n.type=`dir`,n.name=J(`common.file`)),n};setTimeout(()=>{let n=e.getData();e.getActions().init(t(n))},0)}});const E0={excalidraw:{extensions:[`.excalidraw.json`,`.excalidraw`],icon:bu,color:`#6366f1`},drawio:{extensions:[`.drawio`,`.xml`],icon:yu,color:`#f59e0b`},markdown:{extensions:[`.md`,`.markdown`],icon:Oe,color:`#14668b`},json:{extensions:[`.json`],icon:Pe,color:`#8b6914`},typescript:{extensions:[`.ts`,`.tsx`],icon:he,color:`#3178c6`},javascript:{extensions:[`.js`,`.jsx`,`.mjs`],icon:qe,color:`#997e1a`},html:{extensions:[`.html`,`.htm`],icon:Se,color:`#e34c26`},css:{extensions:[`.css`,`.scss`,`.sass`,`.less`],icon:De,color:`#264de4`},python:{extensions:[`.py`,`.pyw`,`.pyc`],icon:Ke,color:`#3776ab`},rust:{extensions:[`.rs`],icon:we,color:`#dea584`},go:{extensions:[`.go`],icon:We,color:`#00add8`},config:{extensions:[`.yml`,`.yaml`,`.toml`,`.ini`,`.conf`,`.config`],icon:Fe,color:`#6e6e6e`},default:{extensions:[],icon:pe,color:`var(--secondary-color)`}},D0=e=>{let t=e.toLowerCase();for(let[,e]of Object.entries(E0))for(let n of e.extensions)if(t.endsWith(n.toLowerCase()))return e;return E0.default},O0=e=>e.id===`root`?`dir`:e.type,k0=e=>`file`;var A0=t(Ot(),1),j0=E1({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){r.createProxy(b1.TreeService),e.setDefaultViewStateProvider(({id:e},t)=>{let r,i=n.getNode(e);return r=O0(i)===`dir`,{...t,id:i.id,expanded:!1,editMode:!1,expandable:r}}),e.renderer.register(`icon-node-type`,({node:t})=>{let n=e.viewStateStore.useRecord(t.id)||e.getDefaultViewState(t),{editMode:r,editingName:a}=n,o=r?a??t.name:t.name;if(O0(t)===`dir`)return(0,H.jsx)(i,{className:`icon dir`,as:n?.expanded?xe:be});if(k0(t)===`file`){let e=D0(o);return(0,H.jsx)(i,{className:(0,A0.default)(`icon file`,w`
                  & {
                    color: ${e.color} !important;
                  }
                `),as:e.icon,color:e.color,opacity:.7})}return(0,H.jsx)(f,{as:`h3`,children:` `})},!0)}}),M0=D1().createPlugin({activate({viewSystem:{renderer:e}}){e.register(`AiOutlineLink`,hu),e.register(`AiOutlineFolderAdd`,lu),e.register(`AiOutlineFileAdd`,su),e.register(`AiOutlinePlus`,Cu),e.register(`AiFillFolderAdd`,lu),e.register(`AiFillFileAdd`,su),e.register(`AiFillEdit`,Su),e.register(`AiFillDelete`,ku),e.register(`AiOutlineFileMarkdown`,cu),e.register(`AiFillFileMarkdown`,cu),e.register(`AiOutlineCodeEditor`,ou),e.register(`AiOutlineReload`,wu),e.register(`AiOutlineFileText`,cu),e.register(`AiFillFileText`,cu)}}),N0=n(((e,t)=>{function n(e){if(typeof e!=`string`)throw TypeError(`Path must be a string. Received `+JSON.stringify(e))}function r(e,t){for(var n=``,r=0,i=-1,a=0,o,s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else if(o===47)break;else o=47;if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf(`/`);if(c!==n.length-1){c===-1?(n=``,r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}}else if(n.length===2||n.length===1){n=``,r=0,i=s,a=0;continue}}t&&(n.length>0?n+=`/..`:n=`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return n}function i(e,t){var n=t.dir||t.root,r=t.base||(t.name||``)+(t.ext||``);return n?n===t.root?n+r:n+e+r:r}var a={resolve:function(){for(var e=``,t=!1,i,a=arguments.length-1;a>=-1&&!t;a--){var o;a>=0?o=arguments[a]:(i===void 0&&(i=process.cwd()),o=i),n(o),o.length!==0&&(e=o+`/`+e,t=o.charCodeAt(0)===47)}return e=r(e,!t),t?e.length>0?`/`+e:`/`:e.length>0?e:`.`},normalize:function(e){if(n(e),e.length===0)return`.`;var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=r(e,!t),e.length===0&&!t&&(e=`.`),e.length>0&&i&&(e+=`/`),t?`/`+e:e},isAbsolute:function(e){return n(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return`.`;for(var e,t=0;t<arguments.length;++t){var r=arguments[t];n(r),r.length>0&&(e===void 0?e=r:e+=`/`+r)}return e===void 0?`.`:a.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t||(e=a.resolve(e),t=a.resolve(t),e===t))return``;for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,o=i-r,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var c=t.length-s,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(t.charCodeAt(s+d)===47)return t.slice(s+d+1);if(d===0)return t.slice(s+d)}else o>l&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var f=e.charCodeAt(r+d);if(f!==t.charCodeAt(s+d))break;f===47&&(u=d)}var p=``;for(d=r+u+1;d<=i;++d)(d===i||e.charCodeAt(d)===47)&&(p.length===0?p+=`..`:p+=`/..`);return p.length>0?p+t.slice(s+u):(s+=u,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),e.length===0)return`.`;for(var t=e.charCodeAt(0),r=t===47,i=-1,a=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!a){i=o;break}}else a=!1;return i===-1?r?`/`:`.`:r&&i===1?`//`:e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!=`string`)throw TypeError(`"ext" argument must be a string`);n(e);var r=0,i=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return``;var s=t.length-1,c=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!a){r=o+1;break}}else c===-1&&(a=!1,c=o+1),s>=0&&(l===t.charCodeAt(s)?--s===-1&&(i=o):(s=-1,i=c))}return r===i?i=c:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!a){r=o+1;break}}else i===-1&&(a=!1,i=o+1);return i===-1?``:e.slice(r,i)}},extname:function(e){n(e);for(var t=-1,r=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(c===47){if(!a){r=s+1;break}continue}i===-1&&(a=!1,i=s+1),c===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===r+1?``:e.slice(t,i)},format:function(e){if(typeof e!=`object`||!e)throw TypeError(`The "pathObject" argument must be of type Object. Received type `+typeof e);return i(`/`,e)},parse:function(e){n(e);var t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;var r=e.charCodeAt(0),i=r===47,a;i?(t.root=`/`,a=1):a=0;for(var o=-1,s=0,c=-1,l=!0,u=e.length-1,d=0;u>=a;--u){if(r=e.charCodeAt(u),r===47){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),r===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||c===-1||d===0||d===1&&o===c-1&&o===s+1?c!==-1&&(s===0&&i?t.base=t.name=e.slice(1,c):t.base=t.name=e.slice(s,c)):(s===0&&i?(t.name=e.slice(1,o),t.base=e.slice(1,c)):(t.name=e.slice(s,o),t.base=e.slice(s,c)),t.ext=e.slice(o,c)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir=`/`),t},sep:`/`,delimiter:`:`,win32:null,posix:null};a.posix=a,t.exports=a})),P0=N0();const F0=e=>{let{dataStore:t,viewSystem:n,options:{space:r},eventBus:i}=e,{viewStateStore:a,getViewStateOrDefaultViewState:o}=n,s=y0(e);class c extends s{getSpace=()=>r;updateViewState=(e,t)=>{a.getActions().upsert({...o(e),...t})};getViewState=e=>o(e);deleteNode=async e=>{let{id:n,path:i}=e;this.updateViewState(n,{loading:!0});try{await q.fs.delete(oh.getUri(r.id,i)),t.getActions().delete({id:n})}catch{}finally{a.getRecord(n)&&this.updateViewState(n,{loading:!1})}let o=this.findParentNode(i);if(o&&o.children?.length===0){let e=this.findParentNode(o.path);e&&this.deepRefresh(e.id)}};getNodeIdFromPath=e=>e===`/`||e===``?`root`:e;findParentNode=e=>{let n=this.findPathNodes(e,t.getData());return n?.[n.length-1]};findPathNodes=(e,n)=>{let r=[];n||=t.getData();let i=e.split(`/`).filter(e=>e),a=n;r.push(a);let o=``,s=(e,t)=>[e,t].filter(e=>e).join(`/`),c=(e,t)=>([e,t]=[e,t].map(e=>e.endsWith(`/`)?e.slice(0,-1):e),[e,t]=[e,t].map(e=>e.startsWith(`/`)?e.slice(1):e),e===t);for(let t of i){let n=s(o,t);if(c(n,e))break;if(!a.children)return;for(let e of a.children)if(c(e.path,n)){r.push(e),a=e,o=n;break}}return r};shallowRefresh=async e=>{let n=t.getNode(e),i=t.getNode(n.id);this.updateViewState(e,{loading:!0});let a=oh.getUri(r.id,n.id===`root`?`/`:n.path),o=await q.fs.readDirectory(a);this.updateViewState(e,{loading:!1});let s=n.id===`root`?`/`:n.path;s=s.endsWith(`/`)?s:s+`/`;let c=o.map(([e,t])=>({id:`${s}${e}`,name:e,path:`${s}${e}`,type:t===PK.Directory?`dir`:(PK.File,`file`)}));t.getActions().update({node:{...n,children:c.map(e=>({...i.children?.find(t=>t.path==e.path),...e})).map(e=>({...e,id:e.path}))}})};readTreeReferToViewState=async(e,n)=>{let r=a.getData().find(e=>e.id===n.id);if(!r||!r.expanded)return n;let i=t.getNode(n.id),o=oh.getUri(e,n.id===`root`?`/`:n.path),s=n.id===`root`?`/`:n.path;s=s.endsWith(`/`)?s:s+`/`,a.getActions().update({...r,loading:!0});let c=await q.fs.readDirectory(o);this.updateViewState(n.id,{loading:!1});let l=c.map(([e,t])=>({id:`${s}${e}`,name:e,path:`${s}${e}`,type:t===PK.Directory?`dir`:(PK.File,`file`)}));return{...n,children:await Promise.all(l.map(e=>({...i?.children?.find(t=>t.path==e.path),...e})).map(e=>({...e,id:e.path})).map(t=>t.type===`dir`?this.readTreeReferToViewState(e,t):t))}};deepRefresh=async e=>{let n=t.getNode(e),a=await this.readTreeReferToViewState(r.id,n);t.getActions().update({node:a}),i.emit(y1.NodeContentLoaded,{node:a})};focusNode=e=>{let r=t.getNode(e);if(O0(r)===S1.File){n.viewStateStore.getActions().reduce(e=>{e=e.map(e=>({...e,highlight:!1}));let t=e.find(e=>e.id===r.id);return t?t.highlight=!0:e.push({...n.getDefaultViewState(r),highlight:!0}),e});let e=this.findPathNodes(r.id,t.getData());e&&n.viewStateStore.getActions().reduce(t=>{for(let r of e){let e=t.find(e=>e.id===r.id);e?e.expanded=!0:t.push({...n.getDefaultViewState(r),expanded:!0})}return t})}};openNode=e=>{let n=t.getNode(e);Rv.open(r.id,n)};getReadMeFileNode=()=>{let e=t.getData();if(!(!e||!e.children))return e.children.find(e=>e.type===S1.File&&e.name.toLowerCase()===`readme.md`)};validateForEditingName=({name:e,parentNode:t,node:n})=>{let r={hasError:!1,message:``};if(t){let i=t.children?.find(t=>t.name===e);i&&i.id!==n.id?(r.hasError=!0,r.message=J(`file.nameExists`)):r.hasError=!1}return r};moveNode=async(e,n)=>{if(n.type!==`dir`)throw Error(`Target node must be a directory`);let r=e.path,a=(0,P0.join)(n.path,e.name);if(r!==a){if(n.children?.find(t=>t.name===e.name))throw Error(`A node with the same name already exists in the target directory`);try{await ed.rename(oh.getUri(this.getSpace().id,r),oh.getUri(this.getSpace().id,a),{overwrite:!1}),t.getActions().delete({id:e.id}),t.getActions().add({node:{...e,id:a,path:a},parentId:n.id}),await this.deepRefresh((0,P0.dirname)(r)),await this.deepRefresh(n.id),i.emit(y1.NodeMoved,{node:{...e,id:a,path:a},oldPath:r,newPath:a,targetNode:n})}catch(e){throw console.error(`Error moving node:`,e),e}}};handleDrop=async(e,t,n)=>{if(e.id!==t.id)try{await this.moveNodeRelative(e,t,n)}catch(e){throw console.error(`Error during drag and drop:`,e),e}finally{this.updateViewState(t.id,{isDragOver:!1})}};moveNodeRelative=async(e,t,n)=>{let r=this.findParentNode(e.path),i=n===`inside`?t:this.findParentNode(t.path);if(!r||!i)throw Error(`Source or target parent node not found`);if(n===`inside`&&t.type!==`dir`){console.warn(`Reference node must be a directory`);return}let a=r.id===i.id,o=!a||n===`inside`;try{o&&(this.setLoadingState(e.id,!0),n===`inside`&&this.setLoadingState(t.id,!0)),a&&n!==`inside`?await this.reorderInSameDirectory(r,e,t,n):await this.moveToNewLocation(e,i,n===`inside`?t:void 0),this.emitNodeMovedEvent(e,a?e.path:this.getNewPath(e,i,n,t),a,n,i)}finally{o&&(this.setLoadingState(e.id,!1),n===`inside`&&this.setLoadingState(t.id,!1)),await this.refreshAffectedNodes(r,i,o)}};setLoadingState(e,t){this.updateViewState(e,{loading:t})}async reorderInSameDirectory(e,n,r,i){let a=[...e.children||[]],o=a.findIndex(e=>e.id===n.id),s=a.findIndex(e=>e.id===r.id);if(o!==-1&&s!==-1){let[n]=a.splice(o,1),r=i===`before`?s:s+1;a.splice(r,0,n),t.getActions().update({node:{...e,children:a}})}}async moveToNewLocation(e,n,r){let i=this.getNewPath(e,n,r?`inside`:`after`,r);await ed.rename(oh.getUri(this.getSpace().id,e.path),oh.getUri(this.getSpace().id,i),{overwrite:!1}),t.getActions().delete({id:e.id});let a={...e,path:i,id:i};t.getActions().add({node:a,parentId:n.id}),this.updateViewState(n.id,{expanded:!0})}async refreshAffectedNodes(e,t,n){n&&(await this.deepRefresh(e.id),e.id!==t.id&&await this.deepRefresh(t.id))}getNewPath(e,t,n,r){return L1(n===`inside`&&r?r.path:t.path,e.name)}emitNodeMovedEvent(e,t,n,r,a){i.emit(y1.NodeMoved,{node:n&&r!==`inside`?e:{...e,path:t,id:t},oldPath:e.path,newPath:t,targetNode:a})}updateNode=(e,n)=>{t.getActions().update({node:{id:e,...n}})}}return new c},I0=S0({activate(e){let{serviceBus:t}=e,n=F0(e);t.registerFromMap(b1.TreeService,n),window.treeService=n,window.tree=e}});var L0=D1().createPlugin({activate({serviceBus:e,dataStore:t,viewSystem:{viewStateStore:n,renderer:r,addNodeMenuItems:i},options:{space:a},eventBus:o}){let s=e.createProxy(b1.TreeService);n.reduxStore.subscribe(()=>{n.getData()}),e.expose(b1.RefershNode,s.deepRefresh),i([{id:`refreshNode`,key:`refreshNode`,event:y1.RefreshNode.name,name:J(`tree.refresh`),label:J(`tree.refresh`),when:`level === 0 || type === 'dir'`,icon:`AiOutlineReload`,group:`more`}]),o.on(y1.RefreshNode,({node:e})=>{s.deepRefresh(e.id)})}}),R0=D1().createPlugin({addOptions(){return{interval:null}},activate({options:{space:e}}){let t=async()=>{await mv.refreshAuth(e.id)};this.options.interval=setInterval(t,1e3*60*10),setTimeout(()=>{t()},3e3)},deactivate(){clearInterval(this.options.interval)}});const z0=e=>{let{eventBus:t,renderer:n}=e;n.register(`AiOutlineMore`,au),n.register(`AiOutlinePlus`,Cu);let r=new r0({id:`root`,data:{id:`root`,key:`root`,order:0,label:`root`,group:``},children:[]});window.menuService=r;let i=e=>{r.addMenuItems(e.map(e=>({id:e.id,data:{...e,parentId:e.group}})))};i([{id:`more`,key:`more`,label:`更多`,group:`root`,icon:`AiOutlineMore`,order:1},{id:`add`,key:`add`,label:`添加`,group:`root`,icon:`AiOutlinePlus`,order:0}]);let a=(e,{node:t,level:n})=>{if(!(e.data.when&&!Z1(e.data.when).eval({...t,level:n})))return{...e,children:e.children?.map(e=>a(e,{node:t,level:n})).filter(e=>e!==void 0)}};return{menuService:r,addNodeMenuItems:i,getNodeMenuItems:({node:e,level:t})=>a(r.getRootMenuTree(),{node:e,level:t})?.children||[],renderNodeMenuItem:(e,{node:r,level:i},a=!1)=>{console.log(`[renderNodeMenuItem]`,e.data);let{icon:o,name:s,title:c}=e.data,{isValid:l,message:u}=i0(e,{...r,level:i}),d=!l;return console.log(e.data.validationRules,`result:`,`isValid:`,l,`message:`,u),a?(0,H.jsx)(j,{title:e.data.label||e.data.name,onClick:n=>{!d&&e.data.event&&(t.emit(e.data.event,{node:r,event:n}),n.stopPropagation(),n.preventDefault())},style:{cursor:d?`not-allowed`:`pointer`,opacity:d?.5:1},children:o?n.render({type:o}):c||s},e.id):(0,H.jsxs)(j,{w:`100%`,align:`center`,justify:`space-between`,title:u,onClick:!d&&e.data.event?t.connector(e.data.event,e=>({node:r,event:e})):void 0,style:{cursor:d?`not-allowed`:`pointer`,opacity:d?.5:1},children:[e.data.label||e.data.name,o&&n.render({type:o})]},e.id)}}},B0=Nl,V0=go(()=>{let e=new Map;return{addHook:(t,n)=>{let r=xr(t),i=e.get(r)||[];i.push(n),e.set(r,i)},getHooks:t=>e.get(xr(t))||[]}}),H0=()=>{let e=new Map,t=new Map,n=n=>{let r=new mt(1);e.set(n,r),r.subscribe(e=>t.set(n,e))},r=(t,i)=>{if(typeof t==`string`){e.has(t)||n(t);let r=e.get(t).subscribe(e=>{i?.(e)});return()=>{r.unsubscribe()}}else if(typeof t==`object`){let e=[];return Object.entries(t).forEach(([t,n])=>{let i=r(t,n);e.push(i)}),()=>{e.forEach(e=>e())}}else throw Error(`Invalid event type: ${t}`)},i=(t,r)=>{e.has(t)||n(t),e.get(t).next(r)},a=e=>t.get(e);return{on:r,emit:i,createScopedProxy:e=>({on:(t,n)=>{if(typeof t==`string`)return r(`${e}/${t}`,n);{let n={};return Object.entries(t).forEach(([t,r])=>{n[`${e}/${t}`]=r}),r(n)}},emit:(t,n)=>i(`${e}/${t}`,n),get:t=>a(`${e}/${t}`)}),get:a}};var U0=t(Ot(),1),W0=({renderer:e,viewStateStore:t,eventBus:n},r)=>{let{addNodeMenuItems:i,getNodeMenuItems:a,renderNodeMenuItem:o}=z0({eventBus:n,renderer:e}),s=({node:t,level:n=0,parentNode:i})=>e.render({type:`tree-node`,props:{node:t,level:n,context:r(),parentNode:i}},t.id),c=(t,n={})=>e.render({type:t,props:n}),l,u=e=>l=e,d=(e,t)=>l?l(e,t):{...t};return{renderer:e,renderNode:s,render:c,addNodeMenuItems:i,renderNodeMenuItem:o,getDefaultViewState:d,getViewStateOrDefaultViewState:e=>t.getRecord(e)||d({id:e}),setDefaultViewStateProvider:u,viewStateStore:t,getNodeMenuItems:a}};const G0=({plugins:e=[],dataStore:t,eventBus:n,viewSystem:r,viewStateStore:i,pipe:a,serviceBus:o,options:s={},hookRegistry:c,registry:u,onPluginsLoaded:d})=>{let f=(0,V.useMemo)(()=>nn(),[]),p=(0,V.useMemo)(()=>n||B0(),[n]),m=(0,V.useMemo)(()=>o||Om(),[o]),h=(0,V.useMemo)(()=>a||H0(),[a]),g=(0,V.useCallback)(()=>({viewSystem:_,eventBus:p,dataStore:t,options:s,pipe:h,hookRegistry:v,registry:y,serviceBus:m}),[p,t,s,h,m]),_=(0,V.useMemo)(()=>r||W0({viewStateStore:i||Lg({initialState:[]}),eventBus:p,renderer:f},g),[p,r,t,f]),v=(0,V.useMemo)(()=>c||V0.create(),[c]),y=(0,V.useMemo)(()=>u||Mg({}),[u]);(0,V.useEffect)(()=>{let t=g();for(let t of e)t.activate?.(g());return d?.(t),()=>{for(let t of e)t.deactivate?.(g())}},[]);let{t:b}=Og(),x=t.useData(),S=i?.useRecord(x.id)||{},{expanded:C}=S,T=(0,V.useMemo)(()=>g(),[g]);return(0,H.jsx)(j1.Provider,{value:T,children:(0,H.jsxs)(l,{className:(0,U0.default)(`tree overflow-y-hidden flex-container-limited flex-col`,w``),children:[(0,H.jsxs)(`div`,{className:(0,U0.default)(`w-full py-1 px-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 flex justify-between items-center`),children:[(0,H.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,H.jsx)(`span`,{className:`text-sm font-medium`,children:b(`tree.directory`)})}),(0,H.jsx)(`div`,{className:`h-full flex items-center hover-show`,children:f.render({type:`tree-node-action-bar`,props:{node:x,level:0}})})]}),(0,H.jsx)(`div`,{className:(0,U0.default)(`max-h-full h-full transition-all flex-grow flex-col overflow-y-auto scroll scroll-7`,{"h-0 max-h-0":!C}),children:f.render({type:`tree-node-list`,props:{nodes:x.children,level:0,parentNode:x,expanded:S.expanded}})})]})})},K0=({name:e=`treeData`,initialState:t,primaryKey:n=`id`,persistConfig:r})=>{let i=[],a=(e,r)=>({data:t,init:n=>{e({data:n||t})},update:t=>{if(!t)return;let r=e=>{if(e[n]===t[n])return Object.assign(e,t),!0;if(e.children){for(let t of e.children)if(r(t))return!0}return!1};e(e=>{let t=structuredClone(e.data);return r(t),{data:t}})},add:({node:t,parentId:r})=>{if(!t)return;if(!r){e({data:t});return}let i=e=>{if(e[n]===r)return e.children||=[],e.children.push(t),!0;if(e.children){for(let t of e.children)if(i(t))return!0}return!1};e(e=>{let t=structuredClone(e.data);return i(t),{data:t}})},delete:t=>{let r=(e,t)=>{if(!e.children)return!1;let i=e.children.findIndex(e=>e[n]===t);if(i!==-1)return e.children.splice(i,1),!0;for(let n of e.children)if(r(n,t))return!0;return!1};e(e=>{let n=structuredClone(e.data);return r(n,t),{data:n}})}}),o;if(r&&r.type===`LocalStorage`){let e=Ig((e,t)=>a(e,t),{name:r.name,storage:Pg(()=>window.localStorage)});o=Yt()(e)}else o=Yt()(a);function s(e,t){let[n,r]=(0,V.useState)(t(e.getState()));return(0,V.useEffect)(()=>{let i=e.subscribe(()=>{let i=t(e.getState());i!==n&&r(i)});return()=>i()},[e,t,n]),n}let c=()=>s(o,e=>e.data),l=(e,t)=>{if(e[n]===t)return e;if(e.children)for(let n of e.children){let e=l(n,t);if(e)return e}},u=e=>l(o.getState().data,e),d=e=>s(o,t=>l(t.data,e)),f=e=>s(o,t=>e(t.data)),p=[],m=e=>{for(let t of p)t(e)},h=e=>(p.push(e),()=>g(e)),g=e=>{p=p.filter(t=>t!==e)};return{reduxStore:{getState:()=>({[e]:{data:o.getState().data}}),subscribe:e=>o.subscribe(e)},useSelector:f,useData:c,useNode:d,onChange:e=>(i.push(e),()=>i.splice(i.indexOf(e),1)),getActions:()=>({init:t=>{let n=o.getState().data;o.getState().init(t);let r=o.getState().data,a=q0(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/init`,payload:{node:t}})},update:t=>{let n=o.getState().data;o.getState().update(t.node);let r=o.getState().data,a=q0(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/update`,payload:t})},add:t=>{let n=o.getState().data;o.getState().add(t);let r=o.getState().data,a=q0(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/add`,payload:t})},delete:t=>{let n=o.getState().data;o.getState().delete(t.id);let r=o.getState().data,a=q0(n,r);a&&a.length&&i.forEach(e=>e(a)),m({type:`${e}/delete`,payload:t})}}),getNode:u,getData:()=>o.getState().data,id:Rt(),addObserver:h,removeObserver:g}};function q0(e,t){let n=[],r=(e,t,i)=>{if(!e&&!t)return;if(!e){n.push({id:t.id,type:`add`,path:i});return}if(!t){n.push({id:e.id,type:`delete`,path:i});return}let a=new Set([...Object.keys(e),...Object.keys(t)]);for(let r of a)r!==`children`&&e[r]!==t[r]&&n.push({id:e.id,type:`update`,path:[...i,r],value:t[r]});let o=new Set([...(e.children||[]).map(e=>e.id),...(t.children||[]).map(e=>e.id)]);for(let n of o){let a=e.children?.find(e=>e.id===n),o=t.children?.find(e=>e.id===n);r(a,o,[...i,`children`,String(n)])}};return r(e,t,[]),n}var J0=E1({activate(e){let{eventBus:t,serviceBus:n}=e,r=n.createProxy(b1.TreeService);t.on(y1.NodeClick,async({node:e})=>{if(r.focusNode(e.id),e.id===`root`||e.type===S1.Dir)return await n.invoke(b1.RefershNode,e.id);r.openNode(e.id)})}}),Y0=E1({addOptions(){return{rootId:`root`}},activate({viewSystem:e}){e.viewStateStore.getActions().upsert(e.getDefaultViewState({id:this.options.rootId},{expanded:!0}))}}),X0=E1({addOptions(){return{deletable:({level:e})=>e>=1,deleteNode:()=>{}}},activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(b1.TreeService);e.addNodeMenuItems([{id:`deleteNode`,key:`deleteNode`,name:J(`tree.delete`),label:J(`tree.delete`),group:`more`,event:y1.DeleteNode.name,when:`level >= 1`,validationRules:[{check:`type !== 'dir'`,failMessage:J(`tree.deleteFolderHint`)}],icon:`AiFillDelete`}]),t.on(y1.DeleteNode,async({node:e,event:t})=>{await q.modalService.confirm({title:J(`tree.confirmDeleteFile`)})&&await r.deleteNode(e)})}}),Z0=D1().createPlugin({addOptions(){return{editable:({level:e,node:t})=>!1,renameNode:(()=>{})}},activate({viewSystem:e,serviceBus:t,eventBus:n,dataStore:r,pipe:i}){e.addNodeMenuItems([{id:`editNode`,key:`editNode`,group:`more`,event:y1.EditNode.name,name:J(`tree.rename`),label:J(`tree.rename`),icon:`AiFillEdit`,when:`level >= 0`,validationRules:[{check:`type !== 'dir'`,failMessage:J(`tree.renameFolderNotSupported`)}]}]);let a=t.createProxy(b1.TreeService);t.expose(b1.EditInputNodeName,({parentId:e,callback:t,nodeType:o,defaultName:s})=>{setTimeout(()=>{let c=Rt(),l={id:c,type:o,name:s||``};r.getActions().add({node:l,parentId:e}),a.updateViewState(e,{expanded:!0}),a.updateViewState(c,{editMode:!0}),i.emit(`edit.forInput`,!0);let u;u=n.on(y1.EditWillFinish,({name:e,node:n,parentNode:i})=>{r.getActions().delete({id:c}),e.trim()&&!a.validateForEditingName({name:e.trim(),node:n,parentNode:i}).hasError&&t(e.trim()),u()})},300)}),n.on(y1.EditNode,({node:e,event:t})=>{a.updateViewState(e.id,{editMode:!0})}),n.on(y1.EditBlur,({node:e,event:t,parentNode:r})=>{n.emit(y1.EditKeyEnter,{node:e,event:t,parentNode:r})}),n.on(y1.EditKeyEnter,async({node:e,event:t,parentNode:o})=>{a.updateViewState(e.id,{editMode:!1});let s=t.currentTarget.value.trim();if(i.get(`edit.forInput`))i.emit(`edit.forInput`,!1),n.emit(y1.EditWillFinish,{name:t.currentTarget.value,node:e,parentNode:o});else if(s!==e.name&&s){let{hasError:t,message:n}=a.validateForEditingName({name:s,node:e,parentNode:o});if(t)q.notificationService.error(n);else{a.updateViewState(e.id,{loading:!0});try{await this.options.renameNode(e,s),r.getActions().update({node:{...e,name:s}})}catch{q.notificationService.error(`Failed to rename node`)}finally{a.updateViewState(e.id,{loading:!1})}}}}),n.on(y1.EditChange,({node:e,event:t,parentNode:n})=>{a.updateViewState(e.id,{editingName:t.currentTarget.value});let{message:r}=a.validateForEditingName({name:t.currentTarget.value,parentNode:n,node:e});a.updateViewState(e.id,{validationMessage:r})})}});const Q0=S0({activate:({serviceBus:e,dataStore:t})=>{let n=e.createProxy(b1.TreeService);q.eventBus.on(Ml.ReadMeFileInitialized,async({spaceId:e})=>{if(e===n.getSpace().id){await n.shallowRefresh(`root`);let e=t.getData();if(!e||!e.children)return;let r=(()=>{try{let e=localStorage.getItem(`i18nextLng`);if(e&&(e===`zh`||e===`en`))return e}catch{}return(navigator.language||``).startsWith(`zh`)?`zh`:`en`})()===`zh`?`Excalidraw-示例.excalidraw.json`:`Excalidraw-Example.excalidraw.json`,i=e.children.find(e=>e.type===S1.File&&e.name===r);i&&setTimeout(()=>{n.openNode(i.id),n.focusNode(i.id)},1e3)}})}});var $0=E1({activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){let i=r.createProxy(b1.TreeService);t.on(y1.DragStart,({node:e,event:t})=>{t.dataTransfer.setData(`text/plain`,e.id),t.dataTransfer.effectAllowed=`move`}),t.on(y1.DragEnd,({node:e,event:t})=>{}),t.on(y1.DragEnter,({node:e,event:t})=>{e.type===`dir`&&i.updateViewState(e.id,{isDragOver:!0})}),t.on(y1.DragOver,({node:e,event:t})=>{e.type===`dir`&&(i.getViewState(e.id).isDragOver||i.updateViewState(e.id,{isDragOver:!0}))}),t.on(y1.DragLeave,({node:e,event:t})=>{i.updateViewState(e.id,{isDragOver:!1})}),t.on(y1.Drop,async({node:e,event:t,position:r})=>{i.updateViewState(e.id,{isDragOver:!1});let a=t.dataTransfer.getData(`text`),o=n.getNode(a);o&&await i.handleDrop(o,e,r)})}}),e2=S0({activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(b1.TreeService).getSpace();e.addNodeMenuItems([{id:`copyFilePath`,key:`copyFilePath`,label:J(`tree.copyUri`),icon:`AiFillCopy`,event:y1.CopyFilePath.name,group:`more`}]),e.renderer.register(`AiFillCopy`,nu),t.on(y1.CopyFilePath,({node:e})=>{let t=oh.getUri(r.id,e.id===`root`?``:e.id);navigator.clipboard.writeText(t.toString()),q.notificationService.success(J(`tree.uriCopied`))})}}),t2=S0({addOptions(){return{unsubscribes:[]}},activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(b1.TreeService).getSpace(),i=this.options.unsubscribes||(this.options.unsubscribes=[]),a=new Set,o=n=>{if(!n.showInTreeMenu||a.has(n.id))return;a.add(n.id);let o=`openWith:${n.id}`,s=J(`tree.openWith`,{name:n.label||n.id})||`Open with ${n.label||n.id}`,c=`type === 'file'`;if(Array.isArray(n.match)&&n.match.length>0&&typeof n.match[0]==`string`){let e=n.match.map(e=>{let t=e.replace(/"/g,`\\"`);return`(name && name.endsWith("${t}")) || (path && path.endsWith("${t}"))`});e.length>0&&(c=`type === "file" && (${e.join(` || `)})`)}e.addNodeMenuItems([{id:o,key:o,label:s,icon:n.icon,group:`more`,when:c,event:o}]);let l=t.on(o,({node:e})=>{Rv.openWith(r.id,e,n.id)});i.push(l)};Rv.getOpeners().forEach(o);let s=Rv.subscribe(e=>{o(e)});i.push(s)},deactivate(){let e=this.options.unsubscribes||[];for(let t of e)t();this.options.unsubscribes=[]}}),n2=S0({activate({viewSystem:e,eventBus:t,serviceBus:n}){let r=n.createProxy(b1.TreeService).getSpace();e.renderer.register(`AiOutlineDownload`,ru),e.addNodeMenuItems([{id:`downloadFile`,key:`downloadFile`,name:J(`tree.download`),label:J(`tree.download`),icon:`AiOutlineDownload`,group:`more`,when:`type === 'file'`,event:y1.DownloadFile.name}]),t.on(y1.DownloadFile,async({node:e})=>{try{let t=oh.getUri(r.id,e.id===`root`?``:e.id);q.notificationService.info(J(`tree.downloadStarted`));let n=(await q.fs.readFile(t)).buffer,i=new Blob([n]),a=URL.createObjectURL(i),o=document.createElement(`a`);o.href=a,o.download=e.name||`download`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}catch(e){console.error(`Failed to download file`,e),q.notificationService.error(J(`tree.downloadFailed`))}})}}),r2=S0({addOptions(){return{unsubscribes:[]}},activate({viewSystem:e,eventBus:t,dataStore:n,serviceBus:r}){let i=r.createProxy(b1.TreeService).getSpace(),a=this.options.unsubscribes||(this.options.unsubscribes=[]),o=new Map,s=s=>{if(!(!s.templates||s.templates.length===0))for(let c of s.templates){let l=`addFileWithTemplate:${s.id}:${c.id}`;if(o.has(l))continue;o.set(l,{openerId:s.id,template:c}),e.addNodeMenuItems([{id:l,key:l,label:c.label,icon:c.icon,group:`add`,when:`type === 'dir'`,event:l}]);let u=t.on(l,async({node:e})=>{let a=o.get(l);if(!a)return;let{template:s}=a,c=e.id,u=n.getNode(c),d=i,f=Rt();r.invoke(b1.EditInputNodeName,{parentId:c,defaultName:s.defaultFileName,nodeType:S1.File,callback:async e=>{let r=L1(u.path,e),i={id:f,type:S1.File,path:r,name:e};n.getActions().add({node:{...i,loading:!0},parentId:c});try{let e=``;typeof s.initialContent==`function`?e=await s.initialContent():s.initialContent!=null&&(e=s.initialContent);let a;a=e instanceof Uint8Array?e:new TextEncoder().encode(typeof e==`string`?e:``),await ed.writeFile(oh.getUri(d.id,r),a,{create:!0,overwrite:!0}),n.getActions().update({node:i}),t.emit(y1.NodeClick,{node:i})}catch{n.getActions().delete({id:f}),q.notificationService.error(`Failed to create file from template`)}}})});a.push(u)}};Rv.getOpeners().forEach(s);let c=Rv.subscribe(e=>{s(e)});a.push(c)},deactivate(){let e=this.options.unsubscribes||[];for(let t of e)t();this.options.unsubscribes=[]}}),i2=N0(),a2=({space:e})=>{let{t}=Og(),n=(0,V.useMemo)(()=>K0({initialState:{name:t(`common.file`),content:t(`common.content`),id:`root`,type:`dir`,path:`/`},persistConfig:{name:`folderTree:${e.id}`,type:`LocalStorage`}}),[e.id]),r=(0,V.useMemo)(()=>Om(),[]),a=(0,V.useMemo)(()=>Lg({initialState:[],persistConfig:{name:`folderTreeViewState:${e.id}`,type:`LocalStorage`}}),[e.id]),o=r.createProxy(b1.TreeService),{hasReadPermission:s}=mv.usePermissions(e.id),[c,f]=(0,V.useState)(!1);(0,V.useEffect)(()=>{let t=A_.registerTrigger(e.id,()=>{o.deepRefresh(`root`),o.expandNode({id:`root`})});return()=>t()},[]),(0,V.useEffect)(()=>{s&&c&&(o.deepRefresh(`root`),o.expandNode({id:`root`}))},[s,c]);let[p]=d1(`space.actions`,[]),m=mv.useSpaces();return mv.useAutoRefreshAuth(e.id),(0,H.jsxs)(h1,{space:e,children:[!s&&(0,H.jsxs)(u,{display:`p`,status:`warning`,size:`sm`,fontSize:`sm`,flexGrow:0,flexShrink:0,p:`10px`,w:`100%`,children:[t(`space.unauthorized`,{platform:e.platform}),(0,H.jsxs)(d,{color:`blue.300`,onClick:()=>{q.eventBus.emit(Ml.RequestRedirectAuthPage,e.id)},children:[t(`space.clickToAuthorize`),(0,H.jsx)(i,{as:Ae})]})]}),(0,H.jsxs)(g1,{title:(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(_1,{options:m.map(e=>({value:e.id,label:(0,H.jsx)(v1,{space:e}),title:`${e.owner}/${e.repo}`,data:e})),value:mv.getFocusedSpace()?.id,onChange:e=>{e&&mv.focusSpace(e)},placeholder:t(`common.search`)})}),className:`fs-tree-container`,actions:p,children:[(0,H.jsx)(l,{h:`0.5rem`,flexShrink:0,flexGrow:0}),(0,H.jsx)(l,{w:`100%`,className:`channel-tree flex-container-limited flex-col`,children:(0,H.jsx)(G0,{serviceBus:r,options:{space:e,defaultExpanded:!1},dataStore:n,viewStateStore:a,onPluginsLoaded:()=>f(!0),plugins:[M0(),I0(),v0(),F1(),L0(),w0(),J0(),Z0({editable:({level:e,node:t})=>e!==0&&t.type===`file`,renameNode:async(t,r)=>{let i=L1((0,i2.dirname)(t.path),r);await ed.rename(oh.getUri(e.id,t.path),oh.getUri(e.id,i),{overwrite:!1}),n.getActions().delete({id:t.id});let a=(0,i2.dirname)(t.path),o=EK.isRootPath(a)?`root`:a;n.getActions().add({node:{...t,id:i,path:i,name:r},parentId:o})}}),b0({addable:({node:e})=>e.id===`root`||e.type===`dir`}),r2(),e2(),n2(),X0({deletable:({node:e})=>e.type===`file`}),t2(),Y0({rootId:``}),j0(),$0(),T0(),R0(),x0(),C0(),Q0()]})}),(0,H.jsx)(l,{h:`1rem`,flexShrink:0,flexGrow:0})]})]})};const o2=Lm({addComponents(){return{folderTree:e=>(0,H.jsx)(a2,{...e})}},initilize(e){e.registry.set(`space.actions`,[...e.registry.get(`space.actions`)||[],{id:`space.delete`,title:J(`space.deleteSpace`),icon:(0,H.jsx)(ve,{}),events:[`Click`]},{id:`space.info`,title:J(`space.viewInfo`),icon:(0,H.jsx)(Ce,{}),events:[`Click`]}]),e.eventBus.on(Ml.Action.Clicked(`space.delete`),({context:e})=>{oh.getStore().getActions().delete(e.space.id)}),e.eventBus.on(Ml.Action.Clicked(`space.info`),({context:t})=>{let{repo:n,id:r,owner:a,platform:o}=t.space,s=`https://${o}.com/${a}/${n}`;e.modalService.createModal({title:`About ${t.space.repo}`,footer:!1,content:(0,H.jsxs)(l,{mb:`1em`,children:[(0,H.jsxs)(l,{children:[(0,H.jsx)(D,{children:(0,H.jsx)(f,{as:`b`,children:`Owner`})}),(0,H.jsx)(f,{children:(0,H.jsx)(m,{children:a})})]}),(0,H.jsxs)(l,{children:[(0,H.jsx)(D,{children:(0,H.jsx)(f,{as:`b`,children:`Repository`})}),(0,H.jsx)(f,{children:(0,H.jsxs)(m,{children:[s,(0,H.jsx)(d,{as:`a`,href:s,target:`_blank`,children:(0,H.jsx)(i,{as:ge})})]})})]})]})}).open()})}});var s2=class{_onDidChangeFile=new $u;onDidChangeFile=this._onDidChangeFile.event;constructor(e,t){this.provider=e,this.spaceId=t,e.onDidChangeFile(e=>{Array.isArray(e)&&this.handleFileChange(e)})}watch(e,t){return e.authority===this.spaceId&&this.provider.watch?.(e,t)||new Qu(()=>{})}stat(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.stat(e)}readDirectory(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.readDirectory(e)}createDirectory(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.createDirectory(e)}readFile(e){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.readFile(e)}writeFile(e,t,n){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.writeFile(e,t,n)}delete(e,t){if(e.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority}`);return this.provider.delete(e,t)}rename(e,t,n){if(e.authority!==this.spaceId||t.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority} or ${t.authority}`);return this.provider.rename(e,t,n)}copy(e,t,n){if(e.authority!==this.spaceId||t.authority!==this.spaceId)throw Error(`Invalid space ID: ${e.authority} or ${t.authority}`);return this.provider.copy?.(e,t,n)}handleFileChange(e){this._onDidChangeFile.fire(e.filter(e=>e.uri.authority===this.spaceId))}dispose(){this._onDidChangeFile.dispose(),`dispose`in this.provider&&this.provider.dispose()}};const c2=Lm({initilize(e){mv.subscribeSpaces(t=>{t.forEach(t=>{let n=dv.getPlatform(t.platform);if(!n)return;let r=new s2(n.getProvider({accessToken:uv.getAnyAuthInfo(t.platform,t.owner)?.accessToken,owner:t.owner,repo:t.repo}),t.id);e.fs.registerProvider({id:`space-${t.id}`,scheme:`space`,provider:r,authority:t.id,options:{overwrite:!0}})})})}});var l2=e=>{let t=new URLSearchParams(e);return Object.fromEntries(t.entries())},u2=(e,t)=>{let n=new URL(e);return t.forEach(e=>{n.searchParams.delete(e)}),n.toString()},d2=Lm({initilize(e){let t=l2(window.location.search).openRepo;if(t){let e=mv.parseRepoUrl(t);if(e.platform&&e.owner&&e.repo){let t=mv.addSpace(e),n=u2(window.location.href,[`openRepo`]);window.history.replaceState(null,``,n),setTimeout(()=>{mv.focusSpace(t.id)},400)}}let n=`shareRepoUrl`,r={id:n,icon:(0,H.jsx)(ke,{}),title:J(`share.title`),events:[`Click`]};e.eventBus.on(Ml.Action.Clicked(n),({context:{space:{platform:t,owner:n,repo:r}}})=>{let i=`${window.location.href}?openRepo=https://${t}.com/${n}/${r}`;navigator.clipboard.writeText(i),e.notificationService.success(J(`share.linkCopied`))}),e.registry.set(`space.actions`,[...e.registry.get(`space.actions`)||[],r])}}),f2=Lg({name:`settings`,initialState:[]});const p2=new class{addSettingEntry(e){f2.getActions().add(e)}};var m2=async()=>{if(window.indexedDB)try{let e=await indexedDB.databases();await Promise.all(e.filter(e=>!!e.name).map(e=>new Promise((t,n)=>{let r=indexedDB.deleteDatabase(e.name);r.onsuccess=()=>t(),r.onerror=()=>n(r.error),r.onblocked=()=>{console.warn(`删除数据库 ${e.name} 被阻塞，等待连接关闭...`)}})))}catch(e){console.error(`清空 IndexedDB 失败:`,e)}},h2=Lm({initilize(e){p2.addSettingEntry({id:`localCache`,name:`本地缓存`,icon:_e,widget:()=>{let{t}=Og();return(0,H.jsx)(A,{onClick:async()=>{await e.modalService.confirm({title:t(`settings.clearCacheTitle`),description:t(`settings.clearCacheDescription`)})&&(localStorage.clear(),await m2())},children:t(`common.clear`)})}})}}),g2=Lm({initilize(e){p2.addSettingEntry({id:`themer`,name:`主题`,description:`黑夜/白天`,menuItems:[`Dark`,`Light`],icon:e=>{let{colorMode:t,toggleColorMode:n}=v();return(0,V.useEffect)(()=>{let e=t===`light`?`#f8f8f8`:`#2e2e2e`,n=document.querySelector(`meta[name="theme-color"]`);n&&n.setAttribute(`content`,e);let r=document.documentElement;t===`dark`?r.classList.add(`dark`):r.classList.remove(`dark`)},[t]),(0,H.jsx)(H.Fragment,{children:t===`light`?(0,H.jsx)(je,{...e,onClick:()=>n()}):(0,H.jsx)(Me,{...e,onClick:()=>n()})})},widget:()=>{let{t:e}=Og(),{colorMode:t,toggleColorMode:n}=v();return(0,V.useEffect)(()=>{let e=t===`light`?`#f8f8f8`:`#2e2e2e`,n=document.querySelector(`meta[name="theme-color"]`);n&&n.setAttribute(`content`,e);let r=document.documentElement;t===`dark`?r.classList.add(`dark`):r.classList.remove(`dark`)},[t]),(0,H.jsx)(A,{onClick:n,children:e(t===`light`?`settings.switchToDarkMode`:`settings.switchToLightMode`)})}})}});const _2=()=>{let{t:e}=Og();return(0,H.jsx)(`div`,{className:`h-full overflow-y-auto`,children:(0,H.jsx)(`div`,{className:`p-6`,children:(0,H.jsxs)(`div`,{className:`space-y-8`,children:[(0,H.jsxs)(`div`,{className:`space-y-4 text-center`,children:[(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsx)(kl,{showLogo:!0,showName:!0,size:`lg`})}),(0,H.jsx)(`h1`,{className:`text-4xl font-bold tracking-tight`,children:e(`introduction.welcome`)}),(0,H.jsx)(`p`,{className:`text-xl text-muted-foreground`,children:e(`introduction.subtitle`)})]}),(0,H.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-8`,children:[(0,H.jsx)(v2,{icon:`🔄`,title:e(`introduction.gitIntegration`),description:e(`introduction.gitIntegrationDesc`)}),(0,H.jsx)(v2,{icon:`✍️`,title:e(`introduction.markdownEditor`),description:e(`introduction.markdownEditorDesc`)}),(0,H.jsx)(v2,{icon:`🤖`,title:e(`introduction.aiDrawing`),description:e(`introduction.aiDrawingDesc`)}),(0,H.jsx)(v2,{icon:`💬`,title:e(`introduction.aiAssistant`),description:e(`introduction.aiAssistantDesc`)}),(0,H.jsx)(v2,{icon:`📱`,title:e(`introduction.convenientAccess`),description:e(`introduction.convenientAccessDesc`)}),(0,H.jsx)(v2,{icon:`🔐`,title:e(`introduction.secure`),description:e(`introduction.secureDesc`)})]}),(0,H.jsx)(`div`,{className:`text-center`,children:(0,H.jsx)(_c,{size:`lg`,className:`px-8`,onClick:()=>q.eventBus.emit(Ml.ActivityBar.ActivityClicked(`addGiteeRepo`)),children:e(`introduction.getStarted`)})})]})})})};var v2=({icon:e,title:t,description:n})=>(0,H.jsx)(zv,{className:`h-full`,children:(0,H.jsxs)(Uv,{className:`p-6 flex flex-col h-full`,children:[(0,H.jsxs)(`div`,{className:`flex items-center space-x-3 mb-3`,children:[(0,H.jsx)(`span`,{className:`text-3xl`,children:e}),(0,H.jsx)(`h2`,{className:`text-2xl font-semibold`,children:t})]}),(0,H.jsx)(`p`,{className:`text-muted-foreground text-lg`,children:n})]})}),y2=Lm({initilize(e){e.componentService.register(`AiOutlineQuestionCircle`,Ve),e.shortcutService.addShortcut({id:`introduction`,name:J(`introduction.title`),order:1e4,icon:`AiOutlineQuestionCircle`}),e.eventBus.on(Ml.Shortcut.ShortcutClicked(`introduction`),()=>{e.modalService.open({content:(0,H.jsx)(_2,{}),footer:!1,width:`720px`,height:`80vh`,modalBodyClassName:`p-0 h-full overflow-hidden`})})}}),b2=[{code:`zh`,label:`中文`},{code:`en`,label:`English`}];function x2(){let{i18n:e}=Og(),t=b2.find(t=>t.code===e.language)||b2[0],n=t=>{e.changeLanguage(t)};return(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,className:`h-7 w-7 shrink-0 text-muted-foreground hover:text-foreground`,title:t.label,children:(0,H.jsx)(mu,{className:`h-4 w-4`})})}),(0,H.jsx)(Zk,{align:`end`,className:`min-w-[120px]`,children:b2.map(t=>(0,H.jsx)(Qk,{onClick:()=>n(t.code),className:G(`cursor-pointer`,e.language===t.code&&`bg-accent`),children:t.label},t.code))})]})}var S2=async()=>{if(window.indexedDB)try{let e=await indexedDB.databases();await Promise.all(e.filter(e=>!!e.name).map(e=>new Promise((t,n)=>{let r=indexedDB.deleteDatabase(e.name);r.onsuccess=()=>t(),r.onerror=()=>n(r.error),r.onblocked=()=>{console.warn(`Delete DB blocked: ${e.name}`)}})))}catch(e){console.error(`Failed to clear IndexedDB:`,e)}};function C2(){let{colorMode:e,toggleColorMode:t}=v(),{t:n}=Og(),r=e=>{let t=document.documentElement;e===`dark`?t.classList.add(`dark`):t.classList.remove(`dark`)},i=n(e===`light`?`settings.switchToDarkMode`:`settings.switchToLightMode`);return(0,H.jsxs)(`div`,{className:`py-1`,children:[(0,H.jsx)(tA,{className:`px-2.5 py-1.5 text-[11px] font-medium text-muted-foreground uppercase tracking-wider`,children:n(`settings.quickSettings`)}),(0,H.jsx)(nA,{className:`my-1`}),(0,H.jsx)(Qk,{className:G(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:e===`light`?(0,H.jsx)(Ou,{className:`h-3.5 w-3.5`}):(0,H.jsx)(vu,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.theme`)}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:i})]}),(0,H.jsx)(_c,{variant:`ghost`,size:`icon`,title:i,"aria-label":i,className:`h-7 w-7 shrink-0 text-muted-foreground hover:text-foreground`,onClick:n=>{n.preventDefault(),n.stopPropagation();let i=e===`light`?`dark`:`light`;t(),r(i)},children:e===`light`?(0,H.jsx)(vu,{className:`h-4 w-4`}):(0,H.jsx)(Ou,{className:`h-4 w-4`})})]})}),(0,H.jsx)(Qk,{className:G(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(mu,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.language`)}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:n(`settings.switchLanguage`)})]}),(0,H.jsx)(x2,{})]})}),(0,H.jsx)(Qk,{className:G(`px-2.5 py-2 group focus:bg-accent/50 select-none`),onSelect:e=>e.preventDefault(),children:(0,H.jsxs)(`div`,{className:`flex items-center gap-3 w-full`,children:[(0,H.jsx)(`div`,{className:`flex-shrink-0 w-7 h-7 rounded-md flex items-center justify-center group-hover:bg-muted/60 transition-colors`,children:(0,H.jsx)(ku,{className:`h-3.5 w-3.5`})}),(0,H.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,H.jsx)(`div`,{className:`text-sm font-medium leading-tight`,children:n(`settings.localCache`)}),(0,H.jsx)(`div`,{className:`text-[11px] text-muted-foreground leading-tight mt-0.5`,children:n(`settings.clearLocalCache`)})]}),(0,H.jsxs)(`div`,{className:`flex items-center gap-1 text-xs text-muted-foreground shrink-0 cursor-pointer`,onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),await q.modalService.confirm({title:n(`settings.clearCacheTitle`),description:n(`settings.clearCacheDescription`)}))try{localStorage.clear(),await S2(),q.notificationService.success(n(`settings.cacheCleared`))}catch(e){console.error(e),q.notificationService.error(n(`settings.clearCacheFailed`))}},children:[(0,H.jsx)(`span`,{children:n(`common.clear`)}),(0,H.jsx)(Kl,{className:`h-3 w-3`})]})]})})]})}var w2=({children:e})=>(0,H.jsxs)(qk,{children:[(0,H.jsx)(Jk,{asChild:!0,children:e}),(0,H.jsx)(Zk,{align:`end`,side:`right`,sideOffset:10,className:`min-w-56`,children:(0,H.jsx)(C2,{})})]});function T2({shortcut:e,isExpanded:t}){let{colorMode:n}=v(),{t:r}=Og();(0,V.useEffect)(()=>{let e=document.documentElement;n===`dark`?e.classList.add(`dark`):e.classList.remove(`dark`)},[n]);let{icon:i=`AiOutlineSetting`,name:a}=e,o=a||r(`common.settings`),s=Yu.useComponent(i)??(()=>null),c=(0,H.jsx)(ju,{activity:{id:e.id,name:o,icon:i},isExpanded:t,icon:(0,H.jsx)(s,{className:`w-full h-full`}),className:`data-[state=open]:pointer-events-none`,disableTooltip:!t,asChild:!0});return t?(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsx)(w2,{children:(0,H.jsx)(`div`,{className:`flex justify-center w-full`,children:c})})}):(0,H.jsx)(`div`,{className:`flex justify-center`,children:(0,H.jsxs)(Rl,{disableHoverableContent:!0,children:[(0,H.jsx)(w2,{children:(0,H.jsx)(zl,{asChild:!0,children:(0,H.jsx)(`div`,{className:`flex justify-center`,children:c})})}),(0,H.jsx)(Bl,{side:`right`,sideOffset:10,className:`text-xs px-2.5 py-1.5 bg-popover/95 text-popover-foreground rounded-md`,children:o})]})})}var E2=Lm({initilize(e){e.componentService.register(`AiOutlineSetting`,Ue),e.shortcutService.addShortcut({id:`settings`,name:J(`common.settings`),order:1e4,icon:`AiOutlineSetting`,hasPopover:!0}),e.componentService.register(`shortcut:settings`,T2)}}),D2=Lm({initilize(e){e.pluginService.use([E2,y2])}}),O2=class{onDidChangeFileEmitter=new $u;onDidChangeFile=this.onDidChangeFileEmitter.event;constructor(e,t,n){this.gitClient=e,this.owner=t,this.repo=n}async stat(e){let t=e.path,n=await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:t});return{type:n.data.type===`file`?PK.File:PK.Directory,ctime:0,mtime:0,size:n.data.size||0}}async readDirectory(e){let t=e.path.endsWith(`/`)?e.path:e.path+`/`,n=(await this.gitClient.File.getInfo({owner:this.owner,repo:this.repo,path:t})).data;if(!Array.isArray(n)){if(n&&typeof n==`object`&&`name`in n&&`type`in n){let e=n;return[[e.name,e.type===`file`?PK.File:PK.Directory]]}return[]}return n.map(e=>[e.name,e.type===`file`?PK.File:PK.Directory])}async readFile(e){let t=e.path,n=await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:t});if(n.data.type===`file`&&n.data.content)return new TextEncoder().encode(n.data.content);throw Error(`File not found`)}async createDirectory(e){let t=e.path;await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:t+`/.keep`,content:`placeholder`})}async exists(e){let t=e.path;try{let e=(await this.gitClient.File.getInfo({owner:this.owner,repo:this.repo,path:t})).data;if(Array.isArray(e)&&e.length===0)return!1}catch(e){if(e&&e.status===404)return!1}return!0}async writeFile(e,t){let n=e.path,r=new TextDecoder().decode(t);if(!await this.exists(e)){await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:n,content:r});return}await this.gitClient.File.update({owner:this.owner,repo:this.repo,path:n,content:r})}async delete(e,t){let n=e.path;await this.gitClient.File.delete({owner:this.owner,repo:this.repo,path:n})}async rename(e,t,n){let r=e.path,i=t.path,a=(await this.gitClient.File.get({owner:this.owner,repo:this.repo,path:r})).data.content;await this.gitClient.File.add({owner:this.owner,repo:this.repo,path:i,content:a}),await this.gitClient.File.delete({owner:this.owner,repo:this.repo,path:r})}},Q;(function(e){e[e.EPERM=1]=`EPERM`,e[e.ENOENT=2]=`ENOENT`,e[e.EINTR=4]=`EINTR`,e[e.EIO=5]=`EIO`,e[e.ENXIO=6]=`ENXIO`,e[e.EBADF=9]=`EBADF`,e[e.EAGAIN=11]=`EAGAIN`,e[e.ENOMEM=12]=`ENOMEM`,e[e.EACCES=13]=`EACCES`,e[e.EFAULT=14]=`EFAULT`,e[e.ENOTBLK=15]=`ENOTBLK`,e[e.EBUSY=16]=`EBUSY`,e[e.EEXIST=17]=`EEXIST`,e[e.EXDEV=18]=`EXDEV`,e[e.ENODEV=19]=`ENODEV`,e[e.ENOTDIR=20]=`ENOTDIR`,e[e.EISDIR=21]=`EISDIR`,e[e.EINVAL=22]=`EINVAL`,e[e.ENFILE=23]=`ENFILE`,e[e.EMFILE=24]=`EMFILE`,e[e.ETXTBSY=26]=`ETXTBSY`,e[e.EFBIG=27]=`EFBIG`,e[e.ENOSPC=28]=`ENOSPC`,e[e.ESPIPE=29]=`ESPIPE`,e[e.EROFS=30]=`EROFS`,e[e.EMLINK=31]=`EMLINK`,e[e.EPIPE=32]=`EPIPE`,e[e.EDOM=33]=`EDOM`,e[e.ERANGE=34]=`ERANGE`,e[e.EDEADLK=35]=`EDEADLK`,e[e.ENAMETOOLONG=36]=`ENAMETOOLONG`,e[e.ENOLCK=37]=`ENOLCK`,e[e.ENOSYS=38]=`ENOSYS`,e[e.ENOTEMPTY=39]=`ENOTEMPTY`,e[e.ELOOP=40]=`ELOOP`,e[e.ENOMSG=42]=`ENOMSG`,e[e.EBADE=52]=`EBADE`,e[e.EBADR=53]=`EBADR`,e[e.EXFULL=54]=`EXFULL`,e[e.ENOANO=55]=`ENOANO`,e[e.EBADRQC=56]=`EBADRQC`,e[e.ENOSTR=60]=`ENOSTR`,e[e.ENODATA=61]=`ENODATA`,e[e.ETIME=62]=`ETIME`,e[e.ENOSR=63]=`ENOSR`,e[e.ENONET=64]=`ENONET`,e[e.EREMOTE=66]=`EREMOTE`,e[e.ENOLINK=67]=`ENOLINK`,e[e.ECOMM=70]=`ECOMM`,e[e.EPROTO=71]=`EPROTO`,e[e.EBADMSG=74]=`EBADMSG`,e[e.EOVERFLOW=75]=`EOVERFLOW`,e[e.EBADFD=77]=`EBADFD`,e[e.ESTRPIPE=86]=`ESTRPIPE`,e[e.ENOTSOCK=88]=`ENOTSOCK`,e[e.EDESTADDRREQ=89]=`EDESTADDRREQ`,e[e.EMSGSIZE=90]=`EMSGSIZE`,e[e.EPROTOTYPE=91]=`EPROTOTYPE`,e[e.ENOPROTOOPT=92]=`ENOPROTOOPT`,e[e.EPROTONOSUPPORT=93]=`EPROTONOSUPPORT`,e[e.ESOCKTNOSUPPORT=94]=`ESOCKTNOSUPPORT`,e[e.ENOTSUP=95]=`ENOTSUP`,e[e.ENETDOWN=100]=`ENETDOWN`,e[e.ENETUNREACH=101]=`ENETUNREACH`,e[e.ENETRESET=102]=`ENETRESET`,e[e.ETIMEDOUT=110]=`ETIMEDOUT`,e[e.ECONNREFUSED=111]=`ECONNREFUSED`,e[e.EHOSTDOWN=112]=`EHOSTDOWN`,e[e.EHOSTUNREACH=113]=`EHOSTUNREACH`,e[e.EALREADY=114]=`EALREADY`,e[e.EINPROGRESS=115]=`EINPROGRESS`,e[e.ESTALE=116]=`ESTALE`,e[e.EREMOTEIO=121]=`EREMOTEIO`,e[e.EDQUOT=122]=`EDQUOT`})(Q||={});const k2={[Q.EPERM]:`Operation not permitted`,[Q.ENOENT]:`No such file or directory`,[Q.EINTR]:`Interrupted system call`,[Q.EIO]:`Input/output error`,[Q.ENXIO]:`No such device or address`,[Q.EBADF]:`Bad file descriptor`,[Q.EAGAIN]:`Resource temporarily unavailable`,[Q.ENOMEM]:`Cannot allocate memory`,[Q.EACCES]:`Permission denied`,[Q.EFAULT]:`Bad address`,[Q.ENOTBLK]:`Block device required`,[Q.EBUSY]:`Resource busy or locked`,[Q.EEXIST]:`File exists`,[Q.EXDEV]:`Invalid cross-device link`,[Q.ENODEV]:`No such device`,[Q.ENOTDIR]:`File is not a directory`,[Q.EISDIR]:`File is a directory`,[Q.EINVAL]:`Invalid argument`,[Q.ENFILE]:`Too many open files in system`,[Q.EMFILE]:`Too many open files`,[Q.ETXTBSY]:`Text file busy`,[Q.EFBIG]:`File is too big`,[Q.ENOSPC]:`No space left on disk`,[Q.ESPIPE]:`Illegal seek`,[Q.EROFS]:`Cannot modify a read-only file system`,[Q.EMLINK]:`Too many links`,[Q.EPIPE]:`Broken pipe`,[Q.EDOM]:`Numerical argument out of domain`,[Q.ERANGE]:`Numerical result out of range`,[Q.EDEADLK]:`Resource deadlock would occur`,[Q.ENAMETOOLONG]:`File name too long`,[Q.ENOLCK]:`No locks available`,[Q.ENOSYS]:`Function not implemented`,[Q.ENOTEMPTY]:`Directory is not empty`,[Q.ELOOP]:`Too many levels of symbolic links`,[Q.ENOMSG]:`No message of desired type`,[Q.EBADE]:`Invalid exchange`,[Q.EBADR]:`Invalid request descriptor`,[Q.EXFULL]:`Exchange full`,[Q.ENOANO]:`No anode`,[Q.EBADRQC]:`Invalid request code`,[Q.ENOSTR]:`Device not a stream`,[Q.ENODATA]:`No data available`,[Q.ETIME]:`Timer expired`,[Q.ENOSR]:`Out of streams resources`,[Q.ENONET]:`Machine is not on the network`,[Q.EREMOTE]:`Object is remote`,[Q.ENOLINK]:`Link has been severed`,[Q.ECOMM]:`Communication error on send`,[Q.EPROTO]:`Protocol error`,[Q.EBADMSG]:`Bad message`,[Q.EOVERFLOW]:`Value too large for defined data type`,[Q.EBADFD]:`File descriptor in bad state`,[Q.ESTRPIPE]:`Streams pipe error`,[Q.ENOTSOCK]:`Socket operation on non-socket`,[Q.EDESTADDRREQ]:`Destination address required`,[Q.EMSGSIZE]:`Message too long`,[Q.EPROTOTYPE]:`Protocol wrong type for socket`,[Q.ENOPROTOOPT]:`Protocol not available`,[Q.EPROTONOSUPPORT]:`Protocol not supported`,[Q.ESOCKTNOSUPPORT]:`Socket type not supported`,[Q.ENOTSUP]:`Operation is not supported`,[Q.ENETDOWN]:`Network is down`,[Q.ENETUNREACH]:`Network is unreachable`,[Q.ENETRESET]:`Network dropped connection on reset`,[Q.ETIMEDOUT]:`Connection timed out`,[Q.ECONNREFUSED]:`Connection refused`,[Q.EHOSTDOWN]:`Host is down`,[Q.EHOSTUNREACH]:`No route to host`,[Q.EALREADY]:`Operation already in progress`,[Q.EINPROGRESS]:`Operation now in progress`,[Q.ESTALE]:`Stale file handle`,[Q.EREMOTEIO]:`Remote I/O error`,[Q.EDQUOT]:`Disk quota exceeded`};var $=class e extends Error{static fromJSON(t){let n=new e(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new e(Q[t],k2[Q[t]],n,r)}constructor(e,t=k2[e],n,r=``){super(t),this.errno=e,this.path=n,this.syscall=r,this.code=Q[e],this.message=`${this.code}: ${t}${this.path?`, '${this.path}'`:``}`}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}};function A2(e,t){let n=``,r=0,i=-1,a=0,o=`\0`;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o==`/`)break;else o=`/`;if(o==`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n.at(-1)!==`.`||n.at(-2)!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length!==0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/`+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}function j2(...e){let t=``;for(let n of[...e.reverse(),`/`])if(n.length&&(t=`${n}/${t}`,n.startsWith(`/`)))break;let n=t.startsWith(`/`);return t=A2(t,!n),n?`/${t}`:t.length?t:`/`}function M2(e){if(!e.length)return`.`;let t=e.startsWith(`/`),n=e.endsWith(`/`);return e=A2(e,!t),e.length?(n&&(e+=`/`),t?`/${e}`:e):t?`/`:n?`./`:`.`}function N2(...e){if(!e.length)return`.`;let t=e.join(`/`);return t?.length?M2(t):`.`}function P2(e){if(e.length===0)return`.`;let t=e[0]===`/`,n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e[t]===`/`){if(!r){n=t;break}}else r=!1;return n===-1?t?`/`:`.`:t&&n===1?`//`:e.slice(0,n)}function F2(e,t){let n=0,r=-1,i=!0;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let a=t.length-1,o=-1;for(let s=e.length-1;s>=0;--s)if(e[s]===`/`){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(e[s]===t[a]?--a===-1&&(r=s):(a=-1,r=o));return n===r?r=o:r===-1&&(r=e.length),e.slice(n,r)}for(let t=e.length-1;t>=0;--t)if(e[t]===`/`){if(!i){n=t+1;break}}else r===-1&&(i=!1,r=t+1);return r===-1?``:e.slice(n,r)}function I2(e){let t=e.startsWith(`/`),n={root:t?`/`:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return n;let r=t?1:0,i=-1,a=0,o=-1,s=!0,c=e.length-1,l=0;for(;c>=r;--c){if(e[c]===`/`){if(!s){a=c+1;break}continue}o===-1&&(s=!1,o=c+1),e[c]===`.`?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(o!==-1){let r=a===0&&t?1:a;i===-1||l===0||l===1&&i===o-1&&i===a+1?n.base=n.name=e.slice(r,o):(n.name=e.slice(r,i),n.base=e.slice(r,o),n.ext=e.slice(i,o))}return a>0?n.dir=e.slice(0,a-1):t&&(n.dir=`/`),n}function L2(e,t,n,r,i){return Math.min(e+1,t+1,n+1,r===i?t:t+1)}function R2(e,t){if(e===t)return 0;e.length>t.length&&([e,t]=[t,e]);let n=e.length,r=t.length;for(;n>0&&e.charCodeAt(n-1)===t.charCodeAt(r-1);)n--,r--;let i=0;for(;i<n&&e.charCodeAt(i)===t.charCodeAt(i);)i++;if(n-=i,r-=i,n===0||r===1)return r;let a=Array(n<<1);for(let t=0;t<n;)a[n+t]=e.charCodeAt(i+t),a[t]=++t;let o,s,c,l,u;for(o=0;o+3<r;){let e=t.charCodeAt(i+(s=o)),r=t.charCodeAt(i+(c=o+1)),d=t.charCodeAt(i+(l=o+2)),f=t.charCodeAt(i+(u=o+3)),p=o+=4;for(let t=0;t<n;){let i=a[n+t],o=a[t];s=L2(o,s,c,e,i),c=L2(s,c,l,r,i),l=L2(c,l,u,d,i),p=L2(l,u,p,f,i),a[t++]=p,u=l,l=c,c=s,s=o}}let d=0;for(;o<r;){let e=t.charCodeAt(i+(s=o));d=++o;for(let t=0;t<n;t++){let r=a[t];a[t]=d=r<s||d<s?r>d?d+1:r+1:e===a[n+t]?s:s+1,s=r}}return d}typeof globalThis.setImmediate==`function`&&globalThis.setImmediate;function z2(e){if(typeof e!=`string`)throw new $(Q.EINVAL,`Can not encode a non-string`);return new Uint8Array(Array.from(e).map(e=>e.charCodeAt(0)))}function B2(e){if(!(e instanceof Uint8Array))throw new $(Q.EINVAL,`Can not decode a non-Uint8Array`);return Array.from(e).map(e=>String.fromCharCode(e)).join(``)}function V2(e){return JSON.parse(B2(e),(e,t)=>e==``?t:BigInt(t))}function H2(e){return z2(JSON.stringify(e,(e,t)=>e==``?t:t.toString()))}function U2(e,t){if(typeof e==`number`)return e;if(typeof e==`string`){let t=parseInt(e,8);if(!isNaN(t))return t}if(typeof t==`number`)return t;throw new $(Q.EINVAL,`Invalid mode: `+e?.toString())}function W2(e){if(e instanceof Date)return e;if(typeof e==`number`)return new Date(e*1e3);if(typeof e==`string`)return new Date(e);throw new $(Q.EINVAL,`Invalid time.`)}function G2(e){if(e=e.toString(),e.includes(`\0`))throw new $(Q.EINVAL,`Path can not contain null character`);if(e.length==0)throw new $(Q.EINVAL,`Path can not be empty`);return j2(e.replaceAll(/[/\\]+/g,`/`))}function K2(e,t=`utf8`,n,r=0){return typeof e!=`object`||!e?{encoding:typeof e==`string`?e:t??null,flag:n,mode:r}:{encoding:typeof e?.encoding==`string`?e.encoding:t??null,flag:typeof e?.flag==`string`?e.flag:n,mode:U2(`mode`in e?e?.mode:null,r)}}function q2(e){return typeof e==`object`&&!!e&&`isAvailable`in e&&typeof e.isAvailable==`function`&&`create`in e&&typeof e.create==`function`}async function J2(e,t){if(typeof t!=`object`||!t)throw new $(Q.EINVAL,`Invalid options`);for(let[n,r]of Object.entries(e.options)){let i=t?.[n];if(i==null){if(!r.required)continue;let i=Object.keys(t).filter(t=>!(t in e.options)).map(e=>({str:e,distance:R2(n,e)})).filter(e=>e.distance<5).sort((e,t)=>e.distance-t.distance);throw new $(Q.EINVAL,`${e.name}: Required option '${n}' not provided.${i.length>0?` You provided '${i[0].str}', did you mean '${n}'.`:``}`)}if(!(Array.isArray(r.type)?r.type.indexOf(typeof i)!=-1:typeof i==r.type))throw new $(Q.EINVAL,`${e.name}: Value provided for option ${n} is not the proper type. Expected ${Array.isArray(r.type)?`one of {${r.type.join(`, `)}}`:r.type}, but received ${typeof i}`);r.validator&&await r.validator(i)}}function Y2(e){return typeof e==`object`&&!!e&&`backend`in e&&q2(e.backend)}const X2={uid:0,gid:0,suid:0,sgid:0,euid:0,egid:0};var Z2=n((e=>{e.byteLength=c,e.toByteArray=u,e.fromByteArray=p;for(var t=[],n=[],r=typeof Uint8Array<`u`?Uint8Array:Array,i=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,a=0,o=i.length;a<o;++a)t[a]=i[a],n[i.charCodeAt(a)]=a;n[45]=62,n[95]=63;function s(e){var t=e.length;if(t%4>0)throw Error(`Invalid string. Length must be a multiple of 4`);var n=e.indexOf(`=`);n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=s(e),n=t[0],r=t[1];return(n+r)*3/4-r}function l(e,t,n){return(t+n)*3/4-n}function u(e){var t,i=s(e),a=i[0],o=i[1],c=new r(l(e,a,o)),u=0,d=o>0?a-4:a,f;for(f=0;f<d;f+=4)t=n[e.charCodeAt(f)]<<18|n[e.charCodeAt(f+1)]<<12|n[e.charCodeAt(f+2)]<<6|n[e.charCodeAt(f+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=t&255;return o===2&&(t=n[e.charCodeAt(f)]<<2|n[e.charCodeAt(f+1)]>>4,c[u++]=t&255),o===1&&(t=n[e.charCodeAt(f)]<<10|n[e.charCodeAt(f+1)]<<4|n[e.charCodeAt(f+2)]>>2,c[u++]=t>>8&255,c[u++]=t&255),c}function d(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function f(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(d(r));return i.join(``)}function p(e){for(var n,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(f(e,s,s+o>c?c:s+o));return i===1?(n=e[r-1],a.push(t[n>>2]+t[n<<4&63]+`==`)):i===2&&(n=(e[r-2]<<8)+e[r-1],a.push(t[n>>10]+t[n>>4&63]+t[n<<2&63]+`=`)),a.join(``)}})),Q2=n((e=>{e.read=function(e,t,n,r,i){var a,o,s=i*8-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=a*256+e[t+d],d+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(a===0)a=1-l;else if(a===c)return o?NaN:(p?-1:1)*(1/0);else o+=2**r,a-=l;return(p?-1:1)*o*2**(a-r)},e.write=function(e,t,n,r,i,a){var o,s,c,l=a*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?2**-24-2**-77:0,p=r?0:a-1,m=r?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=2**-o)<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*2**(1-d),t*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*2**i,o+=d):(s=t*2**(d-1)*2**i,o=0));i>=8;e[n+p]=s&255,p+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+p]=o&255,p+=m,o/=256,l-=8);e[n+p-m]|=h*128}})),$2=n((e=>{var t=Z2(),n=Q2(),r=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`nodejs.util.inspect.custom`):null;e.Buffer=s,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<`u`&&typeof console.error==`function`&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,`parent`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,`offset`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(e){if(e>i)throw RangeError(`The value "`+e+`" is invalid for option "size"`);let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if(typeof e==`number`){if(typeof t==`string`)throw TypeError(`The "string" argument must be of type string. Received type number`);return d(e)}return c(e,t,n)}s.poolSize=8192;function c(e,t,n){if(typeof e==`string`)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(e==null)throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e);if(be(e,ArrayBuffer)||e&&be(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<`u`&&(be(e,SharedArrayBuffer)||e&&be(e.buffer,SharedArrayBuffer)))return h(e,t,n);if(typeof e==`number`)throw TypeError(`The "value" argument must not be of type number. Received type number`);let r=e.valueOf&&e.valueOf();if(r!=null&&r!==e)return s.from(r,t,n);let i=g(e);if(i)return i;if(typeof Symbol<`u`&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==`function`)return s.from(e[Symbol.toPrimitive](`string`),t,n);throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e)}s.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(e){if(typeof e!=`number`)throw TypeError(`"size" argument must be of type number`);if(e<0)throw RangeError(`The value "`+e+`" is invalid for option "size"`)}function u(e,t,n){return l(e),e<=0||t===void 0?o(e):typeof n==`string`?o(e).fill(t,n):o(e).fill(t)}s.alloc=function(e,t,n){return u(e,t,n)};function d(e){return l(e),o(e<0?0:_(e)|0)}s.allocUnsafe=function(e){return d(e)},s.allocUnsafeSlow=function(e){return d(e)};function f(e,t){if((typeof t!=`string`||t===``)&&(t=`utf8`),!s.isEncoding(t))throw TypeError(`Unknown encoding: `+t);let n=y(e,t)|0,r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function p(e){let t=e.length<0?0:_(e.length)|0,n=o(t);for(let r=0;r<t;r+=1)n[r]=e[r]&255;return n}function m(e){if(be(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}function h(e,t,n){if(t<0||e.byteLength<t)throw RangeError(`"offset" is outside of buffer bounds`);if(e.byteLength<t+(n||0))throw RangeError(`"length" is outside of buffer bounds`);let r;return r=t===void 0&&n===void 0?new Uint8Array(e):n===void 0?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function g(e){if(s.isBuffer(e)){let t=_(e.length)|0,n=o(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!=`number`||xe(e.length)?o(0):p(e);if(e.type===`Buffer`&&Array.isArray(e.data))return p(e.data)}function _(e){if(e>=i)throw RangeError(`Attempt to allocate Buffer larger than maximum size: 0x`+i.toString(16)+` bytes`);return e|0}function v(e){return+e!=e&&(e=0),s.alloc(+e)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(be(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),be(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError(`The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array`);if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`latin1`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError(`"list" argument must be an Array of Buffers`);if(e.length===0)return s.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(be(t,Uint8Array))i+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(s.isBuffer(t))t.copy(r,i);else throw TypeError(`"list" argument must be an Array of Buffers`);i+=t.length}return r};function y(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||be(e,ArrayBuffer))return e.byteLength;if(typeof e!=`string`)throw TypeError(`The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type `+typeof e);let n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let i=!1;for(;;)switch(t){case`ascii`:case`latin1`:case`binary`:return n;case`utf8`:case`utf-8`:return ge(e).length;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return n*2;case`hex`:return n>>>1;case`base64`:return ve(e).length;default:if(i)return r?-1:ge(e).length;t=(``+t).toLowerCase(),i=!0}}s.byteLength=y;function b(e,t,n){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return``;for(e||=`utf8`;;)switch(e){case`hex`:return ee(this,t,n);case`utf8`:case`utf-8`:return A(this,t,n);case`ascii`:return N(this,t,n);case`latin1`:case`binary`:return P(this,t,n);case`base64`:return k(this,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return te(this,t,n);default:if(r)throw TypeError(`Unknown encoding: `+e);e=(e+``).toLowerCase(),r=!0}}s.prototype._isBuffer=!0;function x(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError(`Buffer size must be a multiple of 16-bits`);for(let t=0;t<e;t+=2)x(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError(`Buffer size must be a multiple of 32-bits`);for(let t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError(`Buffer size must be a multiple of 64-bits`);for(let t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return e===0?``:arguments.length===0?A(this,0,e):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError(`Argument must be a Buffer`);return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let t=``,n=e.INSPECT_MAX_BYTES;return t=this.toString(`hex`,0,n).replace(/(.{2})/g,`$1 `).trim(),this.length>n&&(t+=` ... `),`<Buffer `+t+`>`},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(be(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError(`The "target" argument must be one of type Buffer or Uint8Array. Received type `+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError(`out of range index`);if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let a=i-r,o=n-t,c=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<c;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:o<a?1:0};function S(e,t,n,r,i){if(e.length===0)return-1;if(typeof n==`string`?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,xe(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof t==`string`&&(t=s.from(t,r)),s.isBuffer(t))return t.length===0?-1:C(e,t,n,r,i);if(typeof t==`number`)return t&=255,typeof Uint8Array.prototype.indexOf==`function`?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):C(e,[t],n,r,i);throw TypeError(`val must be string, number or Buffer`)}function C(e,t,n,r,i){let a=1,o=e.length,s=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r===`ucs2`||r===`ucs-2`||r===`utf16le`||r===`utf-16le`)){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,n/=2}function c(e,t){return a===1?e[t]:e.readUInt16BE(t*a)}let l;if(i){let r=-1;for(l=n;l<o;l++)if(c(e,l)===c(t,r===-1?0:l-r)){if(r===-1&&(r=l),l-r+1===s)return r*a}else r!==-1&&(l-=l-r),r=-1}else for(n+s>o&&(n=o-s),l=n;l>=0;l--){let n=!0;for(let r=0;r<s;r++)if(c(e,l+r)!==c(t,r)){n=!1;break}if(n)return l}return-1}s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)};function w(e,t,n,r){n=Number(n)||0;let i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;let a=t.length;r>a/2&&(r=a/2);let o;for(o=0;o<r;++o){let r=parseInt(t.substr(o*2,2),16);if(xe(r))return o;e[n+o]=r}return o}function T(e,t,n,r){return ye(ge(t,e.length-n),e,n,r)}function E(e,t,n,r){return ye(L(t),e,n,r)}function D(e,t,n,r){return ye(ve(t),e,n,r)}function O(e,t,n,r){return ye(_e(t,e.length-n),e,n,r)}s.prototype.write=function(e,t,n,r){if(t===void 0)r=`utf8`,n=this.length,t=0;else if(n===void 0&&typeof t==`string`)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,r===void 0&&(r=`utf8`)):(r=n,n=void 0);else throw Error(`Buffer.write(string, encoding, offset[, length]) is no longer supported`);let i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError(`Attempt to write outside buffer bounds`);r||=`utf8`;let a=!1;for(;;)switch(r){case`hex`:return w(this,e,t,n);case`utf8`:case`utf-8`:return T(this,e,t,n);case`ascii`:case`latin1`:case`binary`:return E(this,e,t,n);case`base64`:return D(this,e,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return O(this,e,t,n);default:if(a)throw TypeError(`Unknown encoding: `+r);r=(``+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:`Buffer`,data:Array.prototype.slice.call(this._arr||this,0)}};function k(e,n,r){return n===0&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function A(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],(n&192)==128&&(c=(t&31)<<6|n&63,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],(n&192)==128&&(r&192)==128&&(c=(t&15)<<12|(n&63)<<6|r&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],(n&192)==128&&(r&192)==128&&(s&192)==128&&(c=(t&15)<<18|(n&63)<<12|(r&63)<<6|s&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),i+=o}return M(r)}var j=4096;function M(e){let t=e.length;if(t<=j)return String.fromCharCode.apply(String,e);let n=``,r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=j));return n}function N(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]&127);return r}function P(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function ee(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i=``;for(let r=t;r<n;++r)i+=R[e[r]];return i}function te(e,t,n){let r=e.slice(t,n),i=``;for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+r[e+1]*256);return i}s.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r};function F(e,t,n){if(e%1!=0||e<0)throw RangeError(`offset is not uint`);if(e+t>n)throw RangeError(`Trying to access beyond buffer length`)}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Se(function(e){e>>>=0,fe(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);let r=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),s.prototype.readBigUInt64BE=Se(function(e){e>>>=0,fe(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);let r=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=2**(8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=2**(8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Se(function(e){e>>>=0,fe(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);let r=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=Se(function(e){e>>>=0,fe(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&pe(e,this.length-8);let r=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!1,52,8)};function I(e,t,n,r,i,a){if(!s.isBuffer(e))throw TypeError(`"buffer" argument must be a Buffer instance`);if(t>i||t<a)throw RangeError(`"value" argument is out of bounds`);if(n+r>e.length)throw RangeError(`Index out of range`)}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;I(this,e,t,n,r,0)}let i=1,a=0;for(this[t]=e&255;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;I(this,e,t,n,r,0)}let i=n-1,a=1;for(this[t+i]=e&255;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ne(e,t,n,r,i){de(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function re(e,t,n,r,i){de(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}s.prototype.writeBigUInt64LE=Se(function(e,t=0){return ne(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeBigUInt64BE=Se(function(e,t=0){return re(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);I(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=e&255;++i<n&&(a*=256);)e<0&&o===0&&this[t+i-1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);I(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=e&255;--i>=0&&(a*=256);)e<0&&o===0&&this[t+i+1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=Se(function(e,t=0){return ne(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))}),s.prototype.writeBigInt64BE=Se(function(e,t=0){return re(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))});function ie(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError(`Index out of range`)}function ae(e,t,r,i,a){return t=+t,r>>>=0,a||ie(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}s.prototype.writeFloatLE=function(e,t,n){return ae(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return ae(this,e,t,!1,n)};function oe(e,t,r,i,a){return t=+t,r>>>=0,a||ie(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}s.prototype.writeDoubleLE=function(e,t,n){return oe(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return oe(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError(`argument should be a Buffer`);if(n||=0,!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||=0,r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw RangeError(`targetStart out of bounds`);if(n<0||n>=this.length)throw RangeError(`Index out of range`);if(r<0)throw RangeError(`sourceEnd out of bounds`);r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&typeof Uint8Array.prototype.copyWithin==`function`?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},s.prototype.fill=function(e,t,n,r){if(typeof e==`string`){if(typeof t==`string`?(r=t,t=0,n=this.length):typeof n==`string`&&(r=n,n=this.length),r!==void 0&&typeof r!=`string`)throw TypeError(`encoding must be a string`);if(typeof r==`string`&&!s.isEncoding(r))throw TypeError(`Unknown encoding: `+r);if(e.length===1){let t=e.charCodeAt(0);(r===`utf8`&&t<128||r===`latin1`)&&(e=t)}}else typeof e==`number`?e&=255:typeof e==`boolean`&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError(`Out of range index`);if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||=0;let i;if(typeof e==`number`)for(i=t;i<n;++i)this[i]=e;else{let a=s.isBuffer(e)?e:s.from(e,r),o=a.length;if(o===0)throw TypeError(`The value "`+e+`" is invalid for argument "value"`);for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};var se={};function ce(e,t,n){se[e]=class extends n{constructor(){super(),Object.defineProperty(this,`message`,{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,`code`,{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}ce(`ERR_BUFFER_OUT_OF_BOUNDS`,function(e){return e?`${e} is outside of buffer bounds`:`Attempt to access memory outside buffer bounds`},RangeError),ce(`ERR_INVALID_ARG_TYPE`,function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),ce(`ERR_OUT_OF_RANGE`,function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=le(String(n)):typeof n==`bigint`&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=le(i)),i+=`n`),r+=` It must be ${t}. Received ${i}`,r},RangeError);function le(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function ue(e,t,n){fe(t,`offset`),(e[t]===void 0||e[t+n]===void 0)&&pe(t,e.length-(n+1))}function de(e,t,n,r,i,a){if(e>n||e<t){let r=typeof t==`bigint`?`n`:``,i;throw i=a>3?t===0||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${(a+1)*8}${r}`:`>= -(2${r} ** ${(a+1)*8-1}${r}) and < 2 ** ${(a+1)*8-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new se.ERR_OUT_OF_RANGE(`value`,i,e)}ue(r,i,a)}function fe(e,t){if(typeof e!=`number`)throw new se.ERR_INVALID_ARG_TYPE(t,`number`,e)}function pe(e,t,n){throw Math.floor(e)===e?t<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE(n||`offset`,`>= ${n?1:0} and <= ${t}`,e):(fe(e,n),new se.ERR_OUT_OF_RANGE(n||`offset`,`an integer`,e))}var me=/[^+/0-9A-Za-z-_]/g;function he(e){if(e=e.split(`=`)[0],e=e.trim().replace(me,``),e.length<2)return``;for(;e.length%4!=0;)e+=`=`;return e}function ge(e,t){t||=1/0;let n,r=e.length,i=null,a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error(`Invalid code point`)}return a}function L(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function _e(e,t){let n,r,i,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function ve(e){return t.toByteArray(he(e))}function ye(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function be(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function xe(e){return e!==e}var R=(function(){let e=`0123456789abcdef`,t=Array(256);for(let n=0;n<16;++n){let r=n*16;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t})();function Se(e){return typeof BigInt>`u`?Ce:e}function Ce(){throw Error(`BigInt not supported`)}})),e4=$2(),t4=e({COPYFILE_EXCL:()=>1,COPYFILE_FICLONE:()=>2,COPYFILE_FICLONE_FORCE:()=>4,F_OK:()=>0,O_APPEND:()=>n4,O_CREAT:()=>64,O_DIRECT:()=>l4,O_DIRECTORY:()=>r4,O_DSYNC:()=>s4,O_EXCL:()=>128,O_NOATIME:()=>i4,O_NOCTTY:()=>256,O_NOFOLLOW:()=>a4,O_NONBLOCK:()=>u4,O_RDONLY:()=>0,O_RDWR:()=>2,O_SYMLINK:()=>c4,O_SYNC:()=>o4,O_TRUNC:()=>512,O_WRONLY:()=>1,R_OK:()=>4,S_IFBLK:()=>h4,S_IFCHR:()=>_4,S_IFDIR:()=>g4,S_IFIFO:()=>v4,S_IFLNK:()=>p4,S_IFMT:()=>d4,S_IFREG:()=>m4,S_IFSOCK:()=>f4,S_IRGRP:()=>32,S_IROTH:()=>4,S_IRUSR:()=>256,S_IRWXG:()=>56,S_IRWXO:()=>7,S_IRWXU:()=>448,S_ISGID:()=>b4,S_ISUID:()=>y4,S_ISVTX:()=>512,S_IWGRP:()=>16,S_IWOTH:()=>2,S_IWUSR:()=>128,S_IXGRP:()=>8,S_IXOTH:()=>1,S_IXUSR:()=>64,UV_FS_O_FILEMAP:()=>0,W_OK:()=>2,X_OK:()=>1});const n4=1024,r4=65536,i4=262144,a4=131072,o4=1052672,s4=4096,c4=32768,l4=16384,u4=2048,d4=61440,f4=49152,p4=40960,m4=32768,h4=24576,g4=16384,_4=8192,v4=4096,y4=2048,b4=1024;var x4=t(n(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1);x4.default,Symbol.toStringTag,Symbol.iterator;function S4(e){return e.at(0).toUpperCase()+e.slice(1)}const C4=[`int8`,`uint8`,`int16`,`uint16`,`int32`,`uint32`,`int64`,`uint64`,`float32`,`float64`],w4=[...C4,...C4.map(e=>S4(e)),`char`],T4=/^(u?int|float)(8|16|32|64)$/i;function E4(e){return e==`char`?`uint8`:e.toLowerCase()}function D4(e){return T4.test(e.toString())}function O4(e){return e==`char`||T4.test(e.toString().toLowerCase())}function k4(e){if(!O4(e))throw TypeError(`Not a valid primitive type: `+e)}const A4=Symbol(`struct_init`),j4=Symbol(`struct`);function M4(e){return typeof e==`object`&&!!e&&j4 in e}Symbol.metadata??=Symbol.for(`Symbol.metadata`);function N4(e){Symbol?.metadata&&(Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)}))}function P4(e){let t=Symbol.metadata||Object.getOwnPropertySymbols(e).find(e=>e.description==`Symbol.metadata`);if(N4(e),!t)throw ReferenceError(`Could not get a reference to Symbol.metadata`);return t}function F4(e){return typeof e==`function`&&P4(e)in e&&M4(e[P4(e)])}function I4(e){return typeof e==`object`&&!!e&&F4(e.constructor)}function L4(e){if(!I4(e))throw TypeError((typeof e==`function`?e.name:typeof e==`object`&&e?e.constructor.name:e)+` is not a struct instance`)}function R4(e){return I4(e)||F4(e)}function z4(e){if(!R4(e))throw TypeError((typeof e==`function`?e.name:typeof e==`object`&&e?e.constructor.name:e)+` is not a struct`)}function B4(e){if(typeof e==`string`)return k4(e),E4(e).match(T4)[2]/8;z4(e);let t=F4(e)?e:e.constructor;return t[P4(t)][j4].size}function V4(e,t){return Math.ceil(e/t)*t}function H4(e={}){return function(t,n){n.metadata??={},n.metadata[A4]||=[];let r=0,i=new Map;for(let t of n.metadata[A4]){let{name:n,type:a,length:o}=t;if(!O4(a)&&!F4(a))throw TypeError(`Not a valid type: `+a);i.set(n,{offset:r,type:O4(a)?E4(a):a,length:o}),r+=B4(a)*(o||1),r=V4(r,e.align||1)}return n.metadata[j4]={options:e,members:i,size:r},t}}function U4(e,t){return function(n,r){let i=r.name;if(typeof i==`symbol`&&(console.warn(`Symbol used for struct member name will be coerced to string: `+i.toString()),i=i.toString()),!i)throw ReferenceError(`Invalid name for struct member`);return r.metadata??={},r.metadata[A4]||=[],r.metadata[A4].push({name:i,type:e,length:t}),n}}function W4(e){L4(e);let{options:t,members:n}=e.constructor[P4(e.constructor)][j4],r=new Uint8Array(B4(e)),i=new DataView(r.buffer);for(let[a,{type:o,length:s,offset:c}]of n)for(let n=0;n<(s||1);n++){let l=c+B4(o)*n,u=s>0?e[a][n]:e[a];if(typeof u==`string`&&(u=u.charCodeAt(0)),!D4(o)){r.set(u?W4(u):new Uint8Array(B4(o)),l);continue}let d=`set`+S4(o);if(d==`setInt64`){i.setBigInt64(l,BigInt(u),!t.bigEndian);continue}if(d==`setUint64`){i.setBigUint64(l,BigInt(u),!t.bigEndian);continue}i[d](l,Number(u),!t.bigEndian)}return r}function G4(e,t){L4(e);let{options:n,members:r}=e.constructor[P4(e.constructor)][j4],i=t instanceof Uint8Array?t:new Uint8Array(`buffer`in t?t.buffer:t),a=new DataView(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength));for(let[t,{type:o,offset:s,length:c}]of r)for(let r=0;r<(c||1);r++){let l=c>0?e[t]:e,u=c>0?r:t,d=s+B4(o)*r;if(typeof e[t]==`string`){e[t]=e[t].slice(0,r)+String.fromCharCode(a.getUint8(d))+e[t].slice(r+1);continue}if(!D4(o)){if(l[u]===null||l[u]===void 0)continue;G4(l[u],new Uint8Array(i.slice(d,d+B4(o))));continue}c>0&&(l||=[]);let f=`get`+S4(o);if(f==`getInt64`){l[u]=a.getBigInt64(d,!n.bigEndian);continue}if(f==`getUint64`){l[u]=a.getBigUint64(d,!n.bigEndian);continue}l[u]=a[f](d,!n.bigEndian)}}function K4(e){function t(t,n){return typeof t==`number`?U4(e,t):U4(e)(t,n)}return t}const q4=Object.fromEntries(w4.map(e=>[e,K4(e)]));var J4=function(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0},Y4=function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},X4=function(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})};const Z4=2**32-1,Q4=0n;function $4(){return Math.round(Math.random()*2**32).toString(16)}function e3(){return BigInt(`0x`+$4()+$4())}var t3=(()=>{var e,t,n,r,i,a,o,s,c,l;let u=[H4()],d,f=[],p,m,h=[],g=[],_,v=[],y=[],b,x=[],S=[],C,w=[],T=[],E,D=[],O=[],k,A=[],j=[],M,N=[],P=[],ee,te=[],F=[],I,ne=[],re=[],ie,ae=[],oe=[];var se=p=class{get data(){return W4(this)}constructor(e){if(this.ino=Y4(this,h,void 0),this.size=(Y4(this,g),Y4(this,v,void 0)),this.mode=(Y4(this,y),Y4(this,x,void 0)),this.nlink=(Y4(this,S),Y4(this,w,void 0)),this.uid=(Y4(this,T),Y4(this,D,void 0)),this.gid=(Y4(this,O),Y4(this,A,void 0)),this.atimeMs=(Y4(this,j),Y4(this,N,void 0)),this.birthtimeMs=(Y4(this,P),Y4(this,te,void 0)),this.mtimeMs=(Y4(this,F),Y4(this,ne,void 0)),this.ctimeMs=(Y4(this,re),Y4(this,ae,void 0)),Y4(this,oe),e){if(e.byteLength<B4(se))throw RangeError(`Can not create an inode from a buffer less than ${B4(se)} bytes`);G4(this,e);return}this.ino=e3(),this.nlink=1,this.size=4096;let t=Date.now();this.atimeMs=t,this.mtimeMs=t,this.ctimeMs=t,this.birthtimeMs=t}toStats(){return new r3(this)}update(e){let t=!1;return this.size!==e.size&&(this.size=e.size,t=!0),this.mode!==e.mode&&(this.mode=e.mode,t=!0),this.nlink!==e.nlink&&(this.nlink=e.nlink,t=!0),this.uid!==e.uid&&(this.uid=e.uid,t=!0),this.uid!==e.uid&&(this.uid=e.uid,t=!0),this.atimeMs!==e.atimeMs&&(this.atimeMs=e.atimeMs,t=!0),this.mtimeMs!==e.mtimeMs&&(this.mtimeMs=e.mtimeMs,t=!0),this.ctimeMs!==e.ctimeMs&&(this.ctimeMs=e.ctimeMs,t=!0),t}};return X4(p,`Inode`),(()=>{let ce=typeof Symbol==`function`&&Symbol.metadata?Object.create(null):void 0;m=[(e=q4).uint64.bind(e)],_=[(t=q4).uint32.bind(t)],b=[(n=q4).uint16.bind(n)],C=[(r=q4).uint32.bind(r)],E=[(i=q4).uint32.bind(i)],k=[(a=q4).uint32.bind(a)],M=[(o=q4).float64.bind(o)],ee=[(s=q4).float64.bind(s)],I=[(c=q4).float64.bind(c)],ie=[(l=q4).float64.bind(l)],J4(null,null,m,{kind:`field`,name:`ino`,static:!1,private:!1,access:{has:e=>`ino`in e,get:e=>e.ino,set:(e,t)=>{e.ino=t}},metadata:ce},h,g),J4(null,null,_,{kind:`field`,name:`size`,static:!1,private:!1,access:{has:e=>`size`in e,get:e=>e.size,set:(e,t)=>{e.size=t}},metadata:ce},v,y),J4(null,null,b,{kind:`field`,name:`mode`,static:!1,private:!1,access:{has:e=>`mode`in e,get:e=>e.mode,set:(e,t)=>{e.mode=t}},metadata:ce},x,S),J4(null,null,C,{kind:`field`,name:`nlink`,static:!1,private:!1,access:{has:e=>`nlink`in e,get:e=>e.nlink,set:(e,t)=>{e.nlink=t}},metadata:ce},w,T),J4(null,null,E,{kind:`field`,name:`uid`,static:!1,private:!1,access:{has:e=>`uid`in e,get:e=>e.uid,set:(e,t)=>{e.uid=t}},metadata:ce},D,O),J4(null,null,k,{kind:`field`,name:`gid`,static:!1,private:!1,access:{has:e=>`gid`in e,get:e=>e.gid,set:(e,t)=>{e.gid=t}},metadata:ce},A,j),J4(null,null,M,{kind:`field`,name:`atimeMs`,static:!1,private:!1,access:{has:e=>`atimeMs`in e,get:e=>e.atimeMs,set:(e,t)=>{e.atimeMs=t}},metadata:ce},N,P),J4(null,null,ee,{kind:`field`,name:`birthtimeMs`,static:!1,private:!1,access:{has:e=>`birthtimeMs`in e,get:e=>e.birthtimeMs,set:(e,t)=>{e.birthtimeMs=t}},metadata:ce},te,F),J4(null,null,I,{kind:`field`,name:`mtimeMs`,static:!1,private:!1,access:{has:e=>`mtimeMs`in e,get:e=>e.mtimeMs,set:(e,t)=>{e.mtimeMs=t}},metadata:ce},ne,re),J4(null,null,ie,{kind:`field`,name:`ctimeMs`,static:!1,private:!1,access:{has:e=>`ctimeMs`in e,get:e=>e.ctimeMs,set:(e,t)=>{e.ctimeMs=t}},metadata:ce},ae,oe),J4(null,d={value:p},u,{kind:`class`,name:p.name,metadata:ce},null,f),se=p=d.value,ce&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ce}),Y4(p,f)})(),se=p})(),n3=class{_convert(e){return this._isBigint?BigInt(e):Number(e)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}get atime(){return new Date(Number(this.atimeMs))}set atime(e){this.atimeMs=this._convert(e.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(e){this.mtimeMs=this._convert(e.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(e){this.ctimeMs=this._convert(e.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(e){this.birthtimeMs=this._convert(e.getTime())}constructor({atimeMs:e,mtimeMs:t,ctimeMs:n,birthtimeMs:r,uid:i,gid:a,size:o,mode:s,ino:c}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);let l=Date.now();this.atimeMs=this._convert(e??l),this.mtimeMs=this._convert(t??l),this.ctimeMs=this._convert(n??l),this.birthtimeMs=this._convert(r??l),this.uid=this._convert(i??0),this.gid=this._convert(a??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(s??0),this.mode&61440||(this.mode|=this._convert(m4))}isFile(){return(this.mode&d4)===m4}isDirectory(){return(this.mode&d4)===g4}isSymbolicLink(){return(this.mode&d4)===p4}isSocket(){return(this.mode&d4)===f4}isBlockDevice(){return(this.mode&d4)===h4}isCharacterDevice(){return(this.mode&d4)===_4}isFIFO(){return(this.mode&d4)===v4}hasAccess(e){if(X2.euid===0||X2.egid===0)return!0;let t=(X2.uid==this.uid?448:0)|(X2.gid==this.gid?56:0)|7;return(e&this.mode&t)==e}cred(e=Number(this.uid),t=Number(this.gid)){return{uid:e,gid:t,suid:Number(this.uid),sgid:Number(this.gid),euid:e,egid:t}}chmod(e){this.mode=this._convert(this.mode&d4|e)}chown(e,t){e=Number(e),t=Number(t),!isNaN(e)&&0<=e&&e<2**32&&(this.uid=this._convert(e)),!isNaN(t)&&0<=t&&t<2**32&&(this.gid=this._convert(t))}get atimeNs(){return BigInt(this.atimeMs)*1000n}get mtimeNs(){return BigInt(this.mtimeMs)*1000n}get ctimeNs(){return BigInt(this.ctimeMs)*1000n}get birthtimeNs(){return BigInt(this.birthtimeMs)*1000n}},r3=class extends n3{constructor(){super(...arguments),this._isBigint=!1}},i3=class extends n3{constructor(){super(...arguments),this._isBigint=!0}};function a3(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}var o3=class{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Z4,this.ffree=Z4}},s3=class{constructor(){this.type=525687744115n,this.bsize=4096n,this.blocks=0n,this.bfree=0n,this.bavail=0n,this.files=BigInt(Z4),this.ffree=BigInt(Z4)}};Promise.withResolvers??(Promise.withResolvers=function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}),Symbol.dispose??(Symbol.dispose=Symbol(`Symbol.dispose`)),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol(`Symbol.asyncDispose`));var c3=[`r`,`r+`,`rs`,`rs+`,`w`,`wx`,`w+`,`wx+`,`a`,`ax`,`a+`,`ax+`];function l3(e){if(typeof e==`number`)return u3(e);if(!c3.includes(e))throw Error(`Invalid flag string: `+e);return e}function u3(e){switch(e){case 0:return`r`;case 0|o4:return`rs`;case 2:return`r+`;case 2|o4:return`rs+`;case 577:return`w`;case 705:return`wx`;case 578:return`w+`;case 706:return`wx+`;case 1089:return`a`;case 1217:return`ax`;case 1090:return`a+`;case 1218:return`ax+`;default:throw Error(`Invalid flag number: `+e)}}function d3(e){let t=0;return t<<=1,t+=+f3(e),t<<=1,t+=+p3(e),t<<=1,t}function f3(e){return e.indexOf(`r`)!==-1||e.indexOf(`+`)!==-1}function p3(e){return e.indexOf(`w`)!==-1||e.indexOf(`a`)!==-1||e.indexOf(`+`)!==-1}function m3(e){return e.indexOf(`w`)!==-1}function h3(e){return e.indexOf(`a`)!==-1}function g3(e){return e.indexOf(`x`)!==-1}var _3=class{constructor(e,t){this.fs=e,this.path=t}[Symbol.asyncDispose](){return this.close()}[Symbol.dispose](){return this.closeSync()}datasync(){return this.sync()}datasyncSync(){return this.syncSync()}},v3=class extends _3{constructor(e,t,n,r,i=new Uint8Array(new ArrayBuffer(0,e.metadata().noResizableBuffers?{}:{maxByteLength:Z4}))){if(super(e,t),this.fs=e,this.flag=n,this.stats=r,this._buffer=i,this._position=0,this.dirty=!1,this.closed=!1,this.stats.size!=i.byteLength){if(f3(this.flag))throw Error(`Size mismatch: buffer length ${i.byteLength}, stats size ${this.stats.size}`);this.dirty=!0}}get buffer(){return this._buffer}get position(){return h3(this.flag)?this.stats.size:this._position}set position(e){this._position=e}async sync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.sync`);this.dirty&&=(await this.fs.sync(this.path,this._buffer,this.stats),!1)}syncSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.sync`);this.dirty&&=(this.fs.syncSync(this.path,this._buffer,this.stats),!1)}async close(){if(this.closed)throw $.With(`EBADF`,this.path,`File.close`);await this.sync(),this.dispose()}closeSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.close`);this.syncSync(),this.dispose()}dispose(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.dispose`);if(this.dirty&&!e)throw $.With(`EBUSY`,this.path,`File.dispose`);delete this._buffer,delete this.stats,this.closed=!0}stat(){if(this.closed)throw $.With(`EBADF`,this.path,`File.stat`);return Promise.resolve(new r3(this.stats))}statSync(){if(this.closed)throw $.With(`EBADF`,this.path,`File.stat`);return new r3(this.stats)}_truncate(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.truncate`);if(this.dirty=!0,!p3(this.flag))throw new $(Q.EPERM,`File not opened with a writeable mode.`);if(this.stats.mtimeMs=Date.now(),e>this._buffer.length){let t=new Uint8Array(e-this._buffer.length);this.writeSync(t,0,t.length,this._buffer.length);return}this.stats.size=e,this._buffer=this._buffer.slice(0,e)}async truncate(e){this._truncate(e),await this.sync()}truncateSync(e){this._truncate(e),this.syncSync()}_write(e,t=0,n=this.stats.size,r=this.position){if(this.closed)throw $.With(`EBADF`,this.path,`File.write`);if(this.dirty=!0,!p3(this.flag))throw new $(Q.EPERM,`File not opened with a writeable mode.`);let i=r+n;if(i>this.stats.size&&(this.stats.size=i,i>this._buffer.byteLength))if(this._buffer.buffer.resizable&&this._buffer.buffer.maxByteLength<=i)this._buffer.buffer.resize(i);else{let e=new Uint8Array(new ArrayBuffer(i,this.fs.metadata().noResizableBuffers?{}:{maxByteLength:Z4}));e.set(this._buffer),this._buffer=e}let a=e.slice(t,t+n);return this._buffer.set(a,r),this.stats.mtimeMs=Date.now(),this.position=r+a.byteLength,a.byteLength}async write(e,t,n,r){let i=this._write(e,t,n,r);return await this.sync(),i}writeSync(e,t=0,n=this.stats.size,r=this.position){let i=this._write(e,t,n,r);return this.syncSync(),i}_read(e,t=0,n=this.stats.size,r){if(this.closed)throw $.With(`EBADF`,this.path,`File.read`);if(!f3(this.flag))throw new $(Q.EPERM,`File not opened with a readable mode.`);this.dirty=!0,r??=this.position;let i=r+n;i>this.stats.size&&(i=r+Math.max(this.stats.size-r,0)),this.stats.atimeMs=Date.now(),this._position=i;let a=i-r;return a==0||new Uint8Array(e.buffer,t,n).set(this._buffer.slice(r,i)),a}async read(e,t,n,r){let i=this._read(e,t,n,r);return await this.sync(),{bytesRead:i,buffer:e}}readSync(e,t,n,r){let i=this._read(e,t,n,r);return this.statSync(),i}async chmod(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.chmod`);this.dirty=!0,this.stats.chmod(e),await this.sync()}chmodSync(e){if(this.closed)throw $.With(`EBADF`,this.path,`File.chmod`);this.dirty=!0,this.stats.chmod(e),this.syncSync()}async chown(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.chown`);this.dirty=!0,this.stats.chown(e,t),await this.sync()}chownSync(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.chown`);this.dirty=!0,this.stats.chown(e,t),this.syncSync()}async utimes(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.utimes`);this.dirty=!0,this.stats.atime=e,this.stats.mtime=t,await this.sync()}utimesSync(e,t){if(this.closed)throw $.With(`EBADF`,this.path,`File.utimes`);this.dirty=!0,this.stats.atime=e,this.stats.mtime=t,this.syncSync()}async _setType(e){if(this.closed)throw $.With(`EBADF`,this.path,`File._setType`);this.dirty=!0,this.stats.mode=this.stats.mode&~d4|e,await this.sync()}_setTypeSync(e){if(this.closed)throw $.With(`EBADF`,this.path,`File._setType`);this.dirty=!0,this.stats.mode=this.stats.mode&~d4|e,this.syncSync()}async[Symbol.asyncDispose](){await this.close()}[Symbol.dispose](){this.closeSync()}},y3=class{metadata(){return{name:this.constructor.name.toLowerCase(),readonly:!1,totalSpace:0,freeSpace:0,noResizableBuffers:!1,noAsyncCache:this._disableSync??!1,type:525687744115}}constructor(...e){}async ready(){}async exists(e){try{return await this.stat(e),!0}catch(e){return e.code!=`ENOENT`}}existsSync(e){try{return this.statSync(e),!0}catch(e){return e.code!=`ENOENT`}}},b3=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},x3=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),S3=5,C3=class extends y3{async ready(){this._initialized||=(await this.checkRoot(),!0)}constructor(e){super(),this.store=e,this._initialized=!1}metadata(){return{...super.metadata(),name:this.store.name}}async empty(){await this.store.clear(),await this.checkRoot()}emptySync(){this.store.clearSync(),this.checkRootSync()}async rename(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!0),i=P2(e),a=F2(e),o=P2(t),s=F2(t),c=await this.findINode(r,i),l=await this.getDirListing(r,c,i);if(!l[a])throw $.With(`ENOENT`,e,`rename`);let u=l[a];if(delete l[a],(o+`/`).indexOf(e+`/`)===0)throw new $(Q.EBUSY,i);let d,f;if(o===i?(d=c,f=l):(d=await this.findINode(r,o),f=await this.getDirListing(r,d,o)),f[s]){let e=await this.getINode(r,f[s],t);if(!e.toStats().isFile())throw $.With(`EPERM`,t,`rename`);await r.remove(e.ino),await r.remove(f[s])}f[s]=u,await r.set(c.ino,H2(l)),await r.set(d.ino,H2(f)),await r.commit()}catch(e){n.error=e,n.hasError=!0}finally{let e=x3(n);e&&await e}}renameSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!1),i=P2(e),a=F2(e),o=P2(t),s=F2(t),c=this.findINodeSync(r,i),l=this.getDirListingSync(r,c,i);if(!l[a])throw $.With(`ENOENT`,e,`rename`);let u=l[a];if(delete l[a],(o+`/`).indexOf(e+`/`)==0)throw new $(Q.EBUSY,i);let d,f;if(o===i?(d=c,f=l):(d=this.findINodeSync(r,o),f=this.getDirListingSync(r,d,o)),f[s]){let e=this.getINodeSync(r,f[s],t);if(!e.toStats().isFile())throw $.With(`EPERM`,t,`rename`);r.removeSync(e.ino),r.removeSync(f[s])}f[s]=u,r.setSync(c.ino,H2(l)),r.setSync(d.ino,H2(f)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{x3(n)}}async stat(e){let t={stack:[],error:void 0,hasError:!1};try{let n=b3(t,this.store.transaction(),!0),r=await this.findINode(n,e);if(!r)throw $.With(`ENOENT`,e,`stat`);return r.toStats()}catch(e){t.error=e,t.hasError=!0}finally{let e=x3(t);e&&await e}}statSync(e){let t={stack:[],error:void 0,hasError:!1};try{let n=b3(t,this.store.transaction(),!1);return this.findINodeSync(n,e).toStats()}catch(e){t.error=e,t.hasError=!0}finally{x3(t)}}async createFile(e,t,n){let r=await this.commitNew(e,m4,n,new Uint8Array);return new v3(this,e,t,r.toStats(),new Uint8Array)}createFileSync(e,t,n){return this.commitNewSync(e,m4,n),this.openFileSync(e,t)}async openFile(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!0),i=await this.findINode(r,e),a=await r.get(i.ino);if(!a)throw $.With(`ENOENT`,e,`openFile`);return new v3(this,e,t,i.toStats(),a)}catch(e){n.error=e,n.hasError=!0}finally{let e=x3(n);e&&await e}}openFileSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!1),i=this.findINodeSync(r,e),a=r.getSync(i.ino);if(!a)throw $.With(`ENOENT`,e,`openFile`);return new v3(this,e,t,i.toStats(),a)}catch(e){n.error=e,n.hasError=!0}finally{x3(n)}}async unlink(e){return this.remove(e,!1)}unlinkSync(e){this.removeSync(e,!1)}async rmdir(e){if((await this.readdir(e)).length)throw $.With(`ENOTEMPTY`,e,`rmdir`);await this.remove(e,!0)}rmdirSync(e){if(this.readdirSync(e).length)throw $.With(`ENOTEMPTY`,e,`rmdir`);this.removeSync(e,!0)}async mkdir(e,t){await this.commitNew(e,g4,t,z2(`{}`))}mkdirSync(e,t){this.commitNewSync(e,g4,t,z2(`{}`))}async readdir(e){let t={stack:[],error:void 0,hasError:!1};try{let n=b3(t,this.store.transaction(),!0),r=await this.findINode(n,e);return Object.keys(await this.getDirListing(n,r,e))}catch(e){t.error=e,t.hasError=!0}finally{let e=x3(t);e&&await e}}readdirSync(e){let t={stack:[],error:void 0,hasError:!1};try{let n=b3(t,this.store.transaction(),!1),r=this.findINodeSync(n,e);return Object.keys(this.getDirListingSync(n,r,e))}catch(e){t.error=e,t.hasError=!0}finally{x3(t)}}async sync(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=b3(r,this.store.transaction(),!0),a=await this._findINode(i,P2(e),F2(e)),o=await this.getINode(i,a,e),s=o.update(n);await i.set(o.ino,t),s&&await i.set(a,o.data),await i.commit()}catch(e){r.error=e,r.hasError=!0}finally{let e=x3(r);e&&await e}}syncSync(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=b3(r,this.store.transaction(),!1),a=this._findINodeSync(i,P2(e),F2(e)),o=this.getINodeSync(i,a,e),s=o.update(n);i.setSync(o.ino,t),s&&i.setSync(a,o.data),i.commitSync()}catch(e){r.error=e,r.hasError=!0}finally{x3(r)}}async link(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!0),i=P2(t),a=await this.findINode(r,i),o=await this.getDirListing(r,a,i),s=await this._findINode(r,P2(e),F2(e)),c=await this.getINode(r,s,e);c.nlink++,o[F2(t)]=s,r.setSync(s,c.data),r.setSync(a.ino,H2(o)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{let e=x3(n);e&&await e}}linkSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!1),i=P2(t),a=this.findINodeSync(r,i),o=this.getDirListingSync(r,a,i),s=this._findINodeSync(r,P2(e),F2(e)),c=this.getINodeSync(r,s,e);c.nlink++,o[F2(t)]=s,r.setSync(s,c.data),r.setSync(a.ino,H2(o)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{x3(n)}}async checkRoot(){let e={stack:[],error:void 0,hasError:!1};try{let t=b3(e,this.store.transaction(),!0);if(await t.get(0n))return;let n=new t3;n.mode=511|g4,await t.set(n.ino,z2(`{}`)),await t.set(Q4,n.data),await t.commit()}catch(t){e.error=t,e.hasError=!0}finally{let t=x3(e);t&&await t}}checkRootSync(){let e={stack:[],error:void 0,hasError:!1};try{let t=b3(e,this.store.transaction(),!1);if(t.getSync(0n))return;let n=new t3;n.mode=511|g4,t.setSync(n.ino,z2(`{}`)),t.setSync(Q4,n.data),t.commitSync()}catch(t){e.error=t,e.hasError=!0}finally{x3(e)}}async _findINode(e,t,n,r=new Set){let i=N2(t,n);if(r.has(i))throw new $(Q.EIO,`Infinite loop detected while finding inode`,i);if(r.add(i),t==`/`&&n===``)return Q4;let a=t==`/`?await this.getINode(e,Q4,t):await this.findINode(e,t,r),o=await this.getDirListing(e,a,t);if(!(n in o))throw $.With(`ENOENT`,j2(t,n),`_findINode`);return o[n]}_findINodeSync(e,t,n,r=new Set){let i=N2(t,n);if(r.has(i))throw new $(Q.EIO,`Infinite loop detected while finding inode`,i);if(r.add(i),t==`/`&&n===``)return Q4;let a=t==`/`?this.getINodeSync(e,Q4,t):this.findINodeSync(e,t,r),o=this.getDirListingSync(e,a,t);if(!(n in o))throw $.With(`ENOENT`,j2(t,n),`_findINode`);return o[n]}async findINode(e,t,n=new Set){let r=await this._findINode(e,P2(t),F2(t),n);return this.getINode(e,r,t)}findINodeSync(e,t,n=new Set){let r=this._findINodeSync(e,P2(t),F2(t),n);return this.getINodeSync(e,r,t)}async getINode(e,t,n){let r=await e.get(t);if(!r)throw $.With(`ENOENT`,n,`getINode`);return new t3(r.buffer)}getINodeSync(e,t,n){let r=e.getSync(t);if(!r)throw $.With(`ENOENT`,n,`getINode`);return new t3(r.buffer)}async getDirListing(e,t,n){if(!t.toStats().isDirectory())throw $.With(`ENOTDIR`,n,`getDirListing`);let r=await e.get(t.ino);if(!r)throw $.With(`ENOENT`,n,`getDirListing`);return V2(r)}getDirListingSync(e,t,n){if(!t.toStats().isDirectory())throw $.With(`ENOTDIR`,n,`getDirListing`);let r=e.getSync(t.ino);if(!r)throw $.With(`ENOENT`,n,`getDirListing`);return V2(r)}async addNew(e,t,n){for(let n=0;n<S3;n++){let n=e3();if(!await e.get(n))return await e.set(n,t),n}throw new $(Q.ENOSPC,`No inode IDs available`,n,`addNewNode`)}addNewSync(e,t,n){for(let n=0;n<S3;n++){let n=e3();if(!e.getSync(n))return e.setSync(n,t),n}throw new $(Q.ENOSPC,`No inode IDs available`,n,`addNewNode`)}async commitNew(e,t,n,r){let i={stack:[],error:void 0,hasError:!1};try{let a=b3(i,this.store.transaction(),!0),o=P2(e),s=await this.findINode(a,o),c=F2(e),l=await this.getDirListing(a,s,o);if(e===`/`)throw $.With(`EEXIST`,e,`commitNew`);if(l[c])throw await a.abort(),$.With(`EEXIST`,e,`commitNew`);let u=new t3;return u.ino=await this.addNew(a,r,e),u.mode=n|t,u.uid=X2.uid,u.gid=X2.gid,u.size=r.length,l[c]=await this.addNew(a,u.data,e),await a.set(s.ino,H2(l)),await a.commit(),u}catch(e){i.error=e,i.hasError=!0}finally{let e=x3(i);e&&await e}}commitNewSync(e,t,n,r=new Uint8Array){let i={stack:[],error:void 0,hasError:!1};try{let a=b3(i,this.store.transaction(),!1),o=P2(e),s=this.findINodeSync(a,o),c=F2(e),l=this.getDirListingSync(a,s,o);if(e===`/`||l[c])throw $.With(`EEXIST`,e,`commitNew`);let u=new t3;return u.ino=this.addNewSync(a,r,e),u.size=r.length,u.mode=n|t,u.uid=X2.uid,u.gid=X2.gid,l[c]=this.addNewSync(a,u.data,e),a.setSync(s.ino,H2(l)),a.commitSync(),u}catch(e){i.error=e,i.hasError=!0}finally{x3(i)}}async remove(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!0),i=P2(e),a=await this.findINode(r,i),o=await this.getDirListing(r,a,i),s=F2(e);if(!o[s])throw $.With(`ENOENT`,e,`remove`);let c=o[s],l=await this.getINode(r,c,e);if(delete o[s],!t&&l.toStats().isDirectory())throw $.With(`EISDIR`,e,`remove`);if(t&&!l.toStats().isDirectory())throw $.With(`ENOTDIR`,e,`remove`);await r.set(a.ino,H2(o)),--l.nlink<1&&(await r.remove(l.ino),await r.remove(c)),await r.commit()}catch(e){n.error=e,n.hasError=!0}finally{let e=x3(n);e&&await e}}removeSync(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=b3(n,this.store.transaction(),!1),i=P2(e),a=this.findINodeSync(r,i),o=this.getDirListingSync(r,a,i),s=F2(e),c=o[s];if(!c)throw $.With(`ENOENT`,e,`remove`);let l=this.getINodeSync(r,c,e);if(delete o[s],!t&&l.toStats().isDirectory())throw $.With(`EISDIR`,e,`remove`);if(t&&!l.toStats().isDirectory())throw $.With(`ENOTDIR`,e,`remove`);r.setSync(a.ino,H2(o)),--l.nlink<1&&(r.removeSync(l.ino),r.removeSync(c)),r.commitSync()}catch(e){n.error=e,n.hasError=!0}finally{x3(n)}}},w3=class{constructor(e){this.store=e,this.done=!1}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}},T3=class extends w3{async get(e){return this.getSync(e)}async set(e,t){return this.setSync(e,t)}async remove(e){return this.removeSync(e)}async commit(){return this.commitSync()}async abort(){return this.abortSync()}},E3=class extends w3{getSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.getSync`)}setSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.setSync`)}removeSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.removeSync`)}commitSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.commitSync`)}abortSync(){throw $.With(`ENOSYS`,void 0,`AsyncTransaction.abortSync`)}},D3=class extends T3{constructor(){super(...arguments),this.originalData=new Map,this.modifiedKeys=new Set}getSync(e){let t=this.store.get(e);return this.stashOldValue(e,t),t}setSync(e,t){return this.markModified(e),this.store.set(e,t)}removeSync(e){this.markModified(e),this.store.delete(e)}commitSync(){this.done=!0}abortSync(){if(this.done){for(let e of this.modifiedKeys){let t=this.originalData.get(e);t?this.store.set(e,t):this.store.delete(e)}this.done=!0}}stashOldValue(e,t){this.originalData.has(e)||this.originalData.set(e,t)}markModified(e){this.modifiedKeys.add(e),this.originalData.has(e)||this.originalData.set(e,this.store.get(e))}},O3=class extends Map{constructor(e=`tmp`){super(),this.name=e}async sync(){}clearSync(){this.clear()}transaction(){return new D3(this)}};const k3={name:`InMemory`,isAvailable(){return!0},options:{name:{type:`string`,required:!1,description:`The name of the store`}},create({name:e}){let t=new C3(new O3(e));return t.checkRootSync(),t}},A3=new Map;var j3=100;function M3(e){let t=j3++;return A3.set(t,e),t}function N3(e){if(!A3.has(e))throw new $(Q.EBADF);return A3.get(e)}const P3=new Map;F3(`/`,k3.create({name:`root`}));function F3(e,t){if(e[0]!==`/`&&(e=`/`+e),e=j2(e),P3.has(e))throw new $(Q.EINVAL,`Mount point `+e+` is already in use.`);P3.set(e,t)}function I3(e){if(e[0]!==`/`&&(e=`/${e}`),e=j2(e),!P3.has(e))throw new $(Q.EINVAL,`Mount point `+e+` is already unmounted.`);P3.delete(e)}function L3(e){e=G2(e);let t=[...P3].sort((e,t)=>e[0].length>t[0].length?-1:1);for(let[n,r]of t)if(n.length<=e.length&&e.startsWith(n))return e=e.slice(n.length>1?n.length:0),e===``&&(e=`/`),{fs:r,path:e,mountPoint:n};throw new $(Q.EIO,`ZenFS not initialized with a file system`)}function R3(e,t){for(let[n,r]of Object.entries(t))e=e?.replaceAll(n,r);return e}function z3(e,t){return typeof e.stack==`string`&&(e.stack=R3(e.stack,t)),e.message=R3(e.message,t),e}function B3(e){`/`in e&&I3(`/`);for(let[t,n]of Object.entries(e))F3(t,n)}function V3(e,t){let n=e.metadata(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(n.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Z4),files:(t?BigInt:Number)(n.totalNodes||Z4),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}var H3=class extends x4.default{off(e,t,n,r){return super.off(e,t,n,r)}removeListener(e,t,n,r){return super.removeListener(e,t,n,r)}constructor(e){super(),this.path=e}setMaxListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.setMaxListeners`)}getMaxListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.getMaxListeners`)}prependListener(){throw $.With(`ENOSYS`,this.path,`Watcher.prependListener`)}prependOnceListener(){throw $.With(`ENOSYS`,this.path,`Watcher.prependOnceListener`)}rawListeners(){throw $.With(`ENOSYS`,this.path,`Watcher.rawListeners`)}ref(){return this}unref(){return this}},U3=class extends H3{constructor(e,t){super(e),this.options=t,K3(e.toString(),this)}close(){super.emit(`close`),q3(this.path.toString(),this)}[Symbol.dispose](){this.close()}},W3=class extends H3{constructor(e,t){super(e),this.options=t,this.start()}onInterval(){try{let e=$3(this.path);a3(this.previous,e)||(this.emit(`change`,e,this.previous),this.previous=e)}catch(e){this.emit(`error`,e)}}start(){let e=this.options.interval||5e3;try{this.previous=$3(this.path)}catch(e){this.emit(`error`,e);return}this.intervalId=setInterval(this.onInterval.bind(this),e),!this.options.persistent&&typeof this.intervalId==`object`&&this.intervalId.unref()}stop(){this.intervalId&&=(clearInterval(this.intervalId),void 0),this.removeAllListeners()}},G3=new Map;function K3(e,t){let n=G2(e);G3.has(n)||G3.set(n,new Set),G3.get(n).add(t)}function q3(e,t){let n=G2(e);G3.has(n)&&(G3.get(n).delete(t),G3.get(n).size===0&&G3.delete(n))}function J3(e,t){let n=G2(t);if(G3.has(n))for(let r of G3.get(n))r.emit(`change`,e,F2(t));let r=P2(n);for(;r!==n&&r!==`/`;){if(G3.has(r))for(let n of G3.get(r))n.emit(`change`,e,F2(t));n=r,r=P2(r)}}var Y3=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},X3=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r});function Z3(e,t){e=G2(e),t=G2(t);let n=L3(e),r=L3(t);if(!$3(P2(e)).hasAccess(2))throw $.With(`EACCES`,e,`rename`);try{if(n===r){n.fs.renameSync(n.path,r.path),J3(`rename`,e.toString());return}c6(t,s6(e)),n6(e),J3(`rename`,e.toString())}catch(i){throw z3(i,{[n.path]:e,[r.path]:t})}}function Q3(e){e=G2(e);try{let{fs:t,path:n}=L3(M6(e));return t.existsSync(n)}catch(e){if(e.errno==Q.ENOENT)return!1;throw e}}function $3(e,t){e=G2(e);let{fs:n,path:r}=L3(Q3(e)?M6(e):e);try{let i=n.statSync(r);if(!i.hasAccess(4))throw $.With(`EACCES`,e,`stat`);return t?.bigint?new i3(i):i}catch(t){throw z3(t,{[r]:e})}}function e6(e,t){e=G2(e);let{fs:n,path:r}=L3(e);try{let e=n.statSync(r);return t?.bigint?new i3(e):e}catch(t){throw z3(t,{[r]:e})}}function t6(e,t=0){let n={stack:[],error:void 0,hasError:!1};try{let r=Y3(n,r6(e,`r+`),!1);if(t||=0,t<0)throw new $(Q.EINVAL);r.truncateSync(t)}catch(e){n.error=e,n.hasError=!0}finally{X3(n)}}function n6(e){e=G2(e);let{fs:t,path:n}=L3(e);try{if(!t.statSync(n).hasAccess(2))throw $.With(`EACCES`,n,`unlink`);t.unlinkSync(n),J3(`rename`,e.toString())}catch(t){throw z3(t,{[n]:e})}}function r6(e,t,n,r=!0){e=G2(e);let i=U2(n,420),a=l3(t);e=r&&Q3(e)?M6(e):e;let{fs:o,path:s}=L3(e);if(!o.existsSync(s)){if(!p3(a)&&!h3(a)||a==`r+`)throw $.With(`ENOENT`,e,`_open`);let t=o.statSync(P2(s));if(!t.hasAccess(2))throw $.With(`EACCES`,P2(e),`_open`);if(!t.isDirectory())throw $.With(`ENOTDIR`,P2(e),`_open`);return o.createFileSync(s,a,i)}let c=o.statSync(s);if(!c.hasAccess(i)||!c.hasAccess(d3(a)))throw $.With(`EACCES`,e,`_open`);if(g3(a))throw $.With(`EEXIST`,e,`_open`);let l=o.openFileSync(s,a);return m3(a)&&(l.truncateSync(0),l.syncSync()),l}function i6(e,t,n=0){return M3(r6(e,t,n,!0))}function a6(e,t,n){return M3(r6(e,t,n,!1))}function o6(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=Y3(r,r6(e,t,420,n),!1),a=i.statSync(),o=new Uint8Array(a.size);return i.readSync(o,0,a.size,0),o}catch(e){r.error=e,r.hasError=!0}finally{X3(r)}}function s6(e,t={}){let n=K2(t,null,`r`,420);if(!f3(l3(n.flag)))throw new $(Q.EINVAL,`Flag passed to readFile must allow for reading.`);let r=e4.Buffer.from(o6(typeof e==`number`?N3(e).path:e.toString(),n.flag,!0));return n.encoding?r.toString(n.encoding):r}function c6(e,t,n={}){let r={stack:[],error:void 0,hasError:!1};try{let i=K2(n,`utf8`,`w+`,420),a=l3(i.flag);if(!p3(a))throw new $(Q.EINVAL,`Flag passed to writeFile must allow for writing.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let o=typeof t==`string`?e4.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new $(Q.EINVAL,`Data not specified`);Y3(r,r6(typeof e==`number`?N3(e).path:e.toString(),a,i.mode,!0),!1).writeSync(o,0,o.byteLength,0),J3(`change`,e.toString())}catch(e){r.error=e,r.hasError=!0}finally{X3(r)}}function l6(e,t,n={}){let r={stack:[],error:void 0,hasError:!1};try{let i=K2(n,`utf8`,`a`,420),a=l3(i.flag);if(!h3(a))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let o=typeof t==`string`?e4.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Y3(r,r6(typeof e==`number`?N3(e).path:e.toString(),a,i.mode,!0),!1).writeSync(o,0,o.byteLength)}catch(e){r.error=e,r.hasError=!0}finally{X3(r)}}function u6(e,t){let n=N3(e).statSync();return t?.bigint?new i3(n):n}function d6(e){N3(e).closeSync(),A3.delete(e)}function f6(e,t=0){if(t||=0,t<0)throw new $(Q.EINVAL);N3(e).truncateSync(t)}function p6(e){N3(e).syncSync()}function m6(e){N3(e).datasyncSync()}function h6(e,t,n,r,i){let a,o,s,c;if(typeof t==`string`){c=typeof n==`number`?n:null;let e=typeof r==`string`?r:`utf8`;o=0,a=e4.Buffer.from(t,e),s=a.byteLength}else a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,c=typeof i==`number`?i:null;let l=N3(e);c??=l.position;let u=l.writeSync(a,o,s,c);return J3(`change`,l.path),u}function g6(e,t,n,r,i){let a=N3(e),o=typeof n==`object`?n.offset:n;return typeof n==`object`&&(r=n.length,i=n.position),i=Number(i),isNaN(i)&&(i=a.position),a.readSync(t,o,r,i)}function _6(e,t,n){N3(e).chownSync(t,n)}function v6(e,t){let n=U2(t,-1);if(n<0)throw new $(Q.EINVAL,`Invalid mode.`);N3(e).chmodSync(n)}function y6(e,t,n){N3(e).utimesSync(W2(t),W2(n))}function b6(e){e=G2(e);let{fs:t,path:n}=L3(Q3(e)?M6(e):e);try{if(!t.statSync(n).hasAccess(2))throw $.With(`EACCES`,n,`rmdir`);t.rmdirSync(n),J3(`rename`,e.toString())}catch(t){throw z3(t,{[n]:e})}}function x6(e,t){t=typeof t==`object`?t:{mode:t};let n=U2(t?.mode,511);e=G2(e),e=Q3(e)?M6(e):e;let{fs:r,path:i}=L3(e),a={[i]:e};try{if(!t?.recursive){if(!r.statSync(P2(i)).hasAccess(2))throw $.With(`EACCES`,P2(i),`mkdir`);return r.mkdirSync(i,n)}let o=[];for(let t=i,n=e;!r.existsSync(t);t=P2(t),n=P2(n))o.unshift(t),a[t]=n;for(let e of o){if(!r.statSync(P2(e)).hasAccess(2))throw $.With(`EACCES`,P2(e),`mkdir`);r.mkdirSync(e,n),J3(`rename`,e)}return o[0]}catch(e){throw z3(e,a)}}function S6(e,t){e=G2(e);let{fs:n,path:r}=L3(Q3(e)?M6(e):e),i;if(!$3(e).hasAccess(4))throw $.With(`EACCES`,e,`readdir`);try{i=n.readdirSync(r)}catch(t){throw z3(t,{[r]:e})}for(let t of P3.keys()){if(!t.startsWith(e))continue;let n=t.slice(e.length);n.includes(`/`)||n.length==0||i.push(n)}return i.map(n=>typeof t==`object`&&t?.withFileTypes?new H6(n,$3(N2(e.toString(),n))):t==`buffer`||typeof t==`object`&&t?.encoding==`buffer`?e4.Buffer.from(n):n)}function C6(e,t){if(e=G2(e),!$3(P2(e)).hasAccess(4))throw $.With(`EACCES`,P2(e),`link`);if(t=G2(t),!$3(P2(t)).hasAccess(2))throw $.With(`EACCES`,P2(t),`link`);let{fs:n,path:r}=L3(e),i=L3(t);if(n!=i.fs)throw $.With(`EXDEV`,t,`link`);try{if(!n.statSync(r).hasAccess(2))throw $.With(`EACCES`,r,`link`);return n.linkSync(r,t)}catch(n){throw z3(n,{[r]:e,[i.path]:t})}}function w6(e,t,n=`file`){if(![`file`,`dir`,`junction`].includes(n))throw new $(Q.EINVAL,`Invalid type: `+n);if(Q3(t))throw $.With(`EEXIST`,t.toString(),`symlink`);c6(t,e.toString()),r6(t,`r+`,420,!1)._setTypeSync(p4)}function T6(e,t){let n=e4.Buffer.from(o6(e.toString(),`r`,!1)),r=typeof t==`object`?t?.encoding:t;return r==`buffer`?n:n.toString(r)}function E6(e,t,n){let r=i6(e,`r+`);_6(r,t,n),d6(r)}function D6(e,t,n){let r=a6(e,`r+`);_6(r,t,n),d6(r)}function O6(e,t){let n=i6(e,`r+`);v6(n,t),d6(n)}function k6(e,t){let n=a6(e,`r+`);v6(n,t),d6(n)}function A6(e,t,n){let r=i6(e,`r+`);y6(r,t,n),d6(r)}function j6(e,t,n){let r=a6(e,`r+`);y6(r,t,n),d6(r)}function M6(e,t){e=G2(e);let{base:n,dir:r}=I2(e),i=N2(r==`/`?`/`:M6(r),n),{fs:a,path:o,mountPoint:s}=L3(i);try{return a.statSync(o).isSymbolicLink()?M6(s+T6(i,t).toString()):i}catch(e){throw z3(e,{[o]:i})}}function N6(e,t=384){if(!$3(e).hasAccess(t))throw new $(Q.EACCES)}function P6(e,t){switch(e=G2(e),$3(e).mode&d4){case g4:if(t?.recursive)for(let n of S6(e))P6(N2(e,n),t);b6(e);return;case m4:case p4:n6(e);return;case h4:case _4:case v4:case f4:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}}function F6(e,t){let n=typeof t==`object`?t?.encoding:t||`utf8`,r=`/tmp/${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return x6(r),n==`buffer`?e4.Buffer.from(r):r}function I6(e,t,n){if(e=G2(e),t=G2(t),n&&n&1&&Q3(t))throw new $(Q.EEXIST,`Destination file already exists.`,t,`copyFile`);c6(t,s6(e)),J3(`rename`,t.toString())}function L6(e,t,n){let r=N3(e),i=0;for(let e of t)i+=r.readSync(e,0,e.byteLength,n+i);return i}function R6(e,t,n){let r=N3(e),i=0;for(let e of t)i+=r.writeSync(new Uint8Array(e.buffer),0,e.byteLength,n+i);return i}function z6(e,t){return e=G2(e),new U6(e)}function B6(e,t,n){e=G2(e),t=G2(t);let r=e6(e);if(n?.errorOnExist&&Q3(t))throw new $(Q.EEXIST,`Destination file or directory already exists.`,t,`cp`);switch(r.mode&d4){case g4:if(!n?.recursive)throw new $(Q.EISDIR,e+` is a directory (not copied)`,e,`cp`);x6(t,{recursive:!0});for(let r of S6(e,{withFileTypes:!0}))n.filter&&!n.filter(N2(e,r.name),N2(t,r.name))||B6(N2(e,r.name),N2(t,r.name),n);break;case m4:case p4:I6(e,t);break;case h4:case _4:case v4:case f4:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}n?.preserveTimestamps&&A6(t,r.atime,r.mtime)}function V6(e,t){e=G2(e);let{fs:n}=L3(e);return V3(n,t?.bigint)}var H6=class{get name(){return F2(this.path)}constructor(e,t){this.path=e,this.stats=t}get parentPath(){return this.path}isFile(){return this.stats.isFile()}isDirectory(){return this.stats.isDirectory()}isBlockDevice(){return this.stats.isBlockDevice()}isCharacterDevice(){return this.stats.isCharacterDevice()}isSymbolicLink(){return this.stats.isSymbolicLink()}isFIFO(){return this.stats.isFIFO()}isSocket(){return this.stats.isSocket()}},U6=class{checkClosed(){if(this.closed)throw new $(Q.EBADF,`Can not use closed Dir`)}constructor(e){this.path=e,this.closed=!1}close(e){if(this.closed=!0,!e)return Promise.resolve();e()}closeSync(){this.closed=!0}async _read(){return this.checkClosed(),this._entries??=await B8(this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}read(e){if(!e)return this._read();this._read().then(t=>e(void 0,t))}readSync(){return this.checkClosed(),this._entries??=S6(this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}async next(){let e=await this._read();return e?{done:!1,value:e}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}},W6=n(((e,t)=>{t.exports={AggregateError:class extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t=``;for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name=`AggregateError`,this.errors=e}},ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:2**53-1,NumberMIN_SAFE_INTEGER:-(2**53-1),NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol(`Symbol.dispose`),SymbolAsyncDispose:Symbol.asyncDispose||Symbol(`Symbol.asyncDispose`),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array}})),G6=n(((e,t)=>{t.exports={format(e,...t){return e.replace(/%([sdifj])/g,function(...[e,n]){let r=t.shift();return n===`f`?r.toFixed(6):n===`j`?JSON.stringify(r):n===`s`&&typeof r==`object`?`${r.constructor===Object?``:r.constructor.name} {}`.trim():r.toString()})},inspect(e){switch(typeof e){case`string`:if(e.includes(`'`))if(e.includes(`"`)){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case`number`:return isNaN(e)?`NaN`:Object.is(e,-0)?String(e):e;case`bigint`:return`${String(e)}n`;case`boolean`:case`undefined`:return String(e);case`object`:return`{}`}}}})),K6=n(((e,t)=>{var{format:n,inspect:r}=G6(),{AggregateError:i}=W6(),a=globalThis.AggregateError||i,o=Symbol(`kIsNodeError`),s=[`string`,`function`,`number`,`object`,`Function`,`Object`,`boolean`,`bigint`,`symbol`],c=/^([A-Z][a-z0-9]*)+$/,l=`__node_internal_`,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function f(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function p(e,t,r){if(typeof t==`function`)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),r.length===0?t:n(t,...r)}function m(e,t,n){n||=Error;class r extends n{constructor(...n){super(p(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[o]=!0,u[e]=r}function h(e){let t=l+e.name;return Object.defineProperty(e,`name`,{value:t}),e}function g(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let n=new a([t,e],t.message);return n.code=t.code,n}return e||t}var _=class extends Error{constructor(e=`The operation was aborted`,t=void 0){if(t!==void 0&&typeof t!=`object`)throw new u.ERR_INVALID_ARG_TYPE(`options`,`Object`,t);super(e,t),this.code=`ABORT_ERR`,this.name=`AbortError`}};m(`ERR_ASSERTION`,`%s`,Error),m(`ERR_INVALID_ARG_TYPE`,(e,t,n)=>{d(typeof e==`string`,`'name' must be a string`),Array.isArray(t)||(t=[t]);let i=`The `;e.endsWith(` argument`)?i+=`${e} `:i+=`"${e}" ${e.includes(`.`)?`property`:`argument`} `,i+=`must be `;let a=[],o=[],l=[];for(let e of t)d(typeof e==`string`,`All expected entries have to be of type string`),s.includes(e)?a.push(e.toLowerCase()):c.test(e)?o.push(e):(d(e!==`object`,`The value "object" should be written as "Object"`),l.push(e));if(o.length>0){let e=a.indexOf(`object`);e!==-1&&(a.splice(a,e,1),o.push(`Object`))}if(a.length>0){switch(a.length){case 1:i+=`of type ${a[0]}`;break;case 2:i+=`one of type ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();i+=`one of type ${a.join(`, `)}, or ${e}`}}(o.length>0||l.length>0)&&(i+=` or `)}if(o.length>0){switch(o.length){case 1:i+=`an instance of ${o[0]}`;break;case 2:i+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();i+=`an instance of ${o.join(`, `)}, or ${e}`}}l.length>0&&(i+=` or `)}switch(l.length){case 0:break;case 1:l[0].toLowerCase()!==l[0]&&(i+=`an `),i+=`${l[0]}`;break;case 2:i+=`one of ${l[0]} or ${l[1]}`;break;default:{let e=l.pop();i+=`one of ${l.join(`, `)}, or ${e}`}}if(n==null)i+=`. Received ${n}`;else if(typeof n==`function`&&n.name)i+=`. Received function ${n.name}`;else if(typeof n==`object`){var u;if((u=n.constructor)!=null&&u.name)i+=`. Received an instance of ${n.constructor.name}`;else{let e=r(n,{depth:-1});i+=`. Received ${e}`}}else{let e=r(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),i+=`. Received type ${typeof n} (${e})`}return i},TypeError),m(`ERR_INVALID_ARG_VALUE`,(e,t,n=`is invalid`)=>{let i=r(t);return i.length>128&&(i=i.slice(0,128)+`...`),`The ${e.includes(`.`)?`property`:`argument`} '${e}' ${n}. Received ${i}`},TypeError),m(`ERR_INVALID_RETURN_VALUE`,(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${n!=null&&(r=n.constructor)!=null&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`}.`},TypeError),m(`ERR_MISSING_ARGS`,(...e)=>{d(e.length>0,`At least one arg needs to be specified`);let t,n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(` or `),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let n=e.pop();t+=`The ${e.join(`, `)}, and ${n} arguments`}break}return`${t} must be specified`},TypeError),m(`ERR_OUT_OF_RANGE`,(e,t,n)=>{d(t,`Missing "range" argument`);let i;if(Number.isInteger(n)&&Math.abs(n)>2**32)i=f(String(n));else if(typeof n==`bigint`){i=String(n);let e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(i=f(i)),i+=`n`}else i=r(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${i}`},RangeError),m(`ERR_MULTIPLE_CALLBACK`,`Callback called multiple times`,Error),m(`ERR_METHOD_NOT_IMPLEMENTED`,`The %s method is not implemented`,Error),m(`ERR_STREAM_ALREADY_FINISHED`,`Cannot call %s after a stream was finished`,Error),m(`ERR_STREAM_CANNOT_PIPE`,`Cannot pipe, not readable`,Error),m(`ERR_STREAM_DESTROYED`,`Cannot call %s after a stream was destroyed`,Error),m(`ERR_STREAM_NULL_VALUES`,`May not write null values to stream`,TypeError),m(`ERR_STREAM_PREMATURE_CLOSE`,`Premature close`,Error),m(`ERR_STREAM_PUSH_AFTER_EOF`,`stream.push() after EOF`,Error),m(`ERR_STREAM_UNSHIFT_AFTER_END_EVENT`,`stream.unshift() after end event`,Error),m(`ERR_STREAM_WRITE_AFTER_END`,`write after end`,Error),m(`ERR_UNKNOWN_ENCODING`,`Unknown encoding: %s`,TypeError),t.exports={AbortError:_,aggregateTwoErrors:h(g),hideStackFrames:h,codes:u}})),q6=n(((e,t)=>{var{AbortController:n,AbortSignal:r}=typeof self<`u`?self:typeof window<`u`?window:void 0;t.exports=n,t.exports.AbortSignal=r,t.exports.default=n})),J6=n(((e,t)=>{var n=typeof Reflect==`object`?Reflect:null,r=n&&typeof n.apply==`function`?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=n&&typeof n.ownKeys==`function`?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};function a(e){console&&console.warn&&console.warn(e)}var o=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}t.exports=s,t.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(e){if(typeof e!=`function`)throw TypeError(`The "listener" argument must be of type Function. Received type `+typeof e)}Object.defineProperty(s,`defaultMaxListeners`,{enumerable:!0,get:function(){return c},set:function(e){if(typeof e!=`number`||e<0||o(e))throw RangeError(`The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received `+e+`.`);c=e}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if(typeof e!=`number`||e<0||o(e))throw RangeError(`The value of "n" is out of range. It must be a non-negative number. Received `+e+`.`);return this._maxListeners=e,this};function u(e){return e._maxListeners===void 0?s.defaultMaxListeners:e._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e===`error`,a=this._events;if(a!==void 0)i&&=a.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=Error(`Unhandled error.`+(o?` (`+o.message+`)`:``));throw s.context=o,s}var c=a[e];if(c===void 0)return!1;if(typeof c==`function`)r(c,this,t);else for(var l=c.length,u=g(c,l),n=0;n<l;++n)r(u[n],this,t);return!0};function d(e,t,n,r){var i,o,s;if(l(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit(`newListener`,t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s==`function`?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=u(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=Error(`Possible EventEmitter memory leak detected. `+s.length+` `+String(t)+` listeners added. Use emitter.setMaxListeners() to increase limit`);c.name=`MaxListenersExceededWarning`,c.emitter=e,c.type=t,c.count=s.length,a(c)}return e}s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}s.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(l(t),r=this._events,r===void 0||(n=r[e],n===void 0))return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(`removeListener`,e,n.listener||t));else if(typeof n!=`function`){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():_(n,i),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit(`removeListener`,e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n=this._events,r;if(n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),a;for(r=0;r<i.length;++r)a=i[r],a!==`removeListener`&&this.removeAllListeners(a);return this.removeAllListeners(`removeListener`),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t==`function`)this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function m(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i==`function`?n?[i.listener||i]:[i]:n?v(i):g(i,i.length)}s.prototype.listeners=function(e){return m(this,e,!0)},s.prototype.rawListeners=function(e){return m(this,e,!1)},s.listenerCount=function(e,t){return typeof e.listenerCount==`function`?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h;function h(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n==`function`)return 1;if(n!==void 0)return n.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function g(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function _(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function y(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){typeof e.removeListener==`function`&&e.removeListener(`error`,i),n([].slice.call(arguments))}x(e,t,a,{once:!0}),t!==`error`&&b(e,i,{once:!0})})}function b(e,t,n){typeof e.on==`function`&&x(e,`error`,t,n)}function x(e,t,n,r){if(typeof e.on==`function`)r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener==`function`)e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw TypeError(`The "emitter" argument must be of type EventEmitter. Received type `+typeof e)}})),Y6=n(((e,t)=>{var n=$2(),{format:r,inspect:i}=G6(),{codes:{ERR_INVALID_ARG_TYPE:a}}=K6(),{kResistStopPropagation:o,AggregateError:s,SymbolDispose:c}=W6(),l=globalThis.AbortSignal||q6().AbortSignal,u=globalThis.AbortController||q6().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||n.Blob,p=f===void 0?function(e){return!1}:function(e){return e instanceof f},m=(e,t)=>{if(e!==void 0&&(typeof e!=`object`||!e||!(`aborted`in e)))throw new a(t,`AbortSignal`,e)},h=(e,t)=>{if(typeof e!=`function`)throw new a(t,`Function`,e)};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify(e){return new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))})},debuglog(){return function(){}},format:r,inspect:i,types:{isAsyncFunction(e){return e instanceof d},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:p,deprecate(e,t){return e},addAbortListener:J6().addAbortListener||function(e,t){if(e===void 0)throw new a(`signal`,`AbortSignal`,e);m(e,`signal`),h(t,`listener`);let n;return e.aborted?queueMicrotask(()=>t()):(e.addEventListener(`abort`,t,{__proto__:null,once:!0,[o]:!0}),n=()=>{e.removeEventListener(`abort`,t)}),{__proto__:null,[c](){var e;(e=n)==null||e()}}},AbortSignalAny:l.any||function(e){if(e.length===1)return e[0];let t=new u,n=()=>t.abort();return e.forEach(e=>{m(e,`signals`),e.addEventListener(`abort`,n,{once:!0})}),t.signal.addEventListener(`abort`,()=>{e.forEach(e=>e.removeEventListener(`abort`,n))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for(`nodejs.util.promisify.custom`)})),X6=n(((e,t)=>{var{ArrayIsArray:n,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:o,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:l,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:h}=W6(),{hideStackFrames:g,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:x}}=K6(),{normalizeEncoding:S}=Y6(),{isAsyncFunction:C,isArrayBufferView:w}=Y6().types,T={};function E(e){return e===(e|0)}function D(e){return e===e>>>0}var O=/^[0-7]+$/,k=`must be a 32-bit unsigned integer or an octal string`;function A(e,t,n){if(e===void 0&&(e=n),typeof e==`string`){if(f(O,e)===null)throw new y(t,e,k);e=u(e,8)}return N(e,t),e}var j=g((e,t,n=l,r=c)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);if(e<n||e>r)throw new b(t,`>= ${n} && <= ${r}`,e)}),M=g((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);if(e<n||e>r)throw new b(t,`>= ${n} && <= ${r}`,e)}),N=g((e,t,n=!1)=>{if(typeof e!=`number`)throw new v(t,`number`,e);if(!o(e))throw new b(t,`an integer`,e);let r=n?1:0,i=4294967295;if(e<r||e>i)throw new b(t,`>= ${r} && <= ${i}`,e)});function P(e,t){if(typeof e!=`string`)throw new v(t,`string`,e)}function ee(e,t,n=void 0,r){if(typeof e!=`number`)throw new v(t,`number`,e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&s(e))throw new b(t,`${n==null?``:`>= ${n}`}${n!=null&&r!=null?` && `:``}${r==null?``:`<= ${r}`}`,e)}var te=g((e,t,n)=>{if(!r(n,e))throw new y(t,e,`must be one of: `+i(a(n,e=>typeof e==`string`?`'${e}'`:p(e)),`, `))});function F(e,t){if(typeof e!=`boolean`)throw new v(t,`boolean`,e)}function I(e,t,n){return e==null||!d(e,t)?n:e[t]}var ne=g((e,t,r=null)=>{let i=I(r,`allowArray`,!1),a=I(r,`allowFunction`,!1);if(!I(r,`nullable`,!1)&&e===null||!i&&n(e)||typeof e!=`object`&&(!a||typeof e!=`function`))throw new v(t,`Object`,e)}),re=g((e,t)=>{if(e!=null&&typeof e!=`object`&&typeof e!=`function`)throw new v(t,`a dictionary`,e)}),ie=g((e,t,r=0)=>{if(!n(e))throw new v(t,`Array`,e);if(e.length<r)throw new y(t,e,`must be longer than ${r}`)});function ae(e,t){ie(e,t);for(let n=0;n<e.length;n++)P(e[n],`${t}[${n}]`)}function oe(e,t){ie(e,t);for(let n=0;n<e.length;n++)F(e[n],`${t}[${n}]`)}function se(e,t){ie(e,t);for(let n=0;n<e.length;n++){let r=e[n],i=`${t}[${n}]`;if(r==null)throw new v(i,`AbortSignal`,r);fe(r,i)}}function ce(e,t=`signal`){if(P(e,t),T[e]===void 0)throw T[m(e)]===void 0?new x(e):new x(e+` (signals must use all capital letters)`)}var le=g((e,t=`buffer`)=>{if(!w(e))throw new v(t,[`Buffer`,`TypedArray`,`DataView`],e)});function ue(e,t){let n=S(t),r=e.length;if(n===`hex`&&r%2!=0)throw new y(`encoding`,t,`is invalid for data of length ${r}`)}function de(e,t=`Port`,n=!0){if(typeof e!=`number`&&typeof e!=`string`||typeof e==`string`&&h(e).length===0||+e!=e>>>0||e>65535||e===0&&!n)throw new _(t,e,n);return e|0}var fe=g((e,t)=>{if(e!==void 0&&(typeof e!=`object`||!e||!(`aborted`in e)))throw new v(t,`AbortSignal`,e)}),pe=g((e,t)=>{if(typeof e!=`function`)throw new v(t,`Function`,e)}),me=g((e,t)=>{if(typeof e!=`function`||C(e))throw new v(t,`Function`,e)}),he=g((e,t)=>{if(e!==void 0)throw new v(t,`undefined`,e)});function ge(e,t,n){if(!r(n,e))throw new v(t,`('${i(n,`|`)}')`,e)}var L=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function _e(e,t){if(e===void 0||!f(L,e))throw new y(t,e,`must be an array or string of format "</styles.css>; rel=preload; as=style"`)}function ve(e){if(typeof e==`string`)return _e(e,`hints`),e;if(n(e)){let t=e.length,n=``;if(t===0)return n;for(let r=0;r<t;r++){let i=e[r];_e(i,`hints`),n+=i,r!==t-1&&(n+=`, `)}return n}throw new y(`hints`,e,`must be an array or string of format "</styles.css>; rel=preload; as=style"`)}t.exports={isInt32:E,isUint32:D,parseFileMode:A,validateArray:ie,validateStringArray:ae,validateBooleanArray:oe,validateAbortSignalArray:se,validateBoolean:F,validateBuffer:le,validateDictionary:re,validateEncoding:ue,validateFunction:pe,validateInt32:M,validateInteger:j,validateNumber:ee,validateObject:ne,validateOneOf:te,validatePlainFunction:me,validatePort:de,validateSignalName:ce,validateString:P,validateUint32:N,validateUndefined:he,validateUnion:ge,validateAbortSignal:fe,validateLinkHeaderValue:ve}})),Z6=n(((e,t)=>{var n=t.exports={},r,i;function a(){throw Error(`setTimeout has not been defined`)}function o(){throw Error(`clearTimeout has not been defined`)}(function(){try{r=typeof setTimeout==`function`?setTimeout:a}catch{r=a}try{i=typeof clearTimeout==`function`?clearTimeout:o}catch{i=o}})();function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch{try{return r.call(null,e,0)}catch{return r.call(this,e,0)}}}function c(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch{try{return i.call(null,e)}catch{return i.call(this,e)}}}var l=[],u=!1,d,f=-1;function p(){!u||!d||(u=!1,d.length?l=d.concat(l):f=-1,l.length&&m())}function m(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(d=l,l=[];++f<t;)d&&d[f].run();f=-1,t=l.length}d=null,u=!1,c(e)}}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),l.length===1&&!u&&s(m)};function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)},n.title=`browser`,n.browser=!0,n.env={},n.argv=[],n.version=``,n.versions={};function g(){}n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw Error(`process.binding is not supported`)},n.cwd=function(){return`/`},n.chdir=function(e){throw Error(`process.chdir is not supported`)},n.umask=function(){return 0}})),Q6=n(((e,t)=>{var{SymbolAsyncIterator:n,SymbolIterator:r,SymbolFor:i}=W6(),a=i(`nodejs.stream.destroyed`),o=i(`nodejs.stream.errored`),s=i(`nodejs.stream.readable`),c=i(`nodejs.stream.writable`),l=i(`nodejs.stream.disturbed`),u=i(`nodejs.webstream.isClosedPromise`),d=i(`nodejs.webstream.controllerErrorFunction`);function f(e,t=!1){return!!(e&&typeof e.pipe==`function`&&typeof e.on==`function`&&(!t||typeof e.pause==`function`&&typeof e.resume==`function`)&&(!e._writableState||e._readableState?.readable!==!1)&&(!e._writableState||e._readableState))}function p(e){return!!(e&&typeof e.write==`function`&&typeof e.on==`function`&&(!e._readableState||e._writableState?.writable!==!1))}function m(e){return!!(e&&typeof e.pipe==`function`&&e._readableState&&typeof e.on==`function`&&typeof e.write==`function`)}function h(e){return e&&(e._readableState||e._writableState||typeof e.write==`function`&&typeof e.on==`function`||typeof e.pipe==`function`&&typeof e.on==`function`)}function g(e){return!!(e&&!h(e)&&typeof e.pipeThrough==`function`&&typeof e.getReader==`function`&&typeof e.cancel==`function`)}function _(e){return!!(e&&!h(e)&&typeof e.getWriter==`function`&&typeof e.abort==`function`)}function v(e){return!!(e&&!h(e)&&typeof e.readable==`object`&&typeof e.writable==`object`)}function y(e){return g(e)||_(e)||v(e)}function b(e,t){return e==null?!1:t===!0?typeof e[n]==`function`:t===!1?typeof e[r]==`function`:typeof e[n]==`function`||typeof e[r]==`function`}function x(e){if(!h(e))return null;let t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[a]||r!=null&&r.destroyed)}function S(e){if(!p(e))return null;if(e.writableEnded===!0)return!0;let t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended==`boolean`?t.ended:null}function C(e,t){if(!p(e))return null;if(e.writableFinished===!0)return!0;let n=e._writableState;return n!=null&&n.errored?!1:typeof n?.finished==`boolean`?!!(n.finished||t===!1&&n.ended===!0&&n.length===0):null}function w(e){if(!f(e))return null;if(e.readableEnded===!0)return!0;let t=e._readableState;return!t||t.errored?!1:typeof t?.ended==`boolean`?t.ended:null}function T(e,t){if(!f(e))return null;let n=e._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted==`boolean`?!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0):null}function E(e){return e&&e[s]!=null?e[s]:typeof e?.readable==`boolean`?x(e)?!1:f(e)&&e.readable&&!T(e):null}function D(e){return e&&e[c]!=null?e[c]:typeof e?.writable==`boolean`?x(e)?!1:p(e)&&e.writable&&!S(e):null}function O(e,t){return h(e)?x(e)?!0:!(t?.readable!==!1&&E(e)||t?.writable!==!1&&D(e)):null}function k(e){return h(e)?e.writableErrored?e.writableErrored:e._writableState?.errored??null:null}function A(e){return h(e)?e.readableErrored?e.readableErrored:e._readableState?.errored??null:null}function j(e){if(!h(e))return null;if(typeof e.closed==`boolean`)return e.closed;let t=e._writableState,n=e._readableState;return typeof t?.closed==`boolean`||typeof n?.closed==`boolean`?t?.closed||n?.closed:typeof e._closed==`boolean`&&M(e)?e._closed:null}function M(e){return typeof e._closed==`boolean`&&typeof e._defaultKeepAlive==`boolean`&&typeof e._removedConnection==`boolean`&&typeof e._removedContLen==`boolean`}function N(e){return typeof e._sent100==`boolean`&&M(e)}function P(e){return typeof e._consuming==`boolean`&&typeof e._dumped==`boolean`&&e.req?.upgradeOrConnect===void 0}function ee(e){if(!h(e))return null;let t=e._writableState,n=e._readableState,r=t||n;return!r&&N(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function te(e){return!!(e&&(e[l]??(e.readableDidRead||e.readableAborted)))}function F(e){return!!(e&&(e[o]??e.readableErrored??e.writableErrored??e._readableState?.errorEmitted??e._writableState?.errorEmitted??e._readableState?.errored??e._writableState?.errored))}t.exports={isDestroyed:x,kIsDestroyed:a,isDisturbed:te,kIsDisturbed:l,isErrored:F,kIsErrored:o,isReadable:E,kIsReadable:s,kIsClosedPromise:u,kControllerErrorFunction:d,kIsWritable:c,isClosed:j,isDuplexNodeStream:m,isFinished:O,isIterable:b,isReadableNodeStream:f,isReadableStream:g,isReadableEnded:w,isReadableFinished:T,isReadableErrored:A,isNodeStream:h,isWebStream:y,isWritable:D,isWritableNodeStream:p,isWritableStream:_,isWritableEnded:S,isWritableFinished:C,isWritableErrored:k,isServerRequest:P,isServerResponse:N,willEmitClose:ee,isTransformStream:v}})),$6=n(((e,t)=>{var n=Z6(),{AbortError:r,codes:i}=K6(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:o}=i,{kEmptyObject:s,once:c}=Y6(),{validateAbortSignal:l,validateFunction:u,validateObject:d,validateBoolean:f}=X6(),{Promise:p,PromisePrototypeThen:m,SymbolDispose:h}=W6(),{isClosed:g,isReadable:_,isReadableNodeStream:v,isReadableStream:y,isReadableFinished:b,isReadableErrored:x,isWritable:S,isWritableNodeStream:C,isWritableStream:w,isWritableFinished:T,isWritableErrored:E,isNodeStream:D,willEmitClose:O,kIsClosedPromise:k}=Q6(),A;function j(e){return e.setHeader&&typeof e.abort==`function`}var M=()=>{};function N(e,t,i){if(arguments.length===2?(i=t,t=s):t==null?t=s:d(t,`options`),u(i,`callback`),l(t.signal,`options.signal`),i=c(i),y(e)||w(e))return P(e,t,i);if(!D(e))throw new a(`stream`,[`ReadableStream`,`WritableStream`,`Stream`],e);let f=t.readable??v(e),p=t.writable??C(e),m=e._writableState,k=e._readableState,N=()=>{e.writable||F()},ee=O(e)&&v(e)===f&&C(e)===p,te=T(e,!1),F=()=>{te=!0,e.destroyed&&(ee=!1),!(ee&&(!e.readable||f))&&(!f||I)&&i.call(e)},I=b(e,!1),ne=()=>{I=!0,e.destroyed&&(ee=!1),!(ee&&(!e.writable||p))&&(!p||te)&&i.call(e)},re=t=>{i.call(e,t)},ie=g(e),ae=()=>{ie=!0;let t=E(e)||x(e);if(t&&typeof t!=`boolean`)return i.call(e,t);if(f&&!I&&v(e,!0)&&!b(e,!1)||p&&!te&&!T(e,!1))return i.call(e,new o);i.call(e)},oe=()=>{ie=!0;let t=E(e)||x(e);if(t&&typeof t!=`boolean`)return i.call(e,t);i.call(e)},se=()=>{e.req.on(`finish`,F)};j(e)?(e.on(`complete`,F),ee||e.on(`abort`,ae),e.req?se():e.on(`request`,se)):p&&!m&&(e.on(`end`,N),e.on(`close`,N)),!ee&&typeof e.aborted==`boolean`&&e.on(`aborted`,ae),e.on(`end`,ne),e.on(`finish`,F),t.error!==!1&&e.on(`error`,re),e.on(`close`,ae),ie?n.nextTick(ae):m!=null&&m.errorEmitted||k!=null&&k.errorEmitted?ee||n.nextTick(oe):(!f&&(!ee||_(e))&&(te||S(e)===!1)||!p&&(!ee||S(e))&&(I||_(e)===!1)||k&&e.req&&e.aborted)&&n.nextTick(oe);let ce=()=>{i=M,e.removeListener(`aborted`,ae),e.removeListener(`complete`,F),e.removeListener(`abort`,ae),e.removeListener(`request`,se),e.req&&e.req.removeListener(`finish`,F),e.removeListener(`end`,N),e.removeListener(`close`,N),e.removeListener(`finish`,F),e.removeListener(`end`,ne),e.removeListener(`error`,re),e.removeListener(`close`,ae)};if(t.signal&&!ie){let a=()=>{let n=i;ce(),n.call(e,new r(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(a);else{A||=Y6().addAbortListener;let n=A(t.signal,a),r=i;i=c((...t)=>{n[h](),r.apply(e,t)})}}return ce}function P(e,t,i){let a=!1,o=M;if(t.signal)if(o=()=>{a=!0,i.call(e,new r(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(o);else{A||=Y6().addAbortListener;let n=A(t.signal,o),r=i;i=c((...t)=>{n[h](),r.apply(e,t)})}let s=(...t)=>{a||n.nextTick(()=>i.apply(e,t))};return m(e[k].promise,s,s),M}function ee(e,t){var n;let r=!1;return t===null&&(t=s),(n=t)!=null&&n.cleanup&&(f(t.cleanup,`cleanup`),r=t.cleanup),new p((n,i)=>{let a=N(e,t,e=>{r&&a(),e?i(e):n()})})}t.exports=N,t.exports.finished=ee})),e8=n(((e,t)=>{var n=Z6(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=K6(),{Symbol:o}=W6(),{kIsDestroyed:s,isDestroyed:c,isFinished:l,isServerRequest:u}=Q6(),d=o(`kDestroy`),f=o(`kConstruct`);function p(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t){let n=this._readableState,i=this._writableState,a=i||n;return i!=null&&i.destroyed||n!=null&&n.destroyed?(typeof t==`function`&&t(),this):(p(e,i,n),i&&(i.destroyed=!0),n&&(n.destroyed=!0),a.constructed?h(this,e,t):this.once(d,function(n){h(this,r(n,e),t)}),this)}function h(e,t,r){let i=!1;function a(t){if(i)return;i=!0;let a=e._readableState,o=e._writableState;p(t,o,a),o&&(o.closed=!0),a&&(a.closed=!0),typeof r==`function`&&r(t),t?n.nextTick(g,e,t):n.nextTick(_,e)}try{e._destroy(t||null,a)}catch(e){a(e)}}function g(e,t){v(e,t),_(e)}function _(e){let t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit(`close`)}function v(e,t){let n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit(`error`,t))}function y(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function b(e,t,r){let i=e._readableState,a=e._writableState;if(a!=null&&a.destroyed||i!=null&&i.destroyed)return this;i!=null&&i.autoDestroy||a!=null&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(v,e,t):v(e,t))}function x(e,t){if(typeof e._construct!=`function`)return;let r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(f,t),!(e.listenerCount(f)>1)&&n.nextTick(S,e)}function S(e){let t=!1;function r(r){if(t){b(e,r??new i);return}t=!0;let a=e._readableState,o=e._writableState,s=o||a;a&&(a.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(d,r):r?b(e,r,!0):n.nextTick(C,e)}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function C(e){e.emit(f)}function w(e){return e?.setHeader&&typeof e.abort==`function`}function T(e){e.emit(`close`)}function E(e,t){e.emit(`error`,t),n.nextTick(T,e)}function D(e,t){!e||c(e)||(!t&&!l(e)&&(t=new a),u(e)?(e.socket=null,e.destroy(t)):w(e)?e.abort():w(e.req)?e.req.abort():typeof e.destroy==`function`?e.destroy(t):typeof e.close==`function`?e.close():t?n.nextTick(E,e,t):n.nextTick(T,e),e.destroyed||(e[s]=!0))}t.exports={construct:x,destroyer:D,destroy:m,undestroy:y,errorOrDestroy:b}})),t8=n(((e,t)=>{var{ArrayIsArray:n,ObjectSetPrototypeOf:r}=W6(),{EventEmitter:i}=J6();function a(e){i.call(this,e)}r(a.prototype,i.prototype),r(a,i),a.prototype.pipe=function(e,t){let n=this;function r(t){e.writable&&e.write(t)===!1&&n.pause&&n.pause()}n.on(`data`,r);function a(){n.readable&&n.resume&&n.resume()}e.on(`drain`,a),!e._isStdio&&(!t||t.end!==!1)&&(n.on(`end`,c),n.on(`close`,l));let s=!1;function c(){s||(s=!0,e.end())}function l(){s||(s=!0,typeof e.destroy==`function`&&e.destroy())}function u(e){d(),i.listenerCount(this,`error`)===0&&this.emit(`error`,e)}o(n,`error`,u),o(e,`error`,u);function d(){n.removeListener(`data`,r),e.removeListener(`drain`,a),n.removeListener(`end`,c),n.removeListener(`close`,l),n.removeListener(`error`,u),e.removeListener(`error`,u),n.removeListener(`end`,d),n.removeListener(`close`,d),e.removeListener(`close`,d)}return n.on(`end`,d),n.on(`close`,d),e.on(`close`,d),e.emit(`pipe`,n),e};function o(e,t,r){if(typeof e.prependListener==`function`)return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}t.exports={Stream:a,prependListener:o}})),n8=n(((e,t)=>{var{SymbolDispose:n}=W6(),{AbortError:r,codes:i}=K6(),{isNodeStream:a,isWebStream:o,kControllerErrorFunction:s}=Q6(),c=$6(),{ERR_INVALID_ARG_TYPE:l}=i,u,d=(e,t)=>{if(typeof e!=`object`||!(`aborted`in e))throw new l(t,`AbortSignal`,e)};t.exports.addAbortSignal=function(e,n){if(d(e,`signal`),!a(n)&&!o(n))throw new l(`stream`,[`ReadableStream`,`WritableStream`,`Stream`],n);return t.exports.addAbortSignalNoValidate(e,n)},t.exports.addAbortSignalNoValidate=function(e,t){if(typeof e!=`object`||!(`aborted`in e))return t;let i=a(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?i():(u||=Y6().addAbortListener,c(t,u(e,i)[n])),t}})),r8=n(((e,t)=>{var{StringPrototypeSlice:n,SymbolIterator:r,TypedArrayPrototypeSet:i,Uint8Array:a}=W6(),{Buffer:o}=$2(),{inspect:s}=Y6();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return``;let t=this.head,n=``+t.data;for(;(t=t.next)!==null;)n+=e+t.data;return n}concat(e){if(this.length===0)return o.alloc(0);let t=o.allocUnsafe(e>>>0),n=this.head,r=0;for(;n;)i(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){let n=this.head.data;if(e<n.length){let t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[r](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t=``,r=this.head,i=0;do{let a=r.data;if(e>a.length)t+=a,e-=a.length;else{e===a.length?(t+=a,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(a,0,e),this.head=r,r.data=n(a,e));break}++i}while((r=r.next)!==null);return this.length-=i,t}_getBuffer(e){let t=o.allocUnsafe(e),n=e,r=this.head,s=0;do{let o=r.data;if(e>o.length)i(t,o,n-e),e-=o.length;else{e===o.length?(i(t,o,n-e),++s,r.next?this.head=r.next:this.head=this.tail=null):(i(t,new a(o.buffer,o.byteOffset,e),n-e),this.head=r,r.data=o.slice(e));break}++s}while((r=r.next)!==null);return this.length-=s,t}[Symbol.for(`nodejs.util.inspect.custom`)](e,t){return s(this,{...t,depth:0,customInspect:!1})}}})),i8=n(((e,t)=>{var{MathFloor:n,NumberIsInteger:r}=W6(),{validateInteger:i}=X6(),{ERR_INVALID_ARG_VALUE:a}=K6().codes,o=16*1024,s=16;function c(e,t,n){return e.highWaterMark==null?t?e[n]:null:e.highWaterMark}function l(e){return e?s:o}function u(e,t){i(t,`value`,0),e?s=t:o=t}function d(e,t,i,o){let s=c(t,o,i);if(s!=null){if(!r(s)||s<0)throw new a(o?`options.${i}`:`options.highWaterMark`,s);return n(s)}return l(e.objectMode)}t.exports={getHighWaterMark:d,getDefaultHighWaterMark:l,setDefaultHighWaterMark:u}})),a8=n(((e,t)=>{var n=$2(),r=n.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=a);function a(e,t,n){return r(e,t,n)}a.prototype=Object.create(r.prototype),i(r,a),a.from=function(e,t,n){if(typeof e==`number`)throw TypeError(`Argument must not be a number`);return r(e,t,n)},a.alloc=function(e,t,n){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);var i=r(e);return t===void 0?i.fill(0):typeof n==`string`?i.fill(t,n):i.fill(t),i},a.allocUnsafe=function(e){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);return r(e)},a.allocUnsafeSlow=function(e){if(typeof e!=`number`)throw TypeError(`Argument must be a number`);return n.SlowBuffer(e)}})),o8=n((e=>{var t=a8().Buffer,n=t.isEncoding||function(e){switch(e=``+e,e&&e.toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:case`raw`:return!0;default:return!1}};function r(e){if(!e)return`utf8`;for(var t;;)switch(e){case`utf8`:case`utf-8`:return`utf8`;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return`utf16le`;case`latin1`:case`binary`:return`latin1`;case`base64`:case`ascii`:case`hex`:return e;default:if(t)return;e=(``+e).toLowerCase(),t=!0}}function i(e){var i=r(e);if(typeof i!=`string`&&(t.isEncoding===n||!n(e)))throw Error(`Unknown encoding: `+e);return i||e}e.StringDecoder=a;function a(e){this.encoding=i(e);var n;switch(this.encoding){case`utf16le`:this.text=f,this.end=p,n=4;break;case`utf8`:this.fillLast=l,n=4;break;case`base64`:this.text=m,this.end=h,n=3;break;default:this.write=g,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}a.prototype.write=function(e){if(e.length===0)return``;var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return``;n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||``},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=o(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function c(e,t,n){if((t[0]&192)!=128)return e.lastNeed=0,`�`;if(e.lastNeed>1&&t.length>1){if((t[1]&192)!=128)return e.lastNeed=1,`�`;if(e.lastNeed>2&&t.length>2&&(t[2]&192)!=128)return e.lastNeed=2,`�`}}function l(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function u(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString(`utf8`,t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(`utf8`,t,r)}function d(e){var t=e&&e.length?this.write(e):``;return this.lastNeed?t+`�`:t}function f(e,t){if((e.length-t)%2==0){var n=e.toString(`utf16le`,t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(`utf16le`,t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):``;if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(`utf16le`,0,n)}return t}function m(e,t){var n=(e.length-t)%3;return n===0?e.toString(`base64`,t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(`base64`,t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):``;return this.lastNeed?t+this.lastChar.toString(`base64`,0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function _(e){return e&&e.length?this.write(e):``}})),s8=n(((e,t)=>{var n=Z6(),{PromisePrototypeThen:r,SymbolAsyncIterator:i,SymbolIterator:a}=W6(),{Buffer:o}=$2(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:c}=K6().codes;function l(e,t,l){let u;if(typeof t==`string`||t instanceof o)return new e({objectMode:!0,...l,read(){this.push(t),this.push(null)}});let d;if(t&&t[i])d=!0,u=t[i]();else if(t&&t[a])d=!1,u=t[a]();else throw new s(`iterable`,[`Iterable`],t);let f=new e({objectMode:!0,highWaterMark:1,...l}),p=!1;f._read=function(){p||(p=!0,h())},f._destroy=function(e,t){r(m(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))};async function m(e){let t=e!=null,n=typeof u.throw==`function`;if(t&&n){let{value:t,done:n}=await u.throw(e);if(await t,n)return}if(typeof u.return==`function`){let{value:e}=await u.return();await e}}async function h(){for(;;){try{let{value:e,done:t}=d?await u.next():u.next();if(t)f.push(null);else{let t=e&&typeof e.then==`function`?await e:e;if(t===null)throw p=!1,new c;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}return f}t.exports=l})),c8=n(((e,t)=>{var n=Z6(),{ArrayPrototypeIndexOf:r,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:o,ObjectDefineProperties:s,ObjectKeys:c,ObjectSetPrototypeOf:l,Promise:u,SafeSet:d,SymbolAsyncDispose:f,SymbolAsyncIterator:p,Symbol:m}=W6();t.exports=R,R.ReadableState=xe;var{EventEmitter:h}=J6(),{Stream:g,prependListener:_}=t8(),{Buffer:v}=$2(),{addAbortSignal:y}=n8(),b=$6(),x=Y6().debuglog(`stream`,e=>{x=e}),S=r8(),C=e8(),{getHighWaterMark:w,getDefaultHighWaterMark:T}=i8(),{aggregateTwoErrors:E,codes:{ERR_INVALID_ARG_TYPE:D,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:k,ERR_STREAM_PUSH_AFTER_EOF:A,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:j},AbortError:M}=K6(),{validateObject:N}=X6(),P=m(`kPaused`),{StringDecoder:ee}=o8(),te=s8();l(R.prototype,g.prototype),l(R,g);var F=()=>{},{errorOrDestroy:I}=C,ne=1,re=2,ie=4,ae=8,oe=16,se=32,ce=64,le=128,ue=256,de=512,fe=1024,pe=2048,me=4096,he=8192,ge=16384,L=32768,_e=65536,ve=1<<17,ye=1<<18;function be(e){return{enumerable:!1,get(){return(this.state&e)!==0},set(t){t?this.state|=e:this.state&=~e}}}s(xe.prototype,{objectMode:be(ne),ended:be(re),endEmitted:be(ie),reading:be(ae),constructed:be(oe),sync:be(se),needReadable:be(ce),emittedReadable:be(le),readableListening:be(ue),resumeScheduled:be(de),errorEmitted:be(fe),emitClose:be(pe),autoDestroy:be(me),destroyed:be(he),closed:be(ge),closeEmitted:be(L),multiAwaitDrain:be(_e),readingMore:be(ve),dataEmitted:be(ye)});function xe(e,t,n){typeof n!=`boolean`&&(n=t instanceof d8()),this.state=6192,e&&e.objectMode&&(this.state|=ne),n&&e&&e.readableObjectMode&&(this.state|=ne),this.highWaterMark=e?w(this,e,`readableHighWaterMark`,n):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[P]=null,e&&e.emitClose===!1&&(this.state&=~pe),e&&e.autoDestroy===!1&&(this.state&=~me),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||`utf8`,this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new ee(e.encoding),this.encoding=e.encoding)}function R(e){if(!(this instanceof R))return new R(e);let t=this instanceof d8();this._readableState=new xe(e,this,t),e&&(typeof e.read==`function`&&(this._read=e.read),typeof e.destroy==`function`&&(this._destroy=e.destroy),typeof e.construct==`function`&&(this._construct=e.construct),e.signal&&!t&&y(e.signal,this)),g.call(this,e),C.construct(this,()=>{this._readableState.needReadable&&Ae(this,this._readableState)})}R.prototype.destroy=C.destroy,R.prototype._undestroy=C.undestroy,R.prototype._destroy=function(e,t){t(e)},R.prototype[h.captureRejectionSymbol]=function(e){this.destroy(e)},R.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new M,this.destroy(e)),new u((t,n)=>b(this,r=>r&&r!==e?n(r):t(null)))},R.prototype.push=function(e,t){return Se(this,e,t,!1)},R.prototype.unshift=function(e,t){return Se(this,e,t,!0)};function Se(e,t,n,r){x(`readableAddChunk`,t);let i=e._readableState,a;if((i.state&ne)===0&&(typeof t==`string`?(n||=i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=v.from(t,n).toString(i.encoding):(t=v.from(t,n),n=``))):t instanceof v?n=``:g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),n=``):t!=null&&(a=new D(`chunk`,[`string`,`Buffer`,`Uint8Array`],t))),a)I(e,a);else if(t===null)i.state&=~ae,De(e,i);else if((i.state&ne)!==0||t&&t.length>0)if(r)if((i.state&ie)!==0)I(e,new j);else if(i.destroyed||i.errored)return!1;else Ce(e,i,t,!0);else if(i.ended)I(e,new A);else if(i.destroyed||i.errored)return!1;else i.state&=~ae,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||t.length!==0?Ce(e,i,t,!1):Ae(e,i)):Ce(e,i,t,!1);else r||(i.state&=~ae,Ae(e,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Ce(e,t,n,r){t.flowing&&t.length===0&&!t.sync&&e.listenerCount(`data`)>0?((t.state&_e)===0?t.awaitDrainWriters=null:t.awaitDrainWriters.clear(),t.dataEmitted=!0,e.emit(`data`,n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),(t.state&ce)!==0&&Oe(e)),Ae(e,t)}R.prototype.isPaused=function(){let e=this._readableState;return e[P]===!0||e.flowing===!1},R.prototype.setEncoding=function(e){let t=new ee(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r=``;for(let e of n)r+=t.write(e);return n.clear(),r!==``&&n.push(r),this._readableState.length=r.length,this};var we=1073741824;function Te(e){if(e>we)throw new k(`size`,`<= 1GiB`,e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function Ee(e,t){return e<=0||t.length===0&&t.ended?0:(t.state&ne)===0?a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0:1}R.prototype.read=function(e){x(`read`,e),e===void 0?e=NaN:i(e)||(e=o(e,10));let t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=Te(e)),e!==0&&(t.state&=~le),e===0&&t.needReadable&&((t.highWaterMark===0?t.length>0:t.length>=t.highWaterMark)||t.ended))return x(`read: emitReadable`,t.length,t.ended),t.length===0&&t.ended?Ve(this):Oe(this),null;if(e=Ee(e,t),e===0&&t.ended)return t.length===0&&Ve(this),null;let r=(t.state&ce)!==0;if(x(`need readable`,r),(t.length===0||t.length-e<t.highWaterMark)&&(r=!0,x(`length less than watermark`,r)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)r=!1,x(`reading, ended or constructing`,r);else if(r){x(`do read`),t.state|=ae|se,t.length===0&&(t.state|=ce);try{this._read(t.highWaterMark)}catch(e){I(this,e)}t.state&=~se,t.reading||(e=Ee(n,t))}let a;return a=e>0?Be(e,t):null,a===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Ve(this)),a!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit(`data`,a)),a};function De(e,t){if(x(`onEofChunk`),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Oe(e):(t.needReadable=!1,t.emittedReadable=!0,ke(e))}}function Oe(e){let t=e._readableState;x(`emitReadable`,t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x(`emitReadable`,t.flowing),t.emittedReadable=!0,n.nextTick(ke,e))}function ke(e){let t=e._readableState;x(`emitReadable_`,t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit(`readable`),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Le(e)}function Ae(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(je,e,t))}function je(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let n=t.length;if(x(`maybeReadMore read 0`),e.read(0),n===t.length)break}t.readingMore=!1}R.prototype._read=function(e){throw new O(`_read()`)},R.prototype.pipe=function(e,t){let r=this,i=this._readableState;i.pipes.length===1&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new d(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),x(`pipe count=%d opts=%j`,i.pipes.length,t);let a=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr?s:v;i.endEmitted?n.nextTick(a):r.once(`end`,a),e.on(`unpipe`,o);function o(e,t){x(`onunpipe`),e===r&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,u())}function s(){x(`onend`),e.end()}let c,l=!1;function u(){x(`cleanup`),e.removeListener(`close`,h),e.removeListener(`finish`,g),c&&e.removeListener(`drain`,c),e.removeListener(`error`,m),e.removeListener(`unpipe`,o),r.removeListener(`end`,s),r.removeListener(`end`,v),r.removeListener(`data`,p),l=!0,c&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}function f(){l||(i.pipes.length===1&&i.pipes[0]===e?(x(`false write response, pause`,0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(x(`false write response, pause`,i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),c||(c=Me(r,e),e.on(`drain`,c))}r.on(`data`,p);function p(t){x(`ondata`);let n=e.write(t);x(`dest.write`,n),n===!1&&f()}function m(t){if(x(`onerror`,t),v(),e.removeListener(`error`,m),e.listenerCount(`error`)===0){let n=e._writableState||e._readableState;n&&!n.errorEmitted?I(e,t):e.emit(`error`,t)}}_(e,`error`,m);function h(){e.removeListener(`finish`,g),v()}e.once(`close`,h);function g(){x(`onfinish`),e.removeListener(`close`,h),v()}e.once(`finish`,g);function v(){x(`unpipe`),r.unpipe(e)}return e.emit(`pipe`,r),e.writableNeedDrain===!0?f():i.flowing||(x(`pipe resume`),r.resume()),e};function Me(e,t){return function(){let n=e._readableState;n.awaitDrainWriters===t?(x(`pipeOnDrain`,1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(x(`pipeOnDrain`,n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&e.listenerCount(`data`)&&e.resume()}}R.prototype.unpipe=function(e){let t=this._readableState,n={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit(`unpipe`,this,{hasUnpiped:!1});return this}let i=r(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipes.length===0&&this.pause(),e.emit(`unpipe`,this,n),this)},R.prototype.on=function(e,t){let r=g.prototype.on.call(this,e,t),i=this._readableState;return e===`data`?(i.readableListening=this.listenerCount(`readable`)>0,i.flowing!==!1&&this.resume()):e===`readable`&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,x(`on readable`,i.length,i.reading),i.length?Oe(this):i.reading||n.nextTick(Pe,this)),r},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(e,t){let r=g.prototype.removeListener.call(this,e,t);return e===`readable`&&n.nextTick(Ne,this),r},R.prototype.off=R.prototype.removeListener,R.prototype.removeAllListeners=function(e){let t=g.prototype.removeAllListeners.apply(this,arguments);return(e===`readable`||e===void 0)&&n.nextTick(Ne,this),t};function Ne(e){let t=e._readableState;t.readableListening=e.listenerCount(`readable`)>0,t.resumeScheduled&&t[P]===!1?t.flowing=!0:e.listenerCount(`data`)>0?e.resume():t.readableListening||(t.flowing=null)}function Pe(e){x(`readable nexttick read 0`),e.read(0)}R.prototype.resume=function(){let e=this._readableState;return e.flowing||(x(`resume`),e.flowing=!e.readableListening,Fe(this,e)),e[P]=!1,this};function Fe(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(Ie,e,t))}function Ie(e,t){x(`resume`,t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit(`resume`),Le(e),t.flowing&&!t.reading&&e.read(0)}R.prototype.pause=function(){return x(`call pause flowing=%j`,this._readableState.flowing),this._readableState.flowing!==!1&&(x(`pause`),this._readableState.flowing=!1,this.emit(`pause`)),this._readableState[P]=!0,this};function Le(e){let t=e._readableState;for(x(`flow`,t.flowing);t.flowing&&e.read()!==null;);}R.prototype.wrap=function(e){let t=!1;e.on(`data`,n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on(`end`,()=>{this.push(null)}),e.on(`error`,e=>{I(this,e)}),e.on(`close`,()=>{this.destroy()}),e.on(`destroy`,()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let n=c(e);for(let t=1;t<n.length;t++){let r=n[t];this[r]===void 0&&typeof e[r]==`function`&&(this[r]=e[r].bind(e))}return this},R.prototype[p]=function(){return Re(this)},R.prototype.iterator=function(e){return e!==void 0&&N(e,`options`),Re(this,e)};function Re(e,t){typeof e.read!=`function`&&(e=R.wrap(e,{objectMode:!0}));let n=ze(e,t);return n.stream=e,n}async function*ze(e,t){let n=F;function r(t){this===e?(n(),n=F):n=t}e.on(`readable`,r);let i,a=b(e,{writable:!1},e=>{i=e?E(i,e):null,n(),n=F});try{for(;;){let t=e.destroyed?null:e.read();if(t!==null)yield t;else if(i)throw i;else if(i===null)return;else await new u(r)}}catch(e){throw i=E(i,e),i}finally{(i||t?.destroyOnReturn!==!1)&&(i===void 0||e._readableState.autoDestroy)?C.destroyer(e,null):(e.off(`readable`,r),a())}}s(R.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&e.readable!==!1&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(xe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[P]!==!1},set(e){this[P]=!!e}}}),R._fromList=Be;function Be(e,t){if(t.length===0)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(``):t.buffer.length===1?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function Ve(e){let t=e._readableState;x(`endReadable`,t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(He,t,e))}function He(e,t){if(x(`endReadableNT`,e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){if(e.endEmitted=!0,t.emit(`end`),t.writable&&t.allowHalfOpen===!1)n.nextTick(Ue,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||e.writable===!1))&&t.destroy()}}}function Ue(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}R.from=function(e,t){return te(R,e,t)};var We;function Ge(){return We===void 0&&(We={}),We}R.fromWeb=function(e,t){return Ge().newStreamReadableFromReadableStream(e,t)},R.toWeb=function(e,t){return Ge().newReadableStreamFromStreamReadable(e,t)},R.wrap=function(e,t){return new R({objectMode:e.readableObjectMode??e.objectMode??!0,...t,destroy(t,n){C.destroyer(e,t),n(t)}}).wrap(e)}})),l8=n(((e,t)=>{var n=Z6(),{ArrayPrototypeSlice:r,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:o,ObjectDefineProperties:s,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:l,Symbol:u,SymbolHasInstance:d}=W6();t.exports=N,N.WritableState=j;var{EventEmitter:f}=J6(),p=t8().Stream,{Buffer:m}=$2(),h=e8(),{addAbortSignal:g}=n8(),{getHighWaterMark:_,getDefaultHighWaterMark:v}=i8(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:w,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:E,ERR_UNKNOWN_ENCODING:D}=K6().codes,{errorOrDestroy:O}=h;c(N.prototype,p.prototype),c(N,p);function k(){}var A=u(`kOnFinished`);function j(e,t,n){typeof n!=`boolean`&&(n=t instanceof d8()),this.objectMode=!!(e&&e.objectMode),n&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?_(this,e,`writableHighWaterMark`,n):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(e&&e.decodeStrings===!1),this.defaultEncoding=e&&e.defaultEncoding||`utf8`,this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,M(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||e.emitClose!==!1,this.autoDestroy=!e||e.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[A]=[]}function M(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}j.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},o(j.prototype,`bufferedRequestCount`,{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function N(e){let t=this instanceof d8();if(!t&&!a(N,this))return new N(e);this._writableState=new j(e,this,t),e&&(typeof e.write==`function`&&(this._write=e.write),typeof e.writev==`function`&&(this._writev=e.writev),typeof e.destroy==`function`&&(this._destroy=e.destroy),typeof e.final==`function`&&(this._final=e.final),typeof e.construct==`function`&&(this._construct=e.construct),e.signal&&g(e.signal,this)),p.call(this,e),h.construct(this,()=>{let e=this._writableState;e.writing||ae(this,e),le(this,e)})}o(N,d,{__proto__:null,value:function(e){return a(this,e)?!0:this===N?e&&e._writableState instanceof j:!1}}),N.prototype.pipe=function(){O(this,new S)};function P(e,t,r,i){let a=e._writableState;if(typeof r==`function`)i=r,r=a.defaultEncoding;else{if(!r)r=a.defaultEncoding;else if(r!==`buffer`&&!m.isEncoding(r))throw new D(r);typeof i!=`function`&&(i=k)}if(t===null)throw new T;if(!a.objectMode)if(typeof t==`string`)a.decodeStrings!==!1&&(t=m.from(t,r),r=`buffer`);else if(t instanceof m)r=`buffer`;else if(p._isUint8Array(t))t=p._uint8ArrayToBuffer(t),r=`buffer`;else throw new y(`chunk`,[`string`,`Buffer`,`Uint8Array`],t);let o;return a.ending?o=new E:a.destroyed&&(o=new C(`write`)),o?(n.nextTick(i,o),O(e,o,!0),o):(a.pendingcb++,ee(e,a,t,r,i))}N.prototype.write=function(e,t,n){return P(this,e,t,n)===!0},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||ae(this,e))},N.prototype.setDefaultEncoding=function(e){if(typeof e==`string`&&(e=l(e)),!m.isEncoding(e))throw new D(e);return this._writableState.defaultEncoding=e,this};function ee(e,t,n,r,i){let a=t.objectMode?1:n.length;t.length+=a;let o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&r!==`buffer`&&(t.allBuffers=!1),t.allNoop&&i!==k&&(t.allNoop=!1)):(t.writelen=a,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),o&&!t.errored&&!t.destroyed}function te(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new C(`write`)):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function F(e,t,n,r){--t.pendingcb,r(n),ie(t),O(e,n)}function I(e,t){let r=e._writableState,i=r.sync,a=r.writecb;if(typeof a!=`function`){O(e,new x);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||=t,e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(F,e,r,t,a):F(e,r,t,a)):(r.buffered.length>r.bufferedIndex&&ae(e,r),i?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===a?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:a,stream:e,state:r},n.nextTick(ne,r.afterWriteTickInfo)):re(e,r,1,a))}function ne({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,re(e,t,n,r)}function re(e,t,n,r){for(!t.ending&&!e.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit(`drain`));n-- >0;)t.pendingcb--,r();t.destroyed&&ie(t),le(e,t)}function ie(e){if(e.writing)return;for(let t=e.bufferedIndex;t<e.buffered.length;++t){let{chunk:n,callback:r}=e.buffered[t],i=e.objectMode?1:n.length;e.length-=i,r(e.errored??new C(`write`))}let t=e[A].splice(0);for(let n=0;n<t.length;n++)t[n](e.errored??new C(`end`));M(e)}function ae(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:n,bufferedIndex:i,objectMode:a}=t,o=n.length-i;if(!o)return;let s=i;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let i=t.allNoop?k:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},a=t.allNoop&&s===0?n:r(n,s);a.allBuffers=t.allBuffers,te(e,t,!0,t.length,a,``,i),M(t)}else{do{let{chunk:r,encoding:i,callback:o}=n[s];n[s++]=null,te(e,t,!1,a?1:r.length,r,i,o)}while(s<n.length&&!t.writing);s===n.length?M(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}N.prototype._write=function(e,t,n){if(this._writev)this._writev([{chunk:e,encoding:t}],n);else throw new b(`_write()`)},N.prototype._writev=null,N.prototype.end=function(e,t,r){let a=this._writableState;typeof e==`function`?(r=e,e=null,t=null):typeof t==`function`&&(r=t,t=null);let o;if(e!=null){let n=P(this,e,t);n instanceof i&&(o=n)}return a.corked&&(a.corked=1,this.uncork()),o||(!a.errored&&!a.ending?(a.ending=!0,le(this,a,!0),a.ended=!0):a.finished?o=new w(`end`):a.destroyed&&(o=new C(`end`))),typeof r==`function`&&(o||a.finished?n.nextTick(r,o):a[A].push(r)),this};function oe(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function se(e,t){let r=!1;function i(i){if(r){O(e,i??x());return}if(r=!0,t.pendingcb--,i){let n=t[A].splice(0);for(let e=0;e<n.length;e++)n[e](i);O(e,i,t.sync)}else oe(t)&&(t.prefinished=!0,e.emit(`prefinish`),t.pendingcb++,n.nextTick(ue,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}function ce(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final==`function`&&!t.destroyed?(t.finalCalled=!0,se(e,t)):(t.prefinished=!0,e.emit(`prefinish`)))}function le(e,t,r){oe(t)&&(ce(e,t),t.pendingcb===0&&(r?(t.pendingcb++,n.nextTick((e,t)=>{oe(t)?ue(e,t):t.pendingcb--},e,t)):oe(t)&&(t.pendingcb++,ue(e,t))))}function ue(e,t){t.pendingcb--,t.finished=!0;let n=t[A].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit(`finish`),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||t.readable===!1))&&e.destroy()}}s(N.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&e.writable!==!1&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return e?!e.destroyed&&!e.ending&&e.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var de=h.destroy;N.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[A].length)&&n.nextTick(ie,r),de.call(this,e,t),this},N.prototype._undestroy=h.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)};var fe;function pe(){return fe===void 0&&(fe={}),fe}N.fromWeb=function(e,t){return pe().newStreamWritableFromWritableStream(e,t)},N.toWeb=function(e){return pe().newWritableStreamFromStreamWritable(e)}})),u8=n(((e,t)=>{var n=Z6(),r=$2(),{isReadable:i,isWritable:a,isIterable:o,isNodeStream:s,isReadableNodeStream:c,isWritableNodeStream:l,isDuplexNodeStream:u,isReadableStream:d,isWritableStream:f}=Q6(),p=$6(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:g}}=K6(),{destroyer:_}=e8(),v=d8(),y=c8(),b=l8(),{createDeferredPromise:x}=Y6(),S=s8(),C=globalThis.Blob||r.Blob,w=C===void 0?function(e){return!1}:function(e){return e instanceof C},T=globalThis.AbortController||q6().AbortController,{FunctionPrototypeCall:E}=W6(),D=class extends v{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function e(t,r){if(u(t))return t;if(c(t))return k({readable:t});if(l(t))return k({writable:t});if(s(t))return k({writable:!1,readable:!1});if(d(t))return k({readable:y.fromWeb(t)});if(f(t))return k({writable:b.fromWeb(t)});if(typeof t==`function`){let{value:e,write:i,final:a,destroy:s}=O(t);if(o(e))return S(D,e,{objectMode:!0,write:i,final:a,destroy:s});let c=e?.then;if(typeof c==`function`){let t,r=E(c,e,e=>{if(e!=null)throw new g(`nully`,`body`,e)},e=>{_(t,e)});return t=new D({objectMode:!0,readable:!1,write:i,final(e){a(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:s})}throw new g(`Iterable, AsyncIterable or AsyncFunction`,r,e)}if(w(t))return e(t.arrayBuffer());if(o(t))return S(D,t,{objectMode:!0,writable:!1});if(d(t?.readable)&&f(t?.writable))return D.fromWeb(t);if(typeof t?.writable==`object`||typeof t?.readable==`object`)return k({readable:t!=null&&t.readable?c(t?.readable)?t?.readable:e(t.readable):void 0,writable:t!=null&&t.writable?l(t?.writable)?t?.writable:e(t.writable):void 0});let i=t?.then;if(typeof i==`function`){let e;return E(i,t,t=>{t!=null&&e.push(t),e.push(null)},t=>{_(e,t)}),e=new D({objectMode:!0,writable:!1,read(){}})}throw new h(r,[`Blob`,`ReadableStream`,`WritableStream`,`Stream`,`Iterable`,`AsyncIterable`,`Function`,`{ readable, writable } pair`,`Promise`],t)};function O(e){let{promise:t,resolve:r}=x(),i=new T,a=i.signal;return{value:e((async function*(){for(;;){let e=t;t=null;let{chunk:i,done:o,cb:s}=await e;if(n.nextTick(s),o)return;if(a.aborted)throw new m(void 0,{cause:a.reason});({promise:t,resolve:r}=x()),yield i}})(),{signal:a}),write(e,t,n){let i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}function k(e){let t=e.readable&&typeof e.readable.read!=`function`?y.wrap(e.readable):e.readable,n=e.writable,r=!!i(t),o=!!a(n),s,c,l,u,d;function f(e){let t=u;u=null,t?t(e):e&&d.destroy(e)}return d=new D({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:o}),o&&(p(n,e=>{o=!1,e&&_(t,e),f(e)}),d._write=function(e,t,r){n.write(e,t)?r():s=r},d._final=function(e){n.end(),c=e},n.on(`drain`,function(){if(s){let e=s;s=null,e()}}),n.on(`finish`,function(){if(c){let e=c;c=null,e()}})),r&&(p(t,e=>{r=!1,e&&_(t,e),f(e)}),t.on(`readable`,function(){if(l){let e=l;l=null,e()}}),t.on(`end`,function(){d.push(null)}),d._read=function(){for(;;){let e=t.read();if(e===null){l=d._read;return}if(!d.push(e))return}}),d._destroy=function(e,r){!e&&u!==null&&(e=new m),l=null,s=null,c=null,u===null?r(e):(u=r,_(n,e),_(t,e))},d}})),d8=n(((e,t)=>{var{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:i,ObjectSetPrototypeOf:a}=W6();t.exports=c;var o=c8(),s=l8();a(c.prototype,o.prototype),a(c,o);{let e=i(s.prototype);for(let t=0;t<e.length;t++){let n=e[t];c.prototype[n]||(c.prototype[n]=s.prototype[n])}}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),e?(this.allowHalfOpen=e.allowHalfOpen!==!1,e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(c.prototype,{writable:{__proto__:null,...r(s.prototype,`writable`)},writableHighWaterMark:{__proto__:null,...r(s.prototype,`writableHighWaterMark`)},writableObjectMode:{__proto__:null,...r(s.prototype,`writableObjectMode`)},writableBuffer:{__proto__:null,...r(s.prototype,`writableBuffer`)},writableLength:{__proto__:null,...r(s.prototype,`writableLength`)},writableFinished:{__proto__:null,...r(s.prototype,`writableFinished`)},writableCorked:{__proto__:null,...r(s.prototype,`writableCorked`)},writableEnded:{__proto__:null,...r(s.prototype,`writableEnded`)},writableNeedDrain:{__proto__:null,...r(s.prototype,`writableNeedDrain`)},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}});var l;function u(){return l===void 0&&(l={}),l}c.fromWeb=function(e,t){return u().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return u().newReadableWritablePairFromDuplex(e)};var d;c.from=function(e){return d||=u8(),d(e,`body`)}})),f8=n(((e,t)=>{var{ObjectSetPrototypeOf:n,Symbol:r}=W6();t.exports=c;var{ERR_METHOD_NOT_IMPLEMENTED:i}=K6().codes,a=d8(),{getHighWaterMark:o}=i8();n(c.prototype,a.prototype),n(c,a);var s=r(`kCallback`);function c(e){if(!(this instanceof c))return new c(e);let t=e?o(this,e,`readableHighWaterMark`,!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[s]=null,e&&(typeof e.transform==`function`&&(this._transform=e.transform),typeof e.flush==`function`&&(this._flush=e.flush)),this.on(`prefinish`,u)}function l(e){typeof this._flush==`function`&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function u(){this._final!==l&&l.call(this)}c.prototype._final=l,c.prototype._transform=function(e,t,n){throw new i(`_transform()`)},c.prototype._write=function(e,t,n){let r=this._readableState,i=this._writableState,a=r.length;this._transform(e,t,(e,t)=>{if(e){n(e);return}t!=null&&this.push(t),i.ended||a===r.length||r.length<r.highWaterMark?n():this[s]=n})},c.prototype._read=function(){if(this[s]){let e=this[s];this[s]=null,e()}}})),p8=n(((e,t)=>{var{ObjectSetPrototypeOf:n}=W6();t.exports=i;var r=f8();n(i.prototype,r.prototype),n(i,r);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}i.prototype._transform=function(e,t,n){n(null,e)}})),m8=n(((e,t)=>{var n=Z6(),{ArrayIsArray:r,Promise:i,SymbolAsyncIterator:a,SymbolDispose:o}=W6(),s=$6(),{once:c}=Y6(),l=e8(),u=d8(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:_}=K6(),{validateFunction:v,validateAbortSignal:y}=X6(),{isIterable:b,isReadable:x,isReadableNodeStream:S,isNodeStream:C,isTransformStream:w,isWebStream:T,isReadableStream:E,isReadableFinished:D}=Q6(),O=globalThis.AbortController||q6().AbortController,k,A,j;function M(e,t,n){let r=!1;return e.on(`close`,()=>{r=!0}),{destroy:t=>{r||(r=!0,l.destroyer(e,t||new h(`pipe`)))},cleanup:s(e,{readable:t,writable:n},e=>{r=!e})}}function N(e){return v(e[e.length-1],`streams[stream.length - 1]`),e.pop()}function P(e){if(b(e))return e;if(S(e))return ee(e);throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`],e)}async function*ee(e){A||=c8(),yield*A.prototype[a].call(e)}async function te(e,t,n,{end:r}){let a,o=null,c=e=>{if(e&&(a=e),o){let e=o;o=null,e()}},l=()=>new i((e,t)=>{a?t(a):o=()=>{a?t(a):e()}});t.on(`drain`,c);let u=s(t,{readable:!1},c);try{t.writableNeedDrain&&await l();for await(let n of e)t.write(n)||await l();r&&(t.end(),await l()),n()}catch(e){n(a===e?e:d(a,e))}finally{u(),t.off(`drain`,c)}}async function F(e,t,n,{end:r}){w(t)&&(t=t.writable);let i=t.getWriter();try{for await(let t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function I(...e){return ne(e,c(N(e)))}function ne(e,t,i){if(e.length===1&&r(e[0])&&(e=e[0]),e.length<2)throw new m(`streams`);let a=new O,s=a.signal,c=i?.signal,l=[];y(c,`options.signal`);function d(){ee(new _)}j||=Y6().addAbortListener;let h;c&&(h=j(c,d));let g,v,D=[],A=0;function N(e){ee(e,--A===0)}function ee(e,r){var i;if(e&&(!g||g.code===`ERR_STREAM_PREMATURE_CLOSE`)&&(g=e),!(!g&&!r)){for(;D.length;)D.shift()(g);(i=h)==null||i[o](),a.abort(),r&&(g||l.forEach(e=>e()),n.nextTick(t,g,v))}}let I;for(let t=0;t<e.length;t++){let r=e[t],a=t<e.length-1,o=t>0,c=a||i?.end!==!1,d=t===e.length-1;if(C(r)){if(c){let{destroy:e,cleanup:t}=M(r,a,o);D.push(e),x(r)&&d&&l.push(t)}function e(e){e&&e.name!==`AbortError`&&e.code!==`ERR_STREAM_PREMATURE_CLOSE`&&N(e)}r.on(`error`,e),x(r)&&d&&l.push(()=>{r.removeListener(`error`,e)})}if(t===0)if(typeof r==`function`){if(I=r({signal:s}),!b(I))throw new p(`Iterable, AsyncIterable or Stream`,`source`,I)}else I=b(r)||S(r)||w(r)?r:u.from(r);else if(typeof r==`function`)if(I=w(I)?P(I?.readable):P(I),I=r(I,{signal:s}),a){if(!b(I,!0))throw new p(`AsyncIterable`,`transform[${t-1}]`,I)}else{k||=p8();let e=new k({objectMode:!0}),t=I?.then;if(typeof t==`function`)A++,t.call(I,t=>{v=t,t!=null&&e.write(t),c&&e.end(),n.nextTick(N)},t=>{e.destroy(t),n.nextTick(N,t)});else if(b(I,!0))A++,te(I,e,N,{end:c});else if(E(I)||w(I)){let t=I.readable||I;A++,te(t,e,N,{end:c})}else throw new p(`AsyncIterable or Promise`,`destination`,I);I=e;let{destroy:r,cleanup:i}=M(I,!1,!0);D.push(r),d&&l.push(i)}else if(C(r)){if(S(I)){A+=2;let e=re(I,r,N,{end:c});x(r)&&d&&l.push(e)}else if(w(I)||E(I)){let e=I.readable||I;A++,te(e,r,N,{end:c})}else if(b(I))A++,te(I,r,N,{end:c});else throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`,`ReadableStream`,`TransformStream`],I);I=r}else if(T(r)){if(S(I))A++,F(P(I),r,N,{end:c});else if(E(I)||b(I))A++,F(I,r,N,{end:c});else if(w(I))A++,F(I.readable,r,N,{end:c});else throw new f(`val`,[`Readable`,`Iterable`,`AsyncIterable`,`ReadableStream`,`TransformStream`],I);I=r}else I=u.from(r)}return(s!=null&&s.aborted||c!=null&&c.aborted)&&n.nextTick(d),I}function re(e,t,r,{end:i}){let a=!1;if(t.on(`close`,()=>{a||r(new g)}),e.pipe(t,{end:!1}),i){function r(){a=!0,t.end()}D(e)?n.nextTick(r):e.once(`end`,r)}else r();return s(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&t.code===`ERR_STREAM_PREMATURE_CLOSE`&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once(`end`,r).once(`error`,r):r(t)}),s(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:ne,pipeline:I}})),h8=n(((e,t)=>{var{pipeline:n}=m8(),r=d8(),{destroyer:i}=e8(),{isNodeStream:a,isReadable:o,isWritable:s,isWebStream:c,isTransformStream:l,isWritableStream:u,isReadableStream:d}=Q6(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=K6(),h=$6();t.exports=function(...e){if(e.length===0)throw new m(`streams`);if(e.length===1)return r.from(e[0]);let t=[...e];if(typeof e[0]==`function`&&(e[0]=r.from(e[0])),typeof e[e.length-1]==`function`){let t=e.length-1;e[t]=r.from(e[t])}for(let n=0;n<e.length;++n)if(!(!a(e[n])&&!c(e[n]))){if(n<e.length-1&&!(o(e[n])||d(e[n])||l(e[n])))throw new p(`streams[${n}]`,t[n],`must be readable`);if(n>0&&!(s(e[n])||u(e[n])||l(e[n])))throw new p(`streams[${n}]`,t[n],`must be writable`)}let g,_,v,y,b;function x(e){let t=y;y=null,t?t(e):e?b.destroy(e):!T&&!w&&b.destroy()}let S=e[0],C=n(e,x),w=!!(s(S)||u(S)||l(S)),T=!!(o(C)||d(C)||l(C));if(b=new r({writableObjectMode:!!(S!=null&&S.writableObjectMode),readableObjectMode:!!(C!=null&&C.readableObjectMode),writable:w,readable:T}),w){if(a(S))b._write=function(e,t,n){S.write(e,t)?n():g=n},b._final=function(e){S.end(),_=e},S.on(`drain`,function(){if(g){let e=g;g=null,e()}});else if(c(S)){let e=(l(S)?S.writable:S).getWriter();b._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},b._final=async function(t){try{await e.ready,e.close().catch(()=>{}),_=t}catch(e){t(e)}}}h(l(C)?C.readable:C,()=>{if(_){let e=_;_=null,e()}})}if(T){if(a(C))C.on(`readable`,function(){if(v){let e=v;v=null,e()}}),C.on(`end`,function(){b.push(null)}),b._read=function(){for(;;){let e=C.read();if(e===null){v=b._read;return}if(!b.push(e))return}};else if(c(C)){let e=(l(C)?C.readable:C).getReader();b._read=async function(){for(;;)try{let{value:t,done:n}=await e.read();if(!b.push(t))return;if(n){b.push(null);return}}catch{return}}}}return b._destroy=function(e,t){!e&&y!==null&&(e=new f),v=null,g=null,_=null,y===null?t(e):(y=t,a(C)&&i(C,e))},b}})),g8=n(((e,t)=>{var n=globalThis.AbortController||q6().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:o},AbortError:s}=K6(),{validateAbortSignal:c,validateInteger:l,validateObject:u}=X6(),d=W6().Symbol(`kWeak`),f=W6().Symbol(`kResistStopPropagation`),{finished:p}=$6(),m=h8(),{addAbortSignalNoValidate:h}=n8(),{isWritable:g,isNodeStream:_}=Q6(),{deprecate:v}=Y6(),{ArrayPrototypePush:y,Boolean:b,MathFloor:x,Number:S,NumberIsNaN:C,Promise:w,PromiseReject:T,PromiseResolve:E,PromisePrototypeThen:D,Symbol:O}=W6(),k=O(`kEmpty`),A=O(`kEof`);function j(e,t){if(t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),_(e)&&!g(e))throw new r(`stream`,e,`must be writable`);let n=m(this,e);return t!=null&&t.signal&&h(t.signal,n),n}function M(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`);let n=1;t?.concurrency!=null&&(n=x(t.concurrency));let r=n-1;return t?.highWaterMark!=null&&(r=x(t.highWaterMark)),l(n,`options.concurrency`,1),l(r,`options.highWaterMark`,0),r+=n,async function*(){let i=Y6().AbortSignalAny([t?.signal].filter(b)),a=this,o=[],c={signal:i},l,u,d=!1,f=0;function p(){d=!0,m()}function m(){--f,h()}function h(){u&&!d&&f<n&&o.length<r&&(u(),u=null)}async function g(){try{for await(let t of a){if(d)return;if(i.aborted)throw new s;try{if(t=e(t,c),t===k)continue;t=E(t)}catch(e){t=T(e)}f+=1,D(t,m,p),o.push(t),l&&=(l(),null),!d&&(o.length>=r||f>=n)&&await new w(e=>{u=e})}o.push(A)}catch(e){let t=T(e);D(t,m,p),o.push(t)}finally{d=!0,l&&=(l(),null)}}g();try{for(;;){for(;o.length>0;){let e=await o[0];if(e===A)return;if(i.aborted)throw new s;e!==k&&(yield e),o.shift(),h()}await new w(e=>{l=e})}}finally{d=!0,u&&=(u(),null)}}.call(this)}function N(e=void 0){return e!=null&&u(e,`options`),e?.signal!=null&&c(e.signal,`options.signal`),async function*(){let t=0;for await(let r of this){var n;if(e!=null&&(n=e.signal)!=null&&n.aborted)throw new s({cause:e.signal.reason});yield[t++,r]}}.call(this)}async function P(e,t=void 0){for await(let n of I.call(this,e,t))return!0;return!1}async function ee(e,t=void 0){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);return!await P.call(this,async(...t)=>!await e(...t),t)}async function te(e,t){for await(let n of I.call(this,e,t))return n}async function F(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);async function n(t,n){return await e(t,n),k}for await(let e of M.call(this,n,t));}function I(e,t){if(typeof e!=`function`)throw new i(`fn`,[`Function`,`AsyncFunction`],e);async function n(t,n){return await e(t,n)?t:k}return M.call(this,n,t)}var ne=class extends a{constructor(){super(`reduce`),this.message=`Reduce of an empty stream requires an initial value`}};async function re(e,t,r){var a;if(typeof e!=`function`)throw new i(`reducer`,[`Function`,`AsyncFunction`],e);r!=null&&u(r,`options`),r?.signal!=null&&c(r.signal,`options.signal`);let o=arguments.length>1;if(r!=null&&(a=r.signal)!=null&&a.aborted){let e=new s(void 0,{cause:r.signal.reason});throw this.once(`error`,()=>{}),await p(this.destroy(e)),e}let l=new n,m=l.signal;if(r!=null&&r.signal){let e={once:!0,[d]:this,[f]:!0};r.signal.addEventListener(`abort`,()=>l.abort(),e)}let h=!1;try{for await(let n of this){var g;if(h=!0,r!=null&&(g=r.signal)!=null&&g.aborted)throw new s;o?t=await e(t,n,{signal:m}):(t=n,o=!0)}if(!h&&!o)throw new ne}finally{l.abort()}return t}async function ie(e){e!=null&&u(e,`options`),e?.signal!=null&&c(e.signal,`options.signal`);let t=[];for await(let r of this){var n;if(e!=null&&(n=e.signal)!=null&&n.aborted)throw new s(void 0,{cause:e.signal.reason});y(t,r)}return t}function ae(e,t){let n=M.call(this,e,t);return async function*(){for await(let e of n)yield*e}.call(this)}function oe(e){if(e=S(e),C(e))return 0;if(e<0)throw new o(`number`,`>= 0`,e);return e}function se(e,t=void 0){return t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),e=oe(e),async function*(){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)throw new s;for await(let n of this){var r;if(t!=null&&(r=t.signal)!=null&&r.aborted)throw new s;e--<=0&&(yield n)}}.call(this)}function ce(e,t=void 0){return t!=null&&u(t,`options`),t?.signal!=null&&c(t.signal,`options.signal`),e=oe(e),async function*(){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)throw new s;for await(let n of this){var r;if(t!=null&&(r=t.signal)!=null&&r.aborted)throw new s;if(e-- >0&&(yield n),e<=0)return}}.call(this)}t.exports.streamReturningOperators={asIndexedPairs:v(N,`readable.asIndexedPairs will be removed in a future version.`),drop:se,filter:I,flatMap:ae,map:M,take:ce,compose:j},t.exports.promiseReturningOperators={every:ee,forEach:F,reduce:re,toArray:ie,some:P,find:te}})),_8=n(((e,t)=>{var{ArrayPrototypePop:n,Promise:r}=W6(),{isIterable:i,isNodeStream:a,isWebStream:o}=Q6(),{pipelineImpl:s}=m8(),{finished:c}=$6();v8();function l(...e){return new r((t,r)=>{let c,l,u=e[e.length-1];if(u&&typeof u==`object`&&!a(u)&&!i(u)&&!o(u)){let t=n(e);c=t.signal,l=t.end}s(e,(e,n)=>{e?r(e):t(n)},{signal:c,end:l})})}t.exports={finished:c,pipeline:l}})),v8=n(((e,t)=>{var{Buffer:n}=$2(),{ObjectDefineProperty:r,ObjectKeys:i,ReflectApply:a}=W6(),{promisify:{custom:o}}=Y6(),{streamReturningOperators:s,promiseReturningOperators:c}=g8(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=K6(),u=h8(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=i8(),{pipeline:p}=m8(),{destroyer:m}=e8(),h=$6(),g=_8(),_=Q6(),v=t.exports=t8().Stream;v.isDestroyed=_.isDestroyed,v.isDisturbed=_.isDisturbed,v.isErrored=_.isErrored,v.isReadable=_.isReadable,v.isWritable=_.isWritable,v.Readable=c8();for(let e of i(s)){let t=s[e];function n(...e){if(new.target)throw l();return v.Readable.from(a(t,this,e))}r(n,`name`,{__proto__:null,value:t.name}),r(n,`length`,{__proto__:null,value:t.length}),r(v.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let e of i(c)){let t=c[e];function n(...e){if(new.target)throw l();return a(t,this,e)}r(n,`name`,{__proto__:null,value:t.name}),r(n,`length`,{__proto__:null,value:t.length}),r(v.Readable.prototype,e,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}v.Writable=l8(),v.Duplex=d8(),v.Transform=f8(),v.PassThrough=p8(),v.pipeline=p;var{addAbortSignal:y}=n8();v.addAbortSignal=y,v.finished=h,v.destroy=m,v.compose=u,v.setDefaultHighWaterMark=d,v.getDefaultHighWaterMark=f,r(v,`promises`,{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),r(p,o,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),r(h,o,{__proto__:null,enumerable:!0,get(){return g.finished}}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}})),y8=n(((e,t)=>{var n=v8(),r=_8(),i=n.Readable.destroy;t.exports=n.Readable,t.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,t.exports._isUint8Array=n._isUint8Array,t.exports.isDisturbed=n.isDisturbed,t.exports.isErrored=n.isErrored,t.exports.isReadable=n.isReadable,t.exports.Readable=n.Readable,t.exports.Writable=n.Writable,t.exports.Duplex=n.Duplex,t.exports.Transform=n.Transform,t.exports.PassThrough=n.PassThrough,t.exports.addAbortSignal=n.addAbortSignal,t.exports.finished=n.finished,t.exports.destroy=n.destroy,t.exports.destroy=i,t.exports.pipeline=n.pipeline,t.exports.compose=n.compose,Object.defineProperty(n,`promises`,{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=n.Stream,t.exports.default=t.exports}))(),b8=class extends y8.Readable{close(e=()=>null){try{super.destroy(),super.emit(`close`),e()}catch(t){e(new $(Q.EIO,t.toString()))}}},x8=class extends y8.Writable{close(e=()=>null){try{super.destroy(),super.emit(`close`),e()}catch(t){e(new $(Q.EIO,t.toString()))}}},S8=e({FileHandle:()=>E8,access:()=>Q8,appendFile:()=>L8,chmod:()=>K8,chown:()=>W8,constants:()=>t4,copyFile:()=>t5,cp:()=>r5,exists:()=>O8,lchmod:()=>q8,lchown:()=>G8,link:()=>V8,lstat:()=>A8,lutimes:()=>Y8,mkdir:()=>z8,mkdtemp:()=>e5,open:()=>P8,opendir:()=>n5,readFile:()=>F8,readdir:()=>B8,readlink:()=>U8,realpath:()=>X8,rename:()=>D8,rm:()=>$8,rmdir:()=>R8,stat:()=>k8,statfs:()=>i5,symlink:()=>H8,truncate:()=>j8,unlink:()=>M8,utimes:()=>J8,watch:()=>Z8,writeFile:()=>I8}),C8=$2(),w8=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},T8=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),E8=class{constructor(e){let t=typeof e!=`number`;this.fd=t?M3(e):e,this.file=t?e:N3(e)}async chown(e,t){await this.file.chown(e,t),J3(`change`,this.file.path)}async chmod(e){let t=U2(e,-1);if(t<0)throw new $(Q.EINVAL,`Invalid mode.`);await this.file.chmod(t),J3(`change`,this.file.path)}datasync(){return this.file.datasync()}sync(){return this.file.sync()}async truncate(e){if(e||=0,e<0)throw new $(Q.EINVAL);await this.file.truncate(e),J3(`change`,this.file.path)}async utimes(e,t){await this.file.utimes(W2(e),W2(t)),J3(`change`,this.file.path)}async appendFile(e,t={}){let n=K2(t,`utf8`,`a`,420);if(!h3(l3(n.flag)))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof e!=`string`&&!n.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let r=typeof e==`string`?C8.Buffer.from(e,n.encoding):e;await this.file.write(r,0,r.length),J3(`change`,this.file.path)}read(e,t,n,r){return isNaN(+r)&&(r=this.file.position),this.file.read(e,t,n,r)}async readFile(e){let t=K2(e,null,`r`,292);if(!f3(l3(t.flag)))throw new $(Q.EINVAL,`Flag passed must allow for reading.`);let{size:n}=await this.stat(),{buffer:r}=await this.file.read(new Uint8Array(n),0,n,0),i=C8.Buffer.from(r);return t.encoding?i.toString(t.encoding):i}readableWebStream(e={}){let t=async e=>{try{let t=64*1024,n=0,r=0,i=NaN;for(;i>0;){let a=await this.read(new Uint8Array(t),0,t,r);if(!a.bytesRead){e.close();return}if(e.enqueue(a.buffer.slice(0,a.bytesRead)),r+=a.bytesRead,++n>=1e7)throw new $(Q.EFBIG,`Too many iterations on readable stream`,this.file.path,`FileHandle.readableWebStream`);i=a.bytesRead}}catch(t){e.error(t)}},n=globalThis;if(!(`ReadableStream`in n))throw new $(Q.ENOSYS,`ReadableStream is missing on globalThis`);return new n.ReadableStream({start:t,type:e.type})}readLines(e){throw $.With(`ENOSYS`,this.file.path,`FileHandle.readLines`)}[Symbol.asyncDispose](){return this.close()}async stat(e){let t=await this.file.stat();if(!t.hasAccess(4))throw $.With(`EACCES`,this.file.path,`stat`);return e?.bigint?new i3(t):t}async write(e,t,n,r){let i,a,o;if(typeof e==`string`){r=typeof t==`number`?t:null;let s=typeof n==`string`?n:`utf8`;a=0,i=C8.Buffer.from(e,s),o=i.length}else i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=t,o=n,r=typeof r==`number`?r:null;r??=this.file.position;let s=await this.file.write(i,a,o,r);return J3(`change`,this.file.path),{buffer:i,bytesWritten:s}}async writeFile(e,t={}){let n=K2(t,`utf8`,`w`,420);if(!p3(l3(n.flag)))throw new $(Q.EINVAL,`Flag passed must allow for writing.`);if(typeof e!=`string`&&!n.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let r=typeof e==`string`?C8.Buffer.from(e,n.encoding):e;await this.file.write(r,0,r.length,0),J3(`change`,this.file.path)}async close(){await this.file.close(),A3.delete(this.fd)}async writev(e,t){let n=0;for(let r of e)n+=(await this.write(r,0,r.length,t+n)).bytesWritten;return{bytesWritten:n,buffers:e}}async readv(e,t){let n=0;for(let r of e)n+=(await this.read(r,0,r.byteLength,t+n)).bytesRead;return{bytesRead:n,buffers:e}}createReadStream(e){let t=new b8({highWaterMark:e?.highWaterMark||64*1024,encoding:e.encoding,read:async e=>{try{let n=await this.read(new Uint8Array(e),0,e,this.file.position);t.push(n.bytesRead?n.buffer.slice(0,n.bytesRead):null),this.file.position+=n.bytesRead}catch(e){t.destroy(e)}}});return t.path=this.file.path,t}createWriteStream(e){let t=new x8({highWaterMark:e?.highWaterMark,encoding:e?.encoding,write:async(e,t,n)=>{try{let{bytesWritten:r}=await this.write(e,null,t);n(r==e.length?null:Error(`Failed to write full chunk`))}catch(e){n(e)}}});return t.path=this.file.path,t}};async function D8(e,t){e=G2(e),t=G2(t);let n=L3(e),r=L3(t);if(!(await k8(P2(e))).hasAccess(2))throw $.With(`EACCES`,e,`rename`);try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),J3(`rename`,e.toString());return}await I8(t,await F8(e)),await M8(e),J3(`rename`,e.toString())}catch(i){throw z3(i,{[n.path]:e,[r.path]:t})}}async function O8(e){try{let{fs:t,path:n}=L3(await X8(e));return await t.exists(n)}catch(e){if(e instanceof $&&e.code==`ENOENT`)return!1;throw e}}async function k8(e,t){e=G2(e);let{fs:n,path:r}=L3(await O8(e)?await X8(e):e);try{let i=await n.stat(r);if(!i.hasAccess(4))throw $.With(`EACCES`,e,`stat`);return t?.bigint?new i3(i):i}catch(t){throw z3(t,{[r]:e})}}async function A8(e,t){e=G2(e);let{fs:n,path:r}=L3(e);try{let e=await n.stat(r);return t?.bigint?new i3(e):e}catch(t){throw z3(t,{[r]:e})}}async function j8(e,t=0){let n={stack:[],error:void 0,hasError:!1};try{await w8(n,await P8(e,`r+`),!0).truncate(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=T8(n);e&&await e}}async function M8(e){e=G2(e);let{fs:t,path:n}=L3(e);try{if(!(await t.stat(n)).hasAccess(2))throw $.With(`EACCES`,n,`unlink`);await t.unlink(n),J3(`rename`,e.toString())}catch(t){throw z3(t,{[n]:e})}}async function N8(e,t,n=420,r){e=G2(e);let i=U2(n,420),a=l3(t);e=r&&await O8(e)?await X8(e):e;let{fs:o,path:s}=L3(e),c=await o.stat(s).catch(()=>null);if(!c){if(!p3(a)&&!h3(a)||a==`r+`)throw $.With(`ENOENT`,e,`_open`);let t=await o.stat(P2(s));if(!t.hasAccess(2))throw $.With(`EACCES`,P2(e),`_open`);if(!t.isDirectory())throw $.With(`ENOTDIR`,P2(e),`_open`);return new E8(await o.createFile(s,a,i))}if(!c.hasAccess(d3(a)))throw $.With(`EACCES`,e,`_open`);if(g3(a))throw $.With(`EEXIST`,e,`_open`);let l=new E8(await o.openFile(s,a));return m3(a)&&(await l.truncate(0),await l.sync()),l}async function P8(e,t=`r`,n=420){return await N8(e,t,n,!0)}async function F8(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=K2(t,null,`r`,420);return await w8(n,typeof e==`object`&&`fd`in e?e:await P8(e,r.flag,r.mode),!0).readFile(r)}catch(e){n.error=e,n.hasError=!0}finally{let e=T8(n);e&&await e}}async function I8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=K2(n,`utf8`,`w+`,420),a=w8(r,e instanceof E8?e:await P8(e.toString(),i.flag,i.mode),!0),o=t;if(typeof o!=`string`&&!(o instanceof Uint8Array))throw new $(Q.EINVAL,`Iterables and streams not supported`,a.file.path,`writeFile`);await a.writeFile(o,i)}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function L8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{let i=K2(n,`utf8`,`a`,420);if(!h3(l3(i.flag)))throw new $(Q.EINVAL,`Flag passed to appendFile must allow for appending.`);if(typeof t!=`string`&&!i.encoding)throw new $(Q.EINVAL,`Encoding not specified`);let a=typeof t==`string`?C8.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await w8(r,typeof e==`object`&&`fd`in e?e:await P8(e,i.flag,i.mode),!0).appendFile(a,i)}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function R8(e){e=G2(e),e=await O8(e)?await X8(e):e;let{fs:t,path:n}=L3(e);try{if(!(await t.stat(n)).hasAccess(2))throw $.With(`EACCES`,n,`rmdir`);await t.rmdir(n),J3(`rename`,e.toString())}catch(t){throw z3(t,{[n]:e})}}async function z8(e,t){t=typeof t==`object`?t:{mode:t};let n=U2(t?.mode,511);e=G2(e),e=await O8(e)?await X8(e):e;let{fs:r,path:i}=L3(e),a={[i]:e};try{if(!t?.recursive){if(!(await r.stat(P2(i))).hasAccess(2))throw $.With(`EACCES`,P2(i),`mkdir`);await r.mkdir(i,n),J3(`rename`,e.toString());return}let o=[];for(let t=i,n=e;!await r.exists(t);t=P2(t),n=P2(n))o.unshift(t),a[t]=n;for(let e of o){if(!(await r.stat(P2(e))).hasAccess(2))throw $.With(`EACCES`,P2(e),`mkdir`);await r.mkdir(e,n),J3(`rename`,e)}return o[0]}catch(e){throw z3(e,a)}}async function B8(e,t){if(e=G2(e),!(await k8(e)).hasAccess(4))throw $.With(`EACCES`,e,`readdir`);e=await O8(e)?await X8(e):e;let{fs:n,path:r}=L3(e),i;try{i=await n.readdir(r)}catch(t){throw z3(t,{[r]:e})}for(let t of P3.keys())if(t.startsWith(e)){let n=t.slice(e.length);if(n.includes(`/`)||n.length==0)continue;i.push(n)}let a=[];for(let n of i)a.push(typeof t==`object`&&t?.withFileTypes?new H6(n,await k8(N2(e,n))):n);return a}async function V8(e,t){if(e=G2(e),!(await k8(P2(e))).hasAccess(4))throw $.With(`EACCES`,P2(e),`link`);if(t=G2(t),!(await k8(P2(t))).hasAccess(2))throw $.With(`EACCES`,P2(t),`link`);let{fs:n,path:r}=L3(e),i=L3(t);if(n!=i.fs)throw $.With(`EXDEV`,t,`link`);try{if(!(await n.stat(r)).hasAccess(2))throw $.With(`EACCES`,r,`link`);return await n.link(r,i.path)}catch(n){throw z3(n,{[i.path]:t,[r]:e})}}async function H8(e,t,n=`file`){if(![`file`,`dir`,`junction`].includes(n))throw new $(Q.EINVAL,`Invalid symlink type: `+n);if(await O8(t))throw $.With(`EEXIST`,t.toString(),`symlink`);await I8(t,e.toString()),await(await N8(t,`r+`,420,!1)).file._setType(p4)}async function U8(e,t){let n={stack:[],error:void 0,hasError:!1};try{let r=await w8(n,await N8(G2(e),`r`,420,!1),!0).readFile(),i=typeof t==`object`?t?.encoding:t;return i==`buffer`?r:r.toString(i)}catch(e){n.error=e,n.hasError=!0}finally{let e=T8(n);e&&await e}}async function W8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await w8(r,await P8(e,`r+`),!0).chown(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function G8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await w8(r,await N8(e,`r+`,420,!1),!0).chown(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function K8(e,t){let n={stack:[],error:void 0,hasError:!1};try{await w8(n,await P8(e,`r+`),!0).chmod(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=T8(n);e&&await e}}async function q8(e,t){let n={stack:[],error:void 0,hasError:!1};try{await w8(n,await N8(e,`r+`,420,!1),!0).chmod(t)}catch(e){n.error=e,n.hasError=!0}finally{let e=T8(n);e&&await e}}async function J8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await w8(r,await P8(e,`r+`),!0).utimes(t,n)}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function Y8(e,t,n){let r={stack:[],error:void 0,hasError:!1};try{await w8(r,await N8(e,`r+`,420,!1),!0).utimes(new Date(t),new Date(n))}catch(e){r.error=e,r.hasError=!0}finally{let e=T8(r);e&&await e}}async function X8(e,t){e=G2(e);let{base:n,dir:r}=I2(e),i=N2(r==`/`?`/`:await X8(r),n),{fs:a,path:o,mountPoint:s}=L3(i);try{return(await a.stat(o)).isSymbolicLink()?X8(s+await U8(i)):i}catch(e){throw z3(e,{[o]:i})}}function Z8(e,t={}){return{[Symbol.asyncIterator](){let n=new U3(e.toString(),typeof t==`string`?{encoding:t}:t);function r(e){return function(){let t=Promise.withResolvers();return n.on(`change`,(n,r)=>{t.resolve({value:{eventType:n,filename:r},done:e})}),t.promise}}return{next:r(!1),return:r(!0),throw:r(!0)}}}}async function Q8(e,t=0){if(!(await k8(e)).hasAccess(t))throw new $(Q.EACCES)}async function $8(e,t){switch(e=G2(e),(await k8(e)).mode&d4){case g4:if(t?.recursive)for(let n of await B8(e))await $8(N2(e,n),t);await R8(e);return;case m4:case p4:await M8(e);return;case h4:case _4:case v4:case f4:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}}async function e5(e,t){let n=typeof t==`object`?t?.encoding:t||`utf8`,r=`/tmp/${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await z8(r),n==`buffer`?C8.Buffer.from(r):r}async function t5(e,t,n){if(e=G2(e),t=G2(t),n&&n&1&&await O8(t))throw new $(Q.EEXIST,`Destination file already exists.`,t,`copyFile`);await I8(t,await F8(e)),J3(`rename`,t.toString())}async function n5(e,t){return e=G2(e),new U6(e)}async function r5(e,t,n){e=G2(e),t=G2(t);let r=await A8(e);if(n?.errorOnExist&&await O8(t))throw new $(Q.EEXIST,`Destination file or directory already exists.`,t,`cp`);switch(r.mode&d4){case g4:if(!n?.recursive)throw new $(Q.EISDIR,e+` is a directory (not copied)`,e,`cp`);await z8(t,{recursive:!0});for(let r of await B8(e,{withFileTypes:!0}))n.filter&&!n.filter(N2(e,r.name),N2(t,r.name))||await r5(N2(e,r.name),N2(t,r.name),n);break;case m4:case p4:await t5(e,t);break;case h4:case _4:case v4:case f4:default:throw new $(Q.EPERM,`File type not supported`,e,`rm`)}n?.preserveTimestamps&&await J8(t,r.atime,r.mtime)}async function i5(e,t){e=G2(e);let{fs:n}=L3(e);return V3(n,t?.bigint)}var a5=$2(),o5=()=>{};function s5(e,t,n=o5){D8(e,t).then(()=>n()).catch(n)}function c5(e,t=o5){O8(e).then(t).catch(()=>t(!1))}function l5(e,t,n=o5){n=typeof t==`function`?t:n,k8(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function u5(e,t,n=o5){n=typeof t==`function`?t:n,A8(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function d5(e,t=0,n=o5){n=typeof t==`function`?t:n,j8(e,typeof t==`number`?t:0).then(()=>n()).catch(n)}function f5(e,t=o5){M8(e).then(()=>t()).catch(t)}function p5(e,t,n,r=o5){let i=U2(n,420);r=typeof n==`function`?n:r,P8(e,t,i).then(e=>r(void 0,e.fd)).catch(r)}function m5(e,t,n=o5){n=typeof t==`function`?t:n,F8(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function h5(e,t,n,r=o5){r=typeof n==`function`?n:r,I8(e,t,typeof n==`function`?null:n).then(()=>r(void 0)).catch(r)}function g5(e,t,n,r=o5){let i=typeof n==`function`?void 0:n;r=typeof n==`function`?n:r,L8(e,t,i).then(()=>r()).catch(r)}function _5(e,t,n=o5){n=typeof t==`function`?t:n,N3(e).stat().then(e=>n(void 0,typeof t==`object`&&t?.bigint?new i3(e):e)).catch(n)}function v5(e,t=o5){new E8(e).close().then(()=>t()).catch(t)}function y5(e,t,n=o5){let r=typeof t==`number`?t:0;n=typeof t==`function`?t:n;let i=N3(e);if(r<0)throw new $(Q.EINVAL);i.truncate(r).then(()=>n()).catch(n)}function b5(e,t=o5){N3(e).sync().then(()=>t()).catch(t)}function x5(e,t=o5){N3(e).datasync().then(()=>t()).catch(t)}function S5(e,t,n,r,i,a=o5){let o,s,c,l,u,d=new E8(e);if(typeof t==`string`){switch(u=`utf8`,typeof n){case`function`:a=n;break;case`number`:l=n,u=typeof r==`string`?r:`utf8`,a=typeof i==`function`?i:a;break;default:a=typeof r==`function`?r:typeof i==`function`?i:a,a(new $(Q.EINVAL,`Invalid arguments.`));return}o=a5.Buffer.from(t),s=0,c=o.length;let e=a;d.write(o,s,c,l).then(({bytesWritten:t})=>e(void 0,t,o.toString(u))).catch(e)}else{o=a5.Buffer.from(t.buffer),s=n,c=r,l=typeof i==`number`?i:null;let e=typeof i==`function`?i:a;d.write(o,s,c,l).then(({bytesWritten:t})=>e(void 0,t,o)).catch(e)}}function C5(e,t,n,r,i,a=o5){new E8(e).read(t,n,r,i).then(({bytesRead:e,buffer:t})=>a(void 0,e,t)).catch(a)}function w5(e,t,n,r=o5){new E8(e).chown(t,n).then(()=>r()).catch(r)}function T5(e,t,n){new E8(e).chmod(t).then(()=>n()).catch(n)}function E5(e,t,n,r=o5){new E8(e).utimes(t,n).then(()=>r()).catch(r)}function D5(e,t=o5){R8(e).then(()=>t()).catch(t)}function O5(e,t,n=o5){z8(e,t).then(()=>n()).catch(n)}function k5(e,t,n=o5){n=typeof t==`function`?t:n,B8(e,typeof t==`function`?{}:t).then(e=>n(void 0,e)).catch(n)}function A5(e,t,n=o5){V8(e,t).then(()=>n()).catch(n)}function j5(e,t,n,r=o5){let i=typeof n==`string`?n:`file`;r=typeof n==`function`?n:r,H8(e,t,i).then(()=>r()).catch(r)}function M5(e,t,n=o5){n=typeof t==`function`?t:n,U8(e).then(e=>n(void 0,e)).catch(n)}function N5(e,t,n,r=o5){W8(e,t,n).then(()=>r()).catch(r)}function P5(e,t,n,r=o5){G8(e,t,n).then(()=>r()).catch(r)}function F5(e,t,n=o5){K8(e,t).then(()=>n()).catch(n)}function I5(e,t,n=o5){q8(e,t).then(()=>n()).catch(n)}function L5(e,t,n,r=o5){J8(e,t,n).then(()=>r()).catch(r)}function R5(e,t,n,r=o5){Y8(e,t,n).then(()=>r()).catch(r)}function z5(e,t,n=o5){n=typeof t==`function`?t:n,X8(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function B5(e,t,n=o5){let r=typeof t==`number`?t:4;n=typeof t==`function`?t:n,Q8(e,r).then(()=>n()).catch(n)}var V5=new Map;function H5(e,t,n){let r=G2(e.toString()),i=typeof t==`function`?{}:t;if(typeof t==`function`&&(n=t),!n)throw new $(Q.EINVAL,`No listener specified`,e.toString(),`watchFile`);if(V5.has(r)){let e=V5.get(r);e&&e.listeners.add(n);return}let a=new W3(r,i);a.on(`change`,(e,t)=>{let n=V5.get(r);if(n)for(let r of n.listeners)r(e,t)}),V5.set(r,{watcher:a,listeners:new Set})}function U5(e,t=o5){let n=G2(e.toString()),r=V5.get(n);r&&(t&&t!==o5?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),V5.delete(n)))}function W5(e,t,n){let r=new U3(G2(e),typeof t==`object`?t:{});return n=typeof t==`function`?t:n,r.on(`change`,n||o5),r}function G5(e,t){let n=typeof t==`object`?t:{encoding:t},r,i=new b8({highWaterMark:n.highWaterMark||64*1024,encoding:n.encoding||`utf8`,async read(t){try{r||=await P8(e,`r`,n?.mode);let a=await r.read(new Uint8Array(t),0,t,r.file.position);i.push(a.bytesRead?a.buffer.slice(0,a.bytesRead):null),r.file.position+=a.bytesRead,a.bytesRead||await r.close()}catch(e){await r?.close(),i.destroy(e)}},destroy(e,t){r?.close().then(()=>t(e)).catch(o5)}});return i.path=e.toString(),i}function K5(e,t){let n=typeof t==`object`?t:{encoding:t},r,i=new x8({highWaterMark:n?.highWaterMark,async write(t,i,a){try{r||=await P8(e,`w`,n?.mode||438),await r.write(t,0,i),a(void 0)}catch(e){await r?.close(),a(e)}},destroy(e,t){t(e),r?.close().then(()=>t(e)).catch(t)},final(e){r?.close().then(()=>e()).catch(e)}});return i.path=e.toString(),i}function q5(e,t,n=o5){n=typeof t==`function`?t:n,$8(e,typeof t==`function`?void 0:t).then(()=>n(void 0)).catch(n)}function J5(e,t,n=o5){n=typeof t==`function`?t:n,e5(e,typeof t==`function`?null:t).then(e=>n(void 0,e)).catch(n)}function Y5(e,t,n,r=o5){r=typeof n==`function`?n:r,t5(e,t,typeof n==`function`?void 0:n).then(()=>r(void 0)).catch(r)}function X5(e,t,n,r=o5){r=typeof n==`function`?n:r,new E8(e).readv(t,typeof n==`function`?void 0:n).then(({buffers:e,bytesRead:t})=>r(void 0,t,e)).catch(r)}function Z5(e,t,n,r=o5){r=typeof n==`function`?n:r,new E8(e).writev(t,typeof n==`function`?void 0:n).then(({buffers:e,bytesWritten:t})=>r(void 0,t,e)).catch(r)}function Q5(e,t,n=o5){n=typeof t==`function`?t:n,n5(e,typeof t==`function`?void 0:t).then(e=>n(void 0,e)).catch(n)}function $5(e,t,n,r=o5){r=typeof n==`function`?n:r,r5(e,t,typeof n==`function`?void 0:n).then(()=>r(void 0)).catch(r)}function e7(e,t,n=o5){n=typeof t==`function`?t:n,i5(e,typeof t==`function`?void 0:t).then(e=>n(void 0,e)).catch(n)}async function t7(e,t){let n=await P8(e.toString(),`r`),r=await n.readFile();return await n.close(),new Blob([r],t)}var n7=e({BigIntStatsFs:()=>s3,Dir:()=>U6,Dirent:()=>H6,ReadStream:()=>b8,Stats:()=>r3,StatsFs:()=>o3,WriteStream:()=>x8,access:()=>B5,accessSync:()=>N6,appendFile:()=>g5,appendFileSync:()=>l6,chmod:()=>F5,chmodSync:()=>O6,chown:()=>N5,chownSync:()=>E6,close:()=>v5,closeSync:()=>d6,constants:()=>t4,copyFile:()=>Y5,copyFileSync:()=>I6,cp:()=>$5,cpSync:()=>B6,createReadStream:()=>G5,createWriteStream:()=>K5,exists:()=>c5,existsSync:()=>Q3,fchmod:()=>T5,fchmodSync:()=>v6,fchown:()=>w5,fchownSync:()=>_6,fdatasync:()=>x5,fdatasyncSync:()=>m6,fstat:()=>_5,fstatSync:()=>u6,fsync:()=>b5,fsyncSync:()=>p6,ftruncate:()=>y5,ftruncateSync:()=>f6,futimes:()=>E5,futimesSync:()=>y6,lchmod:()=>I5,lchmodSync:()=>k6,lchown:()=>P5,lchownSync:()=>D6,link:()=>A5,linkSync:()=>C6,lopenSync:()=>a6,lstat:()=>u5,lstatSync:()=>e6,lutimes:()=>R5,lutimesSync:()=>j6,mkdir:()=>O5,mkdirSync:()=>x6,mkdtemp:()=>J5,mkdtempSync:()=>F6,mount:()=>F3,mountObject:()=>B3,mounts:()=>P3,open:()=>p5,openAsBlob:()=>t7,openSync:()=>i6,opendir:()=>Q5,opendirSync:()=>z6,promises:()=>S8,read:()=>C5,readFile:()=>m5,readFileSync:()=>s6,readSync:()=>g6,readdir:()=>k5,readdirSync:()=>S6,readlink:()=>M5,readlinkSync:()=>T6,readv:()=>X5,readvSync:()=>L6,realpath:()=>z5,realpathSync:()=>M6,rename:()=>s5,renameSync:()=>Z3,rm:()=>q5,rmSync:()=>P6,rmdir:()=>D5,rmdirSync:()=>b6,stat:()=>l5,statSync:()=>$3,statfs:()=>e7,statfsSync:()=>V6,symlink:()=>j5,symlinkSync:()=>w6,truncate:()=>d5,truncateSync:()=>t6,umount:()=>I3,unlink:()=>f5,unlinkSync:()=>n6,unwatchFile:()=>U5,utimes:()=>L5,utimesSync:()=>A6,watch:()=>W5,watchFile:()=>H5,write:()=>S5,writeFile:()=>h5,writeFileSync:()=>c6,writeSync:()=>h6,writev:()=>Z5,writevSync:()=>R6});function r7(e){return Y2(e)||q2(e)||e instanceof y3}async function i7(e,t=0){if(typeof e!=`object`||!e)throw new $(Q.EINVAL,`Invalid options on mount configuration`);if(!r7(e))throw new $(Q.EINVAL,`Invalid mount configuration`);if(e instanceof y3)return e;q2(e)&&(e={backend:e});for(let[n,r]of Object.entries(e))if(n!=`backend`&&r7(r)){if(t>10)throw new $(Q.EINVAL,`Invalid configuration, too deep and possibly infinite`);e[n]=await i7(r,++t)}let{backend:n}=e;if(!await n.isAvailable())throw new $(Q.EPERM,`Backend not available: `+n.name);await J2(n,e);let r=await n.create(e);return r._disableSync=e.disableAsyncCache||!1,await r.ready(),r}async function a7(e){if(!Y2(e))throw TypeError(`Invalid single mount point configuration`);let t=await i7(e);I3(`/`),F3(`/`,t)}var o7=function(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose]}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},s7=(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r});function c7(e){class t extends e{constructor(){super(...arguments),this._queue=[],this._isInitialized=!1}get _queueRunning(){return!!this._queue.length}queueDone(){return new Promise(e=>{let t=()=>this._queueRunning?setTimeout(t):e();t()})}async ready(){if(await super.ready(),!(this._isInitialized||this._disableSync)){this.checkSync(),await this._sync.ready();try{await this.crossCopy(`/`),this._isInitialized=!0}catch(e){throw this._isInitialized=!1,e}}}checkSync(e,t){if(this._disableSync)throw new $(Q.ENOTSUP,`Sync caching has been disabled for this async file system`,e,t);if(!this._sync)throw new $(Q.ENOTSUP,`No sync cache is attached to this async file system`,e,t)}renameSync(e,t){this.checkSync(e,`rename`),this._sync.renameSync(e,t),this.queue(`rename`,e,t)}statSync(e){return this.checkSync(e,`stat`),this._sync.statSync(e)}createFileSync(e,t,n){return this.checkSync(e,`createFile`),this._sync.createFileSync(e,t,n),this.queue(`createFile`,e,t,n),this.openFileSync(e,t)}openFileSync(e,t){this.checkSync(e,`openFile`);let n=this._sync.openFileSync(e,t),r=n.statSync(),i=new Uint8Array(r.size);return n.readSync(i),new v3(this,e,t,r,i)}unlinkSync(e){this.checkSync(e,`unlinkSync`),this._sync.unlinkSync(e),this.queue(`unlink`,e)}rmdirSync(e){this.checkSync(e,`rmdir`),this._sync.rmdirSync(e),this.queue(`rmdir`,e)}mkdirSync(e,t){this.checkSync(e,`mkdir`),this._sync.mkdirSync(e,t),this.queue(`mkdir`,e,t)}readdirSync(e){return this.checkSync(e,`readdir`),this._sync.readdirSync(e)}linkSync(e,t){this.checkSync(e,`link`),this._sync.linkSync(e,t),this.queue(`link`,e,t)}syncSync(e,t,n){this.checkSync(e,`sync`),this._sync.syncSync(e,t,n),this.queue(`sync`,e,t,n)}existsSync(e){return this.checkSync(e,`exists`),this._sync.existsSync(e)}async crossCopy(e){this.checkSync(e,`crossCopy`);let t=await this.stat(e);if(!t.isDirectory()){let n={stack:[],error:void 0,hasError:!1};try{let r=o7(n,await this.openFile(e,l3(`r`)),!0),i=o7(n,this._sync.createFileSync(e,l3(`w`),t.mode),!1),a=new Uint8Array(t.size);await r.read(a),i.writeSync(a,0,t.size);return}catch(e){n.error=e,n.hasError=!0}finally{let e=s7(n);e&&await e}}if(e!==`/`){let t=await this.stat(e);this._sync.mkdirSync(e,t.mode)}let n=await this.readdir(e);for(let t of n)await this.crossCopy(N2(e,t))}async _next(){if(!this._queueRunning)return;let[e,...t]=this._queue.shift();await this[e](...t),await this._next()}queue(...e){this._queue.push(e),this._next()}}return t}(function(e){return function(t){function n(n){t.error=t.hasError?new e(n,t.error,`An error was suppressed during disposal.`):n,t.hasError=!0}function r(){for(;t.stack.length;){var e=t.stack.pop();try{var i=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(i).then(r,function(e){return n(e),r()})}catch(e){n(e)}}if(t.hasError)throw t.error}return r()}})(typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r}),Symbol.dispose;function l7(e){switch(e.name){case`IndexSizeError`:case`HierarchyRequestError`:case`InvalidCharacterError`:case`InvalidStateError`:case`SyntaxError`:case`NamespaceError`:case`TypeMismatchError`:case`ConstraintError`:case`VersionError`:case`URLMismatchError`:case`InvalidNodeTypeError`:return`EINVAL`;case`WrongDocumentError`:return`EXDEV`;case`NoModificationAllowedError`:case`InvalidModificationError`:case`InvalidAccessError`:case`SecurityError`:case`NotAllowedError`:return`EACCES`;case`NotFoundError`:return`ENOENT`;case`NotSupportedError`:return`ENOTSUP`;case`InUseAttributeError`:return`EBUSY`;case`NetworkError`:return`ENETDOWN`;case`AbortError`:return`EINTR`;case`QuotaExceededError`:return`ENOSPC`;case`TimeoutError`:return`ETIMEDOUT`;case`ReadOnlyError`:return`EROFS`;case`DataCloneError`:case`EncodingError`:case`NotReadableError`:case`DataError`:case`TransactionInactiveError`:case`OperationError`:case`UnknownError`:default:return`EIO`}}function u7(e,t,n){if(e instanceof $)return e;let r=new $(e instanceof DOMException?Q[l7(e)]:Q.EIO,e.message,t,n);return r.stack=e.stack,r.cause=e.cause,r}function d7(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=t=>{t.preventDefault(),n(u7(e.error))}})}var f7=class extends E3{constructor(e,t){super(t),this.tx=e,this.store=t,this._idb=e.objectStore(t.name)}get(e){return d7(this._idb.get(e.toString()))}async set(e,t){await d7(this._idb.put(t,e.toString()))}remove(e){return d7(this._idb.delete(e.toString()))}async commit(){if(this.done)return;let{promise:e,resolve:t,reject:n}=Promise.withResolvers();return this.done=!0,this.tx.oncomplete=()=>t(),this.tx.onerror=()=>n(u7(this.tx.error)),this.tx.commit(),e}async abort(){if(this.done)return;this.done=!0;let{promise:e,resolve:t,reject:n}=Promise.withResolvers();return this.tx.onabort=()=>t(),this.tx.onerror=()=>n(u7(this.tx.error)),this.tx.abort(),e}};async function p7(e,t=globalThis.indexedDB){let n=t.open(e);return n.onupgradeneeded=()=>{let t=n.result;t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e)},await d7(n)}var m7=class{constructor(e){this.db=e}sync(){throw Error(`Method not implemented.`)}get name(){return this.db.name}clear(){return d7(this.db.transaction(this.name,`readwrite`).objectStore(this.name).clear())}clearSync(){throw $.With(`ENOSYS`,void 0,`IndexedDBStore.clearSync`)}transaction(){return new f7(this.db.transaction(this.name,`readwrite`),this)}};const h7={name:`IndexedDB`,options:{storeName:{type:`string`,required:!1,description:`The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name.`},idbFactory:{type:`object`,required:!1,description:`The IDBFactory to use. Defaults to globalThis.indexedDB.`}},async isAvailable(e=globalThis.indexedDB){try{return e instanceof IDBFactory?(await d7(e.open(`__zenfs_test`)),e.deleteDatabase(`__zenfs_test`),!0):!1}catch{return e.deleteDatabase(`__zenfs_test`),!1}},async create(e){let t=new m7(await p7(e.storeName||`zenfs`,e.idbFactory)),n=new(c7(C3))(t);return e?.disableAsyncCache||(n._sync=k3.create({name:`idb-cache`})),n}},g7=async()=>(await a7({backend:h7}),n7);var _7,v7=async()=>(_7||=(await g7()).promises,_7),y7=class{onDidChangeFileEmitter=new $u;onDidChangeFile=this.onDidChangeFileEmitter.event;async stat(e){let t=await(await v7()).stat(encodeURI(e.path));return{...t,type:t.isDirectory()?PK.Directory:PK.File,ctime:t.ctime.getTime(),mtime:t.mtime.getTime()}}async readDirectory(e){let t=await v7(),n=await t.readdir(encodeURI(e.path));return await Promise.all(n.map(decodeURI).map(async n=>[n,await t.stat(encodeURI(L1(e.path,n))).then(e=>e.isDirectory()?PK.Directory:PK.File)]))}async createDirectory(e){await(await v7()).mkdir(encodeURI(e.path))}async readFile(e){return(await v7()).readFile(encodeURI(e.path))}async writeFile(e,t){await(await v7()).writeFile(encodeURI(e.path),t)}async delete(e){await(await v7()).unlink(encodeURI(e.path))}async rename(e,t,n){let r=await v7();if(!n.overwrite)try{throw await r.stat(encodeURI(t.path)),Error(`EEXIST`)}catch{}await r.rename(encodeURI(e.path),encodeURI(t.path))}async copy(e,t,n){let r=await v7();if(!n.overwrite)try{throw await r.stat(encodeURI(t.path)),Error(`EEXIST`)}catch(e){if(e.message!==`ENOENT`)throw e}await r.copyFile(encodeURI(e.path),encodeURI(t.path))}};const b7=Lm({initilize(){dv.register({id:`gitee`,name:`Gitee`,hostname:`gitee.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new O2(k_({getAccessToken:()=>e}),t,n)}),dv.register({id:`github`,name:`GitHub`,hostname:`github.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new O2(UQ({getAccessToken:()=>e}),t,n)}),dv.register({id:`gitcode`,name:`GitCode`,hostname:`gitcode.com`,getProvider:({accessToken:e,owner:t,repo:n})=>new O2(e$({getAccessToken:()=>e}),t,n)}),dv.register({id:`idb`,name:`IndexDB`,getProvider:()=>new y7})}});new URLSearchParams(window.location.search).has(`testMode`)&&oe(()=>import(`https://esm.sh/vconsole@latest`),[]).then(e=>{new e.default}),q.pluginService.use([Km,n$,b7,u1,o2,c2,zq,D2,g2,h2,d2,l1,Vq]),q.taskService.start(),q.layoutService.renderLayout(document.getElementById(`root`));export{RN as $,ln as $t,QH as A,Gl as At,UV as B,os as Bt,vW as C,nu as Ct,$U as D,Xl as Dt,tW as E,Ql as Et,fH as F,_c as Ft,lV as G,xo as Gt,IV as H,is as Ht,oH as I,G as It,iP as J,Hn as Jt,uP as K,yo as Kt,ZV as L,hc as Lt,qH as M,Bl as Mt,GH as N,Ll as Nt,iU as O,Jl as Ot,VH as P,zl as Pt,hN as Q,gn as Qt,JV as R,Ds as Rt,xW as S,K as St,mW as T,$l as Tt,gV as U,Yo as Ut,VV as V,as as Vt,uV as W,Vo as Wt,rP as X,Mn as Xt,tP as Y,Fn as Yt,QN as Z,An as Zt,HW as _,lv as _t,IK as a,qM as at,TW as b,fp as bt,EK as c,kA as ct,UG as d,ME as dt,cn as en,NN as et,BG as f,DE as ft,YW as g,J as gt,$W as h,Rv as ht,FK as i,ZM as it,XH as j,Rl as jt,nU as k,ql as kt,rK as l,OA as lt,sG as m,Lv as mt,Mq as n,pN as nt,LK as o,KM as ot,LG as p,Fw as pt,aP as q,vo as qt,Cq as r,mN as rt,PK as s,oj as st,Nq as t,an as tn,IN as tt,GG as u,DA as ut,VW as v,Og as vt,gW as w,eu as wt,CW as x,pd as xt,OW as y,oh as yt,KV as z,Cs as zt};